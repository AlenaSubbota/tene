(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Dv={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xS=Symbol.for("react.transitional.element"),OS=Symbol.for("react.fragment");function xv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:xS,type:e,key:i,ref:t!==void 0?t:null,props:n}}bc.Fragment=OS;bc.jsx=xv;bc.jsxs=xv;Dv.exports=bc;var b=Dv.exports,Ov={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=Symbol.for("react.transitional.element"),VS=Symbol.for("react.portal"),MS=Symbol.for("react.fragment"),kS=Symbol.for("react.strict_mode"),PS=Symbol.for("react.profiler"),US=Symbol.for("react.consumer"),LS=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),zS=Symbol.for("react.suspense"),BS=Symbol.for("react.memo"),Vv=Symbol.for("react.lazy"),Np=Symbol.iterator;function qS(e){return e===null||typeof e!="object"?null:(e=Np&&e[Np]||e["@@iterator"],typeof e=="function"?e:null)}var Mv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kv=Object.assign,Pv={};function sa(e,t,n){this.props=e,this.context=t,this.refs=Pv,this.updater=n||Mv}sa.prototype.isReactComponent={};sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uv(){}Uv.prototype=sa.prototype;function Bd(e,t,n){this.props=e,this.context=t,this.refs=Pv,this.updater=n||Mv}var qd=Bd.prototype=new Uv;qd.constructor=Bd;kv(qd,sa.prototype);qd.isPureReactComponent=!0;var Dp=Array.isArray,Vt={H:null,A:null,T:null,S:null,V:null},Lv=Object.prototype.hasOwnProperty;function Hd(e,t,n,i,r,s){return n=s.ref,{$$typeof:zd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function HS(e,t){return Hd(e.type,t,void 0,void 0,void 0,e.props)}function Fd(e){return typeof e=="object"&&e!==null&&e.$$typeof===zd}function FS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xp=/\/+/g;function Rh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FS(""+e.key):t.toString(36)}function Op(){}function GS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Op,Op):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function as(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case zd:case VS:a=!0;break;case Vv:return a=e._init,as(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Rh(e,0):i,Dp(r)?(n="",a!=null&&(n=a.replace(xp,"$&/")+"/"),as(r,t,n,"",function(h){return h})):r!=null&&(Fd(r)&&(r=HS(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(xp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Dp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+Rh(i,u),a+=as(i,t,n,s,r);else if(u=qS(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+Rh(i,u++),a+=as(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return as(GS(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Pl(e,t,n){if(e==null)return e;var i=[],r=0;return as(e,i,"","",function(s){return t.call(n,s,r++)}),i}function QS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function YS(){}nt.Children={map:Pl,forEach:function(e,t,n){Pl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Pl(e,function(){t++}),t},toArray:function(e){return Pl(e,function(t){return t})||[]},only:function(e){if(!Fd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=sa;nt.Fragment=MS;nt.Profiler=PS;nt.PureComponent=Bd;nt.StrictMode=kS;nt.Suspense=zS;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Vt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Vt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=kv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Lv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Hd(e.type,r,void 0,void 0,s,i)};nt.createContext=function(e){return e={$$typeof:LS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:US,_context:e},e};nt.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Lv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Hd(e,s,void 0,void 0,null,r)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:jS,render:e}};nt.isValidElement=Fd;nt.lazy=function(e){return{$$typeof:Vv,_payload:{_status:-1,_result:e},_init:QS}};nt.memo=function(e,t){return{$$typeof:BS,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Vt.T,n={};Vt.T=n;try{var i=e(),r=Vt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(YS,Vp)}catch(s){Vp(s)}finally{Vt.T=t}};nt.unstable_useCacheRefresh=function(){return Vt.H.useCacheRefresh()};nt.use=function(e){return Vt.H.use(e)};nt.useActionState=function(e,t,n){return Vt.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Vt.H.useCallback(e,t)};nt.useContext=function(e){return Vt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Vt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Vt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Vt.H.useId()};nt.useImperativeHandle=function(e,t,n){return Vt.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Vt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Vt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Vt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Vt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Vt.H.useReducer(e,t,n)};nt.useRef=function(e){return Vt.H.useRef(e)};nt.useState=function(e){return Vt.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Vt.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Vt.H.useTransition()};nt.version="19.1.1";Ov.exports=nt;var F=Ov.exports,jv={exports:{}},Sc={},zv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,X){var K=j.length;j.push(X);t:for(;0<K;){var mt=K-1>>>1,_t=j[mt];if(0<r(_t,X))j[mt]=X,j[K]=_t,K=mt;else break t}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var X=j[0],K=j.pop();if(K!==X){j[0]=K;t:for(var mt=0,_t=j.length,je=_t>>>1;mt<je;){var kt=2*(mt+1)-1,It=j[kt],Re=kt+1,Zt=j[Re];if(0>r(It,K))Re<_t&&0>r(Zt,It)?(j[mt]=Zt,j[Re]=K,mt=Re):(j[mt]=It,j[kt]=K,mt=kt);else if(Re<_t&&0>r(Zt,K))j[mt]=Zt,j[Re]=K,mt=Re;else break t}}return X}function r(j,X){var K=j.sortIndex-X.sortIndex;return K!==0?K:j.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,D=!1,V=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function x(j){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=j)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function L(j){if(V=!1,x(j),!D)if(n(u)!==null)D=!0,q||(q=!0,C());else{var X=n(h);X!==null&&$t(L,X.startTime-j)}}var q=!1,E=-1,y=5,T=-1;function S(){return M?!0:!(e.unstable_now()-T<y)}function I(){if(M=!1,q){var j=e.unstable_now();T=j;var X=!0;try{t:{D=!1,V&&(V=!1,v(E),E=-1),_=!0;var K=m;try{e:{for(x(j),g=n(u);g!==null&&!(g.expirationTime>j&&S());){var mt=g.callback;if(typeof mt=="function"){g.callback=null,m=g.priorityLevel;var _t=mt(g.expirationTime<=j);if(j=e.unstable_now(),typeof _t=="function"){g.callback=_t,x(j),X=!0;break e}g===n(u)&&i(u),x(j)}else i(u);g=n(u)}if(g!==null)X=!0;else{var je=n(h);je!==null&&$t(L,je.startTime-j),X=!1}}break t}finally{g=null,m=K,_=!1}X=void 0}}finally{X?C():q=!1}}}var C;if(typeof R=="function")C=function(){R(I)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,xt=A.port2;A.port1.onmessage=I,C=function(){xt.postMessage(null)}}else C=function(){w(I,0)};function $t(j,X){E=w(function(){j(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var K=m;m=X;try{return j()}finally{m=K}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(j,X){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var K=m;m=j;try{return X()}finally{m=K}},e.unstable_scheduleCallback=function(j,X,K){var mt=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?mt+K:mt):K=mt,j){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=K+_t,j={id:d++,callback:X,priorityLevel:j,startTime:K,expirationTime:_t,sortIndex:-1},K>mt?(j.sortIndex=K,t(h,j),n(u)===null&&j===n(h)&&(V?(v(E),E=-1):V=!0,$t(L,K-mt))):(j.sortIndex=_t,t(u,j),D||_||(D=!0,q||(q=!0,C()))),j},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(j){var X=m;return function(){var K=m;m=X;try{return j.apply(this,arguments)}finally{m=K}}}})(Bv);zv.exports=Bv;var KS=zv.exports,qv={exports:{}},Oe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS=F;function Hv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function bi(){}var xe={d:{f:bi,r:function(){throw Error(Hv(522))},D:bi,C:bi,L:bi,m:bi,X:bi,S:bi,M:bi},p:0,findDOMNode:null},$S=Symbol.for("react.portal");function ZS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$S,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Za=XS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function wc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Oe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe;Oe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Hv(299));return ZS(e,t,null,n)};Oe.flushSync=function(e){var t=Za.T,n=xe.p;try{if(Za.T=null,xe.p=2,e)return e()}finally{Za.T=t,xe.p=n,xe.d.f()}};Oe.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,xe.d.C(e,t))};Oe.prefetchDNS=function(e){typeof e=="string"&&xe.d.D(e)};Oe.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=wc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?xe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&xe.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Oe.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=wc(t.as,t.crossOrigin);xe.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&xe.d.M(e)};Oe.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=wc(n,t.crossOrigin);xe.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Oe.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=wc(t.as,t.crossOrigin);xe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else xe.d.m(e)};Oe.requestFormReset=function(e){xe.d.r(e)};Oe.unstable_batchedUpdates=function(e,t){return e(t)};Oe.useFormState=function(e,t,n){return Za.H.useFormState(e,t,n)};Oe.useFormStatus=function(){return Za.H.useHostTransitionStatus()};Oe.version="19.1.1";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(e){console.error(e)}}Fv(),qv.exports=Oe;var WS=qv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=KS,Gv=F,JS=WS;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mp(e){if(Go(e)!==e)throw Error(U(188))}function t1(e){var t=e.alternate;if(!t){if(t=Go(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Mp(r),e;if(s===i)return Mp(r),t;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Kv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Kv(e),t!==null)return t;e=e.sibling}return null}var Dt=Object.assign,e1=Symbol.for("react.element"),Ul=Symbol.for("react.transitional.element"),Ha=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),Xv=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),n1=Symbol.for("react.provider"),$v=Symbol.for("react.consumer"),Xn=Symbol.for("react.context"),Gd=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),Qd=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),Af=Symbol.for("react.activity"),i1=Symbol.for("react.memo_cache_sentinel"),kp=Symbol.iterator;function ka(e){return e===null||typeof e!="object"?null:(e=kp&&e[kp]||e["@@iterator"],typeof e=="function"?e:null)}var r1=Symbol.for("react.client.reference");function bf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===r1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ms:return"Fragment";case vf:return"Profiler";case Xv:return"StrictMode";case Ef:return"Suspense";case Tf:return"SuspenseList";case Af:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ha:return"Portal";case Xn:return(e.displayName||"Context")+".Provider";case $v:return(e._context.displayName||"Context")+".Consumer";case Gd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qd:return t=e.displayName||null,t!==null?t:bf(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return bf(e(t))}catch{}}return null}var Fa=Array.isArray,Z=Gv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt=JS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Nr={pending:!1,data:null,method:null,action:null},Sf=[],gs=-1;function Un(e){return{current:e}}function le(e){0>gs||(e.current=Sf[gs],Sf[gs]=null,gs--)}function Mt(e,t){gs++,Sf[gs]=e.current,e.current=t}var Cn=Un(null),Eo=Un(null),qi=Un(null),Iu=Un(null);function Cu(e,t){switch(Mt(qi,t),Mt(Eo,e),Mt(Cn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zy(t),e=d0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(Cn),Mt(Cn,e)}function Bs(){le(Cn),le(Eo),le(qi)}function wf(e){e.memoizedState!==null&&Mt(Iu,e);var t=Cn.current,n=d0(t,e.type);t!==n&&(Mt(Eo,e),Mt(Cn,n))}function Nu(e){Eo.current===e&&(le(Cn),le(Eo)),Iu.current===e&&(le(Iu),Do._currentValue=Nr)}var Rf=Object.prototype.hasOwnProperty,Yd=ne.unstable_scheduleCallback,Ih=ne.unstable_cancelCallback,s1=ne.unstable_shouldYield,a1=ne.unstable_requestPaint,Nn=ne.unstable_now,o1=ne.unstable_getCurrentPriorityLevel,Zv=ne.unstable_ImmediatePriority,Wv=ne.unstable_UserBlockingPriority,Du=ne.unstable_NormalPriority,l1=ne.unstable_LowPriority,Jv=ne.unstable_IdlePriority,u1=ne.log,c1=ne.unstable_setDisableYieldValue,Qo=null,Xe=null;function Ui(e){if(typeof u1=="function"&&c1(e),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Qo,e)}catch{}}var $e=Math.clz32?Math.clz32:d1,h1=Math.log,f1=Math.LN2;function d1(e){return e>>>=0,e===0?32:31-(h1(e)/f1|0)|0}var Ll=256,jl=4194304;function Sr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Sr(i):(a&=l,a!==0?r=Sr(a):n||(n=l&~e,n!==0&&(r=Sr(n))))):(l=i&~s,l!==0?r=Sr(l):a!==0?r=Sr(a):n||(n=i&~e,n!==0&&(r=Sr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function Yo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function m1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tE(){var e=Ll;return Ll<<=1,!(Ll&4194048)&&(Ll=256),e}function eE(){var e=jl;return jl<<=1,!(jl&62914560)&&(jl=4194304),e}function Ch(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ko(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function g1(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-$e(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&nE(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function nE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-$e(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function iE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-$e(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Kd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function rE(){var e=yt.p;return e!==0?e:(e=window.event,e===void 0?32:b0(e.type))}function p1(e,t){var n=yt.p;try{return yt.p=e,t()}finally{yt.p=n}}var dr=Math.random().toString(36).slice(2),be="__reactFiber$"+dr,Ue="__reactProps$"+dr,aa="__reactContainer$"+dr,If="__reactEvents$"+dr,y1="__reactListeners$"+dr,_1="__reactHandles$"+dr,Pp="__reactResources$"+dr,Xo="__reactMarker$"+dr;function $d(e){delete e[be],delete e[Ue],delete e[If],delete e[y1],delete e[_1]}function ps(e){var t=e[be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[be]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hy(e);e!==null;){if(n=e[be])return n;e=Hy(e)}return t}e=n,n=e.parentNode}return null}function oa(e){if(e=e[be]||e[aa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Cs(e){var t=e[Pp];return t||(t=e[Pp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function se(e){e[Xo]=!0}var sE=new Set,aE={};function Qr(e,t){qs(e,t),qs(e+"Capture",t)}function qs(e,t){for(aE[e]=t,e=0;e<t.length;e++)sE.add(t[e])}var v1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Up={},Lp={};function E1(e){return Rf.call(Lp,e)?!0:Rf.call(Up,e)?!1:v1.test(e)?Lp[e]=!0:(Up[e]=!0,!1)}function iu(e,t,n){if(E1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function zl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Gn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Nh,jp;function os(e){if(Nh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Nh=t&&t[1]||"",jp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nh+e+jp}var Dh=!1;function xh(e,t){if(!e||Dh)return"";Dh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Dh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?os(n):""}function T1(e){switch(e.tag){case 26:case 27:case 5:return os(e.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 15:return xh(e.type,!1);case 11:return xh(e.type.render,!1);case 1:return xh(e.type,!0);case 31:return os("Activity");default:return""}}function zp(e){try{var t="";do t+=T1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function A1(e){var t=oE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xu(e){e._valueTracker||(e._valueTracker=A1(e))}function lE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=oE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ou(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var b1=/[\n"\\]/g;function ln(e){return e.replace(b1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Cf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Nf(e,a,sn(t)):n!=null?Nf(e,a,sn(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+sn(l):e.removeAttribute("name")}function uE(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Nf(e,t,n){t==="number"&&Ou(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ns(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function cE(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function hE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Fa(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Hs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var S1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||S1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function fE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Bp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Bp(e,s,t[s])}function Zd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),R1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(e){return R1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Df=null;function Wd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ys=null,Ds=null;function qp(e){var t=oa(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;t:switch(e=t.stateNode,t.type){case"input":if(Cf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ln(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ue]||null;if(!r)throw Error(U(90));Cf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&lE(i)}break t;case"textarea":cE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ns(e,!!n.multiple,t,!1)}}}var Oh=!1;function dE(e,t,n){if(Oh)return e(t,n);Oh=!0;try{var i=e(t);return i}finally{if(Oh=!1,(ys!==null||Ds!==null)&&(Pc(),ys&&(t=ys,e=Ds,Ds=ys=null,qp(t),e)))for(t=0;t<e.length;t++)qp(e[t])}}function To(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ue]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xf=!1;if(si)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){xf=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{xf=!1}var Li=null,Jd=null,su=null;function mE(){if(su)return su;var e,t=Jd,n=t.length,i,r="value"in Li?Li.value:Li.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return su=r.slice(e,1<i?1-i:void 0)}function au(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bl(){return!0}function Hp(){return!1}function Le(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bl:Hp,this.isPropagationStopped=Hp,this}return Dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),t}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=Le(Yr),$o=Dt({},Yr,{view:0,detail:0}),I1=Le($o),Vh,Mh,Ua,Cc=Dt({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ua&&(Ua&&e.type==="mousemove"?(Vh=e.screenX-Ua.screenX,Mh=e.screenY-Ua.screenY):Mh=Vh=0,Ua=e),Vh)},movementY:function(e){return"movementY"in e?e.movementY:Mh}}),Fp=Le(Cc),C1=Dt({},Cc,{dataTransfer:0}),N1=Le(C1),D1=Dt({},$o,{relatedTarget:0}),kh=Le(D1),x1=Dt({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),O1=Le(x1),V1=Dt({},Yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),M1=Le(V1),k1=Dt({},Yr,{data:0}),Gp=Le(k1),P1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=L1[e])?!!t[e]:!1}function tm(){return j1}var z1=Dt({},$o,{key:function(e){if(e.key){var t=P1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=au(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?U1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(e){return e.type==="keypress"?au(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?au(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),B1=Le(z1),q1=Dt({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qp=Le(q1),H1=Dt({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),F1=Le(H1),G1=Dt({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q1=Le(G1),Y1=Dt({},Cc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K1=Le(Y1),X1=Dt({},Yr,{newState:0,oldState:0}),$1=Le(X1),Z1=[9,13,27,32],em=si&&"CompositionEvent"in window,Wa=null;si&&"documentMode"in document&&(Wa=document.documentMode);var W1=si&&"TextEvent"in window&&!Wa,gE=si&&(!em||Wa&&8<Wa&&11>=Wa),Yp=" ",Kp=!1;function pE(e,t){switch(e){case"keyup":return Z1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _s=!1;function J1(e,t){switch(e){case"compositionend":return yE(t);case"keypress":return t.which!==32?null:(Kp=!0,Yp);case"textInput":return e=t.data,e===Yp&&Kp?null:e;default:return null}}function tw(e,t){if(_s)return e==="compositionend"||!em&&pE(e,t)?(e=mE(),su=Jd=Li=null,_s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gE&&t.locale!=="ko"?null:t.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ew[e.type]:t==="textarea"}function _E(e,t,n,i){ys?Ds?Ds.push(i):Ds=[i]:ys=i,t=$u(t,"onChange"),0<t.length&&(n=new Ic("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ja=null,Ao=null;function nw(e){c0(e,0)}function Nc(e){var t=Ga(e);if(lE(t))return e}function $p(e,t){if(e==="change")return t}var vE=!1;if(si){var Ph;if(si){var Uh="oninput"in document;if(!Uh){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),Uh=typeof Zp.oninput=="function"}Ph=Uh}else Ph=!1;vE=Ph&&(!document.documentMode||9<document.documentMode)}function Wp(){Ja&&(Ja.detachEvent("onpropertychange",EE),Ao=Ja=null)}function EE(e){if(e.propertyName==="value"&&Nc(Ao)){var t=[];_E(t,Ao,e,Wd(e)),dE(nw,t)}}function iw(e,t,n){e==="focusin"?(Wp(),Ja=t,Ao=n,Ja.attachEvent("onpropertychange",EE)):e==="focusout"&&Wp()}function rw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nc(Ao)}function sw(e,t){if(e==="click")return Nc(t)}function aw(e,t){if(e==="input"||e==="change")return Nc(t)}function ow(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:ow;function bo(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Rf.call(t,r)||!en(e[r],t[r]))return!1}return!0}function Jp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ty(e,t){var n=Jp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Jp(n)}}function TE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?TE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ou(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ou(e.document)}return t}function nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var lw=si&&"documentMode"in document&&11>=document.documentMode,vs=null,Of=null,to=null,Vf=!1;function ey(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vf||vs==null||vs!==Ou(i)||(i=vs,"selectionStart"in i&&nm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),to&&bo(to,i)||(to=i,i=$u(Of,"onSelect"),0<i.length&&(t=new Ic("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=vs)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Es={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},Lh={},bE={};si&&(bE=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Kr(e){if(Lh[e])return Lh[e];if(!Es[e])return e;var t=Es[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bE)return Lh[e]=t[n];return e}var SE=Kr("animationend"),wE=Kr("animationiteration"),RE=Kr("animationstart"),uw=Kr("transitionrun"),cw=Kr("transitionstart"),hw=Kr("transitioncancel"),IE=Kr("transitionend"),CE=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function An(e,t){CE.set(e,t),Qr(t,[e])}var ny=new WeakMap;function un(e,t){if(typeof e=="object"&&e!==null){var n=ny.get(e);return n!==void 0?n:(t={value:e,source:t,stack:zp(t)},ny.set(e,t),t)}return{value:e,source:t,stack:zp(t)}}var rn=[],Ts=0,im=0;function Dc(){for(var e=Ts,t=im=Ts=0;t<e;){var n=rn[t];rn[t++]=null;var i=rn[t];rn[t++]=null;var r=rn[t];rn[t++]=null;var s=rn[t];if(rn[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&NE(n,r,s)}}function xc(e,t,n,i){rn[Ts++]=e,rn[Ts++]=t,rn[Ts++]=n,rn[Ts++]=i,im|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function rm(e,t,n,i){return xc(e,t,n,i),Vu(e)}function la(e,t){return xc(e,null,null,t),Vu(e)}function NE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-$e(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Vu(e){if(50<co)throw co=0,ed=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var As={};function fw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,t,n,i){return new fw(e,t,n,i)}function sm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ni(e,t){var n=e.alternate;return n===null?(n=Qe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function DE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ou(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")sm(e)&&(a=1);else if(typeof e=="string")a=mR(e,n,Cn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Af:return e=Qe(31,n,t,r),e.elementType=Af,e.lanes=s,e;case ms:return Dr(n.children,r,s,t);case Xv:a=8,r|=24;break;case vf:return e=Qe(12,n,t,r|2),e.elementType=vf,e.lanes=s,e;case Ef:return e=Qe(13,n,t,r),e.elementType=Ef,e.lanes=s,e;case Tf:return e=Qe(19,n,t,r),e.elementType=Tf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case n1:case Xn:a=10;break t;case $v:a=9;break t;case Gd:a=11;break t;case Qd:a=14;break t;case Ii:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Qe(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Dr(e,t,n,i){return e=Qe(7,e,i,t),e.lanes=n,e}function jh(e,t,n){return e=Qe(6,e,null,t),e.lanes=n,e}function zh(e,t,n){return t=Qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var bs=[],Ss=0,Mu=null,ku=0,an=[],on=0,xr=null,$n=1,Zn="";function wr(e,t){bs[Ss++]=ku,bs[Ss++]=Mu,Mu=e,ku=t}function xE(e,t,n){an[on++]=$n,an[on++]=Zn,an[on++]=xr,xr=e;var i=$n;e=Zn;var r=32-$e(i)-1;i&=~(1<<r),n+=1;var s=32-$e(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,$n=1<<32-$e(t)+r|n<<r|i,Zn=s+e}else $n=1<<s|n<<r|i,Zn=e}function am(e){e.return!==null&&(wr(e,1),xE(e,1,0))}function om(e){for(;e===Mu;)Mu=bs[--Ss],bs[Ss]=null,ku=bs[--Ss],bs[Ss]=null;for(;e===xr;)xr=an[--on],an[on]=null,Zn=an[--on],an[on]=null,$n=an[--on],an[on]=null}var Ne=null,zt=null,pt=!1,Or=null,Rn=!1,kf=Error(U(519));function Pr(e){var t=Error(U(418,""));throw So(un(t,e)),kf}function iy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[be]=e,t[Ue]=i,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<Io.length;n++)rt(Io[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),uE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),xu(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),hE(t,i.value,i.defaultValue,i.children),xu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||f0(t.textContent,n)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=jc),t=!0):t=!1,t||Pr(e)}function ry(e){for(Ne=e.return;Ne;)switch(Ne.tag){case 5:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Ne=Ne.return}}function La(e){if(e!==Ne)return!1;if(!pt)return ry(e),pt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||od(e.type,e.memoizedProps)),n=!n),n&&zt&&Pr(e),ry(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){zt=En(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}zt=null}}else t===27?(t=zt,mr(e.type)?(e=cd,cd=null,zt=e):zt=t):zt=Ne?En(e.stateNode.nextSibling):null;return!0}function Zo(){zt=Ne=null,pt=!1}function sy(){var e=Or;return e!==null&&(ke===null?ke=e:ke.push.apply(ke,e),Or=null),e}function So(e){Or===null?Or=[e]:Or.push(e)}var Pf=Un(null),Xr=null,Wn=null;function Ni(e,t,n){Mt(Pf,t._currentValue),t._currentValue=n}function ii(e){e._currentValue=Pf.current,le(Pf)}function Uf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Lf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Uf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(U(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Uf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Wo(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=r.type;en(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Iu.current){if(a=r.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Do):e=[Do])}r=r.return}e!==null&&Lf(t,e,n,i),t.flags|=262144}function Pu(e){for(e=e.firstContext;e!==null;){if(!en(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ur(e){Xr=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return OE(Xr,e)}function ql(e,t){return Xr===null&&Ur(e),OE(e,t)}function OE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Wn===null){if(e===null)throw Error(U(308));Wn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wn=Wn.next=t;return n}var dw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},mw=ne.unstable_scheduleCallback,gw=ne.unstable_NormalPriority,Jt={$$typeof:Xn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new dw,data:new Map,refCount:0}}function Jo(e){e.refCount--,e.refCount===0&&mw(gw,function(){e.controller.abort()})}var eo=null,jf=0,Fs=0,xs=null;function pw(e,t){if(eo===null){var n=eo=[];jf=0,Fs=xm(),xs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return jf++,t.then(ay,ay),t}function ay(){if(--jf===0&&eo!==null){xs!==null&&(xs.status="fulfilled");var e=eo;eo=null,Fs=0,xs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function yw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var oy=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&pw(e,t),oy!==null&&oy(e,t)};var Vr=Un(null);function um(){var e=Vr.current;return e!==null?e:Rt.pooledCache}function lu(e,t){t===null?Mt(Vr,Vr.current):Mt(Vr,t.pool)}function VE(){var e=um();return e===null?null:{parent:Jt._currentValue,pool:e}}var tl=Error(U(460)),ME=Error(U(474)),Oc=Error(U(542)),zf={then:function(){}};function ly(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hl(){}function kE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Hl,Hl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cy(e),e;default:if(typeof t.status=="string")t.then(Hl,Hl);else{if(e=Rt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cy(e),e}throw no=t,tl}}var no=null;function uy(){if(no===null)throw Error(U(459));var e=no;return no=null,e}function cy(e){if(e===tl||e===Oc)throw Error(U(483))}var Ci=!1;function cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Et&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Vu(e),NE(e,null,n),t}return xc(e,i,t,n),Vu(e)}function io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,iE(e,n)}}function Bh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var qf=!1;function ro(){if(qf){var e=xs;if(e!==null)throw e}}function so(e,t,n,i){qf=!1;var r=e.updateQueue;Ci=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(ht&m)===m:(i&m)===m){m!==0&&m===Fs&&(qf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(D=V.payload,typeof D=="function"){g=D.call(M,g,m);break t}g=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,m=typeof D=="function"?D.call(M,g,m):D,m==null)break t;g=Dt({},g,m);break t;case 2:Ci=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),sr|=a,e.lanes=a,e.memoizedState=g}}function PE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function UE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)PE(n[e],t)}var Gs=Un(null),Uu=Un(0);function hy(e,t){e=li,Mt(Uu,e),Mt(Gs,t),li=e|t.baseLanes}function Hf(){Mt(Uu,li),Mt(Gs,Gs.current)}function hm(){li=Uu.current,le(Gs),le(Uu)}var ir=0,it=null,At=null,Qt=null,Lu=!1,Os=!1,Lr=!1,ju=0,wo=0,Vs=null,_w=0;function qt(){throw Error(U(321))}function fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function dm(e,t,n,i,r,s){return ir=s,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?mT:gT,Lr=!1,s=n(i,r),Lr=!1,Os&&(s=jE(t,n,i,r)),LE(e),s}function LE(e){Z.H=zu;var t=At!==null&&At.next!==null;if(ir=0,Qt=At=it=null,Lu=!1,wo=0,Vs=null,t)throw Error(U(300));e===null||oe||(e=e.dependencies,e!==null&&Pu(e)&&(oe=!0))}function jE(e,t,n,i){it=e;var r=0;do{if(Os&&(Vs=null),wo=0,Os=!1,25<=r)throw Error(U(301));if(r+=1,Qt=At=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Z.H=ww,s=t(n,i)}while(Os);return s}function vw(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?el(t):t,e=e.useState()[0],(At!==null?At.memoizedState:null)!==e&&(it.flags|=1024),t}function mm(){var e=ju!==0;return ju=0,e}function gm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function pm(e){if(Lu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Lu=!1}ir=0,Qt=At=it=null,Os=!1,wo=ju=0,Vs=null}function Ve(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?it.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function Xt(){if(At===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Qt===null?it.memoizedState:Qt.next;if(t!==null)Qt=t,At=e;else{if(e===null)throw it.alternate===null?Error(U(467)):Error(U(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Qt===null?it.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(e){var t=wo;return wo+=1,Vs===null&&(Vs=[]),e=kE(Vs,e,t),t=it,(Qt===null?t.memoizedState:Qt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?mT:gT),e}function Vc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return el(e);if(e.$$typeof===Xn)return Se(e)}throw Error(U(438,String(e)))}function _m(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ym(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=i1;return t.index++,n}function ai(e,t){return typeof t=="function"?t(e):t}function uu(e){var t=Xt();return vm(t,At,e)}function vm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ht&g)===g:(ir&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Fs&&(d=!0);else if((ir&m)===m){h=h.next,m===Fs&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,it.lanes|=m,sr|=m;g=h.action,Lr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,it.lanes|=g,sr|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!en(s,e.memoizedState)&&(oe=!0,d&&(n=xs,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function qh(e){var t=Xt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);en(s,t.memoizedState)||(oe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function zE(e,t,n){var i=it,r=Xt(),s=pt;if(s){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!en((At||r).memoizedState,n);a&&(r.memoizedState=n,oe=!0),r=r.queue;var l=HE.bind(null,i,r,e);if(nl(2048,8,l,[e]),r.getSnapshot!==t||a||Qt!==null&&Qt.memoizedState.tag&1){if(i.flags|=2048,Qs(9,Mc(),qE.bind(null,i,r,n,t),null),Rt===null)throw Error(U(349));s||ir&124||BE(i,t,n)}return n}function BE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=ym(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qE(e,t,n,i){t.value=n,t.getSnapshot=i,FE(t)&&GE(e)}function HE(e,t,n){return n(function(){FE(t)&&GE(e)})}function FE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!en(e,n)}catch{return!0}}function GE(e){var t=la(e,2);t!==null&&We(t,e,2)}function Ff(e){var t=Ve();if(typeof e=="function"){var n=e;if(e=n(),Lr){Ui(!0);try{n()}finally{Ui(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:e},t}function QE(e,t,n,i){return e.baseState=n,vm(e,At,typeof i=="function"?i:ai)}function Ew(e,t,n,i,r){if(kc(e))throw Error(U(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Z.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,YE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function YE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Z.T,a={};Z.T=a;try{var l=n(r,i),u=Z.S;u!==null&&u(a,l),fy(e,t,l)}catch(h){Gf(e,t,h)}finally{Z.T=s}}else try{s=n(r,i),fy(e,t,s)}catch(h){Gf(e,t,h)}}function fy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){dy(e,t,i)},function(i){return Gf(e,t,i)}):dy(e,t,n)}function dy(e,t,n){t.status="fulfilled",t.value=n,KE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,YE(e,n)))}function Gf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,KE(t),t=t.next;while(t!==i)}e.action=null}function KE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function XE(e,t){return t}function my(e,t){if(pt){var n=Rt.formState;if(n!==null){t:{var i=it;if(pt){if(zt){e:{for(var r=zt,s=Rn;r.nodeType!==8;){if(!s){r=null;break e}if(r=En(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){zt=En(r.nextSibling),i=r.data==="F!";break t}}Pr(i)}i=!1}i&&(t=n[0])}}return n=Ve(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XE,lastRenderedState:t},n.queue=i,n=hT.bind(null,it,i),i.dispatch=n,i=Ff(!1),s=bm.bind(null,it,!1,i.queue),i=Ve(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Ew.bind(null,it,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function gy(e){var t=Xt();return $E(t,At,e)}function $E(e,t,n){if(t=vm(e,t,XE)[0],e=uu(ai)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=el(t)}catch(a){throw a===tl?Oc:a}else i=t;t=Xt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Qs(9,Mc(),Tw.bind(null,r,n),null)),[i,s,e]}function Tw(e,t){e.action=t}function py(e){var t=Xt(),n=At;if(n!==null)return $E(t,n,e);Xt(),t=t.memoizedState,n=Xt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Qs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=ym(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Mc(){return{destroy:void 0,resource:void 0}}function ZE(){return Xt().memoizedState}function cu(e,t,n,i){var r=Ve();i=i===void 0?null:i,it.flags|=e,r.memoizedState=Qs(1|t,Mc(),n,i)}function nl(e,t,n,i){var r=Xt();i=i===void 0?null:i;var s=r.memoizedState.inst;At!==null&&i!==null&&fm(i,At.memoizedState.deps)?r.memoizedState=Qs(t,s,n,i):(it.flags|=e,r.memoizedState=Qs(1|t,s,n,i))}function yy(e,t){cu(8390656,8,e,t)}function WE(e,t){nl(2048,8,e,t)}function JE(e,t){return nl(4,2,e,t)}function tT(e,t){return nl(4,4,e,t)}function eT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nT(e,t,n){n=n!=null?n.concat([e]):null,nl(4,4,eT.bind(null,t,e),n)}function Em(){}function iT(e,t){var n=Xt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&fm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rT(e,t){var n=Xt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&fm(t,i[1]))return i[0];if(i=e(),Lr){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i}function Tm(e,t,n){return n===void 0||ir&1073741824?e.memoizedState=t:(e.memoizedState=n,e=KT(),it.lanes|=e,sr|=e,n)}function sT(e,t,n,i){return en(n,t)?n:Gs.current!==null?(e=Tm(e,n,i),en(e,t)||(oe=!0),e):ir&42?(e=KT(),it.lanes|=e,sr|=e,t):(oe=!0,e.memoizedState=n)}function aT(e,t,n,i,r){var s=yt.p;yt.p=s!==0&&8>s?s:8;var a=Z.T,l={};Z.T=l,bm(e,!1,t,n);try{var u=r(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=yw(u,i);ao(e,t,d,Ze(e))}else ao(e,t,i,Ze(e))}catch(g){ao(e,t,{then:function(){},status:"rejected",reason:g},Ze())}finally{yt.p=s,Z.T=a}}function Aw(){}function Qf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var r=oT(e).queue;aT(e,r,t,Nr,n===null?Aw:function(){return lT(e),n(i)})}function oT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Nr,baseState:Nr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:Nr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lT(e){var t=oT(e).next.queue;ao(e,t,{},Ze())}function Am(){return Se(Do)}function uT(){return Xt().memoizedState}function cT(){return Xt().memoizedState}function bw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ze();e=Hi(n);var i=Fi(t,e,n);i!==null&&(We(i,t,n),io(i,t,n)),t={cache:lm()},e.payload=t;return}t=t.return}}function Sw(e,t,n){var i=Ze();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},kc(e)?fT(t,n):(n=rm(e,t,n,i),n!==null&&(We(n,e,i),dT(n,t,i)))}function hT(e,t,n){var i=Ze();ao(e,t,n,i)}function ao(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(kc(e))fT(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,en(l,a))return xc(e,t,r,0),Rt===null&&Dc(),!1}catch{}finally{}if(n=rm(e,t,r,i),n!==null)return We(n,e,i),dT(n,t,i),!0}return!1}function bm(e,t,n,i){if(i={lane:2,revertLane:xm(),action:i,hasEagerState:!1,eagerState:null,next:null},kc(e)){if(t)throw Error(U(479))}else t=rm(e,n,i,2),t!==null&&We(t,e,2)}function kc(e){var t=e.alternate;return e===it||t!==null&&t===it}function fT(e,t){Os=Lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,iE(e,n)}}var zu={readContext:Se,use:Vc,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},mT={readContext:Se,use:Vc,useCallback:function(e,t){return Ve().memoizedState=[e,t===void 0?null:t],e},useContext:Se,useEffect:yy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,cu(4194308,4,eT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cu(4194308,4,e,t)},useInsertionEffect:function(e,t){cu(4,2,e,t)},useMemo:function(e,t){var n=Ve();t=t===void 0?null:t;var i=e();if(Lr){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ve();if(n!==void 0){var r=n(t);if(Lr){Ui(!0);try{n(t)}finally{Ui(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Sw.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Ve();return e={current:e},t.memoizedState=e},useState:function(e){e=Ff(e);var t=e.queue,n=hT.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Em,useDeferredValue:function(e,t){var n=Ve();return Tm(n,e,t)},useTransition:function(){var e=Ff(!1);return e=aT.bind(null,it,e.queue,!0,!1),Ve().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,r=Ve();if(pt){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Rt===null)throw Error(U(349));ht&124||BE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,yy(HE.bind(null,i,s,e),[e]),i.flags|=2048,Qs(9,Mc(),qE.bind(null,i,s,n,t),null),n},useId:function(){var e=Ve(),t=Rt.identifierPrefix;if(pt){var n=Zn,i=$n;n=(i&~(1<<32-$e(i)-1)).toString(32)+n,t=""+t+"R"+n,n=ju++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=_w++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Am,useFormState:my,useActionState:my,useOptimistic:function(e){var t=Ve();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=bm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:_m,useCacheRefresh:function(){return Ve().memoizedState=bw.bind(null,it)}},gT={readContext:Se,use:Vc,useCallback:iT,useContext:Se,useEffect:WE,useImperativeHandle:nT,useInsertionEffect:JE,useLayoutEffect:tT,useMemo:rT,useReducer:uu,useRef:ZE,useState:function(){return uu(ai)},useDebugValue:Em,useDeferredValue:function(e,t){var n=Xt();return sT(n,At.memoizedState,e,t)},useTransition:function(){var e=uu(ai)[0],t=Xt().memoizedState;return[typeof e=="boolean"?e:el(e),t]},useSyncExternalStore:zE,useId:uT,useHostTransitionStatus:Am,useFormState:gy,useActionState:gy,useOptimistic:function(e,t){var n=Xt();return QE(n,At,e,t)},useMemoCache:_m,useCacheRefresh:cT},ww={readContext:Se,use:Vc,useCallback:iT,useContext:Se,useEffect:WE,useImperativeHandle:nT,useInsertionEffect:JE,useLayoutEffect:tT,useMemo:rT,useReducer:qh,useRef:ZE,useState:function(){return qh(ai)},useDebugValue:Em,useDeferredValue:function(e,t){var n=Xt();return At===null?Tm(n,e,t):sT(n,At.memoizedState,e,t)},useTransition:function(){var e=qh(ai)[0],t=Xt().memoizedState;return[typeof e=="boolean"?e:el(e),t]},useSyncExternalStore:zE,useId:uT,useHostTransitionStatus:Am,useFormState:py,useActionState:py,useOptimistic:function(e,t){var n=Xt();return At!==null?QE(n,At,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:_m,useCacheRefresh:cT},Ms=null,Ro=0;function Fl(e){var t=Ro;return Ro+=1,Ms===null&&(Ms=[]),kE(Ms,e,t)}function ja(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gl(e,t){throw t.$$typeof===e1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _y(e){var t=e._init;return t(e._payload)}function pT(e){function t(w,v){if(e){var R=w.deletions;R===null?(w.deletions=[v],w.flags|=16):R.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function i(w){for(var v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(w,v){return w=ni(w,v),w.index=0,w.sibling=null,w}function s(w,v,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<v?(w.flags|=67108866,v):R):(w.flags|=67108866,v)):(w.flags|=1048576,v)}function a(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function l(w,v,R,x){return v===null||v.tag!==6?(v=jh(R,w.mode,x),v.return=w,v):(v=r(v,R),v.return=w,v)}function u(w,v,R,x){var L=R.type;return L===ms?d(w,v,R.props.children,x,R.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ii&&_y(L)===v.type)?(v=r(v,R.props),ja(v,R),v.return=w,v):(v=ou(R.type,R.key,R.props,null,w.mode,x),ja(v,R),v.return=w,v)}function h(w,v,R,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=zh(R,w.mode,x),v.return=w,v):(v=r(v,R.children||[]),v.return=w,v)}function d(w,v,R,x,L){return v===null||v.tag!==7?(v=Dr(R,w.mode,x,L),v.return=w,v):(v=r(v,R),v.return=w,v)}function g(w,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=jh(""+v,w.mode,R),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ul:return R=ou(v.type,v.key,v.props,null,w.mode,R),ja(R,v),R.return=w,R;case Ha:return v=zh(v,w.mode,R),v.return=w,v;case Ii:var x=v._init;return v=x(v._payload),g(w,v,R)}if(Fa(v)||ka(v))return v=Dr(v,w.mode,R,null),v.return=w,v;if(typeof v.then=="function")return g(w,Fl(v),R);if(v.$$typeof===Xn)return g(w,ql(w,v),R);Gl(w,v)}return null}function m(w,v,R,x){var L=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(w,v,""+R,x);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ul:return R.key===L?u(w,v,R,x):null;case Ha:return R.key===L?h(w,v,R,x):null;case Ii:return L=R._init,R=L(R._payload),m(w,v,R,x)}if(Fa(R)||ka(R))return L!==null?null:d(w,v,R,x,null);if(typeof R.then=="function")return m(w,v,Fl(R),x);if(R.$$typeof===Xn)return m(w,v,ql(w,R),x);Gl(w,R)}return null}function _(w,v,R,x,L){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return w=w.get(R)||null,l(v,w,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ul:return w=w.get(x.key===null?R:x.key)||null,u(v,w,x,L);case Ha:return w=w.get(x.key===null?R:x.key)||null,h(v,w,x,L);case Ii:var q=x._init;return x=q(x._payload),_(w,v,R,x,L)}if(Fa(x)||ka(x))return w=w.get(R)||null,d(v,w,x,L,null);if(typeof x.then=="function")return _(w,v,R,Fl(x),L);if(x.$$typeof===Xn)return _(w,v,R,ql(v,x),L);Gl(v,x)}return null}function D(w,v,R,x){for(var L=null,q=null,E=v,y=v=0,T=null;E!==null&&y<R.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var S=m(w,E,R[y],x);if(S===null){E===null&&(E=T);break}e&&E&&S.alternate===null&&t(w,E),v=s(S,v,y),q===null?L=S:q.sibling=S,q=S,E=T}if(y===R.length)return n(w,E),pt&&wr(w,y),L;if(E===null){for(;y<R.length;y++)E=g(w,R[y],x),E!==null&&(v=s(E,v,y),q===null?L=E:q.sibling=E,q=E);return pt&&wr(w,y),L}for(E=i(E);y<R.length;y++)T=_(E,w,y,R[y],x),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?y:T.key),v=s(T,v,y),q===null?L=T:q.sibling=T,q=T);return e&&E.forEach(function(I){return t(w,I)}),pt&&wr(w,y),L}function V(w,v,R,x){if(R==null)throw Error(U(151));for(var L=null,q=null,E=v,y=v=0,T=null,S=R.next();E!==null&&!S.done;y++,S=R.next()){E.index>y?(T=E,E=null):T=E.sibling;var I=m(w,E,S.value,x);if(I===null){E===null&&(E=T);break}e&&E&&I.alternate===null&&t(w,E),v=s(I,v,y),q===null?L=I:q.sibling=I,q=I,E=T}if(S.done)return n(w,E),pt&&wr(w,y),L;if(E===null){for(;!S.done;y++,S=R.next())S=g(w,S.value,x),S!==null&&(v=s(S,v,y),q===null?L=S:q.sibling=S,q=S);return pt&&wr(w,y),L}for(E=i(E);!S.done;y++,S=R.next())S=_(E,w,y,S.value,x),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?y:S.key),v=s(S,v,y),q===null?L=S:q.sibling=S,q=S);return e&&E.forEach(function(C){return t(w,C)}),pt&&wr(w,y),L}function M(w,v,R,x){if(typeof R=="object"&&R!==null&&R.type===ms&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ul:t:{for(var L=R.key;v!==null;){if(v.key===L){if(L=R.type,L===ms){if(v.tag===7){n(w,v.sibling),x=r(v,R.props.children),x.return=w,w=x;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ii&&_y(L)===v.type){n(w,v.sibling),x=r(v,R.props),ja(x,R),x.return=w,w=x;break t}n(w,v);break}else t(w,v);v=v.sibling}R.type===ms?(x=Dr(R.props.children,w.mode,x,R.key),x.return=w,w=x):(x=ou(R.type,R.key,R.props,null,w.mode,x),ja(x,R),x.return=w,w=x)}return a(w);case Ha:t:{for(L=R.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(w,v.sibling),x=r(v,R.children||[]),x.return=w,w=x;break t}else{n(w,v);break}else t(w,v);v=v.sibling}x=zh(R,w.mode,x),x.return=w,w=x}return a(w);case Ii:return L=R._init,R=L(R._payload),M(w,v,R,x)}if(Fa(R))return D(w,v,R,x);if(ka(R)){if(L=ka(R),typeof L!="function")throw Error(U(150));return R=L.call(R),V(w,v,R,x)}if(typeof R.then=="function")return M(w,v,Fl(R),x);if(R.$$typeof===Xn)return M(w,v,ql(w,R),x);Gl(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(w,v.sibling),x=r(v,R),x.return=w,w=x):(n(w,v),x=jh(R,w.mode,x),x.return=w,w=x),a(w)):n(w,v)}return function(w,v,R,x){try{Ro=0;var L=M(w,v,R,x);return Ms=null,L}catch(E){if(E===tl||E===Oc)throw E;var q=Qe(29,E,null,w.mode);return q.lanes=x,q.return=w,q}finally{}}}var Ys=pT(!0),yT=pT(!1),hn=Un(null),Dn=null;function Di(e){var t=e.alternate;Mt(te,te.current&1),Mt(hn,e),Dn===null&&(t===null||Gs.current!==null||t.memoizedState!==null)&&(Dn=e)}function _T(e){if(e.tag===22){if(Mt(te,te.current),Mt(hn,e),Dn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Dn=e)}}else xi()}function xi(){Mt(te,te.current),Mt(hn,hn.current)}function Jn(e){le(hn),Dn===e&&(Dn=null),le(te)}var te=Un(0);function Bu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ud(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Hh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Dt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ze(),r=Hi(i);r.payload=t,n!=null&&(r.callback=n),t=Fi(e,r,i),t!==null&&(We(t,e,i),io(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ze(),r=Hi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Fi(e,r,i),t!==null&&(We(t,e,i),io(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ze(),i=Hi(n);i.tag=2,t!=null&&(i.callback=t),t=Fi(e,i,n),t!==null&&(We(t,e,n),io(t,e,n))}};function vy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!bo(n,i)||!bo(r,s):!0}function Ey(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Yf.enqueueReplaceState(t,t.state,null)}function jr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Dt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var qu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function vT(e){qu(e)}function ET(e){console.error(e)}function TT(e){qu(e)}function Hu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ty(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Kf(e,t,n){return n=Hi(n),n.tag=3,n.payload={element:null},n.callback=function(){Hu(e,t)},n}function AT(e){return e=Hi(e),e.tag=3,e}function bT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Ty(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Ty(t,n,i),typeof r!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Rw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Wo(t,n,r,!0),n=hn.current,n!==null){switch(n.tag){case 13:return Dn===null?nd():n.alternate===null&&Bt===0&&(Bt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===zf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),tf(e,i,r)),!1;case 22:return n.flags|=65536,i===zf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),tf(e,i,r)),!1}throw Error(U(435,n.tag))}return tf(e,i,r),nd(),!1}if(pt)return t=hn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==kf&&(e=Error(U(422),{cause:i}),So(un(e,n)))):(i!==kf&&(t=Error(U(423),{cause:i}),So(un(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=un(i,n),r=Kf(e.stateNode,i,r),Bh(e,r),Bt!==4&&(Bt=2)),!1;var s=Error(U(520),{cause:i});if(s=un(s,n),uo===null?uo=[s]:uo.push(s),Bt!==4&&(Bt=2),t===null)return!0;i=un(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Kf(n.stateNode,i,e),Bh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Gi===null||!Gi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=AT(r),bT(r,e,n,i),Bh(n,r),!1}n=n.return}while(n!==null);return!1}var ST=Error(U(461)),oe=!1;function fe(e,t,n,i){t.child=e===null?yT(t,null,n,i):Ys(t,e.child,n,i)}function Ay(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Ur(t),i=dm(e,t,n,a,s,r),l=mm(),e!==null&&!oe?(gm(e,t,r),oi(e,t,r)):(pt&&l&&am(t),t.flags|=1,fe(e,t,i,r),t.child)}function by(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!sm(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,wT(e,t,s,i,r)):(e=ou(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Sm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(a,i)&&e.ref===t.ref)return oi(e,t,r)}return t.flags|=1,e=ni(s,i),e.ref=t.ref,e.return=t,t.child=e}function wT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(bo(s,i)&&e.ref===t.ref)if(oe=!1,t.pendingProps=i=s,Sm(e,r))e.flags&131072&&(oe=!0);else return t.lanes=e.lanes,oi(e,t,r)}return Xf(e,t,n,i,r)}function RT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Sy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&lu(t,s!==null?s.cachePool:null),s!==null?hy(t,s):Hf(),_T(t);else return t.lanes=t.childLanes=536870912,Sy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(lu(t,s.cachePool),hy(t,s),xi(),t.memoizedState=null):(e!==null&&lu(t,null),Hf(),xi());return fe(e,t,r,n),t.child}function Sy(e,t,n,i){var r=um();return r=r===null?null:{parent:Jt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&lu(t,null),Hf(),_T(t),e!==null&&Wo(e,t,i,!0),null}function hu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Xf(e,t,n,i,r){return Ur(t),n=dm(e,t,n,i,void 0,r),i=mm(),e!==null&&!oe?(gm(e,t,r),oi(e,t,r)):(pt&&i&&am(t),t.flags|=1,fe(e,t,n,r),t.child)}function wy(e,t,n,i,r,s){return Ur(t),t.updateQueue=null,n=jE(t,i,n,r),LE(e),i=mm(),e!==null&&!oe?(gm(e,t,s),oi(e,t,s)):(pt&&i&&am(t),t.flags|=1,fe(e,t,n,s),t.child)}function Ry(e,t,n,i,r){if(Ur(t),t.stateNode===null){var s=As,a=n.contextType;typeof a=="object"&&a!==null&&(s=Se(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Yf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},cm(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Se(a):As,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Hh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Yf.enqueueReplaceState(s,s.state,null),so(t,i,s,r),ro(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=jr(n,l);s.props=u;var h=s.context,d=n.contextType;a=As,typeof d=="object"&&d!==null&&(a=Se(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Ey(t,s,i,a),Ci=!1;var m=t.memoizedState;s.state=m,so(t,i,s,r),ro(),h=t.memoizedState,l||m!==h||Ci?(typeof g=="function"&&(Hh(t,n,g,i),h=t.memoizedState),(u=Ci||vy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Bf(e,t),a=t.memoizedProps,d=jr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=As,typeof h=="object"&&h!==null&&(u=Se(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Ey(t,s,i,u),Ci=!1,m=t.memoizedState,s.state=m,so(t,i,s,r),ro();var _=t.memoizedState;a!==g||m!==_||Ci||e!==null&&e.dependencies!==null&&Pu(e.dependencies)?(typeof l=="function"&&(Hh(t,n,l,i),_=t.memoizedState),(d=Ci||vy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Pu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,hu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Ys(t,e.child,null,r),t.child=Ys(t,null,n,r)):fe(e,t,n,r),t.memoizedState=s.state,e=t.child):e=oi(e,t,r),e}function Iy(e,t,n,i){return Zo(),t.flags|=256,fe(e,t,n,i),t.child}var Fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(e){return{baseLanes:e,cachePool:VE()}}function Qh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=cn),e}function IT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(te.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(pt){if(r?Di(t):xi(),pt){var l=zt,u;if(u=l){t:{for(u=l,l=Rn;u.nodeType!==8;){if(!l){l=null;break t}if(u=En(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:xr!==null?{id:$n,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},u=Qe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ne=t,zt=null,u=!0):u=!1}u||Pr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ud(l)?t.lanes=32:t.lanes=536870912,null;Jn(t)}return l=i.children,i=i.fallback,r?(xi(),r=t.mode,l=Fu({mode:"hidden",children:l},r),i=Dr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Gh(n),r.childLanes=Qh(e,a,n),t.memoizedState=Fh,i):(Di(t),$f(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Di(t),t.flags&=-257,t=Yh(e,t,n)):t.memoizedState!==null?(xi(),t.child=e.child,t.flags|=128,t=null):(xi(),r=i.fallback,l=t.mode,i=Fu({mode:"visible",children:i.children},l),r=Dr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Ys(t,e.child,null,n),i=t.child,i.memoizedState=Gh(n),i.childLanes=Qh(e,a,n),t.memoizedState=Fh,t=r);else if(Di(t),ud(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,So({value:i,source:null,stack:null}),t=Yh(e,t,n)}else if(oe||Wo(e,t,n,!1),a=(n&e.childLanes)!==0,oe||a){if(a=Rt,a!==null&&(i=n&-n,i=i&42?1:Kd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,la(e,i),We(a,e,i),ST;l.data==="$?"||nd(),t=Yh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,zt=En(l.nextSibling),Ne=t,pt=!0,Or=null,Rn=!1,e!==null&&(an[on++]=$n,an[on++]=Zn,an[on++]=xr,$n=e.id,Zn=e.overflow,xr=t),t=$f(t,i.children),t.flags|=4096);return t}return r?(xi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ni(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=ni(h,r):(r=Dr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Gh(n):(u=l.cachePool,u!==null?(h=Jt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=VE(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Qh(e,a,n),t.memoizedState=Fh,i):(Di(t),n=e.child,e=n.sibling,n=ni(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function $f(e,t){return t=Fu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Fu(e,t){return e=Qe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Yh(e,t,n){return Ys(t,e.child,null,n),e=$f(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Uf(e.return,t,n)}function Kh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function CT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(fe(e,t,i.children,n),i=te.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cy(e,n,t);else if(e.tag===19)Cy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Mt(te,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Bu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Kh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Bu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Kh(t,!0,n,null,s);break;case"together":Kh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sr|=t.lanes,!(n&t.childLanes))if(e!==null){if(Wo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=ni(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ni(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Pu(e)))}function Iw(e,t,n){switch(t.tag){case 3:Cu(t,t.stateNode.containerInfo),Ni(t,Jt,e.memoizedState.cache),Zo();break;case 27:case 5:wf(t);break;case 4:Cu(t,t.stateNode.containerInfo);break;case 10:Ni(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(t),t.flags|=128,null):n&t.child.childLanes?IT(e,t,n):(Di(t),e=oi(e,t,n),e!==null?e.sibling:null);Di(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Wo(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return CT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Mt(te,te.current),i)break;return null;case 22:case 23:return t.lanes=0,RT(e,t,n);case 24:Ni(t,Jt,e.memoizedState.cache)}return oi(e,t,n)}function NT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)oe=!0;else{if(!Sm(e,n)&&!(t.flags&128))return oe=!1,Iw(e,t,n);oe=!!(e.flags&131072)}else oe=!1,pt&&t.flags&1048576&&xE(t,ku,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")sm(i)?(e=jr(i,e),t.tag=1,t=Ry(null,t,i,e,n)):(t.tag=0,t=Xf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Gd){t.tag=11,t=Ay(null,t,i,e,n);break t}else if(r===Qd){t.tag=14,t=by(null,t,i,e,n);break t}}throw t=bf(i)||i,Error(U(306,t,""))}}return t;case 0:return Xf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=jr(i,t.pendingProps),Ry(e,t,i,r,n);case 3:t:{if(Cu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Bf(e,t),so(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ni(t,Jt,i),i!==s.cache&&Lf(t,[Jt],n,!0),ro(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Iy(e,t,i,n);break t}else if(i!==r){r=un(Error(U(424)),t),So(r),t=Iy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(zt=En(e.firstChild),Ne=t,pt=!0,Or=null,Rn=!0,n=yT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zo(),i===r){t=oi(e,t,n);break t}fe(e,t,i,n)}t=t.child}return t;case 26:return hu(e,t),e===null?(n=Gy(t.type,null,t.pendingProps,null))?t.memoizedState=n:pt||(n=t.type,e=t.pendingProps,i=Zu(qi.current).createElement(n),i[be]=t,i[Ue]=e,ye(i,n,e),se(i),t.stateNode=i):t.memoizedState=Gy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return wf(t),e===null&&pt&&(i=t.stateNode=g0(t.type,t.pendingProps,qi.current),Ne=t,Rn=!0,r=zt,mr(t.type)?(cd=r,zt=En(i.firstChild)):zt=r),fe(e,t,t.pendingProps.children,n),hu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pt&&((r=i=zt)&&(i=eR(i,t.type,t.pendingProps,Rn),i!==null?(t.stateNode=i,Ne=t,zt=En(i.firstChild),Rn=!1,r=!0):r=!1),r||Pr(t)),wf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,od(r,s)?i=null:a!==null&&od(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=dm(e,t,vw,null,null,n),Do._currentValue=r),hu(e,t),fe(e,t,i,n),t.child;case 6:return e===null&&pt&&((e=n=zt)&&(n=nR(n,t.pendingProps,Rn),n!==null?(t.stateNode=n,Ne=t,zt=null,e=!0):e=!1),e||Pr(t)),null;case 13:return IT(e,t,n);case 4:return Cu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ys(t,null,i,n):fe(e,t,i,n),t.child;case 11:return Ay(e,t,t.type,t.pendingProps,n);case 7:return fe(e,t,t.pendingProps,n),t.child;case 8:return fe(e,t,t.pendingProps.children,n),t.child;case 12:return fe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ni(t,t.type,i.value),fe(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ur(t),r=Se(r),i=i(r),t.flags|=1,fe(e,t,i,n),t.child;case 14:return by(e,t,t.type,t.pendingProps,n);case 15:return wT(e,t,t.type,t.pendingProps,n);case 19:return CT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Fu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ni(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return RT(e,t,n);case 24:return Ur(t),i=Se(Jt),e===null?(r=um(),r===null&&(r=Rt,s=lm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},cm(t),Ni(t,Jt,r)):(e.lanes&n&&(Bf(e,t),so(t,null,null,n),ro()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ni(t,Jt,i)):(i=s.cache,Ni(t,Jt,i),i!==r.cache&&Lf(t,[Jt],n,!0))),fe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Qn(e){e.flags|=4}function Ny(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!_0(t)){if(t=hn.current,t!==null&&((ht&4194048)===ht?Dn!==null:(ht&62914560)!==ht&&!(ht&536870912)||t!==Dn))throw no=zf,ME;e.flags|=8192}}function Ql(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?eE():536870912,e.lanes|=t,Ks|=t)}function za(e,t){if(!pt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Cw(e,t,n){var i=t.pendingProps;switch(om(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return Pt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ii(Jt),Bs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(La(t)?Qn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sy())),Pt(t),null;case 26:return n=t.memoizedState,e===null?(Qn(t),n!==null?(Pt(t),Ny(t,n)):(Pt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qn(t),Pt(t),Ny(t,n)):(Pt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qn(t),Pt(t),t.flags&=-16777217),null;case 27:Nu(t),n=qi.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Pt(t),null}e=Cn.current,La(t)?iy(t):(e=g0(r,i,n),t.stateNode=e,Qn(t))}return Pt(t),null;case 5:if(Nu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Pt(t),null}if(e=Cn.current,La(t))iy(t);else{switch(r=Zu(qi.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[be]=t,e[Ue]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(ye(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qn(t)}}return Pt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=qi.current,La(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ne,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[be]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||f0(e.nodeValue,n)),e||Pr(t)}else e=Zu(e).createTextNode(i),e[be]=t,t.stateNode=e}return Pt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=La(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[be]=t}else Zo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pt(t),r=!1}else r=sy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Jn(t),t):(Jn(t),null)}if(Jn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ql(t,t.updateQueue),Pt(t),null;case 4:return Bs(),e===null&&Om(t.stateNode.containerInfo),Pt(t),null;case 10:return ii(t.type),Pt(t),null;case 19:if(le(te),r=t.memoizedState,r===null)return Pt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)za(r,!1);else{if(Bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Bu(e),s!==null){for(t.flags|=128,za(r,!1),e=s.updateQueue,t.updateQueue=e,Ql(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)DE(n,e),n=n.sibling;return Mt(te,te.current&1|2),t.child}e=e.sibling}r.tail!==null&&Nn()>Qu&&(t.flags|=128,i=!0,za(r,!1),t.lanes=4194304)}else{if(!i)if(e=Bu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Ql(t,e),za(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!pt)return Pt(t),null}else 2*Nn()-r.renderingStartTime>Qu&&n!==536870912&&(t.flags|=128,i=!0,za(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Nn(),t.sibling=null,e=te.current,Mt(te,i?e&1|2:e&1),t):(Pt(t),null);case 22:case 23:return Jn(t),hm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),n=t.updateQueue,n!==null&&Ql(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&le(Vr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ii(Jt),Pt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Nw(e,t){switch(om(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(Jt),Bs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nu(t),null;case 13:if(Jn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Zo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(te),null;case 4:return Bs(),null;case 10:return ii(t.type),null;case 22:case 23:return Jn(t),hm(),e!==null&&le(Vr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ii(Jt),null;case 25:return null;default:return null}}function DT(e,t){switch(om(t),t.tag){case 3:ii(Jt),Bs();break;case 26:case 27:case 5:Nu(t);break;case 4:Bs();break;case 13:Jn(t);break;case 19:le(te);break;case 10:ii(t.type);break;case 22:case 23:Jn(t),hm(),e!==null&&le(Vr);break;case 24:ii(Jt)}}function il(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){wt(t,t.return,l)}}function rr(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){wt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){wt(t,t.return,d)}}function xT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{UE(t,n)}catch(i){wt(e,e.return,i)}}}function OT(e,t,n){n.props=jr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){wt(e,t,i)}}function oo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){wt(e,t,r)}}function In(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){wt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){wt(e,t,r)}else n.current=null}function VT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){wt(e,e.return,r)}}function Xh(e,t,n){try{var i=e.stateNode;$w(i,e.type,n,t),i[Ue]=t}catch(r){wt(e,e.return,r)}}function MT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mr(e.type)||e.tag===4}function $h(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||MT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jc));else if(i!==4&&(i===27&&mr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Zf(e,t,n),e=e.sibling;e!==null;)Zf(e,t,n),e=e.sibling}function Gu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&mr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Gu(e,t,n),e=e.sibling;e!==null;)Gu(e,t,n),e=e.sibling}function kT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ye(t,i,n),t[be]=e,t[Ue]=n}catch(s){wt(e,e.return,s)}}var Kn=!1,Ht=!1,Zh=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,re=null;function Dw(e,t){if(e=e.containerInfo,sd=ec,e=AE(e),nm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ad={focusedElem:e,selectionRange:n},ec=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){switch(t=re,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var D=jr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){wt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ld(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}}function PT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Si(e,n),i&4&&il(5,n);break;case 1:if(Si(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){wt(n,n.return,a)}else{var r=jr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){wt(n,n.return,a)}}i&64&&xT(n),i&512&&oo(n,n.return);break;case 3:if(Si(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{UE(e,t)}catch(a){wt(n,n.return,a)}}break;case 27:t===null&&i&4&&kT(n);case 26:case 5:Si(e,n),t===null&&i&4&&VT(n),i&512&&oo(n,n.return);break;case 12:Si(e,n);break;case 13:Si(e,n),i&4&&jT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=jw.bind(null,n),iR(e,n))));break;case 22:if(i=n.memoizedState!==null||Kn,!i){t=t!==null&&t.memoizedState!==null||Ht,r=Kn;var s=Ht;Kn=i,(Ht=t)&&!s?Ri(e,n,(n.subtreeFlags&8772)!==0):Si(e,n),Kn=r,Ht=s}break;case 30:break;default:Si(e,n)}}function UT(e){var t=e.alternate;t!==null&&(e.alternate=null,UT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$d(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ot=null,Me=!1;function Yn(e,t,n){for(n=n.child;n!==null;)LT(e,t,n),n=n.sibling}function LT(e,t,n){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Qo,n)}catch{}switch(n.tag){case 26:Ht||In(n,t),Yn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ht||In(n,t);var i=Ot,r=Me;mr(n.type)&&(Ot=n.stateNode,Me=!1),Yn(e,t,n),ho(n.stateNode),Ot=i,Me=r;break;case 5:Ht||In(n,t);case 6:if(i=Ot,r=Me,Ot=null,Yn(e,t,n),Ot=i,Me=r,Ot!==null)if(Me)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(n.stateNode)}catch(s){wt(n,t,s)}else try{Ot.removeChild(n.stateNode)}catch(s){wt(n,t,s)}break;case 18:Ot!==null&&(Me?(e=Ot,qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Vo(e)):qy(Ot,n.stateNode));break;case 4:i=Ot,r=Me,Ot=n.stateNode.containerInfo,Me=!0,Yn(e,t,n),Ot=i,Me=r;break;case 0:case 11:case 14:case 15:Ht||rr(2,n,t),Ht||rr(4,n,t),Yn(e,t,n);break;case 1:Ht||(In(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&OT(n,t,i)),Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:Ht=(i=Ht)||n.memoizedState!==null,Yn(e,t,n),Ht=i;break;default:Yn(e,t,n)}}function jT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vo(e)}catch(n){wt(t,t.return,n)}}function xw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dy),t;default:throw Error(U(435,e.tag))}}function Wh(e,t){var n=xw(e);t.forEach(function(i){var r=zw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function qe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(mr(l.type)){Ot=l.stateNode,Me=!1;break t}break;case 5:Ot=l.stateNode,Me=!1;break t;case 3:case 4:Ot=l.stateNode.containerInfo,Me=!0;break t}l=l.return}if(Ot===null)throw Error(U(160));LT(s,a,r),Ot=null,Me=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)zT(t,e),t=t.sibling}var yn=null;function zT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qe(t,e),He(e),i&4&&(rr(3,e,e.return),il(3,e),rr(5,e,e.return));break;case 1:qe(t,e),He(e),i&512&&(Ht||n===null||In(n,n.return)),i&64&&Kn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=yn;if(qe(t,e),He(e),i&512&&(Ht||n===null||In(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Xo]||s[be]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),ye(s,i,n),s[be]=e,se(s),i=s;break t;case"link":var a=Yy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),ye(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Yy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),ye(s,i,n),r.head.appendChild(s);break;default:throw Error(U(468,i))}s[be]=e,se(s),i=s}e.stateNode=i}else Ky(r,e.type,e.stateNode);else e.stateNode=Qy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Ky(r,e.type,e.stateNode):Qy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Xh(e,e.memoizedProps,n.memoizedProps)}break;case 27:qe(t,e),He(e),i&512&&(Ht||n===null||In(n,n.return)),n!==null&&i&4&&Xh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(qe(t,e),He(e),i&512&&(Ht||n===null||In(n,n.return)),e.flags&32){r=e.stateNode;try{Hs(r,"")}catch(_){wt(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Xh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Zh=!0);break;case 6:if(qe(t,e),He(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){wt(e,e.return,_)}}break;case 3:if(mu=null,r=yn,yn=Wu(t.containerInfo),qe(t,e),yn=r,He(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(_){wt(e,e.return,_)}Zh&&(Zh=!1,BT(e));break;case 4:i=yn,yn=Wu(e.stateNode.containerInfo),qe(t,e),He(e),yn=i;break;case 12:qe(t,e),He(e);break;case 13:qe(t,e),He(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Nm=Nn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Wh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Kn,d=Ht;if(Kn=h||r,Ht=d||u,qe(t,e),Ht=d,Kn=h,He(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Kn||Ht||Rr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){wt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){wt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Wh(e,n))));break;case 19:qe(t,e),He(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Wh(e,i)));break;case 30:break;case 21:break;default:qe(t,e),He(e)}}function He(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(MT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,s=$h(e);Gu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Hs(a,""),n.flags&=-33);var l=$h(e);Gu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=$h(e);Zf(e,h,u);break;default:throw Error(U(161))}}catch(d){wt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;BT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Si(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)PT(e,t.alternate,t),t=t.sibling}function Rr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:rr(4,t,t.return),Rr(t);break;case 1:In(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&OT(t,t.return,n),Rr(t);break;case 27:ho(t.stateNode);case 26:case 5:In(t,t.return),Rr(t);break;case 22:t.memoizedState===null&&Rr(t);break;case 30:Rr(t);break;default:Rr(t)}e=e.sibling}}function Ri(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ri(r,s,n),il(4,s);break;case 1:if(Ri(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){wt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)PE(u[r],l)}catch(h){wt(i,i.return,h)}}n&&a&64&&xT(s),oo(s,s.return);break;case 27:kT(s);case 26:case 5:Ri(r,s,n),n&&i===null&&a&4&&VT(s),oo(s,s.return);break;case 12:Ri(r,s,n);break;case 13:Ri(r,s,n),n&&a&4&&jT(r,s);break;case 22:s.memoizedState===null&&Ri(r,s,n),oo(s,s.return);break;case 30:break;default:Ri(r,s,n)}t=t.sibling}}function wm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Jo(n))}function Rm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Jo(e))}function Sn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)qT(e,t,n,i),t=t.sibling}function qT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Sn(e,t,n,i),r&2048&&il(9,t);break;case 1:Sn(e,t,n,i);break;case 3:Sn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Jo(e)));break;case 12:if(r&2048){Sn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){wt(t,t.return,u)}}else Sn(e,t,n,i);break;case 13:Sn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Sn(e,t,n,i):lo(e,t):s._visibility&2?Sn(e,t,n,i):(s._visibility|=2,ls(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&wm(a,t);break;case 24:Sn(e,t,n,i),r&2048&&Rm(t.alternate,t);break;default:Sn(e,t,n,i)}}function ls(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:ls(s,a,l,u,r),il(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?ls(s,a,l,u,r):lo(s,a):(d._visibility|=2,ls(s,a,l,u,r)),r&&h&2048&&wm(a.alternate,a);break;case 24:ls(s,a,l,u,r),r&&h&2048&&Rm(a.alternate,a);break;default:ls(s,a,l,u,r)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:lo(n,i),r&2048&&wm(i.alternate,i);break;case 24:lo(n,i),r&2048&&Rm(i.alternate,i);break;default:lo(n,i)}t=t.sibling}}var Qa=8192;function rs(e){if(e.subtreeFlags&Qa)for(e=e.child;e!==null;)HT(e),e=e.sibling}function HT(e){switch(e.tag){case 26:rs(e),e.flags&Qa&&e.memoizedState!==null&&pR(yn,e.memoizedState,e.memoizedProps);break;case 5:rs(e);break;case 3:case 4:var t=yn;yn=Wu(e.stateNode.containerInfo),rs(e),yn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Qa,Qa=16777216,rs(e),Qa=t):rs(e));break;default:rs(e)}}function FT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ba(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];re=i,QT(i,e)}FT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)GT(e),e=e.sibling}function GT(e){switch(e.tag){case 0:case 11:case 15:Ba(e),e.flags&2048&&rr(9,e,e.return);break;case 3:Ba(e);break;case 12:Ba(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fu(e)):Ba(e);break;default:Ba(e)}}function fu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];re=i,QT(i,e)}FT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:rr(8,t,t.return),fu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,fu(t));break;default:fu(t)}e=e.sibling}}function QT(e,t){for(;re!==null;){var n=re;switch(n.tag){case 0:case 11:case 15:rr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Jo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,re=i;else t:for(n=e;re!==null;){i=re;var r=i.sibling,s=i.return;if(UT(i),i===n){re=null;break t}if(r!==null){r.return=s,re=r;break t}re=s}}}var Ow={getCacheForType:function(e){var t=Se(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Vw=typeof WeakMap=="function"?WeakMap:Map,Et=0,Rt=null,st=null,ht=0,vt=0,Fe=null,ji=!1,ua=!1,Im=!1,li=0,Bt=0,sr=0,Mr=0,Cm=0,cn=0,Ks=0,uo=null,ke=null,Wf=!1,Nm=0,Qu=1/0,Yu=null,Gi=null,me=0,Qi=null,Xs=null,ks=0,Jf=0,td=null,YT=null,co=0,ed=null;function Ze(){if(Et&2&&ht!==0)return ht&-ht;if(Z.T!==null){var e=Fs;return e!==0?e:xm()}return rE()}function KT(){cn===0&&(cn=!(ht&536870912)||pt?tE():536870912);var e=hn.current;return e!==null&&(e.flags|=32),cn}function We(e,t,n){(e===Rt&&(vt===2||vt===9)||e.cancelPendingCommit!==null)&&($s(e,0),zi(e,ht,cn,!1)),Ko(e,n),(!(Et&2)||e!==Rt)&&(e===Rt&&(!(Et&2)&&(Mr|=n),Bt===4&&zi(e,ht,cn,!1)),Ln(e))}function XT(e,t,n){if(Et&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Yo(e,t),r=i?Pw(e,t):Jh(e,t,!0),s=i;do{if(r===0){ua&&!i&&zi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Mw(n)){r=Jh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=uo;var u=l.current.memoizedState.isDehydrated;if(u&&($s(l,a).flags|=256),a=Jh(l,a,!1),a!==2){if(Im&&!u){l.errorRecoveryDisabledLanes|=s,Mr|=s,r=4;break t}s=ke,ke=r,s!==null&&(ke===null?ke=s:ke.push.apply(ke,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){$s(e,0),zi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:zi(i,t,cn,!ji);break t;case 2:ke=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=Nm+300-Nn(),10<r)){if(zi(i,t,cn,!ji),Rc(i,0,!0)!==0)break t;i.timeoutHandle=m0(xy.bind(null,i,n,ke,Yu,Wf,t,cn,Mr,Ks,ji,s,2,-0,0),r);break t}xy(i,n,ke,Yu,Wf,t,cn,Mr,Ks,ji,s,0,-0,0)}}break}while(!0);Ln(e)}function xy(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(No={stylesheets:null,count:0,unsuspend:gR},HT(t),g=yR(),g!==null)){e.cancelPendingCommit=g(Vy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),zi(e,s,a,!h);return}Vy(e,t,s,n,i,r,a,l,u)}function Mw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!en(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zi(e,t,n,i){t&=~Cm,t&=~Mr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-$e(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&nE(e,n,t)}function Pc(){return Et&6?!0:(rl(0),!1)}function Dm(){if(st!==null){if(vt===0)var e=st.return;else e=st,Wn=Xr=null,pm(e),Ms=null,Ro=0,e=st;for(;e!==null;)DT(e.alternate,e),e=e.return;st=null}}function $s(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ww(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Dm(),Rt=e,st=n=ni(e.current,null),ht=t,vt=0,Fe=null,ji=!1,ua=Yo(e,t),Im=!1,Ks=cn=Cm=Mr=sr=Bt=0,ke=uo=null,Wf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-$e(i),s=1<<r;t|=e[r],i&=~s}return li=t,Dc(),n}function $T(e,t){it=null,Z.H=zu,t===tl||t===Oc?(t=uy(),vt=3):t===ME?(t=uy(),vt=4):vt=t===ST?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Fe=t,st===null&&(Bt=1,Hu(e,un(t,e.current)))}function ZT(){var e=Z.H;return Z.H=zu,e===null?zu:e}function WT(){var e=Z.A;return Z.A=Ow,e}function nd(){Bt=4,ji||(ht&4194048)!==ht&&hn.current!==null||(ua=!0),!(sr&134217727)&&!(Mr&134217727)||Rt===null||zi(Rt,ht,cn,!1)}function Jh(e,t,n){var i=Et;Et|=2;var r=ZT(),s=WT();(Rt!==e||ht!==t)&&(Yu=null,$s(e,t)),t=!1;var a=Bt;t:do try{if(vt!==0&&st!==null){var l=st,u=Fe;switch(vt){case 8:Dm(),a=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(t=!0);var h=vt;if(vt=0,Fe=null,ws(e,l,u,h),n&&ua){a=0;break t}break;default:h=vt,vt=0,Fe=null,ws(e,l,u,h)}}kw(),a=Bt;break}catch(d){$T(e,d)}while(!0);return t&&e.shellSuspendCounter++,Wn=Xr=null,Et=i,Z.H=r,Z.A=s,st===null&&(Rt=null,ht=0,Dc()),a}function kw(){for(;st!==null;)JT(st)}function Pw(e,t){var n=Et;Et|=2;var i=ZT(),r=WT();Rt!==e||ht!==t?(Yu=null,Qu=Nn()+500,$s(e,t)):ua=Yo(e,t);t:do try{if(vt!==0&&st!==null){t=st;var s=Fe;e:switch(vt){case 1:vt=0,Fe=null,ws(e,t,s,1);break;case 2:case 9:if(ly(s)){vt=0,Fe=null,Oy(t);break}t=function(){vt!==2&&vt!==9||Rt!==e||(vt=7),Ln(e)},s.then(t,t);break t;case 3:vt=7;break t;case 4:vt=5;break t;case 7:ly(s)?(vt=0,Fe=null,Oy(t)):(vt=0,Fe=null,ws(e,t,s,7));break;case 5:var a=null;switch(st.tag){case 26:a=st.memoizedState;case 5:case 27:var l=st;if(!a||_0(a)){vt=0,Fe=null;var u=l.sibling;if(u!==null)st=u;else{var h=l.return;h!==null?(st=h,Uc(h)):st=null}break e}}vt=0,Fe=null,ws(e,t,s,5);break;case 6:vt=0,Fe=null,ws(e,t,s,6);break;case 8:Dm(),Bt=6;break t;default:throw Error(U(462))}}Uw();break}catch(d){$T(e,d)}while(!0);return Wn=Xr=null,Z.H=i,Z.A=r,Et=n,st!==null?0:(Rt=null,ht=0,Dc(),Bt)}function Uw(){for(;st!==null&&!s1();)JT(st)}function JT(e){var t=NT(e.alternate,e,li);e.memoizedProps=e.pendingProps,t===null?Uc(e):st=t}function Oy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=wy(n,t,t.pendingProps,t.type,void 0,ht);break;case 11:t=wy(n,t,t.pendingProps,t.type.render,t.ref,ht);break;case 5:pm(t);default:DT(n,t),t=st=DE(t,li),t=NT(n,t,li)}e.memoizedProps=e.pendingProps,t===null?Uc(e):st=t}function ws(e,t,n,i){Wn=Xr=null,pm(t),Ms=null,Ro=0;var r=t.return;try{if(Rw(e,r,t,n,ht)){Bt=1,Hu(e,un(n,e.current)),st=null;return}}catch(s){if(r!==null)throw st=r,s;Bt=1,Hu(e,un(n,e.current)),st=null;return}t.flags&32768?(pt||i===1?e=!0:ua||ht&536870912?e=!1:(ji=e=!0,(i===2||i===9||i===3||i===6)&&(i=hn.current,i!==null&&i.tag===13&&(i.flags|=16384))),t0(t,e)):Uc(t)}function Uc(e){var t=e;do{if(t.flags&32768){t0(t,ji);return}e=t.return;var n=Cw(t.alternate,t,li);if(n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);Bt===0&&(Bt=5)}function t0(e,t){do{var n=Nw(e.alternate,e);if(n!==null){n.flags&=32767,st=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){st=e;return}st=e=n}while(e!==null);Bt=6,st=null}function Vy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Lc();while(me!==0);if(Et&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(s=t.lanes|t.childLanes,s|=im,g1(e,n,s,a,l,u),e===Rt&&(st=Rt=null,ht=0),Xs=t,Qi=e,ks=n,Jf=s,td=r,YT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Bw(Du,function(){return s0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,r=yt.p,yt.p=2,a=Et,Et|=4;try{Dw(e,t,n)}finally{Et=a,yt.p=r,Z.T=i}}me=1,e0(),n0(),i0()}}function e0(){if(me===1){me=0;var e=Qi,t=Xs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=yt.p;yt.p=2;var r=Et;Et|=4;try{zT(t,e);var s=ad,a=AE(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&TE(l.ownerDocument.documentElement,l)){if(u!==null&&nm(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),D=l.textContent.length,V=Math.min(u.start,D),M=u.end===void 0?V:Math.min(u.end,D);!_.extend&&V>M&&(a=M,M=V,V=a);var w=ty(l,V),v=ty(l,M);if(w&&v&&(_.rangeCount!==1||_.anchorNode!==w.node||_.anchorOffset!==w.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var R=g.createRange();R.setStart(w.node,w.offset),_.removeAllRanges(),V>M?(_.addRange(R),_.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var x=g[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}ec=!!sd,ad=sd=null}finally{Et=r,yt.p=i,Z.T=n}}e.current=t,me=2}}function n0(){if(me===2){me=0;var e=Qi,t=Xs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=yt.p;yt.p=2;var r=Et;Et|=4;try{PT(e,t.alternate,t)}finally{Et=r,yt.p=i,Z.T=n}}me=3}}function i0(){if(me===4||me===3){me=0,a1();var e=Qi,t=Xs,n=ks,i=YT;t.subtreeFlags&10256||t.flags&10256?me=5:(me=0,Xs=Qi=null,r0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Gi=null),Xd(n),t=t.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Qo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,r=yt.p,yt.p=2,Z.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{Z.T=t,yt.p=r}}ks&3&&Lc(),Ln(e),r=e.pendingLanes,n&4194090&&r&42?e===ed?co++:(co=0,ed=e):co=0,rl(0)}}function r0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Jo(t)))}function Lc(e){return e0(),n0(),i0(),s0()}function s0(){if(me!==5)return!1;var e=Qi,t=Jf;Jf=0;var n=Xd(ks),i=Z.T,r=yt.p;try{yt.p=32>n?32:n,Z.T=null,n=td,td=null;var s=Qi,a=ks;if(me=0,Xs=Qi=null,ks=0,Et&6)throw Error(U(331));var l=Et;if(Et|=4,GT(s.current),qT(s,s.current,a,n),Et=l,rl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Qo,s)}catch{}return!0}finally{yt.p=r,Z.T=i,r0(e,t)}}function My(e,t,n){t=un(n,t),t=Kf(e.stateNode,t,2),e=Fi(e,t,2),e!==null&&(Ko(e,2),Ln(e))}function wt(e,t,n){if(e.tag===3)My(e,e,n);else for(;t!==null;){if(t.tag===3){My(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gi===null||!Gi.has(i))){e=un(n,e),n=AT(2),i=Fi(t,n,2),i!==null&&(bT(n,i,t,e),Ko(i,2),Ln(i));break}}t=t.return}}function tf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Vw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Im=!0,r.add(n),e=Lw.bind(null,e,t,n),t.then(e,e))}function Lw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rt===e&&(ht&n)===n&&(Bt===4||Bt===3&&(ht&62914560)===ht&&300>Nn()-Nm?!(Et&2)&&$s(e,0):Cm|=n,Ks===ht&&(Ks=0)),Ln(e)}function a0(e,t){t===0&&(t=eE()),e=la(e,t),e!==null&&(Ko(e,t),Ln(e))}function jw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),a0(e,n)}function zw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),a0(e,n)}function Bw(e,t){return Yd(e,t)}var Ku=null,us=null,id=!1,Xu=!1,ef=!1,kr=0;function Ln(e){e!==us&&e.next===null&&(us===null?Ku=us=e:us=us.next=e),Xu=!0,id||(id=!0,Hw())}function rl(e,t){if(!ef&&Xu){ef=!0;do for(var n=!1,i=Ku;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-$e(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,ky(i,s))}else s=ht,s=Rc(i,i===Rt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Yo(i,s)||(n=!0,ky(i,s));i=i.next}while(n);ef=!1}}function qw(){o0()}function o0(){Xu=id=!1;var e=0;kr!==0&&(Zw()&&(e=kr),kr=0);for(var t=Nn(),n=null,i=Ku;i!==null;){var r=i.next,s=l0(i,t);s===0?(i.next=null,n===null?Ku=r:n.next=r,r===null&&(us=n)):(n=i,(e!==0||s&3)&&(Xu=!0)),i=r}rl(e)}function l0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-$e(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=m1(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Rt,n=ht,n=Rc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(vt===2||vt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Ih(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Yo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Ih(i),Xd(n)){case 2:case 8:n=Wv;break;case 32:n=Du;break;case 268435456:n=Jv;break;default:n=Du}return i=u0.bind(null,e),n=Yd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Ih(i),e.callbackPriority=2,e.callbackNode=null,2}function u0(e,t){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Lc()&&e.callbackNode!==n)return null;var i=ht;return i=Rc(e,e===Rt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(XT(e,i,t),l0(e,Nn()),e.callbackNode!=null&&e.callbackNode===n?u0.bind(null,e):null)}function ky(e,t){if(Lc())return null;XT(e,t,!0)}function Hw(){Jw(function(){Et&6?Yd(Zv,qw):o0()})}function xm(){return kr===0&&(kr=tE()),kr}function Py(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ru(""+e)}function Uy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Fw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Py((r[Ue]||null).action),a=i.submitter;a&&(t=(t=a[Ue]||null)?Py(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Ic("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(kr!==0){var u=a?Uy(r,a):new FormData(r);Qf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?Uy(r,a):new FormData(r),Qf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var nf=0;nf<Mf.length;nf++){var rf=Mf[nf],Gw=rf.toLowerCase(),Qw=rf[0].toUpperCase()+rf.slice(1);An(Gw,"on"+Qw)}An(SE,"onAnimationEnd");An(wE,"onAnimationIteration");An(RE,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(uw,"onTransitionRun");An(cw,"onTransitionStart");An(hw,"onTransitionCancel");An(IE,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function c0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){qu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){qu(d)}r.currentTarget=null,s=u}}}}function rt(e,t){var n=t[If];n===void 0&&(n=t[If]=new Set);var i=e+"__bubble";n.has(i)||(h0(t,e,2,!1),n.add(i))}function sf(e,t,n){var i=0;t&&(i|=4),h0(n,e,i,t)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Om(e){if(!e[Yl]){e[Yl]=!0,sE.forEach(function(n){n!=="selectionchange"&&(Yw.has(n)||sf(n,!1,e),sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yl]||(t[Yl]=!0,sf("selectionchange",!1,t))}}function h0(e,t,n,i){switch(b0(t)){case 2:var r=ER;break;case 8:r=TR;break;default:r=Pm}n=r.bind(null,t,n,e),r=void 0,!xf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function af(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=ps(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}dE(function(){var h=s,d=Wd(n),g=[];t:{var m=CE.get(e);if(m!==void 0){var _=Ic,D=e;switch(e){case"keypress":if(au(n)===0)break t;case"keydown":case"keyup":_=B1;break;case"focusin":D="focus",_=kh;break;case"focusout":D="blur",_=kh;break;case"beforeblur":case"afterblur":_=kh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=N1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=F1;break;case SE:case wE:case RE:_=O1;break;case IE:_=Q1;break;case"scroll":case"scrollend":_=I1;break;case"wheel":_=K1;break;case"copy":case"cut":case"paste":_=M1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Qp;break;case"toggle":case"beforetoggle":_=$1}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),w=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,R;v!==null;){var x=v;if(R=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||R===null||w===null||(x=To(v,w),x!=null&&V.push(Co(v,x,R))),M)break;v=v.return}0<V.length&&(m=new _(m,D,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Df&&(D=n.relatedTarget||n.fromElement)&&(ps(D)||D[aa]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(D=n.relatedTarget||n.toElement,_=h,D=D?ps(D):null,D!==null&&(M=Go(D),V=D.tag,D!==M||V!==5&&V!==27&&V!==6)&&(D=null)):(_=null,D=h),_!==D)){if(V=Fp,x="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=Qp,x="onPointerLeave",w="onPointerEnter",v="pointer"),M=_==null?m:Ga(_),R=D==null?m:Ga(D),m=new V(x,v+"leave",_,n,d),m.target=M,m.relatedTarget=R,x=null,ps(d)===h&&(V=new V(w,v+"enter",D,n,d),V.target=R,V.relatedTarget=M,x=V),M=x,_&&D)e:{for(V=_,w=D,v=0,R=V;R;R=ss(R))v++;for(R=0,x=w;x;x=ss(x))R++;for(;0<v-R;)V=ss(V),v--;for(;0<R-v;)w=ss(w),R--;for(;v--;){if(V===w||w!==null&&V===w.alternate)break e;V=ss(V),w=ss(w)}V=null}else V=null;_!==null&&Ly(g,m,_,V,!1),D!==null&&M!==null&&Ly(g,M,D,V,!0)}}t:{if(m=h?Ga(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=$p;else if(Xp(m))if(vE)L=aw;else{L=rw;var q=iw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Zd(h.elementType)&&(L=$p):L=sw;if(L&&(L=L(e,h))){_E(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Nf(m,"number",m.value)}switch(q=h?Ga(h):window,e){case"focusin":(Xp(q)||q.contentEditable==="true")&&(vs=q,Of=h,to=null);break;case"focusout":to=Of=vs=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,ey(g,n,d);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":ey(g,n,d)}var E;if(em)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else _s?pE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(gE&&n.locale!=="ko"&&(_s||y!=="onCompositionStart"?y==="onCompositionEnd"&&_s&&(E=mE()):(Li=d,Jd="value"in Li?Li.value:Li.textContent,_s=!0)),q=$u(h,y),0<q.length&&(y=new Gp(y,e,null,n,d),g.push({event:y,listeners:q}),E?y.data=E:(E=yE(n),E!==null&&(y.data=E)))),(E=W1?J1(e,n):tw(e,n))&&(y=$u(h,"onBeforeInput"),0<y.length&&(q=new Gp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=E)),Fw(g,e,h,n,d)}c0(g,t)})}function Co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $u(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=To(e,n),r!=null&&i.unshift(Co(e,r,s)),r=To(e,t),r!=null&&i.push(Co(e,r,s))),e.tag===3)return i;e=e.return}return[]}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ly(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=To(n,s),h!=null&&a.unshift(Co(n,h,u))):r||(h=To(n,s),h!=null&&a.push(Co(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Kw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function jy(e){return(typeof e=="string"?e:""+e).replace(Kw,`
`).replace(Xw,"")}function f0(e,t){return t=jy(t),jy(e)===t}function jc(){}function Tt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Hs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Hs(e,""+i);break;case"className":zl(e,"class",i);break;case"tabIndex":zl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":zl(e,n,i);break;case"style":fE(e,i,s);break;case"data":if(t!=="object"){zl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ru(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Tt(e,t,"name",r.name,r,null),Tt(e,t,"formEncType",r.formEncType,r,null),Tt(e,t,"formMethod",r.formMethod,r,null),Tt(e,t,"formTarget",r.formTarget,r,null)):(Tt(e,t,"encType",r.encType,r,null),Tt(e,t,"method",r.method,r,null),Tt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ru(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=jc);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=ru(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),iu(e,"popover",i);break;case"xlinkActuate":Gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Gn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Gn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Gn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Gn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":iu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=w1.get(n)||n,iu(e,n,i))}}function rd(e,t,n,i,r,s){switch(n){case"style":fE(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Hs(e,i):(typeof i=="number"||typeof i=="bigint")&&Hs(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!aE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ue]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):iu(e,n,i)}}}function ye(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Tt(e,t,s,a,n,null)}}r&&Tt(e,t,"srcSet",n.srcSet,n,null),i&&Tt(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:Tt(e,t,i,d,n,null)}}uE(e,s,l,u,h,a,r,!1),xu(e);return;case"select":rt("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Tt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Ns(e,!!i,t,!1):n!=null&&Ns(e,!!i,n,!0);return;case"textarea":rt("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:Tt(e,t,a,l,n,null)}hE(e,i,r,s),xu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Tt(e,t,u,i,n,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<Io.length;i++)rt(Io[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Tt(e,t,h,i,n,null)}return;default:if(Zd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&rd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Tt(e,t,l,i,n,null))}function $w(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Tt(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&Tt(e,t,m,_,i,g)}}Cf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||Tt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Tt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?Ns(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ns(e,!!n,t,!0):Ns(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Tt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==s&&Tt(e,t,a,r,i,s)}cE(e,m,_);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:Tt(e,t,D,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Tt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&Tt(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:Tt(e,t,h,m,i,_)}return;default:if(Zd(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&rd(e,t,M,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||rd(e,t,d,m,i,_);return}}for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w)&&Tt(e,t,w,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||Tt(e,t,g,m,i,_)}var sd=null,ad=null;function Zu(e){return e.nodeType===9?e:e.ownerDocument}function zy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function od(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var of=null;function Zw(){var e=window.event;return e&&e.type==="popstate"?e===of?!1:(of=e,!0):(of=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,Ww=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(e){return By.resolve(null).then(e).catch(tR)}:m0;function tR(e){setTimeout(function(){throw e})}function mr(e){return e==="head"}function qy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ho(a.documentElement),n&2&&ho(a.body),n&4)for(n=a.head,ho(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Xo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Vo(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Vo(t)}function ld(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ld(n),$d(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function eR(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Xo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=En(e.nextSibling),e===null)break}return null}function nR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=En(e.nextSibling),e===null))return null;return e}function ud(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function iR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var cd=null;function Hy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function g0(e,t,n){switch(t=Zu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function ho(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$d(e)}var fn=new Map,Fy=new Set;function Wu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gi=yt.d;yt.d={f:rR,r:sR,D:aR,C:oR,L:lR,m:uR,X:hR,S:cR,M:fR};function rR(){var e=gi.f(),t=Pc();return e||t}function sR(e){var t=oa(e);t!==null&&t.tag===5&&t.type==="form"?lT(t):gi.r(e)}var ca=typeof document>"u"?null:document;function p0(e,t,n){var i=ca;if(i&&typeof t=="string"&&t){var r=ln(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Fy.has(r)||(Fy.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),ye(t,"link",e),se(t),i.head.appendChild(t)))}}function aR(e){gi.D(e),p0("dns-prefetch",e,null)}function oR(e,t){gi.C(e,t),p0("preconnect",e,t)}function lR(e,t,n){gi.L(e,t,n);var i=ca;if(i&&e&&t){var r='link[rel="preload"][as="'+ln(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ln(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ln(n.imageSizes)+'"]')):r+='[href="'+ln(e)+'"]';var s=r;switch(t){case"style":s=Zs(e);break;case"script":s=ha(e)}fn.has(s)||(e=Dt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),fn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(sl(s))||t==="script"&&i.querySelector(al(s))||(t=i.createElement("link"),ye(t,"link",e),se(t),i.head.appendChild(t)))}}function uR(e,t){gi.m(e,t);var n=ca;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ln(i)+'"][href="'+ln(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ha(e)}if(!fn.has(s)&&(e=Dt({rel:"modulepreload",href:e},t),fn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(al(s)))return}i=n.createElement("link"),ye(i,"link",e),se(i),n.head.appendChild(i)}}}function cR(e,t,n){gi.S(e,t,n);var i=ca;if(i&&e){var r=Cs(i).hoistableStyles,s=Zs(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(sl(s)))l.loading=5;else{e=Dt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=fn.get(s))&&Vm(e,n);var u=a=i.createElement("link");se(u),ye(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,du(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function hR(e,t){gi.X(e,t);var n=ca;if(n&&e){var i=Cs(n).hoistableScripts,r=ha(e),s=i.get(r);s||(s=n.querySelector(al(r)),s||(e=Dt({src:e,async:!0},t),(t=fn.get(r))&&Mm(e,t),s=n.createElement("script"),se(s),ye(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function fR(e,t){gi.M(e,t);var n=ca;if(n&&e){var i=Cs(n).hoistableScripts,r=ha(e),s=i.get(r);s||(s=n.querySelector(al(r)),s||(e=Dt({src:e,async:!0,type:"module"},t),(t=fn.get(r))&&Mm(e,t),s=n.createElement("script"),se(s),ye(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Gy(e,t,n,i){var r=(r=qi.current)?Wu(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Zs(n.href),n=Cs(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Zs(n.href);var s=Cs(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(sl(e)))&&!s._p&&(a.instance=s,a.state.loading=5),fn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},fn.set(e,n),s||dR(r,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ha(n),n=Cs(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Zs(e){return'href="'+ln(e)+'"'}function sl(e){return'link[rel="stylesheet"]['+e+"]"}function y0(e){return Dt({},e,{"data-precedence":e.precedence,precedence:null})}function dR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ye(t,"link",n),se(t),e.head.appendChild(t))}function ha(e){return'[src="'+ln(e)+'"]'}function al(e){return"script[async]"+e}function Qy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ln(n.href)+'"]');if(i)return t.instance=i,se(i),i;var r=Dt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),se(i),ye(i,"style",r),du(i,n.precedence,e),t.instance=i;case"stylesheet":r=Zs(n.href);var s=e.querySelector(sl(r));if(s)return t.state.loading|=4,t.instance=s,se(s),s;i=y0(n),(r=fn.get(r))&&Vm(i,r),s=(e.ownerDocument||e).createElement("link"),se(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ye(s,"link",i),t.state.loading|=4,du(s,n.precedence,e),t.instance=s;case"script":return s=ha(n.src),(r=e.querySelector(al(s)))?(t.instance=r,se(r),r):(i=n,(r=fn.get(s))&&(i=Dt({},n),Mm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),se(r),ye(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,du(i,n.precedence,e));return t.instance}function du(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Vm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var mu=null;function Yy(e,t,n){if(mu===null){var i=new Map,r=mu=new Map;r.set(n,i)}else r=mu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Xo]||s[be]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Ky(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function mR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function _0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var No=null;function gR(){}function pR(e,t,n){if(No===null)throw Error(U(475));var i=No;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Zs(n.href),s=e.querySelector(sl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Ju.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,se(s);return}s=e.ownerDocument||e,n=y0(n),(r=fn.get(r))&&Vm(n,r),s=s.createElement("link"),se(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ye(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Ju.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function yR(){if(No===null)throw Error(U(475));var e=No;return e.stylesheets&&e.count===0&&hd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&hd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tc=null;function hd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tc=new Map,t.forEach(_R,e),tc=null,Ju.call(e))}function _R(e,t){if(!(t.state.loading&4)){var n=tc.get(e);if(n)var i=n.get(null);else{n=new Map,tc.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Ju.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Do={$$typeof:Xn,Provider:null,Consumer:null,_currentValue:Nr,_currentValue2:Nr,_threadCount:0};function vR(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ch(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.hiddenUpdates=Ch(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function v0(e,t,n,i,r,s,a,l,u,h,d,g){return e=new vR(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Qe(3,null,null,t),e.current=s,s.stateNode=e,t=lm(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},cm(s),e}function E0(e){return e?(e=As,e):As}function T0(e,t,n,i,r,s){r=E0(r),i.context===null?i.context=r:i.pendingContext=r,i=Hi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Fi(e,i,t),n!==null&&(We(n,e,t),io(n,e,t))}function Xy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function km(e,t){Xy(e,t),(e=e.alternate)&&Xy(e,t)}function A0(e){if(e.tag===13){var t=la(e,67108864);t!==null&&We(t,e,67108864),km(e,67108864)}}var ec=!0;function ER(e,t,n,i){var r=Z.T;Z.T=null;var s=yt.p;try{yt.p=2,Pm(e,t,n,i)}finally{yt.p=s,Z.T=r}}function TR(e,t,n,i){var r=Z.T;Z.T=null;var s=yt.p;try{yt.p=8,Pm(e,t,n,i)}finally{yt.p=s,Z.T=r}}function Pm(e,t,n,i){if(ec){var r=fd(i);if(r===null)af(e,t,i,nc,n),$y(e,i);else if(bR(r,e,t,n,i))i.stopPropagation();else if($y(e,i),t&4&&-1<AR.indexOf(e)){for(;r!==null;){var s=oa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Sr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-$e(a);l.entanglements[1]|=u,a&=~u}Ln(s),!(Et&6)&&(Qu=Nn()+500,rl(0))}}break;case 13:l=la(s,2),l!==null&&We(l,s,2),Pc(),km(s,2)}if(s=fd(i),s===null&&af(e,t,i,nc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else af(e,t,i,null,n)}}function fd(e){return e=Wd(e),Um(e)}var nc=null;function Um(e){if(nc=null,e=ps(e),e!==null){var t=Go(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Yv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nc=e,null}function b0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(o1()){case Zv:return 2;case Wv:return 8;case Du:case l1:return 32;case Jv:return 268435456;default:return 32}default:return 32}}var dd=!1,Yi=null,Ki=null,Xi=null,xo=new Map,Oo=new Map,Oi=[],AR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(e,t){switch(e){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(t.pointerId)}}function qa(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=oa(t),t!==null&&A0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function bR(e,t,n,i,r){switch(t){case"focusin":return Yi=qa(Yi,e,t,n,i,r),!0;case"dragenter":return Ki=qa(Ki,e,t,n,i,r),!0;case"mouseover":return Xi=qa(Xi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return xo.set(s,qa(xo.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Oo.set(s,qa(Oo.get(s)||null,e,t,n,i,r)),!0}return!1}function S0(e){var t=ps(e.target);if(t!==null){var n=Go(t);if(n!==null){if(t=n.tag,t===13){if(t=Yv(n),t!==null){e.blockedOn=t,p1(e.priority,function(){if(n.tag===13){var i=Ze();i=Kd(i);var r=la(n,i);r!==null&&We(r,n,i),km(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Df=i,n.target.dispatchEvent(i),Df=null}else return t=oa(n),t!==null&&A0(t),e.blockedOn=n,!1;t.shift()}return!0}function Zy(e,t,n){gu(e)&&n.delete(t)}function SR(){dd=!1,Yi!==null&&gu(Yi)&&(Yi=null),Ki!==null&&gu(Ki)&&(Ki=null),Xi!==null&&gu(Xi)&&(Xi=null),xo.forEach(Zy),Oo.forEach(Zy)}function Kl(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,SR)))}var Xl=null;function Wy(e){Xl!==e&&(Xl=e,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,function(){Xl===e&&(Xl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Um(i||n)===null)continue;break}var s=oa(n);s!==null&&(e.splice(t,3),t-=3,Qf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Vo(e){function t(u){return Kl(u,e)}Yi!==null&&Kl(Yi,e),Ki!==null&&Kl(Ki,e),Xi!==null&&Kl(Xi,e),xo.forEach(t),Oo.forEach(t);for(var n=0;n<Oi.length;n++){var i=Oi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)S0(n),n.blockedOn===null&&Oi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ue]||null;if(typeof s=="function")a||Wy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ue]||null)l=a.formAction;else if(Um(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Wy(n)}}}function Lm(e){this._internalRoot=e}zc.prototype.render=Lm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=Ze();T0(n,i,e,t,null,null)};zc.prototype.unmount=Lm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;T0(e.current,2,null,e,null,null),Pc(),t[aa]=null}};function zc(e){this._internalRoot=e}zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=rE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oi.length&&t!==0&&t<Oi[n].priority;n++);Oi.splice(n,0,e),n===0&&S0(e)}};var Jy=Gv.version;if(Jy!=="19.1.1")throw Error(U(527,Jy,"19.1.1"));yt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=t1(t),e=e!==null?Kv(e):null,e=e===null?null:e.stateNode,e};var wR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Qo=$l.inject(wR),Xe=$l}catch{}}Sc.createRoot=function(e,t){if(!Qv(e))throw Error(U(299));var n=!1,i="",r=vT,s=ET,a=TT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=v0(e,1,!1,null,null,n,i,r,s,a,l,null),e[aa]=t.current,Om(e),new Lm(t)};Sc.hydrateRoot=function(e,t,n){if(!Qv(e))throw Error(U(299));var i=!1,r="",s=vT,a=ET,l=TT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=v0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=E0(null),n=t.current,i=Ze(),i=Kd(i),r=Hi(i),r.callback=null,Fi(n,r,i),n=i,t.current.lanes=n,Ko(t,n),Ln(t),e[aa]=t.current,Om(e),new zc(t)};Sc.version="19.1.1";function w0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w0)}catch(e){console.error(e)}}w0(),jv.exports=Sc;var RR=jv.exports;const IR=()=>{};var t_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},CR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},I0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):CR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new NR;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class NR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DR=function(e){const t=R0(e);return I0.encodeByteArray(t,!0)},ic=function(e){return DR(e).replace(/\./g,"")},C0=function(e){try{return I0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=()=>xR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof t_>"u")return;const e=t_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},MR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&C0(e[1]);return t&&JSON.parse(t)},Bc=()=>{try{return IR()||OR()||VR()||MR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},N0=e=>{var t,n;return(n=(t=Bc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},kR=e=>{const t=N0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},D0=()=>{var e;return(e=Bc())==null?void 0:e.config},x0=e=>{var t;return(t=Bc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ic(JSON.stringify(n)),ic(JSON.stringify(a)),""].join(".")}const fo={};function LR(){const e={prod:[],emulator:[]};for(const t of Object.keys(fo))fo[t]?e.emulator.push(t):e.prod.push(t);return e}function jR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let e_=!1;function V0(e,t){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||fo[e]===t||fo[e]||e_)return;fo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=LR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{e_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=jR(i),_=n("text"),D=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,V);const x=h();u(v,w),R.append(v,D,M,x),document.body.appendChild(R)}s?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function BR(){var t;const e=(t=Bc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function FR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){const e=we();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function QR(){return!BR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function KR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class pi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=XR,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ol.prototype.create)}}class ol{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?$R(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new pi(r,l,i)}}function $R(e,t){return e.replace(ZR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const ZR=/\{\$([^}]+)}/g;function WR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function zr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(n_(s)&&n_(a)){if(!zr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function n_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function JR(e,t){const n=new t2(e,t);return n.subscribe.bind(n)}class t2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");e2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=lf),r.error===void 0&&(r.error=lf),r.complete===void 0&&(r.complete=lf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function lf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(e){return e&&e._delegate?e._delegate:e}class Br{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new PR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(r2(t))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Ir){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ir){return this.instances.has(t)}getOptions(t=Ir){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:i2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ir){return this.component?this.component.multipleInstances?t:Ir:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i2(e){return e===Ir?void 0:e}function r2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new n2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const a2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},o2=ot.INFO,l2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},u2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=l2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jm{constructor(t){this.name=t,this._logLevel=o2,this._logHandler=u2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?a2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const c2=(e,t)=>t.some(n=>e instanceof n);let i_,r_;function h2(){return i_||(i_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f2(){return r_||(r_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M0=new WeakMap,md=new WeakMap,k0=new WeakMap,uf=new WeakMap,zm=new WeakMap;function d2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n($i(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&M0.set(n,e)}).catch(()=>{}),zm.set(t,e),t}function m2(e){if(md.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});md.set(e,t)}let gd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return md.get(e);if(t==="objectStoreNames")return e.objectStoreNames||k0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function g2(e){gd=e(gd)}function p2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(cf(this),t,...n);return k0.set(i,t.sort?t.sort():[t]),$i(i)}:f2().includes(e)?function(...t){return e.apply(cf(this),t),$i(M0.get(this))}:function(...t){return $i(e.apply(cf(this),t))}}function y2(e){return typeof e=="function"?p2(e):(e instanceof IDBTransaction&&m2(e),c2(e,h2())?new Proxy(e,gd):e)}function $i(e){if(e instanceof IDBRequest)return d2(e);if(uf.has(e))return uf.get(e);const t=y2(e);return t!==e&&(uf.set(e,t),zm.set(t,e)),t}const cf=e=>zm.get(e);function _2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=$i(a);return i&&a.addEventListener("upgradeneeded",u=>{i($i(a.result),u.oldVersion,u.newVersion,$i(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const v2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],hf=new Map;function s_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(hf.get(t))return hf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=E2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||v2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return hf.set(t,s),s}g2(e=>({...e,get:(t,n,i)=>s_(t,n)||e.get(t,n,i),has:(t,n)=>!!s_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function A2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const pd="@firebase/app",a_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new jm("@firebase/app"),b2="@firebase/app-compat",S2="@firebase/analytics-compat",w2="@firebase/analytics",R2="@firebase/app-check-compat",I2="@firebase/app-check",C2="@firebase/auth",N2="@firebase/auth-compat",D2="@firebase/database",x2="@firebase/data-connect",O2="@firebase/database-compat",V2="@firebase/functions",M2="@firebase/functions-compat",k2="@firebase/installations",P2="@firebase/installations-compat",U2="@firebase/messaging",L2="@firebase/messaging-compat",j2="@firebase/performance",z2="@firebase/performance-compat",B2="@firebase/remote-config",q2="@firebase/remote-config-compat",H2="@firebase/storage",F2="@firebase/storage-compat",G2="@firebase/firestore",Q2="@firebase/ai",Y2="@firebase/firestore-compat",K2="firebase",X2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]",$2={[pd]:"fire-core",[b2]:"fire-core-compat",[w2]:"fire-analytics",[S2]:"fire-analytics-compat",[I2]:"fire-app-check",[R2]:"fire-app-check-compat",[C2]:"fire-auth",[N2]:"fire-auth-compat",[D2]:"fire-rtdb",[x2]:"fire-data-connect",[O2]:"fire-rtdb-compat",[V2]:"fire-fn",[M2]:"fire-fn-compat",[k2]:"fire-iid",[P2]:"fire-iid-compat",[U2]:"fire-fcm",[L2]:"fire-fcm-compat",[j2]:"fire-perf",[z2]:"fire-perf-compat",[B2]:"fire-rc",[q2]:"fire-rc-compat",[H2]:"fire-gcs",[F2]:"fire-gcs-compat",[G2]:"fire-fst",[Y2]:"fire-fst-compat",[Q2]:"fire-vertex","fire-js":"fire-js",[K2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,Z2=new Map,_d=new Map;function o_(e,t){try{e.container.addComponent(t)}catch(n){ui.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ws(e){const t=e.name;if(_d.has(t))return ui.debug(`There were multiple attempts to register component ${t}.`),!1;_d.set(t,e);for(const n of rc.values())o_(n,e);for(const n of Z2.values())o_(n,e);return!0}function Bm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _n(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new ol("app","Firebase",W2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=X2;function P0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:yd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Zi.create("bad-app-name",{appName:String(r)});if(n||(n=D0()),!n)throw Zi.create("no-options");const s=rc.get(r);if(s){if(zr(n,s.options)&&zr(i,s.config))return s;throw Zi.create("duplicate-app",{appName:r})}const a=new s2(r);for(const u of _d.values())a.addComponent(u);const l=new J2(n,i,a);return rc.set(r,l),l}function U0(e=yd){const t=rc.get(e);if(!t&&e===yd&&D0())return P0();if(!t)throw Zi.create("no-app",{appName:e});return t}function Wi(e,t,n){let i=$2[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}Ws(new Br(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebase-heartbeat-database",eI=1,Mo="firebase-heartbeat-store";let ff=null;function L0(){return ff||(ff=_2(tI,eI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Zi.create("idb-open",{originalErrorMessage:e.message})})),ff}async function nI(e){try{const n=(await L0()).transaction(Mo),i=await n.objectStore(Mo).get(j0(e));return await n.done,i}catch(t){if(t instanceof pi)ui.warn(t.message);else{const n=Zi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ui.warn(n.message)}}}async function l_(e,t){try{const i=(await L0()).transaction(Mo,"readwrite");await i.objectStore(Mo).put(t,j0(e)),await i.done}catch(n){if(n instanceof pi)ui.warn(n.message);else{const i=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(i.message)}}}function j0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=1024,rI=30;class sI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=u_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>rI){const a=lI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ui.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u_(),{heartbeatsToSend:i,unsentEntries:r}=aI(this._heartbeatsCache.heartbeats),s=ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ui.warn(n),""}}}function u_(){return new Date().toISOString().substring(0,10)}function aI(e,t=iI){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),c_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),c_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class oI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?KR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return l_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return l_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function c_(e){return ic(JSON.stringify({version:2,heartbeats:e})).length}function lI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(e){Ws(new Br("platform-logger",t=>new T2(t),"PRIVATE")),Ws(new Br("heartbeat",t=>new sI(t),"PRIVATE")),Wi(pd,a_,e),Wi(pd,a_,"esm2020"),Wi("fire-js","")}uI("");var cI="firebase",hI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi(cI,hI,"app");var h_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,z0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,I,C){for(var A=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)A[xt-2]=arguments[xt];return y.prototype[I].apply(S,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,T){T||(T=0);var S=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)S[I]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(I=0;16>I;++I)S[I]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],I=E.g[2];var C=E.g[3],A=y+(C^T&(I^C))+S[0]+3614090360&4294967295;y=T+(A<<7&4294967295|A>>>25),A=C+(I^y&(T^I))+S[1]+3905402710&4294967295,C=y+(A<<12&4294967295|A>>>20),A=I+(T^C&(y^T))+S[2]+606105819&4294967295,I=C+(A<<17&4294967295|A>>>15),A=T+(y^I&(C^y))+S[3]+3250441966&4294967295,T=I+(A<<22&4294967295|A>>>10),A=y+(C^T&(I^C))+S[4]+4118548399&4294967295,y=T+(A<<7&4294967295|A>>>25),A=C+(I^y&(T^I))+S[5]+1200080426&4294967295,C=y+(A<<12&4294967295|A>>>20),A=I+(T^C&(y^T))+S[6]+2821735955&4294967295,I=C+(A<<17&4294967295|A>>>15),A=T+(y^I&(C^y))+S[7]+4249261313&4294967295,T=I+(A<<22&4294967295|A>>>10),A=y+(C^T&(I^C))+S[8]+1770035416&4294967295,y=T+(A<<7&4294967295|A>>>25),A=C+(I^y&(T^I))+S[9]+2336552879&4294967295,C=y+(A<<12&4294967295|A>>>20),A=I+(T^C&(y^T))+S[10]+4294925233&4294967295,I=C+(A<<17&4294967295|A>>>15),A=T+(y^I&(C^y))+S[11]+2304563134&4294967295,T=I+(A<<22&4294967295|A>>>10),A=y+(C^T&(I^C))+S[12]+1804603682&4294967295,y=T+(A<<7&4294967295|A>>>25),A=C+(I^y&(T^I))+S[13]+4254626195&4294967295,C=y+(A<<12&4294967295|A>>>20),A=I+(T^C&(y^T))+S[14]+2792965006&4294967295,I=C+(A<<17&4294967295|A>>>15),A=T+(y^I&(C^y))+S[15]+1236535329&4294967295,T=I+(A<<22&4294967295|A>>>10),A=y+(I^C&(T^I))+S[1]+4129170786&4294967295,y=T+(A<<5&4294967295|A>>>27),A=C+(T^I&(y^T))+S[6]+3225465664&4294967295,C=y+(A<<9&4294967295|A>>>23),A=I+(y^T&(C^y))+S[11]+643717713&4294967295,I=C+(A<<14&4294967295|A>>>18),A=T+(C^y&(I^C))+S[0]+3921069994&4294967295,T=I+(A<<20&4294967295|A>>>12),A=y+(I^C&(T^I))+S[5]+3593408605&4294967295,y=T+(A<<5&4294967295|A>>>27),A=C+(T^I&(y^T))+S[10]+38016083&4294967295,C=y+(A<<9&4294967295|A>>>23),A=I+(y^T&(C^y))+S[15]+3634488961&4294967295,I=C+(A<<14&4294967295|A>>>18),A=T+(C^y&(I^C))+S[4]+3889429448&4294967295,T=I+(A<<20&4294967295|A>>>12),A=y+(I^C&(T^I))+S[9]+568446438&4294967295,y=T+(A<<5&4294967295|A>>>27),A=C+(T^I&(y^T))+S[14]+3275163606&4294967295,C=y+(A<<9&4294967295|A>>>23),A=I+(y^T&(C^y))+S[3]+4107603335&4294967295,I=C+(A<<14&4294967295|A>>>18),A=T+(C^y&(I^C))+S[8]+1163531501&4294967295,T=I+(A<<20&4294967295|A>>>12),A=y+(I^C&(T^I))+S[13]+2850285829&4294967295,y=T+(A<<5&4294967295|A>>>27),A=C+(T^I&(y^T))+S[2]+4243563512&4294967295,C=y+(A<<9&4294967295|A>>>23),A=I+(y^T&(C^y))+S[7]+1735328473&4294967295,I=C+(A<<14&4294967295|A>>>18),A=T+(C^y&(I^C))+S[12]+2368359562&4294967295,T=I+(A<<20&4294967295|A>>>12),A=y+(T^I^C)+S[5]+4294588738&4294967295,y=T+(A<<4&4294967295|A>>>28),A=C+(y^T^I)+S[8]+2272392833&4294967295,C=y+(A<<11&4294967295|A>>>21),A=I+(C^y^T)+S[11]+1839030562&4294967295,I=C+(A<<16&4294967295|A>>>16),A=T+(I^C^y)+S[14]+4259657740&4294967295,T=I+(A<<23&4294967295|A>>>9),A=y+(T^I^C)+S[1]+2763975236&4294967295,y=T+(A<<4&4294967295|A>>>28),A=C+(y^T^I)+S[4]+1272893353&4294967295,C=y+(A<<11&4294967295|A>>>21),A=I+(C^y^T)+S[7]+4139469664&4294967295,I=C+(A<<16&4294967295|A>>>16),A=T+(I^C^y)+S[10]+3200236656&4294967295,T=I+(A<<23&4294967295|A>>>9),A=y+(T^I^C)+S[13]+681279174&4294967295,y=T+(A<<4&4294967295|A>>>28),A=C+(y^T^I)+S[0]+3936430074&4294967295,C=y+(A<<11&4294967295|A>>>21),A=I+(C^y^T)+S[3]+3572445317&4294967295,I=C+(A<<16&4294967295|A>>>16),A=T+(I^C^y)+S[6]+76029189&4294967295,T=I+(A<<23&4294967295|A>>>9),A=y+(T^I^C)+S[9]+3654602809&4294967295,y=T+(A<<4&4294967295|A>>>28),A=C+(y^T^I)+S[12]+3873151461&4294967295,C=y+(A<<11&4294967295|A>>>21),A=I+(C^y^T)+S[15]+530742520&4294967295,I=C+(A<<16&4294967295|A>>>16),A=T+(I^C^y)+S[2]+3299628645&4294967295,T=I+(A<<23&4294967295|A>>>9),A=y+(I^(T|~C))+S[0]+4096336452&4294967295,y=T+(A<<6&4294967295|A>>>26),A=C+(T^(y|~I))+S[7]+1126891415&4294967295,C=y+(A<<10&4294967295|A>>>22),A=I+(y^(C|~T))+S[14]+2878612391&4294967295,I=C+(A<<15&4294967295|A>>>17),A=T+(C^(I|~y))+S[5]+4237533241&4294967295,T=I+(A<<21&4294967295|A>>>11),A=y+(I^(T|~C))+S[12]+1700485571&4294967295,y=T+(A<<6&4294967295|A>>>26),A=C+(T^(y|~I))+S[3]+2399980690&4294967295,C=y+(A<<10&4294967295|A>>>22),A=I+(y^(C|~T))+S[10]+4293915773&4294967295,I=C+(A<<15&4294967295|A>>>17),A=T+(C^(I|~y))+S[1]+2240044497&4294967295,T=I+(A<<21&4294967295|A>>>11),A=y+(I^(T|~C))+S[8]+1873313359&4294967295,y=T+(A<<6&4294967295|A>>>26),A=C+(T^(y|~I))+S[15]+4264355552&4294967295,C=y+(A<<10&4294967295|A>>>22),A=I+(y^(C|~T))+S[6]+2734768916&4294967295,I=C+(A<<15&4294967295|A>>>17),A=T+(C^(I|~y))+S[13]+1309151649&4294967295,T=I+(A<<21&4294967295|A>>>11),A=y+(I^(T|~C))+S[4]+4149444226&4294967295,y=T+(A<<6&4294967295|A>>>26),A=C+(T^(y|~I))+S[11]+3174756917&4294967295,C=y+(A<<10&4294967295|A>>>22),A=I+(y^(C|~T))+S[2]+718787259&4294967295,I=C+(A<<15&4294967295|A>>>17),A=T+(C^(I|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(I+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+C&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,S=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=T;)r(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<y;)if(S[I++]=E.charCodeAt(C++),I==this.blockSize){r(this,S),I=0;break}}else for(;C<y;)if(S[I++]=E[C++],I==this.blockSize){r(this,S),I=0;break}}this.h=I,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var S=0;32>S;S+=8)E[T++]=this.g[y]>>>S&255;return E};function s(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function a(E,y){this.h=y;for(var T=[],S=!0,I=E.length-1;0<=I;I--){var C=E[I]|0;S&&C==y||(T[I]=C,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return M(h(-E));for(var y=[],T=1,S=0;E>=T;S++)y[S]=E/T|0,T*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return M(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),S=g,I=0;I<E.length;I+=8){var C=Math.min(8,E.length-I),A=parseInt(E.substring(I,I+C),y);8>C?(C=h(Math.pow(y,C)),S=S.j(C).add(h(A))):(S=S.j(T),S=S.add(h(A)))}return S}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(V(this))return"-"+M(this).toString(E);for(var y=h(Math.pow(E,6)),T=this,S="";;){var I=x(T,y).g;T=w(T,I.j(y));var C=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=I,D(T))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function V(E){return E.h==-1}e.l=function(E){return E=w(this,E),V(E)?-1:D(E)?0:1};function M(E){for(var y=E.g.length,T=[],S=0;S<y;S++)T[S]=~E.g[S];return new a(T,~E.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0,I=0;I<=y;I++){var C=S+(this.i(I)&65535)+(E.i(I)&65535),A=(C>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);S=A>>>16,C&=65535,A&=65535,T[I]=A<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function w(E,y){return E.add(M(y))}e.j=function(E){if(D(this)||D(E))return g;if(V(this))return V(E)?M(this).j(M(E)):M(M(this).j(E));if(V(E))return M(this.j(M(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<E.g.length;I++){var C=this.i(S)>>>16,A=this.i(S)&65535,xt=E.i(I)>>>16,$t=E.i(I)&65535;T[2*S+2*I]+=A*$t,v(T,2*S+2*I),T[2*S+2*I+1]+=C*$t,v(T,2*S+2*I+1),T[2*S+2*I+1]+=A*xt,v(T,2*S+2*I+1),T[2*S+2*I+2]+=C*xt,v(T,2*S+2*I+2)}for(S=0;S<y;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=y;S<2*y;S++)T[S]=0;return new a(T,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function R(E,y){this.g=E,this.h=y}function x(E,y){if(D(y))throw Error("division by zero");if(D(E))return new R(g,g);if(V(E))return y=x(M(E),y),new R(M(y.g),M(y.h));if(V(y))return y=x(E,M(y)),new R(M(y.g),y.h);if(30<E.g.length){if(V(E)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=y;0>=S.l(E);)T=L(T),S=L(S);var I=q(T,1),C=q(S,1);for(S=q(S,2),T=q(T,2);!D(S);){var A=C.add(S);0>=A.l(E)&&(I=I.add(T),C=A),S=q(S,1),T=q(T,1)}return y=w(E,I.j(y)),new R(I,y)}for(I=g;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=h(T),A=C.j(y);V(A)||0<A.l(E);)T-=S,C=h(T),A=C.j(y);D(C)&&(C=m),I=I.add(C),E=w(E,A)}return new R(I,E)}e.A=function(E){return x(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)&E.i(S);return new a(T,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)|E.i(S);return new a(T,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)^E.i(S);return new a(T,this.h^E.h)};function L(E){for(var y=E.g.length+1,T=[],S=0;S<y;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(T,E.h)}function q(E,y){var T=y>>5;y%=32;for(var S=E.g.length-T,I=[],C=0;C<S;C++)I[C]=0<y?E.i(C+T)>>>y|E.i(C+T+1)<<32-y:E.i(C+T);return new a(I,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,z0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Ji=a}).apply(typeof h_<"u"?h_:typeof self<"u"?self:typeof window<"u"?window:{});var Zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,Ya,q0,pu,vd,H0,F0,G0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zl=="object"&&Zl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,O){for(var z=Array(arguments.length-2),St=2;St<arguments.length;St++)z[St-2]=arguments[St];return c.prototype[N].apply(p,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,O=p.length||0;o.length=N+O;for(let z=0;z<O;z++)o[N+z]=p[z]}else o.push(p)}}class w{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let O=0;O<T.length;O++)f=T[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function A(){var o=mt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class xt{constructor(){this.h=this.g=null}add(c,f){const p=$t.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var $t=new w(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,K=!1,mt=new xt,_t=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(je)}};var je=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(f){C(f)}var c=$t;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}K=!1};function kt(){this.s=this.s,this.C=this.C}kt.prototype.s=!1,kt.prototype.ma=function(){this.s||(this.s=!0,this.N())},kt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Zt(o,c){if(It.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ea[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Zt.aa.h.call(this)}}D(Zt,It);var Ea={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),yi=0;function yr(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++yi,this.da=this.fa=!1}function _i(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function jn(o){this.src=o,this.g={},this.h=0}jn.prototype.add=function(o,c,f,p,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var z=vi(o,c,p,N);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new yr(c,this.src,O,!!p,N),c.fa=f,o.push(c)),c};function bn(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(p,N,1),O&&(_i(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function vi(o,c,f,p){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return N}return-1}var _r="closure_lm_"+(1e6*Math.random()|0),Q={};function at(o,c,f,p,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)at(o,c[O],f,p,N);return null}return f=Bn(f),o&&o[nn]?o.K(c,f,h(p)?!!p.capture:!1,N):ze(o,c,f,!1,p,N)}function ze(o,c,f,p,N,O){if(!c)throw Error("Invalid event type");var z=h(N)?!!N.capture:!!N,St=mn(o);if(St||(o[_r]=St=new jn(o)),f=St.add(c,f,p,z,O),f.proxy)return f;if(p=et(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Re||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(dn(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function et(){function o(f){return c.call(o.src,o.listener,f)}const c=zn;return o}function tt(o,c,f,p,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)tt(o,c[O],f,p,N);else p=h(p)?!!p.capture:!!p,f=Bn(f),o&&o[nn]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=vi(O,f,p,N),-1<f&&(_i(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=mn(o))&&(c=o.g[c.toString()],o=-1,c&&(o=vi(c,f,p,N)),(f=-1<o?c[o]:null)&&gt(f))}function gt(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[nn])bn(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(dn(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=mn(c))?(bn(f,o),f.h==0&&(f.src=null,c[_r]=null)):_i(o)}}}function dn(o){return o in Q?Q[o]:Q[o]="on"+o}function zn(o,c){if(o.da)o=!0;else{c=new Zt(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&gt(o),o=f.call(p,c)}return o}function mn(o){return o=o[_r],o instanceof jn?o:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bn(o){return typeof o=="function"?o:(o[gn]||(o[gn]=function(c){return o.handleEvent(c)}),o[gn])}function Wt(){kt.call(this),this.i=new jn(this),this.M=this,this.F=null}D(Wt,kt),Wt.prototype[nn]=!0,Wt.prototype.removeEventListener=function(o,c,f,p){tt(this,o,c,f,p)};function ce(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new It(c,o);else if(c instanceof It)c.target=c.target||o;else{var N=c;c=new It(p,o),S(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var z=c.g=f[O];N=Jr(z,p,!0,c)&&N}if(z=c.g=o,N=Jr(z,p,!0,c)&&N,N=Jr(z,p,!1,c)&&N,f)for(O=0;O<f.length;O++)z=c.g=f[O],N=Jr(z,p,!1,c)&&N}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)_i(f[p]);delete o.g[c],o.h--}}this.F=null},Wt.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},Wt.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Jr(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var z=c[O];if(z&&!z.da&&z.capture==f){var St=z.listener,he=z.ha||z.src;z.fa&&bn(o.i,z),N=St.call(he,p)!==!1&&N}}return N&&!p.defaultPrevented}function Ta(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function qn(o){o.g=Ta(()=>{o.g=null,o.i&&(o.i=!1,qn(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class sS extends kt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:qn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(o){kt.call(this),this.h=o,this.g={}}D(Aa,kt);var Pg=[];function Ug(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&gt(c)},o),o.g={}}Aa.prototype.N=function(){Aa.aa.N.call(this),Ug(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ch=l.JSON.stringify,aS=l.JSON.parse,oS=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function hh(){}hh.prototype.h=null;function Lg(o){return o.h||(o.h=o.i())}function jg(){}var ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fh(){It.call(this,"d")}D(fh,It);function dh(){It.call(this,"c")}D(dh,It);var vr={},zg=null;function Tl(){return zg=zg||new Wt}vr.La="serverreachability";function Bg(o){It.call(this,vr.La,o)}D(Bg,It);function Sa(o){const c=Tl();ce(c,new Bg(c))}vr.STAT_EVENT="statevent";function qg(o,c){It.call(this,vr.STAT_EVENT,o),this.stat=c}D(qg,It);function Ie(o){const c=Tl();ce(c,new qg(c,o))}vr.Ma="timingevent";function Hg(o,c){It.call(this,vr.Ma,o),this.size=c}D(Hg,It);function wa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ra(){this.g=!0}Ra.prototype.xa=function(){this.g=!1};function lS(o,c,f,p,N,O){o.info(function(){if(o.g)if(O)for(var z="",St=O.split("&"),he=0;he<St.length;he++){var dt=St[he].split("=");if(1<dt.length){var ve=dt[0];dt=dt[1];var Ee=ve.split("_");z=2<=Ee.length&&Ee[1]=="type"?z+(ve+"="+dt+"&"):z+(ve+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function uS(o,c,f,p,N,O,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+z})}function ts(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+hS(o,f)+(p?" "+p:"")})}function cS(o,c){o.info(function(){return"TIMEOUT: "+c})}Ra.prototype.info=function(){};function hS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return ch(f)}catch{return c}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mh;function bl(){}D(bl,hh),bl.prototype.g=function(){return new XMLHttpRequest},bl.prototype.i=function(){return{}},mh=new bl;function Ei(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gg}function Gg(){this.i=null,this.g="",this.h=!1}var Qg={},gh={};function ph(o,c,f){o.L=1,o.v=Il(Hn(c)),o.m=f,o.P=!0,Yg(o,null)}function Yg(o,c){o.F=Date.now(),Sl(o),o.A=Hn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),op(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Gg,o.g=wp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new sS(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Pg[0]=N.toString()),N=Pg);for(var O=0;O<N.length;O++){var z=at(f,N[O],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Sa(),lS(o.i,o.u,o.A,o.l,o.R,o.m)}Ei.prototype.ca=function(o){o=o.target;const c=this.M;c&&Fn(o)==3?c.j():this.Y(o)},Ei.prototype.Y=function(o){try{if(o==this.g)t:{const Ee=Fn(this.g);var c=this.g.Ba();const is=this.g.Z();if(!(3>Ee)&&(Ee!=3||this.g&&(this.h.h||this.g.oa()||mp(this.g)))){this.J||Ee!=4||c==7||(c==8||0>=is?Sa(3):Sa(2)),yh(this);var f=this.g.Z();this.X=f;e:if(Kg(this)){var p=mp(this.g);o="";var N=p.length,O=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),Ia(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,uS(this.i,this.u,this.A,this.l,this.R,Ee,f),this.o){if(this.T&&!this.K){e:{if(this.g){var St,he=this.g;if((St=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(St)){var dt=St;break e}}dt=null}if(f=dt)ts(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_h(this,f);else{this.o=!1,this.s=3,Ie(12),Er(this),Ia(this);break t}}if(this.P){f=!0;let pn;for(;!this.J&&this.C<z.length;)if(pn=fS(this,z),pn==gh){Ee==4&&(this.s=4,Ie(14),f=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Qg){this.s=4,Ie(15),ts(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else ts(this.i,this.l,pn,null),_h(this,pn);if(Kg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||z.length!=0||this.h.h||(this.s=1,Ie(16),f=!1),this.o=this.o&&f,!f)ts(this.i,this.l,z,"[Invalid Chunked Response]"),Er(this),Ia(this);else if(0<z.length&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.ba&&!ve.M&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Sh(ve),ve.M=!0,Ie(11))}}else ts(this.i,this.l,z,null),_h(this,z);Ee==4&&Er(this),this.o&&!this.J&&(Ee==4?Tp(this.j,this):(this.o=!1,Sl(this)))}else NS(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Er(this),Ia(this)}}}catch{}finally{}};function Kg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function fS(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?gh:(f=Number(c.substring(f,p)),isNaN(f)?Qg:(p+=1,p+f>c.length?gh:(c=c.slice(p,p+f),o.C=p+f,c)))}Ei.prototype.cancel=function(){this.J=!0,Er(this)};function Sl(o){o.S=Date.now()+o.I,Xg(o,o.I)}function Xg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=wa(m(o.ba,o),c)}function yh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ei.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(cS(this.i,this.A),this.L!=2&&(Sa(),Ie(17)),Er(this),this.s=2,Ia(this)):Xg(this,this.S-o)};function Ia(o){o.j.G==0||o.J||Tp(o.j,o)}function Er(o){yh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ug(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function _h(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||vh(f.h,o))){if(!o.K&&vh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Vl(f),xl(f);else break t;bh(f),Ie(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=wa(m(f.Za,f),6e3));if(1>=Wg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ar(f,11)}else if((o.K||f.g==o)&&Vl(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let dt=N[c];if(f.T=dt[0],dt=dt[1],f.G==2)if(dt[0]=="c"){f.K=dt[1],f.ia=dt[2];const ve=dt[3];ve!=null&&(f.la=ve,f.j.info("VER="+f.la));const Ee=dt[4];Ee!=null&&(f.Aa=Ee,f.j.info("SVER="+f.Aa));const is=dt[5];is!=null&&typeof is=="number"&&0<is&&(p=1.5*is,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const pn=o.g;if(pn){const kl=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var O=p.h;O.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Eh(O,O.h),O.h=null))}if(p.D){const wh=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;wh&&(p.ya=wh,Ct(p.I,p.D,wh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=Sp(p,p.J?p.ia:null,p.W),z.K){Jg(p.h,z);var St=z,he=p.L;he&&(St.I=he),St.B&&(yh(St),Sl(St)),p.g=z}else vp(p);0<f.i.length&&Ol(f)}else dt[0]!="stop"&&dt[0]!="close"||Ar(f,7);else f.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Ar(f,7):Ah(f):dt[0]!="noop"&&f.l&&f.l.ta(dt),f.v=0)}}Sa(4)}catch{}}var dS=class{constructor(o,c){this.g=o,this.map=c}};function $g(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Wg(o){return o.h?1:o.g?o.g.size:0}function vh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Eh(o,c){o.g?o.g.add(c):o.h=c}function Jg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}$g.prototype.cancel=function(){if(this.i=tp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function tp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function mS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function gS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function ep(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=gS(o),p=mS(o),N=p.length,O=0;O<N;O++)c.call(void 0,p[O],f&&f[O],o)}var np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var O=o[f].substring(0,p);N=o[f].substring(p+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Tr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Tr){this.h=o.h,wl(this,o.j),this.o=o.o,this.g=o.g,Rl(this,o.s),this.l=o.l;var c=o.i,f=new Da;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),ip(this,f),this.m=o.m}else o&&(c=String(o).match(np))?(this.h=!1,wl(this,c[1]||"",!0),this.o=Ca(c[2]||""),this.g=Ca(c[3]||"",!0),Rl(this,c[4]),this.l=Ca(c[5]||"",!0),ip(this,c[6]||"",!0),this.m=Ca(c[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}Tr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Na(c,rp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Na(c,rp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Na(f,f.charAt(0)=="/"?vS:_S,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Na(f,TS)),o.join("")};function Hn(o){return new Tr(o)}function wl(o,c,f){o.j=f?Ca(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Rl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function ip(o,c,f){c instanceof Da?(o.i=c,AS(o.i,o.h)):(f||(c=Na(c,ES)),o.i=new Da(c,o.h))}function Ct(o,c,f){o.i.set(c,f)}function Il(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ca(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Na(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,yS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function yS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var rp=/[#\/\?@]/g,_S=/[#\?:]/g,vS=/[#\?]/g,ES=/[#\?@]/g,TS=/#/g;function Da(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ti(o){o.g||(o.g=new Map,o.h=0,o.i&&pS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Da.prototype,e.add=function(o,c){Ti(this),this.i=null,o=es(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function sp(o,c){Ti(o),c=es(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function ap(o,c){return Ti(o),c=es(o,c),o.g.has(c)}e.forEach=function(o,c){Ti(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){Ti(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let O=0;O<N.length;O++)f.push(c[p])}return f},e.V=function(o){Ti(this);let c=[];if(typeof o=="string")ap(this,o)&&(c=c.concat(this.g.get(es(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return Ti(this),this.i=null,o=es(this,o),ap(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function op(o,c,f){sp(o,c),0<f.length&&(o.i=null,o.g.set(es(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var N=O;z[p]!==""&&(N+="="+encodeURIComponent(String(z[p]))),o.push(N)}}return this.i=o.join("&")};function es(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function AS(o,c){c&&!o.j&&(Ti(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(sp(this,p),op(this,N,f))},o)),o.j=c}function bS(o,c){const f=new Ra;if(l.Image){const p=new Image;p.onload=_(Ai,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(Ai,f,"TestLoadImage: error",!1,c,p),p.onabort=_(Ai,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(Ai,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function SS(o,c){const f=new Ra,p=new AbortController,N=setTimeout(()=>{p.abort(),Ai(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(N),O.ok?Ai(f,"TestPingServer: ok",!0,c):Ai(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Ai(f,"TestPingServer: error",!1,c)})}function Ai(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function wS(){this.g=new oS}function RS(o,c,f){const p=f||"";try{ep(o,function(N,O){let z=N;h(N)&&(z=ch(N)),c.push(p+O+"="+encodeURIComponent(z))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Cl(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Cl,hh),Cl.prototype.g=function(){return new Nl(this.l,this.j)},Cl.prototype.i=function(o){return function(){return o}}({});function Nl(o,c){Wt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Nl,Wt),e=Nl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Oa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function lp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?xa(this):Oa(this),this.readyState==3&&lp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,xa(this))},e.Qa=function(o){this.g&&(this.response=o,xa(this))},e.ga=function(){this.g&&xa(this)};function xa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Oa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Oa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function up(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Th(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=up(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ct(o,c,f))}function jt(o){Wt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(jt,Wt);var IS=/^https?$/i,CS=["POST","PUT"];e=jt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mh.g(),this.v=this.o?Lg(this.o):Lg(mh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){cp(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(CS,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of f)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){cp(this,O)}};function cp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,hp(o),Dl(o)}function hp(o){o.A||(o.A=!0,ce(o,"complete"),ce(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ce(this,"complete"),ce(this,"abort"),Dl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dl(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?fp(this):this.bb())},e.bb=function(){fp(this)};function fp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Fn(o)!=4||o.Z()!=2)){if(o.u&&Fn(o)==4)Ta(o.Ea,0,o);else if(ce(o,"readystatechange"),Fn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var N=String(o.D).match(np)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!IS.test(N?N.toLowerCase():"")}f=p}if(f)ce(o,"complete"),ce(o,"success");else{o.m=6;try{var O=2<Fn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",hp(o)}}finally{Dl(o)}}}}function Dl(o,c){if(o.g){dp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ce(o,"ready");try{f.onreadystatechange=p}catch{}}}function dp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Fn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),aS(c)}};function mp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function NS(o){const c={};o=(o.g&&2<=Fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function gp(o){this.Aa=0,this.i=[],this.j=new Ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,o),this.cb=Va("retryDelaySeedMs",1e4,o),this.Wa=Va("forwardChannelMaxRetries",2,o),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new $g(o&&o.concurrentRequestLimit),this.Da=new wS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=gp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ie(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Sp(this,null,this.W),Ol(this)};function Ah(o){if(pp(o),o.G==3){var c=o.U++,f=Hn(o.I);if(Ct(f,"SID",o.K),Ct(f,"RID",c),Ct(f,"TYPE","terminate"),Ma(o,f),c=new Ei(o,o.j,c),c.L=2,c.v=Il(Hn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=wp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Sl(c)}bp(o)}function xl(o){o.g&&(Sh(o),o.g.cancel(),o.g=null)}function pp(o){xl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Vl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ol(o){if(!Zg(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||_t(),K||(X(),K=!0),mt.add(c,o),o.B=0}}function DS(o,c){return Wg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=wa(m(o.Ga,o,c),Ap(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Ei(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=_p(this,N,c),f=Hn(this.I),Ct(f,"RID",o),Ct(f,"CVER",22),this.D&&Ct(f,"X-HTTP-Session-Id",this.D),Ma(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(up(O)))+"&"+c:this.m&&Th(f,this.m,O)),Eh(this.h,N),this.Ua&&Ct(f,"TYPE","init"),this.P?(Ct(f,"$req",c),Ct(f,"SID","null"),N.T=!0,ph(N,f,null)):ph(N,f,c),this.G=2}}else this.G==3&&(o?yp(this,o):this.i.length==0||Zg(this.h)||yp(this))};function yp(o,c){var f;c?f=c.l:f=o.U++;const p=Hn(o.I);Ct(p,"SID",o.K),Ct(p,"RID",f),Ct(p,"AID",o.T),Ma(o,p),o.m&&o.o&&Th(p,o.m,o.o),f=new Ei(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=_p(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Eh(o.h,f),ph(f,p,c)}function Ma(o,c){o.H&&q(o.H,function(f,p){Ct(c,p,f)}),o.l&&ep({},function(f,p){Ct(c,p,f)})}function _p(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const z=["count="+f];O==-1?0<f?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let St=!0;for(let he=0;he<f;he++){let dt=N[he].g;const ve=N[he].map;if(dt-=O,0>dt)O=Math.max(0,N[he].g-100),St=!1;else try{RS(ve,z,"req"+dt+"_")}catch{p&&p(ve)}}if(St){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function vp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||_t(),K||(X(),K=!0),mt.add(c,o),o.v=0}}function bh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=wa(m(o.Fa,o),Ap(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Ep(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=wa(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),xl(this),Ep(this))};function Sh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Ep(o){o.g=new Ei(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Hn(o.qa);Ct(c,"RID","rpc"),Ct(c,"SID",o.K),Ct(c,"AID",o.T),Ct(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(c,"TO",o.ja),Ct(c,"TYPE","xmlhttp"),Ma(o,c),o.m&&o.o&&Th(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Il(Hn(c)),f.m=null,f.P=!0,Yg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,xl(this),bh(this),Ie(19))};function Vl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Tp(o,c){var f=null;if(o.g==c){Vl(o),Sh(o),o.g=null;var p=2}else if(vh(o.h,c))f=c.D,Jg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=Tl(),ce(p,new Hg(p,f)),Ol(o)}else vp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&DS(o,c)||p==2&&bh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:Ar(o,5);break;case 4:Ar(o,10);break;case 3:Ar(o,6);break;default:Ar(o,2)}}}function Ap(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Ar(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new Tr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wl(p,"https"),Il(p),N?bS(p.toString(),f):SS(p.toString(),f)}else Ie(2);o.G=0,o.l&&o.l.sa(c),bp(o),pp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function bp(o){if(o.G=0,o.ka=[],o.l){const c=tp(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Sp(o,c,f){var p=f instanceof Tr?Hn(f):new Tr(f);if(p.g!="")c&&(p.g=c+"."+p.g),Rl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new Tr(null);p&&wl(O,p),c&&(O.g=c),N&&Rl(O,N),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&Ct(p,f,c),Ct(p,"VER",o.la),Ma(o,p),p}function wp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new jt(new Cl({eb:f})):new jt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rp(){}e=Rp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ml(){}Ml.prototype.g=function(o,c){return new Be(o,c)};function Be(o,c){Wt.call(this),this.g=new gp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new ns(this)}D(Be,Wt),Be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){Ah(this.g)},Be.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ch(o),o=f);c.i.push(new dS(c.Ya++,o)),c.G==3&&Ol(c)},Be.prototype.N=function(){this.g.l=null,delete this.j,Ah(this.g),delete this.g,Be.aa.N.call(this)};function Ip(o){fh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(Ip,fh);function Cp(){dh.call(this),this.status=1}D(Cp,dh);function ns(o){this.g=o}D(ns,Rp),ns.prototype.ua=function(){ce(this.g,"a")},ns.prototype.ta=function(o){ce(this.g,new Ip(o))},ns.prototype.sa=function(o){ce(this.g,new Cp)},ns.prototype.ra=function(){ce(this.g,"b")},Ml.prototype.createWebChannel=Ml.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,G0=function(){return new Ml},F0=function(){return Tl()},H0=vr,vd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,pu=Al,Fg.COMPLETE="complete",q0=Fg,jg.EventType=ba,ba.OPEN="a",ba.CLOSE="b",ba.ERROR="c",ba.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,Ya=jg,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,B0=jt}).apply(typeof Zl<"u"?Zl:typeof self<"u"?self:typeof window<"u"?window:{});const f_="@firebase/firestore",d_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ae.UNAUTHENTICATED=new Ae(null),Ae.GOOGLE_CREDENTIALS=new Ae("google-credentials-uid"),Ae.FIRST_PARTY=new Ae("first-party-uid"),Ae.MOCK_USER=new Ae("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new jm("@firebase/firestore");function cs(){return qr.logLevel}function H(e,...t){if(qr.logLevel<=ot.DEBUG){const n=t.map(qm);qr.debug(`Firestore (${ma}): ${e}`,...n)}}function ci(e,...t){if(qr.logLevel<=ot.ERROR){const n=t.map(qm);qr.error(`Firestore (${ma}): ${e}`,...n)}}function Js(e,...t){if(qr.logLevel<=ot.WARN){const n=t.map(qm);qr.warn(`Firestore (${ma}): ${e}`,...n)}}function qm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,Q0(e,i,n)}function Q0(e,t,n){let i=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ci(i),new Error(i)}function ft(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||Q0(t,r,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends pi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ae.UNAUTHENTICATED))}shutdown(){}}class dI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mI{constructor(t){this.t=t,this.currentUser=Ae.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ft(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ri,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ri)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new Y0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string",2055,{h:t}),new Ae(t)}}class gI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ae.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new gI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ae.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ft(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new m_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=_I(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function Ed(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return df(r)===df(s)?lt(r,s):df(r)?1:-1}return lt(e.length,t.length)}const vI=55296,EI=57343;function df(e){const t=e.charCodeAt(0);return t>=vI&&t<=EI}function ta(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__name__";class wn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return wn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=wn.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return lt(t.length,n.length)}static compareSegments(t,n){const i=wn.isNumericId(t),r=wn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?wn.extractNumericId(t).compare(wn.extractNumericId(n)):Ed(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ji.fromString(t.substring(4,t.length-2))}}class bt extends wn{construct(t,n,i){return new bt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new bt(n)}static emptyPath(){return new bt([])}}const TI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ge extends wn{construct(t,n,i){return new ge(t,n,i)}static isValidIdentifier(t){return TI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ge.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===g_}static keyField(){return new ge([g_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ge(n)}static emptyPath(){return new ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(bt.fromString(t))}static fromName(t){return new G(bt.fromString(t).popFirst(5))}static empty(){return new G(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return bt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new bt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(e,t,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function AI(e,t,n,i){if(t===!0&&i===!0)throw new B(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function p_(e){if(!G.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function y_(e){if(G.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function X0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function qc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function Je(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qc(e);throw new B(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function ul(e,t){if(!X0(e))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=-62135596800,v_=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(t){return Nt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*v_);return new Nt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<__)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ul(t,Nt._jsonSchema))return new Nt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-__;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Kt("string",Nt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new Nt(0,0))}static max(){return new $(new Nt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=-1;function bI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=$.fromTimestamp(i===1e9?new Nt(n+1,0):new Nt(n,i));return new ar(r,G.empty(),t)}function SI(e){return new ar(e.readTime,e.key,ko)}class ar{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ar($.min(),G.empty(),ko)}static max(){return new ar($.max(),G.empty(),ko)}}function wI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class II{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==RI)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(r=>r?P.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new P((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new P((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function CI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Hc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function cl(e){return e==null}function sc(e){return e===0&&1/e==-1/0}function NI(e){return typeof e=="number"&&Number.isInteger(e)&&!sc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="";function DI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=E_(t)),t=xI(e.get(n),t);return E_(t)}function xI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case $0:n+="";break;default:n+=s}}return n}function E_(e){return e+$0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Z0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t,n){this.comparator=t,this.root=n||de.EMPTY}insert(t,n){return new Lt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,de.BLACK,null,null))}remove(t){return new Lt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,de.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wl(this.root,t,this.comparator,!0)}}class Wl{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class de{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??de.RED,this.left=r??de.EMPTY,this.right=s??de.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new de(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return de.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return de.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}de.EMPTY=null,de.RED=!0,de.BLACK=!1;de.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new de(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.comparator=t,this.data=new Lt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(t){return new A_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ee)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ee(this.comparator);return n.data=t,n}}class A_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.fields=t,t.sort(ge.comparator)}static empty(){return new Ke([])}unionWith(t){let n=new ee(ge.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ke(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ta(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new W0("Invalid base64 string: "+s):s}}(t);return new _e(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new _e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const OI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(e){if(ft(!!e,39018),typeof e=="string"){let t=0;const n=OI.exec(e);if(ft(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ft(e.seconds),nanos:Ft(e.nanos)}}function Ft(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function lr(e){return typeof e=="string"?_e.fromBase64String(e):_e.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="server_timestamp",tA="__type__",eA="__previous_value__",nA="__local_write_time__";function Gm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[tA])==null?void 0:i.stringValue)===J0}function Fc(e){const t=e.mapValue.fields[eA];return Gm(t)?Fc(t):t}function Po(e){const t=or(e.mapValue.fields[nA].timestampValue);return new Nt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const ac="(default)";class Uo{constructor(t,n){this.projectId=t,this.database=n||ac}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===ac}isEqual(t){return t instanceof Uo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__type__",MI="__max__",Jl={mapValue:{}},rA="__vector__",oc="value";function ur(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gm(e)?4:PI(e)?9007199254740991:kI(e)?10:11:Y(28295,{value:e})}function Pn(e,t){if(e===t)return!0;const n=ur(e);if(n!==ur(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Po(e).isEqual(Po(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=or(r.timestampValue),l=or(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return lr(r.bytesValue).isEqual(lr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Ft(r.geoPointValue.latitude)===Ft(s.geoPointValue.latitude)&&Ft(r.geoPointValue.longitude)===Ft(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ft(r.integerValue)===Ft(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Ft(r.doubleValue),l=Ft(s.doubleValue);return a===l?sc(a)===sc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ta(e.arrayValue.values||[],t.arrayValue.values||[],Pn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(T_(a)!==T_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Pn(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function Lo(e,t){return(e.values||[]).find(n=>Pn(n,t))!==void 0}function ea(e,t){if(e===t)return 0;const n=ur(e),i=ur(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Ft(s.integerValue||s.doubleValue),u=Ft(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return b_(e.timestampValue,t.timestampValue);case 4:return b_(Po(e),Po(t));case 5:return Ed(e.stringValue,t.stringValue);case 6:return function(s,a){const l=lr(s),u=lr(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=lt(Ft(s.latitude),Ft(a.latitude));return l!==0?l:lt(Ft(s.longitude),Ft(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return S_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,D,V;const l=s.fields||{},u=a.fields||{},h=(m=l[oc])==null?void 0:m.arrayValue,d=(_=u[oc])==null?void 0:_.arrayValue,g=lt(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:S_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Jl.mapValue&&a===Jl.mapValue)return 0;if(s===Jl.mapValue)return 1;if(a===Jl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Ed(u[g],d[g]);if(m!==0)return m;const _=ea(l[u[g]],h[d[g]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function b_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=or(e),i=or(t),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function S_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ea(n[r],i[r]);if(s)return s}return lt(n.length,i.length)}function na(e){return Td(e)}function Td(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=or(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return lr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Td(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Td(n.fields[a])}`;return r+"}"}(e.mapValue):Y(61005,{value:e})}function yu(e){switch(ur(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fc(e);return t?16+yu(t):16;case 5:return 2*e.stringValue.length;case 6:return lr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+yu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return gr(i.fields,(s,a)=>{r+=s.length+yu(a)}),r}(e.mapValue);default:throw Y(13486,{value:e})}}function w_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ad(e){return!!e&&"integerValue"in e}function Qm(e){return!!e&&"arrayValue"in e}function R_(e){return!!e&&"nullValue"in e}function I_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _u(e){return!!e&&"mapValue"in e}function kI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[iA])==null?void 0:i.stringValue)===rA}function mo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return gr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=mo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mo(e.arrayValue.values[n]);return t}return{...e}}function PI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===MI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.value=t}static empty(){return new De({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!_u(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=mo(n)}setAll(t){let n=ge.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=mo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());_u(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Pn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];_u(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){gr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new De(mo(this.value))}}function sA(e){const t=[];return gr(e.fields,(n,i)=>{const r=new ge([n]);if(_u(i)){const s=sA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Ke(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,$.min(),$.min(),$.min(),De.empty(),0)}static newFoundDocument(t,n,i,r){return new ae(t,1,n,$.min(),i,r,0)}static newNoDocument(t,n){return new ae(t,2,n,$.min(),$.min(),De.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,$.min(),$.min(),De.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=De.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=De.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n){this.position=t,this.inclusive=n}}function C_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=ea(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function N_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,n="asc"){this.field=t,this.dir=n}}function UI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class Yt extends aA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new jI(t,n,i):n==="array-contains"?new qI(t,i):n==="in"?new HI(t,i):n==="not-in"?new FI(t,i):n==="array-contains-any"?new GI(t,i):new Yt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new zI(t,i):new BI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ea(n,this.value)):n!==null&&ur(this.value)===ur(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends aA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Tn(t,n)}matches(t){return oA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oA(e){return e.op==="and"}function lA(e){return LI(e)&&oA(e)}function LI(e){for(const t of e.filters)if(t instanceof Tn)return!1;return!0}function bd(e){if(e instanceof Yt)return e.field.canonicalString()+e.op.toString()+na(e.value);if(lA(e))return e.filters.map(t=>bd(t)).join(",");{const t=e.filters.map(n=>bd(n)).join(",");return`${e.op}(${t})`}}function uA(e,t){return e instanceof Yt?function(i,r){return r instanceof Yt&&i.op===r.op&&i.field.isEqual(r.field)&&Pn(i.value,r.value)}(e,t):e instanceof Tn?function(i,r){return r instanceof Tn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&uA(a,r.filters[l]),!0):!1}(e,t):void Y(19439)}function cA(e){return e instanceof Yt?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(e):e instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(cA).join(" ,")+"}"}(e):"Filter"}class jI extends Yt{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class zI extends Yt{constructor(t,n){super(t,"in",n),this.keys=hA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class BI extends Yt{constructor(t,n){super(t,"not-in",n),this.keys=hA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function hA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class qI extends Yt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Qm(n)&&Lo(n.arrayValue,this.value)}}class HI extends Yt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class FI extends Yt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lo(this.value.arrayValue,n)}}class GI extends Yt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Lo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function D_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new QI(e,t,n,i,r,s,a)}function Ym(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>bd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>na(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>na(i)).join(",")),t.Te=n}return t.Te}function Km(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!UI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!uA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!N_(e.startAt,t.startAt)&&N_(e.endAt,t.endAt)}function Sd(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YI(e,t,n,i,r,s,a,l){return new ya(e,t,n,i,r,s,a,l)}function Gc(e){return new ya(e)}function x_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function fA(e){return e.collectionGroup!==null}function go(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ee(ge.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new jo(s,i))}),n.has(ge.keyField().canonicalString())||t.Ie.push(new jo(ge.keyField(),i))}return t.Ie}function xn(e){const t=J(e);return t.Ee||(t.Ee=KI(t,go(e))),t.Ee}function KI(e,t){if(e.limitType==="F")return D_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new jo(r.field,s)});const n=e.endAt?new lc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lc(e.startAt.position,e.startAt.inclusive):null;return D_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function wd(e,t){const n=e.filters.concat([t]);return new ya(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Rd(e,t,n){return new ya(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qc(e,t){return Km(xn(e),xn(t))&&e.limitType===t.limitType}function dA(e){return`${Ym(xn(e))}|lt:${e.limitType}`}function hs(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>cA(r)).join(", ")}]`),cl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>na(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>na(r)).join(",")),`Target(${i})`}(xn(e))}; limitType=${e.limitType})`}function Yc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of go(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=C_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,go(i),r)||i.endAt&&!function(a,l,u){const h=C_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,go(i),r))}(e,t)}function XI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mA(e){return(t,n)=>{let i=!1;for(const r of go(e)){const s=$I(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function $I(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ea(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){gr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Z0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new Lt(G.comparator);function hi(){return ZI}const gA=new Lt(G.comparator);function Ka(...e){let t=gA;for(const n of e)t=t.insert(n.key,n);return t}function pA(e){let t=gA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Cr(){return po()}function yA(){return po()}function po(){return new $r(e=>e.toString(),(e,t)=>e.isEqual(t))}const WI=new Lt(G.comparator),JI=new ee(G.comparator);function ut(...e){let t=JI;for(const n of e)t=t.add(n);return t}const tC=new ee(lt);function eC(){return tC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sc(t)?"-0":t}}function _A(e){return{integerValue:""+e}}function nC(e,t){return NI(t)?_A(t):Xm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function iC(e,t,n){return e instanceof zo?function(r,s){const a={fields:{[tA]:{stringValue:J0},[nA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Gm(s)&&(s=Fc(s)),s&&(a.fields[eA]=s),{mapValue:a}}(n,t):e instanceof Bo?EA(e,t):e instanceof qo?TA(e,t):function(r,s){const a=vA(r,s),l=O_(a)+O_(r.Ae);return Ad(a)&&Ad(r.Ae)?_A(l):Xm(r.serializer,l)}(e,t)}function rC(e,t,n){return e instanceof Bo?EA(e,t):e instanceof qo?TA(e,t):n}function vA(e,t){return e instanceof uc?function(i){return Ad(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class zo extends Kc{}class Bo extends Kc{constructor(t){super(),this.elements=t}}function EA(e,t){const n=AA(t);for(const i of e.elements)n.some(r=>Pn(r,i))||n.push(i);return{arrayValue:{values:n}}}class qo extends Kc{constructor(t){super(),this.elements=t}}function TA(e,t){let n=AA(t);for(const i of e.elements)n=n.filter(r=>!Pn(r,i));return{arrayValue:{values:n}}}class uc extends Kc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function O_(e){return Ft(e.integerValue||e.doubleValue)}function AA(e){return Qm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t,n){this.field=t,this.transform=n}}function aC(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Bo&&r instanceof Bo||i instanceof qo&&r instanceof qo?ta(i.elements,r.elements,Pn):i instanceof uc&&r instanceof uc?Pn(i.Ae,r.Ae):i instanceof zo&&r instanceof zo}(e.transform,t.transform)}class oC{constructor(t,n){this.version=t,this.transformResults=n}}class pe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new pe}static exists(t){return new pe(void 0,t)}static updateTime(t){return new pe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xc{}function bA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new $c(e.key,pe.none()):new hl(e.key,e.data,pe.none());{const n=e.data,i=De.empty();let r=new ee(ge.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new pr(e.key,i,new Ke(r.toArray()),pe.none())}}function lC(e,t,n){e instanceof hl?function(r,s,a){const l=r.value.clone(),u=M_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof pr?function(r,s,a){if(!vu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=M_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(SA(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function yo(e,t,n,i){return e instanceof hl?function(s,a,l,u){if(!vu(s.precondition,a))return l;const h=s.value.clone(),d=k_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof pr?function(s,a,l,u){if(!vu(s.precondition,a))return l;const h=k_(s.fieldTransforms,u,a),d=a.data;return d.setAll(SA(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return vu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function uC(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=vA(i.transform,r||null);s!=null&&(n===null&&(n=De.empty()),n.set(i.field,s))}return n||null}function V_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ta(i,r,(s,a)=>aC(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hl extends Xc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pr extends Xc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function M_(e,t,n){const i=new Map;ft(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,rC(a,l,n[r]))}return i}function k_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,iC(s,a,t))}return i}class $c extends Xc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Xc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&lC(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=yA();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=bA(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&ta(this.mutations,t.mutations,(n,i)=>V_(n,i))&&ta(this.baseMutations,t.baseMutations,(n,i)=>V_(n,i))}}class $m{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ft(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return WI}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new $m(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,ct;function RA(e){switch(e){case k.OK:return Y(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function IA(e){if(e===void 0)return ci("GRPC error has no .code"),k.UNKNOWN;switch(e){case Gt.OK:return k.OK;case Gt.CANCELLED:return k.CANCELLED;case Gt.UNKNOWN:return k.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return k.INTERNAL;case Gt.UNAVAILABLE:return k.UNAVAILABLE;case Gt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Gt.NOT_FOUND:return k.NOT_FOUND;case Gt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Gt.ABORTED:return k.ABORTED;case Gt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Gt.DATA_LOSS:return k.DATA_LOSS;default:return Y(39323,{code:e})}}(ct=Gt||(Gt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Ji([4294967295,4294967295],0);function P_(e){const t=dC().encode(e),n=new z0;return n.update(t),new Uint8Array(n.digest())}function U_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ji([n,i],0),new Ji([r,s],0)]}class Zm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(i<0)throw new Xa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ji.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Ji.fromNumber(i)));return r.compare(mC)===1&&(r=new Ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=P_(t),[i,r]=U_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Zm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=P_(t),[i,r]=U_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,fl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Zc($.min(),r,new Lt(lt),hi(),ut())}}class fl{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new fl(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class CA{constructor(t,n){this.targetId=t,this.Ce=n}}class NA{constructor(t,n,i=_e.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class L_{constructor(){this.ve=0,this.Fe=j_(),this.Me=_e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y(38017,{changeType:s})}}),new fl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=j_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gC{constructor(t){this.Ge=t,this.ze=new Map,this.je=hi(),this.Je=tu(),this.He=tu(),this.Ye=new Lt(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Sd(s))if(i===0){const a=new G(s.path);this.et(n,a,ae.newNoDocument(a,$.min()))}else ft(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=lr(i).toUint8Array()}catch(u){if(u instanceof W0)return Js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zm(a,r,s)}catch(u){return Js(u instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Sd(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ae.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ut();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Zc(t,n,this.Ye,this.je,i);return this.je=hi(),this.Je=tu(),this.He=tu(),this.Ye=new Lt(lt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new L_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ee(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ee(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new L_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function tu(){return new Lt(G.comparator)}function j_(){return new Lt(G.comparator)}const pC={asc:"ASCENDING",desc:"DESCENDING"},yC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_C={and:"AND",or:"OR"};class vC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Id(e,t){return e.useProto3Json||cl(t)?t:{value:t}}function cc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function EC(e,t){return cc(e,t.toTimestamp())}function tn(e){return ft(!!e,49232),$.fromTimestamp(function(n){const i=or(n);return new Nt(i.seconds,i.nanos)}(e))}function Wm(e,t){return Cd(e,t).canonicalString()}function Cd(e,t){const n=function(r){return new bt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function xA(e){const t=bt.fromString(e);return ft(UA(t),10190,{key:t.toString()}),t}function hc(e,t){return Wm(e.databaseId,t.path)}function _o(e,t){const n=xA(t);if(n.get(1)!==e.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(VA(n))}function OA(e,t){return Wm(e.databaseId,t)}function TC(e){const t=xA(e);return t.length===4?bt.emptyPath():VA(t)}function Nd(e){return new bt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function VA(e){return ft(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function z_(e,t,n){return{name:hc(e,t),fields:n.value.mapValue.fields}}function AC(e,t){return"found"in t?function(i,r){ft(!!r.found,43571),r.found.name,r.found.updateTime;const s=_o(i,r.found.name),a=tn(r.found.updateTime),l=r.found.createTime?tn(r.found.createTime):$.min(),u=new De({mapValue:{fields:r.found.fields}});return ae.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){ft(!!r.missing,3894),ft(!!r.readTime,22933);const s=_o(i,r.missing),a=tn(r.readTime);return ae.newNoDocument(s,a)}(e,t):Y(7234,{result:t})}function bC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ft(d===void 0||typeof d=="string",58123),_e.fromBase64String(d||"")):(ft(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),_e.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:IA(h.code);return new B(d,h.message||"")}(a);n=new NA(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=_o(e,i.document.name),s=tn(i.document.updateTime),a=i.document.createTime?tn(i.document.createTime):$.min(),l=new De({mapValue:{fields:i.document.fields}}),u=ae.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Eu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=_o(e,i.document),s=i.readTime?tn(i.readTime):$.min(),a=ae.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Eu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=_o(e,i.document),s=i.removedTargetIds||[];n=new Eu([],s,r,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new fC(r,s),l=i.targetId;n=new CA(l,a)}}return n}function MA(e,t){let n;if(t instanceof hl)n={update:z_(e,t.key,t.value)};else if(t instanceof $c)n={delete:hc(e,t.key)};else if(t instanceof pr)n={update:z_(e,t.key,t.data),updateMask:OC(t.fieldMask)};else{if(!(t instanceof wA))return Y(16599,{Vt:t.type});n={verify:hc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof zo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:EC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y(27497)}(e,t.precondition)),n}function SC(e,t){return e&&e.length>0?(ft(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?tn(r.updateTime):tn(s);return a.isEqual($.min())&&(a=tn(s)),new oC(a,r.transformResults||[])}(n,t))):[]}function wC(e,t){return{documents:[OA(e,t.path)]}}function RC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=OA(e,r);const s=function(h){if(h.length!==0)return PA(Tn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:fs(m.field),direction:NC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Id(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function IC(e){let t=TC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ft(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=kA(g);return m instanceof Tn&&lA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(D){return new jo(ds(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,cl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new lc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new lc(_,m)}(n.endAt)),YI(t,r,a,s,l,"F",u,h)}function CC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function kA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ds(n.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ds(n.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ds(n.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ds(n.unaryFilter.field);return Yt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Yt.create(ds(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(i=>kA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function NC(e){return pC[e]}function DC(e){return yC[e]}function xC(e){return _C[e]}function fs(e){return{fieldPath:e.canonicalString()}}function ds(e){return ge.fromServerFormat(e.fieldPath)}function PA(e){return e instanceof Yt?function(n){if(n.op==="=="){if(I_(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NAN"}};if(R_(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I_(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NAN"}};if(R_(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(n.field),op:DC(n.op),value:n.value}}}(e):e instanceof Tn?function(n){const i=n.getFilters().map(r=>PA(r));return i.length===1?i[0]:{compositeFilter:{op:xC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function OC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function UA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n,i,r,s=$.min(),a=$.min(),l=_e.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Bi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t){this.yt=t}}function MC(e){const t=IC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Rd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.Cn=new PC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ar.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ar.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class PC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ee(bt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ee(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LA=41943040;class Pe{static withCacheSize(t){return new Pe(t,Pe.DEFAULT_COLLECTION_PERCENTILE,Pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pe.DEFAULT_COLLECTION_PERCENTILE=10,Pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pe.DEFAULT=new Pe(LA,Pe.DEFAULT_COLLECTION_PERCENTILE,Pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pe.DISABLED=new Pe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ia(0)}static cr(){return new ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="LruGarbageCollector",UC=1048576;function H_([e,t],[n,i]){const r=lt(e,n);return r===0?lt(t,i):r}class LC{constructor(t){this.Ir=t,this.buffer=new ee(H_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();H_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(q_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pa(n)?H(q_,"Ignoring IndexedDB error during garbage collection: ",n):await ga(n)}await this.Vr(3e5)})}}class zC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Hc.ce);const i=new LC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(B_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),cs()<=ot.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function BC(e,t){return new zC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.changes=new $r(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&yo(i.mutation,r,Ke.empty(),Nt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const r=Cr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ka();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Cr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=hi();const a=po(),l=function(){return po()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof pr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),yo(d.mutation,h,d.mutation.getFieldMask(),Nt.now())):a.set(h.key,Ke.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new HC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=po();let r=new Lt((a,l)=>a-l),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Ke.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ut()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=yA();d.forEach(m=>{if(!s.has(m)){const _=bA(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):fA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):P.resolve(Cr());let l=ko,u=s;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:pA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let r=Ka();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ka();return this.indexManager.getCollectionParents(t,s).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ya(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ae.newInvalidDocument(d)))});let l=Ka();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&yo(d.mutation,h,Ke.empty(),Nt.now()),Yc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:tn(r.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:MC(r.bundledQuery),readTime:tn(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.overlays=new Lt(G.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Cr();return P.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const r=Cr(),s=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Lt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Cr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Cr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return P.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new hC(n,i));let s=this.qr.get(n);s===void 0&&(s=ut(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=_e.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Qr=new ee(ie.$r),this.Ur=new ee(ie.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ie(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ie(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new bt([])),i=new ie(n,t),r=new ie(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new bt([])),i=new ie(n,t),r=new ie(n,t+1);let s=ut();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new ie(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ie{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ee(ie.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new cC(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new ie(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Fm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ie(n,0),r=new ie(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ee(lt);return n.forEach(r=>{const s=new ie(r,0),a=new ie(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const a=new ie(new G(s),0);let l=new ee(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,r=>{const s=new ie(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ie(n,0),r=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t){this.ri=t,this.docs=function(){return new Lt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let i=hi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ae.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=hi();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||wI(SI(d),i)<=0||(r.has(d.key)||Yc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new $C(this)}getSize(t){return P.resolve(this.size)}}class $C extends qC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t){this.persistence=t,this.si=new $r(n=>Ym(n),Km),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new Jm,this.targetCount=0,this.ai=ia.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ia(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Hc(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=t(this),this.Pi=new ZC(this),this.indexManager=new kC,this.remoteDocumentCache=function(r){return new XC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new VC(n),this.Ii=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new KC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const r=new WC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class WC extends II{constructor(t){super(),this.currentSequenceNumber=t}}class tg{constructor(t){this.persistence=t,this.Ri=new Jm,this.Vi=null}static mi(t){return new tg(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const r=G.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class fc{constructor(t,n){this.persistence=t,this.pi=new $r(i=>DI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=BC(this,n)}static mi(t,n){return new fc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?P.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,$.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=yu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return P.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ut(),r=ut();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new eg(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return QR()?8:CI(we())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new JC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(cs()<=ot.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(cs()<=ot.DEBUG&&H("QueryEngine","Query:",hs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(cs()<=ot.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xn(n))):P.resolve())}ys(t,n){if(x_(n))return P.resolve(null);let i=xn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Rd(n,null,"F"),i=xn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ut(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Rd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return x_(n)||r.isEqual($.min())?P.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?P.resolve(null):(cs()<=ot.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hs(n)),this.vs(t,a,n,bI(r,ko)).next(l=>l))})}Ds(t,n){let i=new ee(mA(t));return n.forEach((r,s)=>{Yc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return cs()<=ot.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",hs(n)),this.ps.getDocumentsMatchingQuery(t,n,ar.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="LocalStore",eN=3e8;class nN{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Lt(lt),this.xs=new $r(s=>Ym(s),Km),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new FC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function iN(e,t,n,i){return new nN(e,t,n,i)}async function zA(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ut();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function rN(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(D=>{_=_.next(()=>d.getEntry(u,D)).next(V=>{const M=h.docVersions.get(D);ft(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function BA(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function sN(e,t){const n=J(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(_e.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(V,M,w){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=eN?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=hi(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(aN(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function aN(e,t,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=hi();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(ng,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function oN(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Fm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function lN(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Bi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Dd(e,t,n){const i=J(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!pa(a))throw a;H(ng,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function F_(e,t,n){const i=J(e);let r=$.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,xn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:$.min(),n?s:ut())).next(l=>(uN(i,XI(t),l),{documents:l,Qs:s})))}function uN(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class G_{constructor(){this.activeTargetIds=eC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cN{constructor(){this.Mo=new G_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new G_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="ConnectivityMonitor";class Y_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Q_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(Q_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function xd(){return eu===null?eu=function(){return 268435456+Math.round(2147483648*Math.random())}():eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="RestConnection",fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===ac?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=xd(),l=this.zo(t,n.toUriEncodedString());H(mf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=fa(h);return this.Jo(t,l,u,i,d).then(g=>(H(mf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Js(mf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=fN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te="WebChannelConnection";class gN extends dN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=xd();return new Promise((l,u)=>{const h=new B0;h.setWithCredentials(!0),h.listenOnce(q0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case pu.NO_ERROR:const g=h.getResponseJson();H(Te,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case pu.TIMEOUT:H(Te,`RPC '${t}' ${a} timed out`),u(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case pu.HTTP_ERROR:const m=h.getStatus();if(H(Te,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const D=_==null?void 0:_.error;if(D&&D.status&&D.message){const V=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(D.status);u(new B(V,D.message))}else u(new B(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(k.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Te,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);H(Te,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=xd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=G0(),l=F0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(Te,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const D=new mN({Yo:M=>{_?H(Te,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(m||(H(Te,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),H(Te,`RPC '${t}' stream ${r} sending:`,M),g.send(M))},Zo:()=>g.close()}),V=(M,w,v)=>{M.listen(w,R=>{try{v(R)}catch(x){setTimeout(()=>{throw x},0)}})};return V(g,Ya.EventType.OPEN,()=>{_||(H(Te,`RPC '${t}' stream ${r} transport opened.`),D.o_())}),V(g,Ya.EventType.CLOSE,()=>{_||(_=!0,H(Te,`RPC '${t}' stream ${r} transport closed`),D.a_(),this.E_(g))}),V(g,Ya.EventType.ERROR,M=>{_||(_=!0,Js(Te,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new B(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,Ya.EventType.MESSAGE,M=>{var w;if(!_){const v=M.data[0];ft(!!v,16349);const R=v,x=(R==null?void 0:R.error)||((w=R[0])==null?void 0:w.error);if(x){H(Te,`RPC '${t}' stream ${r} received error:`,x);const L=x.status;let q=function(T){const S=Gt[T];if(S!==void 0)return IA(S)}(L),E=x.message;q===void 0&&(q=k.INTERNAL,E="Unknown error status: "+L+" with message "+x.message),_=!0,D.a_(new B(q,E)),g.close()}else H(Te,`RPC '${t}' stream ${r} received:`,v),D.u_(v)}}),V(l,H0.STAT_EVENT,M=>{M.stat===vd.PROXY?H(Te,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===vd.NOPROXY&&H(Te,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(e){return new vC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class qA{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ig(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new B(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(K_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pN extends qA{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=bC(this.serializer,t),i=function(s){if(!("targetChange"in s))return $.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?tn(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Nd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Sd(u)?{documents:wC(s,u)}:{query:RC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=DA(s,a.resumeToken);const h=Id(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=cc(s,a.snapshotVersion.toTimestamp());const h=Id(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=CC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Nd(this.serializer),n.removeTarget=t,this.q_(n)}}class yN extends qA{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=SC(t.writeResults,t.commitTime),i=tn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Nd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>MA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{}class vN extends _N{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Cd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Cd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class EN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ci(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="RemoteStore";class TN{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Zr(this)&&(H(Hr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await dl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Jc(h)}(this))})}),this.Ra=new EN(i,r)}}async function Jc(e){if(Zr(e))for(const t of e.da)await t(!0)}async function dl(e){for(const t of e.da)await t(!1)}function HA(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),og(n)?ag(n):_a(n).O_()&&sg(n,t))}function rg(e,t){const n=J(e),i=_a(n);n.Ia.delete(t),i.O_()&&FA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Zr(n)&&n.Ra.set("Unknown"))}function sg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_a(e).Y_(t)}function FA(e,t){e.Va.Ue(t),_a(e).Z_(t)}function ag(e){e.Va=new gC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),_a(e).start(),e.Ra.ua()}function og(e){return Zr(e)&&!_a(e).x_()&&e.Ia.size>0}function Zr(e){return J(e).Ea.size===0}function GA(e){e.Va=void 0}async function AN(e){e.Ra.set("Online")}async function bN(e){e.Ia.forEach((t,n)=>{sg(e,t)})}async function SN(e,t){GA(e),og(e)?(e.Ra.ha(t),ag(e)):e.Ra.set("Unknown")}async function wN(e,t,n){if(e.Ra.set("Online"),t instanceof NA&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){H(Hr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await dc(e,i)}else if(t instanceof Eu?e.Va.Ze(t):t instanceof CA?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await BA(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(_e.EMPTY_BYTE_STRING,d.snapshotVersion)),FA(s,u);const g=new Bi(d.target,u,h,d.sequenceNumber);sg(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Hr,"Failed to raise snapshot:",i),await dc(e,i)}}async function dc(e,t,n){if(!pa(t))throw t;e.Ea.add(1),await dl(e),e.Ra.set("Offline"),n||(n=()=>BA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Hr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Jc(e)})}function QA(e,t){return t().catch(n=>dc(e,n,t))}async function th(e){const t=J(e),n=cr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Fm;for(;RN(t);)try{const r=await oN(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,IN(t,r)}catch(r){await dc(t,r)}YA(t)&&KA(t)}function RN(e){return Zr(e)&&e.Ta.length<10}function IN(e,t){e.Ta.push(t);const n=cr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function YA(e){return Zr(e)&&!cr(e).x_()&&e.Ta.length>0}function KA(e){cr(e).start()}async function CN(e){cr(e).ra()}async function NN(e){const t=cr(e);for(const n of e.Ta)t.ea(n.mutations)}async function DN(e,t,n){const i=e.Ta.shift(),r=$m.from(i,t,n);await QA(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await th(e)}async function xN(e,t){t&&cr(e).X_&&await async function(i,r){if(function(a){return RA(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();cr(i).B_(),await QA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await th(i)}}(e,t),YA(e)&&KA(e)}async function X_(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),H(Hr,"RemoteStore received new credentials");const i=Zr(n);n.Ea.add(3),await dl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Jc(n)}async function ON(e,t){const n=J(e);t?(n.Ea.delete(2),await Jc(n)):t||(n.Ea.add(2),await dl(n),n.Ra.set("Unknown"))}function _a(e){return e.ma||(e.ma=function(n,i,r){const s=J(n);return s.sa(),new pN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:AN.bind(null,e),t_:bN.bind(null,e),r_:SN.bind(null,e),H_:wN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),og(e)?ag(e):e.Ra.set("Unknown")):(await e.ma.stop(),GA(e))})),e.ma}function cr(e){return e.fa||(e.fa=function(n,i,r){const s=J(n);return s.sa(),new yN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:CN.bind(null,e),r_:xN.bind(null,e),ta:NN.bind(null,e),na:DN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await th(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Hr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new lg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(e,t){if(ci("AsyncQueue",`${t}: ${e}`),pa(e))return new B(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{static emptySet(t){return new Ps(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Lt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ps)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ps;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.ga=new Lt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ra{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ra(t,n,Ps.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class MN{constructor(){this.queries=Z_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=Z_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new B(k.ABORTED,"Firestore shutting down"))}}function Z_(){return new $r(e=>dA(e),Qc)}async function XA(e,t){const n=J(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new VN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=ug(a,`Initialization of query '${hs(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&cg(n)}async function $A(e,t){const n=J(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function kN(e,t){const n=J(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&cg(n)}function PN(e,t,n){const i=J(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function cg(e){e.Ca.forEach(t=>{t.next()})}var Od,W_;(W_=Od||(Od={})).Ma="default",W_.Cache="cache";class ZA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ra(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ra.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t){this.key=t}}class JA{constructor(t){this.key=t}}class UN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=mA(t),this.tu=new Ps(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new $_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=Yc(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?D!==V&&(i.track({type:3,doc:_}),M=!0):this.su(m,_)||(i.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(_?(a=a.add(_),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:M})}};return V(_)-V(D)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ra(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new JA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new WA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hg="SyncEngine";class LN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class jN{constructor(t){this.key=t,this.hu=!1}}class zN{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new $r(l=>dA(l),Qc),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(G.comparator),this.Au=new Map,this.Ru=new Jm,this.Vu={},this.mu=new Map,this.fu=ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BN(e,t,n=!0){const i=sb(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await tb(i,t,n,!0),r}async function qN(e,t){const n=sb(e);await tb(n,t,!0,!1)}async function tb(e,t,n,i){const r=await lN(e.localStore,xn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await HN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&HA(e.remoteStore,r),l}async function HN(e,t,n,i,r){e.pu=(g,m,_)=>async function(V,M,w,v){let R=M.view.ru(w);R.Cs&&(R=await F_(V.localStore,M.query,!1).then(({documents:E})=>M.view.ru(E,R)));const x=v&&v.targetChanges.get(M.targetId),L=v&&v.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(R,V.isPrimaryClient,x,L);return tv(V,M.targetId,q.au),q.snapshot}(e,g,m,_);const s=await F_(e.localStore,t,!0),a=new UN(t,s.Qs),l=a.ru(s.documents),u=fl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);tv(e,n,h.au);const d=new LN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function FN(e,t,n){const i=J(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Qc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Dd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&rg(i.remoteStore,r.targetId),Vd(i,r.targetId)}).catch(ga)):(Vd(i,r.targetId),await Dd(i.localStore,r.targetId,!0))}async function GN(e,t){const n=J(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),rg(n.remoteStore,i.targetId))}async function QN(e,t,n){const i=JN(e);try{const r=await function(a,l){const u=J(a),h=Nt.now(),d=l.reduce((_,D)=>_.add(D.key),ut());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=hi(),V=ut();return u.Ns.getEntries(_,d).next(M=>{D=M,D.forEach((w,v)=>{v.isValidDocument()||(V=V.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,D)).next(M=>{g=M;const w=[];for(const v of l){const R=uC(v,g.get(v.key).overlayedDocument);R!=null&&w.push(new pr(v.key,R,sA(R.value.mapValue),pe.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,w,l)}).next(M=>{m=M;const w=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,M.batchId,w)})}).then(()=>({batchId:m.batchId,changes:pA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Lt(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await ml(i,r.changes),await th(i.remoteStore)}catch(r){const s=ug(r,"Failed to persist write");n.reject(s)}}async function eb(e,t){const n=J(e);try{const i=await sN(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ft(a.hu,14607):r.removedDocuments.size>0&&(ft(a.hu,42227),a.hu=!1))}),await ml(n,i,t)}catch(i){await ga(i)}}function J_(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&cg(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function YN(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Lt(G.comparator);a=a.insert(s,ae.newNoDocument(s,$.min()));const l=ut().add(s),u=new Zc($.min(),new Map,new Lt(lt),a,l);await eb(i,u),i.du=i.du.remove(s),i.Au.delete(t),fg(i)}else await Dd(i.localStore,t,!1).then(()=>Vd(i,t,n)).catch(ga)}async function KN(e,t){const n=J(e),i=t.batch.batchId;try{const r=await rN(n.localStore,t);ib(n,i,null),nb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ml(n,r)}catch(r){await ga(r)}}async function XN(e,t,n){const i=J(e);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ft(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);ib(i,t,n),nb(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ml(i,r)}catch(r){await ga(r)}}function nb(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function ib(e,t,n){const i=J(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Vd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||rb(e,i)})}function rb(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(rg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),fg(e))}function tv(e,t,n){for(const i of n)i instanceof WA?(e.Ru.addReference(i.key,t),$N(e,i)):i instanceof JA?(H(hg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||rb(e,i.key)):Y(19791,{wu:i})}function $N(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(hg,"New document in limbo: "+n),e.Eu.add(i),fg(e))}function fg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(bt.fromString(t)),i=e.fu.next();e.Au.set(i,new jN(n)),e.du=e.du.insert(n,i),HA(e.remoteStore,new Bi(xn(Gc(n.path)),i,"TargetPurposeLimboResolution",Hc.ce))}}async function ml(e,t,n){const i=J(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=eg.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!pa(g))throw g;H(ng,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),D=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function ZN(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){H(hg,"User change. New user:",t.toKey());const i=await zA(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ml(n,i.Ls)}}function WN(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let r=ut();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function sb(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=eb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YN.bind(null,t),t.Pu.H_=kN.bind(null,t.eventManager),t.Pu.yu=PN.bind(null,t.eventManager),t}function JN(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XN.bind(null,t),t}class mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return iN(this.persistence,new tN,t.initialUser,this.serializer)}Cu(t){return new jA(tg.mi,this.serializer)}Du(t){return new cN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mc.provider={build:()=>new mc};class tD extends mc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ft(this.persistence.referenceDelegate instanceof fc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Pe.withCacheSize(this.cacheSizeBytes):Pe.DEFAULT;return new jA(i=>fc.mi(i,n),this.serializer)}}class Md{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>J_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZN.bind(null,this.syncEngine),await ON(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new MN}()}createDatastore(t){const n=Wc(t.databaseInfo.databaseId),i=function(s){return new gN(s)}(t.databaseInfo);return function(s,a,l,u){return new vN(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new TN(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>J_(this.syncEngine,n,0),function(){return Y_.v()?new Y_:new hN}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new zN(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=J(r);H(Hr,"RemoteStore shutting down."),s.Ea.add(5),await dl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Md.provider={build:()=>new Md};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ci("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=J(r),l={documents:s.map(g=>hc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,bt.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=AC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());ft(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new $c(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=G.fromPath(i);this.mutations.push(new wA(r,this.precondition(r)))}),await async function(i,r){const s=J(i),a={writes:r.map(l=>MA(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,bt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=$.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new B(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual($.min())?pe.exists(!1):pe.updateTime(n):pe.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual($.min()))throw new B(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pe.updateTime(n)}return pe.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new ig(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new eD(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!cl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!RA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class iD{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ae.UNAUTHENTICATED,this.clientId=Hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(hr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(hr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=ug(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function pf(e,t){e.asyncQueue.verifyOperationInProgress(),H(hr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await zA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ev(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rD(e);H(hr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>X_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>X_(t.remoteStore,r)),e._onlineComponents=t}async function rD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(hr,"Using user provided OfflineComponentProvider");try{await pf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await pf(e,new mc)}}else H(hr,"Using default OfflineComponentProvider"),await pf(e,new tD(void 0));return e._offlineComponents}async function dg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(hr,"Using user provided OnlineComponentProvider"),await ev(e,e._uninitializedComponentsProvider._online)):(H(hr,"Using default OnlineComponentProvider"),await ev(e,new Md))),e._onlineComponents}function sD(e){return dg(e).then(t=>t.syncEngine)}function aD(e){return dg(e).then(t=>t.datastore)}async function kd(e){const t=await dg(e),n=t.eventManager;return n.onListen=BN.bind(null,t.syncEngine),n.onUnlisten=FN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=qN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=GN.bind(null,t.syncEngine),n}function oD(e,t,n={}){const i=new ri;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new ab({next:m=>{d.Nu(),a.enqueueAndForget(()=>$A(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new ZA(Gc(l.path),d,{includeMetadataChanges:!0,qa:!0});return XA(s,g)}(await kd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="firestore.googleapis.com",iv=!0;class rv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lb,this.ssl=iv}else this.host=t.host,this.ssl=t.ssl??iv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=LA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UC)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}AI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ob(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class eh{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fI;switch(i.type){case"firstParty":return new pI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=nv.get(n);i&&(H("ComponentProvider","Removing Datastore"),nv.delete(n),i.terminate())}(this),Promise.resolve()}}function lD(e,t,n,i={}){var h;e=Je(e,eh);const r=fa(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(O0(`https://${l}`),V0("Firestore",!0)),s.host!==lb&&s.host!==l&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!zr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ae.MOCK_USER;else{d=UR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ae(m)}e._authCredentials=new dI(new Y0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Wr(this.firestore,t,this._query)}}class Ut{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ut(this.firestore,t,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(ul(n,Ut._jsonSchema))return new Ut(t,i||null,new G(bt.fromString(n.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Kt("string",Ut._jsonSchemaVersion),referencePath:Kt("string")};class tr extends Wr{constructor(t,n,i){super(t,n,Gc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ut(this.firestore,null,new G(t))}withConverter(t){return new tr(this.firestore,t,this._path)}}function sv(e,t,...n){if(e=ue(e),K0("collection","path",t),e instanceof eh){const i=bt.fromString(t,...n);return y_(i),new tr(e,null,i)}{if(!(e instanceof Ut||e instanceof tr))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(bt.fromString(t,...n));return y_(i),new tr(e.firestore,null,i)}}function Ge(e,t,...n){if(e=ue(e),arguments.length===1&&(t=Hm.newId()),K0("doc","path",t),e instanceof eh){const i=bt.fromString(t,...n);return p_(i),new Ut(e,null,new G(i))}{if(!(e instanceof Ut||e instanceof tr))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(bt.fromString(t,...n));return p_(i),new Ut(e.firestore,e instanceof tr?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="AsyncQueue";class ov{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ig(this,"async_queue_retry"),this._c=()=>{const i=gf();i&&H(av,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ri;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!pa(t))throw t;H(av,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,ci("INTERNAL UNHANDLED ERROR: ",lv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=lg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Y(47125,{Pc:lv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function lv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class fi extends eh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new ov,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ov(t),this._firestoreClient=void 0,await t}}}function uD(e,t){const n=typeof e=="object"?e:U0(),i=typeof e=="string"?e:ac,r=Bm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=kR("firestore");s&&lD(r,...s)}return r}function nh(e){if(e._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||cD(e),e._firestoreClient}function cD(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new VI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ob(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new iD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ye(_e.fromBase64String(t))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ye(_e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ye._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ul(t,Ye._jsonSchema))return Ye.fromBase64String(t.bytes)}}Ye._jsonSchemaVersion="firestore/bytes/1.0",Ye._jsonSchema={type:Kt("string",Ye._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ge(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:On._jsonSchemaVersion}}static fromJSON(t){if(ul(t,On._jsonSchema))return new On(t.latitude,t.longitude)}}On._jsonSchemaVersion="firestore/geoPoint/1.0",On._jsonSchema={type:Kt("string",On._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ul(t,Vn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Vn(t.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:Kt("string",Vn._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=/^__.*__$/;class fD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new pr(t,this.data,this.fieldMask,n,this.fieldTransforms):new hl(t,this.data,n,this.fieldTransforms)}}class ub{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new pr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function cb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class mg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new mg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return gc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(cb(this.Ac)&&hD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class dD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Wc(t)}Cc(t,n,i,r=!1){return new mg({Ac:t,methodName:n,Dc:i,path:ge.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pl(e){const t=e._freezeSettings(),n=Wc(e._databaseId);return new dD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);yg("Data must be an object, but it was:",a,i);const l=db(i,a);let u,h;if(s.merge)u=new Ke(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=Pd(t,g,n);if(!a.contains(m))throw new B(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gb(d,m)||d.push(m)}u=new Ke(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new fD(new De(l),u,h)}class rh extends ih{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rh}}class pg extends ih{_toFieldTransform(t){return new sC(t.path,new zo)}isEqual(t){return t instanceof pg}}function hb(e,t,n,i){const r=e.Cc(1,t,n);yg("Data must be an object, but it was:",r,i);const s=[],a=De.empty();gr(i,(u,h)=>{const d=_g(t,u,n);h=ue(h);const g=r.yc(d);if(h instanceof rh)s.push(d);else{const m=yl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new Ke(s);return new ub(a,l,r.fieldTransforms)}function fb(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Pd(t,i,n)],u=[r];if(s.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Pd(t,s[m])),u.push(s[m+1]);const h=[],d=De.empty();for(let m=l.length-1;m>=0;--m)if(!gb(h,l[m])){const _=l[m];let D=u[m];D=ue(D);const V=a.yc(_);if(D instanceof rh)h.push(_);else{const M=yl(D,V);M!=null&&(h.push(_),d.set(_,M))}}const g=new Ke(h);return new ub(d,g,a.fieldTransforms)}function mD(e,t,n,i=!1){return yl(n,e.Cc(i?4:3,t))}function yl(e,t){if(mb(e=ue(e)))return yg("Unsupported field value:",t,e),db(e,t);if(e instanceof ih)return function(i,r){if(!cb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=yl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return nC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Nt.fromDate(i);return{timestampValue:cc(r.serializer,s)}}if(i instanceof Nt){const s=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cc(r.serializer,s)}}if(i instanceof On)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ye)return{bytesValue:DA(r.serializer,i._byteString)};if(i instanceof Ut){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Wm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vn)return function(a,l){return{mapValue:{fields:{[iA]:{stringValue:rA},[oc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Xm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${qc(i)}`)}(e,t)}function db(e,t){const n={};return Z0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gr(e,(i,r)=>{const s=yl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function mb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Nt||e instanceof On||e instanceof Ye||e instanceof Ut||e instanceof ih||e instanceof Vn)}function yg(e,t,n){if(!mb(n)||!X0(n)){const i=qc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Pd(e,t,n){if((t=ue(t))instanceof gl)return t._internalPath;if(typeof t=="string")return _g(e,t);throw gc("Field path arguments must be of type string or ",e,!1,void 0,n)}const gD=new RegExp("[~\\*/\\[\\]]");function _g(e,t,n){if(t.search(gD)>=0)throw gc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gl(...t.split("."))._internalPath}catch{throw gc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function gc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new B(k.INVALID_ARGUMENT,l+e+u)}function gb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pD extends pc{data(){return super.data()}}function vg(e,t){return typeof t=="string"?_g(e,t):t instanceof gl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class pb extends Eg{}function _D(e,t,...n){let i=[];t instanceof Eg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Ag).length,l=s.filter(u=>u instanceof Tg).length;if(a>1||a>0&&l>0)throw new B(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class Tg extends pb{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Tg(t,n,i)}_apply(t){const n=this._parse(t);return yb(t._query,n),new Wr(t.firestore,t.converter,wd(t._query,n))}_parse(t){const n=pl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hv(g,d);const D=[];for(const V of g)D.push(cv(u,s,V));m={arrayValue:{values:D}}}else m=cv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hv(g,d),m=mD(l,a,g,d==="in"||d==="not-in");return Yt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Ag extends Eg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ag(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)yb(a,u),a=wd(a,u)}(t._query,n),new Wr(t.firestore,t.converter,wd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends pb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new bg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jo(s,a)}(t._query,this._field,this._direction);return new Wr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new ya(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function vD(e,t="asc"){const n=t,i=vg("orderBy",e);return bg._create(i,n)}function cv(e,t,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new B(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fA(t)&&n.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(bt.fromString(n));if(!G.isDocumentKey(i))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return w_(e,new G(i))}if(n instanceof Ut)return w_(e,n._key);throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qc(n)}.`)}function hv(e,t){if(!Array.isArray(e)||e.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yb(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class _b{convertValue(t,n="none"){switch(ur(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ft(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return gr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[oc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Ft(a.doubleValue));return new Vn(n)}convertGeoPoint(t){return new On(Ft(t.latitude),Ft(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Fc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Po(t));default:return null}}convertTimestamp(t){const n=or(t);return new Nt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=bt.fromString(t);ft(UA(i),9688,{name:t});const r=new Uo(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||ci(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class ED extends _b{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ye(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}class Rs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class er extends pc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(vg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=er._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}er._jsonSchemaVersion="firestore/documentSnapshot/1.0",er._jsonSchema={type:Kt("string",er._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Tu extends er{data(t={}){return super.data(t)}}class Us{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Rs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Tu(this._firestore,this._userDataWriter,i.key,i,new Rs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Tu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Tu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:TD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Us._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function TD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(e){e=Je(e,Ut);const t=Je(e.firestore,fi);return oD(nh(t),e._key).then(n=>Eb(t,e,n))}Us._jsonSchemaVersion="firestore/querySnapshot/1.0",Us._jsonSchema={type:Kt("string",Us._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class wg extends _b{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ye(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Ho(e,t,n){e=Je(e,Ut);const i=Je(e.firestore,fi),r=Sg(e.converter,t,n);return sh(i,[gg(pl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,pe.none())])}function AD(e,t,n,...i){e=Je(e,Ut);const r=Je(e.firestore,fi),s=pl(r);let a;return a=typeof(t=ue(t))=="string"||t instanceof gl?fb(s,"updateDoc",e._key,t,n,i):hb(s,"updateDoc",e._key,t),sh(r,[a.toMutation(e._key,pe.exists(!0))])}function bD(e){return sh(Je(e.firestore,fi),[new $c(e._key,pe.none())])}function SD(e,t){const n=Je(e.firestore,fi),i=Ge(e),r=Sg(e.converter,t);return sh(n,[gg(pl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,pe.exists(!1))]).then(()=>i)}function Au(e,...t){var u,h,d;e=ue(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||uv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(uv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof Ut)a=Je(e.firestore,fi),l=Gc(e._key.path),s={next:g=>{t[i]&&t[i](Eb(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=Je(e,Wr);a=Je(g.firestore,fi),l=g._query;const m=new wg(a);s={next:_=>{t[i]&&t[i](new Us(a,m,g,_))},error:t[i+1],complete:t[i+2]},yD(e._query)}return function(m,_,D,V){const M=new ab(V),w=new ZA(_,M,D);return m.asyncQueue.enqueueAndForget(async()=>XA(await kd(m),w)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>$A(await kd(m),w))}}(nh(a),l,r,s)}function sh(e,t){return function(i,r){const s=new ri;return i.asyncQueue.enqueueAndForget(async()=>QN(await sD(i),r,s)),s.promise}(nh(e),t)}function Eb(e,t,n){const i=n.docs.get(t._key),r=new wg(e);return new er(e,r,t._key,i,new Rs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={maxAttempts:5};function $a(e,t){if((e=ue(e)).firestore!==t)throw new B(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=pl(t)}get(t){const n=$a(t,this._firestore),i=new ED(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Y(24041);const s=r[0];if(s.isFoundDocument())return new pc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new pc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:s})})}set(t,n,i){const r=$a(t,this._firestore),s=Sg(r.converter,n,i),a=gg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=$a(t,this._firestore);let a;return a=typeof(n=ue(n))=="string"||n instanceof gl?fb(this._dataReader,"Transaction.update",s._key,n,i,r):hb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=$a(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID extends RD{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=$a(t,this._firestore),i=new wg(this._firestore);return super.get(t).then(r=>new er(this._firestore,i,n._key,r._document,new Rs(!1,!1),n.converter))}}function CD(e,t,n){e=Je(e,fi);const i={...wD,...n};return function(s){if(s.maxAttempts<1)throw new B(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new ri;return s.asyncQueue.enqueueAndForget(async()=>{const h=await aD(s);new nD(s.asyncQueue,h,l,a,u).ju()}),u.promise}(nh(e),r=>t(new ID(e,r)),i)}function fv(){return new pg("serverTimestamp")}(function(t,n=!0){(function(r){ma=r})(da),Ws(new Br("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new fi(new mI(i.getProvider("auth-internal")),new yI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Wi(f_,d_,t),Wi(f_,d_,"esm2020")})();function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ND=Tb,Ab=new ol("auth","Firebase",Tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new jm("@firebase/auth");function DD(e,...t){yc.logLevel<=ot.WARN&&yc.warn(`Auth (${da}): ${e}`,...t)}function bu(e,...t){yc.logLevel<=ot.ERROR&&yc.error(`Auth (${da}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(e,...t){throw Rg(e,...t)}function Mn(e,...t){return Rg(e,...t)}function bb(e,t,n){const i={...ND(),[t]:n};return new ol("auth","Firebase",i).create(t,{appName:e.name})}function nr(e){return bb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Ab.create(e,...t)}function W(e,t,...n){if(!e)throw Rg(t,...n)}function ti(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bu(t),new Error(t)}function mi(e,t){e||ti(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function xD(){return dv()==="http:"||dv()==="https:"}function dv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xD()||HR()||"connection"in navigator)?navigator.onLine:!0}function VD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n){this.shortDelay=t,this.longDelay=n,mi(n>t,"Short delay should be less than long delay!"),this.isMobile=zR()||FR()}get(){return OD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(e,t){mi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PD=new _l(3e4,6e4);function ah(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function va(e,t,n,i,r={}){return wb(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=ll({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return qR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&fa(e.emulatorConfig.host)&&(h.credentials="include"),Sb.fetch()(await Ib(e,e.config.apiHost,n,l),h)})}async function wb(e,t,n){e._canInitEmulator=!1;const i={...MD,...t};try{const r=new UD(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw nu(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw nu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw nu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw bb(e,d,h);di(e,d)}}catch(r){if(r instanceof pi)throw r;di(e,"network-request-failed",{message:String(r)})}}async function Rb(e,t,n,i,r={}){const s=await va(e,t,n,i,r);return"mfaPendingCredential"in s&&di(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Ib(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Ig(e.config,r):`${e.config.apiScheme}://${r}`;return kD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class UD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),PD.get())})}}function nu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Mn(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(e,t){return va(e,"POST","/v1/accounts:delete",t)}async function _c(e,t){return va(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jD(e,t=!1){const n=ue(e),i=await n.getIdToken(t),r=Cg(i);W(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:vo(yf(r.auth_time)),issuedAtTime:vo(yf(r.iat)),expirationTime:vo(yf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yf(e){return Number(e)*1e3}function Cg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return bu("JWT malformed, contained fewer than 3 sections"),null;try{const r=C0(n);return r?JSON.parse(r):(bu("Failed to decode base64 JWT payload"),null)}catch(r){return bu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function mv(e){const t=Cg(e);return W(t,"internal-error"),W(typeof t.exp<"u","internal-error"),W(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof pi&&zD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function zD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Fo(e,_c(t,{idToken:n}));W(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?Cb(r.providerUserInfo):[],a=HD(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ld(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function qD(e){const t=ue(e);await vc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function HD(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Cb(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(e,t){const n=await wb(e,{},async()=>{const i=ll({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await Ib(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&fa(e.emulatorConfig.host)&&(u.credentials="include"),Sb.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GD(e,t){return va(e,"POST","/v2/accounts:revokeToken",ah(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){W(t.idToken,"internal-error"),W(typeof t.idToken<"u","internal-error"),W(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){W(t.length!==0,"internal-error");const n=mv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await FD(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ls;return i&&(W(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(W(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(W(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ls,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e,t){W(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class vn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new BD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ld(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Fo(this,this.stsTokenManager.getToken(this.auth,t));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return jD(this,t)}reload(){return qD(this)}_assign(t){this!==t&&(W(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new vn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await vc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(nr(this.auth));const t=await this.getIdToken();return await Fo(this,LD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:D,stsTokenManager:V}=n;W(g&&V,t,"internal-error");const M=Ls.fromJSON(this.name,V);W(typeof g=="string",t,"internal-error"),wi(i,t.name),wi(r,t.name),W(typeof m=="boolean",t,"internal-error"),W(typeof _=="boolean",t,"internal-error"),wi(s,t.name),wi(a,t.name),wi(l,t.name),wi(u,t.name),wi(h,t.name),wi(d,t.name);const w=new vn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(w.providerData=D.map(v=>({...v}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(t,n,i=!1){const r=new Ls;r.updateFromServerResponse(n);const s=new vn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await vc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];W(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Cb(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Ls;l.updateFromIdToken(i);const u=new vn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ld(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function ei(e){mi(e instanceof Function,"Expected a class definition");let t=gv.get(e);return t?(mi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Nb.type="NONE";const pv=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(e,t,n){return`firebase:${e}:${t}:${n}`}class js{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Su(this.userKey,r.apiKey,s),this.fullPersistenceKey=Su("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await _c(this.auth,{idToken:t}).catch(()=>{});return n?vn._fromGetAccountInfoResponse(this.auth,n,t):null}return vn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new js(ei(pv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ei(pv);const a=Su(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await _c(t,{idToken:d}).catch(()=>{});if(!m)break;g=await vn._fromGetAccountInfoResponse(t,m,d)}else g=vn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new js(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new js(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Vb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Db(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kb(t))return"Blackberry";if(Pb(t))return"Webos";if(xb(t))return"Safari";if((t.includes("chrome/")||Ob(t))&&!t.includes("edge/"))return"Chrome";if(Mb(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Db(e=we()){return/firefox\//i.test(e)}function xb(e=we()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ob(e=we()){return/crios\//i.test(e)}function Vb(e=we()){return/iemobile/i.test(e)}function Mb(e=we()){return/android/i.test(e)}function kb(e=we()){return/blackberry/i.test(e)}function Pb(e=we()){return/webos/i.test(e)}function Ng(e=we()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function QD(e=we()){var t;return Ng(e)&&!!((t=window.navigator)!=null&&t.standalone)}function YD(){return GR()&&document.documentMode===10}function Ub(e=we()){return Ng(e)||Mb(e)||Pb(e)||kb(e)||/windows phone/i.test(e)||Vb(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(e,t=[]){let n;switch(e){case"Browser":n=yv(we());break;case"Worker":n=`${yv(we())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(e,t={}){return va(e,"GET","/v2/passwordPolicy",ah(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=6;class ZD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$D,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new KD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ab,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await js.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await _c(this,{idToken:t}),i=await vn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(_n(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await vc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=VD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(_n(this.app))return Promise.reject(nr(this));const n=t?ue(t):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&W(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return _n(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await XD(this),n=new ZD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ol("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await GD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ei(t)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await js.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&DD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function oh(e){return ue(e)}class _v{constructor(t){this.auth=t,this.observer=null,this.addObserver=JR(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JD(e){Dg=e}function tx(e){return Dg.loadJS(e)}function ex(){return Dg.gapiScript}function nx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(e,t){const n=Bm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(zr(s,t??{}))return r;di(r,"already-initialized")}return n.initialize({options:t})}function rx(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ei);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function sx(e,t,n){const i=oh(e);W(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=jb(t),{host:a,port:l}=ax(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(zr(h,i.config.emulator)&&zr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,fa(a)?(O0(`${s}//${a}${u}`),V0("Auth",!0)):ox()}function jb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ax(e){const t=jb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:vv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:vv(a)}}}function vv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ox(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(t){return ti("not implemented")}_linkToIdToken(t,n){return ti("not implemented")}_getReauthenticationResolver(t){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(e,t){return Rb(e,"POST","/v1/accounts:signInWithIdp",ah(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="http://localhost";class Fr extends zb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Fr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Fr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return zs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,zs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,zs(t,n)}buildRequest(){const t={requestUri:lx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ll(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Bb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends vl{constructor(){super("facebook.com")}static credential(t){return Fr._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vi.credential(t.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Fr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends vl{constructor(){super("github.com")}static credential(t){return Fr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends vl{constructor(){super("twitter.com")}static credential(t,n){return Fr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(e,t){return Rb(e,"POST","/v1/accounts:signUp",ah(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await vn._fromIdTokenResponse(t,i,r),a=Ev(i);return new fr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=Ev(i);return new fr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function Ev(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(e){var r;if(_n(e.app))return Promise.reject(nr(e));const t=oh(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new fr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await ux(t,{returnSecureToken:!0}),i=await fr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends pi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Ec(t,n,i,r)}}function qb(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(e,s,t,i):s})}async function hx(e,t,n=!1){const i=await Fo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return fr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(e,t,n=!1){const{auth:i}=e;if(_n(i.app))return Promise.reject(nr(i));const r="reauthenticate";try{const s=await Fo(e,qb(i,r,t,e),n);W(s.idToken,i,"internal-error");const a=Cg(s.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(e.uid===l,i,"user-mismatch"),fr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&di(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(e,t,n=!1){if(_n(e.app))return Promise.reject(nr(e));const i="signIn",r=await qb(e,i,t),s=await fr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function mx(e,t,n,i){return ue(e).onIdTokenChanged(t,n,i)}function gx(e,t,n){return ue(e).beforeAuthStateChanged(t,n)}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=1e3,yx=10;class Fb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ub(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);YD()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,yx):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},px)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Fb.type="LOCAL";const _x=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Gb.type="SESSION";const Qb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new lh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await vx(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=xg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function Tx(e){kn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function Ax(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Sx(){return Yb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firebaseLocalStorageDb",wx=1,Ac="firebaseLocalStorage",Xb="fbase_key";class El{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uh(e,t){return e.transaction([Ac],t?"readwrite":"readonly").objectStore(Ac)}function Rx(){const e=indexedDB.deleteDatabase(Kb);return new El(e).toPromise()}function jd(){const e=indexedDB.open(Kb,wx);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Ac,{keyPath:Xb})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Ac)?t(i):(i.close(),await Rx(),t(await jd()))})})}async function Tv(e,t,n){const i=uh(e,!0).put({[Xb]:t,value:n});return new El(i).toPromise()}async function Ix(e,t){const n=uh(e,!1).get(t),i=await new El(n).toPromise();return i===void 0?null:i.value}function Av(e,t){const n=uh(e,!0).delete(t);return new El(n).toPromise()}const Cx=800,Nx=3;class $b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>Nx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(Sx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Ax(),!this.activeServiceWorker)return;this.sender=new Ex(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await jd();return await Tv(t,Tc,"1"),await Av(t,Tc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Tv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Ix(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Av(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=uh(r,!1).getAll();return new El(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Cx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$b.type="LOCAL";const Dx=$b;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(e,t){return t?ei(t):(W(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends zb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return zs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return zs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return zs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Ox(e){return dx(e.auth,new Og(e),e.bypassAuthState)}function Vx(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),fx(n,new Og(e),e.bypassAuthState)}async function Mx(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),hx(n,new Og(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ox;case"linkViaPopup":case"linkViaRedirect":return Mx;case"reauthViaPopup":case"reauthViaRedirect":return Vx;default:di(this.auth,"internal-error")}}resolve(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new _l(2e3,1e4);class Is extends Zb{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return W(t,this.auth,"internal-error"),t}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const t=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,kx.get())};t()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="pendingRedirect",wu=new Map;class Ux extends Zb{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=wu.get(this.auth._key());if(!t){try{const i=await Lx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}wu.set(this.auth._key(),t)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lx(e,t){const n=Bx(t),i=zx(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function jx(e,t){wu.set(e._key(),t)}function zx(e){return ei(e._redirectPersistence)}function Bx(e){return Su(Px,e.config.apiKey,e.name)}async function qx(e,t,n=!1){if(_n(e.app))return Promise.reject(nr(e));const i=oh(e),r=xx(i,t),a=await new Ux(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=10*60*1e3;class Fx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Gx(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!Wb(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Hx&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(t))}saveEventToCache(t){this.cachedEventUids.add(bv(t)),this.lastProcessedEventTime=Date.now()}}function bv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Wb({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Gx(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wb(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(e,t={}){return va(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kx=/^https?/;async function Xx(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Qx(e);for(const n of t)try{if($x(n))return}catch{}di(e,"unauthorized-domain")}function $x(e){const t=Ud(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Kx.test(n))return!1;if(Yx.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new _l(3e4,6e4);function Sv(){const e=kn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Wx(e){return new Promise((t,n)=>{var r,s,a;function i(){Sv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sv(),n(Mn(e,"network-request-failed"))},timeout:Zx.get()})}if((s=(r=kn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=kn().gapi)!=null&&a.load)i();else{const l=nx("iframefcb");return kn()[l]=()=>{gapi.load?i():n(Mn(e,"network-request-failed"))},tx(`${ex()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Ru=null,t})}let Ru=null;function Jx(e){return Ru=Ru||Wx(e),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new _l(5e3,15e3),e4="__/auth/iframe",n4="emulator/auth/iframe",i4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s4(e){const t=e.config;W(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ig(t,n4):`https://${e.config.authDomain}/${e4}`,i={apiKey:t.apiKey,appName:e.name,v:da},r=r4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ll(i).slice(1)}`}async function a4(e){const t=await Jx(e),n=kn().gapi;return W(n,e,"internal-error"),t.open({where:document.body,url:s4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Mn(e,"network-request-failed"),l=kn().setTimeout(()=>{s(a)},t4.get());function u(){kn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l4=500,u4=600,c4="_blank",h4="http://localhost";class wv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f4(e,t,n,i=l4,r=u4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...o4,width:i.toString(),height:r.toString(),top:s,left:a},h=we().toLowerCase();n&&(l=Ob(h)?c4:n),Db(h)&&(t=t||h4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,D])=>`${m}${_}=${D},`,"");if(QD(h)&&l!=="_self")return d4(t||"",l),new wv(null);const g=window.open(t||"",l,d);W(g,e,"popup-blocked");try{g.focus()}catch{}return new wv(g)}function d4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="__/auth/handler",g4="emulator/auth/handler",p4=encodeURIComponent("fac");async function Rv(e,t,n,i,r,s){W(e.config.authDomain,e,"auth-domain-config-required"),W(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:da,eventId:r};if(t instanceof Bb){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",WR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof vl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${p4}=${encodeURIComponent(u)}`:"";return`${y4(e)}?${ll(l).slice(1)}${h}`}function y4({config:e}){return e.emulator?Ig(e,g4):`https://${e.authDomain}/${m4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class _4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qb,this._completeRedirectFn=qx,this._overrideRedirectResult=jx}async _openPopup(t,n,i,r){var a;mi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Rv(t,n,i,Ud(),r);return f4(t,s,xg())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await Rv(t,n,i,Ud(),r);return Tx(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(mi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await a4(t),i=new Fx(t);return n.register("authEvent",r=>(W(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_f,{type:_f},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[_f];s!==void 0&&n(!!s),di(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Xx(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ub()||xb()||Ng()}}const v4=_4;var Iv="@firebase/auth",Cv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A4(e){Ws(new Br("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lb(e)},h=new WD(i,r,s,u);return rx(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Ws(new Br("auth-internal",t=>{const n=oh(t.getProvider("auth").getImmediate());return(i=>new E4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(Iv,Cv,T4(e)),Wi(Iv,Cv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=5*60,S4=x0("authIdTokenMaxAge")||b4;let Nv=null;const w4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>S4)return;const r=n==null?void 0:n.token;Nv!==r&&(Nv=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function R4(e=U0()){const t=Bm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=ix(e,{popupRedirectResolver:v4,persistence:[Dx,_x,Qb]}),i=x0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=w4(s.toString());gx(n,a,()=>a(n.currentUser)),mx(n,l=>a(l))}}const r=N0("auth");return r&&sx(n,`http://${r}`),n}function I4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}JD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Mn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",I4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A4("Browser");const C4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},Jb=P0(C4),Ce=uD(Jb),N4=R4(Jb),tS=({className:e=""})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:b.jsx("path",{d:"m9 18 6-6-6-6"})}),eS=({className:e=""})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[b.jsx("path",{d:"M19 12H5"}),b.jsx("polyline",{points:"12 19 5 12 12 5"})]}),nS=({className:e="",filled:t=!1})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[b.jsx("circle",{cx:"11",cy:"11",r:"8"}),b.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),D4=({className:e=""})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[b.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),b.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),x4=({className:e=""})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:b.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),iS=({className:e="",filled:t=!1})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:b.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),O4=({className:e=""})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[b.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),b.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),rS=({className:e="",filled:t=!1})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:b.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),V4=({className:e="",filled:t=!1})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[b.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),b.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),M4=({className:e="",filled:t=!1})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[b.jsx("path",{d:"M4 22h16"}),b.jsx("path",{d:"M7 22V2h10v20"}),b.jsx("path",{d:"M7 12h4"})]}),k4=({className:e=""})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:b.jsx("path",{d:"m15 18-6-6 6-6"})}),P4=({className:e=""})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:b.jsx("path",{d:"m9 18 6-6-6-6"})}),U4=({className:e=""})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[b.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),b.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),L4=()=>b.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[b.jsx(iS,{className:"animate-pulse-heart text-accent",filled:!0}),b.jsx("p",{className:"mt-4 text-lg opacity-70",children:" ..."})]}),Vg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 ",price:199},{duration:3,name:"3 ",price:539,popular:!0},{duration:12,name:"1 ",price:1899}];return b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:b.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[b.jsx(x4,{className:"mx-auto mb-4 text-accent"}),b.jsx("h3",{className:"text-xl text-center font-bold",children:"    "}),b.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"   :"}),b.jsx("div",{className:"space-y-3",children:n.map(i=>b.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[b.jsx("p",{className:"font-bold",children:i.name}),b.jsxs("p",{className:"text-sm",children:[i.price," "]})]},i.duration))}),b.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:" "})]})})},Mg=({onClose:e,onSelectMethod:t,plan:n})=>b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:b.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[b.jsx("h3",{className:"text-xl text-center font-bold",children:"  "}),b.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:[": ",n.name," (",n.price," )"]}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[b.jsx("p",{className:"font-bold",children:"  "}),b.jsx("p",{className:"text-sm opacity-70",children:"  ( 24 )"})]}),b.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[b.jsx("p",{className:"font-bold",children:"   tribut"}),b.jsx("p",{className:"text-sm opacity-70",children:"  "})]})]}),b.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:""})]})}),Gr=({title:e,onBack:t})=>b.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&b.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:b.jsx(eS,{})}),b.jsx("h1",{className:"text-xl font-bold",children:e})]}),kg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>b.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>b.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:b.jsxs("div",{className:"relative transition-all duration-300",children:[b.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:b.jsx(rS,{filled:n.includes(r.id),width:"20",height:"20"})}),b.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),b.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):b.jsx("p",{className:"col-span-3 text-center opacity-70",children:"  ."})}),j4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=F.useState(!1),[m,_]=F.useState(null),[D,V]=F.useState("newest"),[M,w]=F.useState(!1),v=F.useRef(null),[R,x]=F.useState(!1),L=i&&new Date(i.expires_at)>new Date,q=F.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);F.useEffect(()=>{v.current&&setTimeout(()=>{v.current&&x(v.current.scrollHeight>v.current.clientHeight)},100)},[e.description]);const E=F.useMemo(()=>{const C=[...a];return D==="newest"?C.reverse():a},[a,D]),y=C=>{!L&&C.isPaid?g(!0):t(C)},T=()=>{if(q){const C=a.find(A=>A.id===q);C&&t(C)}},S=C=>_(C),I=async C=>{var xt;const A=(xt=window.Telegram)==null?void 0:xt.WebApp;if(!A||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),A&&A.showAlert(" . ,   .");return}A.showConfirm("       .      ,    ,  !    /start  .",async $t=>{if(!$t)return;const j=Ge(Ce,"users",s);try{await Ho(j,{pendingSubscription:{...m,method:C,date:new Date().toISOString()}},{merge:!0}),A.openTelegramLink(`https://t.me/${r}?start=true`),A.close()}catch(X){console.error("   Firebase:",X),A.showAlert("    .  .")}})};return b.jsxs("div",{className:"text-text-main",children:[b.jsx(Gr,{title:e.title,onBack:h}),b.jsxs("div",{className:"relative h-64",children:[b.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),b.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[b.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),b.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),b.jsxs("div",{className:"p-4",children:[b.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(C=>b.jsx("button",{onClick:()=>n(C),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:C},C))}),b.jsx("div",{ref:v,className:`relative overflow-hidden transition-all duration-500 ${M?"max-h-full":"max-h-24"}`,children:b.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&b.jsx("div",{className:"text-right",children:b.jsx("button",{onClick:()=>w(!M),className:"text-sm font-semibold text-accent mb-4",children:M?"":" ..."})}),q&&b.jsxs("button",{onClick:T,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["  ( ",q,")"]}),b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h2",{className:"text-xl font-bold",children:""}),b.jsx("button",{onClick:()=>V(C=>C==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:D==="newest"?" ":" "})]}),L&&b.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["  ",new Date(i.expires_at).toLocaleDateString()]}),l?b.jsx("p",{children:" ..."}):b.jsx("div",{className:"flex flex-col gap-3",children:E.map(C=>{const A=!L&&C.isPaid,xt=q===C.id;return b.jsxs("div",{onClick:()=>y(C),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${A?"opacity-70":""}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[xt&&b.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),b.jsx("p",{className:"font-semibold",children:C.title})]}),A?b.jsx(D4,{}):b.jsx(tS,{})]},C.id)})}),d&&b.jsx(Vg,{onClose:()=>g(!1),onSelectPlan:S}),m&&b.jsx(Mg,{onClose:()=>_(null),onSelectMethod:I,plan:m})]})]})},z4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g,isUserAdmin:m})=>{const[_,D]=F.useState([]),[V,M]=F.useState(""),[w,v]=F.useState(null),[R,x]=F.useState(""),[L,q]=F.useState(0),[E,y]=F.useState(!1),[T,S]=F.useState(!1),[I,C]=F.useState(!1),[A,xt]=F.useState(!1),[$t,j]=F.useState(null),[X,K]=F.useState(""),[mt,_t]=F.useState(!0),je=h&&new Date(h.expires_at)>new Date,kt=F.useMemo(()=>Ge(Ce,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);F.useEffect(()=>{const Q=Au(kt,tt=>{var gt;q(((gt=tt.data())==null?void 0:gt.likeCount)||0)}),at=_D(sv(Ce,`chapters_metadata/${t.id}_${e.id}/comments`),vD("timestamp","asc")),ze=Au(at,tt=>{const gt=tt.docs.map(dn=>({id:dn.id,...dn.data()}));D(gt)});let et=()=>{};if(r){const tt=Ge(Ce,`chapters_metadata/${t.id}_${e.id}/likes`,r);et=Au(tt,gt=>{y(gt.exists())})}return()=>{Q(),ze(),et()}},[kt,t.id,e.id,r]),F.useEffect(()=>{(async()=>{if(_t(!0),K(""),e.isPaid&&!je){_t(!1),K(`###        .

,     "",   .`);return}try{const at=Ge(Ce,"chapter_content",`${t.id}-${e.id}`),ze=await vb(at);ze.exists()?K(ze.data().content):K(`## 

    . ,  .`)}catch(at){console.error("  :",at),K(`## 

   .   -.`)}finally{_t(!1)}})()},[t.id,e.id,je]);const It=async Q=>{if(Q.preventDefault(),!(!V.trim()||!r))try{await Ho(kt,{},{merge:!0});const at=sv(Ce,`chapters_metadata/${t.id}_${e.id}/comments`);await SD(at,{userId:r,userName:s||"",text:V,timestamp:fv()}),M("")}catch(at){console.error("  :",at)}},Re=Q=>{v(Q.id),x(Q.text)},Zt=async Q=>{if(!R.trim())return;const at=Ge(Ce,`chapters_metadata/${t.id}_${e.id}/comments`,Q);await AD(at,{text:R}),v(null),x("")},Ea=async Q=>{const at=Ge(Ce,`chapters_metadata/${t.id}_${e.id}/comments`,Q);await bD(at)},nn=async()=>{if(!r)return;const Q=Ge(Ce,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await CD(Ce,async at=>{var gt;const ze=await at.get(Q),tt=((gt=(await at.get(kt)).data())==null?void 0:gt.likeCount)||0;ze.exists()?(at.delete(Q),at.set(kt,{likeCount:Math.max(0,tt-1)},{merge:!0})):(at.set(Q,{timestamp:fv()}),at.set(kt,{likeCount:tt+1},{merge:!0}))})}catch(at){console.error("   :",at)}},yi=Q=>{Q&&(!je&&Q.isPaid?(S(!1),xt(!0)):(l(Q),S(!1)))},yr=Q=>{j(Q),xt(!1)},_i=async Q=>{var ze;const at=(ze=window.Telegram)==null?void 0:ze.WebApp;at&&r&&$t&&at.showConfirm("       .    ,   /start.",async et=>{if(et){const tt=Ge(Ce,"users",r);try{await Ho(tt,{pendingSubscription:{...$t,method:Q,date:new Date().toISOString()}},{merge:!0}),at.openTelegramLink(`https://t.me/${d}?start=true`),at.close()}catch(gt){console.error("   Firebase:",gt),at.showAlert("    .  .")}}})},jn=u.findIndex(Q=>Q.id===e.id),bn=u[jn-1],vi=u[jn+1],_r=Q=>window.marked?`<div class="prose">${window.marked.parse(Q)}</div>`:Q;return b.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[b.jsx(Gr,{title:t.title,onBack:g}),b.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[b.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),b.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:mt?"<p>...</p>":_r(X)}}),b.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"    "}),b.jsxs("div",{className:"border-t border-border-color pt-8",children:[b.jsx("div",{className:"flex items-center gap-4 mb-8",children:b.jsxs("button",{onClick:nn,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[b.jsx(iS,{filled:E,className:E?"text-accent":""}),b.jsx("span",{className:"font-bold text-lg",children:L})]})}),b.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),b.jsxs("div",{className:"space-y-4 mb-6",children:[_.map(Q=>b.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[b.jsx("p",{className:"font-bold text-sm",children:Q.userName}),w===Q.id?b.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.jsx("input",{type:"text",value:R,onChange:at=>x(at.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),b.jsx("button",{onClick:()=>Zt(Q.id),className:"p-1 rounded-full bg-green-500 text-white",children:""}),b.jsx("button",{onClick:()=>v(null),className:"p-1 rounded-full bg-gray-500 text-white",children:""})]}):b.jsx("p",{className:"text-sm mt-1 opacity-90",children:Q.text}),(r===Q.userId||m)&&b.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[b.jsx("button",{onClick:()=>Re(Q),className:"text-xs text-gray-500",children:""}),b.jsx("button",{onClick:()=>Ea(Q.id),className:"text-xs text-red-500",children:""})]})]},Q.id)),_.length===0&&b.jsx("p",{className:"opacity-70 text-sm",children:"  .  !"})]}),b.jsxs("form",{onSubmit:It,className:"flex items-center gap-2",children:[b.jsx("input",{type:"text",value:V,onChange:Q=>M(Q.target.value),placeholder:" ...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),b.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:b.jsx(O4,{className:"w-5 h-5"})})]})]})]}),b.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[b.jsx("button",{onClick:()=>yi(bn),disabled:!bn,className:"p-2 disabled:opacity-50",children:b.jsx(eS,{})}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>S(!0),className:"px-4 py-2 rounded-lg bg-background",children:""}),b.jsx("button",{onClick:()=>C(!0),className:"p-2 rounded-lg bg-background",children:b.jsx(U4,{})})]}),b.jsx("button",{onClick:()=>yi(vi),disabled:!vi,className:"p-2 disabled:opacity-50",children:b.jsx(tS,{className:"opacity-100"})})]}),T&&b.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>S(!1),children:b.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:Q=>Q.stopPropagation(),children:[b.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:""}),b.jsx("div",{className:"overflow-y-auto",children:b.jsx("div",{className:"flex flex-col gap-2",children:u.map(Q=>b.jsx("button",{onClick:()=>yi(Q),className:`p-2 text-left rounded-md ${Q.id===e.id?"bg-accent text-white":"bg-background"}`,children:Q.title},Q.id))})})]})}),I&&b.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>C(!1),children:b.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:Q=>Q.stopPropagation(),children:[b.jsx("h3",{className:"font-bold text-lg mb-4",children:" "}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{children:" "}),b.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[b.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),b.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),A&&b.jsx(Vg,{onClose:()=>xt(!1),onSelectPlan:yr}),$t&&b.jsx(Mg,{onClose:()=>j(null),onSelectMethod:_i,plan:$t})]})},B4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=F.useState(""),a=F.useMemo(()=>r?e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())):[],[e,r]);return b.jsxs("div",{children:[b.jsx(Gr,{title:""}),b.jsxs("div",{className:"p-4",children:[b.jsxs("div",{className:"relative mb-6",children:[b.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:b.jsx(nS,{className:"text-text-main opacity-50"})}),b.jsx("input",{type:"text",placeholder:"  ...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),b.jsx(kg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},q4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>b.jsxs("div",{children:[b.jsx(Gr,{title:""}),b.jsx(kg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),H4=({subscription:e,onGetSubscriptionClick:t,userId:n})=>{const i=e&&new Date(e.expires_at)>new Date,r=()=>{n&&navigator.clipboard.writeText(n).then(()=>{console.log("Firebase UID    ")}).catch(s=>{console.error("   UID: ",s)})};return b.jsxs("div",{children:[b.jsx(Gr,{title:""}),b.jsxs("div",{className:"p-4 space-y-4",children:[b.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[b.jsx("h3",{className:"font-bold mb-2",children:""}),i?b.jsxs("div",{children:[b.jsx("p",{className:"text-green-500",children:""}),b.jsxs("p",{className:"text-sm opacity-70",children:[": ",new Date(e.expires_at).toLocaleDateString()]})]}):b.jsxs("div",{children:[b.jsx("p",{className:"text-red-500",children:""}),b.jsx("p",{className:"text-sm opacity-70 mb-3",children:" ,       ."}),b.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:" "})]})]}),b.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[b.jsx("h3",{className:"font-bold mb-2",children:" ID  "}),b.jsx("p",{className:"text-sm opacity-70 mb-3",children:" ID       Telegram-."}),b.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:b.jsx("code",{children:n||"..."})}),b.jsx("button",{onClick:r,disabled:!n,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:" ID"})]})]})]})},F4=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"",icon:M4},{id:"search",label:"",icon:nS},{id:"bookmarks",label:"",icon:rS},{id:"profile",label:"",icon:V4}];return b.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:b.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>b.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[b.jsx(i.icon,{filled:e===i.id}),b.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},G4=({onReadMore:e})=>{const[t,n]=F.useState([]),[i,r]=F.useState(0);F.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return b.jsx("div",{className:"p-4",children:b.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[b.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"font-bold text-text-main",children:l.title}),b.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),b.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:" "})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:b.jsx(k4,{className:"w-5 h-5"})}),b.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:b.jsx(P4,{className:"w-5 h-5"})})]})]})})},Q4=({newsItem:e,onClose:t})=>b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:b.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),b.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),b.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:""})]})});function Y4(){const[e,t]=F.useState(16),[n,i]=F.useState("font-sans"),[r,s]=F.useState("list"),[a,l]=F.useState("library"),[u,h]=F.useState([]),[d,g]=F.useState(null),[m,_]=F.useState(null),[D,V]=F.useState(null),[M,w]=F.useState(null),[v,R]=F.useState(null),[x,L]=F.useState(null),[q,E]=F.useState(!0),[y,T]=F.useState(!1),[S,I]=F.useState([]),[C,A]=F.useState(!0),[xt,$t]=F.useState(null),[j,X]=F.useState([]),[K,mt]=F.useState(!1),[_t,je]=F.useState(null),[kt,It]=F.useState(null),Re="tenebrisverbot",Zt=F.useCallback(async et=>{if(v){const tt=Ge(Ce,"users",v);try{await Ho(tt,et,{merge:!0})}catch(gt){console.error("    :",gt)}}},[v]),Ea=F.useCallback(et=>{t(tt=>{const gt=Math.max(12,Math.min(32,tt+et));return Zt({settings:{fontSize:gt,fontClass:n}}),gt})},[n,Zt]);F.useEffect(()=>{(async()=>{var tt,gt,dn;try{const mn=(await cx(N4)).user;R(mn.uid);const gn=await mn.getIdTokenResult();T(!!gn.claims.admin);const Bn=(tt=window.Telegram)==null?void 0:tt.WebApp;if(Bn?(Bn.ready(),Bn.expand(),L(((dn=(gt=Bn.initDataUnsafe)==null?void 0:gt.user)==null?void 0:dn.first_name)||"")):L(""),mn.uid){const Jr=Ge(Ce,"users",v);Au(Jr,Ta=>{if(Ta.exists()){const qn=Ta.data();w(qn.subscription||null),$t(qn.lastRead||null),X(qn.bookmarks||[]),qn.settings&&(t(qn.settings.fontSize||16),i(qn.settings.fontClass||"font-sans"))}})}const Wt=await fetch("/tene/data/novels.json");if(!Wt.ok)throw new Error("Failed to fetch novels");const ce=await Wt.json();h(ce.novels)}catch(zn){console.error(" :",zn)}finally{E(!1)}})()},[]),F.useEffect(()=>{if(!d){I([]);return}(async()=>{A(!0);try{const tt=Ge(Ce,"chapter_info",d.id.toString()),gt=await vb(tt);if(gt.exists()){const zn=gt.data().chapters||{},mn=Object.keys(zn).map(gn=>({id:parseInt(gn),title:` ${gn}`,isPaid:zn[gn].isPaid||!1})).sort((gn,Bn)=>gn.id-Bn.id);I(mn)}else console.log("      chapter_info!"),I([])}catch(tt){console.error("    Firebase:",tt),I([])}finally{A(!1)}})()},[d]);const nn=F.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),V(null))},[r]);F.useEffect(()=>{var tt;const et=(tt=window.Telegram)==null?void 0:tt.WebApp;if(et)return et.onEvent("backButtonClicked",nn),r==="list"?et.BackButton.hide():et.BackButton.show(),()=>et.offEvent("backButtonClicked",nn)},[r,nn]),F.useEffect(()=>{var tt;const et=(tt=window.Telegram)==null?void 0:tt.WebApp;et&&(et.setHeaderColor("#FFFFFF"),et.setBackgroundColor("#F5F1ED"))},[]);const yi=F.useCallback(async et=>{if(_(et),s("reader"),v&&d){const tt={...xt||{},[d.id]:{novelId:d.id,chapterId:et.id,timestamp:new Date().toISOString()}};$t(tt),await Zt({lastRead:tt})}},[v,d,xt,Zt]),yr=et=>{g(et),s("details")},_i=et=>{V(et),s("list"),l("library")},jn=()=>{V(null)},bn=F.useCallback(async et=>{const tt=j.includes(et)?j.filter(gt=>gt!==et):[...j,et];X(tt),await Zt({bookmarks:tt})},[j,Zt]),vi=F.useMemo(()=>u.filter(et=>j.includes(et.id)),[u,j]),_r=()=>{mt(!0)},Q=et=>{je(et),mt(!1)},at=async et=>{var gt;const tt=(gt=window.Telegram)==null?void 0:gt.WebApp;if(!tt||!v||!_t){console.error("Telegram Web App, userId, or selectedPlan is not available."),tt&&tt.showAlert(" . ,   .");return}tt.showConfirm("       .      ,    ,  !    /start  .",async dn=>{if(!dn)return;const zn=Ge(Ce,"users",v);try{await Ho(zn,{pendingSubscription:{..._t,method:et,date:new Date().toISOString()}},{merge:!0}),tt.openTelegramLink(`https://t.me/${Re}?start=true`),tt.close()}catch(mn){console.error("   Firebase:",mn),tt.showAlert("    .  .")}})};if(q)return b.jsx(L4,{});const ze=()=>{if(r==="details")return b.jsx(j4,{novel:d,onSelectChapter:yi,onGenreSelect:_i,subscription:M,botUsername:Re,userId:v,chapters:S,isLoadingChapters:C,lastReadData:xt,onBack:nn});if(r==="reader")return b.jsx(z4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:Ea,userId:v,userName:x,currentFontClass:n,onSelectChapter:yi,allChapters:S,subscription:M,botUsername:Re,onBack:nn,isUserAdmin:y});switch(a){case"library":return b.jsxs(b.Fragment,{children:[b.jsx(Gr,{title:""}),b.jsx(G4,{onReadMore:It}),D&&b.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[b.jsxs("p",{className:"text-sm",children:[b.jsx("span",{className:"opacity-70",children:":"}),b.jsx("strong",{className:"ml-2",children:D})]}),b.jsx("button",{onClick:jn,className:"text-xs font-bold text-accent hover:underline",children:""})]}),b.jsx(kg,{novels:u.filter(et=>!D||et.genres.includes(et.genre)),onSelectNovel:yr,bookmarks:j,onToggleBookmark:bn})]});case"search":return b.jsx(B4,{novels:u,onSelectNovel:yr,bookmarks:j,onToggleBookmark:bn});case"bookmarks":return b.jsx(q4,{novels:vi,onSelectNovel:yr,bookmarks:j,onToggleBookmark:bn});case"profile":return b.jsx(H4,{subscription:M,onGetSubscriptionClick:_r,userId:v});default:return b.jsx(Gr,{title:""})}};return b.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${y?"":"no-select"}`,children:[b.jsx("div",{className:"pb-20",children:ze()}),r==="list"&&b.jsx(F4,{activeTab:a,setActiveTab:l}),K&&b.jsx(Vg,{onClose:()=>mt(!1),onSelectPlan:Q}),_t&&b.jsx(Mg,{onClose:()=>je(null),onSelectMethod:at,plan:_t}),kt&&b.jsx(Q4,{newsItem:kt,onClose:()=>It(null)})]})}RR.createRoot(document.getElementById("root")).render(b.jsx(F.StrictMode,{children:b.jsx(Y4,{})}));
