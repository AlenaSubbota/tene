(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Ov={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb=Symbol.for("react.transitional.element"),Mb=Symbol.for("react.fragment");function Vv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:Vb,type:e,key:i,ref:t!==void 0?t:null,props:n}}Ac.Fragment=Mb;Ac.jsx=Vv;Ac.jsxs=Vv;Ov.exports=Ac;var w=Ov.exports,Mv={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd=Symbol.for("react.transitional.element"),kb=Symbol.for("react.portal"),Pb=Symbol.for("react.fragment"),Ub=Symbol.for("react.strict_mode"),Lb=Symbol.for("react.profiler"),jb=Symbol.for("react.consumer"),zb=Symbol.for("react.context"),Bb=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),Hb=Symbol.for("react.memo"),kv=Symbol.for("react.lazy"),xp=Symbol.iterator;function Gb(e){return e===null||typeof e!="object"?null:(e=xp&&e[xp]||e["@@iterator"],typeof e=="function"?e:null)}var Pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uv=Object.assign,Lv={};function ia(e,t,n){this.props=e,this.context=t,this.refs=Lv,this.updater=n||Pv}ia.prototype.isReactComponent={};ia.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ia.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jv(){}jv.prototype=ia.prototype;function qd(e,t,n){this.props=e,this.context=t,this.refs=Lv,this.updater=n||Pv}var Hd=qd.prototype=new jv;Hd.constructor=qd;Uv(Hd,ia.prototype);Hd.isPureReactComponent=!0;var Op=Array.isArray,Ot={H:null,A:null,T:null,S:null,V:null},zv=Object.prototype.hasOwnProperty;function Gd(e,t,n,i,s,r){return n=r.ref,{$$typeof:Bd,type:e,key:t,ref:n!==void 0?n:null,props:r}}function Fb(e,t){return Gd(e.type,t,void 0,void 0,void 0,e.props)}function Fd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bd}function Qb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vp=/\/+/g;function wh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qb(""+e.key):t.toString(36)}function Mp(){}function Yb(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Mp,Mp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function sr(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Bd:case kb:a=!0;break;case kv:return a=e._init,sr(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+wh(e,0):i,Op(s)?(n="",a!=null&&(n=a.replace(Vp,"$&/")+"/"),sr(s,t,n,"",function(h){return h})):s!=null&&(Fd(s)&&(s=Fb(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Vp,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(Op(e))for(var u=0;u<e.length;u++)i=e[u],r=l+wh(i,u),a+=sr(i,t,n,r,s);else if(u=Gb(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+wh(i,u++),a+=sr(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return sr(Yb(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function kl(e,t,n){if(e==null)return e;var i=[],s=0;return sr(e,i,"","",function(r){return t.call(n,r,s++)}),i}function Kb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Xb(){}et.Children={map:kl,forEach:function(e,t,n){kl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return kl(e,function(){t++}),t},toArray:function(e){return kl(e,function(t){return t})||[]},only:function(e){if(!Fd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=ia;et.Fragment=Pb;et.Profiler=Lb;et.PureComponent=qd;et.StrictMode=Ub;et.Suspense=qb;et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ot;et.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ot.H.useMemoCache(e)}};et.cache=function(e){return function(){return e.apply(null,arguments)}};et.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Uv({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!zv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Gd(e.type,s,void 0,void 0,r,i)};et.createContext=function(e){return e={$$typeof:zb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:jb,_context:e},e};et.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)zv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Gd(e,r,void 0,void 0,null,s)};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:Bb,render:e}};et.isValidElement=Fd;et.lazy=function(e){return{$$typeof:kv,_payload:{_status:-1,_result:e},_init:Kb}};et.memo=function(e,t){return{$$typeof:Hb,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=Ot.T,n={};Ot.T=n;try{var i=e(),s=Ot.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Xb,kp)}catch(r){kp(r)}finally{Ot.T=t}};et.unstable_useCacheRefresh=function(){return Ot.H.useCacheRefresh()};et.use=function(e){return Ot.H.use(e)};et.useActionState=function(e,t,n){return Ot.H.useActionState(e,t,n)};et.useCallback=function(e,t){return Ot.H.useCallback(e,t)};et.useContext=function(e){return Ot.H.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e,t){return Ot.H.useDeferredValue(e,t)};et.useEffect=function(e,t,n){var i=Ot.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};et.useId=function(){return Ot.H.useId()};et.useImperativeHandle=function(e,t,n){return Ot.H.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return Ot.H.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return Ot.H.useLayoutEffect(e,t)};et.useMemo=function(e,t){return Ot.H.useMemo(e,t)};et.useOptimistic=function(e,t){return Ot.H.useOptimistic(e,t)};et.useReducer=function(e,t,n){return Ot.H.useReducer(e,t,n)};et.useRef=function(e){return Ot.H.useRef(e)};et.useState=function(e){return Ot.H.useState(e)};et.useSyncExternalStore=function(e,t,n){return Ot.H.useSyncExternalStore(e,t,n)};et.useTransition=function(){return Ot.H.useTransition()};et.version="19.1.1";Mv.exports=et;var G=Mv.exports,Bv={exports:{}},Sc={},qv={exports:{}},Hv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,Q){var X=q.length;q.push(Q);t:for(;0<X;){var ft=X-1>>>1,vt=q[ft];if(0<s(vt,Q))q[ft]=Q,q[X]=vt,X=ft;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Q=q[0],X=q.pop();if(X!==Q){q[0]=X;t:for(var ft=0,vt=q.length,Re=vt>>>1;ft<Re;){var Gt=2*(ft+1)-1,pt=q[Gt],Le=Gt+1,ee=q[Le];if(0>s(pt,X))Le<vt&&0>s(ee,pt)?(q[ft]=ee,q[Le]=X,ft=Le):(q[ft]=pt,q[Gt]=X,ft=Gt);else if(Le<vt&&0>s(ee,X))q[ft]=ee,q[Le]=X,ft=Le;else break t}}return Q}function s(q,Q){var X=q.sortIndex-Q.sortIndex;return X!==0?X:q.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,D=!1,V=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function x(q){for(var Q=n(h);Q!==null;){if(Q.callback===null)i(h);else if(Q.startTime<=q)i(h),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(h)}}function L(q){if(V=!1,x(q),!D)if(n(u)!==null)D=!0,B||(B=!0,C());else{var Q=n(h);Q!==null&&we(L,Q.startTime-q)}}var B=!1,T=-1,y=5,E=-1;function b(){return M?!0:!(e.unstable_now()-E<y)}function R(){if(M=!1,B){var q=e.unstable_now();E=q;var Q=!0;try{t:{D=!1,V&&(V=!1,v(T),T=-1),_=!0;var X=m;try{e:{for(x(q),g=n(u);g!==null&&!(g.expirationTime>q&&b());){var ft=g.callback;if(typeof ft=="function"){g.callback=null,m=g.priorityLevel;var vt=ft(g.expirationTime<=q);if(q=e.unstable_now(),typeof vt=="function"){g.callback=vt,x(q),Q=!0;break e}g===n(u)&&i(u),x(q)}else i(u);g=n(u)}if(g!==null)Q=!0;else{var Re=n(h);Re!==null&&we(L,Re.startTime-q),Q=!1}}break t}finally{g=null,m=X,_=!1}Q=void 0}}finally{Q?C():B=!1}}}var C;if(typeof I=="function")C=function(){I(R)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Dt=S.port2;S.port1.onmessage=R,C=function(){Dt.postMessage(null)}}else C=function(){A(R,0)};function we(q,Q){T=A(function(){q(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var X=m;m=Q;try{return q()}finally{m=X}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=m;m=q;try{return Q()}finally{m=X}},e.unstable_scheduleCallback=function(q,Q,X){var ft=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ft+X:ft):X=ft,q){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=X+vt,q={id:d++,callback:Q,priorityLevel:q,startTime:X,expirationTime:vt,sortIndex:-1},X>ft?(q.sortIndex=X,t(h,q),n(u)===null&&q===n(h)&&(V?(v(T),T=-1):V=!0,we(L,X-ft))):(q.sortIndex=vt,t(u,q),D||_||(D=!0,B||(B=!0,C()))),q},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(q){var Q=m;return function(){var X=m;m=Q;try{return q.apply(this,arguments)}finally{m=X}}}})(Hv);qv.exports=Hv;var $b=qv.exports,Gv={exports:{}},xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb=G;function Fv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function vi(){}var De={d:{f:vi,r:function(){throw Error(Fv(522))},D:vi,C:vi,L:vi,m:vi,X:vi,S:vi,M:vi},p:0,findDOMNode:null},Wb=Symbol.for("react.portal");function Jb(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wb,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Za=Zb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=De;xe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Fv(299));return Jb(e,t,null,n)};xe.flushSync=function(e){var t=Za.T,n=De.p;try{if(Za.T=null,De.p=2,e)return e()}finally{Za.T=t,De.p=n,De.d.f()}};xe.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,De.d.C(e,t))};xe.prefetchDNS=function(e){typeof e=="string"&&De.d.D(e)};xe.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=bc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?De.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&De.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};xe.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=bc(t.as,t.crossOrigin);De.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&De.d.M(e)};xe.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=bc(n,t.crossOrigin);De.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};xe.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=bc(t.as,t.crossOrigin);De.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else De.d.m(e)};xe.requestFormReset=function(e){De.d.r(e)};xe.unstable_batchedUpdates=function(e,t){return e(t)};xe.useFormState=function(e,t,n){return Za.H.useFormState(e,t,n)};xe.useFormStatus=function(){return Za.H.useHostTransitionStatus()};xe.version="19.1.1";function Qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qv)}catch(e){console.error(e)}}Qv(),Gv.exports=xe;var t1=Gv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=$b,Yv=G,e1=t1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Kv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pp(e){if(Go(e)!==e)throw Error(U(188))}function n1(e){var t=e.alternate;if(!t){if(t=Go(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Pp(s),e;if(r===i)return Pp(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function $v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=$v(e),t!==null)return t;e=e.sibling}return null}var Nt=Object.assign,i1=Symbol.for("react.element"),Pl=Symbol.for("react.transitional.element"),Ha=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),Zv=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),s1=Symbol.for("react.provider"),Wv=Symbol.for("react.consumer"),Kn=Symbol.for("react.context"),Qd=Symbol.for("react.forward_ref"),vf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Yd=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),Tf=Symbol.for("react.activity"),r1=Symbol.for("react.memo_cache_sentinel"),Up=Symbol.iterator;function ka(e){return e===null||typeof e!="object"?null:(e=Up&&e[Up]||e["@@iterator"],typeof e=="function"?e:null)}var a1=Symbol.for("react.client.reference");function Af(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===a1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fr:return"Fragment";case _f:return"Profiler";case Zv:return"StrictMode";case vf:return"Suspense";case Ef:return"SuspenseList";case Tf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ha:return"Portal";case Kn:return(e.displayName||"Context")+".Provider";case Wv:return(e._context.displayName||"Context")+".Consumer";case Qd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yd:return t=e.displayName||null,t!==null?t:Af(e.type)||"Memo";case Si:t=e._payload,e=e._init;try{return Af(e(t))}catch{}}return null}var Ga=Array.isArray,Z=Yv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt=e1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ws={pending:!1,data:null,method:null,action:null},Sf=[],dr=-1;function Pn(e){return{current:e}}function le(e){0>dr||(e.current=Sf[dr],Sf[dr]=null,dr--)}function Vt(e,t){dr++,Sf[dr]=e.current,e.current=t}var In=Pn(null),Eo=Pn(null),Li=Pn(null),wu=Pn(null);function Ru(e,t){switch(Vt(Li,t),Vt(Eo,e),Vt(In,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?qy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=qy(t),e=g0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(In),Vt(In,e)}function jr(){le(In),le(Eo),le(Li)}function bf(e){e.memoizedState!==null&&Vt(wu,e);var t=In.current,n=g0(t,e.type);t!==n&&(Vt(Eo,e),Vt(In,n))}function Iu(e){Eo.current===e&&(le(In),le(Eo)),wu.current===e&&(le(wu),Do._currentValue=ws)}var wf=Object.prototype.hasOwnProperty,Kd=te.unstable_scheduleCallback,Rh=te.unstable_cancelCallback,o1=te.unstable_shouldYield,l1=te.unstable_requestPaint,Cn=te.unstable_now,u1=te.unstable_getCurrentPriorityLevel,Jv=te.unstable_ImmediatePriority,tE=te.unstable_UserBlockingPriority,Cu=te.unstable_NormalPriority,c1=te.unstable_LowPriority,eE=te.unstable_IdlePriority,h1=te.log,f1=te.unstable_setDisableYieldValue,Fo=null,Ke=null;function Vi(e){if(typeof h1=="function"&&f1(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Fo,e)}catch{}}var Xe=Math.clz32?Math.clz32:g1,d1=Math.log,m1=Math.LN2;function g1(e){return e>>>=0,e===0?32:31-(d1(e)/m1|0)|0}var Ul=256,Ll=4194304;function Es(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Es(i):(a&=l,a!==0?s=Es(a):n||(n=l&~e,n!==0&&(s=Es(n))))):(l=i&~r,l!==0?s=Es(l):a!==0?s=Es(a):n||(n=i&~e,n!==0&&(s=Es(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function Qo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function p1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nE(){var e=Ul;return Ul<<=1,!(Ul&4194048)&&(Ul=256),e}function iE(){var e=Ll;return Ll<<=1,!(Ll&62914560)&&(Ll=4194304),e}function Ih(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function y1(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Xe(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&sE(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function sE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Xe(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function rE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Xe(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Xd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $d(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function aE(){var e=gt.p;return e!==0?e:(e=window.event,e===void 0?32:w0(e.type))}function _1(e,t){var n=gt.p;try{return gt.p=e,t()}finally{gt.p=n}}var us=Math.random().toString(36).slice(2),Ae="__reactFiber$"+us,Pe="__reactProps$"+us,sa="__reactContainer$"+us,Rf="__reactEvents$"+us,v1="__reactListeners$"+us,E1="__reactHandles$"+us,Lp="__reactResources$"+us,Ko="__reactMarker$"+us;function Zd(e){delete e[Ae],delete e[Pe],delete e[Rf],delete e[v1],delete e[E1]}function mr(e){var t=e[Ae];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sa]||n[Ae]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fy(e);e!==null;){if(n=e[Ae])return n;e=Fy(e)}return t}e=n,n=e.parentNode}return null}function ra(e){if(e=e[Ae]||e[sa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Fa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Rr(e){var t=e[Lp];return t||(t=e[Lp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function re(e){e[Ko]=!0}var oE=new Set,lE={};function qs(e,t){zr(e,t),zr(e+"Capture",t)}function zr(e,t){for(lE[e]=t,e=0;e<t.length;e++)oE.add(t[e])}var T1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jp={},zp={};function A1(e){return wf.call(zp,e)?!0:wf.call(jp,e)?!1:T1.test(e)?zp[e]=!0:(jp[e]=!0,!1)}function nu(e,t,n){if(A1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function jl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Gn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Ch,Bp;function rr(e){if(Ch===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ch=t&&t[1]||"",Bp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ch+e+Bp}var Nh=!1;function Dh(e,t){if(!e||Nh)return"";Nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{Nh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rr(n):""}function S1(e){switch(e.tag){case 26:case 27:case 5:return rr(e.type);case 16:return rr("Lazy");case 13:return rr("Suspense");case 19:return rr("SuspenseList");case 0:case 15:return Dh(e.type,!1);case 11:return Dh(e.type.render,!1);case 1:return Dh(e.type,!0);case 31:return rr("Activity");default:return""}}function qp(e){try{var t="";do t+=S1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function b1(e){var t=uE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nu(e){e._valueTracker||(e._valueTracker=b1(e))}function cE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=uE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Du(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var w1=/[\n"\\]/g;function ln(e){return e.replace(w1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function If(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+rn(t)):e.value!==""+rn(t)&&(e.value=""+rn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Cf(e,a,rn(t)):n!=null?Cf(e,a,rn(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+rn(l):e.removeAttribute("name")}function hE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+rn(n):"",t=t!=null?""+rn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Cf(e,t,n){t==="number"&&Du(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ir(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+rn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function fE(e,t,n){if(t!=null&&(t=""+rn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+rn(n):""}function dE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Ga(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=rn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Br(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var R1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||R1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function mE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&Hp(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&Hp(e,r,t[r])}function Wd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),C1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iu(e){return C1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nf=null;function Jd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gr=null,Cr=null;function Gp(e){var t=ra(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;t:switch(e=t.stateNode,t.type){case"input":if(If(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ln(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Pe]||null;if(!s)throw Error(U(90));If(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&cE(i)}break t;case"textarea":fE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Ir(e,!!n.multiple,t,!1)}}}var xh=!1;function gE(e,t,n){if(xh)return e(t,n);xh=!0;try{var i=e(t);return i}finally{if(xh=!1,(gr!==null||Cr!==null)&&(kc(),gr&&(t=gr,e=Cr,Cr=gr=null,Gp(t),e)))for(t=0;t<e.length;t++)Gp(e[t])}}function To(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Pe]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=!1;if(si)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Df=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Df=!1}var Mi=null,tm=null,su=null;function pE(){if(su)return su;var e,t=tm,n=t.length,i,s="value"in Mi?Mi.value:Mi.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return su=s.slice(e,1<i?1-i:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zl(){return!0}function Fp(){return!1}function Ue(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?zl:Fp,this.isPropagationStopped=Fp,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),t}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rc=Ue(Hs),Xo=Nt({},Hs,{view:0,detail:0}),N1=Ue(Xo),Oh,Vh,Ua,Ic=Nt({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:em,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ua&&(Ua&&e.type==="mousemove"?(Oh=e.screenX-Ua.screenX,Vh=e.screenY-Ua.screenY):Vh=Oh=0,Ua=e),Oh)},movementY:function(e){return"movementY"in e?e.movementY:Vh}}),Qp=Ue(Ic),D1=Nt({},Ic,{dataTransfer:0}),x1=Ue(D1),O1=Nt({},Xo,{relatedTarget:0}),Mh=Ue(O1),V1=Nt({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),M1=Ue(V1),k1=Nt({},Hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P1=Ue(k1),U1=Nt({},Hs,{data:0}),Yp=Ue(U1),L1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z1[e])?!!t[e]:!1}function em(){return B1}var q1=Nt({},Xo,{key:function(e){if(e.key){var t=L1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?j1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:em,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H1=Ue(q1),G1=Nt({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kp=Ue(G1),F1=Nt({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:em}),Q1=Ue(F1),Y1=Nt({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),K1=Ue(Y1),X1=Nt({},Ic,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$1=Ue(X1),Z1=Nt({},Hs,{newState:0,oldState:0}),W1=Ue(Z1),J1=[9,13,27,32],nm=si&&"CompositionEvent"in window,Wa=null;si&&"documentMode"in document&&(Wa=document.documentMode);var tw=si&&"TextEvent"in window&&!Wa,yE=si&&(!nm||Wa&&8<Wa&&11>=Wa),Xp=" ",$p=!1;function _E(e,t){switch(e){case"keyup":return J1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pr=!1;function ew(e,t){switch(e){case"compositionend":return vE(t);case"keypress":return t.which!==32?null:($p=!0,Xp);case"textInput":return e=t.data,e===Xp&&$p?null:e;default:return null}}function nw(e,t){if(pr)return e==="compositionend"||!nm&&_E(e,t)?(e=pE(),su=tm=Mi=null,pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yE&&t.locale!=="ko"?null:t.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iw[e.type]:t==="textarea"}function EE(e,t,n,i){gr?Cr?Cr.push(i):Cr=[i]:gr=i,t=Ku(t,"onChange"),0<t.length&&(n=new Rc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ja=null,Ao=null;function sw(e){f0(e,0)}function Cc(e){var t=Fa(e);if(cE(t))return e}function Wp(e,t){if(e==="change")return t}var TE=!1;if(si){var kh;if(si){var Ph="oninput"in document;if(!Ph){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),Ph=typeof Jp.oninput=="function"}kh=Ph}else kh=!1;TE=kh&&(!document.documentMode||9<document.documentMode)}function ty(){Ja&&(Ja.detachEvent("onpropertychange",AE),Ao=Ja=null)}function AE(e){if(e.propertyName==="value"&&Cc(Ao)){var t=[];EE(t,Ao,e,Jd(e)),gE(sw,t)}}function rw(e,t,n){e==="focusin"?(ty(),Ja=t,Ao=n,Ja.attachEvent("onpropertychange",AE)):e==="focusout"&&ty()}function aw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cc(Ao)}function ow(e,t){if(e==="click")return Cc(t)}function lw(e,t){if(e==="input"||e==="change")return Cc(t)}function uw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:uw;function So(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!wf.call(t,s)||!tn(e[s],t[s]))return!1}return!0}function ey(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ny(e,t){var n=ey(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=ey(n)}}function SE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Du(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Du(e.document)}return t}function im(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var cw=si&&"documentMode"in document&&11>=document.documentMode,yr=null,xf=null,to=null,Of=!1;function iy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Of||yr==null||yr!==Du(i)||(i=yr,"selectionStart"in i&&im(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),to&&So(to,i)||(to=i,i=Ku(xf,"onSelect"),0<i.length&&(t=new Rc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=yr)))}function vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Uh={},wE={};si&&(wE=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function Gs(e){if(Uh[e])return Uh[e];if(!_r[e])return e;var t=_r[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wE)return Uh[e]=t[n];return e}var RE=Gs("animationend"),IE=Gs("animationiteration"),CE=Gs("animationstart"),hw=Gs("transitionrun"),fw=Gs("transitionstart"),dw=Gs("transitioncancel"),NE=Gs("transitionend"),DE=new Map,Vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vf.push("scrollEnd");function Tn(e,t){DE.set(e,t),qs(t,[e])}var sy=new WeakMap;function un(e,t){if(typeof e=="object"&&e!==null){var n=sy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:qp(t)},sy.set(e,t),t)}return{value:e,source:t,stack:qp(t)}}var sn=[],vr=0,sm=0;function Nc(){for(var e=vr,t=sm=vr=0;t<e;){var n=sn[t];sn[t++]=null;var i=sn[t];sn[t++]=null;var s=sn[t];sn[t++]=null;var r=sn[t];if(sn[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&xE(n,s,r)}}function Dc(e,t,n,i){sn[vr++]=e,sn[vr++]=t,sn[vr++]=n,sn[vr++]=i,sm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function rm(e,t,n,i){return Dc(e,t,n,i),xu(e)}function aa(e,t){return Dc(e,null,null,t),xu(e)}function xE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-Xe(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function xu(e){if(50<co)throw co=0,td=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Er={};function mw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(e,t,n,i){return new mw(e,t,n,i)}function am(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ei(e,t){var n=e.alternate;return n===null?(n=Fe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function OE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function au(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")am(e)&&(a=1);else if(typeof e=="string")a=pR(e,n,In.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Tf:return e=Fe(31,n,t,s),e.elementType=Tf,e.lanes=r,e;case fr:return Rs(n.children,s,r,t);case Zv:a=8,s|=24;break;case _f:return e=Fe(12,n,t,s|2),e.elementType=_f,e.lanes=r,e;case vf:return e=Fe(13,n,t,s),e.elementType=vf,e.lanes=r,e;case Ef:return e=Fe(19,n,t,s),e.elementType=Ef,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case s1:case Kn:a=10;break t;case Wv:a=9;break t;case Qd:a=11;break t;case Yd:a=14;break t;case Si:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Fe(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function Rs(e,t,n,i){return e=Fe(7,e,i,t),e.lanes=n,e}function Lh(e,t,n){return e=Fe(6,e,null,t),e.lanes=n,e}function jh(e,t,n){return t=Fe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Tr=[],Ar=0,Ou=null,Vu=0,an=[],on=0,Is=null,Xn=1,$n="";function Ts(e,t){Tr[Ar++]=Vu,Tr[Ar++]=Ou,Ou=e,Vu=t}function VE(e,t,n){an[on++]=Xn,an[on++]=$n,an[on++]=Is,Is=e;var i=Xn;e=$n;var s=32-Xe(i)-1;i&=~(1<<s),n+=1;var r=32-Xe(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Xn=1<<32-Xe(t)+s|n<<s|i,$n=r+e}else Xn=1<<r|n<<s|i,$n=e}function om(e){e.return!==null&&(Ts(e,1),VE(e,1,0))}function lm(e){for(;e===Ou;)Ou=Tr[--Ar],Tr[Ar]=null,Vu=Tr[--Ar],Tr[Ar]=null;for(;e===Is;)Is=an[--on],an[on]=null,$n=an[--on],an[on]=null,Xn=an[--on],an[on]=null}var Ce=null,Lt=null,mt=!1,Cs=null,wn=!1,Mf=Error(U(519));function Os(e){var t=Error(U(418,""));throw bo(un(t,e)),Mf}function ry(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ae]=e,t[Pe]=i,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<Io.length;n++)it(Io[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),hE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Nu(t);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),dE(t,i.value,i.defaultValue,i.children),Nu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||m0(t.textContent,n)?(i.popover!=null&&(it("beforetoggle",t),it("toggle",t)),i.onScroll!=null&&it("scroll",t),i.onScrollEnd!=null&&it("scrollend",t),i.onClick!=null&&(t.onclick=Lc),t=!0):t=!1,t||Os(e)}function ay(e){for(Ce=e.return;Ce;)switch(Ce.tag){case 5:case 13:wn=!1;return;case 27:case 3:wn=!0;return;default:Ce=Ce.return}}function La(e){if(e!==Ce)return!1;if(!mt)return ay(e),mt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||ad(e.type,e.memoizedProps)),n=!n),n&&Lt&&Os(e),ay(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Lt=vn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Lt=null}}else t===27?(t=Lt,cs(e.type)?(e=ud,ud=null,Lt=e):Lt=t):Lt=Ce?vn(e.stateNode.nextSibling):null;return!0}function $o(){Lt=Ce=null,mt=!1}function oy(){var e=Cs;return e!==null&&(Me===null?Me=e:Me.push.apply(Me,e),Cs=null),e}function bo(e){Cs===null?Cs=[e]:Cs.push(e)}var kf=Pn(null),Fs=null,Zn=null;function wi(e,t,n){Vt(kf,t._currentValue),t._currentValue=n}function ni(e){e._currentValue=kf.current,le(kf)}function Pf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Uf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Pf(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Pf(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Zo(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;tn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===wu.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Do):e=[Do])}s=s.return}e!==null&&Uf(t,e,n,i),t.flags|=262144}function Mu(e){for(e=e.firstContext;e!==null;){if(!tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vs(e){Fs=e,Zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return ME(Fs,e)}function Bl(e,t){return Fs===null&&Vs(e),ME(e,t)}function ME(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Zn===null){if(e===null)throw Error(U(308));Zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zn=Zn.next=t;return n}var gw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},pw=te.unstable_scheduleCallback,yw=te.unstable_NormalPriority,Zt={$$typeof:Kn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function um(){return{controller:new gw,data:new Map,refCount:0}}function Wo(e){e.refCount--,e.refCount===0&&pw(yw,function(){e.controller.abort()})}var eo=null,Lf=0,qr=0,Nr=null;function _w(e,t){if(eo===null){var n=eo=[];Lf=0,qr=Om(),Nr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Lf++,t.then(ly,ly),t}function ly(){if(--Lf===0&&eo!==null){Nr!==null&&(Nr.status="fulfilled");var e=eo;eo=null,qr=0,Nr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function vw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var uy=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&_w(e,t),uy!==null&&uy(e,t)};var Ns=Pn(null);function cm(){var e=Ns.current;return e!==null?e:Rt.pooledCache}function ou(e,t){t===null?Vt(Ns,Ns.current):Vt(Ns,t.pool)}function kE(){var e=cm();return e===null?null:{parent:Zt._currentValue,pool:e}}var Jo=Error(U(460)),PE=Error(U(474)),xc=Error(U(542)),jf={then:function(){}};function cy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ql(){}function UE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ql,ql),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fy(e),e;default:if(typeof t.status=="string")t.then(ql,ql);else{if(e=Rt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fy(e),e}throw no=t,Jo}}var no=null;function hy(){if(no===null)throw Error(U(459));var e=no;return no=null,e}function fy(e){if(e===Jo||e===xc)throw Error(U(483))}var bi=!1;function hm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ji(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,_t&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=xu(e),xE(e,null,n),t}return Dc(e,i,t,n),xu(e)}function io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,rE(e,n)}}function zh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Bf=!1;function so(){if(Bf){var e=Nr;if(e!==null)throw e}}function ro(e,t,n,i){Bf=!1;var s=e.updateQueue;bi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(ct&m)===m:(i&m)===m){m!==0&&m===qr&&(Bf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(D=V.payload,typeof D=="function"){g=D.call(M,g,m);break t}g=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,m=typeof D=="function"?D.call(M,g,m):D,m==null)break t;g=Nt({},g,m);break t;case 2:bi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=s.callbacks,_===null?s.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),es|=a,e.lanes=a,e.memoizedState=g}}function LE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function jE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)LE(n[e],t)}var Hr=Pn(null),ku=Pn(0);function dy(e,t){e=oi,Vt(ku,e),Vt(Hr,t),oi=e|t.baseLanes}function qf(){Vt(ku,oi),Vt(Hr,Hr.current)}function fm(){oi=ku.current,le(Hr),le(ku)}var Ji=0,nt=null,Tt=null,Qt=null,Pu=!1,Dr=!1,Ms=!1,Uu=0,wo=0,xr=null,Ew=0;function Bt(){throw Error(U(321))}function dm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function mm(e,t,n,i,s,r){return Ji=r,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?pT:yT,Ms=!1,r=n(i,s),Ms=!1,Dr&&(r=BE(t,n,i,s)),zE(e),r}function zE(e){Z.H=Lu;var t=Tt!==null&&Tt.next!==null;if(Ji=0,Qt=Tt=nt=null,Pu=!1,wo=0,xr=null,t)throw Error(U(300));e===null||oe||(e=e.dependencies,e!==null&&Mu(e)&&(oe=!0))}function BE(e,t,n,i){nt=e;var s=0;do{if(Dr&&(xr=null),wo=0,Dr=!1,25<=s)throw Error(U(301));if(s+=1,Qt=Tt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Z.H=Iw,r=t(n,i)}while(Dr);return r}function Tw(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?tl(t):t,e=e.useState()[0],(Tt!==null?Tt.memoizedState:null)!==e&&(nt.flags|=1024),t}function gm(){var e=Uu!==0;return Uu=0,e}function pm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ym(e){if(Pu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Pu=!1}Ji=0,Qt=Tt=nt=null,Dr=!1,wo=Uu=0,xr=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?nt.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function Xt(){if(Tt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=Qt===null?nt.memoizedState:Qt.next;if(t!==null)Qt=t,Tt=e;else{if(e===null)throw nt.alternate===null?Error(U(467)):Error(U(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Qt===null?nt.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function _m(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(e){var t=wo;return wo+=1,xr===null&&(xr=[]),e=UE(xr,e,t),t=nt,(Qt===null?t.memoizedState:Qt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?pT:yT),e}function Oc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tl(e);if(e.$$typeof===Kn)return Se(e)}throw Error(U(438,String(e)))}function vm(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=nt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=_m(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=r1;return t.index++,n}function ri(e,t){return typeof t=="function"?t(e):t}function lu(e){var t=Xt();return Em(t,Tt,e)}function Em(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(ct&g)===g:(Ji&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===qr&&(d=!0);else if((Ji&m)===m){h=h.next,m===qr&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,nt.lanes|=m,es|=m;g=h.action,Ms&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,nt.lanes|=g,es|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!tn(r,e.memoizedState)&&(oe=!0,d&&(n=Nr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Bh(e){var t=Xt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);tn(r,t.memoizedState)||(oe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function qE(e,t,n){var i=nt,s=Xt(),r=mt;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!tn((Tt||s).memoizedState,n);a&&(s.memoizedState=n,oe=!0),s=s.queue;var l=FE.bind(null,i,s,e);if(el(2048,8,l,[e]),s.getSnapshot!==t||a||Qt!==null&&Qt.memoizedState.tag&1){if(i.flags|=2048,Gr(9,Vc(),GE.bind(null,i,s,n,t),null),Rt===null)throw Error(U(349));r||Ji&124||HE(i,t,n)}return n}function HE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=_m(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function GE(e,t,n,i){t.value=n,t.getSnapshot=i,QE(t)&&YE(e)}function FE(e,t,n){return n(function(){QE(t)&&YE(e)})}function QE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function YE(e){var t=aa(e,2);t!==null&&Ze(t,e,2)}function Hf(e){var t=Oe();if(typeof e=="function"){var n=e;if(e=n(),Ms){Vi(!0);try{n()}finally{Vi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:e},t}function KE(e,t,n,i){return e.baseState=n,Em(e,Tt,typeof i=="function"?i:ri)}function Aw(e,t,n,i,s){if(Mc(e))throw Error(U(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};Z.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,XE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function XE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=Z.T,a={};Z.T=a;try{var l=n(s,i),u=Z.S;u!==null&&u(a,l),my(e,t,l)}catch(h){Gf(e,t,h)}finally{Z.T=r}}else try{r=n(s,i),my(e,t,r)}catch(h){Gf(e,t,h)}}function my(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){gy(e,t,i)},function(i){return Gf(e,t,i)}):gy(e,t,n)}function gy(e,t,n){t.status="fulfilled",t.value=n,$E(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,XE(e,n)))}function Gf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,$E(t),t=t.next;while(t!==i)}e.action=null}function $E(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ZE(e,t){return t}function py(e,t){if(mt){var n=Rt.formState;if(n!==null){t:{var i=nt;if(mt){if(Lt){e:{for(var s=Lt,r=wn;s.nodeType!==8;){if(!r){s=null;break e}if(s=vn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Lt=vn(s.nextSibling),i=s.data==="F!";break t}}Os(i)}i=!1}i&&(t=n[0])}}return n=Oe(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZE,lastRenderedState:t},n.queue=i,n=dT.bind(null,nt,i),i.dispatch=n,i=Hf(!1),r=bm.bind(null,nt,!1,i.queue),i=Oe(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=Aw.bind(null,nt,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function yy(e){var t=Xt();return WE(t,Tt,e)}function WE(e,t,n){if(t=Em(e,t,ZE)[0],e=lu(ri)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=tl(t)}catch(a){throw a===Jo?xc:a}else i=t;t=Xt();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,Gr(9,Vc(),Sw.bind(null,s,n),null)),[i,r,e]}function Sw(e,t){e.action=t}function _y(e){var t=Xt(),n=Tt;if(n!==null)return WE(t,n,e);Xt(),t=t.memoizedState,n=Xt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Gr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=nt.updateQueue,t===null&&(t=_m(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Vc(){return{destroy:void 0,resource:void 0}}function JE(){return Xt().memoizedState}function uu(e,t,n,i){var s=Oe();i=i===void 0?null:i,nt.flags|=e,s.memoizedState=Gr(1|t,Vc(),n,i)}function el(e,t,n,i){var s=Xt();i=i===void 0?null:i;var r=s.memoizedState.inst;Tt!==null&&i!==null&&dm(i,Tt.memoizedState.deps)?s.memoizedState=Gr(t,r,n,i):(nt.flags|=e,s.memoizedState=Gr(1|t,r,n,i))}function vy(e,t){uu(8390656,8,e,t)}function tT(e,t){el(2048,8,e,t)}function eT(e,t){return el(4,2,e,t)}function nT(e,t){return el(4,4,e,t)}function iT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sT(e,t,n){n=n!=null?n.concat([e]):null,el(4,4,iT.bind(null,t,e),n)}function Tm(){}function rT(e,t){var n=Xt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&dm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function aT(e,t){var n=Xt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&dm(t,i[1]))return i[0];if(i=e(),Ms){Vi(!0);try{e()}finally{Vi(!1)}}return n.memoizedState=[i,t],i}function Am(e,t,n){return n===void 0||Ji&1073741824?e.memoizedState=t:(e.memoizedState=n,e=$T(),nt.lanes|=e,es|=e,n)}function oT(e,t,n,i){return tn(n,t)?n:Hr.current!==null?(e=Am(e,n,i),tn(e,t)||(oe=!0),e):Ji&42?(e=$T(),nt.lanes|=e,es|=e,t):(oe=!0,e.memoizedState=n)}function lT(e,t,n,i,s){var r=gt.p;gt.p=r!==0&&8>r?r:8;var a=Z.T,l={};Z.T=l,bm(e,!1,t,n);try{var u=s(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=vw(u,i);ao(e,t,d,$e(e))}else ao(e,t,i,$e(e))}catch(g){ao(e,t,{then:function(){},status:"rejected",reason:g},$e())}finally{gt.p=r,Z.T=a}}function bw(){}function Ff(e,t,n,i){if(e.tag!==5)throw Error(U(476));var s=uT(e).queue;lT(e,s,t,ws,n===null?bw:function(){return cT(e),n(i)})}function uT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ws,baseState:ws,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:ws},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cT(e){var t=uT(e).next.queue;ao(e,t,{},$e())}function Sm(){return Se(Do)}function hT(){return Xt().memoizedState}function fT(){return Xt().memoizedState}function ww(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=$e();e=ji(n);var i=zi(t,e,n);i!==null&&(Ze(i,t,n),io(i,t,n)),t={cache:um()},e.payload=t;return}t=t.return}}function Rw(e,t,n){var i=$e();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Mc(e)?mT(t,n):(n=rm(e,t,n,i),n!==null&&(Ze(n,e,i),gT(n,t,i)))}function dT(e,t,n){var i=$e();ao(e,t,n,i)}function ao(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mc(e))mT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,tn(l,a))return Dc(e,t,s,0),Rt===null&&Nc(),!1}catch{}finally{}if(n=rm(e,t,s,i),n!==null)return Ze(n,e,i),gT(n,t,i),!0}return!1}function bm(e,t,n,i){if(i={lane:2,revertLane:Om(),action:i,hasEagerState:!1,eagerState:null,next:null},Mc(e)){if(t)throw Error(U(479))}else t=rm(e,n,i,2),t!==null&&Ze(t,e,2)}function Mc(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function mT(e,t){Dr=Pu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,rE(e,n)}}var Lu={readContext:Se,use:Oc,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},pT={readContext:Se,use:Oc,useCallback:function(e,t){return Oe().memoizedState=[e,t===void 0?null:t],e},useContext:Se,useEffect:vy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,uu(4194308,4,iT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uu(4194308,4,e,t)},useInsertionEffect:function(e,t){uu(4,2,e,t)},useMemo:function(e,t){var n=Oe();t=t===void 0?null:t;var i=e();if(Ms){Vi(!0);try{e()}finally{Vi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Oe();if(n!==void 0){var s=n(t);if(Ms){Vi(!0);try{n(t)}finally{Vi(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=Rw.bind(null,nt,e),[i.memoizedState,e]},useRef:function(e){var t=Oe();return e={current:e},t.memoizedState=e},useState:function(e){e=Hf(e);var t=e.queue,n=dT.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Tm,useDeferredValue:function(e,t){var n=Oe();return Am(n,e,t)},useTransition:function(){var e=Hf(!1);return e=lT.bind(null,nt,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=nt,s=Oe();if(mt){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Rt===null)throw Error(U(349));ct&124||HE(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,vy(FE.bind(null,i,r,e),[e]),i.flags|=2048,Gr(9,Vc(),GE.bind(null,i,r,n,t),null),n},useId:function(){var e=Oe(),t=Rt.identifierPrefix;if(mt){var n=$n,i=Xn;n=(i&~(1<<32-Xe(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Uu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Ew++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Sm,useFormState:py,useActionState:py,useOptimistic:function(e){var t=Oe();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=bm.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:vm,useCacheRefresh:function(){return Oe().memoizedState=ww.bind(null,nt)}},yT={readContext:Se,use:Oc,useCallback:rT,useContext:Se,useEffect:tT,useImperativeHandle:sT,useInsertionEffect:eT,useLayoutEffect:nT,useMemo:aT,useReducer:lu,useRef:JE,useState:function(){return lu(ri)},useDebugValue:Tm,useDeferredValue:function(e,t){var n=Xt();return oT(n,Tt.memoizedState,e,t)},useTransition:function(){var e=lu(ri)[0],t=Xt().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:qE,useId:hT,useHostTransitionStatus:Sm,useFormState:yy,useActionState:yy,useOptimistic:function(e,t){var n=Xt();return KE(n,Tt,e,t)},useMemoCache:vm,useCacheRefresh:fT},Iw={readContext:Se,use:Oc,useCallback:rT,useContext:Se,useEffect:tT,useImperativeHandle:sT,useInsertionEffect:eT,useLayoutEffect:nT,useMemo:aT,useReducer:Bh,useRef:JE,useState:function(){return Bh(ri)},useDebugValue:Tm,useDeferredValue:function(e,t){var n=Xt();return Tt===null?Am(n,e,t):oT(n,Tt.memoizedState,e,t)},useTransition:function(){var e=Bh(ri)[0],t=Xt().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:qE,useId:hT,useHostTransitionStatus:Sm,useFormState:_y,useActionState:_y,useOptimistic:function(e,t){var n=Xt();return Tt!==null?KE(n,Tt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:vm,useCacheRefresh:fT},Or=null,Ro=0;function Hl(e){var t=Ro;return Ro+=1,Or===null&&(Or=[]),UE(Or,e,t)}function ja(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gl(e,t){throw t.$$typeof===i1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ey(e){var t=e._init;return t(e._payload)}function _T(e){function t(A,v){if(e){var I=A.deletions;I===null?(A.deletions=[v],A.flags|=16):I.push(v)}}function n(A,v){if(!e)return null;for(;v!==null;)t(A,v),v=v.sibling;return null}function i(A){for(var v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function s(A,v){return A=ei(A,v),A.index=0,A.sibling=null,A}function r(A,v,I){return A.index=I,e?(I=A.alternate,I!==null?(I=I.index,I<v?(A.flags|=67108866,v):I):(A.flags|=67108866,v)):(A.flags|=1048576,v)}function a(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function l(A,v,I,x){return v===null||v.tag!==6?(v=Lh(I,A.mode,x),v.return=A,v):(v=s(v,I),v.return=A,v)}function u(A,v,I,x){var L=I.type;return L===fr?d(A,v,I.props.children,x,I.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Si&&Ey(L)===v.type)?(v=s(v,I.props),ja(v,I),v.return=A,v):(v=au(I.type,I.key,I.props,null,A.mode,x),ja(v,I),v.return=A,v)}function h(A,v,I,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=jh(I,A.mode,x),v.return=A,v):(v=s(v,I.children||[]),v.return=A,v)}function d(A,v,I,x,L){return v===null||v.tag!==7?(v=Rs(I,A.mode,x,L),v.return=A,v):(v=s(v,I),v.return=A,v)}function g(A,v,I){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Lh(""+v,A.mode,I),v.return=A,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Pl:return I=au(v.type,v.key,v.props,null,A.mode,I),ja(I,v),I.return=A,I;case Ha:return v=jh(v,A.mode,I),v.return=A,v;case Si:var x=v._init;return v=x(v._payload),g(A,v,I)}if(Ga(v)||ka(v))return v=Rs(v,A.mode,I,null),v.return=A,v;if(typeof v.then=="function")return g(A,Hl(v),I);if(v.$$typeof===Kn)return g(A,Bl(A,v),I);Gl(A,v)}return null}function m(A,v,I,x){var L=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return L!==null?null:l(A,v,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Pl:return I.key===L?u(A,v,I,x):null;case Ha:return I.key===L?h(A,v,I,x):null;case Si:return L=I._init,I=L(I._payload),m(A,v,I,x)}if(Ga(I)||ka(I))return L!==null?null:d(A,v,I,x,null);if(typeof I.then=="function")return m(A,v,Hl(I),x);if(I.$$typeof===Kn)return m(A,v,Bl(A,I),x);Gl(A,I)}return null}function _(A,v,I,x,L){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return A=A.get(I)||null,l(v,A,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Pl:return A=A.get(x.key===null?I:x.key)||null,u(v,A,x,L);case Ha:return A=A.get(x.key===null?I:x.key)||null,h(v,A,x,L);case Si:var B=x._init;return x=B(x._payload),_(A,v,I,x,L)}if(Ga(x)||ka(x))return A=A.get(I)||null,d(v,A,x,L,null);if(typeof x.then=="function")return _(A,v,I,Hl(x),L);if(x.$$typeof===Kn)return _(A,v,I,Bl(v,x),L);Gl(v,x)}return null}function D(A,v,I,x){for(var L=null,B=null,T=v,y=v=0,E=null;T!==null&&y<I.length;y++){T.index>y?(E=T,T=null):E=T.sibling;var b=m(A,T,I[y],x);if(b===null){T===null&&(T=E);break}e&&T&&b.alternate===null&&t(A,T),v=r(b,v,y),B===null?L=b:B.sibling=b,B=b,T=E}if(y===I.length)return n(A,T),mt&&Ts(A,y),L;if(T===null){for(;y<I.length;y++)T=g(A,I[y],x),T!==null&&(v=r(T,v,y),B===null?L=T:B.sibling=T,B=T);return mt&&Ts(A,y),L}for(T=i(T);y<I.length;y++)E=_(T,A,y,I[y],x),E!==null&&(e&&E.alternate!==null&&T.delete(E.key===null?y:E.key),v=r(E,v,y),B===null?L=E:B.sibling=E,B=E);return e&&T.forEach(function(R){return t(A,R)}),mt&&Ts(A,y),L}function V(A,v,I,x){if(I==null)throw Error(U(151));for(var L=null,B=null,T=v,y=v=0,E=null,b=I.next();T!==null&&!b.done;y++,b=I.next()){T.index>y?(E=T,T=null):E=T.sibling;var R=m(A,T,b.value,x);if(R===null){T===null&&(T=E);break}e&&T&&R.alternate===null&&t(A,T),v=r(R,v,y),B===null?L=R:B.sibling=R,B=R,T=E}if(b.done)return n(A,T),mt&&Ts(A,y),L;if(T===null){for(;!b.done;y++,b=I.next())b=g(A,b.value,x),b!==null&&(v=r(b,v,y),B===null?L=b:B.sibling=b,B=b);return mt&&Ts(A,y),L}for(T=i(T);!b.done;y++,b=I.next())b=_(T,A,y,b.value,x),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?y:b.key),v=r(b,v,y),B===null?L=b:B.sibling=b,B=b);return e&&T.forEach(function(C){return t(A,C)}),mt&&Ts(A,y),L}function M(A,v,I,x){if(typeof I=="object"&&I!==null&&I.type===fr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Pl:t:{for(var L=I.key;v!==null;){if(v.key===L){if(L=I.type,L===fr){if(v.tag===7){n(A,v.sibling),x=s(v,I.props.children),x.return=A,A=x;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Si&&Ey(L)===v.type){n(A,v.sibling),x=s(v,I.props),ja(x,I),x.return=A,A=x;break t}n(A,v);break}else t(A,v);v=v.sibling}I.type===fr?(x=Rs(I.props.children,A.mode,x,I.key),x.return=A,A=x):(x=au(I.type,I.key,I.props,null,A.mode,x),ja(x,I),x.return=A,A=x)}return a(A);case Ha:t:{for(L=I.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(A,v.sibling),x=s(v,I.children||[]),x.return=A,A=x;break t}else{n(A,v);break}else t(A,v);v=v.sibling}x=jh(I,A.mode,x),x.return=A,A=x}return a(A);case Si:return L=I._init,I=L(I._payload),M(A,v,I,x)}if(Ga(I))return D(A,v,I,x);if(ka(I)){if(L=ka(I),typeof L!="function")throw Error(U(150));return I=L.call(I),V(A,v,I,x)}if(typeof I.then=="function")return M(A,v,Hl(I),x);if(I.$$typeof===Kn)return M(A,v,Bl(A,I),x);Gl(A,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,v!==null&&v.tag===6?(n(A,v.sibling),x=s(v,I),x.return=A,A=x):(n(A,v),x=Lh(I,A.mode,x),x.return=A,A=x),a(A)):n(A,v)}return function(A,v,I,x){try{Ro=0;var L=M(A,v,I,x);return Or=null,L}catch(T){if(T===Jo||T===xc)throw T;var B=Fe(29,T,null,A.mode);return B.lanes=x,B.return=A,B}finally{}}}var Fr=_T(!0),vT=_T(!1),hn=Pn(null),Nn=null;function Ri(e){var t=e.alternate;Vt(Wt,Wt.current&1),Vt(hn,e),Nn===null&&(t===null||Hr.current!==null||t.memoizedState!==null)&&(Nn=e)}function ET(e){if(e.tag===22){if(Vt(Wt,Wt.current),Vt(hn,e),Nn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Nn=e)}}else Ii()}function Ii(){Vt(Wt,Wt.current),Vt(hn,hn.current)}function Wn(e){le(hn),Nn===e&&(Nn=null),le(Wt)}var Wt=Pn(0);function ju(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ld(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=$e(),s=ji(i);s.payload=t,n!=null&&(s.callback=n),t=zi(e,s,i),t!==null&&(Ze(t,e,i),io(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=$e(),s=ji(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=zi(e,s,i),t!==null&&(Ze(t,e,i),io(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$e(),i=ji(n);i.tag=2,t!=null&&(i.callback=t),t=zi(e,i,n),t!==null&&(Ze(t,e,n),io(t,e,n))}};function Ty(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!So(n,i)||!So(s,r):!0}function Ay(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Qf.enqueueReplaceState(t,t.state,null)}function ks(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Nt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var zu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function TT(e){zu(e)}function AT(e){console.error(e)}function ST(e){zu(e)}function Bu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Sy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Yf(e,t,n){return n=ji(n),n.tag=3,n.payload={element:null},n.callback=function(){Bu(e,t)},n}function bT(e){return e=ji(e),e.tag=3,e}function wT(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Sy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Sy(t,n,i),typeof s!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Cw(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Zo(t,n,s,!0),n=hn.current,n!==null){switch(n.tag){case 13:return Nn===null?ed():n.alternate===null&&jt===0&&(jt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===jf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Jh(e,i,s)),!1;case 22:return n.flags|=65536,i===jf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Jh(e,i,s)),!1}throw Error(U(435,n.tag))}return Jh(e,i,s),ed(),!1}if(mt)return t=hn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Mf&&(e=Error(U(422),{cause:i}),bo(un(e,n)))):(i!==Mf&&(t=Error(U(423),{cause:i}),bo(un(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=un(i,n),s=Yf(e.stateNode,i,s),zh(e,s),jt!==4&&(jt=2)),!1;var r=Error(U(520),{cause:i});if(r=un(r,n),uo===null?uo=[r]:uo.push(r),jt!==4&&(jt=2),t===null)return!0;i=un(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Yf(n.stateNode,i,e),zh(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=bT(s),wT(s,e,n,i),zh(n,s),!1}n=n.return}while(n!==null);return!1}var RT=Error(U(461)),oe=!1;function he(e,t,n,i){t.child=e===null?vT(t,null,n,i):Fr(t,e.child,n,i)}function by(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Vs(t),i=mm(e,t,n,a,r,s),l=gm(),e!==null&&!oe?(pm(e,t,s),ai(e,t,s)):(mt&&l&&om(t),t.flags|=1,he(e,t,i,s),t.child)}function wy(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!am(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,IT(e,t,r,i,s)):(e=au(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!wm(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:So,n(a,i)&&e.ref===t.ref)return ai(e,t,s)}return t.flags|=1,e=ei(r,i),e.ref=t.ref,e.return=t,t.child=e}function IT(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(So(r,i)&&e.ref===t.ref)if(oe=!1,t.pendingProps=i=r,wm(e,s))e.flags&131072&&(oe=!0);else return t.lanes=e.lanes,ai(e,t,s)}return Kf(e,t,n,i,s)}function CT(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Ry(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ou(t,r!==null?r.cachePool:null),r!==null?dy(t,r):qf(),ET(t);else return t.lanes=t.childLanes=536870912,Ry(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(ou(t,r.cachePool),dy(t,r),Ii(),t.memoizedState=null):(e!==null&&ou(t,null),qf(),Ii());return he(e,t,s,n),t.child}function Ry(e,t,n,i){var s=cm();return s=s===null?null:{parent:Zt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&ou(t,null),qf(),ET(t),e!==null&&Zo(e,t,i,!0),null}function cu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Kf(e,t,n,i,s){return Vs(t),n=mm(e,t,n,i,void 0,s),i=gm(),e!==null&&!oe?(pm(e,t,s),ai(e,t,s)):(mt&&i&&om(t),t.flags|=1,he(e,t,n,s),t.child)}function Iy(e,t,n,i,s,r){return Vs(t),t.updateQueue=null,n=BE(t,i,n,s),zE(e),i=gm(),e!==null&&!oe?(pm(e,t,r),ai(e,t,r)):(mt&&i&&om(t),t.flags|=1,he(e,t,n,r),t.child)}function Cy(e,t,n,i,s){if(Vs(t),t.stateNode===null){var r=Er,a=n.contextType;typeof a=="object"&&a!==null&&(r=Se(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Qf,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},hm(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?Se(a):Er,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(qh(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Qf.enqueueReplaceState(r,r.state,null),ro(t,i,r,s),so(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=ks(n,l);r.props=u;var h=r.context,d=n.contextType;a=Er,typeof d=="object"&&d!==null&&(a=Se(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&Ay(t,r,i,a),bi=!1;var m=t.memoizedState;r.state=m,ro(t,i,r,s),so(),h=t.memoizedState,l||m!==h||bi?(typeof g=="function"&&(qh(t,n,g,i),h=t.memoizedState),(u=bi||Ty(t,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,zf(e,t),a=t.memoizedProps,d=ks(n,a),r.props=d,g=t.pendingProps,m=r.context,h=n.contextType,u=Er,typeof h=="object"&&h!==null&&(u=Se(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Ay(t,r,i,u),bi=!1,m=t.memoizedState,r.state=m,ro(t,i,r,s),so();var _=t.memoizedState;a!==g||m!==_||bi||e!==null&&e.dependencies!==null&&Mu(e.dependencies)?(typeof l=="function"&&(qh(t,n,l,i),_=t.memoizedState),(d=bi||Ty(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Mu(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),r.props=i,r.state=_,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,cu(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Fr(t,e.child,null,s),t.child=Fr(t,null,n,s)):he(e,t,n,s),t.memoizedState=r.state,e=t.child):e=ai(e,t,s),e}function Ny(e,t,n,i){return $o(),t.flags|=256,he(e,t,n,i),t.child}var Hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(e){return{baseLanes:e,cachePool:kE()}}function Fh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=cn),e}function NT(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(Wt.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(mt){if(s?Ri(t):Ii(),mt){var l=Lt,u;if(u=l){t:{for(u=l,l=wn;u.nodeType!==8;){if(!l){l=null;break t}if(u=vn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Is!==null?{id:Xn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},u=Fe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ce=t,Lt=null,u=!0):u=!1}u||Os(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ld(l)?t.lanes=32:t.lanes=536870912,null;Wn(t)}return l=i.children,i=i.fallback,s?(Ii(),s=t.mode,l=qu({mode:"hidden",children:l},s),i=Rs(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=Gh(n),s.childLanes=Fh(e,a,n),t.memoizedState=Hh,i):(Ri(t),Xf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(Ri(t),t.flags&=-257,t=Qh(e,t,n)):t.memoizedState!==null?(Ii(),t.child=e.child,t.flags|=128,t=null):(Ii(),s=i.fallback,l=t.mode,i=qu({mode:"visible",children:i.children},l),s=Rs(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Fr(t,e.child,null,n),i=t.child,i.memoizedState=Gh(n),i.childLanes=Fh(e,a,n),t.memoizedState=Hh,t=s);else if(Ri(t),ld(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,bo({value:i,source:null,stack:null}),t=Qh(e,t,n)}else if(oe||Zo(e,t,n,!1),a=(n&e.childLanes)!==0,oe||a){if(a=Rt,a!==null&&(i=n&-n,i=i&42?1:Xd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,aa(e,i),Ze(a,e,i),RT;l.data==="$?"||ed(),t=Qh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Lt=vn(l.nextSibling),Ce=t,mt=!0,Cs=null,wn=!1,e!==null&&(an[on++]=Xn,an[on++]=$n,an[on++]=Is,Xn=e.id,$n=e.overflow,Is=t),t=Xf(t,i.children),t.flags|=4096);return t}return s?(Ii(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ei(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=ei(h,s):(s=Rs(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=Gh(n):(u=l.cachePool,u!==null?(h=Zt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=kE(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Fh(e,a,n),t.memoizedState=Hh,i):(Ri(t),n=e.child,e=n.sibling,n=ei(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Xf(e,t){return t=qu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qu(e,t){return e=Fe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qh(e,t,n){return Fr(t,e.child,null,n),e=Xf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Pf(e.return,t,n)}function Yh(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function DT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(he(e,t,i.children,n),i=Wt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dy(e,n,t);else if(e.tag===19)Dy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Vt(Wt,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ju(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yh(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ju(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yh(t,!0,n,null,r);break;case"together":Yh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,!(n&t.childLanes))if(e!==null){if(Zo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=ei(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ei(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Mu(e)))}function Nw(e,t,n){switch(t.tag){case 3:Ru(t,t.stateNode.containerInfo),wi(t,Zt,e.memoizedState.cache),$o();break;case 27:case 5:bf(t);break;case 4:Ru(t,t.stateNode.containerInfo);break;case 10:wi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ri(t),t.flags|=128,null):n&t.child.childLanes?NT(e,t,n):(Ri(t),e=ai(e,t,n),e!==null?e.sibling:null);Ri(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Zo(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return DT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vt(Wt,Wt.current),i)break;return null;case 22:case 23:return t.lanes=0,CT(e,t,n);case 24:wi(t,Zt,e.memoizedState.cache)}return ai(e,t,n)}function xT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)oe=!0;else{if(!wm(e,n)&&!(t.flags&128))return oe=!1,Nw(e,t,n);oe=!!(e.flags&131072)}else oe=!1,mt&&t.flags&1048576&&VE(t,Vu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")am(i)?(e=ks(i,e),t.tag=1,t=Cy(null,t,i,e,n)):(t.tag=0,t=Kf(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Qd){t.tag=11,t=by(null,t,i,e,n);break t}else if(s===Yd){t.tag=14,t=wy(null,t,i,e,n);break t}}throw t=Af(i)||i,Error(U(306,t,""))}}return t;case 0:return Kf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=ks(i,t.pendingProps),Cy(e,t,i,s,n);case 3:t:{if(Ru(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,zf(e,t),ro(t,i,null,n);var a=t.memoizedState;if(i=a.cache,wi(t,Zt,i),i!==r.cache&&Uf(t,[Zt],n,!0),so(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Ny(e,t,i,n);break t}else if(i!==s){s=un(Error(U(424)),t),bo(s),t=Ny(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Lt=vn(e.firstChild),Ce=t,mt=!0,Cs=null,wn=!0,n=vT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if($o(),i===s){t=ai(e,t,n);break t}he(e,t,i,n)}t=t.child}return t;case 26:return cu(e,t),e===null?(n=Yy(t.type,null,t.pendingProps,null))?t.memoizedState=n:mt||(n=t.type,e=t.pendingProps,i=Xu(Li.current).createElement(n),i[Ae]=t,i[Pe]=e,pe(i,n,e),re(i),t.stateNode=i):t.memoizedState=Yy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return bf(t),e===null&&mt&&(i=t.stateNode=y0(t.type,t.pendingProps,Li.current),Ce=t,wn=!0,s=Lt,cs(t.type)?(ud=s,Lt=vn(i.firstChild)):Lt=s),he(e,t,t.pendingProps.children,n),cu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&mt&&((s=i=Lt)&&(i=iR(i,t.type,t.pendingProps,wn),i!==null?(t.stateNode=i,Ce=t,Lt=vn(i.firstChild),wn=!1,s=!0):s=!1),s||Os(t)),bf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,ad(s,r)?i=null:a!==null&&ad(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=mm(e,t,Tw,null,null,n),Do._currentValue=s),cu(e,t),he(e,t,i,n),t.child;case 6:return e===null&&mt&&((e=n=Lt)&&(n=sR(n,t.pendingProps,wn),n!==null?(t.stateNode=n,Ce=t,Lt=null,e=!0):e=!1),e||Os(t)),null;case 13:return NT(e,t,n);case 4:return Ru(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Fr(t,null,i,n):he(e,t,i,n),t.child;case 11:return by(e,t,t.type,t.pendingProps,n);case 7:return he(e,t,t.pendingProps,n),t.child;case 8:return he(e,t,t.pendingProps.children,n),t.child;case 12:return he(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,wi(t,t.type,i.value),he(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Vs(t),s=Se(s),i=i(s),t.flags|=1,he(e,t,i,n),t.child;case 14:return wy(e,t,t.type,t.pendingProps,n);case 15:return IT(e,t,t.type,t.pendingProps,n);case 19:return DT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=qu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ei(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return CT(e,t,n);case 24:return Vs(t),i=Se(Zt),e===null?(s=cm(),s===null&&(s=Rt,r=um(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},hm(t),wi(t,Zt,s)):(e.lanes&n&&(zf(e,t),ro(t,null,null,n),so()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),wi(t,Zt,i)):(i=r.cache,wi(t,Zt,i),i!==s.cache&&Uf(t,[Zt],n,!0))),he(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Fn(e){e.flags|=4}function xy(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!E0(t)){if(t=hn.current,t!==null&&((ct&4194048)===ct?Nn!==null:(ct&62914560)!==ct&&!(ct&536870912)||t!==Nn))throw no=jf,PE;e.flags|=8192}}function Fl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?iE():536870912,e.lanes|=t,Qr|=t)}function za(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Dw(e,t,n){var i=t.pendingProps;switch(lm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return Mt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ni(Zt),jr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(La(t)?Fn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oy())),Mt(t),null;case 26:return n=t.memoizedState,e===null?(Fn(t),n!==null?(Mt(t),xy(t,n)):(Mt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Fn(t),Mt(t),xy(t,n)):(Mt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Fn(t),Mt(t),t.flags&=-16777217),null;case 27:Iu(t),n=Li.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Fn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Mt(t),null}e=In.current,La(t)?ry(t):(e=y0(s,i,n),t.stateNode=e,Fn(t))}return Mt(t),null;case 5:if(Iu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Fn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Mt(t),null}if(e=In.current,La(t))ry(t);else{switch(s=Xu(Li.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Ae]=t,e[Pe]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(pe(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Fn(t)}}return Mt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Fn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Li.current,La(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=Ce,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Ae]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||m0(e.nodeValue,n)),e||Os(t)}else e=Xu(e).createTextNode(i),e[Ae]=t,t.stateNode=e}return Mt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=La(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Ae]=t}else $o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mt(t),s=!1}else s=oy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Wn(t),t):(Wn(t),null)}if(Wn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Fl(t,t.updateQueue),Mt(t),null;case 4:return jr(),e===null&&Vm(t.stateNode.containerInfo),Mt(t),null;case 10:return ni(t.type),Mt(t),null;case 19:if(le(Wt),s=t.memoizedState,s===null)return Mt(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)za(s,!1);else{if(jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=ju(e),r!==null){for(t.flags|=128,za(s,!1),e=r.updateQueue,t.updateQueue=e,Fl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)OE(n,e),n=n.sibling;return Vt(Wt,Wt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Cn()>Gu&&(t.flags|=128,i=!0,za(s,!1),t.lanes=4194304)}else{if(!i)if(e=ju(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Fl(t,e),za(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!mt)return Mt(t),null}else 2*Cn()-s.renderingStartTime>Gu&&n!==536870912&&(t.flags|=128,i=!0,za(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Cn(),t.sibling=null,e=Wt.current,Vt(Wt,i?e&1|2:e&1),t):(Mt(t),null);case 22:case 23:return Wn(t),fm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),n=t.updateQueue,n!==null&&Fl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&le(Ns),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ni(Zt),Mt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function xw(e,t){switch(lm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ni(Zt),jr(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Iu(t),null;case 13:if(Wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));$o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(Wt),null;case 4:return jr(),null;case 10:return ni(t.type),null;case 22:case 23:return Wn(t),fm(),e!==null&&le(Ns),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ni(Zt),null;case 25:return null;default:return null}}function OT(e,t){switch(lm(t),t.tag){case 3:ni(Zt),jr();break;case 26:case 27:case 5:Iu(t);break;case 4:jr();break;case 13:Wn(t);break;case 19:le(Wt);break;case 10:ni(t.type);break;case 22:case 23:Wn(t),fm(),e!==null&&le(Ns);break;case 24:ni(Zt)}}function nl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){wt(t,t.return,l)}}function ts(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(d){wt(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){wt(t,t.return,d)}}function VT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{jE(t,n)}catch(i){wt(e,e.return,i)}}}function MT(e,t,n){n.props=ks(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){wt(e,t,i)}}function oo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){wt(e,t,s)}}function Rn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){wt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){wt(e,t,s)}else n.current=null}function kT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){wt(e,e.return,s)}}function Kh(e,t,n){try{var i=e.stateNode;Ww(i,e.type,n,t),i[Pe]=t}catch(s){wt(e,e.return,s)}}function PT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cs(e.type)||e.tag===4}function Xh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||PT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $f(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Lc));else if(i!==4&&(i===27&&cs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for($f(e,t,n),e=e.sibling;e!==null;)$f(e,t,n),e=e.sibling}function Hu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&cs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Hu(e,t,n),e=e.sibling;e!==null;)Hu(e,t,n),e=e.sibling}function UT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);pe(t,i,n),t[Ae]=e,t[Pe]=n}catch(r){wt(e,e.return,r)}}var Yn=!1,qt=!1,$h=!1,Oy=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ow(e,t){if(e=e.containerInfo,sd=Ju,e=bE(e),im(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},Ju=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){switch(t=se,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var D=ks(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){wt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)od(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}}function LT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ei(e,n),i&4&&nl(5,n);break;case 1:if(Ei(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){wt(n,n.return,a)}else{var s=ks(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){wt(n,n.return,a)}}i&64&&VT(n),i&512&&oo(n,n.return);break;case 3:if(Ei(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{jE(e,t)}catch(a){wt(n,n.return,a)}}break;case 27:t===null&&i&4&&UT(n);case 26:case 5:Ei(e,n),t===null&&i&4&&kT(n),i&512&&oo(n,n.return);break;case 12:Ei(e,n);break;case 13:Ei(e,n),i&4&&BT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Bw.bind(null,n),rR(e,n))));break;case 22:if(i=n.memoizedState!==null||Yn,!i){t=t!==null&&t.memoizedState!==null||qt,s=Yn;var r=qt;Yn=i,(qt=t)&&!r?Ai(e,n,(n.subtreeFlags&8772)!==0):Ei(e,n),Yn=s,qt=r}break;case 30:break;default:Ei(e,n)}}function jT(e){var t=e.alternate;t!==null&&(e.alternate=null,jT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Zd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xt=null,Ve=!1;function Qn(e,t,n){for(n=n.child;n!==null;)zT(e,t,n),n=n.sibling}function zT(e,t,n){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Fo,n)}catch{}switch(n.tag){case 26:qt||Rn(n,t),Qn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qt||Rn(n,t);var i=xt,s=Ve;cs(n.type)&&(xt=n.stateNode,Ve=!1),Qn(e,t,n),ho(n.stateNode),xt=i,Ve=s;break;case 5:qt||Rn(n,t);case 6:if(i=xt,s=Ve,xt=null,Qn(e,t,n),xt=i,Ve=s,xt!==null)if(Ve)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(n.stateNode)}catch(r){wt(n,t,r)}else try{xt.removeChild(n.stateNode)}catch(r){wt(n,t,r)}break;case 18:xt!==null&&(Ve?(e=xt,Gy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Vo(e)):Gy(xt,n.stateNode));break;case 4:i=xt,s=Ve,xt=n.stateNode.containerInfo,Ve=!0,Qn(e,t,n),xt=i,Ve=s;break;case 0:case 11:case 14:case 15:qt||ts(2,n,t),qt||ts(4,n,t),Qn(e,t,n);break;case 1:qt||(Rn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&MT(n,t,i)),Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:qt=(i=qt)||n.memoizedState!==null,Qn(e,t,n),qt=i;break;default:Qn(e,t,n)}}function BT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vo(e)}catch(n){wt(t,t.return,n)}}function Vw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Oy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Oy),t;default:throw Error(U(435,e.tag))}}function Zh(e,t){var n=Vw(e);t.forEach(function(i){var s=qw.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Be(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(cs(l.type)){xt=l.stateNode,Ve=!1;break t}break;case 5:xt=l.stateNode,Ve=!1;break t;case 3:case 4:xt=l.stateNode.containerInfo,Ve=!0;break t}l=l.return}if(xt===null)throw Error(U(160));zT(r,a,s),xt=null,Ve=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)qT(t,e),t=t.sibling}var gn=null;function qT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Be(t,e),qe(e),i&4&&(ts(3,e,e.return),nl(3,e),ts(5,e,e.return));break;case 1:Be(t,e),qe(e),i&512&&(qt||n===null||Rn(n,n.return)),i&64&&Yn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=gn;if(Be(t,e),qe(e),i&512&&(qt||n===null||Rn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[Ko]||r[Ae]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),pe(r,i,n),r[Ae]=e,re(r),i=r;break t;case"link":var a=Xy("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),pe(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Xy("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),pe(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[Ae]=e,re(r),i=r}e.stateNode=i}else $y(s,e.type,e.stateNode);else e.stateNode=Ky(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?$y(s,e.type,e.stateNode):Ky(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Kh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Be(t,e),qe(e),i&512&&(qt||n===null||Rn(n,n.return)),n!==null&&i&4&&Kh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Be(t,e),qe(e),i&512&&(qt||n===null||Rn(n,n.return)),e.flags&32){s=e.stateNode;try{Br(s,"")}catch(_){wt(e,e.return,_)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Kh(e,s,n!==null?n.memoizedProps:s)),i&1024&&($h=!0);break;case 6:if(Be(t,e),qe(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){wt(e,e.return,_)}}break;case 3:if(du=null,s=gn,gn=$u(t.containerInfo),Be(t,e),gn=s,qe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(_){wt(e,e.return,_)}$h&&($h=!1,HT(e));break;case 4:i=gn,gn=$u(e.stateNode.containerInfo),Be(t,e),qe(e),gn=i;break;case 12:Be(t,e),qe(e);break;case 13:Be(t,e),qe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Dm=Cn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Zh(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Yn,d=qt;if(Yn=h||s,qt=d||u,Be(t,e),qt=d,Yn=h,qe(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Yn||qt||As(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){wt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){wt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Zh(e,n))));break;case 19:Be(t,e),qe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Zh(e,i)));break;case 30:break;case 21:break;default:Be(t,e),qe(e)}}function qe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(PT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=Xh(e);Hu(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(Br(a,""),n.flags&=-33);var l=Xh(e);Hu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Xh(e);$f(e,h,u);break;default:throw Error(U(161))}}catch(d){wt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function HT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;HT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ei(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)LT(e,t.alternate,t),t=t.sibling}function As(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ts(4,t,t.return),As(t);break;case 1:Rn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&MT(t,t.return,n),As(t);break;case 27:ho(t.stateNode);case 26:case 5:Rn(t,t.return),As(t);break;case 22:t.memoizedState===null&&As(t);break;case 30:As(t);break;default:As(t)}e=e.sibling}}function Ai(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Ai(s,r,n),nl(4,r);break;case 1:if(Ai(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){wt(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)LE(u[s],l)}catch(h){wt(i,i.return,h)}}n&&a&64&&VT(r),oo(r,r.return);break;case 27:UT(r);case 26:case 5:Ai(s,r,n),n&&i===null&&a&4&&kT(r),oo(r,r.return);break;case 12:Ai(s,r,n);break;case 13:Ai(s,r,n),n&&a&4&&BT(s,r);break;case 22:r.memoizedState===null&&Ai(s,r,n),oo(r,r.return);break;case 30:break;default:Ai(s,r,n)}t=t.sibling}}function Rm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Wo(n))}function Im(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wo(e))}function Sn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)GT(e,t,n,i),t=t.sibling}function GT(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Sn(e,t,n,i),s&2048&&nl(9,t);break;case 1:Sn(e,t,n,i);break;case 3:Sn(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wo(e)));break;case 12:if(s&2048){Sn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){wt(t,t.return,u)}}else Sn(e,t,n,i);break;case 13:Sn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?Sn(e,t,n,i):lo(e,t):r._visibility&2?Sn(e,t,n,i):(r._visibility|=2,ar(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&Rm(a,t);break;case 24:Sn(e,t,n,i),s&2048&&Im(t.alternate,t);break;default:Sn(e,t,n,i)}}function ar(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:ar(r,a,l,u,s),nl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?ar(r,a,l,u,s):lo(r,a):(d._visibility|=2,ar(r,a,l,u,s)),s&&h&2048&&Rm(a.alternate,a);break;case 24:ar(r,a,l,u,s),s&&h&2048&&Im(a.alternate,a);break;default:ar(r,a,l,u,s)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:lo(n,i),s&2048&&Rm(i.alternate,i);break;case 24:lo(n,i),s&2048&&Im(i.alternate,i);break;default:lo(n,i)}t=t.sibling}}var Qa=8192;function nr(e){if(e.subtreeFlags&Qa)for(e=e.child;e!==null;)FT(e),e=e.sibling}function FT(e){switch(e.tag){case 26:nr(e),e.flags&Qa&&e.memoizedState!==null&&_R(gn,e.memoizedState,e.memoizedProps);break;case 5:nr(e);break;case 3:case 4:var t=gn;gn=$u(e.stateNode.containerInfo),nr(e),gn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Qa,Qa=16777216,nr(e),Qa=t):nr(e));break;default:nr(e)}}function QT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ba(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];se=i,KT(i,e)}QT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)YT(e),e=e.sibling}function YT(e){switch(e.tag){case 0:case 11:case 15:Ba(e),e.flags&2048&&ts(9,e,e.return);break;case 3:Ba(e);break;case 12:Ba(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,hu(e)):Ba(e);break;default:Ba(e)}}function hu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];se=i,KT(i,e)}QT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ts(8,t,t.return),hu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,hu(t));break;default:hu(t)}e=e.sibling}}function KT(e,t){for(;se!==null;){var n=se;switch(n.tag){case 0:case 11:case 15:ts(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Wo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,se=i;else t:for(n=e;se!==null;){i=se;var s=i.sibling,r=i.return;if(jT(i),i===n){se=null;break t}if(s!==null){s.return=r,se=s;break t}se=r}}}var Mw={getCacheForType:function(e){var t=Se(Zt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},kw=typeof WeakMap=="function"?WeakMap:Map,_t=0,Rt=null,st=null,ct=0,yt=0,Ge=null,ki=!1,oa=!1,Cm=!1,oi=0,jt=0,es=0,Ds=0,Nm=0,cn=0,Qr=0,uo=null,Me=null,Zf=!1,Dm=0,Gu=1/0,Fu=null,Bi=null,de=0,qi=null,Yr=null,Vr=0,Wf=0,Jf=null,XT=null,co=0,td=null;function $e(){if(_t&2&&ct!==0)return ct&-ct;if(Z.T!==null){var e=qr;return e!==0?e:Om()}return aE()}function $T(){cn===0&&(cn=!(ct&536870912)||mt?nE():536870912);var e=hn.current;return e!==null&&(e.flags|=32),cn}function Ze(e,t,n){(e===Rt&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(Kr(e,0),Pi(e,ct,cn,!1)),Yo(e,n),(!(_t&2)||e!==Rt)&&(e===Rt&&(!(_t&2)&&(Ds|=n),jt===4&&Pi(e,ct,cn,!1)),Un(e))}function ZT(e,t,n){if(_t&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Qo(e,t),s=i?Lw(e,t):Wh(e,t,!0),r=i;do{if(s===0){oa&&!i&&Pi(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Pw(n)){s=Wh(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=uo;var u=l.current.memoizedState.isDehydrated;if(u&&(Kr(l,a).flags|=256),a=Wh(l,a,!1),a!==2){if(Cm&&!u){l.errorRecoveryDisabledLanes|=r,Ds|=r,s=4;break t}r=Me,Me=s,r!==null&&(Me===null?Me=r:Me.push.apply(Me,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Kr(e,0),Pi(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Pi(i,t,cn,!ki);break t;case 2:Me=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(s=Dm+300-Cn(),10<s)){if(Pi(i,t,cn,!ki),wc(i,0,!0)!==0)break t;i.timeoutHandle=p0(Vy.bind(null,i,n,Me,Fu,Zf,t,cn,Ds,Qr,ki,r,2,-0,0),s);break t}Vy(i,n,Me,Fu,Zf,t,cn,Ds,Qr,ki,r,0,-0,0)}}break}while(!0);Un(e)}function Vy(e,t,n,i,s,r,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(No={stylesheets:null,count:0,unsuspend:yR},FT(t),g=vR(),g!==null)){e.cancelPendingCommit=g(ky.bind(null,e,t,r,n,i,s,a,l,u,d,1,m,_)),Pi(e,r,a,!h);return}ky(e,t,r,n,i,s,a,l,u)}function Pw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!tn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pi(e,t,n,i){t&=~Nm,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-Xe(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&sE(e,n,t)}function kc(){return _t&6?!0:(il(0),!1)}function xm(){if(st!==null){if(yt===0)var e=st.return;else e=st,Zn=Fs=null,ym(e),Or=null,Ro=0,e=st;for(;e!==null;)OT(e.alternate,e),e=e.return;st=null}}function Kr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,tR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),xm(),Rt=e,st=n=ei(e.current,null),ct=t,yt=0,Ge=null,ki=!1,oa=Qo(e,t),Cm=!1,Qr=cn=Nm=Ds=es=jt=0,Me=uo=null,Zf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-Xe(i),r=1<<s;t|=e[s],i&=~r}return oi=t,Nc(),n}function WT(e,t){nt=null,Z.H=Lu,t===Jo||t===xc?(t=hy(),yt=3):t===PE?(t=hy(),yt=4):yt=t===RT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ge=t,st===null&&(jt=1,Bu(e,un(t,e.current)))}function JT(){var e=Z.H;return Z.H=Lu,e===null?Lu:e}function t0(){var e=Z.A;return Z.A=Mw,e}function ed(){jt=4,ki||(ct&4194048)!==ct&&hn.current!==null||(oa=!0),!(es&134217727)&&!(Ds&134217727)||Rt===null||Pi(Rt,ct,cn,!1)}function Wh(e,t,n){var i=_t;_t|=2;var s=JT(),r=t0();(Rt!==e||ct!==t)&&(Fu=null,Kr(e,t)),t=!1;var a=jt;t:do try{if(yt!==0&&st!==null){var l=st,u=Ge;switch(yt){case 8:xm(),a=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(t=!0);var h=yt;if(yt=0,Ge=null,Sr(e,l,u,h),n&&oa){a=0;break t}break;default:h=yt,yt=0,Ge=null,Sr(e,l,u,h)}}Uw(),a=jt;break}catch(d){WT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Zn=Fs=null,_t=i,Z.H=s,Z.A=r,st===null&&(Rt=null,ct=0,Nc()),a}function Uw(){for(;st!==null;)e0(st)}function Lw(e,t){var n=_t;_t|=2;var i=JT(),s=t0();Rt!==e||ct!==t?(Fu=null,Gu=Cn()+500,Kr(e,t)):oa=Qo(e,t);t:do try{if(yt!==0&&st!==null){t=st;var r=Ge;e:switch(yt){case 1:yt=0,Ge=null,Sr(e,t,r,1);break;case 2:case 9:if(cy(r)){yt=0,Ge=null,My(t);break}t=function(){yt!==2&&yt!==9||Rt!==e||(yt=7),Un(e)},r.then(t,t);break t;case 3:yt=7;break t;case 4:yt=5;break t;case 7:cy(r)?(yt=0,Ge=null,My(t)):(yt=0,Ge=null,Sr(e,t,r,7));break;case 5:var a=null;switch(st.tag){case 26:a=st.memoizedState;case 5:case 27:var l=st;if(!a||E0(a)){yt=0,Ge=null;var u=l.sibling;if(u!==null)st=u;else{var h=l.return;h!==null?(st=h,Pc(h)):st=null}break e}}yt=0,Ge=null,Sr(e,t,r,5);break;case 6:yt=0,Ge=null,Sr(e,t,r,6);break;case 8:xm(),jt=6;break t;default:throw Error(U(462))}}jw();break}catch(d){WT(e,d)}while(!0);return Zn=Fs=null,Z.H=i,Z.A=s,_t=n,st!==null?0:(Rt=null,ct=0,Nc(),jt)}function jw(){for(;st!==null&&!o1();)e0(st)}function e0(e){var t=xT(e.alternate,e,oi);e.memoizedProps=e.pendingProps,t===null?Pc(e):st=t}function My(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Iy(n,t,t.pendingProps,t.type,void 0,ct);break;case 11:t=Iy(n,t,t.pendingProps,t.type.render,t.ref,ct);break;case 5:ym(t);default:OT(n,t),t=st=OE(t,oi),t=xT(n,t,oi)}e.memoizedProps=e.pendingProps,t===null?Pc(e):st=t}function Sr(e,t,n,i){Zn=Fs=null,ym(t),Or=null,Ro=0;var s=t.return;try{if(Cw(e,s,t,n,ct)){jt=1,Bu(e,un(n,e.current)),st=null;return}}catch(r){if(s!==null)throw st=s,r;jt=1,Bu(e,un(n,e.current)),st=null;return}t.flags&32768?(mt||i===1?e=!0:oa||ct&536870912?e=!1:(ki=e=!0,(i===2||i===9||i===3||i===6)&&(i=hn.current,i!==null&&i.tag===13&&(i.flags|=16384))),n0(t,e)):Pc(t)}function Pc(e){var t=e;do{if(t.flags&32768){n0(t,ki);return}e=t.return;var n=Dw(t.alternate,t,oi);if(n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);jt===0&&(jt=5)}function n0(e,t){do{var n=xw(e.alternate,e);if(n!==null){n.flags&=32767,st=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){st=e;return}st=e=n}while(e!==null);jt=6,st=null}function ky(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do Uc();while(de!==0);if(_t&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(r=t.lanes|t.childLanes,r|=sm,y1(e,n,r,a,l,u),e===Rt&&(st=Rt=null,ct=0),Yr=t,qi=e,Vr=n,Wf=r,Jf=s,XT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Hw(Cu,function(){return o0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,s=gt.p,gt.p=2,a=_t,_t|=4;try{Ow(e,t,n)}finally{_t=a,gt.p=s,Z.T=i}}de=1,i0(),s0(),r0()}}function i0(){if(de===1){de=0;var e=qi,t=Yr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=gt.p;gt.p=2;var s=_t;_t|=4;try{qT(t,e);var r=rd,a=bE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&SE(l.ownerDocument.documentElement,l)){if(u!==null&&im(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),D=l.textContent.length,V=Math.min(u.start,D),M=u.end===void 0?V:Math.min(u.end,D);!_.extend&&V>M&&(a=M,M=V,V=a);var A=ny(l,V),v=ny(l,M);if(A&&v&&(_.rangeCount!==1||_.anchorNode!==A.node||_.anchorOffset!==A.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var I=g.createRange();I.setStart(A.node,A.offset),_.removeAllRanges(),V>M?(_.addRange(I),_.extend(v.node,v.offset)):(I.setEnd(v.node,v.offset),_.addRange(I))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var x=g[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}Ju=!!sd,rd=sd=null}finally{_t=s,gt.p=i,Z.T=n}}e.current=t,de=2}}function s0(){if(de===2){de=0;var e=qi,t=Yr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=gt.p;gt.p=2;var s=_t;_t|=4;try{LT(e,t.alternate,t)}finally{_t=s,gt.p=i,Z.T=n}}de=3}}function r0(){if(de===4||de===3){de=0,l1();var e=qi,t=Yr,n=Vr,i=XT;t.subtreeFlags&10256||t.flags&10256?de=5:(de=0,Yr=qi=null,a0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Bi=null),$d(n),t=t.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,s=gt.p,gt.p=2,Z.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{Z.T=t,gt.p=s}}Vr&3&&Uc(),Un(e),s=e.pendingLanes,n&4194090&&s&42?e===td?co++:(co=0,td=e):co=0,il(0)}}function a0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Wo(t)))}function Uc(e){return i0(),s0(),r0(),o0()}function o0(){if(de!==5)return!1;var e=qi,t=Wf;Wf=0;var n=$d(Vr),i=Z.T,s=gt.p;try{gt.p=32>n?32:n,Z.T=null,n=Jf,Jf=null;var r=qi,a=Vr;if(de=0,Yr=qi=null,Vr=0,_t&6)throw Error(U(331));var l=_t;if(_t|=4,YT(r.current),GT(r,r.current,a,n),_t=l,il(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Fo,r)}catch{}return!0}finally{gt.p=s,Z.T=i,a0(e,t)}}function Py(e,t,n){t=un(n,t),t=Yf(e.stateNode,t,2),e=zi(e,t,2),e!==null&&(Yo(e,2),Un(e))}function wt(e,t,n){if(e.tag===3)Py(e,e,n);else for(;t!==null;){if(t.tag===3){Py(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Bi===null||!Bi.has(i))){e=un(n,e),n=bT(2),i=zi(t,n,2),i!==null&&(wT(n,i,t,e),Yo(i,2),Un(i));break}}t=t.return}}function Jh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new kw;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Cm=!0,s.add(n),e=zw.bind(null,e,t,n),t.then(e,e))}function zw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rt===e&&(ct&n)===n&&(jt===4||jt===3&&(ct&62914560)===ct&&300>Cn()-Dm?!(_t&2)&&Kr(e,0):Nm|=n,Qr===ct&&(Qr=0)),Un(e)}function l0(e,t){t===0&&(t=iE()),e=aa(e,t),e!==null&&(Yo(e,t),Un(e))}function Bw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),l0(e,n)}function qw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),l0(e,n)}function Hw(e,t){return Kd(e,t)}var Qu=null,or=null,nd=!1,Yu=!1,tf=!1,xs=0;function Un(e){e!==or&&e.next===null&&(or===null?Qu=or=e:or=or.next=e),Yu=!0,nd||(nd=!0,Fw())}function il(e,t){if(!tf&&Yu){tf=!0;do for(var n=!1,i=Qu;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Xe(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Uy(i,r))}else r=ct,r=wc(i,i===Rt?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Qo(i,r)||(n=!0,Uy(i,r));i=i.next}while(n);tf=!1}}function Gw(){u0()}function u0(){Yu=nd=!1;var e=0;xs!==0&&(Jw()&&(e=xs),xs=0);for(var t=Cn(),n=null,i=Qu;i!==null;){var s=i.next,r=c0(i,t);r===0?(i.next=null,n===null?Qu=s:n.next=s,s===null&&(or=n)):(n=i,(e!==0||r&3)&&(Yu=!0)),i=s}il(e)}function c0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-Xe(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=p1(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=Rt,n=ct,n=wc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Rh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Qo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Rh(i),$d(n)){case 2:case 8:n=tE;break;case 32:n=Cu;break;case 268435456:n=eE;break;default:n=Cu}return i=h0.bind(null,e),n=Kd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Rh(i),e.callbackPriority=2,e.callbackNode=null,2}function h0(e,t){if(de!==0&&de!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Uc()&&e.callbackNode!==n)return null;var i=ct;return i=wc(e,e===Rt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(ZT(e,i,t),c0(e,Cn()),e.callbackNode!=null&&e.callbackNode===n?h0.bind(null,e):null)}function Uy(e,t){if(Uc())return null;ZT(e,t,!0)}function Fw(){eR(function(){_t&6?Kd(Jv,Gw):u0()})}function Om(){return xs===0&&(xs=nE()),xs}function Ly(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:iu(""+e)}function jy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Qw(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Ly((s[Pe]||null).action),a=i.submitter;a&&(t=(t=a[Pe]||null)?Ly(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Rc("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(xs!==0){var u=a?jy(s,a):new FormData(s);Ff(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?jy(s,a):new FormData(s),Ff(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var ef=0;ef<Vf.length;ef++){var nf=Vf[ef],Yw=nf.toLowerCase(),Kw=nf[0].toUpperCase()+nf.slice(1);Tn(Yw,"on"+Kw)}Tn(RE,"onAnimationEnd");Tn(IE,"onAnimationIteration");Tn(CE,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(hw,"onTransitionRun");Tn(fw,"onTransitionStart");Tn(dw,"onTransitionCancel");Tn(NE,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function f0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){zu(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){zu(d)}s.currentTarget=null,r=u}}}}function it(e,t){var n=t[Rf];n===void 0&&(n=t[Rf]=new Set);var i=e+"__bubble";n.has(i)||(d0(t,e,2,!1),n.add(i))}function sf(e,t,n){var i=0;t&&(i|=4),d0(n,e,i,t)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Vm(e){if(!e[Ql]){e[Ql]=!0,oE.forEach(function(n){n!=="selectionchange"&&(Xw.has(n)||sf(n,!1,e),sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ql]||(t[Ql]=!0,sf("selectionchange",!1,t))}}function d0(e,t,n,i){switch(w0(t)){case 2:var s=AR;break;case 8:s=SR;break;default:s=Um}n=s.bind(null,t,n,e),s=void 0,!Df||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function rf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=mr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}gE(function(){var h=r,d=Jd(n),g=[];t:{var m=DE.get(e);if(m!==void 0){var _=Rc,D=e;switch(e){case"keypress":if(ru(n)===0)break t;case"keydown":case"keyup":_=H1;break;case"focusin":D="focus",_=Mh;break;case"focusout":D="blur",_=Mh;break;case"beforeblur":case"afterblur":_=Mh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=x1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Q1;break;case RE:case IE:case CE:_=M1;break;case NE:_=K1;break;case"scroll":case"scrollend":_=N1;break;case"wheel":_=$1;break;case"copy":case"cut":case"paste":_=P1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Kp;break;case"toggle":case"beforetoggle":_=W1}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),A=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,I;v!==null;){var x=v;if(I=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||I===null||A===null||(x=To(v,A),x!=null&&V.push(Co(v,x,I))),M)break;v=v.return}0<V.length&&(m=new _(m,D,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Nf&&(D=n.relatedTarget||n.fromElement)&&(mr(D)||D[sa]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(D=n.relatedTarget||n.toElement,_=h,D=D?mr(D):null,D!==null&&(M=Go(D),V=D.tag,D!==M||V!==5&&V!==27&&V!==6)&&(D=null)):(_=null,D=h),_!==D)){if(V=Qp,x="onMouseLeave",A="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=Kp,x="onPointerLeave",A="onPointerEnter",v="pointer"),M=_==null?m:Fa(_),I=D==null?m:Fa(D),m=new V(x,v+"leave",_,n,d),m.target=M,m.relatedTarget=I,x=null,mr(d)===h&&(V=new V(A,v+"enter",D,n,d),V.target=I,V.relatedTarget=M,x=V),M=x,_&&D)e:{for(V=_,A=D,v=0,I=V;I;I=ir(I))v++;for(I=0,x=A;x;x=ir(x))I++;for(;0<v-I;)V=ir(V),v--;for(;0<I-v;)A=ir(A),I--;for(;v--;){if(V===A||A!==null&&V===A.alternate)break e;V=ir(V),A=ir(A)}V=null}else V=null;_!==null&&zy(g,m,_,V,!1),D!==null&&M!==null&&zy(g,M,D,V,!0)}}t:{if(m=h?Fa(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Wp;else if(Zp(m))if(TE)L=lw;else{L=aw;var B=rw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Wd(h.elementType)&&(L=Wp):L=ow;if(L&&(L=L(e,h))){EE(g,L,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Cf(m,"number",m.value)}switch(B=h?Fa(h):window,e){case"focusin":(Zp(B)||B.contentEditable==="true")&&(yr=B,xf=h,to=null);break;case"focusout":to=xf=yr=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,iy(g,n,d);break;case"selectionchange":if(cw)break;case"keydown":case"keyup":iy(g,n,d)}var T;if(nm)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else pr?_E(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(yE&&n.locale!=="ko"&&(pr||y!=="onCompositionStart"?y==="onCompositionEnd"&&pr&&(T=pE()):(Mi=d,tm="value"in Mi?Mi.value:Mi.textContent,pr=!0)),B=Ku(h,y),0<B.length&&(y=new Yp(y,e,null,n,d),g.push({event:y,listeners:B}),T?y.data=T:(T=vE(n),T!==null&&(y.data=T)))),(T=tw?ew(e,n):nw(e,n))&&(y=Ku(h,"onBeforeInput"),0<y.length&&(B=new Yp("onBeforeInput","beforeinput",null,n,d),g.push({event:B,listeners:y}),B.data=T)),Qw(g,e,h,n,d)}f0(g,t)})}function Co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ku(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=To(e,n),s!=null&&i.unshift(Co(e,s,r)),s=To(e,t),s!=null&&i.push(Co(e,s,r))),e.tag===3)return i;e=e.return}return[]}function ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zy(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=To(n,r),h!=null&&a.unshift(Co(n,h,u))):s||(h=To(n,r),h!=null&&a.push(Co(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var $w=/\r\n?/g,Zw=/\u0000|\uFFFD/g;function By(e){return(typeof e=="string"?e:""+e).replace($w,`
`).replace(Zw,"")}function m0(e,t){return t=By(t),By(e)===t}function Lc(){}function Et(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Br(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Br(e,""+i);break;case"className":jl(e,"class",i);break;case"tabIndex":jl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":jl(e,n,i);break;case"style":mE(e,i,r);break;case"data":if(t!=="object"){jl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=iu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Et(e,t,"name",s.name,s,null),Et(e,t,"formEncType",s.formEncType,s,null),Et(e,t,"formMethod",s.formMethod,s,null),Et(e,t,"formTarget",s.formTarget,s,null)):(Et(e,t,"encType",s.encType,s,null),Et(e,t,"method",s.method,s,null),Et(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=iu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Lc);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=iu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":it("beforetoggle",e),it("toggle",e),nu(e,"popover",i);break;case"xlinkActuate":Gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Gn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Gn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Gn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Gn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":nu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=I1.get(n)||n,nu(e,n,i))}}function id(e,t,n,i,s,r){switch(n){case"style":mE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Br(e,i):(typeof i=="number"||typeof i=="bigint")&&Br(e,""+i);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[Pe]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):nu(e,n,i)}}}function pe(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Et(e,t,r,a,n,null)}}s&&Et(e,t,"srcSet",n.srcSet,n,null),i&&Et(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:Et(e,t,i,d,n,null)}}hE(e,r,l,u,h,a,s,!1),Nu(e);return;case"select":it("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Et(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Ir(e,!!i,t,!1):n!=null&&Ir(e,!!i,n,!0);return;case"textarea":it("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:Et(e,t,a,l,n,null)}dE(e,i,s,r),Nu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Et(e,t,u,i,n,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(i=0;i<Io.length;i++)it(Io[i],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Et(e,t,h,i,n,null)}return;default:if(Wd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&id(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Et(e,t,l,i,n,null))}function Ww(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Et(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":r=_;break;case"name":s=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&Et(e,t,m,_,i,g)}}If(e,a,l,u,h,d,r,s);return;case"select":_=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Et(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Et(e,t,s,r,i,u)}t=l,n=a,i=_,m!=null?Ir(e,!!n,m,!1):!!i!=!!n&&(t!=null?Ir(e,!!n,t,!0):Ir(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Et(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&Et(e,t,a,s,i,r)}fE(e,m,_);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:Et(e,t,D,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Et(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&Et(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:Et(e,t,h,m,i,_)}return;default:if(Wd(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&id(e,t,M,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||id(e,t,d,m,i,_);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&Et(e,t,A,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||Et(e,t,g,m,i,_)}var sd=null,rd=null;function Xu(e){return e.nodeType===9?e:e.ownerDocument}function qy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ad(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var af=null;function Jw(){var e=window.event;return e&&e.type==="popstate"?e===af?!1:(af=e,!0):(af=null,!1)}var p0=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(e){return Hy.resolve(null).then(e).catch(nR)}:p0;function nR(e){setTimeout(function(){throw e})}function cs(e){return e==="head"}function Gy(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ho(a.documentElement),n&2&&ho(a.body),n&4)for(n=a.head,ho(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Ko]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Vo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Vo(t)}function od(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":od(n),Zd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function iR(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ko])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=vn(e.nextSibling),e===null)break}return null}function sR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=vn(e.nextSibling),e===null))return null;return e}function ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function rR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ud=null;function Fy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function y0(e,t,n){switch(t=Xu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function ho(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Zd(e)}var fn=new Map,Qy=new Set;function $u(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mi=gt.d;gt.d={f:aR,r:oR,D:lR,C:uR,L:cR,m:hR,X:dR,S:fR,M:mR};function aR(){var e=mi.f(),t=kc();return e||t}function oR(e){var t=ra(e);t!==null&&t.tag===5&&t.type==="form"?cT(t):mi.r(e)}var la=typeof document>"u"?null:document;function _0(e,t,n){var i=la;if(i&&typeof t=="string"&&t){var s=ln(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Qy.has(s)||(Qy.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),pe(t,"link",e),re(t),i.head.appendChild(t)))}}function lR(e){mi.D(e),_0("dns-prefetch",e,null)}function uR(e,t){mi.C(e,t),_0("preconnect",e,t)}function cR(e,t,n){mi.L(e,t,n);var i=la;if(i&&e&&t){var s='link[rel="preload"][as="'+ln(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ln(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+ln(n.imageSizes)+'"]')):s+='[href="'+ln(e)+'"]';var r=s;switch(t){case"style":r=Xr(e);break;case"script":r=ua(e)}fn.has(r)||(e=Nt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),fn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(sl(r))||t==="script"&&i.querySelector(rl(r))||(t=i.createElement("link"),pe(t,"link",e),re(t),i.head.appendChild(t)))}}function hR(e,t){mi.m(e,t);var n=la;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+ln(i)+'"][href="'+ln(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ua(e)}if(!fn.has(r)&&(e=Nt({rel:"modulepreload",href:e},t),fn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(rl(r)))return}i=n.createElement("link"),pe(i,"link",e),re(i),n.head.appendChild(i)}}}function fR(e,t,n){mi.S(e,t,n);var i=la;if(i&&e){var s=Rr(i).hoistableStyles,r=Xr(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(sl(r)))l.loading=5;else{e=Nt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=fn.get(r))&&Mm(e,n);var u=a=i.createElement("link");re(u),pe(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,fu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function dR(e,t){mi.X(e,t);var n=la;if(n&&e){var i=Rr(n).hoistableScripts,s=ua(e),r=i.get(s);r||(r=n.querySelector(rl(s)),r||(e=Nt({src:e,async:!0},t),(t=fn.get(s))&&km(e,t),r=n.createElement("script"),re(r),pe(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function mR(e,t){mi.M(e,t);var n=la;if(n&&e){var i=Rr(n).hoistableScripts,s=ua(e),r=i.get(s);r||(r=n.querySelector(rl(s)),r||(e=Nt({src:e,async:!0,type:"module"},t),(t=fn.get(s))&&km(e,t),r=n.createElement("script"),re(r),pe(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Yy(e,t,n,i){var s=(s=Li.current)?$u(s):null;if(!s)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Xr(n.href),n=Rr(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Xr(n.href);var r=Rr(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(sl(e)))&&!r._p&&(a.instance=r,a.state.loading=5),fn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},fn.set(e,n),r||gR(s,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ua(n),n=Rr(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Xr(e){return'href="'+ln(e)+'"'}function sl(e){return'link[rel="stylesheet"]['+e+"]"}function v0(e){return Nt({},e,{"data-precedence":e.precedence,precedence:null})}function gR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),pe(t,"link",n),re(t),e.head.appendChild(t))}function ua(e){return'[src="'+ln(e)+'"]'}function rl(e){return"script[async]"+e}function Ky(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ln(n.href)+'"]');if(i)return t.instance=i,re(i),i;var s=Nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),re(i),pe(i,"style",s),fu(i,n.precedence,e),t.instance=i;case"stylesheet":s=Xr(n.href);var r=e.querySelector(sl(s));if(r)return t.state.loading|=4,t.instance=r,re(r),r;i=v0(n),(s=fn.get(s))&&Mm(i,s),r=(e.ownerDocument||e).createElement("link"),re(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),pe(r,"link",i),t.state.loading|=4,fu(r,n.precedence,e),t.instance=r;case"script":return r=ua(n.src),(s=e.querySelector(rl(r)))?(t.instance=s,re(s),s):(i=n,(s=fn.get(r))&&(i=Nt({},n),km(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),re(s),pe(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,fu(i,n.precedence,e));return t.instance}function fu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Mm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function km(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var du=null;function Xy(e,t,n){if(du===null){var i=new Map,s=du=new Map;s.set(n,i)}else s=du,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[Ko]||r[Ae]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function $y(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function pR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function E0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var No=null;function yR(){}function _R(e,t,n){if(No===null)throw Error(U(475));var i=No;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=Xr(n.href),r=e.querySelector(sl(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Zu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,re(r);return}r=e.ownerDocument||e,n=v0(n),(s=fn.get(s))&&Mm(n,s),r=r.createElement("link"),re(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),pe(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Zu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function vR(){if(No===null)throw Error(U(475));var e=No;return e.stylesheets&&e.count===0&&cd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wu=null;function cd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wu=new Map,t.forEach(ER,e),Wu=null,Zu.call(e))}function ER(e,t){if(!(t.state.loading&4)){var n=Wu.get(e);if(n)var i=n.get(null);else{n=new Map,Wu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Zu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Do={$$typeof:Kn,Provider:null,Consumer:null,_currentValue:ws,_currentValue2:ws,_threadCount:0};function TR(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ih(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.hiddenUpdates=Ih(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function T0(e,t,n,i,s,r,a,l,u,h,d,g){return e=new TR(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=Fe(3,null,null,t),e.current=r,r.stateNode=e,t=um(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},hm(r),e}function A0(e){return e?(e=Er,e):Er}function S0(e,t,n,i,s,r){s=A0(s),i.context===null?i.context=s:i.pendingContext=s,i=ji(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=zi(e,i,t),n!==null&&(Ze(n,e,t),io(n,e,t))}function Zy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pm(e,t){Zy(e,t),(e=e.alternate)&&Zy(e,t)}function b0(e){if(e.tag===13){var t=aa(e,67108864);t!==null&&Ze(t,e,67108864),Pm(e,67108864)}}var Ju=!0;function AR(e,t,n,i){var s=Z.T;Z.T=null;var r=gt.p;try{gt.p=2,Um(e,t,n,i)}finally{gt.p=r,Z.T=s}}function SR(e,t,n,i){var s=Z.T;Z.T=null;var r=gt.p;try{gt.p=8,Um(e,t,n,i)}finally{gt.p=r,Z.T=s}}function Um(e,t,n,i){if(Ju){var s=hd(i);if(s===null)rf(e,t,i,tc,n),Wy(e,i);else if(wR(s,e,t,n,i))i.stopPropagation();else if(Wy(e,i),t&4&&-1<bR.indexOf(e)){for(;s!==null;){var r=ra(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Es(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Xe(a);l.entanglements[1]|=u,a&=~u}Un(r),!(_t&6)&&(Gu=Cn()+500,il(0))}}break;case 13:l=aa(r,2),l!==null&&Ze(l,r,2),kc(),Pm(r,2)}if(r=hd(i),r===null&&rf(e,t,i,tc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else rf(e,t,i,null,n)}}function hd(e){return e=Jd(e),Lm(e)}var tc=null;function Lm(e){if(tc=null,e=mr(e),e!==null){var t=Go(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Xv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tc=e,null}function w0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(u1()){case Jv:return 2;case tE:return 8;case Cu:case c1:return 32;case eE:return 268435456;default:return 32}default:return 32}}var fd=!1,Hi=null,Gi=null,Fi=null,xo=new Map,Oo=new Map,Ci=[],bR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wy(e,t){switch(e){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(t.pointerId)}}function qa(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=ra(t),t!==null&&b0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wR(e,t,n,i,s){switch(t){case"focusin":return Hi=qa(Hi,e,t,n,i,s),!0;case"dragenter":return Gi=qa(Gi,e,t,n,i,s),!0;case"mouseover":return Fi=qa(Fi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return xo.set(r,qa(xo.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Oo.set(r,qa(Oo.get(r)||null,e,t,n,i,s)),!0}return!1}function R0(e){var t=mr(e.target);if(t!==null){var n=Go(t);if(n!==null){if(t=n.tag,t===13){if(t=Xv(n),t!==null){e.blockedOn=t,_1(e.priority,function(){if(n.tag===13){var i=$e();i=Xd(i);var s=aa(n,i);s!==null&&Ze(s,n,i),Pm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Nf=i,n.target.dispatchEvent(i),Nf=null}else return t=ra(n),t!==null&&b0(t),e.blockedOn=n,!1;t.shift()}return!0}function Jy(e,t,n){mu(e)&&n.delete(t)}function RR(){fd=!1,Hi!==null&&mu(Hi)&&(Hi=null),Gi!==null&&mu(Gi)&&(Gi=null),Fi!==null&&mu(Fi)&&(Fi=null),xo.forEach(Jy),Oo.forEach(Jy)}function Yl(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,te.unstable_scheduleCallback(te.unstable_NormalPriority,RR)))}var Kl=null;function t_(e){Kl!==e&&(Kl=e,te.unstable_scheduleCallback(te.unstable_NormalPriority,function(){Kl===e&&(Kl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(Lm(i||n)===null)continue;break}var r=ra(n);r!==null&&(e.splice(t,3),t-=3,Ff(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Vo(e){function t(u){return Yl(u,e)}Hi!==null&&Yl(Hi,e),Gi!==null&&Yl(Gi,e),Fi!==null&&Yl(Fi,e),xo.forEach(t),Oo.forEach(t);for(var n=0;n<Ci.length;n++){var i=Ci[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)R0(n),n.blockedOn===null&&Ci.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Pe]||null;if(typeof r=="function")a||t_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Pe]||null)l=a.formAction;else if(Lm(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),t_(n)}}}function jm(e){this._internalRoot=e}jc.prototype.render=jm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=$e();S0(n,i,e,t,null,null)};jc.prototype.unmount=jm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;S0(e.current,2,null,e,null,null),kc(),t[sa]=null}};function jc(e){this._internalRoot=e}jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=aE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ci.length&&t!==0&&t<Ci[n].priority;n++);Ci.splice(n,0,e),n===0&&R0(e)}};var e_=Yv.version;if(e_!=="19.1.1")throw Error(U(527,e_,"19.1.1"));gt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=n1(t),e=e!==null?$v(e):null,e=e===null?null:e.stateNode,e};var IR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Fo=Xl.inject(IR),Ke=Xl}catch{}}Sc.createRoot=function(e,t){if(!Kv(e))throw Error(U(299));var n=!1,i="",s=TT,r=AT,a=ST,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=T0(e,1,!1,null,null,n,i,s,r,a,l,null),e[sa]=t.current,Vm(e),new jm(t)};Sc.hydrateRoot=function(e,t,n){if(!Kv(e))throw Error(U(299));var i=!1,s="",r=TT,a=AT,l=ST,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=T0(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=A0(null),n=t.current,i=$e(),i=Xd(i),s=ji(i),s.callback=null,zi(n,s,i),n=i,t.current.lanes=n,Yo(t,n),Un(t),e[sa]=t.current,Vm(e),new jc(t)};Sc.version="19.1.1";function I0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I0)}catch(e){console.error(e)}}I0(),Bv.exports=Sc;var CR=Bv.exports;const NR=()=>{};var n_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},DR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},N0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,d=r>>2,g=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):DR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new xR;const m=r<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OR=function(e){const t=C0(e);return N0.encodeByteArray(t,!0)},ec=function(e){return OR(e).replace(/\./g,"")},D0=function(e){try{return N0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>VR().__FIREBASE_DEFAULTS__,kR=()=>{if(typeof process>"u"||typeof n_>"u")return;const e=n_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},PR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&D0(e[1]);return t&&JSON.parse(t)},zc=()=>{try{return NR()||MR()||kR()||PR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},x0=e=>{var t,n;return(n=(t=zc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},UR=e=>{const t=x0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},O0=()=>{var e;return(e=zc())==null?void 0:e.config},V0=e=>{var t;return(t=zc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ec(JSON.stringify(n)),ec(JSON.stringify(a)),""].join(".")}const fo={};function zR(){const e={prod:[],emulator:[]};for(const t of Object.keys(fo))fo[t]?e.emulator.push(t):e.prod.push(t);return e}function BR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let i_=!1;function k0(e,t){if(typeof window>"u"||typeof document>"u"||!ca(window.location.host)||fo[e]===t||fo[e]||i_)return;fo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=zR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{i_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=BR(i),_=n("text"),D=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),A=n("preprendIcon"),v=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;l(I),d(M,V);const x=h();u(v,A),I.append(v,D,M,x),document.body.appendChild(I)}r?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function HR(){var t;const e=(t=zc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function QR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YR(){const e=be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function KR(){return!HR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="FirebaseError";class gi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=ZR,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?WR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new gi(s,l,i)}}function WR(e,t){return e.replace(JR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const JR=/\{\$([^}]+)}/g;function t2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ps(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(s_(r)&&s_(a)){if(!Ps(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function s_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function e2(e,t){const n=new n2(e,t);return n.subscribe.bind(n)}class n2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");i2(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=of),s.error===void 0&&(s.error=of),s.complete===void 0&&(s.complete=of);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(e){return e&&e._delegate?e._delegate:e}class Us{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new LR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(a2(t))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Ss){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ss){return this.instances.has(t)}getOptions(t=Ss){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:r2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ss){return this.component?this.component.multipleInstances?t:Ss:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r2(e){return e===Ss?void 0:e}function a2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new s2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(rt||(rt={}));const l2={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},u2=rt.INFO,c2={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},h2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=c2[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zm{constructor(t){this.name=t,this._logLevel=u2,this._logHandler=h2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?l2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const f2=(e,t)=>t.some(n=>e instanceof n);let r_,a_;function d2(){return r_||(r_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m2(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P0=new WeakMap,dd=new WeakMap,U0=new WeakMap,lf=new WeakMap,Bm=new WeakMap;function g2(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Qi(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&P0.set(n,e)}).catch(()=>{}),Bm.set(t,e),t}function p2(e){if(dd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});dd.set(e,t)}let md={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return dd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||U0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function y2(e){md=e(md)}function _2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(uf(this),t,...n);return U0.set(i,t.sort?t.sort():[t]),Qi(i)}:m2().includes(e)?function(...t){return e.apply(uf(this),t),Qi(P0.get(this))}:function(...t){return Qi(e.apply(uf(this),t))}}function v2(e){return typeof e=="function"?_2(e):(e instanceof IDBTransaction&&p2(e),f2(e,d2())?new Proxy(e,md):e)}function Qi(e){if(e instanceof IDBRequest)return g2(e);if(lf.has(e))return lf.get(e);const t=v2(e);return t!==e&&(lf.set(e,t),Bm.set(t,e)),t}const uf=e=>Bm.get(e);function E2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=Qi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Qi(a.result),u.oldVersion,u.newVersion,Qi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const T2=["get","getKey","getAll","getAllKeys","count"],A2=["put","add","delete","clear"],cf=new Map;function o_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cf.get(t))return cf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=A2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||T2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return cf.set(t,r),r}y2(e=>({...e,get:(t,n,i)=>o_(t,n)||e.get(t,n,i),has:(t,n)=>!!o_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function b2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const gd="@firebase/app",l_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new zm("@firebase/app"),w2="@firebase/app-compat",R2="@firebase/analytics-compat",I2="@firebase/analytics",C2="@firebase/app-check-compat",N2="@firebase/app-check",D2="@firebase/auth",x2="@firebase/auth-compat",O2="@firebase/database",V2="@firebase/data-connect",M2="@firebase/database-compat",k2="@firebase/functions",P2="@firebase/functions-compat",U2="@firebase/installations",L2="@firebase/installations-compat",j2="@firebase/messaging",z2="@firebase/messaging-compat",B2="@firebase/performance",q2="@firebase/performance-compat",H2="@firebase/remote-config",G2="@firebase/remote-config-compat",F2="@firebase/storage",Q2="@firebase/storage-compat",Y2="@firebase/firestore",K2="@firebase/ai",X2="@firebase/firestore-compat",$2="firebase",Z2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="[DEFAULT]",W2={[gd]:"fire-core",[w2]:"fire-core-compat",[I2]:"fire-analytics",[R2]:"fire-analytics-compat",[N2]:"fire-app-check",[C2]:"fire-app-check-compat",[D2]:"fire-auth",[x2]:"fire-auth-compat",[O2]:"fire-rtdb",[V2]:"fire-data-connect",[M2]:"fire-rtdb-compat",[k2]:"fire-fn",[P2]:"fire-fn-compat",[U2]:"fire-iid",[L2]:"fire-iid-compat",[j2]:"fire-fcm",[z2]:"fire-fcm-compat",[B2]:"fire-perf",[q2]:"fire-perf-compat",[H2]:"fire-rc",[G2]:"fire-rc-compat",[F2]:"fire-gcs",[Q2]:"fire-gcs-compat",[Y2]:"fire-fst",[X2]:"fire-fst-compat",[K2]:"fire-vertex","fire-js":"fire-js",[$2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,J2=new Map,yd=new Map;function u_(e,t){try{e.container.addComponent(t)}catch(n){li.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $r(e){const t=e.name;if(yd.has(t))return li.debug(`There were multiple attempts to register component ${t}.`),!1;yd.set(t,e);for(const n of nc.values())u_(n,e);for(const n of J2.values())u_(n,e);return!0}function qm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new al("app","Firebase",tI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=Z2;function L0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:pd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Yi.create("bad-app-name",{appName:String(s)});if(n||(n=O0()),!n)throw Yi.create("no-options");const r=nc.get(s);if(r){if(Ps(n,r.options)&&Ps(i,r.config))return r;throw Yi.create("duplicate-app",{appName:s})}const a=new o2(s);for(const u of yd.values())a.addComponent(u);const l=new eI(n,i,a);return nc.set(s,l),l}function j0(e=pd){const t=nc.get(e);if(!t&&e===pd&&O0())return L0();if(!t)throw Yi.create("no-app",{appName:e});return t}function Ki(e,t,n){let i=W2[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),li.warn(a.join(" "));return}$r(new Us(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebase-heartbeat-database",iI=1,Mo="firebase-heartbeat-store";let hf=null;function z0(){return hf||(hf=E2(nI,iI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Yi.create("idb-open",{originalErrorMessage:e.message})})),hf}async function sI(e){try{const n=(await z0()).transaction(Mo),i=await n.objectStore(Mo).get(B0(e));return await n.done,i}catch(t){if(t instanceof gi)li.warn(t.message);else{const n=Yi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});li.warn(n.message)}}}async function c_(e,t){try{const i=(await z0()).transaction(Mo,"readwrite");await i.objectStore(Mo).put(t,B0(e)),await i.done}catch(n){if(n instanceof gi)li.warn(n.message);else{const i=Yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(i.message)}}}function B0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=1024,aI=30;class oI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=h_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>aI){const a=cI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){li.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h_(),{heartbeatsToSend:i,unsentEntries:s}=lI(this._heartbeatsCache.heartbeats),r=ec(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return li.warn(n),""}}}function h_(){return new Date().toISOString().substring(0,10)}function lI(e,t=rI){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),f_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),f_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class uI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return c_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return c_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function f_(e){return ec(JSON.stringify({version:2,heartbeats:e})).length}function cI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(e){$r(new Us("platform-logger",t=>new S2(t),"PRIVATE")),$r(new Us("heartbeat",t=>new oI(t),"PRIVATE")),Ki(gd,l_,e),Ki(gd,l_,"esm2020"),Ki("fire-js","")}hI("");var fI="firebase",dI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki(fI,dI,"app");var d_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xi,q0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function E(){}E.prototype=y.prototype,T.D=y.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(b,R,C){for(var S=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)S[Dt-2]=arguments[Dt];return y.prototype[R].apply(b,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,E){E||(E=0);var b=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)b[R]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(R=0;16>R;++R)b[R]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=T.g[0],E=T.g[1],R=T.g[2];var C=T.g[3],S=y+(C^E&(R^C))+b[0]+3614090360&4294967295;y=E+(S<<7&4294967295|S>>>25),S=C+(R^y&(E^R))+b[1]+3905402710&4294967295,C=y+(S<<12&4294967295|S>>>20),S=R+(E^C&(y^E))+b[2]+606105819&4294967295,R=C+(S<<17&4294967295|S>>>15),S=E+(y^R&(C^y))+b[3]+3250441966&4294967295,E=R+(S<<22&4294967295|S>>>10),S=y+(C^E&(R^C))+b[4]+4118548399&4294967295,y=E+(S<<7&4294967295|S>>>25),S=C+(R^y&(E^R))+b[5]+1200080426&4294967295,C=y+(S<<12&4294967295|S>>>20),S=R+(E^C&(y^E))+b[6]+2821735955&4294967295,R=C+(S<<17&4294967295|S>>>15),S=E+(y^R&(C^y))+b[7]+4249261313&4294967295,E=R+(S<<22&4294967295|S>>>10),S=y+(C^E&(R^C))+b[8]+1770035416&4294967295,y=E+(S<<7&4294967295|S>>>25),S=C+(R^y&(E^R))+b[9]+2336552879&4294967295,C=y+(S<<12&4294967295|S>>>20),S=R+(E^C&(y^E))+b[10]+4294925233&4294967295,R=C+(S<<17&4294967295|S>>>15),S=E+(y^R&(C^y))+b[11]+2304563134&4294967295,E=R+(S<<22&4294967295|S>>>10),S=y+(C^E&(R^C))+b[12]+1804603682&4294967295,y=E+(S<<7&4294967295|S>>>25),S=C+(R^y&(E^R))+b[13]+4254626195&4294967295,C=y+(S<<12&4294967295|S>>>20),S=R+(E^C&(y^E))+b[14]+2792965006&4294967295,R=C+(S<<17&4294967295|S>>>15),S=E+(y^R&(C^y))+b[15]+1236535329&4294967295,E=R+(S<<22&4294967295|S>>>10),S=y+(R^C&(E^R))+b[1]+4129170786&4294967295,y=E+(S<<5&4294967295|S>>>27),S=C+(E^R&(y^E))+b[6]+3225465664&4294967295,C=y+(S<<9&4294967295|S>>>23),S=R+(y^E&(C^y))+b[11]+643717713&4294967295,R=C+(S<<14&4294967295|S>>>18),S=E+(C^y&(R^C))+b[0]+3921069994&4294967295,E=R+(S<<20&4294967295|S>>>12),S=y+(R^C&(E^R))+b[5]+3593408605&4294967295,y=E+(S<<5&4294967295|S>>>27),S=C+(E^R&(y^E))+b[10]+38016083&4294967295,C=y+(S<<9&4294967295|S>>>23),S=R+(y^E&(C^y))+b[15]+3634488961&4294967295,R=C+(S<<14&4294967295|S>>>18),S=E+(C^y&(R^C))+b[4]+3889429448&4294967295,E=R+(S<<20&4294967295|S>>>12),S=y+(R^C&(E^R))+b[9]+568446438&4294967295,y=E+(S<<5&4294967295|S>>>27),S=C+(E^R&(y^E))+b[14]+3275163606&4294967295,C=y+(S<<9&4294967295|S>>>23),S=R+(y^E&(C^y))+b[3]+4107603335&4294967295,R=C+(S<<14&4294967295|S>>>18),S=E+(C^y&(R^C))+b[8]+1163531501&4294967295,E=R+(S<<20&4294967295|S>>>12),S=y+(R^C&(E^R))+b[13]+2850285829&4294967295,y=E+(S<<5&4294967295|S>>>27),S=C+(E^R&(y^E))+b[2]+4243563512&4294967295,C=y+(S<<9&4294967295|S>>>23),S=R+(y^E&(C^y))+b[7]+1735328473&4294967295,R=C+(S<<14&4294967295|S>>>18),S=E+(C^y&(R^C))+b[12]+2368359562&4294967295,E=R+(S<<20&4294967295|S>>>12),S=y+(E^R^C)+b[5]+4294588738&4294967295,y=E+(S<<4&4294967295|S>>>28),S=C+(y^E^R)+b[8]+2272392833&4294967295,C=y+(S<<11&4294967295|S>>>21),S=R+(C^y^E)+b[11]+1839030562&4294967295,R=C+(S<<16&4294967295|S>>>16),S=E+(R^C^y)+b[14]+4259657740&4294967295,E=R+(S<<23&4294967295|S>>>9),S=y+(E^R^C)+b[1]+2763975236&4294967295,y=E+(S<<4&4294967295|S>>>28),S=C+(y^E^R)+b[4]+1272893353&4294967295,C=y+(S<<11&4294967295|S>>>21),S=R+(C^y^E)+b[7]+4139469664&4294967295,R=C+(S<<16&4294967295|S>>>16),S=E+(R^C^y)+b[10]+3200236656&4294967295,E=R+(S<<23&4294967295|S>>>9),S=y+(E^R^C)+b[13]+681279174&4294967295,y=E+(S<<4&4294967295|S>>>28),S=C+(y^E^R)+b[0]+3936430074&4294967295,C=y+(S<<11&4294967295|S>>>21),S=R+(C^y^E)+b[3]+3572445317&4294967295,R=C+(S<<16&4294967295|S>>>16),S=E+(R^C^y)+b[6]+76029189&4294967295,E=R+(S<<23&4294967295|S>>>9),S=y+(E^R^C)+b[9]+3654602809&4294967295,y=E+(S<<4&4294967295|S>>>28),S=C+(y^E^R)+b[12]+3873151461&4294967295,C=y+(S<<11&4294967295|S>>>21),S=R+(C^y^E)+b[15]+530742520&4294967295,R=C+(S<<16&4294967295|S>>>16),S=E+(R^C^y)+b[2]+3299628645&4294967295,E=R+(S<<23&4294967295|S>>>9),S=y+(R^(E|~C))+b[0]+4096336452&4294967295,y=E+(S<<6&4294967295|S>>>26),S=C+(E^(y|~R))+b[7]+1126891415&4294967295,C=y+(S<<10&4294967295|S>>>22),S=R+(y^(C|~E))+b[14]+2878612391&4294967295,R=C+(S<<15&4294967295|S>>>17),S=E+(C^(R|~y))+b[5]+4237533241&4294967295,E=R+(S<<21&4294967295|S>>>11),S=y+(R^(E|~C))+b[12]+1700485571&4294967295,y=E+(S<<6&4294967295|S>>>26),S=C+(E^(y|~R))+b[3]+2399980690&4294967295,C=y+(S<<10&4294967295|S>>>22),S=R+(y^(C|~E))+b[10]+4293915773&4294967295,R=C+(S<<15&4294967295|S>>>17),S=E+(C^(R|~y))+b[1]+2240044497&4294967295,E=R+(S<<21&4294967295|S>>>11),S=y+(R^(E|~C))+b[8]+1873313359&4294967295,y=E+(S<<6&4294967295|S>>>26),S=C+(E^(y|~R))+b[15]+4264355552&4294967295,C=y+(S<<10&4294967295|S>>>22),S=R+(y^(C|~E))+b[6]+2734768916&4294967295,R=C+(S<<15&4294967295|S>>>17),S=E+(C^(R|~y))+b[13]+1309151649&4294967295,E=R+(S<<21&4294967295|S>>>11),S=y+(R^(E|~C))+b[4]+4149444226&4294967295,y=E+(S<<6&4294967295|S>>>26),S=C+(E^(y|~R))+b[11]+3174756917&4294967295,C=y+(S<<10&4294967295|S>>>22),S=R+(y^(C|~E))+b[2]+718787259&4294967295,R=C+(S<<15&4294967295|S>>>17),S=E+(C^(R|~y))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+C&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var E=y-this.blockSize,b=this.B,R=this.h,C=0;C<y;){if(R==0)for(;C<=E;)s(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<y;)if(b[R++]=T.charCodeAt(C++),R==this.blockSize){s(this,b),R=0;break}}else for(;C<y;)if(b[R++]=T[C++],R==this.blockSize){s(this,b),R=0;break}}this.h=R,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var E=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=E&255,E/=256;for(this.u(T),T=Array(16),y=E=0;4>y;++y)for(var b=0;32>b;b+=8)T[E++]=this.g[y]>>>b&255;return T};function r(T,y){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=y(T)}function a(T,y){this.h=y;for(var E=[],b=!0,R=T.length-1;0<=R;R--){var C=T[R]|0;b&&C==y||(E[R]=C,b=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?r(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(h(-T));for(var y=[],E=1,b=0;T>=E;b++)y[b]=T/E|0,E*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return M(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(y,8)),b=g,R=0;R<T.length;R+=8){var C=Math.min(8,T.length-R),S=parseInt(T.substring(R,R+C),y);8>C?(C=h(Math.pow(y,C)),b=b.j(C).add(h(S))):(b=b.j(E),b=b.add(h(S)))}return b}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var T=0,y=1,E=0;E<this.g.length;E++){var b=this.i(E);T+=(0<=b?b:4294967296+b)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(V(this))return"-"+M(this).toString(T);for(var y=h(Math.pow(T,6)),E=this,b="";;){var R=x(E,y).g;E=A(E,R.j(y));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=R,D(E))return C+b;for(;6>C.length;)C="0"+C;b=C+b}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=A(this,T),V(T)?-1:D(T)?0:1};function M(T){for(var y=T.g.length,E=[],b=0;b<y;b++)E[b]=~T.g[b];return new a(E,~T.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0,R=0;R<=y;R++){var C=b+(this.i(R)&65535)+(T.i(R)&65535),S=(C>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);b=S>>>16,C&=65535,S&=65535,E[R]=S<<16|C}return new a(E,E[E.length-1]&-2147483648?-1:0)};function A(T,y){return T.add(M(y))}e.j=function(T){if(D(this)||D(T))return g;if(V(this))return V(T)?M(this).j(M(T)):M(M(this).j(T));if(V(T))return M(this.j(M(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,E=[],b=0;b<2*y;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<T.g.length;R++){var C=this.i(b)>>>16,S=this.i(b)&65535,Dt=T.i(R)>>>16,we=T.i(R)&65535;E[2*b+2*R]+=S*we,v(E,2*b+2*R),E[2*b+2*R+1]+=C*we,v(E,2*b+2*R+1),E[2*b+2*R+1]+=S*Dt,v(E,2*b+2*R+1),E[2*b+2*R+2]+=C*Dt,v(E,2*b+2*R+2)}for(b=0;b<y;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=y;b<2*y;b++)E[b]=0;return new a(E,0)};function v(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function I(T,y){this.g=T,this.h=y}function x(T,y){if(D(y))throw Error("division by zero");if(D(T))return new I(g,g);if(V(T))return y=x(M(T),y),new I(M(y.g),M(y.h));if(V(y))return y=x(T,M(y)),new I(M(y.g),y.h);if(30<T.g.length){if(V(T)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var E=m,b=y;0>=b.l(T);)E=L(E),b=L(b);var R=B(E,1),C=B(b,1);for(b=B(b,2),E=B(E,2);!D(b);){var S=C.add(b);0>=S.l(T)&&(R=R.add(E),C=S),b=B(b,1),E=B(E,1)}return y=A(T,R.j(y)),new I(R,y)}for(R=g;0<=T.l(y);){for(E=Math.max(1,Math.floor(T.m()/y.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),C=h(E),S=C.j(y);V(S)||0<S.l(T);)E-=b,C=h(E),S=C.j(y);D(C)&&(C=m),R=R.add(C),T=A(T,S)}return new I(R,T)}e.A=function(T){return x(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)&T.i(b);return new a(E,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)|T.i(b);return new a(E,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)^T.i(b);return new a(E,this.h^T.h)};function L(T){for(var y=T.g.length+1,E=[],b=0;b<y;b++)E[b]=T.i(b)<<1|T.i(b-1)>>>31;return new a(E,T.h)}function B(T,y){var E=y>>5;y%=32;for(var b=T.g.length-E,R=[],C=0;C<b;C++)R[C]=0<y?T.i(C+E)>>>y|T.i(C+E+1)<<32-y:T.i(C+E);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,q0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Xi=a}).apply(typeof d_<"u"?d_:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H0,Ya,G0,gu,_d,F0,Q0,Y0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,O){for(var j=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)j[bt-2]=arguments[bt];return c.prototype[N].apply(p,j)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,O=p.length||0;o.length=N+O;for(let j=0;j<O;j++)o[N+j]=p[j]}else o.push(p)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let O=0;O<E.length;O++)f=E[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function R(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function C(o){l.setTimeout(()=>{throw o},0)}function S(){var o=ft;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Dt{constructor(){this.h=this.g=null}add(c,f){const p=we.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var we=new A(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,X=!1,ft=new Dt,vt=()=>{const o=l.Promise.resolve(void 0);Q=()=>{o.then(Re)}};var Re=()=>{for(var o;o=S();){try{o.h.call(o.g)}catch(f){C(f)}var c=we;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function Gt(){this.s=this.s,this.C=this.C}Gt.prototype.s=!1,Gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function ee(o,c){if(pt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Xs[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ee.aa.h.call(this)}}D(ee,pt);var Xs={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),_a=0;function $s(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++_a,this.da=this.fa=!1}function dn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ln(o){this.src=o,this.g={},this.h=0}Ln.prototype.add=function(o,c,f,p,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var j=K(o,c,p,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new $s(c,this.src,O,!!p,N),c.fa=f,o.push(c)),c};function ds(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(p,N,1),O&&(dn(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function K(o,c,f,p){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return N}return-1}var St="closure_lm_"+(1e6*Math.random()|0),nn={};function tt(o,c,f,p,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)tt(o,c[O],f,p,N);return null}return f=va(f),o&&o[en]?o.K(c,f,h(p)?!!p.capture:!1,N):lt(o,c,f,!1,p,N)}function lt(o,c,f,p,N,O){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,bt=je(o);if(bt||(o[St]=bt=new Ln(o)),f=bt.add(c,f,p,j,O),f.proxy)return f;if(p=zt(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Le||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(ms(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function zt(){function o(f){return c.call(o.src,o.listener,f)}const c=An;return o}function Zs(o,c,f,p,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)Zs(o,c[O],f,p,N);else p=h(p)?!!p.capture:!!p,f=va(f),o&&o[en]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=K(O,f,p,N),-1<f&&(dn(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=je(o))&&(c=o.g[c.toString()],o=-1,c&&(o=K(c,f,p,N)),(f=-1<o?c[o]:null)&&jn(f))}function jn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[en])ds(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(ms(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=je(c))?(ds(f,o),f.h==0&&(f.src=null,c[St]=null)):dn(o)}}}function ms(o){return o in nn?nn[o]:nn[o]="on"+o}function An(o,c){if(o.da)o=!0;else{c=new ee(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&jn(o),o=f.call(p,c)}return o}function je(o){return o=o[St],o instanceof Ln?o:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(o){return typeof o=="function"?o:(o[zn]||(o[zn]=function(c){return o.handleEvent(c)}),o[zn])}function ne(){Gt.call(this),this.i=new Ln(this),this.M=this,this.F=null}D(ne,Gt),ne.prototype[en]=!0,ne.prototype.removeEventListener=function(o,c,f,p){Zs(this,o,c,f,p)};function $t(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new pt(c,o);else if(c instanceof pt)c.target=c.target||o;else{var N=c;c=new pt(p,o),b(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var j=c.g=f[O];N=Ea(j,p,!0,c)&&N}if(j=c.g=o,N=Ea(j,p,!0,c)&&N,N=Ea(j,p,!1,c)&&N,f)for(O=0;O<f.length;O++)j=c.g=f[O],N=Ea(j,p,!1,c)&&N}ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)dn(f[p]);delete o.g[c],o.h--}}this.F=null},ne.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ne.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Ea(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var j=c[O];if(j&&!j.da&&j.capture==f){var bt=j.listener,ce=j.ha||j.src;j.fa&&ds(o.i,j),N=bt.call(ce,p)!==!1&&N}}return N&&!p.defaultPrevented}function Ta(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Bn(o){o.g=Ta(()=>{o.g=null,o.i&&(o.i=!1,Bn(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class ob extends Gt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Bn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(o){Gt.call(this),this.h=o,this.g={}}D(Aa,Gt);var Lg=[];function jg(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&jn(c)},o),o.g={}}Aa.prototype.N=function(){Aa.aa.N.call(this),jg(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uh=l.JSON.stringify,lb=l.JSON.parse,ub=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ch(){}ch.prototype.h=null;function zg(o){return o.h||(o.h=o.i())}function Bg(){}var Sa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hh(){pt.call(this,"d")}D(hh,pt);function fh(){pt.call(this,"c")}D(fh,pt);var gs={},qg=null;function El(){return qg=qg||new ne}gs.La="serverreachability";function Hg(o){pt.call(this,gs.La,o)}D(Hg,pt);function ba(o){const c=El();$t(c,new Hg(c))}gs.STAT_EVENT="statevent";function Gg(o,c){pt.call(this,gs.STAT_EVENT,o),this.stat=c}D(Gg,pt);function Ie(o){const c=El();$t(c,new Gg(c,o))}gs.Ma="timingevent";function Fg(o,c){pt.call(this,gs.Ma,o),this.size=c}D(Fg,pt);function wa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ra(){this.g=!0}Ra.prototype.xa=function(){this.g=!1};function cb(o,c,f,p,N,O){o.info(function(){if(o.g)if(O)for(var j="",bt=O.split("&"),ce=0;ce<bt.length;ce++){var dt=bt[ce].split("=");if(1<dt.length){var _e=dt[0];dt=dt[1];var ve=_e.split("_");j=2<=ve.length&&ve[1]=="type"?j+(_e+"="+dt+"&"):j+(_e+"=redacted&")}}else j=null;else j=O;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function hb(o,c,f,p,N,O,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+j})}function Ws(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+db(o,f)+(p?" "+p:"")})}function fb(o,c){o.info(function(){return"TIMEOUT: "+c})}Ra.prototype.info=function(){};function db(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return uh(f)}catch{return c}}var Tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dh;function Al(){}D(Al,ch),Al.prototype.g=function(){return new XMLHttpRequest},Al.prototype.i=function(){return{}},dh=new Al;function pi(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var Kg={},mh={};function gh(o,c,f){o.L=1,o.v=Rl(qn(c)),o.m=f,o.P=!0,Xg(o,null)}function Xg(o,c){o.F=Date.now(),Sl(o),o.A=qn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),up(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Yg,o.g=Ip(o.j,f?c:null,!o.m),0<o.O&&(o.M=new ob(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Lg[0]=N.toString()),N=Lg);for(var O=0;O<N.length;O++){var j=tt(f,N[O],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ba(),cb(o.i,o.u,o.A,o.l,o.R,o.m)}pi.prototype.ca=function(o){o=o.target;const c=this.M;c&&Hn(o)==3?c.j():this.Y(o)},pi.prototype.Y=function(o){try{if(o==this.g)t:{const ve=Hn(this.g);var c=this.g.Ba();const er=this.g.Z();if(!(3>ve)&&(ve!=3||this.g&&(this.h.h||this.g.oa()||pp(this.g)))){this.J||ve!=4||c==7||(c==8||0>=er?ba(3):ba(2)),ph(this);var f=this.g.Z();this.X=f;e:if($g(this)){var p=pp(this.g);o="";var N=p.length,O=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),Ia(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,hb(this.i,this.u,this.A,this.l,this.R,ve,f),this.o){if(this.T&&!this.K){e:{if(this.g){var bt,ce=this.g;if((bt=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(bt)){var dt=bt;break e}}dt=null}if(f=dt)Ws(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yh(this,f);else{this.o=!1,this.s=3,Ie(12),ps(this),Ia(this);break t}}if(this.P){f=!0;let mn;for(;!this.J&&this.C<j.length;)if(mn=mb(this,j),mn==mh){ve==4&&(this.s=4,Ie(14),f=!1),Ws(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Kg){this.s=4,Ie(15),Ws(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Ws(this.i,this.l,mn,null),yh(this,mn);if($g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||j.length!=0||this.h.h||(this.s=1,Ie(16),f=!1),this.o=this.o&&f,!f)Ws(this.i,this.l,j,"[Invalid Chunked Response]"),ps(this),Ia(this);else if(0<j.length&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.ba&&!_e.M&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Sh(_e),_e.M=!0,Ie(11))}}else Ws(this.i,this.l,j,null),yh(this,j);ve==4&&ps(this),this.o&&!this.J&&(ve==4?Sp(this.j,this):(this.o=!1,Sl(this)))}else xb(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),ps(this),Ia(this)}}}catch{}finally{}};function $g(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function mb(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?mh:(f=Number(c.substring(f,p)),isNaN(f)?Kg:(p+=1,p+f>c.length?mh:(c=c.slice(p,p+f),o.C=p+f,c)))}pi.prototype.cancel=function(){this.J=!0,ps(this)};function Sl(o){o.S=Date.now()+o.I,Zg(o,o.I)}function Zg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=wa(m(o.ba,o),c)}function ph(o){o.B&&(l.clearTimeout(o.B),o.B=null)}pi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(fb(this.i,this.A),this.L!=2&&(ba(),Ie(17)),ps(this),this.s=2,Ia(this)):Zg(this,this.S-o)};function Ia(o){o.j.G==0||o.J||Sp(o.j,o)}function ps(o){ph(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,jg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function yh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||_h(f.h,o))){if(!o.K&&_h(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ol(f),Dl(f);else break t;Ah(f),Ie(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=wa(m(f.Za,f),6e3));if(1>=tp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _s(f,11)}else if((o.K||f.g==o)&&Ol(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let dt=N[c];if(f.T=dt[0],dt=dt[1],f.G==2)if(dt[0]=="c"){f.K=dt[1],f.ia=dt[2];const _e=dt[3];_e!=null&&(f.la=_e,f.j.info("VER="+f.la));const ve=dt[4];ve!=null&&(f.Aa=ve,f.j.info("SVER="+f.Aa));const er=dt[5];er!=null&&typeof er=="number"&&0<er&&(p=1.5*er,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const mn=o.g;if(mn){const Ml=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var O=p.h;O.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(vh(O,O.h),O.h=null))}if(p.D){const bh=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;bh&&(p.ya=bh,It(p.I,p.D,bh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=Rp(p,p.J?p.ia:null,p.W),j.K){ep(p.h,j);var bt=j,ce=p.L;ce&&(bt.I=ce),bt.B&&(ph(bt),Sl(bt)),p.g=j}else Tp(p);0<f.i.length&&xl(f)}else dt[0]!="stop"&&dt[0]!="close"||_s(f,7);else f.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?_s(f,7):Th(f):dt[0]!="noop"&&f.l&&f.l.ta(dt),f.v=0)}}ba(4)}catch{}}var gb=class{constructor(o,c){this.g=o,this.map=c}};function Wg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function tp(o){return o.h?1:o.g?o.g.size:0}function _h(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function vh(o,c){o.g?o.g.add(c):o.h=c}function ep(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Wg.prototype.cancel=function(){if(this.i=np(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function np(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function pb(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function yb(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function ip(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=yb(o),p=pb(o),N=p.length,O=0;O<N;O++)c.call(void 0,p[O],f&&f[O],o)}var sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _b(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var O=o[f].substring(0,p);N=o[f].substring(p+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ys(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ys){this.h=o.h,bl(this,o.j),this.o=o.o,this.g=o.g,wl(this,o.s),this.l=o.l;var c=o.i,f=new Da;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),rp(this,f),this.m=o.m}else o&&(c=String(o).match(sp))?(this.h=!1,bl(this,c[1]||"",!0),this.o=Ca(c[2]||""),this.g=Ca(c[3]||"",!0),wl(this,c[4]),this.l=Ca(c[5]||"",!0),rp(this,c[6]||"",!0),this.m=Ca(c[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}ys.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Na(c,ap,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Na(c,ap,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Na(f,f.charAt(0)=="/"?Tb:Eb,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Na(f,Sb)),o.join("")};function qn(o){return new ys(o)}function bl(o,c,f){o.j=f?Ca(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function wl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function rp(o,c,f){c instanceof Da?(o.i=c,bb(o.i,o.h)):(f||(c=Na(c,Ab)),o.i=new Da(c,o.h))}function It(o,c,f){o.i.set(c,f)}function Rl(o){return It(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ca(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Na(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,vb),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function vb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ap=/[#\/\?@]/g,Eb=/[#\?:]/g,Tb=/[#\?]/g,Ab=/[#\?@]/g,Sb=/#/g;function Da(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function yi(o){o.g||(o.g=new Map,o.h=0,o.i&&_b(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Da.prototype,e.add=function(o,c){yi(this),this.i=null,o=Js(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function op(o,c){yi(o),c=Js(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function lp(o,c){return yi(o),c=Js(o,c),o.g.has(c)}e.forEach=function(o,c){yi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){yi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let O=0;O<N.length;O++)f.push(c[p])}return f},e.V=function(o){yi(this);let c=[];if(typeof o=="string")lp(this,o)&&(c=c.concat(this.g.get(Js(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return yi(this),this.i=null,o=Js(this,o),lp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function up(o,c,f){op(o,c),0<f.length&&(o.i=null,o.g.set(Js(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var N=O;j[p]!==""&&(N+="="+encodeURIComponent(String(j[p]))),o.push(N)}}return this.i=o.join("&")};function Js(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function bb(o,c){c&&!o.j&&(yi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(op(this,p),up(this,N,f))},o)),o.j=c}function wb(o,c){const f=new Ra;if(l.Image){const p=new Image;p.onload=_(_i,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(_i,f,"TestLoadImage: error",!1,c,p),p.onabort=_(_i,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(_i,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function Rb(o,c){const f=new Ra,p=new AbortController,N=setTimeout(()=>{p.abort(),_i(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(N),O.ok?_i(f,"TestPingServer: ok",!0,c):_i(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),_i(f,"TestPingServer: error",!1,c)})}function _i(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function Ib(){this.g=new ub}function Cb(o,c,f){const p=f||"";try{ip(o,function(N,O){let j=N;h(N)&&(j=uh(N)),c.push(p+O+"="+encodeURIComponent(j))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Il(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Il,ch),Il.prototype.g=function(){return new Cl(this.l,this.j)},Il.prototype.i=function(o){return function(){return o}}({});function Cl(o,c){ne.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Cl,ne),e=Cl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Oa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function cp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?xa(this):Oa(this),this.readyState==3&&cp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,xa(this))},e.Qa=function(o){this.g&&(this.response=o,xa(this))},e.ga=function(){this.g&&xa(this)};function xa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Oa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Oa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function hp(o){let c="";return B(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Eh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=hp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):It(o,c,f))}function Ut(o){ne.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ut,ne);var Nb=/^https?$/i,Db=["POST","PUT"];e=Ut.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dh.g(),this.v=this.o?zg(this.o):zg(dh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){fp(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Db,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,j]of f)this.g.setRequestHeader(O,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){fp(this,O)}};function fp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,dp(o),Nl(o)}function dp(o){o.A||(o.A=!0,$t(o,"complete"),$t(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,$t(this,"complete"),$t(this,"abort"),Nl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nl(this,!0)),Ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?mp(this):this.bb())},e.bb=function(){mp(this)};function mp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Hn(o)!=4||o.Z()!=2)){if(o.u&&Hn(o)==4)Ta(o.Ea,0,o);else if($t(o,"readystatechange"),Hn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var N=String(o.D).match(sp)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!Nb.test(N?N.toLowerCase():"")}f=p}if(f)$t(o,"complete"),$t(o,"success");else{o.m=6;try{var O=2<Hn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",dp(o)}}finally{Nl(o)}}}}function Nl(o,c){if(o.g){gp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||$t(o,"ready");try{f.onreadystatechange=p}catch{}}}function gp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Hn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),lb(c)}};function pp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function xb(o){const c={};o=(o.g&&2<=Hn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=R(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function yp(o){this.Aa=0,this.i=[],this.j=new Ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,o),this.cb=Va("retryDelaySeedMs",1e4,o),this.Wa=Va("forwardChannelMaxRetries",2,o),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Wg(o&&o.concurrentRequestLimit),this.Da=new Ib,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=yp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ie(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Rp(this,null,this.W),xl(this)};function Th(o){if(_p(o),o.G==3){var c=o.U++,f=qn(o.I);if(It(f,"SID",o.K),It(f,"RID",c),It(f,"TYPE","terminate"),Ma(o,f),c=new pi(o,o.j,c),c.L=2,c.v=Rl(qn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Ip(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Sl(c)}wp(o)}function Dl(o){o.g&&(Sh(o),o.g.cancel(),o.g=null)}function _p(o){Dl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ol(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function xl(o){if(!Jg(o.h)&&!o.s){o.s=!0;var c=o.Ga;Q||vt(),X||(Q(),X=!0),ft.add(c,o),o.B=0}}function Ob(o,c){return tp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=wa(m(o.Ga,o,c),bp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new pi(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=Ep(this,N,c),f=qn(this.I),It(f,"RID",o),It(f,"CVER",22),this.D&&It(f,"X-HTTP-Session-Id",this.D),Ma(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(hp(O)))+"&"+c:this.m&&Eh(f,this.m,O)),vh(this.h,N),this.Ua&&It(f,"TYPE","init"),this.P?(It(f,"$req",c),It(f,"SID","null"),N.T=!0,gh(N,f,null)):gh(N,f,c),this.G=2}}else this.G==3&&(o?vp(this,o):this.i.length==0||Jg(this.h)||vp(this))};function vp(o,c){var f;c?f=c.l:f=o.U++;const p=qn(o.I);It(p,"SID",o.K),It(p,"RID",f),It(p,"AID",o.T),Ma(o,p),o.m&&o.o&&Eh(p,o.m,o.o),f=new pi(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Ep(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),vh(o.h,f),gh(f,p,c)}function Ma(o,c){o.H&&B(o.H,function(f,p){It(c,p,f)}),o.l&&ip({},function(f,p){It(c,p,f)})}function Ep(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const j=["count="+f];O==-1?0<f?(O=N[0].g,j.push("ofs="+O)):O=0:j.push("ofs="+O);let bt=!0;for(let ce=0;ce<f;ce++){let dt=N[ce].g;const _e=N[ce].map;if(dt-=O,0>dt)O=Math.max(0,N[ce].g-100),bt=!1;else try{Cb(_e,j,"req"+dt+"_")}catch{p&&p(_e)}}if(bt){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function Tp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Q||vt(),X||(Q(),X=!0),ft.add(c,o),o.v=0}}function Ah(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=wa(m(o.Fa,o),bp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=wa(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Dl(this),Ap(this))};function Sh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Ap(o){o.g=new pi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=qn(o.qa);It(c,"RID","rpc"),It(c,"SID",o.K),It(c,"AID",o.T),It(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&It(c,"TO",o.ja),It(c,"TYPE","xmlhttp"),Ma(o,c),o.m&&o.o&&Eh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Rl(qn(c)),f.m=null,f.P=!0,Xg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Dl(this),Ah(this),Ie(19))};function Ol(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Sp(o,c){var f=null;if(o.g==c){Ol(o),Sh(o),o.g=null;var p=2}else if(_h(o.h,c))f=c.D,ep(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=El(),$t(p,new Fg(p,f)),xl(o)}else Tp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&Ob(o,c)||p==2&&Ah(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:_s(o,5);break;case 4:_s(o,10);break;case 3:_s(o,6);break;default:_s(o,2)}}}function bp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function _s(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new ys(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bl(p,"https"),Rl(p),N?wb(p.toString(),f):Rb(p.toString(),f)}else Ie(2);o.G=0,o.l&&o.l.sa(c),wp(o),_p(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function wp(o){if(o.G=0,o.ka=[],o.l){const c=np(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Rp(o,c,f){var p=f instanceof ys?qn(f):new ys(f);if(p.g!="")c&&(p.g=c+"."+p.g),wl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new ys(null);p&&bl(O,p),c&&(O.g=c),N&&wl(O,N),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&It(p,f,c),It(p,"VER",o.la),Ma(o,p),p}function Ip(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ut(new Il({eb:f})):new Ut(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cp(){}e=Cp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Vl(){}Vl.prototype.g=function(o,c){return new ze(o,c)};function ze(o,c){ne.call(this),this.g=new yp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new tr(this)}D(ze,ne),ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){Th(this.g)},ze.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=uh(o),o=f);c.i.push(new gb(c.Ya++,o)),c.G==3&&xl(c)},ze.prototype.N=function(){this.g.l=null,delete this.j,Th(this.g),delete this.g,ze.aa.N.call(this)};function Np(o){hh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(Np,hh);function Dp(){fh.call(this),this.status=1}D(Dp,fh);function tr(o){this.g=o}D(tr,Cp),tr.prototype.ua=function(){$t(this.g,"a")},tr.prototype.ta=function(o){$t(this.g,new Np(o))},tr.prototype.sa=function(o){$t(this.g,new Dp)},tr.prototype.ra=function(){$t(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,Y0=function(){return new Vl},Q0=function(){return El()},F0=gs,_d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tl.NO_ERROR=0,Tl.TIMEOUT=8,Tl.HTTP_ERROR=6,gu=Tl,Qg.COMPLETE="complete",G0=Qg,Bg.EventType=Sa,Sa.OPEN="a",Sa.CLOSE="b",Sa.ERROR="c",Sa.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ya=Bg,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,H0=Ut}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});const m_="@firebase/firestore",g_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new zm("@firebase/firestore");function lr(){return Ls.logLevel}function H(e,...t){if(Ls.logLevel<=rt.DEBUG){const n=t.map(Hm);Ls.debug(`Firestore (${fa}): ${e}`,...n)}}function ui(e,...t){if(Ls.logLevel<=rt.ERROR){const n=t.map(Hm);Ls.error(`Firestore (${fa}): ${e}`,...n)}}function Zr(e,...t){if(Ls.logLevel<=rt.WARN){const n=t.map(Hm);Ls.warn(`Firestore (${fa}): ${e}`,...n)}}function Hm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,K0(e,i,n)}function K0(e,t,n){let i=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ui(i),new Error(i)}function ht(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||K0(t,s,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends gi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class mI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Te.UNAUTHENTICATED))}shutdown(){}}class gI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pI{constructor(t){this.t=t,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ht(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ii,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ii)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new X0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string",2055,{h:t}),new Te(t)}}class yI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _I{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new yI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ht(this.o===void 0,3512);const i=r=>{r.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new p_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=EI(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function at(e,t){return e<t?-1:e>t?1:0}function vd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return ff(s)===ff(r)?at(s,r):ff(s)?1:-1}return at(e.length,t.length)}const TI=55296,AI=57343;function ff(e){const t=e.charCodeAt(0);return t>=TI&&t<=AI}function Wr(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__name__";class bn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return bn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof bn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=bn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return at(t.length,n.length)}static compareSegments(t,n){const i=bn.isNumericId(t),s=bn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?bn.extractNumericId(t).compare(bn.extractNumericId(n)):vd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xi.fromString(t.substring(4,t.length-2))}}class At extends bn{construct(t,n,i){return new At(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new At(n)}static emptyPath(){return new At([])}}const SI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class me extends bn{construct(t,n,i){return new me(t,n,i)}static isValidIdentifier(t){return SI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),me.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y_}static keyField(){return new me([y_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new me(n)}static emptyPath(){return new me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.path=t}static fromPath(t){return new F(At.fromString(t))}static fromName(t){return new F(At.fromString(t).popFirst(5))}static empty(){return new F(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&At.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return At.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new F(new At(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bI(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function __(e){if(!F.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function v_(e){if(F.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Z0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Bc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function We(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function ll(e,t){if(!Z0(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=-62135596800,T_=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(t){return Ct.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*T_);return new Ct(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<E_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T_}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ll(t,Ct._jsonSchema))return new Ct(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-E_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Kt("string",Ct._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new Ct(0,0))}static max(){return new $(new Ct(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=-1;function wI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=$.fromTimestamp(i===1e9?new Ct(n+1,0):new Ct(n,i));return new ns(s,F.empty(),t)}function RI(e){return new ns(e.readTime,e.key,ko)}class ns{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ns($.min(),F.empty(),ko)}static max(){return new ns($.max(),F.empty(),ko)}}function II(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=F.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==CI)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function DI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ma(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}qc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function ul(e){return e==null}function ic(e){return e===0&&1/e==-1/0}function xI(e){return typeof e=="number"&&Number.isInteger(e)&&!ic(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="";function OI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=A_(t)),t=VI(e.get(n),t);return A_(t)}function VI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case W0:n+="";break;default:n+=r}}return n}function A_(e){return e+W0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function J0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t,n){this.comparator=t,this.root=n||fe.EMPTY}insert(t,n){return new Pt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fe.BLACK,null,null))}remove(t){return new Pt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zl(this.root,t,this.comparator,!0)}}class Zl{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fe{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??fe.RED,this.left=s??fe.EMPTY,this.right=r??fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new fe(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return fe.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}fe.EMPTY=null,fe.RED=!0,fe.BLACK=!1;fe.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new fe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.comparator=t,this.data=new Pt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new b_(this.data.getIterator())}getIteratorFrom(t){return new b_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Jt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Jt(this.comparator);return n.data=t,n}}class b_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new Ye([])}unionWith(t){let n=new Jt(me.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ye(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wr(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new tA("Invalid base64 string: "+r):r}}(t);return new ye(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new ye(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ye.EMPTY_BYTE_STRING=new ye("");const MI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(e){if(ht(!!e,39018),typeof e=="string"){let t=0;const n=MI.exec(e);if(ht(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ht(e.seconds),nanos:Ht(e.nanos)}}function Ht(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ss(e){return typeof e=="string"?ye.fromBase64String(e):ye.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="server_timestamp",nA="__type__",iA="__previous_value__",sA="__local_write_time__";function Qm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[nA])==null?void 0:i.stringValue)===eA}function Hc(e){const t=e.mapValue.fields[iA];return Qm(t)?Hc(t):t}function Po(e){const t=is(e.mapValue.fields[sA].timestampValue);return new Ct(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,n,i,s,r,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const sc="(default)";class Uo{constructor(t,n){this.projectId=t,this.database=n||sc}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===sc}isEqual(t){return t instanceof Uo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="__type__",PI="__max__",Wl={mapValue:{}},aA="__vector__",rc="value";function rs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qm(e)?4:LI(e)?9007199254740991:UI(e)?10:11:Y(28295,{value:e})}function kn(e,t){if(e===t)return!0;const n=rs(e);if(n!==rs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Po(e).isEqual(Po(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=is(s.timestampValue),l=is(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return ss(s.bytesValue).isEqual(ss(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Ht(s.geoPointValue.latitude)===Ht(r.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ht(s.integerValue)===Ht(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Ht(s.doubleValue),l=Ht(r.doubleValue);return a===l?ic(a)===ic(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Wr(e.arrayValue.values||[],t.arrayValue.values||[],kn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(S_(a)!==S_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!kn(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function Lo(e,t){return(e.values||[]).find(n=>kn(n,t))!==void 0}function Jr(e,t){if(e===t)return 0;const n=rs(e),i=rs(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=Ht(r.integerValue||r.doubleValue),u=Ht(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return w_(e.timestampValue,t.timestampValue);case 4:return w_(Po(e),Po(t));case 5:return vd(e.stringValue,t.stringValue);case 6:return function(r,a){const l=ss(r),u=ss(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=at(l[h],u[h]);if(d!==0)return d}return at(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=at(Ht(r.latitude),Ht(a.latitude));return l!==0?l:at(Ht(r.longitude),Ht(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return R_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var m,_,D,V;const l=r.fields||{},u=a.fields||{},h=(m=l[rc])==null?void 0:m.arrayValue,d=(_=u[rc])==null?void 0:_.arrayValue,g=at(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:R_(h,d)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===Wl.mapValue&&a===Wl.mapValue)return 0;if(r===Wl.mapValue)return 1;if(a===Wl.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=vd(u[g],d[g]);if(m!==0)return m;const _=Jr(l[u[g]],h[d[g]]);if(_!==0)return _}return at(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function w_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=is(e),i=is(t),s=at(n.seconds,i.seconds);return s!==0?s:at(n.nanos,i.nanos)}function R_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Jr(n[s],i[s]);if(r)return r}return at(n.length,i.length)}function ta(e){return Ed(e)}function Ed(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=is(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ss(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return F.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Ed(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Ed(n.fields[a])}`;return s+"}"}(e.mapValue):Y(61005,{value:e})}function pu(e){switch(rs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hc(e);return t?16+pu(t):16;case 5:return 2*e.stringValue.length;case 6:return ss(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+pu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return hs(i.fields,(r,a)=>{s+=r.length+pu(a)}),s}(e.mapValue);default:throw Y(13486,{value:e})}}function I_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Td(e){return!!e&&"integerValue"in e}function Ym(e){return!!e&&"arrayValue"in e}function C_(e){return!!e&&"nullValue"in e}function N_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yu(e){return!!e&&"mapValue"in e}function UI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[rA])==null?void 0:i.stringValue)===aA}function mo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return hs(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=mo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mo(e.arrayValue.values[n]);return t}return{...e}}function LI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===PI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.value=t}static empty(){return new Ne({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!yu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=mo(n)}setAll(t){let n=me.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=mo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return kn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];yu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){hs(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Ne(mo(this.value))}}function oA(e){const t=[];return hs(e.fields,(n,i)=>{const s=new me([n]);if(yu(i)){const r=oA(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new Ye(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,$.min(),$.min(),$.min(),Ne.empty(),0)}static newFoundDocument(t,n,i,s){return new ae(t,1,n,$.min(),i,s,0)}static newNoDocument(t,n){return new ae(t,2,n,$.min(),$.min(),Ne.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,$.min(),$.min(),Ne.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ne.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ne.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,n){this.position=t,this.inclusive=n}}function D_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),n.key):i=Jr(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function x_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!kn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,n="asc"){this.field=t,this.dir=n}}function jI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{}class Yt extends lA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new BI(t,n,i):n==="array-contains"?new GI(t,i):n==="in"?new FI(t,i):n==="not-in"?new QI(t,i):n==="array-contains-any"?new YI(t,i):new Yt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new qI(t,i):new HI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jr(n,this.value)):n!==null&&rs(this.value)===rs(n)&&this.matchesComparison(Jr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends lA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new En(t,n)}matches(t){return uA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uA(e){return e.op==="and"}function cA(e){return zI(e)&&uA(e)}function zI(e){for(const t of e.filters)if(t instanceof En)return!1;return!0}function Ad(e){if(e instanceof Yt)return e.field.canonicalString()+e.op.toString()+ta(e.value);if(cA(e))return e.filters.map(t=>Ad(t)).join(",");{const t=e.filters.map(n=>Ad(n)).join(",");return`${e.op}(${t})`}}function hA(e,t){return e instanceof Yt?function(i,s){return s instanceof Yt&&i.op===s.op&&i.field.isEqual(s.field)&&kn(i.value,s.value)}(e,t):e instanceof En?function(i,s){return s instanceof En&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&hA(a,s.filters[l]),!0):!1}(e,t):void Y(19439)}function fA(e){return e instanceof Yt?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(e):e instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(fA).join(" ,")+"}"}(e):"Filter"}class BI extends Yt{constructor(t,n,i){super(t,n,i),this.key=F.fromName(i.referenceValue)}matches(t){const n=F.comparator(t.key,this.key);return this.matchesComparison(n)}}class qI extends Yt{constructor(t,n){super(t,"in",n),this.keys=dA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class HI extends Yt{constructor(t,n){super(t,"not-in",n),this.keys=dA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function dA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}class GI extends Yt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ym(n)&&Lo(n.arrayValue,this.value)}}class FI extends Yt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class QI extends Yt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lo(this.value.arrayValue,n)}}class YI extends Yt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Lo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function O_(e,t=null,n=[],i=[],s=null,r=null,a=null){return new KI(e,t,n,i,s,r,a)}function Km(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Ad(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ul(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ta(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ta(i)).join(",")),t.Te=n}return t.Te}function Xm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!x_(e.startAt,t.startAt)&&x_(e.endAt,t.endAt)}function Sd(e){return F.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XI(e,t,n,i,s,r,a,l){return new ga(e,t,n,i,s,r,a,l)}function Gc(e){return new ga(e)}function V_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function mA(e){return e.collectionGroup!==null}function go(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Jt(me.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new jo(r,i))}),n.has(me.keyField().canonicalString())||t.Ie.push(new jo(me.keyField(),i))}return t.Ie}function Dn(e){const t=J(e);return t.Ee||(t.Ee=$I(t,go(e))),t.Ee}function $I(e,t){if(e.limitType==="F")return O_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new jo(s.field,r)});const n=e.endAt?new ac(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ac(e.startAt.position,e.startAt.inclusive):null;return O_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function bd(e,t){const n=e.filters.concat([t]);return new ga(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wd(e,t,n){return new ga(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fc(e,t){return Xm(Dn(e),Dn(t))&&e.limitType===t.limitType}function gA(e){return`${Km(Dn(e))}|lt:${e.limitType}`}function ur(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>fA(s)).join(", ")}]`),ul(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ta(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ta(s)).join(",")),`Target(${i})`}(Dn(e))}; limitType=${e.limitType})`}function Qc(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):F.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of go(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=D_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,go(i),s)||i.endAt&&!function(a,l,u){const h=D_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,go(i),s))}(e,t)}function ZI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function pA(e){return(t,n)=>{let i=!1;for(const s of go(e)){const r=WI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function WI(e,t,n){const i=e.field.isKeyField()?F.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?Jr(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){hs(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return J0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new Pt(F.comparator);function ci(){return JI}const yA=new Pt(F.comparator);function Ka(...e){let t=yA;for(const n of e)t=t.insert(n.key,n);return t}function _A(e){let t=yA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function bs(){return po()}function vA(){return po()}function po(){return new Qs(e=>e.toString(),(e,t)=>e.isEqual(t))}const tC=new Pt(F.comparator),eC=new Jt(F.comparator);function ot(...e){let t=eC;for(const n of e)t=t.add(n);return t}const nC=new Jt(at);function iC(){return nC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(t)?"-0":t}}function EA(e){return{integerValue:""+e}}function sC(e,t){return xI(t)?EA(t):$m(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function rC(e,t,n){return e instanceof zo?function(s,r){const a={fields:{[nA]:{stringValue:eA},[sA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Qm(r)&&(r=Hc(r)),r&&(a.fields[iA]=r),{mapValue:a}}(n,t):e instanceof Bo?AA(e,t):e instanceof qo?SA(e,t):function(s,r){const a=TA(s,r),l=M_(a)+M_(s.Ae);return Td(a)&&Td(s.Ae)?EA(l):$m(s.serializer,l)}(e,t)}function aC(e,t,n){return e instanceof Bo?AA(e,t):e instanceof qo?SA(e,t):n}function TA(e,t){return e instanceof oc?function(i){return Td(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class zo extends Yc{}class Bo extends Yc{constructor(t){super(),this.elements=t}}function AA(e,t){const n=bA(t);for(const i of e.elements)n.some(s=>kn(s,i))||n.push(i);return{arrayValue:{values:n}}}class qo extends Yc{constructor(t){super(),this.elements=t}}function SA(e,t){let n=bA(t);for(const i of e.elements)n=n.filter(s=>!kn(s,i));return{arrayValue:{values:n}}}class oc extends Yc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function M_(e){return Ht(e.integerValue||e.doubleValue)}function bA(e){return Ym(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,n){this.field=t,this.transform=n}}function lC(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Bo&&s instanceof Bo||i instanceof qo&&s instanceof qo?Wr(i.elements,s.elements,kn):i instanceof oc&&s instanceof oc?kn(i.Ae,s.Ae):i instanceof zo&&s instanceof zo}(e.transform,t.transform)}class uC{constructor(t,n){this.version=t,this.transformResults=n}}class ge{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ge}static exists(t){return new ge(void 0,t)}static updateTime(t){return new ge(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _u(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Kc{}function wA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Xc(e.key,ge.none()):new cl(e.key,e.data,ge.none());{const n=e.data,i=Ne.empty();let s=new Jt(me.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new fs(e.key,i,new Ye(s.toArray()),ge.none())}}function cC(e,t,n){e instanceof cl?function(s,r,a){const l=s.value.clone(),u=P_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof fs?function(s,r,a){if(!_u(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=P_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(RA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function yo(e,t,n,i){return e instanceof cl?function(r,a,l,u){if(!_u(r.precondition,a))return l;const h=r.value.clone(),d=U_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof fs?function(r,a,l,u){if(!_u(r.precondition,a))return l;const h=U_(r.fieldTransforms,u,a),d=a.data;return d.setAll(RA(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return _u(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function hC(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=TA(i.transform,s||null);r!=null&&(n===null&&(n=Ne.empty()),n.set(i.field,r))}return n||null}function k_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Wr(i,s,(r,a)=>lC(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class cl extends Kc{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fs extends Kc{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function RA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function P_(e,t,n){const i=new Map;ht(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,aC(a,l,n[s]))}return i}function U_(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,rC(r,a,t))}return i}class Xc extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IA extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&cC(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=vA();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=wA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ot())}isEqual(t){return this.batchId===t.batchId&&Wr(this.mutations,t.mutations,(n,i)=>k_(n,i))&&Wr(this.baseMutations,t.baseMutations,(n,i)=>k_(n,i))}}class Zm{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){ht(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return tC}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Zm(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,ut;function CA(e){switch(e){case k.OK:return Y(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function NA(e){if(e===void 0)return ui("GRPC error has no .code"),k.UNKNOWN;switch(e){case Ft.OK:return k.OK;case Ft.CANCELLED:return k.CANCELLED;case Ft.UNKNOWN:return k.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return k.INTERNAL;case Ft.UNAVAILABLE:return k.UNAVAILABLE;case Ft.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ft.NOT_FOUND:return k.NOT_FOUND;case Ft.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ft.ABORTED:return k.ABORTED;case Ft.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ft.DATA_LOSS:return k.DATA_LOSS;default:return Y(39323,{code:e})}}(ut=Ft||(Ft={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Xi([4294967295,4294967295],0);function L_(e){const t=gC().encode(e),n=new q0;return n.update(t),new Uint8Array(n.digest())}function j_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Xi([n,i],0),new Xi([s,r],0)]}class Wm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(i<0)throw new Xa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Xi.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(Xi.fromNumber(i)));return s.compare(pC)===1&&(s=new Xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=L_(t),[i,s]=j_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Wm(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=L_(t),[i,s]=j_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,hl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new $c($.min(),s,new Pt(at),ci(),ot())}}class hl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new hl(i,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class DA{constructor(t,n){this.targetId=t,this.Ce=n}}class xA{constructor(t,n,i=ye.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class z_{constructor(){this.ve=0,this.Fe=B_(),this.Me=ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ot(),n=ot(),i=ot();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Y(38017,{changeType:r})}}),new hl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=B_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yC{constructor(t){this.Ge=t,this.ze=new Map,this.je=ci(),this.Je=Jl(),this.He=Jl(),this.Ye=new Pt(at)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Sd(r))if(i===0){const a=new F(r.path);this.et(n,a,ae.newNoDocument(a,$.min()))}else ht(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=ss(i).toUint8Array()}catch(u){if(u instanceof tA)return Zr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Wm(a,s,r)}catch(u){return Zr(u instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Sd(l.target)){const u=new F(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ae.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=ot();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new $c(t,n,this.Ye,this.je,i);return this.je=ci(),this.Je=Jl(),this.He=Jl(),this.Ye=new Pt(at),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new z_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Jt(at),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Jt(at),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new z_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Jl(){return new Pt(F.comparator)}function B_(){return new Pt(F.comparator)}const _C={asc:"ASCENDING",desc:"DESCENDING"},vC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EC={and:"AND",or:"OR"};class TC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Rd(e,t){return e.useProto3Json||ul(t)?t:{value:t}}function lc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function OA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function AC(e,t){return lc(e,t.toTimestamp())}function Je(e){return ht(!!e,49232),$.fromTimestamp(function(n){const i=is(n);return new Ct(i.seconds,i.nanos)}(e))}function Jm(e,t){return Id(e,t).canonicalString()}function Id(e,t){const n=function(s){return new At(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function VA(e){const t=At.fromString(e);return ht(jA(t),10190,{key:t.toString()}),t}function uc(e,t){return Jm(e.databaseId,t.path)}function _o(e,t){const n=VA(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new F(kA(n))}function MA(e,t){return Jm(e.databaseId,t)}function SC(e){const t=VA(e);return t.length===4?At.emptyPath():kA(t)}function Cd(e){return new At(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kA(e){return ht(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function q_(e,t,n){return{name:uc(e,t),fields:n.value.mapValue.fields}}function bC(e,t){return"found"in t?function(i,s){ht(!!s.found,43571),s.found.name,s.found.updateTime;const r=_o(i,s.found.name),a=Je(s.found.updateTime),l=s.found.createTime?Je(s.found.createTime):$.min(),u=new Ne({mapValue:{fields:s.found.fields}});return ae.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){ht(!!s.missing,3894),ht(!!s.readTime,22933);const r=_o(i,s.missing),a=Je(s.readTime);return ae.newNoDocument(r,a)}(e,t):Y(7234,{result:t})}function wC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(ht(d===void 0||typeof d=="string",58123),ye.fromBase64String(d||"")):(ht(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ye.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:NA(h.code);return new z(d,h.message||"")}(a);n=new xA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=_o(e,i.document.name),r=Je(i.document.updateTime),a=i.document.createTime?Je(i.document.createTime):$.min(),l=new Ne({mapValue:{fields:i.document.fields}}),u=ae.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new vu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=_o(e,i.document),r=i.readTime?Je(i.readTime):$.min(),a=ae.newNoDocument(s,r),l=i.removedTargetIds||[];n=new vu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=_o(e,i.document),r=i.removedTargetIds||[];n=new vu([],r,s,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new mC(s,r),l=i.targetId;n=new DA(l,a)}}return n}function PA(e,t){let n;if(t instanceof cl)n={update:q_(e,t.key,t.value)};else if(t instanceof Xc)n={delete:uc(e,t.key)};else if(t instanceof fs)n={update:q_(e,t.key,t.data),updateMask:MC(t.fieldMask)};else{if(!(t instanceof IA))return Y(16599,{Vt:t.type});n={verify:uc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof zo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof oc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:AC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)}(e,t.precondition)),n}function RC(e,t){return e&&e.length>0?(ht(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?Je(s.updateTime):Je(r);return a.isEqual($.min())&&(a=Je(r)),new uC(a,s.transformResults||[])}(n,t))):[]}function IC(e,t){return{documents:[MA(e,t.path)]}}function CC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=MA(e,s);const r=function(h){if(h.length!==0)return LA(En.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:cr(m.field),direction:xC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Rd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function NC(e){let t=SC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ht(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(g){const m=UA(g);return m instanceof En&&cA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(D){return new jo(hr(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,ul(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new ac(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new ac(_,m)}(n.endAt)),XI(t,s,a,r,l,"F",u,h)}function DC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function UA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=hr(n.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=hr(n.unaryFilter.field);return Yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hr(n.unaryFilter.field);return Yt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=hr(n.unaryFilter.field);return Yt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Yt.create(hr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(i=>UA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function xC(e){return _C[e]}function OC(e){return vC[e]}function VC(e){return EC[e]}function cr(e){return{fieldPath:e.canonicalString()}}function hr(e){return me.fromServerFormat(e.fieldPath)}function LA(e){return e instanceof Yt?function(n){if(n.op==="=="){if(N_(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NAN"}};if(C_(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(N_(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NAN"}};if(C_(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cr(n.field),op:OC(n.op),value:n.value}}}(e):e instanceof En?function(n){const i=n.getFilters().map(s=>LA(s));return i.length===1?i[0]:{compositeFilter:{op:VC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function MC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function jA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,n,i,s,r=$.min(),a=$.min(),l=ye.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Ui(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.yt=t}}function PC(e){const t=NC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Cn=new LC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ns.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ns.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class LC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Jt(At.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Jt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040;class ke{static withCacheSize(t){return new ke(t,ke.DEFAULT_COLLECTION_PERCENTILE,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ke.DEFAULT_COLLECTION_PERCENTILE=10,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ke.DEFAULT=new ke(zA,ke.DEFAULT_COLLECTION_PERCENTILE,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ke.DISABLED=new ke(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LruGarbageCollector",jC=1048576;function F_([e,t],[n,i]){const s=at(e,n);return s===0?at(t,i):s}class zC{constructor(t){this.Ir=t,this.buffer=new Jt(F_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();F_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(G_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ma(n)?H(G_,"Ignoring IndexedDB error during garbage collection: ",n):await da(n)}await this.Vr(3e5)})}}class qC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(qc.ce);const i=new zC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(H_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),lr()<=rt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function HC(e,t){return new qC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new Qs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&yo(i.mutation,s,Ye.empty(),Ct.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ot()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ot()){const s=bs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=Ka();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=bs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ot()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=ci();const a=po(),l=function(){return po()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof fs)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),yo(d.mutation,h,d.mutation.getFieldMask(),Ct.now())):a.set(h.key,Ye.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new FC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=po();let s=new Pt((a,l)=>a-l),r=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Ye.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(s.get(l.batchId)||ot()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=vA();d.forEach(m=>{if(!r.has(m)){const _=wA(n.get(m),i.get(m));_!==null&&g.set(m,_),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):mA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(bs());let l=ko,u=r;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,ot())).next(d=>({batchId:l,changes:_A(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new F(n)).next(i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=Ka();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ga(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ae.newInvalidDocument(d)))});let l=Ka();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&yo(d.mutation,h,Ye.empty(),Ct.now()),Qc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Je(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:PC(s.bundledQuery),readTime:Je(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.overlays=new Pt(F.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=bs();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=bs(),r=n.length+1,a=new F(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Pt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=bs(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=bs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new dC(n,i));let r=this.qr.get(n);r===void 0&&(r=ot(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.sessionToken=ye.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.Qr=new Jt(ie.$r),this.Ur=new Jt(ie.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ie(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ie(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new F(new At([])),i=new ie(n,t),s=new ie(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new F(new At([])),i=new ie(n,t),s=new ie(n,t+1);let r=ot();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new ie(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ie{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return F.comparator(t.key,n.key)||at(t.Yr,n.Yr)}static Kr(t,n){return at(t.Yr,n.Yr)||F.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(ie.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new ie(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Fm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ie(n,0),s=new ie(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Jt(at);return n.forEach(s=>{const r=new ie(s,0),a=new ie(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;F.isDocumentKey(r)||(r=r.child(""));const a=new ie(new F(r),0);let l=new Jt(at);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new ie(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ie(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t){this.ri=t,this.docs=function(){return new Pt(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let i=ci();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ae.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=ci();const a=n.path,l=new F(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||II(RI(d),i)<=0||(s.has(d.key)||Qc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new WC(this)}getSize(t){return P.resolve(this.size)}}class WC extends GC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.persistence=t,this.si=new Qs(n=>Km(n),Xm),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new tg,this.targetCount=0,this.ai=ea.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ea(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,n){this.ui={},this.overlays={},this.ci=new qc(0),this.li=!1,this.li=!0,this.hi=new XC,this.referenceDelegate=t(this),this.Pi=new JC(this),this.indexManager=new UC,this.remoteDocumentCache=function(s){return new ZC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new kC(n),this.Ii=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new KC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new $C(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const s=new tN(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class tN extends NI{constructor(t){super(),this.currentSequenceNumber=t}}class eg{constructor(t){this.persistence=t,this.Ri=new tg,this.Vi=null}static mi(t){return new eg(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=F.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class cc{constructor(t,n){this.persistence=t,this.pi=new Qs(i=>OI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=HC(this,n)}static mi(t,n){return new cc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,$.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=pu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=ot(),s=ot();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new ng(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KR()?8:DI(be())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new eN;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(lr()<=rt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(lr()<=rt.DEBUG&&H("QueryEngine","Query:",ur(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(lr()<=rt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Dn(n))):P.resolve())}ys(t,n){if(V_(n))return P.resolve(null);let i=Dn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wd(n,null,"F"),i=Dn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=ot(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,wd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return V_(n)||s.isEqual($.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(lr()<=rt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ur(n)),this.vs(t,a,n,wI(s,ko)).next(l=>l))})}Ds(t,n){let i=new Jt(pA(t));return n.forEach((s,r)=>{Qc(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return lr()<=rt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ur(n)),this.ps.getDocumentsMatchingQuery(t,n,ns.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="LocalStore",iN=3e8;class sN{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Pt(at),this.xs=new Qs(r=>Km(r),Xm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function rN(e,t,n,i){return new sN(e,t,n,i)}async function qA(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=ot();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function aN(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(D=>{_=_.next(()=>d.getEntry(u,D)).next(V=>{const M=h.docVersions.get(D);ht(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ot();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function HA(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function oN(e,t){const n=J(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=s.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,d.addedDocuments,g)));let _=m.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(ye.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(g,_),function(V,M,A){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=iN?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(r,_))});let u=ci(),h=ot();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(lN(r,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function lN(e,t,n){let i=ot(),s=ot();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=ci();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(ig,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function uN(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Fm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function cN(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new Ui(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Nd(e,t,n){const i=J(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ma(a))throw a;H(ig,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function Q_(e,t,n){const i=J(e);let s=$.min(),r=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,Dn(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:$.min(),n?r:ot())).next(l=>(hN(i,ZI(t),l),{documents:l,Qs:r})))}function hN(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class Y_{constructor(){this.activeTargetIds=iC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fN{constructor(){this.Mo=new Y_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Y_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="ConnectivityMonitor";class X_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(K_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(K_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Dd(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="RestConnection",mN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===sc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=Dd(),l=this.zo(t,n.toUriEncodedString());H(df,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),d=ca(h);return this.Jo(t,l,u,i,d).then(g=>(H(df,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Zr(df,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=mN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee="WebChannelConnection";class yN extends gN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=Dd();return new Promise((l,u)=>{const h=new H0;h.setWithCredentials(!0),h.listenOnce(G0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case gu.NO_ERROR:const g=h.getResponseJson();H(Ee,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case gu.TIMEOUT:H(Ee,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const m=h.getStatus();if(H(Ee,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const D=_==null?void 0:_.error;if(D&&D.status&&D.message){const V=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(D.status);u(new z(V,D.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Ee,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);H(Ee,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,i,15)})}T_(t,n,i){const s=Dd(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Y0(),l=Q0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");H(Ee,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const D=new pN({Yo:M=>{_?H(Ee,`Not sending because RPC '${t}' stream ${s} is closed:`,M):(m||(H(Ee,`Opening RPC '${t}' stream ${s} transport.`),g.open(),m=!0),H(Ee,`RPC '${t}' stream ${s} sending:`,M),g.send(M))},Zo:()=>g.close()}),V=(M,A,v)=>{M.listen(A,I=>{try{v(I)}catch(x){setTimeout(()=>{throw x},0)}})};return V(g,Ya.EventType.OPEN,()=>{_||(H(Ee,`RPC '${t}' stream ${s} transport opened.`),D.o_())}),V(g,Ya.EventType.CLOSE,()=>{_||(_=!0,H(Ee,`RPC '${t}' stream ${s} transport closed`),D.a_(),this.E_(g))}),V(g,Ya.EventType.ERROR,M=>{_||(_=!0,Zr(Ee,`RPC '${t}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,Ya.EventType.MESSAGE,M=>{var A;if(!_){const v=M.data[0];ht(!!v,16349);const I=v,x=(I==null?void 0:I.error)||((A=I[0])==null?void 0:A.error);if(x){H(Ee,`RPC '${t}' stream ${s} received error:`,x);const L=x.status;let B=function(E){const b=Ft[E];if(b!==void 0)return NA(b)}(L),T=x.message;B===void 0&&(B=k.INTERNAL,T="Unknown error status: "+L+" with message "+x.message),_=!0,D.a_(new z(B,T)),g.close()}else H(Ee,`RPC '${t}' stream ${s} received:`,v),D.u_(v)}}),V(l,F0.STAT_EVENT,M=>{M.stat===_d.PROXY?H(Ee,`RPC '${t}' stream ${s} detected buffering proxy`):M.stat===_d.NOPROXY&&H(Ee,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(e){return new TC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="PersistentStream";class GA{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sg(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H($_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H($_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _N extends GA{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=wC(this.serializer,t),i=function(r){if(!("targetChange"in r))return $.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?Je(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Cd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Sd(u)?{documents:IC(r,u)}:{query:CC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=OA(r,a.resumeToken);const h=Rd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=lc(r,a.snapshotVersion.toTimestamp());const h=Rd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=DC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Cd(this.serializer),n.removeTarget=t,this.q_(n)}}class vN extends GA{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=RC(t.writeResults,t.commitTime),i=Je(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Cd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>PA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{}class TN extends EN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,Id(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(k.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Id(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class AN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ui(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class SN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ys(this)&&(H(js,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await fl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wc(h)}(this))})}),this.Ra=new AN(i,s)}}async function Wc(e){if(Ys(e))for(const t of e.da)await t(!0)}async function fl(e){for(const t of e.da)await t(!1)}function FA(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),lg(n)?og(n):pa(n).O_()&&ag(n,t))}function rg(e,t){const n=J(e),i=pa(n);n.Ia.delete(t),i.O_()&&QA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Ys(n)&&n.Ra.set("Unknown"))}function ag(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pa(e).Y_(t)}function QA(e,t){e.Va.Ue(t),pa(e).Z_(t)}function og(e){e.Va=new yC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),pa(e).start(),e.Ra.ua()}function lg(e){return Ys(e)&&!pa(e).x_()&&e.Ia.size>0}function Ys(e){return J(e).Ea.size===0}function YA(e){e.Va=void 0}async function bN(e){e.Ra.set("Online")}async function wN(e){e.Ia.forEach((t,n)=>{ag(e,t)})}async function RN(e,t){YA(e),lg(e)?(e.Ra.ha(t),og(e)):e.Ra.set("Unknown")}async function IN(e,t,n){if(e.Ra.set("Online"),t instanceof xA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){H(js,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await hc(e,i)}else if(t instanceof vu?e.Va.Ze(t):t instanceof DA?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await HA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(h);d&&r.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(ye.EMPTY_BYTE_STRING,d.snapshotVersion)),QA(r,u);const g=new Ui(d.target,u,h,d.sequenceNumber);ag(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(js,"Failed to raise snapshot:",i),await hc(e,i)}}async function hc(e,t,n){if(!ma(t))throw t;e.Ea.add(1),await fl(e),e.Ra.set("Offline"),n||(n=()=>HA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(js,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Wc(e)})}function KA(e,t){return t().catch(n=>hc(e,n,t))}async function Jc(e){const t=J(e),n=as(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Fm;for(;CN(t);)try{const s=await uN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,NN(t,s)}catch(s){await hc(t,s)}XA(t)&&$A(t)}function CN(e){return Ys(e)&&e.Ta.length<10}function NN(e,t){e.Ta.push(t);const n=as(e);n.O_()&&n.X_&&n.ea(t.mutations)}function XA(e){return Ys(e)&&!as(e).x_()&&e.Ta.length>0}function $A(e){as(e).start()}async function DN(e){as(e).ra()}async function xN(e){const t=as(e);for(const n of e.Ta)t.ea(n.mutations)}async function ON(e,t,n){const i=e.Ta.shift(),s=Zm.from(i,t,n);await KA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Jc(e)}async function VN(e,t){t&&as(e).X_&&await async function(i,s){if(function(a){return CA(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();as(i).B_(),await KA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Jc(i)}}(e,t),XA(e)&&$A(e)}async function Z_(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),H(js,"RemoteStore received new credentials");const i=Ys(n);n.Ea.add(3),await fl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Wc(n)}async function MN(e,t){const n=J(e);t?(n.Ea.delete(2),await Wc(n)):t||(n.Ea.add(2),await fl(n),n.Ra.set("Unknown"))}function pa(e){return e.ma||(e.ma=function(n,i,s){const r=J(n);return r.sa(),new _N(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:bN.bind(null,e),t_:wN.bind(null,e),r_:RN.bind(null,e),H_:IN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),lg(e)?og(e):e.Ra.set("Unknown")):(await e.ma.stop(),YA(e))})),e.ma}function as(e){return e.fa||(e.fa=function(n,i,s){const r=J(n);return r.sa(),new vN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:DN.bind(null,e),r_:VN.bind(null,e),ta:xN.bind(null,e),na:ON.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Jc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(js,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new ug(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(e,t){if(ui("AsyncQueue",`${t}: ${e}`),ma(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{static emptySet(t){return new Mr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Pt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Mr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Mr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.ga=new Pt(F.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class na{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new na(t,n,Mr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class PN{constructor(){this.queries=J_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=J(n),r=s.queries;s.queries=J_(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function J_(){return new Qs(e=>gA(e),Fc)}async function ZA(e,t){const n=J(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new kN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=cg(a,`Initialization of query '${ur(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&hg(n)}async function WA(e,t){const n=J(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function UN(e,t){const n=J(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&hg(n)}function LN(e,t,n){const i=J(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function hg(e){e.Ca.forEach(t=>{t.next()})}var xd,tv;(tv=xd||(xd={})).Ma="default",tv.Cache="cache";class JA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new na(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=na.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t){this.key=t}}class eS{constructor(t){this.key=t}}class jN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=pA(t),this.tu=new Mr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new W_,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,g)=>{const m=s.get(d),_=Qc(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?D!==V&&(i.track({type:3,doc:_}),M=!0):this.su(m,_)||(i.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(_?(a=a.add(_),r=V?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:M})}};return V(_)-V(D)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new na(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ot(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new eS(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new tS(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fg="SyncEngine";class zN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class BN{constructor(t){this.key=t,this.hu=!1}}class qN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Qs(l=>gA(l),Fc),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(F.comparator),this.Au=new Map,this.Ru=new tg,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HN(e,t,n=!0){const i=oS(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await nS(i,t,n,!0),s}async function GN(e,t){const n=oS(e);await nS(n,t,!0,!1)}async function nS(e,t,n,i){const s=await cN(e.localStore,Dn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await FN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&FA(e.remoteStore,s),l}async function FN(e,t,n,i,s){e.pu=(g,m,_)=>async function(V,M,A,v){let I=M.view.ru(A);I.Cs&&(I=await Q_(V.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,I)));const x=v&&v.targetChanges.get(M.targetId),L=v&&v.targetMismatches.get(M.targetId)!=null,B=M.view.applyChanges(I,V.isPrimaryClient,x,L);return nv(V,M.targetId,B.au),B.snapshot}(e,g,m,_);const r=await Q_(e.localStore,t,!0),a=new jN(t,r.Qs),l=a.ru(r.documents),u=hl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);nv(e,n,h.au);const d=new zN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function QN(e,t,n){const i=J(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!Fc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&rg(i.remoteStore,s.targetId),Od(i,s.targetId)}).catch(da)):(Od(i,s.targetId),await Nd(i.localStore,s.targetId,!0))}async function YN(e,t){const n=J(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),rg(n.remoteStore,i.targetId))}async function KN(e,t,n){const i=eD(e);try{const s=await function(a,l){const u=J(a),h=Ct.now(),d=l.reduce((_,D)=>_.add(D.key),ot());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=ci(),V=ot();return u.Ns.getEntries(_,d).next(M=>{D=M,D.forEach((A,v)=>{v.isValidDocument()||(V=V.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,D)).next(M=>{g=M;const A=[];for(const v of l){const I=hC(v,g.get(v.key).overlayedDocument);I!=null&&A.push(new fs(v.key,I,oA(I.value.mapValue),ge.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,A,l)}).next(M=>{m=M;const A=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,M.batchId,A)})}).then(()=>({batchId:m.batchId,changes:_A(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Pt(at)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await dl(i,s.changes),await Jc(i.remoteStore)}catch(s){const r=cg(s,"Failed to persist write");n.reject(r)}}async function iS(e,t){const n=J(e);try{const i=await oN(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ht(a.hu,14607):s.removedDocuments.size>0&&(ht(a.hu,42227),a.hu=!1))}),await dl(n,i,t)}catch(i){await da(i)}}function ev(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&hg(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function XN(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Pt(F.comparator);a=a.insert(r,ae.newNoDocument(r,$.min()));const l=ot().add(r),u=new $c($.min(),new Map,new Pt(at),a,l);await iS(i,u),i.du=i.du.remove(r),i.Au.delete(t),dg(i)}else await Nd(i.localStore,t,!1).then(()=>Od(i,t,n)).catch(da)}async function $N(e,t){const n=J(e),i=t.batch.batchId;try{const s=await aN(n.localStore,t);rS(n,i,null),sS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await dl(n,s)}catch(s){await da(s)}}async function ZN(e,t,n){const i=J(e);try{const s=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ht(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);rS(i,t,n),sS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await dl(i,s)}catch(s){await da(s)}}function sS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function rS(e,t,n){const i=J(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Od(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||aS(e,i)})}function aS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(rg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),dg(e))}function nv(e,t,n){for(const i of n)i instanceof tS?(e.Ru.addReference(i.key,t),WN(e,i)):i instanceof eS?(H(fg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||aS(e,i.key)):Y(19791,{wu:i})}function WN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(fg,"New document in limbo: "+n),e.Eu.add(i),dg(e))}function dg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new F(At.fromString(t)),i=e.fu.next();e.Au.set(i,new BN(n)),e.du=e.du.insert(n,i),FA(e.remoteStore,new Ui(Dn(Gc(n.path)),i,"TargetPurposeLimboResolution",qc.ce))}}async function dl(e,t,n){const i=J(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=ng.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!ma(g))throw g;H(ig,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),D=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,r))}async function JN(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){H(fg,"User change. New user:",t.toKey());const i=await qA(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await dl(n,i.Ls)}}function tD(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return ot().add(i.key);{let s=ot();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function oS(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=iS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=XN.bind(null,t),t.Pu.H_=UN.bind(null,t.eventManager),t.Pu.yu=LN.bind(null,t.eventManager),t}function eD(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$N.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZN.bind(null,t),t}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return rN(this.persistence,new nN,t.initialUser,this.serializer)}Cu(t){return new BA(eg.mi,this.serializer)}Du(t){return new fN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class nD extends fc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ht(this.persistence.referenceDelegate instanceof cc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ke.withCacheSize(this.cacheSizeBytes):ke.DEFAULT;return new BA(i=>cc.mi(i,n),this.serializer)}}class Vd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ev(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JN.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new PN}()}createDatastore(t){const n=Zc(t.databaseInfo.databaseId),i=function(r){return new yN(r)}(t.databaseInfo);return function(r,a,l,u){return new TN(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new SN(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>ev(this.syncEngine,n,0),function(){return X_.v()?new X_:new dN}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,d){const g=new qN(s,r,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=J(s);H(js,"RemoteStore shutting down."),r.Ea.add(5),await fl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ui("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=J(s),l={documents:r.map(g=>uc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,At.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const m=bC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return r.forEach(g=>{const m=h.get(g.toString());ht(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Xc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=F.fromPath(i);this.mutations.push(new IA(s,this.precondition(s)))}),await async function(i,s){const r=J(i),a={writes:s.map(l=>PA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,At.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=$.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual($.min())?ge.exists(!1):ge.updateTime(n):ge.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual($.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ge.updateTime(n)}return ge.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new sg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new iD(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!ul(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!CA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class rD{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Te.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{H(os,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(os,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=cg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function gf(e,t){e.asyncQueue.verifyOperationInProgress(),H(os,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await qA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function iv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aD(e);H(os,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Z_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>Z_(t.remoteStore,s)),e._onlineComponents=t}async function aD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(os,"Using user provided OfflineComponentProvider");try{await gf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zr("Error using user provided cache. Falling back to memory cache: "+n),await gf(e,new fc)}}else H(os,"Using default OfflineComponentProvider"),await gf(e,new nD(void 0));return e._offlineComponents}async function mg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(os,"Using user provided OnlineComponentProvider"),await iv(e,e._uninitializedComponentsProvider._online)):(H(os,"Using default OnlineComponentProvider"),await iv(e,new Vd))),e._onlineComponents}function oD(e){return mg(e).then(t=>t.syncEngine)}function lD(e){return mg(e).then(t=>t.datastore)}async function Md(e){const t=await mg(e),n=t.eventManager;return n.onListen=HN.bind(null,t.syncEngine),n.onUnlisten=QN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=GN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=YN.bind(null,t.syncEngine),n}function uD(e,t,n={}){const i=new ii;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new lS({next:m=>{d.Nu(),a.enqueueAndForget(()=>WA(r,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new JA(Gc(l.path),d,{includeMetadataChanges:!0,qa:!0});return ZA(r,g)}(await Md(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="firestore.googleapis.com",rv=!0;class av{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cS,this.ssl=rv}else this.host=t.host,this.ssl=t.ssl??rv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class th{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new av({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new av(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new mI;switch(i.type){case"firstParty":return new _I(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sv.get(n);i&&(H("ComponentProvider","Removing Datastore"),sv.delete(n),i.terminate())}(this),Promise.resolve()}}function cD(e,t,n,i={}){var h;e=We(e,th);const s=ca(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(M0(`https://${l}`),k0("Firestore",!0)),r.host!==cS&&r.host!==l&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Ps(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Te.MOCK_USER;else{d=jR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Te(m)}e._authCredentials=new gI(new X0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ks(this.firestore,t,this._query)}}class kt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new kt(this.firestore,t,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(ll(n,kt._jsonSchema))return new kt(t,i||null,new F(At.fromString(n.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Kt("string",kt._jsonSchemaVersion),referencePath:Kt("string")};class $i extends Ks{constructor(t,n,i){super(t,n,Gc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new kt(this.firestore,null,new F(t))}withConverter(t){return new $i(this.firestore,t,this._path)}}function ov(e,t,...n){if(e=ue(e),$0("collection","path",t),e instanceof th){const i=At.fromString(t,...n);return v_(i),new $i(e,null,i)}{if(!(e instanceof kt||e instanceof $i))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(At.fromString(t,...n));return v_(i),new $i(e.firestore,null,i)}}function pn(e,t,...n){if(e=ue(e),arguments.length===1&&(t=Gm.newId()),$0("doc","path",t),e instanceof th){const i=At.fromString(t,...n);return __(i),new kt(e,null,new F(i))}{if(!(e instanceof kt||e instanceof $i))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(At.fromString(t,...n));return __(i),new kt(e.firestore,e instanceof $i?e.converter:null,new F(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="AsyncQueue";class uv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sg(this,"async_queue_retry"),this._c=()=>{const i=mf();i&&H(lv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ii;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ma(t))throw t;H(lv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,ui("INTERNAL UNHANDLED ERROR: ",cv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=ug.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:cv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function cv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class hi extends th{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new uv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uv(t),this._firestoreClient=void 0,await t}}}function hD(e,t){const n=typeof e=="object"?e:j0(),i=typeof e=="string"?e:sc,s=qm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=UR("firestore");r&&cD(s,...r)}return s}function eh(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fD(e),e._firestoreClient}function fD(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,d){return new kI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new rD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qe(ye.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Qe(ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ll(t,Qe._jsonSchema))return Qe.fromBase64String(t.bytes)}}Qe._jsonSchemaVersion="firestore/bytes/1.0",Qe._jsonSchema={type:Kt("string",Qe._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xn._jsonSchemaVersion}}static fromJSON(t){if(ll(t,xn._jsonSchema))return new xn(t.latitude,t.longitude)}}xn._jsonSchemaVersion="firestore/geoPoint/1.0",xn._jsonSchema={type:Kt("string",xn._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ll(t,On._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new On(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:Kt("string",On._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=/^__.*__$/;class mD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new fs(t,this.data,this.fieldMask,n,this.fieldTransforms):new cl(t,this.data,n,this.fieldTransforms)}}class hS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new fs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function fS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class gg{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new gg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return dc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(fS(this.Ac)&&dD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class gD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Zc(t)}Cc(t,n,i,s=!1){return new gg({Ac:t,methodName:n,Dc:i,path:me.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gl(e){const t=e._freezeSettings(),n=Zc(e._databaseId);return new gD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pg(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);_g("Data must be an object, but it was:",a,i);const l=gS(i,a);let u,h;if(r.merge)u=new Ye(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const m=kd(t,g,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yS(d,m)||d.push(m)}u=new Ye(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new mD(new Ne(l),u,h)}class ih extends nh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ih}}class yg extends nh{_toFieldTransform(t){return new oC(t.path,new zo)}isEqual(t){return t instanceof yg}}function dS(e,t,n,i){const s=e.Cc(1,t,n);_g("Data must be an object, but it was:",s,i);const r=[],a=Ne.empty();hs(i,(u,h)=>{const d=vg(t,u,n);h=ue(h);const g=s.yc(d);if(h instanceof ih)r.push(d);else{const m=pl(h,g);m!=null&&(r.push(d),a.set(d,m))}});const l=new Ye(r);return new hS(a,l,s.fieldTransforms)}function mS(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[kd(t,i,n)],u=[s];if(r.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(kd(t,r[m])),u.push(r[m+1]);const h=[],d=Ne.empty();for(let m=l.length-1;m>=0;--m)if(!yS(h,l[m])){const _=l[m];let D=u[m];D=ue(D);const V=a.yc(_);if(D instanceof ih)h.push(_);else{const M=pl(D,V);M!=null&&(h.push(_),d.set(_,M))}}const g=new Ye(h);return new hS(d,g,a.fieldTransforms)}function pD(e,t,n,i=!1){return pl(n,e.Cc(i?4:3,t))}function pl(e,t){if(pS(e=ue(e)))return _g("Unsupported field value:",t,e),gS(e,t);if(e instanceof nh)return function(i,s){if(!fS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=pl(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Ct.fromDate(i);return{timestampValue:lc(s.serializer,r)}}if(i instanceof Ct){const r=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lc(s.serializer,r)}}if(i instanceof xn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qe)return{bytesValue:OA(s.serializer,i._byteString)};if(i instanceof kt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Jm(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof On)return function(a,l){return{mapValue:{fields:{[rA]:{stringValue:aA},[rc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return $m(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Bc(i)}`)}(e,t)}function gS(e,t){const n={};return J0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hs(e,(i,s)=>{const r=pl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function pS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ct||e instanceof xn||e instanceof Qe||e instanceof kt||e instanceof nh||e instanceof On)}function _g(e,t,n){if(!pS(n)||!Z0(n)){const i=Bc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function kd(e,t,n){if((t=ue(t))instanceof ml)return t._internalPath;if(typeof t=="string")return vg(e,t);throw dc("Field path arguments must be of type string or ",e,!1,void 0,n)}const yD=new RegExp("[~\\*/\\[\\]]");function vg(e,t,n){if(t.search(yD)>=0)throw dc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ml(...t.split("."))._internalPath}catch{throw dc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function dc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function yS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _D extends mc{data(){return super.data()}}function Eg(e,t){return typeof t=="string"?vg(e,t):t instanceof ml?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class _S extends Tg{}function ED(e,t,...n){let i=[];t instanceof Tg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Sg).length,l=r.filter(u=>u instanceof Ag).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Ag extends _S{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Ag(t,n,i)}_apply(t){const n=this._parse(t);return vS(t._query,n),new Ks(t.firestore,t.converter,bd(t._query,n))}_parse(t){const n=gl(t.firestore);return function(r,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){dv(g,d);const D=[];for(const V of g)D.push(fv(u,r,V));m={arrayValue:{values:D}}}else m=fv(u,r,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||dv(g,d),m=pD(l,a,g,d==="in"||d==="not-in");return Yt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Sg extends Tg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Sg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)vS(a,u),a=bd(a,u)}(t._query,n),new Ks(t.firestore,t.converter,bd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends _S{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new bg(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jo(r,a)}(t._query,this._field,this._direction);return new Ks(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new ga(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function TD(e,t="asc"){const n=t,i=Eg("orderBy",e);return bg._create(i,n)}function fv(e,t,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mA(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(At.fromString(n));if(!F.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return I_(e,new F(i))}if(n instanceof kt)return I_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(n)}.`)}function dv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vS(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ES{convertValue(t,n="none"){switch(rs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ss(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return hs(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[rc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>Ht(a.doubleValue));return new On(n)}convertGeoPoint(t){return new xn(Ht(t.latitude),Ht(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Hc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Po(t));default:return null}}convertTimestamp(t){const n=is(t);return new Ct(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=At.fromString(t);ht(jA(i),9688,{name:t});const s=new Uo(i.get(1),i.get(3)),r=new F(i.popFirst(5));return s.isEqual(n)||ui(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class AD extends ES{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new kt(this.firestore,null,n)}}class br{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zi extends mc{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Eg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Zi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zi._jsonSchema={type:Kt("string",Zi._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Eu extends Zi{data(t={}){return super.data(t)}}class kr{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new br(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Eu(this._firestore,this._userDataWriter,i.key,i,new br(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Eu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new br(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Eu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new br(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:SD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=kr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function SD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(e){e=We(e,kt);const t=We(e.firestore,hi);return uD(eh(t),e._key).then(n=>TS(t,e,n))}kr._jsonSchemaVersion="firestore/querySnapshot/1.0",kr._jsonSchema={type:Kt("string",kr._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Rg extends ES{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function mv(e,t,n){e=We(e,kt);const i=We(e.firestore,hi),s=wg(e.converter,t,n);return sh(i,[pg(gl(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,ge.none())])}function Ig(e,t,n,...i){e=We(e,kt);const s=We(e.firestore,hi),r=gl(s);let a;return a=typeof(t=ue(t))=="string"||t instanceof ml?mS(r,"updateDoc",e._key,t,n,i):dS(r,"updateDoc",e._key,t),sh(s,[a.toMutation(e._key,ge.exists(!0))])}function bD(e){return sh(We(e.firestore,hi),[new Xc(e._key,ge.none())])}function wD(e,t){const n=We(e.firestore,hi),i=pn(e),s=wg(e.converter,t);return sh(n,[pg(gl(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,ge.exists(!1))]).then(()=>i)}function Pd(e,...t){var u,h,d;e=ue(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||hv(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let r,a,l;if(e instanceof kt)a=We(e.firestore,hi),l=Gc(e._key.path),r={next:g=>{t[i]&&t[i](TS(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=We(e,Ks);a=We(g.firestore,hi),l=g._query;const m=new Rg(a);r={next:_=>{t[i]&&t[i](new kr(a,m,g,_))},error:t[i+1],complete:t[i+2]},vD(e._query)}return function(m,_,D,V){const M=new lS(V),A=new JA(_,M,D);return m.asyncQueue.enqueueAndForget(async()=>ZA(await Md(m),A)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>WA(await Md(m),A))}}(eh(a),l,s,r)}function sh(e,t){return function(i,s){const r=new ii;return i.asyncQueue.enqueueAndForget(async()=>KN(await oD(i),s,r)),r.promise}(eh(e),t)}function TS(e,t,n){const i=n.docs.get(t._key),s=new Rg(e);return new Zi(e,s,t._key,i,new br(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={maxAttempts:5};function $a(e,t){if((e=ue(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=gl(t)}get(t){const n=$a(t,this._firestore),i=new AD(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Y(24041);const r=s[0];if(r.isFoundDocument())return new mc(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new mc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:r})})}set(t,n,i){const s=$a(t,this._firestore),r=wg(s.converter,n,i),a=pg(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=$a(t,this._firestore);let a;return a=typeof(n=ue(n))=="string"||n instanceof ml?mS(this._dataReader,"Transaction.update",r._key,n,i,s):dS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=$a(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD extends ID{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=$a(t,this._firestore),i=new Rg(this._firestore);return super.get(t).then(s=>new Zi(this._firestore,i,n._key,s._document,new br(!1,!1),n.converter))}}function ND(e,t,n){e=We(e,hi);const i={...RD,...n};return function(r){if(r.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new ii;return r.asyncQueue.enqueueAndForget(async()=>{const h=await lD(r);new sD(r.asyncQueue,h,l,a,u).ju()}),u.promise}(eh(e),s=>t(new CD(e,s)),i)}function Ud(){return new yg("serverTimestamp")}(function(t,n=!0){(function(s){fa=s})(ha),$r(new Us("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new hi(new pI(i.getProvider("auth-internal")),new vI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(h.options.projectId,d)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Ki(m_,g_,t),Ki(m_,g_,"esm2020")})();function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DD=AS,SS=new al("auth","Firebase",AS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new zm("@firebase/auth");function xD(e,...t){pc.logLevel<=rt.WARN&&pc.warn(`Auth (${ha}): ${e}`,...t)}function Tu(e,...t){pc.logLevel<=rt.ERROR&&pc.error(`Auth (${ha}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,...t){throw Cg(e,...t)}function Vn(e,...t){return Cg(e,...t)}function bS(e,t,n){const i={...DD(),[t]:n};return new al("auth","Firebase",i).create(t,{appName:e.name})}function Wi(e){return bS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return SS.create(e,...t)}function W(e,t,...n){if(!e)throw Cg(t,...n)}function Jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Tu(t),new Error(t)}function di(e,t){e||Jn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function OD(){return gv()==="http:"||gv()==="https:"}function gv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OD()||FR()||"connection"in navigator)?navigator.onLine:!0}function MD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,n){this.shortDelay=t,this.longDelay=n,di(n>t,"Short delay should be less than long delay!"),this.isMobile=qR()||QR()}get(){return VD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(e,t){di(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UD=new yl(3e4,6e4);function rh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ya(e,t,n,i,s={}){return RS(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=ol({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return GR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&ca(e.emulatorConfig.host)&&(h.credentials="include"),wS.fetch()(await CS(e,e.config.apiHost,n,l),h)})}async function RS(e,t,n){e._canInitEmulator=!1;const i={...kD,...t};try{const s=new LD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw eu(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw eu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw eu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw bS(e,d,h);fi(e,d)}}catch(s){if(s instanceof gi)throw s;fi(e,"network-request-failed",{message:String(s)})}}async function IS(e,t,n,i,s={}){const r=await ya(e,t,n,i,s);return"mfaPendingCredential"in r&&fi(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function CS(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Ng(e.config,s):`${e.config.apiScheme}://${s}`;return PD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class LD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),UD.get())})}}function eu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Vn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(e,t){return ya(e,"POST","/v1/accounts:delete",t)}async function yc(e,t){return ya(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zD(e,t=!1){const n=ue(e),i=await n.getIdToken(t),s=Dg(i);W(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:vo(pf(s.auth_time)),issuedAtTime:vo(pf(s.iat)),expirationTime:vo(pf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function pf(e){return Number(e)*1e3}function Dg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const s=D0(n);return s?JSON.parse(s):(Tu("Failed to decode base64 JWT payload"),null)}catch(s){return Tu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function pv(e){const t=Dg(e);return W(t,"internal-error"),W(typeof t.exp<"u","internal-error"),W(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof gi&&BD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function BD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Ho(e,yc(t,{idToken:n}));W(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?NS(s.providerUserInfo):[],a=GD(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jd(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function HD(e){const t=ue(e);await _c(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function GD(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function NS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(e,t){const n=await RS(e,{},async()=>{const i=ol({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await CS(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&ca(e.emulatorConfig.host)&&(u.credentials="include"),wS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QD(e,t){return ya(e,"POST","/v2/accounts:revokeToken",rh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){W(t.idToken,"internal-error"),W(typeof t.idToken<"u","internal-error"),W(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):pv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){W(t.length!==0,"internal-error");const n=pv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await FD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Pr;return i&&(W(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(W(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(W(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Pr,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e,t){W(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class _n{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new qD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,t));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return zD(this,t)}reload(){return HD(this)}_assign(t){this!==t&&(W(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new _n({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await _c(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Wi(this.auth));const t=await this.getIdToken();return await Ho(this,jD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:D,stsTokenManager:V}=n;W(g&&V,t,"internal-error");const M=Pr.fromJSON(this.name,V);W(typeof g=="string",t,"internal-error"),Ti(i,t.name),Ti(s,t.name),W(typeof m=="boolean",t,"internal-error"),W(typeof _=="boolean",t,"internal-error"),Ti(r,t.name),Ti(a,t.name),Ti(l,t.name),Ti(u,t.name),Ti(h,t.name),Ti(d,t.name);const A=new _n({uid:g,auth:t,email:s,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(A.providerData=D.map(v=>({...v}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(t,n,i=!1){const s=new Pr;s.updateFromServerResponse(n);const r=new _n({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await _c(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];W(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?NS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Pr;l.updateFromIdToken(i);const u=new _n({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new jd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;function ti(e){di(e instanceof Function,"Expected a class definition");let t=yv.get(e);return t?(di(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}DS.type="NONE";const _v=DS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(e,t,n){return`firebase:${e}:${t}:${n}`}class Ur{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,r),this.fullPersistenceKey=Au("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await yc(this.auth,{idToken:t}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,t):null}return _n._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Ur(ti(_v),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||ti(_v);const a=Au(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await yc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await _n._fromGetAccountInfoResponse(t,m,d)}else g=_n._fromJSON(t,d);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Ur(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Ur(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(MS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(PS(t))return"Blackberry";if(US(t))return"Webos";if(OS(t))return"Safari";if((t.includes("chrome/")||VS(t))&&!t.includes("edge/"))return"Chrome";if(kS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function xS(e=be()){return/firefox\//i.test(e)}function OS(e=be()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function VS(e=be()){return/crios\//i.test(e)}function MS(e=be()){return/iemobile/i.test(e)}function kS(e=be()){return/android/i.test(e)}function PS(e=be()){return/blackberry/i.test(e)}function US(e=be()){return/webos/i.test(e)}function xg(e=be()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function YD(e=be()){var t;return xg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function KD(){return YR()&&document.documentMode===10}function LS(e=be()){return xg(e)||kS(e)||US(e)||PS(e)||/windows phone/i.test(e)||MS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(e,t=[]){let n;switch(e){case"Browser":n=vv(be());break;case"Worker":n=`${vv(be())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ha}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(e,t={}){return ya(e,"GET","/v2/passwordPolicy",rh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=6;class WD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ev(this),this.idTokenSubscription=new Ev(this),this.beforeStateQueue=new XD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ti(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Ur.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await yc(this,{idToken:t}),i=await _n._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await _c(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=MD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(yn(this.app))return Promise.reject(Wi(this));const n=t?ue(t):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&W(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return yn(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $D(this),n=new WD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new al("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await QD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ti(t)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Ur.create(this,[ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=jS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&xD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ah(e){return ue(e)}class Ev{constructor(t){this.auth=t,this.observer=null,this.addObserver=e2(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tx(e){Og=e}function ex(e){return Og.loadJS(e)}function nx(){return Og.gapiScript}function ix(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(e,t){const n=qm(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Ps(r,t??{}))return s;fi(s,"already-initialized")}return n.initialize({options:t})}function rx(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ti);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function ax(e,t,n){const i=ah(e);W(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=zS(t),{host:a,port:l}=ox(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(Ps(h,i.config.emulator)&&Ps(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ca(a)?(M0(`${r}//${a}${u}`),k0("Auth",!0)):lx()}function zS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ox(e){const t=zS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Tv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Tv(a)}}}function Tv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function lx(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(t){return Jn("not implemented")}_linkToIdToken(t,n){return Jn("not implemented")}_getReauthenticationResolver(t){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(e,t){return IS(e,"POST","/v1/accounts:signInWithIdp",rh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="http://localhost";class zs extends BS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new zs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new zs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Lr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Lr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Lr(t,n)}buildRequest(){const t={requestUri:ux,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ol(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends qS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends _l{constructor(){super("facebook.com")}static credential(t){return zs._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ni.credentialFromTaggedObject(t)}static credentialFromError(t){return Ni.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ni.credential(t.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return zs._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Di.credentialFromTaggedObject(t)}static credentialFromError(t){return Di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Di.credential(n,i)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends _l{constructor(){super("github.com")}static credential(t){return zs._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xi.credentialFromTaggedObject(t)}static credentialFromError(t){return xi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xi.credential(t.oauthAccessToken)}catch{return null}}}xi.GITHUB_SIGN_IN_METHOD="github.com";xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends _l{constructor(){super("twitter.com")}static credential(t,n){return zs._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Oi.credentialFromTaggedObject(t)}static credentialFromError(t){return Oi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Oi.credential(n,i)}catch{return null}}}Oi.TWITTER_SIGN_IN_METHOD="twitter.com";Oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(e,t){return IS(e,"POST","/v1/accounts:signUp",rh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await _n._fromIdTokenResponse(t,i,s),a=Av(i);return new ls({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=Av(i);return new ls({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function Av(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(e){var s;if(yn(e.app))return Promise.reject(Wi(e));const t=ah(e);if(await t._initializationPromise,(s=t.currentUser)!=null&&s.isAnonymous)return new ls({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await cx(t,{returnSecureToken:!0}),i=await ls._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends gi{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new vc(t,n,i,s)}}function HS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(e,r,t,i):r})}async function fx(e,t,n=!1){const i=await Ho(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ls._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(e,t,n=!1){const{auth:i}=e;if(yn(i.app))return Promise.reject(Wi(i));const s="reauthenticate";try{const r=await Ho(e,HS(i,s,t,e),n);W(r.idToken,i,"internal-error");const a=Dg(r.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(e.uid===l,i,"user-mismatch"),ls._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&fi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(e,t,n=!1){if(yn(e.app))return Promise.reject(Wi(e));const i="signIn",s=await HS(e,i,t),r=await ls._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function gx(e,t,n,i){return ue(e).onIdTokenChanged(t,n,i)}function px(e,t,n){return ue(e).beforeAuthStateChanged(t,n)}const Ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=1e3,_x=10;class FS extends GS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);KD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,_x):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}FS.type="LOCAL";const vx=FS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends GS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}QS.type="SESSION";const YS=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new oh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await Ex(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=Vg("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function Ax(e){Mn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function Sx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function wx(){return KS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firebaseLocalStorageDb",Rx=1,Tc="firebaseLocalStorage",$S="fbase_key";class vl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lh(e,t){return e.transaction([Tc],t?"readwrite":"readonly").objectStore(Tc)}function Ix(){const e=indexedDB.deleteDatabase(XS);return new vl(e).toPromise()}function zd(){const e=indexedDB.open(XS,Rx);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Tc,{keyPath:$S})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Tc)?t(i):(i.close(),await Ix(),t(await zd()))})})}async function Sv(e,t,n){const i=lh(e,!0).put({[$S]:t,value:n});return new vl(i).toPromise()}async function Cx(e,t){const n=lh(e,!1).get(t),i=await new vl(n).toPromise();return i===void 0?null:i.value}function bv(e,t){const n=lh(e,!0).delete(t);return new vl(n).toPromise()}const Nx=800,Dx=3;class ZS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>Dx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oh._getInstance(wx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Sx(),!this.activeServiceWorker)return;this.sender=new Tx(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await zd();return await Sv(t,Ec,"1"),await bv(t,Ec),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Sv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Cx(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>bv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=lh(s,!1).getAll();return new vl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZS.type="LOCAL";const xx=ZS;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e,t){return t?ti(t):(W(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends BS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Lr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Lr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Lr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Vx(e){return mx(e.auth,new Mg(e),e.bypassAuthState)}function Mx(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),dx(n,new Mg(e),e.bypassAuthState)}async function kx(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),fx(n,new Mg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Vx;case"linkViaPopup":case"linkViaRedirect":return kx;case"reauthViaPopup":case"reauthViaRedirect":return Mx;default:fi(this.auth,"internal-error")}}resolve(t){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new yl(2e3,1e4);class wr extends WS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,wr.currentPopupAction&&wr.currentPopupAction.cancel(),wr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return W(t,this.auth,"internal-error"),t}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const t=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Px.get())};t()}}wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="pendingRedirect",Su=new Map;class Lx extends WS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Su.get(this.auth._key());if(!t){try{const i=await jx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Su.set(this.auth._key(),t)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jx(e,t){const n=qx(t),i=Bx(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function zx(e,t){Su.set(e._key(),t)}function Bx(e){return ti(e._redirectPersistence)}function qx(e){return Au(Ux,e.config.apiKey,e.name)}async function Hx(e,t,n=!1){if(yn(e.app))return Promise.reject(Wi(e));const i=ah(e),s=Ox(i,t),a=await new Lx(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=10*60*1e3;class Fx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Qx(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!JS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Gx&&this.cachedEventUids.clear(),this.cachedEventUids.has(wv(t))}saveEventToCache(t){this.cachedEventUids.add(wv(t)),this.lastProcessedEventTime=Date.now()}}function wv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function JS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Qx(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(e,t={}){return ya(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xx=/^https?/;async function $x(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Yx(e);for(const n of t)try{if(Zx(n))return}catch{}fi(e,"unauthorized-domain")}function Zx(e){const t=Ld(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Xx.test(n))return!1;if(Kx.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new yl(3e4,6e4);function Rv(){const e=Mn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Jx(e){return new Promise((t,n)=>{var s,r,a;function i(){Rv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Rv(),n(Vn(e,"network-request-failed"))},timeout:Wx.get()})}if((r=(s=Mn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Mn().gapi)!=null&&a.load)i();else{const l=ix("iframefcb");return Mn()[l]=()=>{gapi.load?i():n(Vn(e,"network-request-failed"))},ex(`${nx()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw bu=null,t})}let bu=null;function t4(e){return bu=bu||Jx(e),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new yl(5e3,15e3),n4="__/auth/iframe",i4="emulator/auth/iframe",s4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a4(e){const t=e.config;W(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ng(t,i4):`https://${e.config.authDomain}/${n4}`,i={apiKey:t.apiKey,appName:e.name,v:ha},s=r4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ol(i).slice(1)}`}async function o4(e){const t=await t4(e),n=Mn().gapi;return W(n,e,"internal-error"),t.open({where:document.body,url:a4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Vn(e,"network-request-failed"),l=Mn().setTimeout(()=>{r(a)},e4.get());function u(){Mn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,c4=600,h4="_blank",f4="http://localhost";class Iv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d4(e,t,n,i=u4,s=c4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...l4,width:i.toString(),height:s.toString(),top:r,left:a},h=be().toLowerCase();n&&(l=VS(h)?h4:n),xS(h)&&(t=t||f4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,D])=>`${m}${_}=${D},`,"");if(YD(h)&&l!=="_self")return m4(t||"",l),new Iv(null);const g=window.open(t||"",l,d);W(g,e,"popup-blocked");try{g.focus()}catch{}return new Iv(g)}function m4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="__/auth/handler",p4="emulator/auth/handler",y4=encodeURIComponent("fac");async function Cv(e,t,n,i,s,r){W(e.config.authDomain,e,"auth-domain-config-required"),W(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ha,eventId:s};if(t instanceof qS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",t2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof _l){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${y4}=${encodeURIComponent(u)}`:"";return`${_4(e)}?${ol(l).slice(1)}${h}`}function _4({config:e}){return e.emulator?Ng(e,p4):`https://${e.authDomain}/${g4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="webStorageSupport";class v4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YS,this._completeRedirectFn=Hx,this._overrideRedirectResult=zx}async _openPopup(t,n,i,s){var a;di((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Cv(t,n,i,Ld(),s);return d4(t,r,Vg())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Cv(t,n,i,Ld(),s);return Ax(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(di(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await o4(t),i=new Fx(t);return n.register("authEvent",s=>(W(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(yf,{type:yf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[yf];r!==void 0&&n(!!r),fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$x(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return LS()||OS()||xg()}}const E4=v4;var Nv="@firebase/auth",Dv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S4(e){$r(new Us("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jS(e)},h=new JD(i,s,r,u);return rx(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),$r(new Us("auth-internal",t=>{const n=ah(t.getProvider("auth").getImmediate());return(i=>new T4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(Nv,Dv,A4(e)),Ki(Nv,Dv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=5*60,w4=V0("authIdTokenMaxAge")||b4;let xv=null;const R4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>w4)return;const s=n==null?void 0:n.token;xv!==s&&(xv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function I4(e=j0()){const t=qm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=sx(e,{popupRedirectResolver:E4,persistence:[xx,vx,YS]}),i=V0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=R4(r.toString());px(n,a,()=>a(n.currentUser)),gx(n,l=>a(l))}}const s=x0("auth");return s&&ax(n,`http://${s}`),n}function C4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}tx({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Vn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",C4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S4("Browser");const N4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},tb=L0(N4),He=hD(tb),D4=I4(tb),eb="417641827",nb=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:w.jsx("path",{d:"m9 18 6-6-6-6"})}),ib=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M19 12H5"}),w.jsx("polyline",{points:"12 19 5 12 12 5"})]}),sb=({className:e="",filled:t=!1})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("circle",{cx:"11",cy:"11",r:"8"}),w.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),x4=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[w.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),w.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),O4=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),rb=({className:e="",filled:t=!1})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),V4=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),w.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),ab=({className:e="",filled:t=!1})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),M4=({className:e="",filled:t=!1})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),w.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),k4=({className:e="",filled:t=!1})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M4 22h16"}),w.jsx("path",{d:"M7 22V2h10v20"}),w.jsx("path",{d:"M7 12h4"})]}),P4=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m15 18-6-6 6-6"})}),U4=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m9 18 6-6-6-6"})}),L4=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),w.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),j4=()=>w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[w.jsx(rb,{className:"animate-pulse-heart text-accent",filled:!0}),w.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка новелл..."})]}),kg=({onClose:e,onSelectPlan:t,botUsername:n})=>{const i=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[w.jsx(O4,{className:"mx-auto mb-4 text-accent"}),w.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),w.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),w.jsx("div",{className:"space-y-3",children:i.map(s=>w.jsxs("button",{onClick:()=>t(s),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[w.jsx("p",{className:"font-bold",children:s.name}),w.jsxs("p",{className:"text-sm",children:[s.price," ₽"]})]},s.duration))}),w.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Pg=({onClose:e,onSelectMethod:t,plan:n,botUsername:i,userId:s})=>{const r=async a=>{var u;const l=(u=window.Telegram)==null?void 0:u.WebApp;l&&s&&n&&l.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async h=>{if(h){const d=pn(He,"users",s);try{await Ig(d,{pendingSubscription:{...n,method:a,date:Ud()}}),l.openTelegramLink(`https://t.me/${i}?start=true`),l.close()}catch(g){console.error("Ошибка записи в Firebase:",g),l.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})};return w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[w.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),w.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("button",{onClick:()=>r("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[w.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),w.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),w.jsxs("button",{onClick:()=>r("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[w.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),w.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),w.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})})},Bs=({title:e,onBack:t})=>w.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&w.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:w.jsx(ib,{})}),w.jsx("h1",{className:"text-xl font-bold",children:e})]}),Ug=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>w.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((s,r)=>w.jsx("div",{onClick:()=>t(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:w.jsxs("div",{className:"relative transition-all duration-300",children:[w.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:w.jsx(ab,{filled:n.includes(s.id),width:"20",height:"20"})}),w.jsx("img",{src:`/tene/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),w.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:s.title})]})},s.id)):w.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),z4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=G.useState(!1),[m,_]=G.useState(null),[D,V]=G.useState("newest"),[M,A]=G.useState(!1),v=G.useRef(null),[I,x]=G.useState(!1),L=i&&new Date(i.expires_at)>new Date,B=G.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);G.useEffect(()=>{v.current&&setTimeout(()=>{v.current&&x(v.current.scrollHeight>v.current.clientHeight)},100)},[e.description]);const T=G.useMemo(()=>{const R=[...a];return D==="newest"?R.reverse():a},[a,D]),y=R=>{!L&&R.isPaid?g(!0):t(R)},E=()=>{if(B){const R=a.find(C=>C.id===B);R&&t(R)}},b=R=>_(R);return w.jsxs("div",{className:"text-text-main",children:[w.jsx(Bs,{title:e.title,onBack:h}),w.jsxs("div",{className:"relative h-64",children:[w.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),w.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[w.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),w.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),w.jsxs("div",{className:"p-4",children:[w.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(R=>w.jsx("button",{onClick:()=>n(R),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:R},R))}),w.jsx("div",{ref:v,className:`relative overflow-hidden transition-all duration-500 ${M?"max-h-full":"max-h-24"}`,children:w.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),I&&w.jsx("div",{className:"text-right",children:w.jsx("button",{onClick:()=>A(!M),className:"text-sm font-semibold text-accent mb-4",children:M?"Скрыть":"Читать полностью..."})}),B&&w.jsxs("button",{onClick:E,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",B,")"]}),w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),w.jsx("button",{onClick:()=>V(R=>R==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:D==="newest"?"Сначала новые":"Сначала старые"})]}),L&&w.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?w.jsx("p",{children:"Загрузка глав..."}):w.jsx("div",{className:"flex flex-col gap-3",children:T.map(R=>{const C=!L&&R.isPaid,S=B===R.id;return w.jsxs("div",{onClick:()=>y(R),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${C?"opacity-70":""}`,children:[w.jsxs("div",{className:"flex items-center gap-3",children:[S&&w.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),w.jsx("p",{className:"font-semibold",children:R.title})]}),C?w.jsx(x4,{}):w.jsx(nb,{})]},R.id)})}),d&&w.jsx(kg,{onClose:()=>g(!1),onSelectPlan:b}),m&&w.jsx(Pg,{onClose:()=>_(null),plan:m,botUsername:s,userId:r})]})]})},B4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:s,userName:r,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g})=>{const[m,_]=G.useState([]),[D,V]=G.useState(""),[M,A]=G.useState(null),[v,I]=G.useState(""),[x,L]=G.useState(0),[B,T]=G.useState(!1),[y,E]=G.useState(!1),[b,R]=G.useState(!1),[C,S]=G.useState(!1),[Dt,we]=G.useState(null),[q,Q]=G.useState(""),[X,ft]=G.useState(!0),vt=h&&new Date(h.expires_at)>new Date,Re=G.useMemo(()=>pn(He,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);G.useEffect(()=>{const K=Pd(Re,tt=>{var lt;L(((lt=tt.data())==null?void 0:lt.likeCount)||0)}),St=ED(ov(He,`chapters_metadata/${t.id}_${e.id}/comments`),TD("timestamp","asc")),nn=Pd(St,tt=>{const lt=tt.docs.map(zt=>({id:zt.id,...zt.data()}));_(lt)});if(s&&s!=="guest_user"){const tt=pn(He,`chapters_metadata/${t.id}_${e.id}/likes`,s);gc(tt).then(lt=>T(lt.exists()))}return()=>{K(),nn()}},[Re,t.id,e.id,s]),G.useEffect(()=>{(async()=>{if(ft(!0),Q(""),e.isPaid&&!vt){ft(!1),Q(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const St=pn(He,"chapter_content",`${t.id}-${e.id}`),nn=await gc(St);nn.exists()?Q(nn.data().content):Q(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(St){console.error("Ошибка загрузки главы:",St),Q(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{ft(!1)}})()},[t.id,e.id,vt]);const Gt=async K=>{if(K.preventDefault(),!D.trim()||!s||s==="guest_user")return;const St=ov(He,`chapters_metadata/${t.id}_${e.id}/comments`);await wD(St,{userId:s,userName:r||"Аноним",text:D,timestamp:Ud()}),V("")},pt=K=>{A(K.id),I(K.text)},Le=async K=>{if(!v.trim())return;const St=pn(He,`chapters_metadata/${t.id}_${e.id}/comments`,K);await Ig(St,{text:v}),A(null),I("")},ee=async K=>{const St=pn(He,`chapters_metadata/${t.id}_${e.id}/comments`,K);await bD(St)},Xs=async()=>{if(!s||s==="guest_user")return;const K=pn(He,`chapters_metadata/${t.id}_${e.id}/likes`,s);await ND(He,async St=>{var zt;const nn=await St.get(K),lt=((zt=(await St.get(Re)).data())==null?void 0:zt.likeCount)||0;nn.exists()?(St.delete(K),St.set(Re,{likeCount:Math.max(0,lt-1)},{merge:!0}),T(!1)):(St.set(K,{timestamp:Ud()}),St.set(Re,{likeCount:lt+1},{merge:!0}),T(!0))})},en=K=>{K&&(!vt&&K.isPaid?(E(!1),S(!0)):(l(K),E(!1)))},_a=K=>{we(K),S(!1)},$s=u.findIndex(K=>K.id===e.id),dn=u[$s-1],Ln=u[$s+1],ds=K=>window.marked?`<div class="prose">${window.marked.parse(K)}</div>`:K;return w.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[w.jsx(Bs,{title:t.title,onBack:g}),w.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[w.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),w.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:X?"<p>Загрузка...</p>":ds(q)}}),w.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),w.jsxs("div",{className:"border-t border-border-color pt-8",children:[w.jsx("div",{className:"flex items-center gap-4 mb-8",children:w.jsxs("button",{onClick:Xs,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[w.jsx(rb,{filled:B,className:B?"text-accent":""}),w.jsx("span",{className:"font-bold text-lg",children:x})]})}),w.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),w.jsxs("div",{className:"space-y-4 mb-6",children:[m.map(K=>w.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[w.jsx("p",{className:"font-bold text-sm",children:K.userName}),M===K.id?w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("input",{type:"text",value:v,onChange:St=>I(St.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),w.jsx("button",{onClick:()=>Le(K.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),w.jsx("button",{onClick:()=>A(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):w.jsx("p",{className:"text-sm mt-1 opacity-90",children:K.text}),(s===K.userId||s===eb)&&w.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[w.jsx("button",{onClick:()=>pt(K),className:"text-xs text-gray-500",children:"Редактировать"}),w.jsx("button",{onClick:()=>ee(K.id),className:"text-xs text-red-500",children:"Удалить"})]})]},K.id)),m.length===0&&w.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})]}),w.jsxs("form",{onSubmit:Gt,className:"flex items-center gap-2",children:[w.jsx("input",{type:"text",value:D,onChange:K=>V(K.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),w.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:w.jsx(V4,{className:"w-5 h-5"})})]})]})]}),w.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[w.jsx("button",{onClick:()=>en(dn),disabled:!dn,className:"p-2 disabled:opacity-50",children:w.jsx(ib,{})}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>E(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),w.jsx("button",{onClick:()=>R(!0),className:"p-2 rounded-lg bg-background",children:w.jsx(L4,{})})]}),w.jsx("button",{onClick:()=>en(Ln),disabled:!Ln,className:"p-2 disabled:opacity-50",children:w.jsx(nb,{className:"opacity-100"})})]}),y&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>E(!1),children:w.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:K=>K.stopPropagation(),children:[w.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),w.jsx("div",{className:"overflow-y-auto",children:w.jsx("div",{className:"flex flex-col gap-2",children:u.map(K=>w.jsx("button",{onClick:()=>en(K),className:`p-2 text-left rounded-md ${K.id===e.id?"bg-accent text-white":"bg-background"}`,children:K.title},K.id))})})]})}),b&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>R(!1),children:w.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:K=>K.stopPropagation(),children:[w.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{children:"Размер текста"}),w.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[w.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),w.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),C&&w.jsx(kg,{onClose:()=>S(!1),onSelectPlan:_a,botUsername:d}),Dt&&w.jsx(Pg,{onClose:()=>we(null),plan:Dt,botUsername:d,userId:s})]})},q4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=G.useState(""),a=G.useMemo(()=>s?e.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())):[],[e,s]);return w.jsxs("div",{children:[w.jsx(Bs,{title:"Поиск"}),w.jsxs("div",{className:"p-4",children:[w.jsxs("div",{className:"relative mb-6",children:[w.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:w.jsx(sb,{className:"text-text-main opacity-50"})}),w.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),w.jsx(Ug,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},H4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>w.jsxs("div",{children:[w.jsx(Bs,{title:"Закладки"}),w.jsx(Ug,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),G4=({subscription:e,onGetSubscriptionClick:t})=>{const n=e&&new Date(e.expires_at)>new Date;return w.jsxs("div",{children:[w.jsx(Bs,{title:"Профиль"}),w.jsx("div",{className:"p-4 space-y-4",children:w.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[w.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),n?w.jsxs("div",{children:[w.jsx("p",{className:"text-green-500",children:"Активна"}),w.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(e.expires_at).toLocaleDateString()]})]}):w.jsxs("div",{children:[w.jsx("p",{className:"text-red-500",children:"Неактивна"}),w.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),w.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]})})]})},F4=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:k4},{id:"search",label:"Поиск",icon:sb},{id:"bookmarks",label:"Закладки",icon:ab},{id:"profile",label:"Профиль",icon:M4}];return w.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:w.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>w.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[w.jsx(i.icon,{filled:e===i.id}),w.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},Q4=({onReadMore:e})=>{const[t,n]=G.useState([]),[i,s]=G.useState(0);G.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%t.length),a=()=>s(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return w.jsx("div",{className:"p-4",children:w.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[w.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"font-bold text-text-main",children:l.title}),w.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),w.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:w.jsx(P4,{className:"w-5 h-5"})}),w.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:w.jsx(U4,{className:"w-5 h-5"})})]})]})})},Y4=({newsItem:e,onClose:t})=>w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:w.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[w.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),w.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),w.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function K4(){const[e,t]=G.useState(16),[n,i]=G.useState("font-sans"),[s,r]=G.useState("list"),[a,l]=G.useState("library"),[u,h]=G.useState([]),[d,g]=G.useState(null),[m,_]=G.useState(null),[D,V]=G.useState(null),[M,A]=G.useState(null),[v,I]=G.useState(null),[x,L]=G.useState(null),[B,T]=G.useState(!0),[y,E]=G.useState([]),[b,R]=G.useState(!0),[C,S]=G.useState(null),[Dt,we]=G.useState([]),[q,Q]=G.useState(!1),[X,ft]=G.useState(null),[vt,Re]=G.useState(null),Gt="tenebrisverbot",pt=G.useCallback(async tt=>{if(v&&v!=="guest_user"){const lt=pn(He,"users",v);try{await Ig(lt,tt)}catch(zt){zt.code==="not-found"?await mv(lt,tt):console.error("Не удалось обновить данные пользователя:",zt)}}},[v]),Le=G.useCallback(tt=>{t(lt=>{const zt=Math.max(12,Math.min(32,lt+tt));return pt({settings:{fontSize:zt,fontClass:n}}),zt})},[n,pt]);G.useEffect(()=>{(async()=>{var lt,zt,Zs,jn,ms,An;try{const je=(lt=window.Telegram)==null?void 0:lt.WebApp;let zn="guest_user";if(je&&(je.ready(),je.expand(),zn=((jn=(Zs=(zt=je.initDataUnsafe)==null?void 0:zt.user)==null?void 0:Zs.id)==null?void 0:jn.toString())||"guest_user",L(((An=(ms=je.initDataUnsafe)==null?void 0:ms.user)==null?void 0:An.first_name)||null)),I(zn),await hx(D4),zn!=="guest_user"){const $t=pn(He,"users",zn);(await gc($t)).exists()||await mv($t,{userId:zn}),Pd($t,Ta=>{if(Ta.exists()){const Bn=Ta.data();A(Bn.subscription||null),S(Bn.lastRead||null),we(Bn.bookmarks||[]),Bn.settings&&(t(Bn.settings.fontSize||16),i(Bn.settings.fontClass||"font-sans"))}})}const va=await fetch("/tene/data/novels.json");if(!va.ok)throw new Error("Failed to fetch novels");const ne=await va.json();h(ne.novels)}catch(je){console.error("Ошибка инициализации:",je)}finally{T(!1)}})()},[]),G.useEffect(()=>{if(!d){E([]);return}(async()=>{R(!0);try{const lt=pn(He,"chapter_info",d.id.toString()),zt=await gc(lt);if(zt.exists()){const jn=zt.data().chapters||{},ms=Object.keys(jn).map(An=>({id:parseInt(An),title:`Глава ${An}`,isPaid:jn[An].isPaid||!1})).sort((An,je)=>An.id-je.id);E(ms)}else console.log("Документ с главами не найден в chapter_info!"),E([])}catch(lt){console.error("Ошибка загрузки глав из Firebase:",lt),E([])}finally{R(!1)}})()},[d]);const ee=G.useCallback(()=>{s==="reader"?r("details"):s==="details"&&(r("list"),V(null))},[s]);G.useEffect(()=>{var lt;const tt=(lt=window.Telegram)==null?void 0:lt.WebApp;if(tt)return tt.onEvent("backButtonClicked",ee),s==="list"?tt.BackButton.hide():tt.BackButton.show(),()=>tt.offEvent("backButtonClicked",ee)},[s,ee]),G.useEffect(()=>{var lt;const tt=(lt=window.Telegram)==null?void 0:lt.WebApp;tt&&(tt.setHeaderColor("#FFFFFF"),tt.setBackgroundColor("#F5F1ED"))},[]);const Xs=G.useCallback(async tt=>{if(_(tt),r("reader"),v&&v!=="guest_user"&&d){const lt={...C||{},[d.id]:{novelId:d.id,chapterId:tt.id,timestamp:new Date().toISOString()}};S(lt),await pt({lastRead:lt})}},[v,d,C,pt]),en=tt=>{g(tt),r("details")},_a=tt=>{V(tt),r("list"),l("library")},$s=()=>{V(null)},dn=G.useCallback(async tt=>{const lt=Dt.includes(tt)?Dt.filter(zt=>zt!==tt):[...Dt,tt];we(lt),await pt({bookmarks:lt})},[Dt,pt]),Ln=G.useMemo(()=>u.filter(tt=>Dt.includes(tt.id)),[u,Dt]),ds=()=>{Q(!0)},K=tt=>{ft(tt),Q(!1)};if(B)return w.jsx(j4,{});const St=v===eb,nn=()=>{if(s==="details")return w.jsx(z4,{novel:d,onSelectChapter:Xs,onGenreSelect:_a,subscription:M,botUsername:Gt,userId:v,chapters:y,isLoadingChapters:b,lastReadData:C,onBack:ee});if(s==="reader")return w.jsx(B4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:Le,userId:v,userName:x,currentFontClass:n,onSelectChapter:Xs,allChapters:y,subscription:M,botUsername:Gt,onBack:ee});switch(a){case"library":return w.jsxs(w.Fragment,{children:[w.jsx(Bs,{title:"Библиотека"}),w.jsx(Q4,{onReadMore:Re}),D&&w.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[w.jsxs("p",{className:"text-sm",children:[w.jsx("span",{className:"opacity-70",children:"Жанр:"}),w.jsx("strong",{className:"ml-2",children:D})]}),w.jsx("button",{onClick:$s,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),w.jsx(Ug,{novels:u.filter(tt=>!D||tt.genres.includes(tt.genre)),onSelectNovel:en,bookmarks:Dt,onToggleBookmark:dn})]});case"search":return w.jsx(q4,{novels:u,onSelectNovel:en,bookmarks:Dt,onToggleBookmark:dn});case"bookmarks":return w.jsx(H4,{novels:Ln,onSelectNovel:en,bookmarks:Dt,onToggleBookmark:dn});case"profile":return w.jsx(G4,{subscription:M,onGetSubscriptionClick:ds});default:return w.jsx(Bs,{title:"Библиотека"})}};return w.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${St?"":"no-select"}`,children:[w.jsx("div",{className:"pb-20",children:nn()}),s==="list"&&w.jsx(F4,{activeTab:a,setActiveTab:l}),q&&w.jsx(kg,{onClose:()=>Q(!1),onSelectPlan:K,botUsername:Gt}),X&&w.jsx(Pg,{onClose:()=>ft(null),plan:X,botUsername:Gt,userId:v}),vt&&w.jsx(Y4,{newsItem:vt,onClose:()=>Re(null)})]})}CR.createRoot(document.getElementById("root")).render(w.jsx(G.StrictMode,{children:w.jsx(K4,{})}));
