(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ZA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mv={exports:{}},dc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JA=Symbol.for("react.transitional.element"),WA=Symbol.for("react.fragment");function gv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:JA,type:e,key:i,ref:t!==void 0?t:null,props:n}}dc.Fragment=WA;dc.jsx=gv;dc.jsxs=gv;mv.exports=dc;var v=mv.exports,pv={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd=Symbol.for("react.transitional.element"),tb=Symbol.for("react.portal"),eb=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),ib=Symbol.for("react.profiler"),rb=Symbol.for("react.consumer"),sb=Symbol.for("react.context"),ab=Symbol.for("react.forward_ref"),ob=Symbol.for("react.suspense"),lb=Symbol.for("react.memo"),yv=Symbol.for("react.lazy"),Tp=Symbol.iterator;function ub(e){return e===null||typeof e!="object"?null:(e=Tp&&e[Tp]||e["@@iterator"],typeof e=="function"?e:null)}var _v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vv=Object.assign,Tv={};function ia(e,t,n){this.props=e,this.context=t,this.refs=Tv,this.updater=n||_v}ia.prototype.isReactComponent={};ia.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ia.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ev(){}Ev.prototype=ia.prototype;function Vd(e,t,n){this.props=e,this.context=t,this.refs=Tv,this.updater=n||_v}var Od=Vd.prototype=new Ev;Od.constructor=Vd;vv(Od,ia.prototype);Od.isPureReactComponent=!0;var Ep=Array.isArray,Lt={H:null,A:null,T:null,S:null,V:null},Av=Object.prototype.hasOwnProperty;function Md(e,t,n,i,r,s){return n=s.ref,{$$typeof:Dd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function cb(e,t){return Md(e.type,t,void 0,void 0,void 0,e.props)}function kd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dd}function hb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ap=/\/+/g;function ph(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hb(""+e.key):t.toString(36)}function bp(){}function fb(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(bp,bp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function is(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Dd:case tb:a=!0;break;case yv:return a=e._init,is(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+ph(e,0):i,Ep(r)?(n="",a!=null&&(n=a.replace(Ap,"$&/")+"/"),is(r,t,n,"",function(h){return h})):r!=null&&(kd(r)&&(r=cb(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Ap,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Ep(e))for(var u=0;u<e.length;u++)i=e[u],s=l+ph(i,u),a+=is(i,t,n,s,r);else if(u=ub(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+ph(i,u++),a+=is(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return is(fb(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Dl(e,t,n){if(e==null)return e;var i=[],r=0;return is(e,i,"","",function(s){return t.call(n,s,r++)}),i}function db(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mb(){}et.Children={map:Dl,forEach:function(e,t,n){Dl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Dl(e,function(){t++}),t},toArray:function(e){return Dl(e,function(t){return t})||[]},only:function(e){if(!kd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=ia;et.Fragment=eb;et.Profiler=ib;et.PureComponent=Vd;et.StrictMode=nb;et.Suspense=ob;et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;et.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Lt.H.useMemoCache(e)}};et.cache=function(e){return function(){return e.apply(null,arguments)}};et.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=vv({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Av.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Md(e.type,r,void 0,void 0,s,i)};et.createContext=function(e){return e={$$typeof:sb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:rb,_context:e},e};et.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Av.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Md(e,s,void 0,void 0,null,r)};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:ab,render:e}};et.isValidElement=kd;et.lazy=function(e){return{$$typeof:yv,_payload:{_status:-1,_result:e},_init:db}};et.memo=function(e,t){return{$$typeof:lb,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=Lt.T,n={};Lt.T=n;try{var i=e(),r=Lt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(mb,Sp)}catch(s){Sp(s)}finally{Lt.T=t}};et.unstable_useCacheRefresh=function(){return Lt.H.useCacheRefresh()};et.use=function(e){return Lt.H.use(e)};et.useActionState=function(e,t,n){return Lt.H.useActionState(e,t,n)};et.useCallback=function(e,t){return Lt.H.useCallback(e,t)};et.useContext=function(e){return Lt.H.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e,t){return Lt.H.useDeferredValue(e,t)};et.useEffect=function(e,t,n){var i=Lt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};et.useId=function(){return Lt.H.useId()};et.useImperativeHandle=function(e,t,n){return Lt.H.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return Lt.H.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return Lt.H.useLayoutEffect(e,t)};et.useMemo=function(e,t){return Lt.H.useMemo(e,t)};et.useOptimistic=function(e,t){return Lt.H.useOptimistic(e,t)};et.useReducer=function(e,t,n){return Lt.H.useReducer(e,t,n)};et.useRef=function(e){return Lt.H.useRef(e)};et.useState=function(e){return Lt.H.useState(e)};et.useSyncExternalStore=function(e,t,n){return Lt.H.useSyncExternalStore(e,t,n)};et.useTransition=function(){return Lt.H.useTransition()};et.version="19.1.1";pv.exports=et;var H=pv.exports;const gb=ZA(H);var bv={exports:{}},mc={},Sv={exports:{}},wv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,X){var Y=q.length;q.push(X);t:for(;0<Y;){var gt=Y-1>>>1,xt=q[gt];if(0<r(xt,X))q[gt]=X,q[Y]=xt,Y=gt;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var X=q[0],Y=q.pop();if(Y!==X){q[0]=Y;t:for(var gt=0,xt=q.length,gn=xt>>>1;gt<gn;){var zt=2*(gt+1)-1,ct=q[zt],$t=zt+1,be=q[$t];if(0>r(ct,Y))$t<xt&&0>r(be,ct)?(q[gt]=be,q[$t]=Y,gt=$t):(q[gt]=ct,q[zt]=Y,gt=zt);else if($t<xt&&0>r(be,Y))q[gt]=be,q[$t]=Y,gt=$t;else break t}}return X}function r(q,X){var Y=q.sortIndex-X.sortIndex;return Y!==0?Y:q.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,x=!1,O=!1,V=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(q){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=q)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function L(q){if(O=!1,D(q),!x)if(n(u)!==null)x=!0,B||(B=!0,I());else{var X=n(h);X!==null&&me(L,X.startTime-q)}}var B=!1,E=-1,y=5,A=-1;function w(){return V?!0:!(e.unstable_now()-A<y)}function C(){if(V=!1,B){var q=e.unstable_now();A=q;var X=!0;try{t:{x=!1,O&&(O=!1,T(E),E=-1),_=!0;var Y=m;try{e:{for(D(q),g=n(u);g!==null&&!(g.expirationTime>q&&w());){var gt=g.callback;if(typeof gt=="function"){g.callback=null,m=g.priorityLevel;var xt=gt(g.expirationTime<=q);if(q=e.unstable_now(),typeof xt=="function"){g.callback=xt,D(q),X=!0;break e}g===n(u)&&i(u),D(q)}else i(u);g=n(u)}if(g!==null)X=!0;else{var gn=n(h);gn!==null&&me(L,gn.startTime-q),X=!1}}break t}finally{g=null,m=Y,_=!1}X=void 0}}finally{X?I():B=!1}}}var I;if(typeof R=="function")I=function(){R(C)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,yt=b.port2;b.port1.onmessage=C,I=function(){yt.postMessage(null)}}else I=function(){S(C,0)};function me(q,X){E=S(function(){q(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Y=m;m=X;try{return q()}finally{m=Y}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Y=m;m=q;try{return X()}finally{m=Y}},e.unstable_scheduleCallback=function(q,X,Y){var gt=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?gt+Y:gt):Y=gt,q){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=Y+xt,q={id:d++,callback:X,priorityLevel:q,startTime:Y,expirationTime:xt,sortIndex:-1},Y>gt?(q.sortIndex=Y,t(h,q),n(u)===null&&q===n(h)&&(O?(T(E),E=-1):O=!0,me(L,Y-gt))):(q.sortIndex=xt,t(u,q),x||_||(x=!0,B||(B=!0,I()))),q},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(q){var X=m;return function(){var Y=m;m=X;try{return q.apply(this,arguments)}finally{m=Y}}}})(wv);Sv.exports=wv;var pb=Sv.exports,Rv={exports:{}},Ue={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=H;function Iv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pi(){}var ke={d:{f:pi,r:function(){throw Error(Iv(522))},D:pi,C:pi,L:pi,m:pi,X:pi,S:pi,M:pi},p:0,findDOMNode:null},_b=Symbol.for("react.portal");function vb(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_b,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Qa=yb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function gc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ue.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ke;Ue.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Iv(299));return vb(e,t,null,n)};Ue.flushSync=function(e){var t=Qa.T,n=ke.p;try{if(Qa.T=null,ke.p=2,e)return e()}finally{Qa.T=t,ke.p=n,ke.d.f()}};Ue.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ke.d.C(e,t))};Ue.prefetchDNS=function(e){typeof e=="string"&&ke.d.D(e)};Ue.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=gc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ke.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ke.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ue.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=gc(t.as,t.crossOrigin);ke.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ke.d.M(e)};Ue.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=gc(n,t.crossOrigin);ke.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ue.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=gc(t.as,t.crossOrigin);ke.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ke.d.m(e)};Ue.requestFormReset=function(e){ke.d.r(e)};Ue.unstable_batchedUpdates=function(e,t){return e(t)};Ue.useFormState=function(e,t,n){return Qa.H.useFormState(e,t,n)};Ue.useFormStatus=function(){return Qa.H.useHostTransitionStatus()};Ue.version="19.1.1";function Cv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cv)}catch(e){console.error(e)}}Cv(),Rv.exports=Ue;var Tb=Rv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae=pb,Nv=H,Eb=Tb;function P(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wp(e){if(zo(e)!==e)throw Error(P(188))}function Ab(e){var t=e.alternate;if(!t){if(t=zo(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return wp(r),e;if(s===i)return wp(r),t;s=s.sibling}throw Error(P(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function Vv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Vv(e),t!==null)return t;e=e.sibling}return null}var Ut=Object.assign,bb=Symbol.for("react.element"),Vl=Symbol.for("react.transitional.element"),La=Symbol.for("react.portal"),hs=Symbol.for("react.fragment"),Ov=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),Sb=Symbol.for("react.provider"),Mv=Symbol.for("react.consumer"),Yn=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),df=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),mf=Symbol.for("react.activity"),wb=Symbol.for("react.memo_cache_sentinel"),Rp=Symbol.iterator;function xa(e){return e===null||typeof e!="object"?null:(e=Rp&&e[Rp]||e["@@iterator"],typeof e=="function"?e:null)}var Rb=Symbol.for("react.client.reference");function gf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Rb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hs:return"Fragment";case hf:return"Profiler";case Ov:return"StrictMode";case ff:return"Suspense";case df:return"SuspenseList";case mf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case La:return"Portal";case Yn:return(e.displayName||"Context")+".Provider";case Mv:return(e._context.displayName||"Context")+".Consumer";case Ud:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pd:return t=e.displayName||null,t!==null?t:gf(e.type)||"Memo";case Ti:t=e._payload,e=e._init;try{return gf(e(t))}catch{}}return null}var ja=Array.isArray,Z=Nv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=Eb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wr={pending:!1,data:null,method:null,action:null},pf=[],fs=-1;function Pn(e){return{current:e}}function de(e){0>fs||(e.current=pf[fs],pf[fs]=null,fs--)}function jt(e,t){fs++,pf[fs]=e.current,e.current=t}var xn=Pn(null),go=Pn(null),ki=Pn(null),vu=Pn(null);function Tu(e,t){switch(jt(ki,t),jt(go,e),jt(xn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Dy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Dy(t),e=ZT(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}de(xn),jt(xn,e)}function js(){de(xn),de(go),de(ki)}function yf(e){e.memoizedState!==null&&jt(vu,e);var t=xn.current,n=ZT(t,e.type);t!==n&&(jt(go,e),jt(xn,n))}function Eu(e){go.current===e&&(de(xn),de(go)),vu.current===e&&(de(vu),wo._currentValue=wr)}var _f=Object.prototype.hasOwnProperty,Ld=ae.unstable_scheduleCallback,yh=ae.unstable_cancelCallback,Ib=ae.unstable_shouldYield,Cb=ae.unstable_requestPaint,Dn=ae.unstable_now,Nb=ae.unstable_getCurrentPriorityLevel,kv=ae.unstable_ImmediatePriority,Uv=ae.unstable_UserBlockingPriority,Au=ae.unstable_NormalPriority,xb=ae.unstable_LowPriority,Pv=ae.unstable_IdlePriority,Db=ae.log,Vb=ae.unstable_setDisableYieldValue,Bo=null,Je=null;function Ni(e){if(typeof Db=="function"&&Vb(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Bo,e)}catch{}}var We=Math.clz32?Math.clz32:kb,Ob=Math.log,Mb=Math.LN2;function kb(e){return e>>>=0,e===0?32:31-(Ob(e)/Mb|0)|0}var Ol=256,Ml=4194304;function vr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=vr(i):(a&=l,a!==0?r=vr(a):n||(n=l&~e,n!==0&&(r=vr(n))))):(l=i&~s,l!==0?r=vr(l):a!==0?r=vr(a):n||(n=i&~e,n!==0&&(r=vr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function qo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ub(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lv(){var e=Ol;return Ol<<=1,!(Ol&4194048)&&(Ol=256),e}function jv(){var e=Ml;return Ml<<=1,!(Ml&62914560)&&(Ml=4194304),e}function _h(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ho(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pb(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-We(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&zv(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function zv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-We(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Bv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-We(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function jd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function qv(){var e=vt.p;return e!==0?e:(e=window.event,e===void 0?32:oE(e.type))}function Lb(e,t){var n=vt.p;try{return vt.p=e,t()}finally{vt.p=n}}var ar=Math.random().toString(36).slice(2),Ne="__reactFiber$"+ar,Be="__reactProps$"+ar,ra="__reactContainer$"+ar,vf="__reactEvents$"+ar,jb="__reactListeners$"+ar,zb="__reactHandles$"+ar,Ip="__reactResources$"+ar,Fo="__reactMarker$"+ar;function Bd(e){delete e[Ne],delete e[Be],delete e[vf],delete e[jb],delete e[zb]}function ds(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ra]||n[Ne]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=My(e);e!==null;){if(n=e[Ne])return n;e=My(e)}return t}e=n,n=e.parentNode}return null}function sa(e){if(e=e[Ne]||e[ra]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function za(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(P(33))}function Ss(e){var t=e[Ip];return t||(t=e[Ip]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ce(e){e[Fo]=!0}var Hv=new Set,Fv={};function Hr(e,t){zs(e,t),zs(e+"Capture",t)}function zs(e,t){for(Fv[e]=t,e=0;e<t.length;e++)Hv.add(t[e])}var Bb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cp={},Np={};function qb(e){return _f.call(Np,e)?!0:_f.call(Cp,e)?!1:Bb.test(e)?Np[e]=!0:(Cp[e]=!0,!1)}function Jl(e,t,n){if(qb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function kl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function qn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var vh,xp;function rs(e){if(vh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vh=t&&t[1]||"",xp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vh+e+xp}var Th=!1;function Eh(e,t){if(!e||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rs(n):""}function Hb(e){switch(e.tag){case 26:case 27:case 5:return rs(e.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return Eh(e.type,!1);case 11:return Eh(e.type.render,!1);case 1:return Eh(e.type,!0);case 31:return rs("Activity");default:return""}}function Dp(e){try{var t="";do t+=Hb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fb(e){var t=Gv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bu(e){e._valueTracker||(e._valueTracker=Fb(e))}function Qv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Gv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Su(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gb=/[\n"\\]/g;function cn(e){return e.replace(Gb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Tf(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+on(t)):e.value!==""+on(t)&&(e.value=""+on(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Ef(e,a,on(t)):n!=null?Ef(e,a,on(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+on(l):e.removeAttribute("name")}function Yv(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+on(n):"",t=t!=null?""+on(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Ef(e,t,n){t==="number"&&Su(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ws(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Kv(e,t,n){if(t!=null&&(t=""+on(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+on(n):""}function Xv(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(P(92));if(ja(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=on(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Bs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Qb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function $v(e,t,n){if(t!=null&&typeof t!="object")throw Error(P(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Vp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Vp(e,s,t[s])}function qd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(e){return Kb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Af=null;function Hd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,Rs=null;function Op(e){var t=sa(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;t:switch(e=t.stateNode,t.type){case"input":if(Tf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Be]||null;if(!r)throw Error(P(90));Tf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Qv(i)}break t;case"textarea":Kv(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ws(e,!!n.multiple,t,!1)}}}var Ah=!1;function Zv(e,t,n){if(Ah)return e(t,n);Ah=!0;try{var i=e(t);return i}finally{if(Ah=!1,(ms!==null||Rs!==null)&&(Rc(),ms&&(t=ms,e=Rs,Rs=ms=null,Op(t),e)))for(t=0;t<e.length;t++)Op(e[t])}}function po(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Be]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=!1;if(ni)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){bf=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{bf=!1}var xi=null,Fd=null,tu=null;function Jv(){if(tu)return tu;var e,t=Fd,n=t.length,i,r="value"in xi?xi.value:xi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return tu=r.slice(e,1<i?1-i:void 0)}function eu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ul(){return!0}function Mp(){return!1}function He(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ul:Mp,this.isPropagationStopped=Mp,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=He(Fr),Go=Ut({},Fr,{view:0,detail:0}),Xb=He(Go),bh,Sh,Va,_c=Ut({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Va&&(Va&&e.type==="mousemove"?(bh=e.screenX-Va.screenX,Sh=e.screenY-Va.screenY):Sh=bh=0,Va=e),bh)},movementY:function(e){return"movementY"in e?e.movementY:Sh}}),kp=He(_c),$b=Ut({},_c,{dataTransfer:0}),Zb=He($b),Jb=Ut({},Go,{relatedTarget:0}),wh=He(Jb),Wb=Ut({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=He(Wb),eS=Ut({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nS=He(eS),iS=Ut({},Fr,{data:0}),Up=He(iS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=aS[e])?!!t[e]:!1}function Gd(){return oS}var lS=Ut({},Go,{key:function(e){if(e.key){var t=rS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=eu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gd,charCode:function(e){return e.type==="keypress"?eu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?eu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uS=He(lS),cS=Ut({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pp=He(cS),hS=Ut({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gd}),fS=He(hS),dS=Ut({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=He(dS),gS=Ut({},_c,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pS=He(gS),yS=Ut({},Fr,{newState:0,oldState:0}),_S=He(yS),vS=[9,13,27,32],Qd=ni&&"CompositionEvent"in window,Ya=null;ni&&"documentMode"in document&&(Ya=document.documentMode);var TS=ni&&"TextEvent"in window&&!Ya,Wv=ni&&(!Qd||Ya&&8<Ya&&11>=Ya),Lp=" ",jp=!1;function t0(e,t){switch(e){case"keyup":return vS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function ES(e,t){switch(e){case"compositionend":return e0(t);case"keypress":return t.which!==32?null:(jp=!0,Lp);case"textInput":return e=t.data,e===Lp&&jp?null:e;default:return null}}function AS(e,t){if(gs)return e==="compositionend"||!Qd&&t0(e,t)?(e=Jv(),tu=Fd=xi=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wv&&t.locale!=="ko"?null:t.data;default:return null}}var bS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bS[e.type]:t==="textarea"}function n0(e,t,n,i){ms?Rs?Rs.push(i):Rs=[i]:ms=i,t=qu(t,"onChange"),0<t.length&&(n=new yc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ka=null,yo=null;function SS(e){KT(e,0)}function vc(e){var t=za(e);if(Qv(t))return e}function Bp(e,t){if(e==="change")return t}var i0=!1;if(ni){var Rh;if(ni){var Ih="oninput"in document;if(!Ih){var qp=document.createElement("div");qp.setAttribute("oninput","return;"),Ih=typeof qp.oninput=="function"}Rh=Ih}else Rh=!1;i0=Rh&&(!document.documentMode||9<document.documentMode)}function Hp(){Ka&&(Ka.detachEvent("onpropertychange",r0),yo=Ka=null)}function r0(e){if(e.propertyName==="value"&&vc(yo)){var t=[];n0(t,yo,e,Hd(e)),Zv(SS,t)}}function wS(e,t,n){e==="focusin"?(Hp(),Ka=t,yo=n,Ka.attachEvent("onpropertychange",r0)):e==="focusout"&&Hp()}function RS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vc(yo)}function IS(e,t){if(e==="click")return vc(t)}function CS(e,t){if(e==="input"||e==="change")return vc(t)}function NS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:NS;function _o(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!_f.call(t,r)||!sn(e[r],t[r]))return!1}return!0}function Fp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gp(e,t){var n=Fp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Fp(n)}}function s0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?s0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function a0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Su(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Su(e.document)}return t}function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var xS=ni&&"documentMode"in document&&11>=document.documentMode,ps=null,Sf=null,Xa=null,wf=!1;function Qp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wf||ps==null||ps!==Su(i)||(i=ps,"selectionStart"in i&&Yd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xa&&_o(Xa,i)||(Xa=i,i=qu(Sf,"onSelect"),0<i.length&&(t=new yc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ps)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ys={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},Ch={},o0={};ni&&(o0=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Gr(e){if(Ch[e])return Ch[e];if(!ys[e])return e;var t=ys[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in o0)return Ch[e]=t[n];return e}var l0=Gr("animationend"),u0=Gr("animationiteration"),c0=Gr("animationstart"),DS=Gr("transitionrun"),VS=Gr("transitionstart"),OS=Gr("transitioncancel"),h0=Gr("transitionend"),f0=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function bn(e,t){f0.set(e,t),Hr(t,[e])}var Yp=new WeakMap;function hn(e,t){if(typeof e=="object"&&e!==null){var n=Yp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Dp(t)},Yp.set(e,t),t)}return{value:e,source:t,stack:Dp(t)}}var an=[],_s=0,Kd=0;function Tc(){for(var e=_s,t=Kd=_s=0;t<e;){var n=an[t];an[t++]=null;var i=an[t];an[t++]=null;var r=an[t];an[t++]=null;var s=an[t];if(an[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&d0(n,r,s)}}function Ec(e,t,n,i){an[_s++]=e,an[_s++]=t,an[_s++]=n,an[_s++]=i,Kd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Xd(e,t,n,i){return Ec(e,t,n,i),wu(e)}function aa(e,t){return Ec(e,null,null,t),wu(e)}function d0(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-We(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function wu(e){if(50<so)throw so=0,Yf=null,Error(P(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var vs={};function MS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,t,n,i){return new MS(e,t,n,i)}function $d(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wn(e,t){var n=e.alternate;return n===null?(n=Xe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function m0(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function nu(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")$d(e)&&(a=1);else if(typeof e=="string")a=Uw(e,n,xn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case mf:return e=Xe(31,n,t,r),e.elementType=mf,e.lanes=s,e;case hs:return Rr(n.children,r,s,t);case Ov:a=8,r|=24;break;case hf:return e=Xe(12,n,t,r|2),e.elementType=hf,e.lanes=s,e;case ff:return e=Xe(13,n,t,r),e.elementType=ff,e.lanes=s,e;case df:return e=Xe(19,n,t,r),e.elementType=df,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sb:case Yn:a=10;break t;case Mv:a=9;break t;case Ud:a=11;break t;case Pd:a=14;break t;case Ti:a=16,i=null;break t}a=29,n=Error(P(130,e===null?"null":typeof e,"")),i=null}return t=Xe(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Rr(e,t,n,i){return e=Xe(7,e,i,t),e.lanes=n,e}function Nh(e,t,n){return e=Xe(6,e,null,t),e.lanes=n,e}function xh(e,t,n){return t=Xe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ts=[],Es=0,Ru=null,Iu=0,ln=[],un=0,Ir=null,Kn=1,Xn="";function Tr(e,t){Ts[Es++]=Iu,Ts[Es++]=Ru,Ru=e,Iu=t}function g0(e,t,n){ln[un++]=Kn,ln[un++]=Xn,ln[un++]=Ir,Ir=e;var i=Kn;e=Xn;var r=32-We(i)-1;i&=~(1<<r),n+=1;var s=32-We(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kn=1<<32-We(t)+r|n<<r|i,Xn=s+e}else Kn=1<<s|n<<r|i,Xn=e}function Zd(e){e.return!==null&&(Tr(e,1),g0(e,1,0))}function Jd(e){for(;e===Ru;)Ru=Ts[--Es],Ts[Es]=null,Iu=Ts[--Es],Ts[Es]=null;for(;e===Ir;)Ir=ln[--un],ln[un]=null,Xn=ln[--un],ln[un]=null,Kn=ln[--un],ln[un]=null}var Oe=null,Gt=null,_t=!1,Cr=null,Cn=!1,If=Error(P(519));function Or(e){var t=Error(P(418,""));throw vo(hn(t,e)),If}function Kp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[Be]=i,n){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(n=0;n<Ao.length;n++)st(Ao[n],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),Yv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),bu(t);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),Xv(t,i.value,i.defaultValue,i.children),bu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||$T(t.textContent,n)?(i.popover!=null&&(st("beforetoggle",t),st("toggle",t)),i.onScroll!=null&&st("scroll",t),i.onScrollEnd!=null&&st("scrollend",t),i.onClick!=null&&(t.onclick=Nc),t=!0):t=!1,t||Or(e)}function Xp(e){for(Oe=e.return;Oe;)switch(Oe.tag){case 5:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Oe=Oe.return}}function Oa(e){if(e!==Oe)return!1;if(!_t)return Xp(e),_t=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Wf(e.type,e.memoizedProps)),n=!n),n&&Gt&&Or(e),Xp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Gt=En(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Gt=null}}else t===27?(t=Gt,or(e.type)?(e=nd,nd=null,Gt=e):Gt=t):Gt=Oe?En(e.stateNode.nextSibling):null;return!0}function Qo(){Gt=Oe=null,_t=!1}function $p(){var e=Cr;return e!==null&&(je===null?je=e:je.push.apply(je,e),Cr=null),e}function vo(e){Cr===null?Cr=[e]:Cr.push(e)}var Cf=Pn(null),Qr=null,$n=null;function Ai(e,t,n){jt(Cf,t._currentValue),t._currentValue=n}function ti(e){e._currentValue=Cf.current,de(Cf)}function Nf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function xf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Nf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(P(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Nf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Yo(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=r.type;sn(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===vu.current){if(a=r.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(wo):e=[wo])}r=r.return}e!==null&&xf(t,e,n,i),t.flags|=262144}function Cu(e){for(e=e.firstContext;e!==null;){if(!sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mr(e){Qr=e,$n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xe(e){return p0(Qr,e)}function Pl(e,t){return Qr===null&&Mr(e),p0(e,t)}function p0(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},$n===null){if(e===null)throw Error(P(308));$n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $n=$n.next=t;return n}var kS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},US=ae.unstable_scheduleCallback,PS=ae.unstable_NormalPriority,ie={$$typeof:Yn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new kS,data:new Map,refCount:0}}function Ko(e){e.refCount--,e.refCount===0&&US(PS,function(){e.controller.abort()})}var $a=null,Df=0,qs=0,Is=null;function LS(e,t){if($a===null){var n=$a=[];Df=0,qs=Am(),Is={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Df++,t.then(Zp,Zp),t}function Zp(){if(--Df===0&&$a!==null){Is!==null&&(Is.status="fulfilled");var e=$a;$a=null,qs=0,Is=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jS(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Jp=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&LS(e,t),Jp!==null&&Jp(e,t)};var Nr=Pn(null);function tm(){var e=Nr.current;return e!==null?e:Ot.pooledCache}function iu(e,t){t===null?jt(Nr,Nr.current):jt(Nr,t.pool)}function y0(){var e=tm();return e===null?null:{parent:ie._currentValue,pool:e}}var Xo=Error(P(460)),_0=Error(P(474)),Ac=Error(P(542)),Vf={then:function(){}};function Wp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ll(){}function v0(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ll,Ll),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ey(e),e;default:if(typeof t.status=="string")t.then(Ll,Ll);else{if(e=Ot,e!==null&&100<e.shellSuspendCounter)throw Error(P(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ey(e),e}throw Za=t,Xo}}var Za=null;function ty(){if(Za===null)throw Error(P(459));var e=Za;return Za=null,e}function ey(e){if(e===Xo||e===Ac)throw Error(P(483))}var Ei=!1;function em(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ui(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,wt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=wu(e),d0(e,null,n),t}return Ec(e,i,t,n),wu(e)}function Ja(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Bv(e,n)}}function Dh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Mf=!1;function Wa(){if(Mf){var e=Is;if(e!==null)throw e}}function to(e,t,n,i){Mf=!1;var r=e.updateQueue;Ei=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(dt&m)===m:(i&m)===m){m!==0&&m===qs&&(Mf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,O=l;m=t;var V=n;switch(O.tag){case 1:if(x=O.payload,typeof x=="function"){g=x.call(V,g,m);break t}g=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=O.payload,m=typeof x=="function"?x.call(V,g,m):x,m==null)break t;g=Ut({},g,m);break t;case 2:Ei=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Zi|=a,e.lanes=a,e.memoizedState=g}}function T0(e,t){if(typeof e!="function")throw Error(P(191,e));e.call(t)}function E0(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)T0(n[e],t)}var Hs=Pn(null),Nu=Pn(0);function ny(e,t){e=si,jt(Nu,e),jt(Hs,t),si=e|t.baseLanes}function kf(){jt(Nu,si),jt(Hs,Hs.current)}function nm(){si=Nu.current,de(Hs),de(Nu)}var Xi=0,nt=null,Ct=null,Jt=null,xu=!1,Cs=!1,kr=!1,Du=0,To=0,Ns=null,zS=0;function Yt(){throw Error(P(321))}function im(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function rm(e,t,n,i,r,s){return Xi=s,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?J0:W0,kr=!1,s=n(i,r),kr=!1,Cs&&(s=b0(t,n,i,r)),A0(e),s}function A0(e){Z.H=Vu;var t=Ct!==null&&Ct.next!==null;if(Xi=0,Jt=Ct=nt=null,xu=!1,To=0,Ns=null,t)throw Error(P(300));e===null||fe||(e=e.dependencies,e!==null&&Cu(e)&&(fe=!0))}function b0(e,t,n,i){nt=e;var r=0;do{if(Cs&&(Ns=null),To=0,Cs=!1,25<=r)throw Error(P(301));if(r+=1,Jt=Ct=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Z.H=YS,s=t(n,i)}while(Cs);return s}function BS(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?$o(t):t,e=e.useState()[0],(Ct!==null?Ct.memoizedState:null)!==e&&(nt.flags|=1024),t}function sm(){var e=Du!==0;return Du=0,e}function am(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function om(e){if(xu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xu=!1}Xi=0,Jt=Ct=nt=null,Cs=!1,To=Du=0,Ns=null}function Pe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?nt.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function ee(){if(Ct===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=Jt===null?nt.memoizedState:Jt.next;if(t!==null)Jt=t,Ct=e;else{if(e===null)throw nt.alternate===null?Error(P(467)):Error(P(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Jt===null?nt.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(e){var t=To;return To+=1,Ns===null&&(Ns=[]),e=v0(Ns,e,t),t=nt,(Jt===null?t.memoizedState:Jt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?J0:W0),e}function bc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $o(e);if(e.$$typeof===Yn)return xe(e)}throw Error(P(438,String(e)))}function um(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=nt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=lm(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=wb;return t.index++,n}function ii(e,t){return typeof t=="function"?t(e):t}function ru(e){var t=ee();return cm(t,Ct,e)}function cm(e,t,n){var i=e.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(dt&g)===g:(Xi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===qs&&(d=!0);else if((Xi&m)===m){h=h.next,m===qs&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,nt.lanes|=m,Zi|=m;g=h.action,kr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,nt.lanes|=g,Zi|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!sn(s,e.memoizedState)&&(fe=!0,d&&(n=Is,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Vh(e){var t=ee(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);sn(s,t.memoizedState)||(fe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function S0(e,t,n){var i=nt,r=ee(),s=_t;if(s){if(n===void 0)throw Error(P(407));n=n()}else n=t();var a=!sn((Ct||r).memoizedState,n);a&&(r.memoizedState=n,fe=!0),r=r.queue;var l=I0.bind(null,i,r,e);if(Zo(2048,8,l,[e]),r.getSnapshot!==t||a||Jt!==null&&Jt.memoizedState.tag&1){if(i.flags|=2048,Fs(9,Sc(),R0.bind(null,i,r,n,t),null),Ot===null)throw Error(P(349));s||Xi&124||w0(i,t,n)}return n}function w0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=lm(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function R0(e,t,n,i){t.value=n,t.getSnapshot=i,C0(t)&&N0(e)}function I0(e,t,n){return n(function(){C0(t)&&N0(e)})}function C0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function N0(e){var t=aa(e,2);t!==null&&en(t,e,2)}function Uf(e){var t=Pe();if(typeof e=="function"){var n=e;if(e=n(),kr){Ni(!0);try{n()}finally{Ni(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:e},t}function x0(e,t,n,i){return e.baseState=n,cm(e,Ct,typeof i=="function"?i:ii)}function qS(e,t,n,i,r){if(wc(e))throw Error(P(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Z.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,D0(t,s)):(s.next=n.next,t.pending=n.next=s)}}function D0(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Z.T,a={};Z.T=a;try{var l=n(r,i),u=Z.S;u!==null&&u(a,l),iy(e,t,l)}catch(h){Pf(e,t,h)}finally{Z.T=s}}else try{s=n(r,i),iy(e,t,s)}catch(h){Pf(e,t,h)}}function iy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ry(e,t,i)},function(i){return Pf(e,t,i)}):ry(e,t,n)}function ry(e,t,n){t.status="fulfilled",t.value=n,V0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,D0(e,n)))}function Pf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,V0(t),t=t.next;while(t!==i)}e.action=null}function V0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function O0(e,t){return t}function sy(e,t){if(_t){var n=Ot.formState;if(n!==null){t:{var i=nt;if(_t){if(Gt){e:{for(var r=Gt,s=Cn;r.nodeType!==8;){if(!s){r=null;break e}if(r=En(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Gt=En(r.nextSibling),i=r.data==="F!";break t}}Or(i)}i=!1}i&&(t=n[0])}}return n=Pe(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O0,lastRenderedState:t},n.queue=i,n=X0.bind(null,nt,i),i.dispatch=n,i=Uf(!1),s=mm.bind(null,nt,!1,i.queue),i=Pe(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=qS.bind(null,nt,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ay(e){var t=ee();return M0(t,Ct,e)}function M0(e,t,n){if(t=cm(e,t,O0)[0],e=ru(ii)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=$o(t)}catch(a){throw a===Xo?Ac:a}else i=t;t=ee();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,Fs(9,Sc(),HS.bind(null,r,n),null)),[i,s,e]}function HS(e,t){e.action=t}function oy(e){var t=ee(),n=Ct;if(n!==null)return M0(t,n,e);ee(),t=t.memoizedState,n=ee();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Fs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=nt.updateQueue,t===null&&(t=lm(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Sc(){return{destroy:void 0,resource:void 0}}function k0(){return ee().memoizedState}function su(e,t,n,i){var r=Pe();i=i===void 0?null:i,nt.flags|=e,r.memoizedState=Fs(1|t,Sc(),n,i)}function Zo(e,t,n,i){var r=ee();i=i===void 0?null:i;var s=r.memoizedState.inst;Ct!==null&&i!==null&&im(i,Ct.memoizedState.deps)?r.memoizedState=Fs(t,s,n,i):(nt.flags|=e,r.memoizedState=Fs(1|t,s,n,i))}function ly(e,t){su(8390656,8,e,t)}function U0(e,t){Zo(2048,8,e,t)}function P0(e,t){return Zo(4,2,e,t)}function L0(e,t){return Zo(4,4,e,t)}function j0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z0(e,t,n){n=n!=null?n.concat([e]):null,Zo(4,4,j0.bind(null,t,e),n)}function hm(){}function B0(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&im(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function q0(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&im(t,i[1]))return i[0];if(i=e(),kr){Ni(!0);try{e()}finally{Ni(!1)}}return n.memoizedState=[i,t],i}function fm(e,t,n){return n===void 0||Xi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=VT(),nt.lanes|=e,Zi|=e,n)}function H0(e,t,n,i){return sn(n,t)?n:Hs.current!==null?(e=fm(e,n,i),sn(e,t)||(fe=!0),e):Xi&42?(e=VT(),nt.lanes|=e,Zi|=e,t):(fe=!0,e.memoizedState=n)}function F0(e,t,n,i,r){var s=vt.p;vt.p=s!==0&&8>s?s:8;var a=Z.T,l={};Z.T=l,mm(e,!1,t,n);try{var u=r(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=jS(u,i);eo(e,t,d,tn(e))}else eo(e,t,i,tn(e))}catch(g){eo(e,t,{then:function(){},status:"rejected",reason:g},tn())}finally{vt.p=s,Z.T=a}}function FS(){}function Lf(e,t,n,i){if(e.tag!==5)throw Error(P(476));var r=G0(e).queue;F0(e,r,t,wr,n===null?FS:function(){return Q0(e),n(i)})}function G0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:wr,baseState:wr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:wr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Q0(e){var t=G0(e).next.queue;eo(e,t,{},tn())}function dm(){return xe(wo)}function Y0(){return ee().memoizedState}function K0(){return ee().memoizedState}function GS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=tn();e=Ui(n);var i=Pi(t,e,n);i!==null&&(en(i,t,n),Ja(i,t,n)),t={cache:Wd()},e.payload=t;return}t=t.return}}function QS(e,t,n){var i=tn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},wc(e)?$0(t,n):(n=Xd(e,t,n,i),n!==null&&(en(n,e,i),Z0(n,t,i)))}function X0(e,t,n){var i=tn();eo(e,t,n,i)}function eo(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(wc(e))$0(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,sn(l,a))return Ec(e,t,r,0),Ot===null&&Tc(),!1}catch{}finally{}if(n=Xd(e,t,r,i),n!==null)return en(n,e,i),Z0(n,t,i),!0}return!1}function mm(e,t,n,i){if(i={lane:2,revertLane:Am(),action:i,hasEagerState:!1,eagerState:null,next:null},wc(e)){if(t)throw Error(P(479))}else t=Xd(e,n,i,2),t!==null&&en(t,e,2)}function wc(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function $0(e,t){Cs=xu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Z0(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Bv(e,n)}}var Vu={readContext:xe,use:bc,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},J0={readContext:xe,use:bc,useCallback:function(e,t){return Pe().memoizedState=[e,t===void 0?null:t],e},useContext:xe,useEffect:ly,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,su(4194308,4,j0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return su(4194308,4,e,t)},useInsertionEffect:function(e,t){su(4,2,e,t)},useMemo:function(e,t){var n=Pe();t=t===void 0?null:t;var i=e();if(kr){Ni(!0);try{e()}finally{Ni(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Pe();if(n!==void 0){var r=n(t);if(kr){Ni(!0);try{n(t)}finally{Ni(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=QS.bind(null,nt,e),[i.memoizedState,e]},useRef:function(e){var t=Pe();return e={current:e},t.memoizedState=e},useState:function(e){e=Uf(e);var t=e.queue,n=X0.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:hm,useDeferredValue:function(e,t){var n=Pe();return fm(n,e,t)},useTransition:function(){var e=Uf(!1);return e=F0.bind(null,nt,e.queue,!0,!1),Pe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=nt,r=Pe();if(_t){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Ot===null)throw Error(P(349));dt&124||w0(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,ly(I0.bind(null,i,s,e),[e]),i.flags|=2048,Fs(9,Sc(),R0.bind(null,i,s,n,t),null),n},useId:function(){var e=Pe(),t=Ot.identifierPrefix;if(_t){var n=Xn,i=Kn;n=(i&~(1<<32-We(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Du++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=zS++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:dm,useFormState:sy,useActionState:sy,useOptimistic:function(e){var t=Pe();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=mm.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:um,useCacheRefresh:function(){return Pe().memoizedState=GS.bind(null,nt)}},W0={readContext:xe,use:bc,useCallback:B0,useContext:xe,useEffect:U0,useImperativeHandle:z0,useInsertionEffect:P0,useLayoutEffect:L0,useMemo:q0,useReducer:ru,useRef:k0,useState:function(){return ru(ii)},useDebugValue:hm,useDeferredValue:function(e,t){var n=ee();return H0(n,Ct.memoizedState,e,t)},useTransition:function(){var e=ru(ii)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:$o(e),t]},useSyncExternalStore:S0,useId:Y0,useHostTransitionStatus:dm,useFormState:ay,useActionState:ay,useOptimistic:function(e,t){var n=ee();return x0(n,Ct,e,t)},useMemoCache:um,useCacheRefresh:K0},YS={readContext:xe,use:bc,useCallback:B0,useContext:xe,useEffect:U0,useImperativeHandle:z0,useInsertionEffect:P0,useLayoutEffect:L0,useMemo:q0,useReducer:Vh,useRef:k0,useState:function(){return Vh(ii)},useDebugValue:hm,useDeferredValue:function(e,t){var n=ee();return Ct===null?fm(n,e,t):H0(n,Ct.memoizedState,e,t)},useTransition:function(){var e=Vh(ii)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:$o(e),t]},useSyncExternalStore:S0,useId:Y0,useHostTransitionStatus:dm,useFormState:oy,useActionState:oy,useOptimistic:function(e,t){var n=ee();return Ct!==null?x0(n,Ct,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:um,useCacheRefresh:K0},xs=null,Eo=0;function jl(e){var t=Eo;return Eo+=1,xs===null&&(xs=[]),v0(xs,e,t)}function Ma(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zl(e,t){throw t.$$typeof===bb?Error(P(525)):(e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function uy(e){var t=e._init;return t(e._payload)}function tT(e){function t(S,T){if(e){var R=S.deletions;R===null?(S.deletions=[T],S.flags|=16):R.push(T)}}function n(S,T){if(!e)return null;for(;T!==null;)t(S,T),T=T.sibling;return null}function i(S){for(var T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function r(S,T){return S=Wn(S,T),S.index=0,S.sibling=null,S}function s(S,T,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<T?(S.flags|=67108866,T):R):(S.flags|=67108866,T)):(S.flags|=1048576,T)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,T,R,D){return T===null||T.tag!==6?(T=Nh(R,S.mode,D),T.return=S,T):(T=r(T,R),T.return=S,T)}function u(S,T,R,D){var L=R.type;return L===hs?d(S,T,R.props.children,D,R.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ti&&uy(L)===T.type)?(T=r(T,R.props),Ma(T,R),T.return=S,T):(T=nu(R.type,R.key,R.props,null,S.mode,D),Ma(T,R),T.return=S,T)}function h(S,T,R,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=xh(R,S.mode,D),T.return=S,T):(T=r(T,R.children||[]),T.return=S,T)}function d(S,T,R,D,L){return T===null||T.tag!==7?(T=Rr(R,S.mode,D,L),T.return=S,T):(T=r(T,R),T.return=S,T)}function g(S,T,R){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Nh(""+T,S.mode,R),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Vl:return R=nu(T.type,T.key,T.props,null,S.mode,R),Ma(R,T),R.return=S,R;case La:return T=xh(T,S.mode,R),T.return=S,T;case Ti:var D=T._init;return T=D(T._payload),g(S,T,R)}if(ja(T)||xa(T))return T=Rr(T,S.mode,R,null),T.return=S,T;if(typeof T.then=="function")return g(S,jl(T),R);if(T.$$typeof===Yn)return g(S,Pl(S,T),R);zl(S,T)}return null}function m(S,T,R,D){var L=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(S,T,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Vl:return R.key===L?u(S,T,R,D):null;case La:return R.key===L?h(S,T,R,D):null;case Ti:return L=R._init,R=L(R._payload),m(S,T,R,D)}if(ja(R)||xa(R))return L!==null?null:d(S,T,R,D,null);if(typeof R.then=="function")return m(S,T,jl(R),D);if(R.$$typeof===Yn)return m(S,T,Pl(S,R),D);zl(S,R)}return null}function _(S,T,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(R)||null,l(T,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Vl:return S=S.get(D.key===null?R:D.key)||null,u(T,S,D,L);case La:return S=S.get(D.key===null?R:D.key)||null,h(T,S,D,L);case Ti:var B=D._init;return D=B(D._payload),_(S,T,R,D,L)}if(ja(D)||xa(D))return S=S.get(R)||null,d(T,S,D,L,null);if(typeof D.then=="function")return _(S,T,R,jl(D),L);if(D.$$typeof===Yn)return _(S,T,R,Pl(T,D),L);zl(T,D)}return null}function x(S,T,R,D){for(var L=null,B=null,E=T,y=T=0,A=null;E!==null&&y<R.length;y++){E.index>y?(A=E,E=null):A=E.sibling;var w=m(S,E,R[y],D);if(w===null){E===null&&(E=A);break}e&&E&&w.alternate===null&&t(S,E),T=s(w,T,y),B===null?L=w:B.sibling=w,B=w,E=A}if(y===R.length)return n(S,E),_t&&Tr(S,y),L;if(E===null){for(;y<R.length;y++)E=g(S,R[y],D),E!==null&&(T=s(E,T,y),B===null?L=E:B.sibling=E,B=E);return _t&&Tr(S,y),L}for(E=i(E);y<R.length;y++)A=_(E,S,y,R[y],D),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?y:A.key),T=s(A,T,y),B===null?L=A:B.sibling=A,B=A);return e&&E.forEach(function(C){return t(S,C)}),_t&&Tr(S,y),L}function O(S,T,R,D){if(R==null)throw Error(P(151));for(var L=null,B=null,E=T,y=T=0,A=null,w=R.next();E!==null&&!w.done;y++,w=R.next()){E.index>y?(A=E,E=null):A=E.sibling;var C=m(S,E,w.value,D);if(C===null){E===null&&(E=A);break}e&&E&&C.alternate===null&&t(S,E),T=s(C,T,y),B===null?L=C:B.sibling=C,B=C,E=A}if(w.done)return n(S,E),_t&&Tr(S,y),L;if(E===null){for(;!w.done;y++,w=R.next())w=g(S,w.value,D),w!==null&&(T=s(w,T,y),B===null?L=w:B.sibling=w,B=w);return _t&&Tr(S,y),L}for(E=i(E);!w.done;y++,w=R.next())w=_(E,S,y,w.value,D),w!==null&&(e&&w.alternate!==null&&E.delete(w.key===null?y:w.key),T=s(w,T,y),B===null?L=w:B.sibling=w,B=w);return e&&E.forEach(function(I){return t(S,I)}),_t&&Tr(S,y),L}function V(S,T,R,D){if(typeof R=="object"&&R!==null&&R.type===hs&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Vl:t:{for(var L=R.key;T!==null;){if(T.key===L){if(L=R.type,L===hs){if(T.tag===7){n(S,T.sibling),D=r(T,R.props.children),D.return=S,S=D;break t}}else if(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ti&&uy(L)===T.type){n(S,T.sibling),D=r(T,R.props),Ma(D,R),D.return=S,S=D;break t}n(S,T);break}else t(S,T);T=T.sibling}R.type===hs?(D=Rr(R.props.children,S.mode,D,R.key),D.return=S,S=D):(D=nu(R.type,R.key,R.props,null,S.mode,D),Ma(D,R),D.return=S,S=D)}return a(S);case La:t:{for(L=R.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){n(S,T.sibling),D=r(T,R.children||[]),D.return=S,S=D;break t}else{n(S,T);break}else t(S,T);T=T.sibling}D=xh(R,S.mode,D),D.return=S,S=D}return a(S);case Ti:return L=R._init,R=L(R._payload),V(S,T,R,D)}if(ja(R))return x(S,T,R,D);if(xa(R)){if(L=xa(R),typeof L!="function")throw Error(P(150));return R=L.call(R),O(S,T,R,D)}if(typeof R.then=="function")return V(S,T,jl(R),D);if(R.$$typeof===Yn)return V(S,T,Pl(S,R),D);zl(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,T!==null&&T.tag===6?(n(S,T.sibling),D=r(T,R),D.return=S,S=D):(n(S,T),D=Nh(R,S.mode,D),D.return=S,S=D),a(S)):n(S,T)}return function(S,T,R,D){try{Eo=0;var L=V(S,T,R,D);return xs=null,L}catch(E){if(E===Xo||E===Ac)throw E;var B=Xe(29,E,null,S.mode);return B.lanes=D,B.return=S,B}finally{}}}var Gs=tT(!0),eT=tT(!1),dn=Pn(null),Vn=null;function bi(e){var t=e.alternate;jt(re,re.current&1),jt(dn,e),Vn===null&&(t===null||Hs.current!==null||t.memoizedState!==null)&&(Vn=e)}function nT(e){if(e.tag===22){if(jt(re,re.current),jt(dn,e),Vn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vn=e)}}else Si()}function Si(){jt(re,re.current),jt(dn,dn.current)}function Zn(e){de(dn),Vn===e&&(Vn=null),de(re)}var re=Pn(0);function Ou(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ed(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Oh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ut({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tn(),r=Ui(i);r.payload=t,n!=null&&(r.callback=n),t=Pi(e,r,i),t!==null&&(en(t,e,i),Ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tn(),r=Ui(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Pi(e,r,i),t!==null&&(en(t,e,i),Ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tn(),i=Ui(n);i.tag=2,t!=null&&(i.callback=t),t=Pi(e,i,n),t!==null&&(en(t,e,n),Ja(t,e,n))}};function cy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!_o(n,i)||!_o(r,s):!0}function hy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&jf.enqueueReplaceState(t,t.state,null)}function Ur(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ut({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Mu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function iT(e){Mu(e)}function rT(e){console.error(e)}function sT(e){Mu(e)}function ku(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function fy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function zf(e,t,n){return n=Ui(n),n.tag=3,n.payload={element:null},n.callback=function(){ku(e,t)},n}function aT(e){return e=Ui(e),e.tag=3,e}function oT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){fy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){fy(t,n,i),typeof r!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function KS(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Yo(t,n,r,!0),n=dn.current,n!==null){switch(n.tag){case 13:return Vn===null?Kf():n.alternate===null&&Qt===0&&(Qt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Vf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Fh(e,i,r)),!1;case 22:return n.flags|=65536,i===Vf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Fh(e,i,r)),!1}throw Error(P(435,n.tag))}return Fh(e,i,r),Kf(),!1}if(_t)return t=dn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==If&&(e=Error(P(422),{cause:i}),vo(hn(e,n)))):(i!==If&&(t=Error(P(423),{cause:i}),vo(hn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=hn(i,n),r=zf(e.stateNode,i,r),Dh(e,r),Qt!==4&&(Qt=2)),!1;var s=Error(P(520),{cause:i});if(s=hn(s,n),ro===null?ro=[s]:ro.push(s),Qt!==4&&(Qt=2),t===null)return!0;i=hn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=zf(n.stateNode,i,e),Dh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Li===null||!Li.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=aT(r),oT(r,e,n,i),Dh(n,r),!1}n=n.return}while(n!==null);return!1}var lT=Error(P(461)),fe=!1;function pe(e,t,n,i){t.child=e===null?eT(t,null,n,i):Gs(t,e.child,n,i)}function dy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Mr(t),i=rm(e,t,n,a,s,r),l=sm(),e!==null&&!fe?(am(e,t,r),ri(e,t,r)):(_t&&l&&Zd(t),t.flags|=1,pe(e,t,i,r),t.child)}function my(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!$d(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,uT(e,t,s,i,r)):(e=nu(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!gm(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(a,i)&&e.ref===t.ref)return ri(e,t,r)}return t.flags|=1,e=Wn(s,i),e.ref=t.ref,e.return=t,t.child=e}function uT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(_o(s,i)&&e.ref===t.ref)if(fe=!1,t.pendingProps=i=s,gm(e,r))e.flags&131072&&(fe=!0);else return t.lanes=e.lanes,ri(e,t,r)}return Bf(e,t,n,i,r)}function cT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return gy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&iu(t,s!==null?s.cachePool:null),s!==null?ny(t,s):kf(),nT(t);else return t.lanes=t.childLanes=536870912,gy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(iu(t,s.cachePool),ny(t,s),Si(),t.memoizedState=null):(e!==null&&iu(t,null),kf(),Si());return pe(e,t,r,n),t.child}function gy(e,t,n,i){var r=tm();return r=r===null?null:{parent:ie._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&iu(t,null),kf(),nT(t),e!==null&&Yo(e,t,i,!0),null}function au(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Bf(e,t,n,i,r){return Mr(t),n=rm(e,t,n,i,void 0,r),i=sm(),e!==null&&!fe?(am(e,t,r),ri(e,t,r)):(_t&&i&&Zd(t),t.flags|=1,pe(e,t,n,r),t.child)}function py(e,t,n,i,r,s){return Mr(t),t.updateQueue=null,n=b0(t,i,n,r),A0(e),i=sm(),e!==null&&!fe?(am(e,t,s),ri(e,t,s)):(_t&&i&&Zd(t),t.flags|=1,pe(e,t,n,s),t.child)}function yy(e,t,n,i,r){if(Mr(t),t.stateNode===null){var s=vs,a=n.contextType;typeof a=="object"&&a!==null&&(s=xe(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=jf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},em(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?xe(a):vs,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Oh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&jf.enqueueReplaceState(s,s.state,null),to(t,i,s,r),Wa(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=Ur(n,l);s.props=u;var h=s.context,d=n.contextType;a=vs,typeof d=="object"&&d!==null&&(a=xe(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&hy(t,s,i,a),Ei=!1;var m=t.memoizedState;s.state=m,to(t,i,s,r),Wa(),h=t.memoizedState,l||m!==h||Ei?(typeof g=="function"&&(Oh(t,n,g,i),h=t.memoizedState),(u=Ei||cy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Of(e,t),a=t.memoizedProps,d=Ur(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=vs,typeof h=="object"&&h!==null&&(u=xe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&hy(t,s,i,u),Ei=!1,m=t.memoizedState,s.state=m,to(t,i,s,r),Wa();var _=t.memoizedState;a!==g||m!==_||Ei||e!==null&&e.dependencies!==null&&Cu(e.dependencies)?(typeof l=="function"&&(Oh(t,n,l,i),_=t.memoizedState),(d=Ei||cy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Cu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,au(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Gs(t,e.child,null,r),t.child=Gs(t,null,n,r)):pe(e,t,n,r),t.memoizedState=s.state,e=t.child):e=ri(e,t,r),e}function _y(e,t,n,i){return Qo(),t.flags|=256,pe(e,t,n,i),t.child}var Mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kh(e){return{baseLanes:e,cachePool:y0()}}function Uh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=fn),e}function hT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(re.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(_t){if(r?bi(t):Si(),_t){var l=Gt,u;if(u=l){t:{for(u=l,l=Cn;u.nodeType!==8;){if(!l){l=null;break t}if(u=En(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ir!==null?{id:Kn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},u=Xe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Oe=t,Gt=null,u=!0):u=!1}u||Or(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ed(l)?t.lanes=32:t.lanes=536870912,null;Zn(t)}return l=i.children,i=i.fallback,r?(Si(),r=t.mode,l=Uu({mode:"hidden",children:l},r),i=Rr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=kh(n),r.childLanes=Uh(e,a,n),t.memoizedState=Mh,i):(bi(t),qf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(bi(t),t.flags&=-257,t=Ph(e,t,n)):t.memoizedState!==null?(Si(),t.child=e.child,t.flags|=128,t=null):(Si(),r=i.fallback,l=t.mode,i=Uu({mode:"visible",children:i.children},l),r=Rr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Gs(t,e.child,null,n),i=t.child,i.memoizedState=kh(n),i.childLanes=Uh(e,a,n),t.memoizedState=Mh,t=r);else if(bi(t),ed(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(P(419)),i.stack="",i.digest=a,vo({value:i,source:null,stack:null}),t=Ph(e,t,n)}else if(fe||Yo(e,t,n,!1),a=(n&e.childLanes)!==0,fe||a){if(a=Ot,a!==null&&(i=n&-n,i=i&42?1:jd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,aa(e,i),en(a,e,i),lT;l.data==="$?"||Kf(),t=Ph(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Gt=En(l.nextSibling),Oe=t,_t=!0,Cr=null,Cn=!1,e!==null&&(ln[un++]=Kn,ln[un++]=Xn,ln[un++]=Ir,Kn=e.id,Xn=e.overflow,Ir=t),t=qf(t,i.children),t.flags|=4096);return t}return r?(Si(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Wn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Wn(h,r):(r=Rr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=kh(n):(u=l.cachePool,u!==null?(h=ie._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=y0(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Uh(e,a,n),t.memoizedState=Mh,i):(bi(t),n=e.child,e=n.sibling,n=Wn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function qf(e,t){return t=Uu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Uu(e,t){return e=Xe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ph(e,t,n){return Gs(t,e.child,null,n),e=qf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Nf(e.return,t,n)}function Lh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function fT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(pe(e,t,i.children,n),i=re.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vy(e,n,t);else if(e.tag===19)vy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(jt(re,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Ou(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Lh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ou(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Lh(t,!0,n,null,s);break;case"together":Lh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ri(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Yo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=Wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Cu(e)))}function XS(e,t,n){switch(t.tag){case 3:Tu(t,t.stateNode.containerInfo),Ai(t,ie,e.memoizedState.cache),Qo();break;case 27:case 5:yf(t);break;case 4:Tu(t,t.stateNode.containerInfo);break;case 10:Ai(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(bi(t),t.flags|=128,null):n&t.child.childLanes?hT(e,t,n):(bi(t),e=ri(e,t,n),e!==null?e.sibling:null);bi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Yo(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return fT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),jt(re,re.current),i)break;return null;case 22:case 23:return t.lanes=0,cT(e,t,n);case 24:Ai(t,ie,e.memoizedState.cache)}return ri(e,t,n)}function dT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)fe=!0;else{if(!gm(e,n)&&!(t.flags&128))return fe=!1,XS(e,t,n);fe=!!(e.flags&131072)}else fe=!1,_t&&t.flags&1048576&&g0(t,Iu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")$d(i)?(e=Ur(i,e),t.tag=1,t=yy(null,t,i,e,n)):(t.tag=0,t=Bf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Ud){t.tag=11,t=dy(null,t,i,e,n);break t}else if(r===Pd){t.tag=14,t=my(null,t,i,e,n);break t}}throw t=gf(i)||i,Error(P(306,t,""))}}return t;case 0:return Bf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Ur(i,t.pendingProps),yy(e,t,i,r,n);case 3:t:{if(Tu(t,t.stateNode.containerInfo),e===null)throw Error(P(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Of(e,t),to(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ai(t,ie,i),i!==s.cache&&xf(t,[ie],n,!0),Wa(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=_y(e,t,i,n);break t}else if(i!==r){r=hn(Error(P(424)),t),vo(r),t=_y(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gt=En(e.firstChild),Oe=t,_t=!0,Cr=null,Cn=!0,n=eT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Qo(),i===r){t=ri(e,t,n);break t}pe(e,t,i,n)}t=t.child}return t;case 26:return au(e,t),e===null?(n=Uy(t.type,null,t.pendingProps,null))?t.memoizedState=n:_t||(n=t.type,e=t.pendingProps,i=Hu(ki.current).createElement(n),i[Ne]=t,i[Be]=e,Ee(i,n,e),ce(i),t.stateNode=i):t.memoizedState=Uy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return yf(t),e===null&&_t&&(i=t.stateNode=WT(t.type,t.pendingProps,ki.current),Oe=t,Cn=!0,r=Gt,or(t.type)?(nd=r,Gt=En(i.firstChild)):Gt=r),pe(e,t,t.pendingProps.children,n),au(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_t&&((r=i=Gt)&&(i=bw(i,t.type,t.pendingProps,Cn),i!==null?(t.stateNode=i,Oe=t,Gt=En(i.firstChild),Cn=!1,r=!0):r=!1),r||Or(t)),yf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Wf(r,s)?i=null:a!==null&&Wf(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=rm(e,t,BS,null,null,n),wo._currentValue=r),au(e,t),pe(e,t,i,n),t.child;case 6:return e===null&&_t&&((e=n=Gt)&&(n=Sw(n,t.pendingProps,Cn),n!==null?(t.stateNode=n,Oe=t,Gt=null,e=!0):e=!1),e||Or(t)),null;case 13:return hT(e,t,n);case 4:return Tu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Gs(t,null,i,n):pe(e,t,i,n),t.child;case 11:return dy(e,t,t.type,t.pendingProps,n);case 7:return pe(e,t,t.pendingProps,n),t.child;case 8:return pe(e,t,t.pendingProps.children,n),t.child;case 12:return pe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ai(t,t.type,i.value),pe(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Mr(t),r=xe(r),i=i(r),t.flags|=1,pe(e,t,i,n),t.child;case 14:return my(e,t,t.type,t.pendingProps,n);case 15:return uT(e,t,t.type,t.pendingProps,n);case 19:return fT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Uu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Wn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return cT(e,t,n);case 24:return Mr(t),i=xe(ie),e===null?(r=tm(),r===null&&(r=Ot,s=Wd(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},em(t),Ai(t,ie,r)):(e.lanes&n&&(Of(e,t),to(t,null,null,n),Wa()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ai(t,ie,i)):(i=s.cache,Ai(t,ie,i),i!==r.cache&&xf(t,[ie],n,!0))),pe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(P(156,t.tag))}function Hn(e){e.flags|=4}function Ty(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!nE(t)){if(t=dn.current,t!==null&&((dt&4194048)===dt?Vn!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==Vn))throw Za=Vf,_0;e.flags|=8192}}function Bl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?jv():536870912,e.lanes|=t,Qs|=t)}function ka(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function $S(e,t,n){var i=t.pendingProps;switch(Jd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return Bt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ti(ie),js(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Oa(t)?Hn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$p())),Bt(t),null;case 26:return n=t.memoizedState,e===null?(Hn(t),n!==null?(Bt(t),Ty(t,n)):(Bt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Hn(t),Bt(t),Ty(t,n)):(Bt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Hn(t),Bt(t),t.flags&=-16777217),null;case 27:Eu(t),n=ki.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Bt(t),null}e=xn.current,Oa(t)?Kp(t):(e=WT(r,i,n),t.stateNode=e,Hn(t))}return Bt(t),null;case 5:if(Eu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Bt(t),null}if(e=xn.current,Oa(t))Kp(t);else{switch(r=Hu(ki.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Ne]=t,e[Be]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Ee(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Hn(t)}}return Bt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(P(166));if(e=ki.current,Oa(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Oe,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ne]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||$T(e.nodeValue,n)),e||Or(t)}else e=Hu(e).createTextNode(i),e[Ne]=t,t.stateNode=e}return Bt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Oa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(P(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[Ne]=t}else Qo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),r=!1}else r=$p(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Zn(t),t):(Zn(t),null)}if(Zn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Bl(t,t.updateQueue),Bt(t),null;case 4:return js(),e===null&&bm(t.stateNode.containerInfo),Bt(t),null;case 10:return ti(t.type),Bt(t),null;case 19:if(de(re),r=t.memoizedState,r===null)return Bt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)ka(r,!1);else{if(Qt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ou(e),s!==null){for(t.flags|=128,ka(r,!1),e=s.updateQueue,t.updateQueue=e,Bl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)m0(n,e),n=n.sibling;return jt(re,re.current&1|2),t.child}e=e.sibling}r.tail!==null&&Dn()>Lu&&(t.flags|=128,i=!0,ka(r,!1),t.lanes=4194304)}else{if(!i)if(e=Ou(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Bl(t,e),ka(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!_t)return Bt(t),null}else 2*Dn()-r.renderingStartTime>Lu&&n!==536870912&&(t.flags|=128,i=!0,ka(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Dn(),t.sibling=null,e=re.current,jt(re,i?e&1|2:e&1),t):(Bt(t),null);case 22:case 23:return Zn(t),nm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),n=t.updateQueue,n!==null&&Bl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&de(Nr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ti(ie),Bt(t),null;case 25:return null;case 30:return null}throw Error(P(156,t.tag))}function ZS(e,t){switch(Jd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(ie),js(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Eu(t),null;case 13:if(Zn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Qo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(re),null;case 4:return js(),null;case 10:return ti(t.type),null;case 22:case 23:return Zn(t),nm(),e!==null&&de(Nr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ti(ie),null;case 25:return null;default:return null}}function mT(e,t){switch(Jd(t),t.tag){case 3:ti(ie),js();break;case 26:case 27:case 5:Eu(t);break;case 4:js();break;case 13:Zn(t);break;case 19:de(re);break;case 10:ti(t.type);break;case 22:case 23:Zn(t),nm(),e!==null&&de(Nr);break;case 24:ti(ie)}}function Jo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Vt(t,t.return,l)}}function $i(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Vt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Vt(t,t.return,d)}}function gT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{E0(t,n)}catch(i){Vt(e,e.return,i)}}}function pT(e,t,n){n.props=Ur(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Vt(e,t,i)}}function no(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Vt(e,t,r)}}function Nn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Vt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Vt(e,t,r)}else n.current=null}function yT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Vt(e,e.return,r)}}function jh(e,t,n){try{var i=e.stateNode;_w(i,e.type,n,t),i[Be]=t}catch(r){Vt(e,e.return,r)}}function _T(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&or(e.type)||e.tag===4}function zh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||_T(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&or(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nc));else if(i!==4&&(i===27&&or(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Hf(e,t,n),e=e.sibling;e!==null;)Hf(e,t,n),e=e.sibling}function Pu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&or(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Pu(e,t,n),e=e.sibling;e!==null;)Pu(e,t,n),e=e.sibling}function vT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ee(t,i,n),t[Ne]=e,t[Be]=n}catch(s){Vt(e,e.return,s)}}var Gn=!1,Kt=!1,Bh=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,ue=null;function JS(e,t){if(e=e.containerInfo,Zf=Yu,e=a0(e),Yd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jf={focusedElem:e,selectionRange:n},Yu=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){switch(t=ue,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Ur(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){Vt(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)td(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(P(163))}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}}function TT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:yi(e,n),i&4&&Jo(5,n);break;case 1:if(yi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Vt(n,n.return,a)}else{var r=Ur(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Vt(n,n.return,a)}}i&64&&gT(n),i&512&&no(n,n.return);break;case 3:if(yi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{E0(e,t)}catch(a){Vt(n,n.return,a)}}break;case 27:t===null&&i&4&&vT(n);case 26:case 5:yi(e,n),t===null&&i&4&&yT(n),i&512&&no(n,n.return);break;case 12:yi(e,n);break;case 13:yi(e,n),i&4&&bT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ow.bind(null,n),ww(e,n))));break;case 22:if(i=n.memoizedState!==null||Gn,!i){t=t!==null&&t.memoizedState!==null||Kt,r=Gn;var s=Kt;Gn=i,(Kt=t)&&!s?vi(e,n,(n.subtreeFlags&8772)!==0):yi(e,n),Gn=r,Kt=s}break;case 30:break;default:yi(e,n)}}function ET(e){var t=e.alternate;t!==null&&(e.alternate=null,ET(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Bd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pt=null,Le=!1;function Fn(e,t,n){for(n=n.child;n!==null;)AT(e,t,n),n=n.sibling}function AT(e,t,n){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Bo,n)}catch{}switch(n.tag){case 26:Kt||Nn(n,t),Fn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Kt||Nn(n,t);var i=Pt,r=Le;or(n.type)&&(Pt=n.stateNode,Le=!1),Fn(e,t,n),ao(n.stateNode),Pt=i,Le=r;break;case 5:Kt||Nn(n,t);case 6:if(i=Pt,r=Le,Pt=null,Fn(e,t,n),Pt=i,Le=r,Pt!==null)if(Le)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(n.stateNode)}catch(s){Vt(n,t,s)}else try{Pt.removeChild(n.stateNode)}catch(s){Vt(n,t,s)}break;case 18:Pt!==null&&(Le?(e=Pt,Oy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Co(e)):Oy(Pt,n.stateNode));break;case 4:i=Pt,r=Le,Pt=n.stateNode.containerInfo,Le=!0,Fn(e,t,n),Pt=i,Le=r;break;case 0:case 11:case 14:case 15:Kt||$i(2,n,t),Kt||$i(4,n,t),Fn(e,t,n);break;case 1:Kt||(Nn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&pT(n,t,i)),Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:Kt=(i=Kt)||n.memoizedState!==null,Fn(e,t,n),Kt=i;break;default:Fn(e,t,n)}}function bT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Co(e)}catch(n){Vt(t,t.return,n)}}function WS(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ey),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ey),t;default:throw Error(P(435,e.tag))}}function qh(e,t){var n=WS(e);t.forEach(function(i){var r=lw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Qe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(or(l.type)){Pt=l.stateNode,Le=!1;break t}break;case 5:Pt=l.stateNode,Le=!1;break t;case 3:case 4:Pt=l.stateNode.containerInfo,Le=!0;break t}l=l.return}if(Pt===null)throw Error(P(160));AT(s,a,r),Pt=null,Le=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)ST(t,e),t=t.sibling}var _n=null;function ST(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qe(t,e),Ye(e),i&4&&($i(3,e,e.return),Jo(3,e),$i(5,e,e.return));break;case 1:Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),i&64&&Gn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=_n;if(Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Fo]||s[Ne]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Ee(s,i,n),s[Ne]=e,ce(s),i=s;break t;case"link":var a=Ly("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Ee(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Ly("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Ee(s,i,n),r.head.appendChild(s);break;default:throw Error(P(468,i))}s[Ne]=e,ce(s),i=s}e.stateNode=i}else jy(r,e.type,e.stateNode);else e.stateNode=Py(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?jy(r,e.type,e.stateNode):Py(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&jh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),n!==null&&i&4&&jh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),e.flags&32){r=e.stateNode;try{Bs(r,"")}catch(_){Vt(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,jh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Bh=!0);break;case 6:if(Qe(t,e),Ye(e),i&4){if(e.stateNode===null)throw Error(P(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Vt(e,e.return,_)}}break;case 3:if(uu=null,r=_n,_n=Fu(t.containerInfo),Qe(t,e),_n=r,Ye(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(t.containerInfo)}catch(_){Vt(e,e.return,_)}Bh&&(Bh=!1,wT(e));break;case 4:i=_n,_n=Fu(e.stateNode.containerInfo),Qe(t,e),Ye(e),_n=i;break;case 12:Qe(t,e),Ye(e);break;case 13:Qe(t,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Tm=Dn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,qh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Gn,d=Kt;if(Gn=h||r,Kt=d||u,Qe(t,e),Kt=d,Gn=h,Ye(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Gn||Kt||Er(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Vt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Vt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,qh(e,n))));break;case 19:Qe(t,e),Ye(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,qh(e,i)));break;case 30:break;case 21:break;default:Qe(t,e),Ye(e)}}function Ye(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(_T(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var r=n.stateNode,s=zh(e);Pu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Bs(a,""),n.flags&=-33);var l=zh(e);Pu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=zh(e);Hf(e,h,u);break;default:throw Error(P(161))}}catch(d){Vt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function yi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)TT(e,t.alternate,t),t=t.sibling}function Er(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$i(4,t,t.return),Er(t);break;case 1:Nn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&pT(t,t.return,n),Er(t);break;case 27:ao(t.stateNode);case 26:case 5:Nn(t,t.return),Er(t);break;case 22:t.memoizedState===null&&Er(t);break;case 30:Er(t);break;default:Er(t)}e=e.sibling}}function vi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:vi(r,s,n),Jo(4,s);break;case 1:if(vi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Vt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)T0(u[r],l)}catch(h){Vt(i,i.return,h)}}n&&a&64&&gT(s),no(s,s.return);break;case 27:vT(s);case 26:case 5:vi(r,s,n),n&&i===null&&a&4&&yT(s),no(s,s.return);break;case 12:vi(r,s,n);break;case 13:vi(r,s,n),n&&a&4&&bT(r,s);break;case 22:s.memoizedState===null&&vi(r,s,n),no(s,s.return);break;case 30:break;default:vi(r,s,n)}t=t.sibling}}function pm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ko(n))}function ym(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ko(e))}function Rn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)RT(e,t,n,i),t=t.sibling}function RT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Rn(e,t,n,i),r&2048&&Jo(9,t);break;case 1:Rn(e,t,n,i);break;case 3:Rn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ko(e)));break;case 12:if(r&2048){Rn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Vt(t,t.return,u)}}else Rn(e,t,n,i);break;case 13:Rn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Rn(e,t,n,i):io(e,t):s._visibility&2?Rn(e,t,n,i):(s._visibility|=2,ss(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&pm(a,t);break;case 24:Rn(e,t,n,i),r&2048&&ym(t.alternate,t);break;default:Rn(e,t,n,i)}}function ss(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:ss(s,a,l,u,r),Jo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?ss(s,a,l,u,r):io(s,a):(d._visibility|=2,ss(s,a,l,u,r)),r&&h&2048&&pm(a.alternate,a);break;case 24:ss(s,a,l,u,r),r&&h&2048&&ym(a.alternate,a);break;default:ss(s,a,l,u,r)}t=t.sibling}}function io(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:io(n,i),r&2048&&pm(i.alternate,i);break;case 24:io(n,i),r&2048&&ym(i.alternate,i);break;default:io(n,i)}t=t.sibling}}var Ba=8192;function es(e){if(e.subtreeFlags&Ba)for(e=e.child;e!==null;)IT(e),e=e.sibling}function IT(e){switch(e.tag){case 26:es(e),e.flags&Ba&&e.memoizedState!==null&&Lw(_n,e.memoizedState,e.memoizedProps);break;case 5:es(e);break;case 3:case 4:var t=_n;_n=Fu(e.stateNode.containerInfo),es(e),_n=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ba,Ba=16777216,es(e),Ba=t):es(e));break;default:es(e)}}function CT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ua(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,xT(i,e)}CT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)NT(e),e=e.sibling}function NT(e){switch(e.tag){case 0:case 11:case 15:Ua(e),e.flags&2048&&$i(9,e,e.return);break;case 3:Ua(e);break;case 12:Ua(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ou(e)):Ua(e);break;default:Ua(e)}}function ou(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,xT(i,e)}CT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$i(8,t,t.return),ou(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ou(t));break;default:ou(t)}e=e.sibling}}function xT(e,t){for(;ue!==null;){var n=ue;switch(n.tag){case 0:case 11:case 15:$i(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ko(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ue=i;else t:for(n=e;ue!==null;){i=ue;var r=i.sibling,s=i.return;if(ET(i),i===n){ue=null;break t}if(r!==null){r.return=s,ue=r;break t}ue=s}}}var tw={getCacheForType:function(e){var t=xe(ie),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},ew=typeof WeakMap=="function"?WeakMap:Map,wt=0,Ot=null,at=null,dt=0,St=0,Ke=null,Di=!1,oa=!1,_m=!1,si=0,Qt=0,Zi=0,xr=0,vm=0,fn=0,Qs=0,ro=null,je=null,Ff=!1,Tm=0,Lu=1/0,ju=null,Li=null,_e=0,ji=null,Ys=null,Ds=0,Gf=0,Qf=null,DT=null,so=0,Yf=null;function tn(){if(wt&2&&dt!==0)return dt&-dt;if(Z.T!==null){var e=qs;return e!==0?e:Am()}return qv()}function VT(){fn===0&&(fn=!(dt&536870912)||_t?Lv():536870912);var e=dn.current;return e!==null&&(e.flags|=32),fn}function en(e,t,n){(e===Ot&&(St===2||St===9)||e.cancelPendingCommit!==null)&&(Ks(e,0),Vi(e,dt,fn,!1)),Ho(e,n),(!(wt&2)||e!==Ot)&&(e===Ot&&(!(wt&2)&&(xr|=n),Qt===4&&Vi(e,dt,fn,!1)),Ln(e))}function OT(e,t,n){if(wt&6)throw Error(P(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||qo(e,t),r=i?rw(e,t):Hh(e,t,!0),s=i;do{if(r===0){oa&&!i&&Vi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!nw(n)){r=Hh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=ro;var u=l.current.memoizedState.isDehydrated;if(u&&(Ks(l,a).flags|=256),a=Hh(l,a,!1),a!==2){if(_m&&!u){l.errorRecoveryDisabledLanes|=s,xr|=s,r=4;break t}s=je,je=r,s!==null&&(je===null?je=s:je.push.apply(je,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ks(e,0),Vi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(P(345));case 4:if((t&4194048)!==t)break;case 6:Vi(i,t,fn,!Di);break t;case 2:je=null;break;case 3:case 5:break;default:throw Error(P(329))}if((t&62914560)===t&&(r=Tm+300-Dn(),10<r)){if(Vi(i,t,fn,!Di),pc(i,0,!0)!==0)break t;i.timeoutHandle=JT(Ay.bind(null,i,n,je,ju,Ff,t,fn,xr,Qs,Di,s,2,-0,0),r);break t}Ay(i,n,je,ju,Ff,t,fn,xr,Qs,Di,s,0,-0,0)}}break}while(!0);Ln(e)}function Ay(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(So={stylesheets:null,count:0,unsuspend:Pw},IT(t),g=jw(),g!==null)){e.cancelPendingCommit=g(Sy.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Vi(e,s,a,!h);return}Sy(e,t,s,n,i,r,a,l,u)}function nw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!sn(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vi(e,t,n,i){t&=~vm,t&=~xr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-We(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&zv(e,n,t)}function Rc(){return wt&6?!0:(Wo(0),!1)}function Em(){if(at!==null){if(St===0)var e=at.return;else e=at,$n=Qr=null,om(e),xs=null,Eo=0,e=at;for(;e!==null;)mT(e.alternate,e),e=e.return;at=null}}function Ks(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Tw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Em(),Ot=e,at=n=Wn(e.current,null),dt=t,St=0,Ke=null,Di=!1,oa=qo(e,t),_m=!1,Qs=fn=vm=xr=Zi=Qt=0,je=ro=null,Ff=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-We(i),s=1<<r;t|=e[r],i&=~s}return si=t,Tc(),n}function MT(e,t){nt=null,Z.H=Vu,t===Xo||t===Ac?(t=ty(),St=3):t===_0?(t=ty(),St=4):St=t===lT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ke=t,at===null&&(Qt=1,ku(e,hn(t,e.current)))}function kT(){var e=Z.H;return Z.H=Vu,e===null?Vu:e}function UT(){var e=Z.A;return Z.A=tw,e}function Kf(){Qt=4,Di||(dt&4194048)!==dt&&dn.current!==null||(oa=!0),!(Zi&134217727)&&!(xr&134217727)||Ot===null||Vi(Ot,dt,fn,!1)}function Hh(e,t,n){var i=wt;wt|=2;var r=kT(),s=UT();(Ot!==e||dt!==t)&&(ju=null,Ks(e,t)),t=!1;var a=Qt;t:do try{if(St!==0&&at!==null){var l=at,u=Ke;switch(St){case 8:Em(),a=6;break t;case 3:case 2:case 9:case 6:dn.current===null&&(t=!0);var h=St;if(St=0,Ke=null,As(e,l,u,h),n&&oa){a=0;break t}break;default:h=St,St=0,Ke=null,As(e,l,u,h)}}iw(),a=Qt;break}catch(d){MT(e,d)}while(!0);return t&&e.shellSuspendCounter++,$n=Qr=null,wt=i,Z.H=r,Z.A=s,at===null&&(Ot=null,dt=0,Tc()),a}function iw(){for(;at!==null;)PT(at)}function rw(e,t){var n=wt;wt|=2;var i=kT(),r=UT();Ot!==e||dt!==t?(ju=null,Lu=Dn()+500,Ks(e,t)):oa=qo(e,t);t:do try{if(St!==0&&at!==null){t=at;var s=Ke;e:switch(St){case 1:St=0,Ke=null,As(e,t,s,1);break;case 2:case 9:if(Wp(s)){St=0,Ke=null,by(t);break}t=function(){St!==2&&St!==9||Ot!==e||(St=7),Ln(e)},s.then(t,t);break t;case 3:St=7;break t;case 4:St=5;break t;case 7:Wp(s)?(St=0,Ke=null,by(t)):(St=0,Ke=null,As(e,t,s,7));break;case 5:var a=null;switch(at.tag){case 26:a=at.memoizedState;case 5:case 27:var l=at;if(!a||nE(a)){St=0,Ke=null;var u=l.sibling;if(u!==null)at=u;else{var h=l.return;h!==null?(at=h,Ic(h)):at=null}break e}}St=0,Ke=null,As(e,t,s,5);break;case 6:St=0,Ke=null,As(e,t,s,6);break;case 8:Em(),Qt=6;break t;default:throw Error(P(462))}}sw();break}catch(d){MT(e,d)}while(!0);return $n=Qr=null,Z.H=i,Z.A=r,wt=n,at!==null?0:(Ot=null,dt=0,Tc(),Qt)}function sw(){for(;at!==null&&!Ib();)PT(at)}function PT(e){var t=dT(e.alternate,e,si);e.memoizedProps=e.pendingProps,t===null?Ic(e):at=t}function by(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=py(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=py(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:om(t);default:mT(n,t),t=at=m0(t,si),t=dT(n,t,si)}e.memoizedProps=e.pendingProps,t===null?Ic(e):at=t}function As(e,t,n,i){$n=Qr=null,om(t),xs=null,Eo=0;var r=t.return;try{if(KS(e,r,t,n,dt)){Qt=1,ku(e,hn(n,e.current)),at=null;return}}catch(s){if(r!==null)throw at=r,s;Qt=1,ku(e,hn(n,e.current)),at=null;return}t.flags&32768?(_t||i===1?e=!0:oa||dt&536870912?e=!1:(Di=e=!0,(i===2||i===9||i===3||i===6)&&(i=dn.current,i!==null&&i.tag===13&&(i.flags|=16384))),LT(t,e)):Ic(t)}function Ic(e){var t=e;do{if(t.flags&32768){LT(t,Di);return}e=t.return;var n=$S(t.alternate,t,si);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Qt===0&&(Qt=5)}function LT(e,t){do{var n=ZS(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);Qt=6,at=null}function Sy(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Cc();while(_e!==0);if(wt&6)throw Error(P(327));if(t!==null){if(t===e.current)throw Error(P(177));if(s=t.lanes|t.childLanes,s|=Kd,Pb(e,n,s,a,l,u),e===Ot&&(at=Ot=null,dt=0),Ys=t,ji=e,Ds=n,Gf=s,Qf=r,DT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,uw(Au,function(){return HT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,r=vt.p,vt.p=2,a=wt,wt|=4;try{JS(e,t,n)}finally{wt=a,vt.p=r,Z.T=i}}_e=1,jT(),zT(),BT()}}function jT(){if(_e===1){_e=0;var e=ji,t=Ys,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=vt.p;vt.p=2;var r=wt;wt|=4;try{ST(t,e);var s=Jf,a=a0(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&s0(l.ownerDocument.documentElement,l)){if(u!==null&&Yd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,O=Math.min(u.start,x),V=u.end===void 0?O:Math.min(u.end,x);!_.extend&&O>V&&(a=V,V=O,O=a);var S=Gp(l,O),T=Gp(l,V);if(S&&T&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var R=g.createRange();R.setStart(S.node,S.offset),_.removeAllRanges(),O>V?(_.addRange(R),_.extend(T.node,T.offset)):(R.setEnd(T.node,T.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Yu=!!Zf,Jf=Zf=null}finally{wt=r,vt.p=i,Z.T=n}}e.current=t,_e=2}}function zT(){if(_e===2){_e=0;var e=ji,t=Ys,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=vt.p;vt.p=2;var r=wt;wt|=4;try{TT(e,t.alternate,t)}finally{wt=r,vt.p=i,Z.T=n}}_e=3}}function BT(){if(_e===4||_e===3){_e=0,Cb();var e=ji,t=Ys,n=Ds,i=DT;t.subtreeFlags&10256||t.flags&10256?_e=5:(_e=0,Ys=ji=null,qT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Li=null),zd(n),t=t.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Bo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,r=vt.p,vt.p=2,Z.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{Z.T=t,vt.p=r}}Ds&3&&Cc(),Ln(e),r=e.pendingLanes,n&4194090&&r&42?e===Yf?so++:(so=0,Yf=e):so=0,Wo(0)}}function qT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ko(t)))}function Cc(e){return jT(),zT(),BT(),HT()}function HT(){if(_e!==5)return!1;var e=ji,t=Gf;Gf=0;var n=zd(Ds),i=Z.T,r=vt.p;try{vt.p=32>n?32:n,Z.T=null,n=Qf,Qf=null;var s=ji,a=Ds;if(_e=0,Ys=ji=null,Ds=0,wt&6)throw Error(P(331));var l=wt;if(wt|=4,NT(s.current),RT(s,s.current,a,n),wt=l,Wo(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Bo,s)}catch{}return!0}finally{vt.p=r,Z.T=i,qT(e,t)}}function wy(e,t,n){t=hn(n,t),t=zf(e.stateNode,t,2),e=Pi(e,t,2),e!==null&&(Ho(e,2),Ln(e))}function Vt(e,t,n){if(e.tag===3)wy(e,e,n);else for(;t!==null;){if(t.tag===3){wy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Li===null||!Li.has(i))){e=hn(n,e),n=aT(2),i=Pi(t,n,2),i!==null&&(oT(n,i,t,e),Ho(i,2),Ln(i));break}}t=t.return}}function Fh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new ew;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(_m=!0,r.add(n),e=aw.bind(null,e,t,n),t.then(e,e))}function aw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ot===e&&(dt&n)===n&&(Qt===4||Qt===3&&(dt&62914560)===dt&&300>Dn()-Tm?!(wt&2)&&Ks(e,0):vm|=n,Qs===dt&&(Qs=0)),Ln(e)}function FT(e,t){t===0&&(t=jv()),e=aa(e,t),e!==null&&(Ho(e,t),Ln(e))}function ow(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),FT(e,n)}function lw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(t),FT(e,n)}function uw(e,t){return Ld(e,t)}var zu=null,as=null,Xf=!1,Bu=!1,Gh=!1,Dr=0;function Ln(e){e!==as&&e.next===null&&(as===null?zu=as=e:as=as.next=e),Bu=!0,Xf||(Xf=!0,hw())}function Wo(e,t){if(!Gh&&Bu){Gh=!0;do for(var n=!1,i=zu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-We(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Ry(i,s))}else s=dt,s=pc(i,i===Ot?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||qo(i,s)||(n=!0,Ry(i,s));i=i.next}while(n);Gh=!1}}function cw(){GT()}function GT(){Bu=Xf=!1;var e=0;Dr!==0&&(vw()&&(e=Dr),Dr=0);for(var t=Dn(),n=null,i=zu;i!==null;){var r=i.next,s=QT(i,t);s===0?(i.next=null,n===null?zu=r:n.next=r,r===null&&(as=n)):(n=i,(e!==0||s&3)&&(Bu=!0)),i=r}Wo(e)}function QT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-We(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=Ub(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Ot,n=dt,n=pc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(St===2||St===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&yh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||qo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&yh(i),zd(n)){case 2:case 8:n=Uv;break;case 32:n=Au;break;case 268435456:n=Pv;break;default:n=Au}return i=YT.bind(null,e),n=Ld(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&yh(i),e.callbackPriority=2,e.callbackNode=null,2}function YT(e,t){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var i=dt;return i=pc(e,e===Ot?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(OT(e,i,t),QT(e,Dn()),e.callbackNode!=null&&e.callbackNode===n?YT.bind(null,e):null)}function Ry(e,t){if(Cc())return null;OT(e,t,!0)}function hw(){Ew(function(){wt&6?Ld(kv,cw):GT()})}function Am(){return Dr===0&&(Dr=Lv()),Dr}function Iy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wl(""+e)}function Cy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function fw(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Iy((r[Be]||null).action),a=i.submitter;a&&(t=(t=a[Be]||null)?Iy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new yc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Dr!==0){var u=a?Cy(r,a):new FormData(r);Lf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?Cy(r,a):new FormData(r),Lf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Qh=0;Qh<Rf.length;Qh++){var Yh=Rf[Qh],dw=Yh.toLowerCase(),mw=Yh[0].toUpperCase()+Yh.slice(1);bn(dw,"on"+mw)}bn(l0,"onAnimationEnd");bn(u0,"onAnimationIteration");bn(c0,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(DS,"onTransitionRun");bn(VS,"onTransitionStart");bn(OS,"onTransitionCancel");bn(h0,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ao));function KT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Mu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Mu(d)}r.currentTarget=null,s=u}}}}function st(e,t){var n=t[vf];n===void 0&&(n=t[vf]=new Set);var i=e+"__bubble";n.has(i)||(XT(t,e,2,!1),n.add(i))}function Kh(e,t,n){var i=0;t&&(i|=4),XT(n,e,i,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function bm(e){if(!e[ql]){e[ql]=!0,Hv.forEach(function(n){n!=="selectionchange"&&(gw.has(n)||Kh(n,!1,e),Kh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,Kh("selectionchange",!1,t))}}function XT(e,t,n,i){switch(oE(t)){case 2:var r=qw;break;case 8:r=Hw;break;default:r=Im}n=r.bind(null,t,n,e),r=void 0,!bf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Xh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=ds(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}Zv(function(){var h=s,d=Hd(n),g=[];t:{var m=f0.get(e);if(m!==void 0){var _=yc,x=e;switch(e){case"keypress":if(eu(n)===0)break t;case"keydown":case"keyup":_=uS;break;case"focusin":x="focus",_=wh;break;case"focusout":x="blur",_=wh;break;case"beforeblur":case"afterblur":_=wh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Zb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=fS;break;case l0:case u0:case c0:_=tS;break;case h0:_=mS;break;case"scroll":case"scrollend":_=Xb;break;case"wheel":_=pS;break;case"copy":case"cut":case"paste":_=nS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Pp;break;case"toggle":case"beforetoggle":_=_S}var O=(t&4)!==0,V=!O&&(e==="scroll"||e==="scrollend"),S=O?m!==null?m+"Capture":null:m;O=[];for(var T=h,R;T!==null;){var D=T;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||S===null||(D=po(T,S),D!=null&&O.push(bo(T,D,R))),V)break;T=T.return}0<O.length&&(m=new _(m,x,null,n,d),g.push({event:m,listeners:O}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Af&&(x=n.relatedTarget||n.fromElement)&&(ds(x)||x[ra]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?ds(x):null,x!==null&&(V=zo(x),O=x.tag,x!==V||O!==5&&O!==27&&O!==6)&&(x=null)):(_=null,x=h),_!==x)){if(O=kp,D="onMouseLeave",S="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(O=Pp,D="onPointerLeave",S="onPointerEnter",T="pointer"),V=_==null?m:za(_),R=x==null?m:za(x),m=new O(D,T+"leave",_,n,d),m.target=V,m.relatedTarget=R,D=null,ds(d)===h&&(O=new O(S,T+"enter",x,n,d),O.target=R,O.relatedTarget=V,D=O),V=D,_&&x)e:{for(O=_,S=x,T=0,R=O;R;R=ns(R))T++;for(R=0,D=S;D;D=ns(D))R++;for(;0<T-R;)O=ns(O),T--;for(;0<R-T;)S=ns(S),R--;for(;T--;){if(O===S||S!==null&&O===S.alternate)break e;O=ns(O),S=ns(S)}O=null}else O=null;_!==null&&Ny(g,m,_,O,!1),x!==null&&V!==null&&Ny(g,V,x,O,!0)}}t:{if(m=h?za(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Bp;else if(zp(m))if(i0)L=CS;else{L=RS;var B=wS}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&qd(h.elementType)&&(L=Bp):L=IS;if(L&&(L=L(e,h))){n0(g,L,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Ef(m,"number",m.value)}switch(B=h?za(h):window,e){case"focusin":(zp(B)||B.contentEditable==="true")&&(ps=B,Sf=h,Xa=null);break;case"focusout":Xa=Sf=ps=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,Qp(g,n,d);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":Qp(g,n,d)}var E;if(Qd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else gs?t0(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Wv&&n.locale!=="ko"&&(gs||y!=="onCompositionStart"?y==="onCompositionEnd"&&gs&&(E=Jv()):(xi=d,Fd="value"in xi?xi.value:xi.textContent,gs=!0)),B=qu(h,y),0<B.length&&(y=new Up(y,e,null,n,d),g.push({event:y,listeners:B}),E?y.data=E:(E=e0(n),E!==null&&(y.data=E)))),(E=TS?ES(e,n):AS(e,n))&&(y=qu(h,"onBeforeInput"),0<y.length&&(B=new Up("onBeforeInput","beforeinput",null,n,d),g.push({event:B,listeners:y}),B.data=E)),fw(g,e,h,n,d)}KT(g,t)})}function bo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=po(e,n),r!=null&&i.unshift(bo(e,r,s)),r=po(e,t),r!=null&&i.push(bo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ny(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=po(n,s),h!=null&&a.unshift(bo(n,h,u))):r||(h=po(n,s),h!=null&&a.push(bo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var pw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function xy(e){return(typeof e=="string"?e:""+e).replace(pw,`
`).replace(yw,"")}function $T(e,t){return t=xy(t),xy(e)===t}function Nc(){}function It(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Bs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Bs(e,""+i);break;case"className":kl(e,"class",i);break;case"tabIndex":kl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(e,n,i);break;case"style":$v(e,i,s);break;case"data":if(t!=="object"){kl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Wl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&It(e,t,"name",r.name,r,null),It(e,t,"formEncType",r.formEncType,r,null),It(e,t,"formMethod",r.formMethod,r,null),It(e,t,"formTarget",r.formTarget,r,null)):(It(e,t,"encType",r.encType,r,null),It(e,t,"method",r.method,r,null),It(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Wl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Nc);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Wl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":st("beforetoggle",e),st("toggle",e),Jl(e,"popover",i);break;case"xlinkActuate":qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":qn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":qn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":qn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":qn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Jl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Yb.get(n)||n,Jl(e,n,i))}}function $f(e,t,n,i,r,s){switch(n){case"style":$v(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Bs(e,i):(typeof i=="number"||typeof i=="bigint")&&Bs(e,""+i);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fv.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Be]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Jl(e,n,i)}}}function Ee(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:It(e,t,s,a,n,null)}}r&&It(e,t,"srcSet",n.srcSet,n,null),i&&It(e,t,"src",n.src,n,null);return;case"input":st("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(P(137,t));break;default:It(e,t,i,d,n,null)}}Yv(e,s,l,u,h,a,r,!1),bu(e);return;case"select":st("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:It(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?ws(e,!!i,t,!1):n!=null&&ws(e,!!i,n,!0);return;case"textarea":st("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:It(e,t,a,l,n,null)}Xv(e,i,r,s),bu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:It(e,t,u,i,n,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(i=0;i<Ao.length;i++)st(Ao[i],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:It(e,t,h,i,n,null)}return;default:if(qd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&$f(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&It(e,t,l,i,n,null))}function _w(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||It(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,t));break;default:_!==g&&It(e,t,m,_,i,g)}}Tf(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||It(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&It(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?ws(e,!!n,m,!1):!!i!=!!n&&(t!=null?ws(e,!!n,t,!0):ws(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:It(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(P(91));break;default:r!==s&&It(e,t,a,r,i,s)}Kv(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:It(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:It(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&It(e,t,O,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,t));break;default:It(e,t,h,m,i,_)}return;default:if(qd(t)){for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!==void 0&&!i.hasOwnProperty(V)&&$f(e,t,V,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||$f(e,t,d,m,i,_);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&It(e,t,S,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||It(e,t,g,m,i,_)}var Zf=null,Jf=null;function Hu(e){return e.nodeType===9?e:e.ownerDocument}function Dy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZT(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $h=null;function vw(){var e=window.event;return e&&e.type==="popstate"?e===$h?!1:($h=e,!0):($h=null,!1)}var JT=typeof setTimeout=="function"?setTimeout:void 0,Tw=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,Ew=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(e){return Vy.resolve(null).then(e).catch(Aw)}:JT;function Aw(e){setTimeout(function(){throw e})}function or(e){return e==="head"}function Oy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ao(a.documentElement),n&2&&ao(a.body),n&4)for(n=a.head,ao(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Fo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Co(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Co(t)}function td(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":td(n),Bd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function bw(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Fo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=En(e.nextSibling),e===null)break}return null}function Sw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=En(e.nextSibling),e===null))return null;return e}function ed(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ww(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var nd=null;function My(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function WT(e,t,n){switch(t=Hu(n),e){case"html":if(e=t.documentElement,!e)throw Error(P(452));return e;case"head":if(e=t.head,!e)throw Error(P(453));return e;case"body":if(e=t.body,!e)throw Error(P(454));return e;default:throw Error(P(451))}}function ao(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Bd(e)}var mn=new Map,ky=new Set;function Fu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ci=vt.d;vt.d={f:Rw,r:Iw,D:Cw,C:Nw,L:xw,m:Dw,X:Ow,S:Vw,M:Mw};function Rw(){var e=ci.f(),t=Rc();return e||t}function Iw(e){var t=sa(e);t!==null&&t.tag===5&&t.type==="form"?Q0(t):ci.r(e)}var la=typeof document>"u"?null:document;function tE(e,t,n){var i=la;if(i&&typeof t=="string"&&t){var r=cn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),ky.has(r)||(ky.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Ee(t,"link",e),ce(t),i.head.appendChild(t)))}}function Cw(e){ci.D(e),tE("dns-prefetch",e,null)}function Nw(e,t){ci.C(e,t),tE("preconnect",e,t)}function xw(e,t,n){ci.L(e,t,n);var i=la;if(i&&e&&t){var r='link[rel="preload"][as="'+cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+cn(n.imageSizes)+'"]')):r+='[href="'+cn(e)+'"]';var s=r;switch(t){case"style":s=Xs(e);break;case"script":s=ua(e)}mn.has(s)||(e=Ut({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),mn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(tl(s))||t==="script"&&i.querySelector(el(s))||(t=i.createElement("link"),Ee(t,"link",e),ce(t),i.head.appendChild(t)))}}function Dw(e,t){ci.m(e,t);var n=la;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+cn(i)+'"][href="'+cn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ua(e)}if(!mn.has(s)&&(e=Ut({rel:"modulepreload",href:e},t),mn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(el(s)))return}i=n.createElement("link"),Ee(i,"link",e),ce(i),n.head.appendChild(i)}}}function Vw(e,t,n){ci.S(e,t,n);var i=la;if(i&&e){var r=Ss(i).hoistableStyles,s=Xs(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(tl(s)))l.loading=5;else{e=Ut({rel:"stylesheet",href:e,"data-precedence":t},n),(n=mn.get(s))&&Sm(e,n);var u=a=i.createElement("link");ce(u),Ee(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,lu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function Ow(e,t){ci.X(e,t);var n=la;if(n&&e){var i=Ss(n).hoistableScripts,r=ua(e),s=i.get(r);s||(s=n.querySelector(el(r)),s||(e=Ut({src:e,async:!0},t),(t=mn.get(r))&&wm(e,t),s=n.createElement("script"),ce(s),Ee(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Mw(e,t){ci.M(e,t);var n=la;if(n&&e){var i=Ss(n).hoistableScripts,r=ua(e),s=i.get(r);s||(s=n.querySelector(el(r)),s||(e=Ut({src:e,async:!0,type:"module"},t),(t=mn.get(r))&&wm(e,t),s=n.createElement("script"),ce(s),Ee(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Uy(e,t,n,i){var r=(r=ki.current)?Fu(r):null;if(!r)throw Error(P(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Xs(n.href),n=Ss(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Xs(n.href);var s=Ss(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(tl(e)))&&!s._p&&(a.instance=s,a.state.loading=5),mn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mn.set(e,n),s||kw(r,e,n,a.state))),t&&i===null)throw Error(P(528,""));return a}if(t&&i!==null)throw Error(P(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ua(n),n=Ss(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,e))}}function Xs(e){return'href="'+cn(e)+'"'}function tl(e){return'link[rel="stylesheet"]['+e+"]"}function eE(e){return Ut({},e,{"data-precedence":e.precedence,precedence:null})}function kw(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ee(t,"link",n),ce(t),e.head.appendChild(t))}function ua(e){return'[src="'+cn(e)+'"]'}function el(e){return"script[async]"+e}function Py(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+cn(n.href)+'"]');if(i)return t.instance=i,ce(i),i;var r=Ut({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ce(i),Ee(i,"style",r),lu(i,n.precedence,e),t.instance=i;case"stylesheet":r=Xs(n.href);var s=e.querySelector(tl(r));if(s)return t.state.loading|=4,t.instance=s,ce(s),s;i=eE(n),(r=mn.get(r))&&Sm(i,r),s=(e.ownerDocument||e).createElement("link"),ce(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ee(s,"link",i),t.state.loading|=4,lu(s,n.precedence,e),t.instance=s;case"script":return s=ua(n.src),(r=e.querySelector(el(s)))?(t.instance=r,ce(r),r):(i=n,(r=mn.get(s))&&(i=Ut({},n),wm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ce(r),Ee(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(P(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,lu(i,n.precedence,e));return t.instance}function lu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Sm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function wm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var uu=null;function Ly(e,t,n){if(uu===null){var i=new Map,r=uu=new Map;r.set(n,i)}else r=uu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Fo]||s[Ne]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function jy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Uw(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function nE(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var So=null;function Pw(){}function Lw(e,t,n){if(So===null)throw Error(P(475));var i=So;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Xs(n.href),s=e.querySelector(tl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Gu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ce(s);return}s=e.ownerDocument||e,n=eE(n),(r=mn.get(r))&&Sm(n,r),s=s.createElement("link"),ce(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ee(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Gu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function jw(){if(So===null)throw Error(P(475));var e=So;return e.stylesheets&&e.count===0&&id(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&id(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Gu(){if(this.count--,this.count===0){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qu=null;function id(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qu=new Map,t.forEach(zw,e),Qu=null,Gu.call(e))}function zw(e,t){if(!(t.state.loading&4)){var n=Qu.get(e);if(n)var i=n.get(null);else{n=new Map,Qu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Gu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var wo={$$typeof:Yn,Provider:null,Consumer:null,_currentValue:wr,_currentValue2:wr,_threadCount:0};function Bw(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_h(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_h(0),this.hiddenUpdates=_h(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function iE(e,t,n,i,r,s,a,l,u,h,d,g){return e=new Bw(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Xe(3,null,null,t),e.current=s,s.stateNode=e,t=Wd(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},em(s),e}function rE(e){return e?(e=vs,e):vs}function sE(e,t,n,i,r,s){r=rE(r),i.context===null?i.context=r:i.pendingContext=r,i=Ui(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Pi(e,i,t),n!==null&&(en(n,e,t),Ja(n,e,t))}function zy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rm(e,t){zy(e,t),(e=e.alternate)&&zy(e,t)}function aE(e){if(e.tag===13){var t=aa(e,67108864);t!==null&&en(t,e,67108864),Rm(e,67108864)}}var Yu=!0;function qw(e,t,n,i){var r=Z.T;Z.T=null;var s=vt.p;try{vt.p=2,Im(e,t,n,i)}finally{vt.p=s,Z.T=r}}function Hw(e,t,n,i){var r=Z.T;Z.T=null;var s=vt.p;try{vt.p=8,Im(e,t,n,i)}finally{vt.p=s,Z.T=r}}function Im(e,t,n,i){if(Yu){var r=rd(i);if(r===null)Xh(e,t,i,Ku,n),By(e,i);else if(Gw(r,e,t,n,i))i.stopPropagation();else if(By(e,i),t&4&&-1<Fw.indexOf(e)){for(;r!==null;){var s=sa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=vr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-We(a);l.entanglements[1]|=u,a&=~u}Ln(s),!(wt&6)&&(Lu=Dn()+500,Wo(0))}}break;case 13:l=aa(s,2),l!==null&&en(l,s,2),Rc(),Rm(s,2)}if(s=rd(i),s===null&&Xh(e,t,i,Ku,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Xh(e,t,i,null,n)}}function rd(e){return e=Hd(e),Cm(e)}var Ku=null;function Cm(e){if(Ku=null,e=ds(e),e!==null){var t=zo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Dv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ku=e,null}function oE(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nb()){case kv:return 2;case Uv:return 8;case Au:case xb:return 32;case Pv:return 268435456;default:return 32}default:return 32}}var sd=!1,zi=null,Bi=null,qi=null,Ro=new Map,Io=new Map,wi=[],Fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(e,t){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Ro.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(t.pointerId)}}function Pa(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=sa(t),t!==null&&aE(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Gw(e,t,n,i,r){switch(t){case"focusin":return zi=Pa(zi,e,t,n,i,r),!0;case"dragenter":return Bi=Pa(Bi,e,t,n,i,r),!0;case"mouseover":return qi=Pa(qi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ro.set(s,Pa(Ro.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Io.set(s,Pa(Io.get(s)||null,e,t,n,i,r)),!0}return!1}function lE(e){var t=ds(e.target);if(t!==null){var n=zo(t);if(n!==null){if(t=n.tag,t===13){if(t=Dv(n),t!==null){e.blockedOn=t,Lb(e.priority,function(){if(n.tag===13){var i=tn();i=jd(i);var r=aa(n,i);r!==null&&en(r,n,i),Rm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Af=i,n.target.dispatchEvent(i),Af=null}else return t=sa(n),t!==null&&aE(t),e.blockedOn=n,!1;t.shift()}return!0}function qy(e,t,n){cu(e)&&n.delete(t)}function Qw(){sd=!1,zi!==null&&cu(zi)&&(zi=null),Bi!==null&&cu(Bi)&&(Bi=null),qi!==null&&cu(qi)&&(qi=null),Ro.forEach(qy),Io.forEach(qy)}function Hl(e,t){e.blockedOn===t&&(e.blockedOn=null,sd||(sd=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,Qw)))}var Fl=null;function Hy(e){Fl!==e&&(Fl=e,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Cm(i||n)===null)continue;break}var s=sa(n);s!==null&&(e.splice(t,3),t-=3,Lf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Co(e){function t(u){return Hl(u,e)}zi!==null&&Hl(zi,e),Bi!==null&&Hl(Bi,e),qi!==null&&Hl(qi,e),Ro.forEach(t),Io.forEach(t);for(var n=0;n<wi.length;n++){var i=wi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)lE(n),n.blockedOn===null&&wi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Be]||null;if(typeof s=="function")a||Hy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Be]||null)l=a.formAction;else if(Cm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Hy(n)}}}function Nm(e){this._internalRoot=e}xc.prototype.render=Nm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));var n=t.current,i=tn();sE(n,i,e,t,null,null)};xc.prototype.unmount=Nm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sE(e.current,2,null,e,null,null),Rc(),t[ra]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=qv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wi.length&&t!==0&&t<wi[n].priority;n++);wi.splice(n,0,e),n===0&&lE(e)}};var Fy=Nv.version;if(Fy!=="19.1.1")throw Error(P(527,Fy,"19.1.1"));vt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Ab(t),e=e!==null?Vv(e):null,e=e===null?null:e.stateNode,e};var Yw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Bo=Gl.inject(Yw),Je=Gl}catch{}}mc.createRoot=function(e,t){if(!xv(e))throw Error(P(299));var n=!1,i="",r=iT,s=rT,a=sT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=iE(e,1,!1,null,null,n,i,r,s,a,l,null),e[ra]=t.current,bm(e),new Nm(t)};mc.hydrateRoot=function(e,t,n){if(!xv(e))throw Error(P(299));var i=!1,r="",s=iT,a=rT,l=sT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=iE(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=rE(null),n=t.current,i=tn(),i=jd(i),r=Ui(i),r.callback=null,Pi(n,r,i),n=i,t.current.lanes=n,Ho(t,n),Ln(t),e[ra]=t.current,bm(e),new xc(t)};mc.version="19.1.1";function uE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uE)}catch(e){console.error(e)}}uE(),bv.exports=mc;var Kw=bv.exports;const Xw=()=>{};var Gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},$w=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},hE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(cE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):$w(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new Zw;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const x=h<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jw=function(e){const t=cE(e);return hE.encodeByteArray(t,!0)},Xu=function(e){return Jw(e).replace(/\./g,"")},fE=function(e){try{return hE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=()=>Ww().__FIREBASE_DEFAULTS__,e2=()=>{if(typeof process>"u"||typeof Gy>"u")return;const e=Gy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},n2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&fE(e[1]);return t&&JSON.parse(t)},Dc=()=>{try{return Xw()||t2()||e2()||n2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},i2=e=>{var t,n;return(n=(t=Dc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},r2=e=>{const t=i2(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},dE=()=>{var e;return(e=Dc())==null?void 0:e.config},s2=e=>{var t;return(t=Dc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o2(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Xu(JSON.stringify(n)),Xu(JSON.stringify(a)),""].join(".")}const oo={};function u2(){const e={prod:[],emulator:[]};for(const t of Object.keys(oo))oo[t]?e.emulator.push(t):e.prod.push(t);return e}function c2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Qy=!1;function h2(e,t){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||oo[e]===t||oo[e]||Qy)return;oo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=u2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Qy=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=c2(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(V,O);const D=h();u(T,S),R.append(T,x,V,D),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function d2(){var t;const e=(t=Dc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function p2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y2(){const e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _2(){return!d2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v2(){try{return typeof indexedDB=="object"}catch{return!1}}function T2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="FirebaseError";class hi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=E2,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?A2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new hi(r,l,i)}}function A2(e,t){return e.replace(b2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const b2=/\{\$([^}]+)}/g;function No(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Yy(s)&&Yy(a)){if(!No(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Yy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function S2(e,t){const n=new w2(e,t);return n.subscribe.bind(n)}class w2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");R2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Zh),r.error===void 0&&(r.error=Zh),r.complete===void 0&&(r.complete=Zh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Zh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){return e&&e._delegate?e._delegate:e}class Pr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new a2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(N2(t))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Ar){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ar){return this.instances.has(t)}getOptions(t=Ar){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ar){return this.component?this.component.multipleInstances?t:Ar:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C2(e){return e===Ar?void 0:e}function N2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new I2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const D2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},V2=ot.INFO,O2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},M2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=O2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dm{constructor(t){this.name=t,this._logLevel=V2,this._logHandler=M2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?D2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const k2=(e,t)=>t.some(n=>e instanceof n);let Ky,Xy;function U2(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P2(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,ad=new WeakMap,gE=new WeakMap,Jh=new WeakMap,Vm=new WeakMap;function L2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Hi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&mE.set(n,e)}).catch(()=>{}),Vm.set(t,e),t}function j2(e){if(ad.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});ad.set(e,t)}let od={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ad.get(e);if(t==="objectStoreNames")return e.objectStoreNames||gE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function z2(e){od=e(od)}function B2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Wh(this),t,...n);return gE.set(i,t.sort?t.sort():[t]),Hi(i)}:P2().includes(e)?function(...t){return e.apply(Wh(this),t),Hi(mE.get(this))}:function(...t){return Hi(e.apply(Wh(this),t))}}function q2(e){return typeof e=="function"?B2(e):(e instanceof IDBTransaction&&j2(e),k2(e,U2())?new Proxy(e,od):e)}function Hi(e){if(e instanceof IDBRequest)return L2(e);if(Jh.has(e))return Jh.get(e);const t=q2(e);return t!==e&&(Jh.set(e,t),Vm.set(t,e)),t}const Wh=e=>Vm.get(e);function H2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Hi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Hi(a.result),u.oldVersion,u.newVersion,Hi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const F2=["get","getKey","getAll","getAllKeys","count"],G2=["put","add","delete","clear"],tf=new Map;function $y(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(tf.get(t))return tf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=G2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||F2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return tf.set(t,s),s}z2(e=>({...e,get:(t,n,i)=>$y(t,n)||e.get(t,n,i),has:(t,n)=>!!$y(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Y2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ld="@firebase/app",Zy="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Dm("@firebase/app"),K2="@firebase/app-compat",X2="@firebase/analytics-compat",$2="@firebase/analytics",Z2="@firebase/app-check-compat",J2="@firebase/app-check",W2="@firebase/auth",tR="@firebase/auth-compat",eR="@firebase/database",nR="@firebase/data-connect",iR="@firebase/database-compat",rR="@firebase/functions",sR="@firebase/functions-compat",aR="@firebase/installations",oR="@firebase/installations-compat",lR="@firebase/messaging",uR="@firebase/messaging-compat",cR="@firebase/performance",hR="@firebase/performance-compat",fR="@firebase/remote-config",dR="@firebase/remote-config-compat",mR="@firebase/storage",gR="@firebase/storage-compat",pR="@firebase/firestore",yR="@firebase/ai",_R="@firebase/firestore-compat",vR="firebase",TR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",ER={[ld]:"fire-core",[K2]:"fire-core-compat",[$2]:"fire-analytics",[X2]:"fire-analytics-compat",[J2]:"fire-app-check",[Z2]:"fire-app-check-compat",[W2]:"fire-auth",[tR]:"fire-auth-compat",[eR]:"fire-rtdb",[nR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[rR]:"fire-fn",[sR]:"fire-fn-compat",[aR]:"fire-iid",[oR]:"fire-iid-compat",[lR]:"fire-fcm",[uR]:"fire-fcm-compat",[cR]:"fire-perf",[hR]:"fire-perf-compat",[fR]:"fire-rc",[dR]:"fire-rc-compat",[mR]:"fire-gcs",[gR]:"fire-gcs-compat",[pR]:"fire-fst",[_R]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[vR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=new Map,AR=new Map,cd=new Map;function Jy(e,t){try{e.container.addComponent(t)}catch(n){ai.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $s(e){const t=e.name;if(cd.has(t))return ai.debug(`There were multiple attempts to register component ${t}.`),!1;cd.set(t,e);for(const n of $u.values())Jy(n,e);for(const n of AR.values())Jy(n,e);return!0}function pE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new il("app","Firebase",bR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=TR;function yE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:ud,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Fi.create("bad-app-name",{appName:String(r)});if(n||(n=dE()),!n)throw Fi.create("no-options");const s=$u.get(r);if(s){if(No(n,s.options)&&No(i,s.config))return s;throw Fi.create("duplicate-app",{appName:r})}const a=new x2(r);for(const u of cd.values())a.addComponent(u);const l=new SR(n,i,a);return $u.set(r,l),l}function wR(e=ud){const t=$u.get(e);if(!t&&e===ud&&dE())return yE();if(!t)throw Fi.create("no-app",{appName:e});return t}function Gi(e,t,n){let i=ER[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ai.warn(a.join(" "));return}$s(new Pr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",IR=1,xo="firebase-heartbeat-store";let ef=null;function _E(){return ef||(ef=H2(RR,IR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Fi.create("idb-open",{originalErrorMessage:e.message})})),ef}async function CR(e){try{const n=(await _E()).transaction(xo),i=await n.objectStore(xo).get(vE(e));return await n.done,i}catch(t){if(t instanceof hi)ai.warn(t.message);else{const n=Fi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ai.warn(n.message)}}}async function Wy(e,t){try{const i=(await _E()).transaction(xo,"readwrite");await i.objectStore(xo).put(t,vE(e)),await i.done}catch(n){if(n instanceof hi)ai.warn(n.message);else{const i=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ai.warn(i.message)}}}function vE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=1024,xR=30;class DR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>xR){const a=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ai.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t_(),{heartbeatsToSend:i,unsentEntries:r}=VR(this._heartbeatsCache.heartbeats),s=Xu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ai.warn(n),""}}}function t_(){return new Date().toISOString().substring(0,10)}function VR(e,t=NR){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),e_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),e_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class OR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v2()?T2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Wy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Wy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function e_(e){return Xu(JSON.stringify({version:2,heartbeats:e})).length}function MR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(e){$s(new Pr("platform-logger",t=>new Q2(t),"PRIVATE")),$s(new Pr("heartbeat",t=>new DR(t),"PRIVATE")),Gi(ld,Zy,e),Gi(ld,Zy,"esm2020"),Gi("fire-js","")}kR("");var UR="firebase",PR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gi(UR,PR,"app");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,TE;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function A(){}A.prototype=y.prototype,E.D=y.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(w,C,I){for(var b=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)b[yt-2]=arguments[yt];return y.prototype[C].apply(w,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,A){A||(A=0);var w=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)w[C]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(C=0;16>C;++C)w[C]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=E.g[0],A=E.g[1],C=E.g[2];var I=E.g[3],b=y+(I^A&(C^I))+w[0]+3614090360&4294967295;y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[1]+3905402710&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[2]+606105819&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[3]+3250441966&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[4]+4118548399&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[5]+1200080426&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[6]+2821735955&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[7]+4249261313&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[8]+1770035416&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[9]+2336552879&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[10]+4294925233&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[11]+2304563134&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[12]+1804603682&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[13]+4254626195&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[14]+2792965006&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[15]+1236535329&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(C^I&(A^C))+w[1]+4129170786&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[6]+3225465664&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[11]+643717713&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[0]+3921069994&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[5]+3593408605&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[10]+38016083&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[15]+3634488961&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[4]+3889429448&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[9]+568446438&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[14]+3275163606&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[3]+4107603335&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[8]+1163531501&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[13]+2850285829&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[2]+4243563512&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[7]+1735328473&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[12]+2368359562&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(A^C^I)+w[5]+4294588738&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[8]+2272392833&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[11]+1839030562&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[14]+4259657740&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[1]+2763975236&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[4]+1272893353&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[7]+4139469664&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[10]+3200236656&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[13]+681279174&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[0]+3936430074&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[3]+3572445317&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[6]+76029189&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[9]+3654602809&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[12]+3873151461&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[15]+530742520&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[2]+3299628645&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(C^(A|~I))+w[0]+4096336452&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[7]+1126891415&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[14]+2878612391&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[5]+4237533241&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[12]+1700485571&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[3]+2399980690&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[10]+4293915773&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[1]+2240044497&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[8]+1873313359&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[15]+4264355552&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[6]+2734768916&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[13]+1309151649&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[4]+4149444226&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[11]+3174756917&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[2]+718787259&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+I&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var A=y-this.blockSize,w=this.B,C=this.h,I=0;I<y;){if(C==0)for(;I<=A;)r(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<y;)if(w[C++]=E.charCodeAt(I++),C==this.blockSize){r(this,w),C=0;break}}else for(;I<y;)if(w[C++]=E[I++],C==this.blockSize){r(this,w),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var A=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=A&255,A/=256;for(this.u(E),E=Array(16),y=A=0;4>y;++y)for(var w=0;32>w;w+=8)E[A++]=this.g[y]>>>w&255;return E};function s(E,y){var A=l;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=y(E)}function a(E,y){this.h=y;for(var A=[],w=!0,C=E.length-1;0<=C;C--){var I=E[C]|0;w&&I==y||(A[C]=I,w=!1)}this.g=A}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return V(h(-E));for(var y=[],A=1,w=0;E>=A;w++)y[w]=E/A|0,A*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return V(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(y,8)),w=g,C=0;C<E.length;C+=8){var I=Math.min(8,E.length-C),b=parseInt(E.substring(C,C+I),y);8>I?(I=h(Math.pow(y,I)),w=w.j(I).add(h(b))):(w=w.j(A),w=w.add(h(b)))}return w}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-V(this).m();for(var E=0,y=1,A=0;A<this.g.length;A++){var w=this.i(A);E+=(0<=w?w:4294967296+w)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x(this))return"0";if(O(this))return"-"+V(this).toString(E);for(var y=h(Math.pow(E,6)),A=this,w="";;){var C=D(A,y).g;A=S(A,C.j(y));var I=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=C,x(A))return I+w;for(;6>I.length;)I="0"+I;w=I+w}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function x(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function O(E){return E.h==-1}e.l=function(E){return E=S(this,E),O(E)?-1:x(E)?0:1};function V(E){for(var y=E.g.length,A=[],w=0;w<y;w++)A[w]=~E.g[w];return new a(A,~E.h).add(m)}e.abs=function(){return O(this)?V(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0,C=0;C<=y;C++){var I=w+(this.i(C)&65535)+(E.i(C)&65535),b=(I>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);w=b>>>16,I&=65535,b&=65535,A[C]=b<<16|I}return new a(A,A[A.length-1]&-2147483648?-1:0)};function S(E,y){return E.add(V(y))}e.j=function(E){if(x(this)||x(E))return g;if(O(this))return O(E)?V(this).j(V(E)):V(V(this).j(E));if(O(E))return V(this.j(V(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,A=[],w=0;w<2*y;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<E.g.length;C++){var I=this.i(w)>>>16,b=this.i(w)&65535,yt=E.i(C)>>>16,me=E.i(C)&65535;A[2*w+2*C]+=b*me,T(A,2*w+2*C),A[2*w+2*C+1]+=I*me,T(A,2*w+2*C+1),A[2*w+2*C+1]+=b*yt,T(A,2*w+2*C+1),A[2*w+2*C+2]+=I*yt,T(A,2*w+2*C+2)}for(w=0;w<y;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=y;w<2*y;w++)A[w]=0;return new a(A,0)};function T(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function R(E,y){this.g=E,this.h=y}function D(E,y){if(x(y))throw Error("division by zero");if(x(E))return new R(g,g);if(O(E))return y=D(V(E),y),new R(V(y.g),V(y.h));if(O(y))return y=D(E,V(y)),new R(V(y.g),y.h);if(30<E.g.length){if(O(E)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,w=y;0>=w.l(E);)A=L(A),w=L(w);var C=B(A,1),I=B(w,1);for(w=B(w,2),A=B(A,2);!x(w);){var b=I.add(w);0>=b.l(E)&&(C=C.add(A),I=b),w=B(w,1),A=B(A,1)}return y=S(E,C.j(y)),new R(C,y)}for(C=g;0<=E.l(y);){for(A=Math.max(1,Math.floor(E.m()/y.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),I=h(A),b=I.j(y);O(b)||0<b.l(E);)A-=w,I=h(A),b=I.j(y);x(I)&&(I=m),C=C.add(I),E=S(E,b)}return new R(C,E)}e.A=function(E){return D(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)&E.i(w);return new a(A,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)|E.i(w);return new a(A,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)^E.i(w);return new a(A,this.h^E.h)};function L(E){for(var y=E.g.length+1,A=[],w=0;w<y;w++)A[w]=E.i(w)<<1|E.i(w-1)>>>31;return new a(A,E.h)}function B(E,y){var A=y>>5;y%=32;for(var w=E.g.length-A,C=[],I=0;I<w;I++)C[I]=0<y?E.i(I+A)>>>y|E.i(I+A+1)<<32-y:E.i(I+A);return new a(C,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,TE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Qi=a}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,qa,AE,hu,hd,bE,SE,wE;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,M){for(var j=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)j[Dt-2]=arguments[Dt];return c.prototype[N].apply(p,j)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function V(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,M=p.length||0;o.length=N+M;for(let j=0;j<M;j++)o[N+j]=p[j]}else o.push(p)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function T(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let M=0;M<A.length;M++)f=A[M],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function C(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function b(){var o=gt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class yt{constructor(){this.h=this.g=null}add(c,f){const p=me.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var me=new S(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,Y=!1,gt=new yt,xt=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(gn)}};var gn=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){I(f)}var c=me;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function be(o,c){if(ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:De[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&be.aa.h.call(this)}}x(be,ct);var De={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Sn="closure_listenable_"+(1e6*Math.random()|0),cr=0;function ga(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++cr,this.da=this.fa=!1}function fi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function wn(o){this.src=o,this.g={},this.h=0}wn.prototype.add=function(o,c,f,p,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var j=fr(o,c,p,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new ga(c,this.src,M,!!p,N),c.fa=f,o.push(c)),c};function hr(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(p,N,1),M&&(fi(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function fr(o,c,f,p){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==p)return N}return-1}var jn="closure_lm_"+(1e6*Math.random()|0),dr={};function $r(o,c,f,p,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)$r(o,c[M],f,p,N);return null}return f=At(f),o&&o[Sn]?o.K(c,f,h(p)?!!p.capture:!1,N):tt(o,c,f,!1,p,N)}function tt(o,c,f,p,N,M){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,Dt=Et(o);if(Dt||(o[jn]=Dt=new wn(o)),f=Dt.add(c,f,p,j,M),f.proxy)return f;if(p=ht(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)$t||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ht(){function o(f){return c.call(o.src,o.listener,f)}const c=W;return o}function Tt(o,c,f,p,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)Tt(o,c[M],f,p,N);else p=h(p)?!!p.capture:!!p,f=At(f),o&&o[Sn]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=fr(M,f,p,N),-1<f&&(fi(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Et(o))&&(c=o.g[c.toString()],o=-1,c&&(o=fr(c,f,p,N)),(f=-1<o?c[o]:null)&&pn(f))}function pn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Sn])hr(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(G(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=Et(c))?(hr(f,o),f.h==0&&(f.src=null,c[jn]=null)):fi(o)}}}function G(o){return o in dr?dr[o]:dr[o]="on"+o}function W(o,c){if(o.da)o=!0;else{c=new be(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&pn(o),o=f.call(p,c)}return o}function Et(o){return o=o[jn],o instanceof wn?o:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(o){return typeof o=="function"?o:(o[Rt]||(o[Rt]=function(c){return o.handleEvent(c)}),o[Rt])}function rt(){zt.call(this),this.i=new wn(this),this.M=this,this.F=null}x(rt,zt),rt.prototype[Sn]=!0,rt.prototype.removeEventListener=function(o,c,f,p){Tt(this,o,c,f,p)};function bt(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new ct(c,o);else if(c instanceof ct)c.target=c.target||o;else{var N=c;c=new ct(p,o),w(c,N)}if(N=!0,f)for(var M=f.length-1;0<=M;M--){var j=c.g=f[M];N=Fe(j,p,!0,c)&&N}if(j=c.g=o,N=Fe(j,p,!0,c)&&N,N=Fe(j,p,!1,c)&&N,f)for(M=0;M<f.length;M++)j=c.g=f[M],N=Fe(j,p,!1,c)&&N}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)fi(f[p]);delete o.g[c],o.h--}}this.F=null},rt.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},rt.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Fe(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var j=c[M];if(j&&!j.da&&j.capture==f){var Dt=j.listener,ge=j.ha||j.src;j.fa&&hr(o.i,j),N=Dt.call(ge,p)!==!1&&N}}return N&&!p.defaultPrevented}function pa(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function gl(o){o.g=pa(()=>{o.g=null,o.i&&(o.i=!1,gl(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Wc extends zt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:gl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ya(o){zt.call(this),this.h=o,this.g={}}x(ya,zt);var Ig=[];function Cg(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&pn(c)},o),o.g={}}ya.prototype.N=function(){ya.aa.N.call(this),Cg(this)},ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var th=l.JSON.stringify,RA=l.JSON.parse,IA=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function eh(){}eh.prototype.h=null;function Ng(o){return o.h||(o.h=o.i())}function xg(){}var _a={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nh(){ct.call(this,"d")}x(nh,ct);function ih(){ct.call(this,"c")}x(ih,ct);var mr={},Dg=null;function pl(){return Dg=Dg||new rt}mr.La="serverreachability";function Vg(o){ct.call(this,mr.La,o)}x(Vg,ct);function va(o){const c=pl();bt(c,new Vg(c))}mr.STAT_EVENT="statevent";function Og(o,c){ct.call(this,mr.STAT_EVENT,o),this.stat=c}x(Og,ct);function Ve(o){const c=pl();bt(c,new Og(c,o))}mr.Ma="timingevent";function Mg(o,c){ct.call(this,mr.Ma,o),this.size=c}x(Mg,ct);function Ta(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ea(){this.g=!0}Ea.prototype.xa=function(){this.g=!1};function CA(o,c,f,p,N,M){o.info(function(){if(o.g)if(M)for(var j="",Dt=M.split("&"),ge=0;ge<Dt.length;ge++){var pt=Dt[ge].split("=");if(1<pt.length){var Se=pt[0];pt=pt[1];var we=Se.split("_");j=2<=we.length&&we[1]=="type"?j+(Se+"="+pt+"&"):j+(Se+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function NA(o,c,f,p,N,M,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+M+" "+j})}function Zr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+DA(o,f)+(p?" "+p:"")})}function xA(o,c){o.info(function(){return"TIMEOUT: "+c})}Ea.prototype.info=function(){};function DA(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return th(f)}catch{return c}}var yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rh;function _l(){}x(_l,eh),_l.prototype.g=function(){return new XMLHttpRequest},_l.prototype.i=function(){return{}},rh=new _l;function di(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new ya(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ug}function Ug(){this.i=null,this.g="",this.h=!1}var Pg={},sh={};function ah(o,c,f){o.L=1,o.v=Al(zn(c)),o.m=f,o.P=!0,Lg(o,null)}function Lg(o,c){o.F=Date.now(),vl(o),o.A=zn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Jg(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Ug,o.g=pp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new Wc(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ig[0]=N.toString()),N=Ig);for(var M=0;M<N.length;M++){var j=$r(f,N[M],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),va(),CA(o.i,o.u,o.A,o.l,o.R,o.m)}di.prototype.ca=function(o){o=o.target;const c=this.M;c&&Bn(o)==3?c.j():this.Y(o)},di.prototype.Y=function(o){try{if(o==this.g)t:{const we=Bn(this.g);var c=this.g.Ba();const ts=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||sp(this.g)))){this.J||we!=4||c==7||(c==8||0>=ts?va(3):va(2)),oh(this);var f=this.g.Z();this.X=f;e:if(jg(this)){var p=sp(this.g);o="";var N=p.length,M=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),Aa(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(M&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,NA(this.i,this.u,this.A,this.l,this.R,we,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,ge=this.g;if((Dt=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Dt)){var pt=Dt;break e}}pt=null}if(f=pt)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lh(this,f);else{this.o=!1,this.s=3,Ve(12),gr(this),Aa(this);break t}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<j.length;)if(yn=VA(this,j),yn==sh){we==4&&(this.s=4,Ve(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Pg){this.s=4,Ve(15),Zr(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,yn,null),lh(this,yn);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||j.length!=0||this.h.h||(this.s=1,Ve(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,j,"[Invalid Chunked Response]"),gr(this),Aa(this);else if(0<j.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),mh(Se),Se.M=!0,Ve(11))}}else Zr(this.i,this.l,j,null),lh(this,j);we==4&&gr(this),this.o&&!this.J&&(we==4?fp(this.j,this):(this.o=!1,vl(this)))}else XA(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),gr(this),Aa(this)}}}catch{}finally{}};function jg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function VA(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?sh:(f=Number(c.substring(f,p)),isNaN(f)?Pg:(p+=1,p+f>c.length?sh:(c=c.slice(p,p+f),o.C=p+f,c)))}di.prototype.cancel=function(){this.J=!0,gr(this)};function vl(o){o.S=Date.now()+o.I,zg(o,o.I)}function zg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ta(m(o.ba,o),c)}function oh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}di.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(xA(this.i,this.A),this.L!=2&&(va(),Ve(17)),gr(this),this.s=2,Aa(this)):zg(this,this.S-o)};function Aa(o){o.j.G==0||o.J||fp(o.j,o)}function gr(o){oh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Cg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function lh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||uh(f.h,o))){if(!o.K&&uh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Cl(f),Rl(f);else break t;dh(f),Ve(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ta(m(f.Za,f),6e3));if(1>=Hg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else yr(f,11)}else if((o.K||f.g==o)&&Cl(f),!T(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let pt=N[c];if(f.T=pt[0],pt=pt[1],f.G==2)if(pt[0]=="c"){f.K=pt[1],f.ia=pt[2];const Se=pt[3];Se!=null&&(f.la=Se,f.j.info("VER="+f.la));const we=pt[4];we!=null&&(f.Aa=we,f.j.info("SVER="+f.Aa));const ts=pt[5];ts!=null&&typeof ts=="number"&&0<ts&&(p=1.5*ts,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const yn=o.g;if(yn){const xl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var M=p.h;M.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(ch(M,M.h),M.h=null))}if(p.D){const gh=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;gh&&(p.ya=gh,Mt(p.I,p.D,gh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=gp(p,p.J?p.ia:null,p.W),j.K){Fg(p.h,j);var Dt=j,ge=p.L;ge&&(Dt.I=ge),Dt.B&&(oh(Dt),vl(Dt)),p.g=j}else cp(p);0<f.i.length&&Il(f)}else pt[0]!="stop"&&pt[0]!="close"||yr(f,7);else f.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?yr(f,7):fh(f):pt[0]!="noop"&&f.l&&f.l.ta(pt),f.v=0)}}va(4)}catch{}}var OA=class{constructor(o,c){this.g=o,this.map=c}};function Bg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Hg(o){return o.h?1:o.g?o.g.size:0}function uh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ch(o,c){o.g?o.g.add(c):o.h=c}function Fg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Bg.prototype.cancel=function(){if(this.i=Gg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Gg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function MA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function kA(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Qg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=kA(o),p=MA(o),N=p.length,M=0;M<N;M++)c.call(void 0,p[M],f&&f[M],o)}var Yg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UA(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var M=o[f].substring(0,p);N=o[f].substring(p+1)}else M=o[f];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function pr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof pr){this.h=o.h,Tl(this,o.j),this.o=o.o,this.g=o.g,El(this,o.s),this.l=o.l;var c=o.i,f=new wa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Kg(this,f),this.m=o.m}else o&&(c=String(o).match(Yg))?(this.h=!1,Tl(this,c[1]||"",!0),this.o=ba(c[2]||""),this.g=ba(c[3]||"",!0),El(this,c[4]),this.l=ba(c[5]||"",!0),Kg(this,c[6]||"",!0),this.m=ba(c[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}pr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Sa(c,Xg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Sa(c,Xg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Sa(f,f.charAt(0)=="/"?jA:LA,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Sa(f,BA)),o.join("")};function zn(o){return new pr(o)}function Tl(o,c,f){o.j=f?ba(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function El(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Kg(o,c,f){c instanceof wa?(o.i=c,qA(o.i,o.h)):(f||(c=Sa(c,zA)),o.i=new wa(c,o.h))}function Mt(o,c,f){o.i.set(c,f)}function Al(o){return Mt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ba(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Sa(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,PA),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function PA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Xg=/[#\/\?@]/g,LA=/[#\?:]/g,jA=/[#\?]/g,zA=/[#\?@]/g,BA=/#/g;function wa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function mi(o){o.g||(o.g=new Map,o.h=0,o.i&&UA(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=wa.prototype,e.add=function(o,c){mi(this),this.i=null,o=Jr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function $g(o,c){mi(o),c=Jr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Zg(o,c){return mi(o),c=Jr(o,c),o.g.has(c)}e.forEach=function(o,c){mi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){mi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let M=0;M<N.length;M++)f.push(c[p])}return f},e.V=function(o){mi(this);let c=[];if(typeof o=="string")Zg(this,o)&&(c=c.concat(this.g.get(Jr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return mi(this),this.i=null,o=Jr(this,o),Zg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Jg(o,c,f){$g(o,c),0<f.length&&(o.i=null,o.g.set(Jr(o,c),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const M=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var N=M;j[p]!==""&&(N+="="+encodeURIComponent(String(j[p]))),o.push(N)}}return this.i=o.join("&")};function Jr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function qA(o,c){c&&!o.j&&(mi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&($g(this,p),Jg(this,N,f))},o)),o.j=c}function HA(o,c){const f=new Ea;if(l.Image){const p=new Image;p.onload=_(gi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(gi,f,"TestLoadImage: error",!1,c,p),p.onabort=_(gi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(gi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function FA(o,c){const f=new Ea,p=new AbortController,N=setTimeout(()=>{p.abort(),gi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(M=>{clearTimeout(N),M.ok?gi(f,"TestPingServer: ok",!0,c):gi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),gi(f,"TestPingServer: error",!1,c)})}function gi(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function GA(){this.g=new IA}function QA(o,c,f){const p=f||"";try{Qg(o,function(N,M){let j=N;h(N)&&(j=th(N)),c.push(p+M+"="+encodeURIComponent(j))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function bl(o){this.l=o.Ub||null,this.j=o.eb||!1}x(bl,eh),bl.prototype.g=function(){return new Sl(this.l,this.j)},bl.prototype.i=function(o){return function(){return o}}({});function Sl(o,c){rt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Sl,rt),e=Sl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ia(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ra(this):Ia(this),this.readyState==3&&Wg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Ra(this))},e.Qa=function(o){this.g&&(this.response=o,Ra(this))},e.ga=function(){this.g&&Ra(this)};function Ra(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ia(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ia(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function tp(o){let c="";return B(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function hh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=tp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Mt(o,c,f))}function Ft(o){rt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ft,rt);var YA=/^https?$/i,KA=["POST","PUT"];e=Ft.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rh.g(),this.v=this.o?Ng(this.o):Ng(rh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){ep(this,M);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const M of p.keys())f.set(M,p.get(M));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(KA,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,j]of f)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rp(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){ep(this,M)}};function ep(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,np(o),wl(o)}function np(o){o.A||(o.A=!0,bt(o,"complete"),bt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,bt(this,"complete"),bt(this,"abort"),wl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ip(this):this.bb())},e.bb=function(){ip(this)};function ip(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Bn(o)!=4||o.Z()!=2)){if(o.u&&Bn(o)==4)pa(o.Ea,0,o);else if(bt(o,"readystatechange"),Bn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var N=String(o.D).match(Yg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!YA.test(N?N.toLowerCase():"")}f=p}if(f)bt(o,"complete"),bt(o,"success");else{o.m=6;try{var M=2<Bn(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",np(o)}}finally{wl(o)}}}}function wl(o,c){if(o.g){rp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||bt(o,"ready");try{f.onreadystatechange=p}catch{}}}function rp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Bn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),RA(c)}};function sp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function XA(o){const c={};o=(o.g&&2<=Bn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var f=C(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[N]||[];c[N]=M,M.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function ap(o){this.Aa=0,this.i=[],this.j=new Ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,o),this.cb=Ca("retryDelaySeedMs",1e4,o),this.Wa=Ca("forwardChannelMaxRetries",2,o),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Bg(o&&o.concurrentRequestLimit),this.Da=new GA,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ap.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ve(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=gp(this,null,this.W),Il(this)};function fh(o){if(op(o),o.G==3){var c=o.U++,f=zn(o.I);if(Mt(f,"SID",o.K),Mt(f,"RID",c),Mt(f,"TYPE","terminate"),Na(o,f),c=new di(o,o.j,c),c.L=2,c.v=Al(zn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=pp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),vl(c)}mp(o)}function Rl(o){o.g&&(mh(o),o.g.cancel(),o.g=null)}function op(o){Rl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Cl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Il(o){if(!qg(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||xt(),Y||(X(),Y=!0),gt.add(c,o),o.B=0}}function $A(o,c){return Hg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ta(m(o.Ga,o,c),dp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new di(this,this.j,o);let M=this.o;if(this.S&&(M?(M=y(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=up(this,N,c),f=zn(this.I),Mt(f,"RID",o),Mt(f,"CVER",22),this.D&&Mt(f,"X-HTTP-Session-Id",this.D),Na(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(tp(M)))+"&"+c:this.m&&hh(f,this.m,M)),ch(this.h,N),this.Ua&&Mt(f,"TYPE","init"),this.P?(Mt(f,"$req",c),Mt(f,"SID","null"),N.T=!0,ah(N,f,null)):ah(N,f,c),this.G=2}}else this.G==3&&(o?lp(this,o):this.i.length==0||qg(this.h)||lp(this))};function lp(o,c){var f;c?f=c.l:f=o.U++;const p=zn(o.I);Mt(p,"SID",o.K),Mt(p,"RID",f),Mt(p,"AID",o.T),Na(o,p),o.m&&o.o&&hh(p,o.m,o.o),f=new di(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=up(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ch(o.h,f),ah(f,p,c)}function Na(o,c){o.H&&B(o.H,function(f,p){Mt(c,p,f)}),o.l&&Qg({},function(f,p){Mt(c,p,f)})}function up(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const j=["count="+f];M==-1?0<f?(M=N[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Dt=!0;for(let ge=0;ge<f;ge++){let pt=N[ge].g;const Se=N[ge].map;if(pt-=M,0>pt)M=Math.max(0,N[ge].g-100),Dt=!1;else try{QA(Se,j,"req"+pt+"_")}catch{p&&p(Se)}}if(Dt){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function cp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||xt(),Y||(X(),Y=!0),gt.add(c,o),o.v=0}}function dh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ta(m(o.Fa,o),dp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,hp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ta(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),Rl(this),hp(this))};function mh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function hp(o){o.g=new di(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=zn(o.qa);Mt(c,"RID","rpc"),Mt(c,"SID",o.K),Mt(c,"AID",o.T),Mt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Mt(c,"TO",o.ja),Mt(c,"TYPE","xmlhttp"),Na(o,c),o.m&&o.o&&hh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Al(zn(c)),f.m=null,f.P=!0,Lg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Rl(this),dh(this),Ve(19))};function Cl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function fp(o,c){var f=null;if(o.g==c){Cl(o),mh(o),o.g=null;var p=2}else if(uh(o.h,c))f=c.D,Fg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=pl(),bt(p,new Mg(p,f)),Il(o)}else cp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&$A(o,c)||p==2&&dh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:yr(o,5);break;case 4:yr(o,10);break;case 3:yr(o,6);break;default:yr(o,2)}}}function dp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function yr(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new pr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tl(p,"https"),Al(p),N?HA(p.toString(),f):FA(p.toString(),f)}else Ve(2);o.G=0,o.l&&o.l.sa(c),mp(o),op(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function mp(o){if(o.G=0,o.ka=[],o.l){const c=Gg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function gp(o,c,f){var p=f instanceof pr?zn(f):new pr(f);if(p.g!="")c&&(p.g=c+"."+p.g),El(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new pr(null);p&&Tl(M,p),c&&(M.g=c),N&&El(M,N),f&&(M.l=f),p=M}return f=o.D,c=o.ya,f&&c&&Mt(p,f,c),Mt(p,"VER",o.la),Na(o,p),p}function pp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ft(new bl({eb:f})):new Ft(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function yp(){}e=yp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Nl(){}Nl.prototype.g=function(o,c){return new Ge(o,c)};function Ge(o,c){rt.call(this),this.g=new ap(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!T(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Wr(this)}x(Ge,rt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){fh(this.g)},Ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=th(o),o=f);c.i.push(new OA(c.Ya++,o)),c.G==3&&Il(c)},Ge.prototype.N=function(){this.g.l=null,delete this.j,fh(this.g),delete this.g,Ge.aa.N.call(this)};function _p(o){nh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(_p,nh);function vp(){ih.call(this),this.status=1}x(vp,ih);function Wr(o){this.g=o}x(Wr,yp),Wr.prototype.ua=function(){bt(this.g,"a")},Wr.prototype.ta=function(o){bt(this.g,new _p(o))},Wr.prototype.sa=function(o){bt(this.g,new vp)},Wr.prototype.ra=function(){bt(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,wE=function(){return new Nl},SE=function(){return pl()},bE=mr,hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yl.NO_ERROR=0,yl.TIMEOUT=8,yl.HTTP_ERROR=6,hu=yl,kg.COMPLETE="complete",AE=kg,xg.EventType=_a,_a.OPEN="a",_a.CLOSE="b",_a.ERROR="c",_a.MESSAGE="d",rt.prototype.listen=rt.prototype.K,qa=xg,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,EE=Ft}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});const i_="@firebase/firestore",r_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Dm("@firebase/firestore");function os(){return Lr.logLevel}function F(e,...t){if(Lr.logLevel<=ot.DEBUG){const n=t.map(Om);Lr.debug(`Firestore (${ca}): ${e}`,...n)}}function oi(e,...t){if(Lr.logLevel<=ot.ERROR){const n=t.map(Om);Lr.error(`Firestore (${ca}): ${e}`,...n)}}function Zs(e,...t){if(Lr.logLevel<=ot.WARN){const n=t.map(Om);Lr.warn(`Firestore (${ca}): ${e}`,...n)}}function Om(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,RE(e,i,n)}function RE(e,t,n){let i=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw oi(i),new Error(i)}function mt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||RE(t,r,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends hi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class LR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ce.UNAUTHENTICATED))}shutdown(){}}class jR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zR{constructor(t){this.t=t,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ei,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ei)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new IE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Ce(t)}}class BR{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qR{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new BR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=FR(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function fd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return nf(r)===nf(s)?lt(r,s):nf(r)?1:-1}return lt(e.length,t.length)}const GR=55296,QR=57343;function nf(e){const t=e.charCodeAt(0);return t>=GR&&t<=QR}function Js(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="__name__";class In{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return In.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof In?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=In.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return lt(t.length,n.length)}static compareSegments(t,n){const i=In.isNumericId(t),r=In.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?In.extractNumericId(t).compare(In.extractNumericId(n)):fd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qi.fromString(t.substring(4,t.length-2))}}class Nt extends In{construct(t,n,i){return new Nt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const YR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends In{construct(t,n,i){return new ve(t,n,i)}static isValidIdentifier(t){return YR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a_}static keyField(){return new ve([a_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ve(n)}static emptyPath(){return new ve([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(Nt.fromString(t))}static fromName(t){return new Q(Nt.fromString(t).popFirst(5))}static empty(){return new Q(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Nt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KR(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function o_(e){if(!Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function l_(e){if(Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function NE(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Oc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function nn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t){const n={typeString:e};return t&&(n.value=t),n}function rl(e,t){if(!NE(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=-62135596800,c_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*c_);return new kt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<u_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(rl(t,kt._jsonSchema))return new kt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-u_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:te("string",kt._jsonSchemaVersion),seconds:te("number"),nanoseconds:te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new kt(0,0))}static max(){return new $(new kt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=-1;function XR(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=$.fromTimestamp(i===1e9?new kt(n+1,0):new kt(n,i));return new Ji(r,Q.empty(),t)}function $R(e){return new Ji(e.readTime,e.key,Do)}class Ji{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ji($.min(),Q.empty(),Do)}static max(){return new Ji($.max(),Q.empty(),Do)}}function ZR(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==JR)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,i)=>{n(t)})}static reject(t){return new U((n,i)=>{i(t)})}static waitFor(t){return new U((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=U.resolve(!1);for(const i of t)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new U((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new U((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function tI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Mc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=-1;function sl(e){return e==null}function Zu(e){return e===0&&1/e==-1/0}function eI(e){return typeof e=="number"&&Number.isInteger(e)&&!Zu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="";function nI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=h_(t)),t=iI(e.get(n),t);return h_(t)}function iI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case xE:n+="";break;default:n+=s}}return n}function h_(e){return e+xE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function DE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t,n){this.comparator=t,this.root=n||ye.EMPTY}insert(t,n){return new Ht(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new Ht(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yl(this.root,t,this.comparator,!0)}}class Yl{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ye.RED,this.left=r??ye.EMPTY,this.right=s??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ye(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ye.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ye(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.comparator=t,this.data=new Ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(t){return new d_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof se)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new se(this.comparator);return n.data=t,n}}class d_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.fields=t,t.sort(ve.comparator)}static empty(){return new Ze([])}unionWith(t){let n=new se(ve.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ze(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Js(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VE("Invalid base64 string: "+s):s}}(t);return new Ae(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ae(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const rI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=rI.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xt(e.seconds),nanos:Xt(e.nanos)}}function Xt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function tr(e){return typeof e=="string"?Ae.fromBase64String(e):Ae.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="server_timestamp",ME="__type__",kE="__previous_value__",UE="__local_write_time__";function Um(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[ME])==null?void 0:i.stringValue)===OE}function kc(e){const t=e.mapValue.fields[kE];return Um(t)?kc(t):t}function Vo(e){const t=Wi(e.mapValue.fields[UE].timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Ju="(default)";class Oo{constructor(t,n){this.projectId=t,this.database=n||Ju}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database===Ju}isEqual(t){return t instanceof Oo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__type__",aI="__max__",Kl={mapValue:{}},LE="__vector__",Wu="value";function er(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Um(e)?4:lI(e)?9007199254740991:oI(e)?10:11:K(28295,{value:e})}function Un(e,t){if(e===t)return!0;const n=er(e);if(n!==er(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vo(e).isEqual(Vo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Wi(r.timestampValue),l=Wi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return tr(r.bytesValue).isEqual(tr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Xt(r.geoPointValue.latitude)===Xt(s.geoPointValue.latitude)&&Xt(r.geoPointValue.longitude)===Xt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xt(r.integerValue)===Xt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Xt(r.doubleValue),l=Xt(s.doubleValue);return a===l?Zu(a)===Zu(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Js(e.arrayValue.values||[],t.arrayValue.values||[],Un);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(f_(a)!==f_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function Mo(e,t){return(e.values||[]).find(n=>Un(n,t))!==void 0}function Ws(e,t){if(e===t)return 0;const n=er(e),i=er(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Xt(s.integerValue||s.doubleValue),u=Xt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return m_(e.timestampValue,t.timestampValue);case 4:return m_(Vo(e),Vo(t));case 5:return fd(e.stringValue,t.stringValue);case 6:return function(s,a){const l=tr(s),u=tr(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=lt(Xt(s.latitude),Xt(a.latitude));return l!==0?l:lt(Xt(s.longitude),Xt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return g_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,x,O;const l=s.fields||{},u=a.fields||{},h=(m=l[Wu])==null?void 0:m.arrayValue,d=(_=u[Wu])==null?void 0:_.arrayValue,g=lt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return g!==0?g:g_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Kl.mapValue&&a===Kl.mapValue)return 0;if(s===Kl.mapValue)return 1;if(a===Kl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=fd(u[g],d[g]);if(m!==0)return m;const _=Ws(l[u[g]],h[d[g]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function m_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=Wi(e),i=Wi(t),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function g_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ws(n[r],i[r]);if(s)return s}return lt(n.length,i.length)}function ta(e){return dd(e)}function dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Wi(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return tr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=dd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${dd(n.fields[a])}`;return r+"}"}(e.mapValue):K(61005,{value:e})}function fu(e){switch(er(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=kc(e);return t?16+fu(t):16;case 5:return 2*e.stringValue.length;case 6:return tr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+fu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return lr(i.fields,(s,a)=>{r+=s.length+fu(a)}),r}(e.mapValue);default:throw K(13486,{value:e})}}function p_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function md(e){return!!e&&"integerValue"in e}function Pm(e){return!!e&&"arrayValue"in e}function y_(e){return!!e&&"nullValue"in e}function __(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function du(e){return!!e&&"mapValue"in e}function oI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[PE])==null?void 0:i.stringValue)===LE}function lo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return lr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=lo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=lo(e.arrayValue.values[n]);return t}return{...e}}function lI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===aI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!du(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=lo(n)}setAll(t){let n=ve.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=lo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());du(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Un(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];du(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){lr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Me(lo(this.value))}}function jE(e){const t=[];return lr(e.fields,(n,i)=>{const r=new ve([n]);if(du(i)){const s=jE(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Ze(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new he(t,0,$.min(),$.min(),$.min(),Me.empty(),0)}static newFoundDocument(t,n,i,r){return new he(t,1,n,$.min(),i,r,0)}static newNoDocument(t,n){return new he(t,2,n,$.min(),$.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new he(t,3,n,$.min(),$.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof he&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,n){this.position=t,this.inclusive=n}}function v_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=Ws(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function T_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Un(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,n="asc"){this.field=t,this.dir=n}}function uI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{}class Wt extends zE{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new hI(t,n,i):n==="array-contains"?new mI(t,i):n==="in"?new gI(t,i):n==="not-in"?new pI(t,i):n==="array-contains-any"?new yI(t,i):new Wt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new fI(t,i):new dI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ws(n,this.value)):n!==null&&er(this.value)===er(n)&&this.matchesComparison(Ws(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends zE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return BE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BE(e){return e.op==="and"}function qE(e){return cI(e)&&BE(e)}function cI(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function gd(e){if(e instanceof Wt)return e.field.canonicalString()+e.op.toString()+ta(e.value);if(qE(e))return e.filters.map(t=>gd(t)).join(",");{const t=e.filters.map(n=>gd(n)).join(",");return`${e.op}(${t})`}}function HE(e,t){return e instanceof Wt?function(i,r){return r instanceof Wt&&i.op===r.op&&i.field.isEqual(r.field)&&Un(i.value,r.value)}(e,t):e instanceof An?function(i,r){return r instanceof An&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&HE(a,r.filters[l]),!0):!1}(e,t):void K(19439)}function FE(e){return e instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(FE).join(" ,")+"}"}(e):"Filter"}class hI extends Wt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class fI extends Wt{constructor(t,n){super(t,"in",n),this.keys=GE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class dI extends Wt{constructor(t,n){super(t,"not-in",n),this.keys=GE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function GE(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class mI extends Wt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Pm(n)&&Mo(n.arrayValue,this.value)}}class gI extends Wt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Mo(this.value.arrayValue,n)}}class pI extends Wt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mo(this.value.arrayValue,n)}}class yI extends Wt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Mo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function E_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new _I(e,t,n,i,r,s,a)}function Lm(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>gd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),sl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ta(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ta(i)).join(",")),t.Te=n}return t.Te}function jm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!HE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!T_(e.startAt,t.startAt)&&T_(e.endAt,t.endAt)}function pd(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vI(e,t,n,i,r,s,a,l){return new da(e,t,n,i,r,s,a,l)}function Uc(e){return new da(e)}function A_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function QE(e){return e.collectionGroup!==null}function uo(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new se(ve.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new ko(s,i))}),n.has(ve.keyField().canonicalString())||t.Ie.push(new ko(ve.keyField(),i))}return t.Ie}function On(e){const t=J(e);return t.Ee||(t.Ee=TI(t,uo(e))),t.Ee}function TI(e,t){if(e.limitType==="F")return E_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ko(r.field,s)});const n=e.endAt?new tc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new tc(e.startAt.position,e.startAt.inclusive):null;return E_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function yd(e,t){const n=e.filters.concat([t]);return new da(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function _d(e,t,n){return new da(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pc(e,t){return jm(On(e),On(t))&&e.limitType===t.limitType}function YE(e){return`${Lm(On(e))}|lt:${e.limitType}`}function ls(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>FE(r)).join(", ")}]`),sl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ta(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ta(r)).join(",")),`Target(${i})`}(On(e))}; limitType=${e.limitType})`}function Lc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of uo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=v_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,uo(i),r)||i.endAt&&!function(a,l,u){const h=v_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,uo(i),r))}(e,t)}function EI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function KE(e){return(t,n)=>{let i=!1;for(const r of uo(e)){const s=AI(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function AI(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ws(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){lr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return DE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new Ht(Q.comparator);function li(){return bI}const XE=new Ht(Q.comparator);function Ha(...e){let t=XE;for(const n of e)t=t.insert(n.key,n);return t}function $E(e){let t=XE;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function br(){return co()}function ZE(){return co()}function co(){return new Yr(e=>e.toString(),(e,t)=>e.isEqual(t))}const SI=new Ht(Q.comparator),wI=new se(Q.comparator);function ut(...e){let t=wI;for(const n of e)t=t.add(n);return t}const RI=new se(lt);function II(){return RI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(t)?"-0":t}}function JE(e){return{integerValue:""+e}}function CI(e,t){return eI(t)?JE(t):zm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this._=void 0}}function NI(e,t,n){return e instanceof Uo?function(r,s){const a={fields:{[ME]:{stringValue:OE},[UE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Um(s)&&(s=kc(s)),s&&(a.fields[kE]=s),{mapValue:a}}(n,t):e instanceof Po?t1(e,t):e instanceof Lo?e1(e,t):function(r,s){const a=WE(r,s),l=b_(a)+b_(r.Ae);return md(a)&&md(r.Ae)?JE(l):zm(r.serializer,l)}(e,t)}function xI(e,t,n){return e instanceof Po?t1(e,t):e instanceof Lo?e1(e,t):n}function WE(e,t){return e instanceof ec?function(i){return md(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Uo extends jc{}class Po extends jc{constructor(t){super(),this.elements=t}}function t1(e,t){const n=n1(t);for(const i of e.elements)n.some(r=>Un(r,i))||n.push(i);return{arrayValue:{values:n}}}class Lo extends jc{constructor(t){super(),this.elements=t}}function e1(e,t){let n=n1(t);for(const i of e.elements)n=n.filter(r=>!Un(r,i));return{arrayValue:{values:n}}}class ec extends jc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function b_(e){return Xt(e.integerValue||e.doubleValue)}function n1(e){return Pm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,n){this.field=t,this.transform=n}}function VI(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Po&&r instanceof Po||i instanceof Lo&&r instanceof Lo?Js(i.elements,r.elements,Un):i instanceof ec&&r instanceof ec?Un(i.Ae,r.Ae):i instanceof Uo&&r instanceof Uo}(e.transform,t.transform)}class OI{constructor(t,n){this.version=t,this.transformResults=n}}class Te{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Te}static exists(t){return new Te(void 0,t)}static updateTime(t){return new Te(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function mu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class zc{}function i1(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Bc(e.key,Te.none()):new al(e.key,e.data,Te.none());{const n=e.data,i=Me.empty();let r=new se(ve.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new ur(e.key,i,new Ze(r.toArray()),Te.none())}}function MI(e,t,n){e instanceof al?function(r,s,a){const l=r.value.clone(),u=w_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof ur?function(r,s,a){if(!mu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=w_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(r1(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function ho(e,t,n,i){return e instanceof al?function(s,a,l,u){if(!mu(s.precondition,a))return l;const h=s.value.clone(),d=R_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof ur?function(s,a,l,u){if(!mu(s.precondition,a))return l;const h=R_(s.fieldTransforms,u,a),d=a.data;return d.setAll(r1(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return mu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function kI(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=WE(i.transform,r||null);s!=null&&(n===null&&(n=Me.empty()),n.set(i.field,s))}return n||null}function S_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Js(i,r,(s,a)=>VI(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class al extends zc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ur extends zc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function r1(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function w_(e,t,n){const i=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,xI(a,l,n[r]))}return i}function R_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,NI(s,a,t))}return i}class Bc extends zc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s1 extends zc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&MI(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=ho(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=ho(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=ZE();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=i1(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&Js(this.mutations,t.mutations,(n,i)=>S_(n,i))&&Js(this.baseMutations,t.baseMutations,(n,i)=>S_(n,i))}}class Bm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){mt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return SI}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Bm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,ft;function a1(e){switch(e){case k.OK:return K(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function o1(e){if(e===void 0)return oi("GRPC error has no .code"),k.UNKNOWN;switch(e){case Zt.OK:return k.OK;case Zt.CANCELLED:return k.CANCELLED;case Zt.UNKNOWN:return k.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return k.INTERNAL;case Zt.UNAVAILABLE:return k.UNAVAILABLE;case Zt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Zt.NOT_FOUND:return k.NOT_FOUND;case Zt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Zt.ABORTED:return k.ABORTED;case Zt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Zt.DATA_LOSS:return k.DATA_LOSS;default:return K(39323,{code:e})}}(ft=Zt||(Zt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=new Qi([4294967295,4294967295],0);function I_(e){const t=jI().encode(e),n=new TE;return n.update(t),new Uint8Array(n.digest())}function C_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Qi([n,i],0),new Qi([r,s],0)]}class qm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Fa(`Invalid padding: ${n}`);if(i<0)throw new Fa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Fa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Fa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Qi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Qi.fromNumber(i)));return r.compare(zI)===1&&(r=new Qi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=I_(t),[i,r]=C_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new qm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=I_(t),[i,r]=C_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,ol.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new qc($.min(),r,new Ht(lt),li(),ut())}}class ol{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new ol(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class l1{constructor(t,n){this.targetId=t,this.Ce=n}}class u1{constructor(t,n,i=Ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class N_{constructor(){this.ve=0,this.Fe=x_(),this.Me=Ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K(38017,{changeType:s})}}),new ol(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=x_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BI{constructor(t){this.Ge=t,this.ze=new Map,this.je=li(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ht(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(pd(s))if(i===0){const a=new Q(s.path);this.et(n,a,he.newNoDocument(a,$.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=tr(i).toUint8Array()}catch(u){if(u instanceof VE)return Zs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new qm(a,r,s)}catch(u){return Zs(u instanceof Fa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&pd(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,he.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ut();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new qc(t,n,this.Ye,this.je,i);return this.je=li(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ht(lt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new N_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new se(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new se(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new N_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xl(){return new Ht(Q.comparator)}function x_(){return new Ht(Q.comparator)}const qI={asc:"ASCENDING",desc:"DESCENDING"},HI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FI={and:"AND",or:"OR"};class GI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function vd(e,t){return e.useProto3Json||sl(t)?t:{value:t}}function nc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function c1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function QI(e,t){return nc(e,t.toTimestamp())}function rn(e){return mt(!!e,49232),$.fromTimestamp(function(n){const i=Wi(n);return new kt(i.seconds,i.nanos)}(e))}function Hm(e,t){return Td(e,t).canonicalString()}function Td(e,t){const n=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function h1(e){const t=Nt.fromString(e);return mt(y1(t),10190,{key:t.toString()}),t}function ic(e,t){return Hm(e.databaseId,t.path)}function fo(e,t){const n=h1(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(d1(n))}function f1(e,t){return Hm(e.databaseId,t)}function YI(e){const t=h1(e);return t.length===4?Nt.emptyPath():d1(t)}function Ed(e){return new Nt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function d1(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function D_(e,t,n){return{name:ic(e,t),fields:n.value.mapValue.fields}}function KI(e,t){return"found"in t?function(i,r){mt(!!r.found,43571),r.found.name,r.found.updateTime;const s=fo(i,r.found.name),a=rn(r.found.updateTime),l=r.found.createTime?rn(r.found.createTime):$.min(),u=new Me({mapValue:{fields:r.found.fields}});return he.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){mt(!!r.missing,3894),mt(!!r.readTime,22933);const s=fo(i,r.missing),a=rn(r.readTime);return he.newNoDocument(s,a)}(e,t):K(7234,{result:t})}function XI(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(mt(d===void 0||typeof d=="string",58123),Ae.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ae.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:o1(h.code);return new z(d,h.message||"")}(a);n=new u1(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=fo(e,i.document.name),s=rn(i.document.updateTime),a=i.document.createTime?rn(i.document.createTime):$.min(),l=new Me({mapValue:{fields:i.document.fields}}),u=he.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new gu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=fo(e,i.document),s=i.readTime?rn(i.readTime):$.min(),a=he.newNoDocument(r,s),l=i.removedTargetIds||[];n=new gu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=fo(e,i.document),s=i.removedTargetIds||[];n=new gu([],s,r,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new LI(r,s),l=i.targetId;n=new l1(l,a)}}return n}function m1(e,t){let n;if(t instanceof al)n={update:D_(e,t.key,t.value)};else if(t instanceof Bc)n={delete:ic(e,t.key)};else if(t instanceof ur)n={update:D_(e,t.key,t.data),updateMask:rC(t.fieldMask)};else{if(!(t instanceof s1))return K(16599,{Vt:t.type});n={verify:ic(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Uo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Po)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ec)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:QI(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(e,t.precondition)),n}function $I(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?rn(r.updateTime):rn(s);return a.isEqual($.min())&&(a=rn(s)),new OI(a,r.transformResults||[])}(n,t))):[]}function ZI(e,t){return{documents:[f1(e,t.path)]}}function JI(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=f1(e,r);const s=function(h){if(h.length!==0)return p1(An.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:us(m.field),direction:eC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=vd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function WI(e){let t=YI(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){mt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=g1(g);return m instanceof An&&qE(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(x){return new ko(cs(x.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,sl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new tc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new tc(_,m)}(n.endAt)),vI(t,r,a,s,l,"F",u,h)}function tC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function g1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=cs(n.unaryFilter.field);return Wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=cs(n.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cs(n.unaryFilter.field);return Wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cs(n.unaryFilter.field);return Wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return Wt.create(cs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>g1(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function eC(e){return qI[e]}function nC(e){return HI[e]}function iC(e){return FI[e]}function us(e){return{fieldPath:e.canonicalString()}}function cs(e){return ve.fromServerFormat(e.fieldPath)}function p1(e){return e instanceof Wt?function(n){if(n.op==="=="){if(__(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if(y_(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if(y_(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:nC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(r=>p1(r));return i.length===1?i[0]:{compositeFilter:{op:iC(n.op),filters:i}}}(e):K(54877,{filter:e})}function rC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function y1(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n,i,r,s=$.min(),a=$.min(),l=Ae.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Oi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t){this.yt=t}}function aC(e){const t=WI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?_d(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.Cn=new lC}addToCollectionParentIndex(t,n){return this.Cn.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(Ji.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(Ji.min())}updateCollectionGroup(t,n,i){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class lC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new se(Nt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new se(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_1=41943040;class ze{static withCacheSize(t){return new ze(t,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ze.DEFAULT_COLLECTION_PERCENTILE=10,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ze.DEFAULT=new ze(_1,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ze.DISABLED=new ze(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LruGarbageCollector",uC=1048576;function M_([e,t],[n,i]){const r=lt(e,n);return r===0?lt(t,i):r}class cC{constructor(t){this.Ir=t,this.buffer=new se(M_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();M_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(O_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fa(n)?F(O_,"Ignoring IndexedDB error during garbage collection: ",n):await ha(n)}await this.Vr(3e5)})}}class fC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return U.resolve(Mc.ce);const i=new cC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(V_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),os()<=ot.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function dC(e,t){return new fC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.changes=new Yr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,he.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&ho(i.mutation,r,Ze.empty(),kt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const r=br();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ha();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=br();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=li();const a=co(),l=function(){return co()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof ur)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),ho(d.mutation,h,d.mutation.getFieldMask(),kt.now())):a.set(h.key,Ze.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new gC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=co();let r=new Ht((a,l)=>a-l),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Ze.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ut()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=ZE();d.forEach(m=>{if(!s.has(m)){const _=i1(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return U.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):QE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):U.resolve(br());let l=Do,u=s;return a.next(h=>U.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:$E(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=Ha();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ha();return this.indexManager.getCollectionParents(t,s).next(l=>U.forEach(l,u=>{const h=function(g,m){return new da(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,he.newInvalidDocument(d)))});let l=Ha();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&ho(d.mutation,h,Ze.empty(),kt.now()),Lc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rn(r.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:aC(r.bundledQuery),readTime:rn(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.overlays=new Ht(Q.comparator),this.qr=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const i=br();return U.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),U.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),U.resolve()}getOverlaysForCollection(t,n,i){const r=br(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return U.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ht((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=br(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=br(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return U.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new PI(n,i));let s=this.qr.get(n);s===void 0&&(s=ut(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.Qr=new se(le.$r),this.Ur=new se(le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new le(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new le(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new Nt([])),i=new le(n,t),r=new le(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new Nt([])),i=new le(n,t),r=new le(n,t+1);let s=ut();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new le(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class le{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new se(le.$r)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new UI(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new le(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(t,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?km:this.tr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new le(n,0),r=new le(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new se(lt);return n.forEach(r=>{const s=new le(r,0),a=new le(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),U.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new le(new Q(s),0);let l=new se(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),U.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return U.forEach(n.mutations,r=>{const s=new le(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new le(n,0),r=this.Zr.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t){this.ri=t,this.docs=function(){return new Ht(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():he.newInvalidDocument(n))}getEntries(t,n){let i=li();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():he.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=li();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||ZR($R(d),i)<=0||(r.has(d.key)||Lc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(t,n,i,r){K(9500)}ii(t,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new AC(this)}getSize(t){return U.resolve(this.size)}}class AC extends mC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),U.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t){this.persistence=t,this.si=new Yr(n=>Lm(n),jm),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new Fm,this.targetCount=0,this.ai=ea.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),U.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ea(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.Pr(n),U.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return U.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),U.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return U.resolve(i)}containsKey(t,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t,n){this.ui={},this.overlays={},this.ci=new Mc(0),this.li=!1,this.li=!0,this.hi=new vC,this.referenceDelegate=t(this),this.Pi=new bC(this),this.indexManager=new oC,this.remoteDocumentCache=function(r){return new EC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new sC(n),this.Ii=new yC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new _C,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new TC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const r=new SC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return U.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class SC extends WR{constructor(t){super(),this.currentSequenceNumber=t}}class Gm{constructor(t){this.persistence=t,this.Ri=new Fm,this.Vi=null}static mi(t){return new Gm(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),U.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class rc{constructor(t,n){this.persistence=t,this.pi=new Yr(i=>nI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=dC(this,n)}static mi(t,n){return new rc(t,n)}Ei(){}di(t){return U.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return U.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?U.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,$.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),U.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),U.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),U.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=fu(t.data.value)),n}br(t,n,i){return U.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return U.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ut(),r=ut();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Qm(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _2()?8:tI(qe())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new wC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(os()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(os()<=ot.DEBUG&&F("QueryEngine","Query:",ls(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(os()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,On(n))):U.resolve())}ys(t,n){if(A_(n))return U.resolve(null);let i=On(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=_d(n,null,"F"),i=On(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ut(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,_d(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return A_(n)||r.isEqual($.min())?U.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?U.resolve(null):(os()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ls(n)),this.vs(t,a,n,XR(r,Do)).next(l=>l))})}Ds(t,n){let i=new se(KE(t));return n.forEach((r,s)=>{Lc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return os()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ls(n)),this.ps.getDocumentsMatchingQuery(t,n,Ji.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="LocalStore",IC=3e8;class CC{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ht(lt),this.xs=new Yr(s=>Lm(s),jm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function NC(e,t,n,i){return new CC(e,t,n,i)}async function T1(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ut();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function xC(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=U.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(O=>{const V=h.docVersions.get(x);mt(V!==null,48541),O.version.compareTo(V)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function E1(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function DC(e,t){const n=J(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Ae.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(O,V,S){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=IC?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=li(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(VC(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return U.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function VC(e,t,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=li();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(Ym,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function OC(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=km),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function MC(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,U.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Oi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Ad(e,t,n){const i=J(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!fa(a))throw a;F(Ym,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function k_(e,t,n){const i=J(e);let r=$.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.xs.get(d);return m!==void 0?U.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,On(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:$.min(),n?s:ut())).next(l=>(kC(i,EI(t),l),{documents:l,Qs:s})))}function kC(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class U_{constructor(){this.activeTargetIds=II()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UC{constructor(){this.Mo=new U_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new U_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="ConnectivityMonitor";class L_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(P_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(P_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function bd(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="RestConnection",LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Ju?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=bd(),l=this.zo(t,n.toUriEncodedString());F(rf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=nl(h);return this.Jo(t,l,u,i,d).then(g=>(F(rf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Zs(rf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=LC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="WebChannelConnection";class BC extends jC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=bd();return new Promise((l,u)=>{const h=new EE;h.setWithCredentials(!0),h.listenOnce(AE.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case hu.NO_ERROR:const g=h.getResponseJson();F(Re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case hu.TIMEOUT:F(Re,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case hu.HTTP_ERROR:const m=h.getStatus();if(F(Re,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const O=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(T)>=0?T:k.UNKNOWN}(x.status);u(new z(O,x.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(Re,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);F(Re,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=bd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=wE(),l=SE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");F(Re,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const x=new zC({Yo:V=>{_?F(Re,`Not sending because RPC '${t}' stream ${r} is closed:`,V):(m||(F(Re,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),F(Re,`RPC '${t}' stream ${r} sending:`,V),g.send(V))},Zo:()=>g.close()}),O=(V,S,T)=>{V.listen(S,R=>{try{T(R)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,qa.EventType.OPEN,()=>{_||(F(Re,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),O(g,qa.EventType.CLOSE,()=>{_||(_=!0,F(Re,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(g))}),O(g,qa.EventType.ERROR,V=>{_||(_=!0,Zs(Re,`RPC '${t}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),x.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,qa.EventType.MESSAGE,V=>{var S;if(!_){const T=V.data[0];mt(!!T,16349);const R=T,D=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(D){F(Re,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let B=function(A){const w=Zt[A];if(w!==void 0)return o1(w)}(L),E=D.message;B===void 0&&(B=k.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),_=!0,x.a_(new z(B,E)),g.close()}else F(Re,`RPC '${t}' stream ${r} received:`,T),x.u_(T)}}),O(l,bE.STAT_EVENT,V=>{V.stat===hd.PROXY?F(Re,`RPC '${t}' stream ${r} detected buffering proxy`):V.stat===hd.NOPROXY&&F(Re,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(e){return new GI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="PersistentStream";class A1{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Km(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(oi(n.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(j_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qC extends A1{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=XI(this.serializer,t),i=function(s){if(!("targetChange"in s))return $.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?rn(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Ed(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=pd(u)?{documents:ZI(s,u)}:{query:JI(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=c1(s,a.resumeToken);const h=vd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=nc(s,a.snapshotVersion.toTimestamp());const h=vd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=tC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Ed(this.serializer),n.removeTarget=t,this.q_(n)}}class HC extends A1{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=$I(t.writeResults,t.commitTime),i=rn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Ed(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>m1(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{}class GC extends FC{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Td(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Td(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class QC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oi(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="RemoteStore";class YC{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Kr(this)&&(F(jr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await ll(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Fc(h)}(this))})}),this.Ra=new QC(i,r)}}async function Fc(e){if(Kr(e))for(const t of e.da)await t(!0)}async function ll(e){for(const t of e.da)await t(!1)}function b1(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Jm(n)?Zm(n):ma(n).O_()&&$m(n,t))}function Xm(e,t){const n=J(e),i=ma(n);n.Ia.delete(t),i.O_()&&S1(n,t),n.Ia.size===0&&(i.O_()?i.L_():Kr(n)&&n.Ra.set("Unknown"))}function $m(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ma(e).Y_(t)}function S1(e,t){e.Va.Ue(t),ma(e).Z_(t)}function Zm(e){e.Va=new BI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ma(e).start(),e.Ra.ua()}function Jm(e){return Kr(e)&&!ma(e).x_()&&e.Ia.size>0}function Kr(e){return J(e).Ea.size===0}function w1(e){e.Va=void 0}async function KC(e){e.Ra.set("Online")}async function XC(e){e.Ia.forEach((t,n)=>{$m(e,t)})}async function $C(e,t){w1(e),Jm(e)?(e.Ra.ha(t),Zm(e)):e.Ra.set("Unknown")}async function ZC(e,t,n){if(e.Ra.set("Online"),t instanceof u1&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){F(jr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await sc(e,i)}else if(t instanceof gu?e.Va.Ze(t):t instanceof l1?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await E1(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ae.EMPTY_BYTE_STRING,d.snapshotVersion)),S1(s,u);const g=new Oi(d.target,u,h,d.sequenceNumber);$m(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(jr,"Failed to raise snapshot:",i),await sc(e,i)}}async function sc(e,t,n){if(!fa(t))throw t;e.Ea.add(1),await ll(e),e.Ra.set("Offline"),n||(n=()=>E1(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(jr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Fc(e)})}function R1(e,t){return t().catch(n=>sc(e,n,t))}async function Gc(e){const t=J(e),n=nr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:km;for(;JC(t);)try{const r=await OC(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,WC(t,r)}catch(r){await sc(t,r)}I1(t)&&C1(t)}function JC(e){return Kr(e)&&e.Ta.length<10}function WC(e,t){e.Ta.push(t);const n=nr(e);n.O_()&&n.X_&&n.ea(t.mutations)}function I1(e){return Kr(e)&&!nr(e).x_()&&e.Ta.length>0}function C1(e){nr(e).start()}async function tN(e){nr(e).ra()}async function eN(e){const t=nr(e);for(const n of e.Ta)t.ea(n.mutations)}async function nN(e,t,n){const i=e.Ta.shift(),r=Bm.from(i,t,n);await R1(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Gc(e)}async function iN(e,t){t&&nr(e).X_&&await async function(i,r){if(function(a){return a1(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();nr(i).B_(),await R1(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Gc(i)}}(e,t),I1(e)&&C1(e)}async function z_(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),F(jr,"RemoteStore received new credentials");const i=Kr(n);n.Ea.add(3),await ll(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Fc(n)}async function rN(e,t){const n=J(e);t?(n.Ea.delete(2),await Fc(n)):t||(n.Ea.add(2),await ll(n),n.Ra.set("Unknown"))}function ma(e){return e.ma||(e.ma=function(n,i,r){const s=J(n);return s.sa(),new qC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:KC.bind(null,e),t_:XC.bind(null,e),r_:$C.bind(null,e),H_:ZC.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Jm(e)?Zm(e):e.Ra.set("Unknown")):(await e.ma.stop(),w1(e))})),e.ma}function nr(e){return e.fa||(e.fa=function(n,i,r){const s=J(n);return s.sa(),new HC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:tN.bind(null,e),r_:iN.bind(null,e),ta:eN.bind(null,e),na:nN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Gc(e)):(await e.fa.stop(),e.Ta.length>0&&(F(jr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new Wm(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tg(e,t){if(oi("AsyncQueue",`${t}: ${e}`),fa(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static emptySet(t){return new Vs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Ha(),this.sortedSet=new Ht(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Vs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Vs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.ga=new Ht(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class na{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new na(t,n,Vs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Pc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class aN{constructor(){this.queries=q_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=q_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function q_(){return new Yr(e=>YE(e),Pc)}async function N1(e,t){const n=J(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new sN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=tg(a,`Initialization of query '${ls(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&eg(n)}async function x1(e,t){const n=J(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function oN(e,t){const n=J(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&eg(n)}function lN(e,t,n){const i=J(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function eg(e){e.Ca.forEach(t=>{t.next()})}var Sd,H_;(H_=Sd||(Sd={})).Ma="default",H_.Cache="cache";class D1{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new na(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=na.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Sd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t){this.key=t}}class O1{constructor(t){this.key=t}}class uN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=KE(t),this.tu=new Vs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new B_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=Lc(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?x!==O&&(i.track({type:3,doc:_}),V=!0):this.su(m,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),V=!0):m&&!_&&(i.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(_?(a=a.add(_),s=O?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,x){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:V})}};return O(_)-O(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new na(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new B_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new O1(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new V1(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class cN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class hN{constructor(t){this.key=t,this.hu=!1}}class fN{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Yr(l=>YE(l),Pc),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(Q.comparator),this.Au=new Map,this.Ru=new Fm,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dN(e,t,n=!0){const i=j1(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await M1(i,t,n,!0),r}async function mN(e,t){const n=j1(e);await M1(n,t,!0,!1)}async function M1(e,t,n,i){const r=await MC(e.localStore,On(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await gN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&b1(e.remoteStore,r),l}async function gN(e,t,n,i,r){e.pu=(g,m,_)=>async function(O,V,S,T){let R=V.view.ru(S);R.Cs&&(R=await k_(O.localStore,V.query,!1).then(({documents:E})=>V.view.ru(E,R)));const D=T&&T.targetChanges.get(V.targetId),L=T&&T.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(R,O.isPrimaryClient,D,L);return G_(O,V.targetId,B.au),B.snapshot}(e,g,m,_);const s=await k_(e.localStore,t,!0),a=new uN(t,s.Qs),l=a.ru(s.documents),u=ol.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);G_(e,n,h.au);const d=new cN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function pN(e,t,n){const i=J(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Pc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ad(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Xm(i.remoteStore,r.targetId),wd(i,r.targetId)}).catch(ha)):(wd(i,r.targetId),await Ad(i.localStore,r.targetId,!0))}async function yN(e,t){const n=J(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Xm(n.remoteStore,i.targetId))}async function _N(e,t,n){const i=wN(e);try{const r=await function(a,l){const u=J(a),h=kt.now(),d=l.reduce((_,x)=>_.add(x.key),ut());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=li(),O=ut();return u.Ns.getEntries(_,d).next(V=>{x=V,x.forEach((S,T)=>{T.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(V=>{g=V;const S=[];for(const T of l){const R=kI(T,g.get(T.key).overlayedDocument);R!=null&&S.push(new ur(T.key,R,jE(R.value.mapValue),Te.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(V=>{m=V;const S=V.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,S)})}).then(()=>({batchId:m.batchId,changes:$E(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ht(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await ul(i,r.changes),await Gc(i.remoteStore)}catch(r){const s=tg(r,"Failed to persist write");n.reject(s)}}async function k1(e,t){const n=J(e);try{const i=await DC(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?mt(a.hu,14607):r.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await ul(n,i,t)}catch(i){await ha(i)}}function F_(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&eg(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function vN(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Ht(Q.comparator);a=a.insert(s,he.newNoDocument(s,$.min()));const l=ut().add(s),u=new qc($.min(),new Map,new Ht(lt),a,l);await k1(i,u),i.du=i.du.remove(s),i.Au.delete(t),ig(i)}else await Ad(i.localStore,t,!1).then(()=>wd(i,t,n)).catch(ha)}async function TN(e,t){const n=J(e),i=t.batch.batchId;try{const r=await xC(n.localStore,t);P1(n,i,null),U1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ul(n,r)}catch(r){await ha(r)}}async function EN(e,t,n){const i=J(e);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(mt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);P1(i,t,n),U1(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ul(i,r)}catch(r){await ha(r)}}function U1(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function P1(e,t,n){const i=J(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function wd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||L1(e,i)})}function L1(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Xm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),ig(e))}function G_(e,t,n){for(const i of n)i instanceof V1?(e.Ru.addReference(i.key,t),AN(e,i)):i instanceof O1?(F(ng,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||L1(e,i.key)):K(19791,{wu:i})}function AN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(ng,"New document in limbo: "+n),e.Eu.add(i),ig(e))}function ig(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(Nt.fromString(t)),i=e.fu.next();e.Au.set(i,new hN(n)),e.du=e.du.insert(n,i),b1(e.remoteStore,new Oi(On(Uc(n.path)),i,"TargetPurposeLimboResolution",Mc.ce))}}async function ul(e,t,n){const i=J(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Qm.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(h,m=>U.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>U.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!fa(g))throw g;F(Ym,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,O)}}}(i.localStore,s))}async function bN(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){F(ng,"User change. New user:",t.toKey());const i=await T1(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ul(n,i.Ls)}}function SN(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let r=ut();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function j1(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=k1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=SN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vN.bind(null,t),t.Pu.H_=oN.bind(null,t.eventManager),t.Pu.yu=lN.bind(null,t.eventManager),t}function wN(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=EN.bind(null,t),t}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Hc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return NC(this.persistence,new RC,t.initialUser,this.serializer)}Cu(t){return new v1(Gm.mi,this.serializer)}Du(t){return new UC}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class RN extends ac{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof rc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new hC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ze.withCacheSize(this.cacheSizeBytes):ze.DEFAULT;return new v1(i=>rc.mi(i,n),this.serializer)}}class Rd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bN.bind(null,this.syncEngine),await rN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new aN}()}createDatastore(t){const n=Hc(t.databaseInfo.databaseId),i=function(s){return new BC(s)}(t.databaseInfo);return function(s,a,l,u){return new GC(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new YC(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>F_(this.syncEngine,n,0),function(){return L_.v()?new L_:new PC}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new fN(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=J(r);F(jr,"RemoteStore shutting down."),s.Ea.add(5),await ll(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Rd.provider={build:()=>new Rd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):oi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=J(r),l={documents:s.map(g=>ic(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Nt.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=KI(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());mt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Bc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Q.fromPath(i);this.mutations.push(new s1(r,this.precondition(r)))}),await async function(i,r){const s=J(i),a={writes:r.map(l=>m1(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,Nt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K(50498,{Gu:t.constructor.name});n=$.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual($.min())?Te.exists(!1):Te.updateTime(n):Te.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual($.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Te.updateTime(n)}return Te.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new Km(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new IN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!sl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!a1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="FirestoreClient";class NN{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ce.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{F(ir,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(ir,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=tg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function af(e,t){e.asyncQueue.verifyOperationInProgress(),F(ir,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await T1(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Q_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xN(e);F(ir,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>z_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>z_(t.remoteStore,r)),e._onlineComponents=t}async function xN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(ir,"Using user provided OfflineComponentProvider");try{await af(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await af(e,new ac)}}else F(ir,"Using default OfflineComponentProvider"),await af(e,new RN(void 0));return e._offlineComponents}async function rg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(ir,"Using user provided OnlineComponentProvider"),await Q_(e,e._uninitializedComponentsProvider._online)):(F(ir,"Using default OnlineComponentProvider"),await Q_(e,new Rd))),e._onlineComponents}function DN(e){return rg(e).then(t=>t.syncEngine)}function VN(e){return rg(e).then(t=>t.datastore)}async function Id(e){const t=await rg(e),n=t.eventManager;return n.onListen=dN.bind(null,t.syncEngine),n.onUnlisten=pN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=mN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=yN.bind(null,t.syncEngine),n}function ON(e,t,n={}){const i=new ei;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new z1({next:m=>{d.Nu(),a.enqueueAndForget(()=>x1(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new D1(Uc(l.path),d,{includeMetadataChanges:!0,qa:!0});return N1(s,g)}(await Id(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="firestore.googleapis.com",K_=!0;class X_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q1,this.ssl=K_}else this.host=t.host,this.ssl=t.ssl??K_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=_1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<uC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B1(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qc{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new LR;switch(i.type){case"firstParty":return new qR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Y_.get(n);i&&(F("ComponentProvider","Removing Datastore"),Y_.delete(n),i.terminate())}(this),Promise.resolve()}}function MN(e,t,n,i={}){var h;e=nn(e,Qc);const r=nl(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(o2(`https://${l}`),h2("Firestore",!0)),s.host!==q1&&s.host!==l&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!No(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ce.MOCK_USER;else{d=l2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ce(m)}e._authCredentials=new jR(new IE(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Xr(this.firestore,t,this._query)}}class qt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qt(this.firestore,t,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(rl(n,qt._jsonSchema))return new qt(t,i||null,new Q(Nt.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:te("string",qt._jsonSchemaVersion),referencePath:te("string")};class Yi extends Xr{constructor(t,n,i){super(t,n,Uc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qt(this.firestore,null,new Q(t))}withConverter(t){return new Yi(this.firestore,t,this._path)}}function $_(e,t,...n){if(e=oe(e),CE("collection","path",t),e instanceof Qc){const i=Nt.fromString(t,...n);return l_(i),new Yi(e,null,i)}{if(!(e instanceof qt||e instanceof Yi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return l_(i),new Yi(e.firestore,null,i)}}function Ie(e,t,...n){if(e=oe(e),arguments.length===1&&(t=Mm.newId()),CE("doc","path",t),e instanceof Qc){const i=Nt.fromString(t,...n);return o_(i),new qt(e,null,new Q(i))}{if(!(e instanceof qt||e instanceof Yi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return o_(i),new qt(e.firestore,e instanceof Yi?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="AsyncQueue";class J_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Km(this,"async_queue_retry"),this._c=()=>{const i=sf();i&&F(Z_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ei;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!fa(t))throw t;F(Z_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,oi("INTERNAL UNHANDLED ERROR: ",W_(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Wm.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&K(47125,{Pc:W_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function W_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class ui extends Qc{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new J_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new J_(t),this._firestoreClient=void 0,await t}}}function kN(e,t){const n=typeof e=="object"?e:wR(),i=typeof e=="string"?e:Ju,r=pE(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=r2("firestore");s&&MN(r,...s)}return r}function Yc(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||UN(e),e._firestoreClient}function UN(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new sI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,B1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new NN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $e(Ae.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $e(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(rl(t,$e._jsonSchema))return $e.fromBase64String(t.bytes)}}$e._jsonSchemaVersion="firestore/bytes/1.0",$e._jsonSchema={type:te("string",$e._jsonSchemaVersion),bytes:te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(t){if(rl(t,Mn._jsonSchema))return new Mn(t.latitude,t.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:te("string",Mn._jsonSchemaVersion),latitude:te("number"),longitude:te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(rl(t,kn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new kn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kn._jsonSchemaVersion="firestore/vectorValue/1.0",kn._jsonSchema={type:te("string",kn._jsonSchemaVersion),vectorValues:te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^__.*__$/;class LN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ur(t,this.data,this.fieldMask,n,this.fieldTransforms):new al(t,this.data,n,this.fieldTransforms)}}class H1{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ur(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function F1(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class sg{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new sg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return oc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(F1(this.Ac)&&PN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class jN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Hc(t)}Cc(t,n,i,r=!1){return new sg({Ac:t,methodName:n,Dc:i,path:ve.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hl(e){const t=e._freezeSettings(),n=Hc(e._databaseId);return new jN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ag(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);lg("Data must be an object, but it was:",a,i);const l=Y1(i,a);let u,h;if(s.merge)u=new Ze(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=Cd(t,g,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);X1(d,m)||d.push(m)}u=new Ze(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new LN(new Me(l),u,h)}class Xc extends Kc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Xc}}class og extends Kc{_toFieldTransform(t){return new DI(t.path,new Uo)}isEqual(t){return t instanceof og}}function G1(e,t,n,i){const r=e.Cc(1,t,n);lg("Data must be an object, but it was:",r,i);const s=[],a=Me.empty();lr(i,(u,h)=>{const d=ug(t,u,n);h=oe(h);const g=r.yc(d);if(h instanceof Xc)s.push(d);else{const m=fl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new Ze(s);return new H1(a,l,r.fieldTransforms)}function Q1(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[Cd(t,i,n)],u=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Cd(t,s[m])),u.push(s[m+1]);const h=[],d=Me.empty();for(let m=l.length-1;m>=0;--m)if(!X1(h,l[m])){const _=l[m];let x=u[m];x=oe(x);const O=a.yc(_);if(x instanceof Xc)h.push(_);else{const V=fl(x,O);V!=null&&(h.push(_),d.set(_,V))}}const g=new Ze(h);return new H1(d,g,a.fieldTransforms)}function zN(e,t,n,i=!1){return fl(n,e.Cc(i?4:3,t))}function fl(e,t){if(K1(e=oe(e)))return lg("Unsupported field value:",t,e),Y1(e,t);if(e instanceof Kc)return function(i,r){if(!F1(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=fl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=oe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return CI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=kt.fromDate(i);return{timestampValue:nc(r.serializer,s)}}if(i instanceof kt){const s=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nc(r.serializer,s)}}if(i instanceof Mn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $e)return{bytesValue:c1(r.serializer,i._byteString)};if(i instanceof qt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof kn)return function(a,l){return{mapValue:{fields:{[PE]:{stringValue:LE},[Wu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return zm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Oc(i)}`)}(e,t)}function Y1(e,t){const n={};return DE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lr(e,(i,r)=>{const s=fl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function K1(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof Mn||e instanceof $e||e instanceof qt||e instanceof Kc||e instanceof kn)}function lg(e,t,n){if(!K1(n)||!NE(n)){const i=Oc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Cd(e,t,n){if((t=oe(t))instanceof cl)return t._internalPath;if(typeof t=="string")return ug(e,t);throw oc("Field path arguments must be of type string or ",e,!1,void 0,n)}const BN=new RegExp("[~\\*/\\[\\]]");function ug(e,t,n){if(t.search(BN)>=0)throw oc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cl(...t.split("."))._internalPath}catch{throw oc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function oc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function X1(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qN extends lc{data(){return super.data()}}function cg(e,t){return typeof t=="string"?ug(e,t):t instanceof cl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class $1 extends hg{}function FN(e,t,...n){let i=[];t instanceof hg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof dg).length,l=s.filter(u=>u instanceof fg).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class fg extends $1{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new fg(t,n,i)}_apply(t){const n=this._parse(t);return Z1(t._query,n),new Xr(t.firestore,t.converter,yd(t._query,n))}_parse(t){const n=hl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nv(g,d);const x=[];for(const O of g)x.push(ev(u,s,O));m={arrayValue:{values:x}}}else m=ev(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nv(g,d),m=zN(l,a,g,d==="in"||d==="not-in");return Wt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class dg extends hg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new dg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)Z1(a,u),a=yd(a,u)}(t._query,n),new Xr(t.firestore,t.converter,yd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mg extends $1{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new mg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ko(s,a)}(t._query,this._field,this._direction);return new Xr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new da(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function GN(e,t="asc"){const n=t,i=cg("orderBy",e);return mg._create(i,n)}function ev(e,t,n){if(typeof(n=oe(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QE(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Nt.fromString(n));if(!Q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return p_(e,new Q(i))}if(n instanceof qt)return p_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oc(n)}.`)}function nv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Z1(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class J1{convertValue(t,n="none"){switch(er(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(tr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return lr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[Wu].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Xt(a.doubleValue));return new kn(n)}convertGeoPoint(t){return new Mn(Xt(t.latitude),Xt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=kc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vo(t));default:return null}}convertTimestamp(t){const n=Wi(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Nt.fromString(t);mt(y1(i),9688,{name:t});const r=new Oo(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||oi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class QN extends J1{constructor(t){super(),this.firestore=t}convertBytes(t){return new $e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}class bs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ki extends lc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(cg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ki._jsonSchema={type:te("string",Ki._jsonSchemaVersion),bundleSource:te("string","DocumentSnapshot"),bundleName:te("string"),bundle:te("string")};class pu extends Ki{data(t={}){return super.data(t)}}class Os{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new bs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new pu(this._firestore,this._userDataWriter,i.key,i,new bs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new pu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new pu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bs(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:YN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Os._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function YN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(e){e=nn(e,qt);const t=nn(e.firestore,ui);return ON(Yc(t),e._key).then(n=>W1(t,e,n))}Os._jsonSchemaVersion="firestore/querySnapshot/1.0",Os._jsonSchema={type:te("string",Os._jsonSchemaVersion),bundleSource:te("string","QuerySnapshot"),bundleName:te("string"),bundle:te("string")};class pg extends J1{constructor(t){super(),this.firestore=t}convertBytes(t){return new $e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Ms(e,t,n){e=nn(e,qt);const i=nn(e.firestore,ui),r=gg(e.converter,t,n);return $c(i,[ag(hl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Te.none())])}function KN(e,t,n,...i){e=nn(e,qt);const r=nn(e.firestore,ui),s=hl(r);let a;return a=typeof(t=oe(t))=="string"||t instanceof cl?Q1(s,"updateDoc",e._key,t,n,i):G1(s,"updateDoc",e._key,t),$c(r,[a.toMutation(e._key,Te.exists(!0))])}function XN(e){return $c(nn(e.firestore,ui),[new Bc(e._key,Te.none())])}function $N(e,t){const n=nn(e.firestore,ui),i=Ie(e),r=gg(e.converter,t);return $c(n,[ag(hl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Te.exists(!1))]).then(()=>i)}function yu(e,...t){var u,h,d;e=oe(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||tv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof qt)a=nn(e.firestore,ui),l=Uc(e._key.path),s={next:g=>{t[i]&&t[i](W1(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=nn(e,Xr);a=nn(g.firestore,ui),l=g._query;const m=new pg(a);s={next:_=>{t[i]&&t[i](new Os(a,m,g,_))},error:t[i+1],complete:t[i+2]},HN(e._query)}return function(m,_,x,O){const V=new z1(O),S=new D1(_,V,x);return m.asyncQueue.enqueueAndForget(async()=>N1(await Id(m),S)),()=>{V.Nu(),m.asyncQueue.enqueueAndForget(async()=>x1(await Id(m),S))}}(Yc(a),l,r,s)}function $c(e,t){return function(i,r){const s=new ei;return i.asyncQueue.enqueueAndForget(async()=>_N(await DN(i),r,s)),s.promise}(Yc(e),t)}function W1(e,t,n){const i=n.docs.get(t._key),r=new pg(e);return new Ki(e,r,t._key,i,new bs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={maxAttempts:5};function Ga(e,t){if((e=oe(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=hl(t)}get(t){const n=Ga(t,this._firestore),i=new QN(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return K(24041);const s=r[0];if(s.isFoundDocument())return new lc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new lc(this._firestore,i,n._key,null,n.converter);throw K(18433,{doc:s})})}set(t,n,i){const r=Ga(t,this._firestore),s=gg(r.converter,n,i),a=ag(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=Ga(t,this._firestore);let a;return a=typeof(n=oe(n))=="string"||n instanceof cl?Q1(this._dataReader,"Transaction.update",s._key,n,i,r):G1(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=Ga(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN extends JN{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Ga(t,this._firestore),i=new pg(this._firestore);return super.get(t).then(r=>new Ki(this._firestore,i,n._key,r._document,new bs(!1,!1),n.converter))}}function iv(e,t,n){e=nn(e,ui);const i={...ZN,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new ei;return s.asyncQueue.enqueueAndForget(async()=>{const h=await VN(s);new CN(s.asyncQueue,h,l,a,u).ju()}),u.promise}(Yc(e),r=>t(new WN(e,r)),i)}function of(){return new og("serverTimestamp")}(function(t,n=!0){(function(r){ca=r})(Vc),$s(new Pr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new ui(new zR(i.getProvider("auth-internal")),new HR(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Gi(i_,r_,t),Gi(i_,r_,"esm2020")})();function tA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tx=tA,eA=new il("auth","Firebase",tA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Dm("@firebase/auth");function ex(e,...t){uc.logLevel<=ot.WARN&&uc.warn(`Auth (${Vc}): ${e}`,...t)}function _u(e,...t){uc.logLevel<=ot.ERROR&&uc.error(`Auth (${Vc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(e,...t){throw _g(e,...t)}function ks(e,...t){return _g(e,...t)}function yg(e,t,n){const i={...tx(),[t]:n};return new il("auth","Firebase",i).create(t,{appName:e.name})}function Vr(e){return yg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nA(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&rr(e,"argument-error"),yg(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _g(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return eA.create(e,...t)}function it(e,t,...n){if(!e)throw _g(t,...n)}function Jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _u(t),new Error(t)}function zr(e,t){e||Jn(t)}function nx(){return rv()==="http:"||rv()==="https:"}function rv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nx()||g2()||"connection"in navigator)?navigator.onLine:!0}function rx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,n){this.shortDelay=t,this.longDelay=n,zr(n>t,"Short delay should be less than long delay!"),this.isMobile=f2()||p2()}get(){return ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(e,t){zr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lx=new dl(3e4,6e4);function Zc(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ml(e,t,n,i,r={}){return rA(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=xm({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return m2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&nl(e.emulatorConfig.host)&&(h.credentials="include"),iA.fetch()(await aA(e,e.config.apiHost,n,l),h)})}async function rA(e,t,n){e._canInitEmulator=!1;const i={...ax,...t};try{const r=new ux(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Zl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Zl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Zl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yg(e,d,h);rr(e,d)}}catch(r){if(r instanceof hi)throw r;rr(e,"network-request-failed",{message:String(r)})}}async function sA(e,t,n,i,r={}){const s=await ml(e,t,n,i,r);return"mfaPendingCredential"in s&&rr(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function aA(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?sx(e.config,r):`${e.config.apiScheme}://${r}`;return ox.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class ux{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ks(this.auth,"network-request-failed")),lx.get())})}}function Zl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ks(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(e,t){return ml(e,"POST","/v1/accounts:delete",t)}async function cc(e,t){return ml(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hx(e,t=!1){const n=oe(e),i=await n.getIdToken(t),r=vg(i);it(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:mo(lf(r.auth_time)),issuedAtTime:mo(lf(r.iat)),expirationTime:mo(lf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function lf(e){return Number(e)*1e3}function vg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return _u("JWT malformed, contained fewer than 3 sections"),null;try{const r=fE(n);return r?JSON.parse(r):(_u("Failed to decode base64 JWT payload"),null)}catch(r){return _u("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function sv(e){const t=vg(e);return it(t,"internal-error"),it(typeof t.exp<"u","internal-error"),it(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof hi&&fx(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function fx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await jo(e,cc(t,{idToken:n}));it(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?oA(r.providerUserInfo):[],a=gx(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new xd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function mx(e){const t=oe(e);await hc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gx(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function oA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(e,t){const n=await rA(e,{},async()=>{const i=xm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await aA(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&nl(e.emulatorConfig.host)&&(u.credentials="include"),iA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yx(e,t){return ml(e,"POST","/v2/accounts:revokeToken",Zc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){it(t.idToken,"internal-error"),it(typeof t.idToken<"u","internal-error"),it(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):sv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){it(t.length!==0,"internal-error");const n=sv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await px(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Us;return i&&(it(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(it(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(it(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(e,t){it(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Tn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new dx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new xd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await jo(this,this.stsTokenManager.getToken(this.auth,t));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return hx(this,t)}reload(){return mx(this)}_assign(t){this!==t&&(it(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Tn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await hc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Vr(this.auth));const t=await this.getIdToken();return await jo(this,cx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:O}=n;it(g&&O,t,"internal-error");const V=Us.fromJSON(this.name,O);it(typeof g=="string",t,"internal-error"),_i(i,t.name),_i(r,t.name),it(typeof m=="boolean",t,"internal-error"),it(typeof _=="boolean",t,"internal-error"),_i(s,t.name),_i(a,t.name),_i(l,t.name),_i(u,t.name),_i(h,t.name),_i(d,t.name);const S=new Tn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(S.providerData=x.map(T=>({...T}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const r=new Us;r.updateFromServerResponse(n);const s=new Tn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await hc(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];it(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?oA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Us;l.updateFromIdToken(i);const u=new Tn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new xd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;function Sr(e){zr(e instanceof Function,"Expected a class definition");let t=av.get(e);return t?(zr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,av.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}lA.type="NONE";const ov=lA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(e,t,n){return`firebase:${e}:${t}:${n}`}class Ps{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=uf(this.userKey,r.apiKey,s),this.fullPersistenceKey=uf("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await cc(this.auth,{idToken:t}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,t):null}return Tn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Ps(Sr(ov),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Sr(ov);const a=uf(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await cc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await Tn._fromGetAccountInfoResponse(t,m,d)}else g=Tn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ps(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Ps(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_x(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hA(t))return"Blackberry";if(fA(t))return"Webos";if(vx(t))return"Safari";if((t.includes("chrome/")||Tx(t))&&!t.includes("edge/"))return"Chrome";if(cA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function _x(e=qe()){return/firefox\//i.test(e)}function vx(e=qe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Tx(e=qe()){return/crios\//i.test(e)}function uA(e=qe()){return/iemobile/i.test(e)}function cA(e=qe()){return/android/i.test(e)}function hA(e=qe()){return/blackberry/i.test(e)}function fA(e=qe()){return/webos/i.test(e)}function Ex(e=qe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ax(){return y2()&&document.documentMode===10}function bx(e=qe()){return Ex(e)||cA(e)||fA(e)||hA(e)||/windows phone/i.test(e)||uA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(e,t=[]){let n;switch(e){case"Browser":n=lv(qe());break;case"Worker":n=`${lv(qe())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(e,t={}){return ml(e,"GET","/v2/passwordPolicy",Zc(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=6;class Ix{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Rx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uv(this),this.idTokenSubscription=new uv(this),this.beforeStateQueue=new Sx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ps.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await cc(this,{idToken:t}),i=await Tn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await hc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=rx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vn(this.app))return Promise.reject(Vr(this));const n=t?oe(t):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&it(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await wx(this),n=new Ix(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new il("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await yx(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Sr(t)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&ex(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Tg(e){return oe(e)}class uv{constructor(t){this.auth=t,this.observer=null,this.addObserver=S2(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(e,t){const n=pE(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(No(s,t??{}))return r;rr(r,"already-initialized")}return n.initialize({options:t})}function xx(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Sr);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(t){return Jn("not implemented")}_linkToIdToken(t,n){return Jn("not implemented")}_getReauthenticationResolver(t){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(e,t){return sA(e,"POST","/v1/accounts:signInWithIdp",Zc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="http://localhost";class Br extends mA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Br(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Br(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Ls(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ls(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ls(t,n)}buildRequest(){const t={requestUri:Dx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=xm(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Eg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Jc{constructor(){super("facebook.com")}static credential(t){return Br._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ri.credentialFromTaggedObject(t)}static credentialFromError(t){return Ri.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ri.credential(t.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Br._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Qn.credentialFromTaggedObject(t)}static credentialFromError(t){return Qn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Qn.credential(n,i)}catch{return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com";Qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Jc{constructor(){super("github.com")}static credential(t){return Br._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ii.credentialFromTaggedObject(t)}static credentialFromError(t){return Ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ii.credential(t.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Jc{constructor(){super("twitter.com")}static credential(t,n){return Br._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ci.credentialFromTaggedObject(t)}static credentialFromError(t){return Ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(e,t){return sA(e,"POST","/v1/accounts:signUp",Zc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await Tn._fromIdTokenResponse(t,i,r),a=cv(i);return new sr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=cv(i);return new sr({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function cv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(e){var r;if(vn(e.app))return Promise.reject(Vr(e));const t=Tg(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new sr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Vx(t,{returnSecureToken:!0}),i=await sr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends hi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new fc(t,n,i,r)}}function gA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(e,s,t,i):s})}async function Mx(e,t,n=!1){const i=await jo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return sr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(e,t,n=!1){const{auth:i}=e;if(vn(i.app))return Promise.reject(Vr(i));const r="reauthenticate";try{const s=await jo(e,gA(i,r,t,e),n);it(s.idToken,i,"internal-error");const a=vg(s.idToken);it(a,i,"internal-error");const{sub:l}=a;return it(e.uid===l,i,"user-mismatch"),sr._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rr(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(e,t,n=!1){if(vn(e.app))return Promise.reject(Vr(e));const i="signIn",r=await gA(e,i,t),s=await sr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function Px(e,t,n,i){return oe(e).onAuthStateChanged(t,n,i)}function Lx(e){return oe(e).signOut()}const hv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hv,"1"),this.storage.removeItem(hv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=1e3,zx=10;class yA extends pA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Ax()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,zx):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},jx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}yA.type="LOCAL";const Bx=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx extends pA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}qx.type="SESSION";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(e,t){return it(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends mA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ls(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ls(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ls(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Fx(e){return Ux(e.auth,new Ag(e),e.bypassAuthState)}function Gx(e){const{auth:t,user:n}=e;return it(n,t,"internal-error"),kx(n,new Ag(e),e.bypassAuthState)}async function Qx(e){const{auth:t,user:n}=e;return it(n,t,"internal-error"),Mx(n,new Ag(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Fx;case"linkViaPopup":case"linkViaRedirect":return Qx;case"reauthViaPopup":case"reauthViaRedirect":return Gx;default:rr(this.auth,"internal-error")}}resolve(t){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=new dl(2e3,1e4);async function Xx(e,t,n){if(vn(e.app))return Promise.reject(ks(e,"operation-not-supported-in-this-environment"));const i=Tg(e);nA(e,t,Eg);const r=_A(i);return new Mi(i,"signInViaPopup",t,r).executeNotNull()}async function $x(e,t,n){const i=oe(e);nA(i.auth,t,Eg);const r=_A(i.auth);return new Mi(i.auth,"linkViaPopup",t,r,i).executeNotNull()}class Mi extends Yx{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Mi.currentPopupAction&&Mi.currentPopupAction.cancel(),Mi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return it(t,this.auth,"internal-error"),t}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const t=Hx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Kx.get())};t()}}Mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new dl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new dl(5e3,15e3);var fv="@firebase/auth",dv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wx(e){$s(new Pr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;it(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dA(e)},h=new Cx(i,r,s,u);return xx(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),$s(new Pr("auth-internal",t=>{const n=Tg(t.getProvider("auth").getImmediate());return(i=>new Zx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(fv,dv,Jx(e)),Gi(fv,dv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=5*60;s2("authIdTokenMaxAge");Wx("Browser");const eD=()=>v.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[v.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),v.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),v.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),v.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.82l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),v.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),nD=({user:e,subscription:t,onGetSubscriptionClick:n,auth:i})=>{const r=new Qn,s=async()=>{try{i.currentUser&&i.currentUser.isAnonymous?await $x(i.currentUser,r):await Xx(i,r)}catch(u){console.error("Ошибка входа или привязки:",u)}},a=()=>{Lx(i).catch(u=>console.error("Ошибка выхода:",u))},l=t&&new Date(t.expires_at)>new Date;return v.jsxs("div",{className:"p-4 space-y-4",children:[e&&!e.isAnonymous?v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[v.jsx("img",{src:e.photoURL||void 0,alt:"Avatar",className:"w-16 h-16 rounded-full"}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold",children:e.displayName}),v.jsx("p",{className:"text-sm opacity-70",children:e.email})]})]}),v.jsx("button",{onClick:a,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold",children:"Выйти"})]}):v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Войдите в аккаунт"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Чтобы синхронизировать ваши закладки, подписку и прогресс чтения между устройствами."}),v.jsxs("button",{onClick:s,className:"w-full py-2 rounded-lg bg-white text-gray-800 font-bold flex items-center justify-center border border-gray-300 shadow-sm hover:bg-gray-50",children:[v.jsx(eD,{}),"Войти через Google"]})]}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),l?v.jsxs("div",{children:[v.jsx("p",{className:"text-green-500",children:"Активна"}),v.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(t.expires_at).toLocaleDateString()]})]}):v.jsxs("div",{children:[v.jsx("p",{className:"text-red-500",children:"Неактивна"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),v.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]})]})},iD={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},vA=yE(iD),ne=kN(vA),cf=Nx(vA,{persistence:Bx}),TA=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),EA=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 12H5"}),v.jsx("polyline",{points:"12 19 5 12 12 5"})]}),AA=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),rD=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[v.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),sD=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),bg=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),bA=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),SA=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),aD=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),oD=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M4 22h16"}),v.jsx("path",{d:"M7 22V2h10v20"}),v.jsx("path",{d:"M7 12h4"})]}),lD=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m15 18-6-6 6-6"})}),uD=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),cD=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),hD=()=>v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[v.jsx(bg,{className:"animate-pulse-heart text-accent",filled:!0}),v.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),Sg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx(sD,{className:"mx-auto mb-4 text-accent"}),v.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),v.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),v.jsx("div",{className:"space-y-3",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:i.name}),v.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},wg=({onClose:e,onSelectMethod:t,plan:n})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),v.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),v.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),v.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),v.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),qr=({title:e,onBack:t})=>v.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&v.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:v.jsx(EA,{})}),v.jsx("h1",{className:"text-xl font-bold",children:e})]}),Rg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>v.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:v.jsxs("div",{className:"relative transition-all duration-300",children:[v.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:v.jsx(SA,{filled:n.includes(r.id),width:"20",height:"20"})}),v.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),v.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):v.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),fD=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=H.useState(!1),[m,_]=H.useState(null),[x,O]=H.useState("newest"),[V,S]=H.useState(!1),T=H.useRef(null),[R,D]=H.useState(!1),L=i&&new Date(i.expires_at)>new Date,B=H.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);H.useEffect(()=>{T.current&&setTimeout(()=>{T.current&&D(T.current.scrollHeight>T.current.clientHeight)},100)},[e.description]);const E=H.useMemo(()=>{const I=[...a];return x==="newest"?I.reverse():a},[a,x]),y=I=>{!L&&I.isPaid?g(!0):t(I)},A=()=>{if(B){const I=a.find(b=>b.id===B);I&&t(I)}},w=I=>_(I),C=async I=>{var yt;const b=(yt=window.Telegram)==null?void 0:yt.WebApp;if(!b||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),b&&b.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}b.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async me=>{if(!me)return;const q=Ie(ne,"users",s);try{await Ms(q,{pendingSubscription:{...m,method:I,date:new Date().toISOString()}},{merge:!0}),b.openTelegramLink(`https://t.me/${r}?start=${s}`),b.close()}catch(X){console.error("Ошибка записи в Firebase:",X),b.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return v.jsxs("div",{className:"text-text-main",children:[v.jsx(qr,{title:e.title,onBack:h}),v.jsxs("div",{className:"relative h-64",children:[v.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),v.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[v.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),v.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(I=>v.jsx("button",{onClick:()=>n(I),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:I},I))}),v.jsx("div",{ref:T,className:`relative overflow-hidden transition-all duration-500 ${V?"max-h-full":"max-h-24"}`,children:v.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&v.jsx("div",{className:"text-right",children:v.jsx("button",{onClick:()=>S(!V),className:"text-sm font-semibold text-accent mb-4",children:V?"Скрыть":"Читать полностью..."})}),B&&v.jsxs("button",{onClick:A,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",B,")"]}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),v.jsx("button",{onClick:()=>O(I=>I==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),L&&v.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?v.jsx("p",{children:"Загрузка глав..."}):v.jsx("div",{className:"flex flex-col gap-3",children:E.map(I=>{const b=!L&&I.isPaid,yt=B===I.id;return v.jsxs("div",{onClick:()=>y(I),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${b?"opacity-70":""}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[yt&&v.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),v.jsx("p",{className:"font-semibold",children:I.title})]}),b?v.jsx(rD,{}):v.jsx(TA,{})]},I.id)})}),d&&v.jsx(Sg,{onClose:()=>g(!1),onSelectPlan:w}),m&&v.jsx(wg,{onClose:()=>_(null),onSelectMethod:C,plan:m})]})]})},dD=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},wA=gb.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:_,onCommentSubmit:x})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[v.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),v.jsx("span",{children:O(e.timestamp)})]}),u===e.id?v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsx("input",{type:"text",value:h,autoFocus:!0,onChange:V=>d(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),v.jsx("button",{onClick:()=>s(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),v.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):v.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[v.jsx(bg,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),v.jsx("span",{children:e.likeCount||0})]}),v.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),v.jsx("button",{onClick:()=>r(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===e.id&&v.jsxs("form",{onSubmit:V=>x(V,e.id),className:"flex items-center gap-2 mt-2",children:[v.jsx("input",{type:"text",value:m,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),v.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:v.jsx(bA,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&v.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(V=>v.jsx(wA,{comment:V,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:_,onCommentSubmit:x},V.id))})]})}),mD=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g,isUserAdmin:m})=>{const[_,x]=H.useState([]),[O,V]=H.useState(""),[S,T]=H.useState(null),[R,D]=H.useState(""),[L,B]=H.useState(null),[E,y]=H.useState(""),[A,w]=H.useState(0),[C,I]=H.useState(!1),[b,yt]=H.useState(!1),[me,q]=H.useState(!1),[X,Y]=H.useState(!1),[gt,xt]=H.useState(null),[gn,zt]=H.useState(""),[ct,$t]=H.useState(!0),be=h&&new Date(h.expires_at)>new Date,De=H.useMemo(()=>Ie(ne,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);H.useEffect(()=>{const G=yu(De,At=>{var rt;w(((rt=At.data())==null?void 0:rt.likeCount)||0)}),W=FN($_(ne,`chapters_metadata/${t.id}_${e.id}/comments`),GN("timestamp","asc")),Et=yu(W,async At=>{const rt=At.docs.map(bt=>({id:bt.id,...bt.data()}));if(r){const bt=rt.map(async pa=>{const gl=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments/${pa.id}/likes`,r),Wc=await Nd(gl);return{...pa,userHasLiked:Wc.exists()}}),Fe=await Promise.all(bt);x(Fe)}else x(rt)});let Rt=()=>{};if(r){const At=Ie(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);Rt=yu(At,rt=>{I(rt.exists())})}return()=>{G(),Et(),Rt()}},[De,t.id,e.id,r]),H.useEffect(()=>{(async()=>{if($t(!0),zt(""),e.isPaid&&!be){$t(!1),zt(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const W=Ie(ne,"chapter_content",`${t.id}-${e.id}`),Et=await Nd(W);Et.exists()?zt(Et.data().content):zt(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(W){console.error("Ошибка загрузки главы:",W),zt(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{$t(!1)}})()},[t.id,e.id,be]);const Sn=H.useCallback(async(G,W=null)=>{G.preventDefault();const Et=W?E:O;if(!(!Et.trim()||!r))try{await Ms(De,{},{merge:!0});const Rt=$_(ne,`chapters_metadata/${t.id}_${e.id}/comments`),At={userId:r,userName:s||"Аноним",text:Et,timestamp:of(),likeCount:0};W&&(At.replyTo=W),await $N(Rt,At),W?(B(null),y("")):V("")}catch(Rt){console.error("Ошибка добавления комментария:",Rt)}},[r,s,O,E,De,t.id,e.id]),cr=H.useCallback(async G=>{if(!r)return;const W=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G),Et=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments/${G}/likes`,r);x(Rt=>Rt.map(At=>{if(At.id===G){const rt=At.userHasLiked?(At.likeCount||1)-1:(At.likeCount||0)+1;return{...At,userHasLiked:!At.userHasLiked,likeCount:rt}}return At}));try{await iv(ne,async Rt=>{const At=await Rt.get(Et),rt=await Rt.get(W);if(!rt.exists())return;const bt=rt.data().likeCount||0;At.exists()?(Rt.delete(Et),Rt.update(W,{likeCount:Math.max(0,bt-1)})):(Rt.set(Et,{timestamp:of()}),Rt.update(W,{likeCount:bt+1}))})}catch(Rt){console.error("Ошибка при обновлении лайка комментария:",Rt)}},[r,t.id,e.id]),ga=H.useCallback(G=>{G?(T(G.id),D(G.text)):(T(null),D(""))},[]),fi=H.useCallback(async G=>{if(!R.trim())return;const W=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G);await KN(W,{text:R}),T(null),D("")},[R,t.id,e.id]),wn=H.useCallback(async G=>{const W=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G);await XN(W)},[t.id,e.id]),hr=H.useCallback(G=>{B(W=>W===G?null:G),y("")},[]),fr=async()=>{if(!r)return;const G=Ie(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await iv(ne,async W=>{var rt;const Et=await W.get(G),At=((rt=(await W.get(De)).data())==null?void 0:rt.likeCount)||0;Et.exists()?(W.delete(G),W.set(De,{likeCount:Math.max(0,At-1)},{merge:!0})):(W.set(G,{timestamp:of()}),W.set(De,{likeCount:At+1},{merge:!0}))})}catch(W){console.error("Ошибка при обновлении лайка:",W)}},jn=G=>{G&&(!be&&G.isPaid?(yt(!1),Y(!0)):(l(G),yt(!1)))},dr=G=>{xt(G),Y(!1)},$r=async G=>{var Et;const W=(Et=window.Telegram)==null?void 0:Et.WebApp;W&&r&&gt&&W.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Rt=>{if(Rt){const At=Ie(ne,"users",r);try{await Ms(At,{pendingSubscription:{...gt,method:G,date:new Date().toISOString()}},{merge:!0}),W.openTelegramLink(`https://t.me/${d}?start=${r}`),W.close()}catch(rt){console.error("Ошибка записи в Firebase:",rt),W.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},tt=u.findIndex(G=>G.id===e.id),ht=u[tt-1],Tt=u[tt+1],pn=G=>window.marked?`<div class="prose">${window.marked.parse(G)}</div>`:G;return v.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[v.jsx(qr,{title:t.title,onBack:g}),v.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[v.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),v.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:ct?"<p>Загрузка...</p>":pn(gn)}}),v.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),v.jsxs("div",{className:"border-t border-border-color pt-8",children:[v.jsx("div",{className:"flex items-center gap-4 mb-8",children:v.jsxs("button",{onClick:fr,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[v.jsx(bg,{filled:C,className:C?"text-accent":""}),v.jsx("span",{className:"font-bold text-lg",children:A})]})}),v.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),v.jsx("div",{className:"space-y-4 mb-6",children:_.length>0?dD(_).map(G=>v.jsx(wA,{comment:G,onReply:hr,onLike:cr,onEdit:ga,onDelete:wn,onUpdate:fi,isUserAdmin:m,currentUserId:r,editingCommentId:S,editingText:R,setEditingText:D,replyingTo:L,replyText:E,setReplyText:y,onCommentSubmit:Sn},G.id)):v.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})}),v.jsxs("form",{onSubmit:G=>Sn(G,null),className:"flex items-center gap-2",children:[v.jsx("input",{type:"text",value:O,onChange:G=>V(G.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),v.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:v.jsx(bA,{className:"w-5 h-5"})})]})]})]}),v.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[v.jsx("button",{onClick:()=>jn(ht),disabled:!ht,className:"p-2 disabled:opacity-50",children:v.jsx(EA,{})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>yt(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),v.jsx("button",{onClick:()=>q(!0),className:"p-2 rounded-lg bg-background",children:v.jsx(cD,{})})]}),v.jsx("button",{onClick:()=>jn(Tt),disabled:!Tt,className:"p-2 disabled:opacity-50",children:v.jsx(TA,{className:"opacity-100"})})]}),b&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>yt(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),v.jsx("div",{className:"overflow-y-auto",children:v.jsx("div",{className:"flex flex-col gap-2",children:u.map(G=>v.jsx("button",{onClick:()=>jn(G),className:`p-2 text-left rounded-md ${G.id===e.id?"bg-accent text-white":"bg-background"}`,children:G.title},G.id))})})]})}),me&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>q(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{children:"Размер текста"}),v.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[v.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),v.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),X&&v.jsx(Sg,{onClose:()=>Y(!1),onSelectPlan:dr}),gt&&v.jsx(wg,{onClose:()=>xt(null),onSelectMethod:$r,plan:gt})]})},gD=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=H.useState(""),a=H.useMemo(()=>r?e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())):[],[e,r]);return v.jsxs("div",{children:[v.jsx(qr,{title:"Поиск"}),v.jsxs("div",{className:"p-4",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:"absolute left-3 top-1-2 -translate-y-1/2",children:v.jsx(AA,{className:"text-text-main opacity-50"})}),v.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),v.jsx(Rg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},pD=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsxs("div",{children:[v.jsx(qr,{title:"Закладки"}),v.jsx(Rg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),yD=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i,auth:r})=>{const s=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(a=>console.error("Не удалось скопировать UID: ",a))};return v.jsxs("div",{children:[v.jsx(qr,{title:"Профиль"}),v.jsx(nD,{user:e,subscription:t,onGetSubscriptionClick:n,auth:r}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для администрирования"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для назначения прав администратора через Telegram-бота."}),v.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:v.jsx("code",{children:i||"Загрузка..."})}),v.jsx("button",{onClick:s,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})},_D=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:oD},{id:"search",label:"Поиск",icon:AA},{id:"bookmarks",label:"Закладки",icon:SA},{id:"profile",label:"Профиль",icon:aD}];return v.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:v.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[v.jsx(i.icon,{filled:e===i.id}),v.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},vD=({onReadMore:e})=>{const[t,n]=H.useState([]),[i,r]=H.useState(0);H.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[v.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-bold text-text-main",children:l.title}),v.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),v.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:v.jsx(lD,{className:"w-5 h-5"})}),v.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:v.jsx(uD,{className:"w-5 h-5"})})]})]})})},TD=({newsItem:e,onClose:t})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:v.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),v.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),v.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function ED(){const[e,t]=H.useState(16),[n,i]=H.useState("font-sans"),[r,s]=H.useState("list"),[a,l]=H.useState("library"),[u,h]=H.useState([]),[d,g]=H.useState(null),[m,_]=H.useState(null),[x,O]=H.useState(null),[V,S]=H.useState(null),[T,R]=H.useState(null),[D,L]=H.useState(!0),[B,E]=H.useState(!1),[y,A]=H.useState([]),[w,C]=H.useState(!0),[I,b]=H.useState(null),[yt,me]=H.useState([]),[q,X]=H.useState(!1),[Y,gt]=H.useState(null),[xt,gn]=H.useState(null),zt="tenebrisverbot",ct=T==null?void 0:T.uid,$t=H.useCallback(async tt=>{if(ct){const ht=Ie(ne,"users",ct);try{await Ms(ht,tt,{merge:!0})}catch(Tt){console.error("Не удалось обновить данные пользователя:",Tt)}}},[ct]),be=H.useCallback(tt=>{t(ht=>{const Tt=Math.max(12,Math.min(32,ht+tt));return $t({settings:{fontSize:Tt,fontClass:n}}),Tt})},[n,$t]);H.useEffect(()=>{L(!0),fetch("/tene/data/novels.json").then(Tt=>Tt.json()).then(Tt=>h(Tt.novels)).catch(Tt=>console.error("Ошибка загрузки новелл:",Tt));let tt=()=>{};const ht=Px(cf,async Tt=>{var pn,G,W,Et;if(tt(),Tt){R(Tt);const Rt=await Tt.getIdTokenResult();E(!!Rt.claims.admin);const At=Ie(ne,"users",Tt.uid);tt=yu(At,bt=>{if(bt.exists()){const Fe=bt.data();S(Fe.subscription||null),b(Fe.lastRead||null),me(Fe.bookmarks||[]),Fe.settings&&(t(Fe.settings.fontSize||16),i(Fe.settings.fontClass||"font-sans"))}else S(null),b(null),me([])});const rt=(pn=window.Telegram)==null?void 0:pn.WebApp;if(rt&&!Tt.isAnonymous){const bt=(Et=(W=(G=rt.initDataUnsafe)==null?void 0:G.user)==null?void 0:W.id)==null?void 0:Et.toString();bt&&await Ms(At,{telegramId:bt},{merge:!0})}}else R(null),await Ox(cf);L(!1)});return()=>{ht(),tt()}},[]),H.useEffect(()=>{if(!d){A([]);return}(async()=>{C(!0);try{const ht=Ie(ne,"chapter_info",d.id.toString()),Tt=await Nd(ht);if(Tt.exists()){const G=Tt.data().chapters||{},W=Object.keys(G).map(Et=>({id:parseInt(Et),title:`Глава ${Et}`,isPaid:G[Et].isPaid||!1})).sort((Et,Rt)=>Et.id-Rt.id);A(W)}else console.log("Документ с главами не найден в chapter_info!"),A([])}catch(ht){console.error("Ошибка загрузки глав из Firebase:",ht),A([])}finally{C(!1)}})()},[d]);const De=H.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),O(null))},[r]);H.useEffect(()=>{var ht;const tt=(ht=window.Telegram)==null?void 0:ht.WebApp;if(tt)return tt.ready(),tt.expand(),tt.onEvent("backButtonClicked",De),r==="list"?tt.BackButton.hide():tt.BackButton.show(),()=>tt.offEvent("backButtonClicked",De)},[r,De]),H.useEffect(()=>{var ht;const tt=(ht=window.Telegram)==null?void 0:ht.WebApp;tt&&(tt.setHeaderColor("#FFFFFF"),tt.setBackgroundColor("#F5F1ED"))},[]);const Sn=H.useCallback(async tt=>{if(_(tt),s("reader"),ct&&d){const ht={...I||{},[d.id]:{novelId:d.id,chapterId:tt.id,timestamp:new Date().toISOString()}};b(ht),await $t({lastRead:ht})}},[ct,d,I,$t]),cr=tt=>{g(tt),s("details")},ga=tt=>{O(tt),s("list"),l("library")},fi=()=>{O(null)},wn=H.useCallback(async tt=>{const ht=yt.includes(tt)?yt.filter(Tt=>Tt!==tt):[...yt,tt];me(ht),await $t({bookmarks:ht})},[yt,$t]),hr=H.useMemo(()=>u.filter(tt=>yt.includes(tt.id)),[u,yt]),fr=()=>{X(!0)},jn=tt=>{gt(tt),X(!1)},dr=async tt=>{var Tt;const ht=(Tt=window.Telegram)==null?void 0:Tt.WebApp;if(!ht||!ct||!Y){console.error("Telegram Web App, userId, or selectedPlan is not available."),ht&&ht.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}ht.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async pn=>{if(!pn)return;const G=Ie(ne,"users",ct);try{await Ms(G,{pendingSubscription:{...Y,method:tt,date:new Date().toISOString()}},{merge:!0}),ht.openTelegramLink(`https://t.me/${zt}?start=${ct}`),ht.close()}catch(W){console.error("Ошибка записи в Firebase:",W),ht.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(D)return v.jsx(hD,{});const $r=()=>{if(r==="details")return v.jsx(fD,{novel:d,onSelectChapter:Sn,onGenreSelect:ga,subscription:V,botUsername:zt,userId:ct,chapters:y,isLoadingChapters:w,lastReadData:I,onBack:De});if(r==="reader")return v.jsx(mD,{chapter:m,novel:d,fontSize:e,onFontSizeChange:be,userId:ct,userName:(T==null?void 0:T.displayName)||"Аноним",currentFontClass:n,onSelectChapter:Sn,allChapters:y,subscription:V,botUsername:zt,onBack:De,isUserAdmin:B});switch(a){case"library":return v.jsxs(v.Fragment,{children:[v.jsx(qr,{title:"Библиотека"}),v.jsx(vD,{onReadMore:gn}),x&&v.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("span",{className:"opacity-70",children:"Жанр:"}),v.jsx("strong",{className:"ml-2",children:x})]}),v.jsx("button",{onClick:fi,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),v.jsx(Rg,{novels:u.filter(tt=>!x||tt.genres.includes(x)),onSelectNovel:cr,bookmarks:yt,onToggleBookmark:wn})]});case"search":return v.jsx(gD,{novels:u,onSelectNovel:cr,bookmarks:yt,onToggleBookmark:wn});case"bookmarks":return v.jsx(pD,{novels:hr,onSelectNovel:cr,bookmarks:yt,onToggleBookmark:wn});case"profile":return v.jsx(yD,{user:T,subscription:V,onGetSubscriptionClick:fr,userId:ct,auth:cf});default:return v.jsx(qr,{title:"Библиотека"})}};return v.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${B?"":"no-select"}`,children:[v.jsx("div",{className:"pb-20",children:$r()}),r==="list"&&v.jsx(_D,{activeTab:a,setActiveTab:l}),q&&v.jsx(Sg,{onClose:()=>X(!1),onSelectPlan:jn}),Y&&v.jsx(wg,{onClose:()=>gt(null),onSelectMethod:dr,plan:Y}),xt&&v.jsx(TD,{newsItem:xt,onClose:()=>gn(null)})]})}Kw.createRoot(document.getElementById("root")).render(v.jsx(H.StrictMode,{children:v.jsx(ED,{})}));
