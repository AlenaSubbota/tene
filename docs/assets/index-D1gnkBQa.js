(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function aw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rE={exports:{}},Hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow=Symbol.for("react.transitional.element"),lw=Symbol.for("react.fragment");function aE(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:ow,type:e,key:i,ref:t!==void 0?t:null,props:n}}Hc.Fragment=lw;Hc.jsx=aE;Hc.jsxs=aE;rE.exports=Hc;var f=rE.exports,oE={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=Symbol.for("react.transitional.element"),uw=Symbol.for("react.portal"),cw=Symbol.for("react.fragment"),hw=Symbol.for("react.strict_mode"),fw=Symbol.for("react.profiler"),dw=Symbol.for("react.consumer"),mw=Symbol.for("react.context"),pw=Symbol.for("react.forward_ref"),gw=Symbol.for("react.suspense"),yw=Symbol.for("react.memo"),lE=Symbol.for("react.lazy"),ty=Symbol.iterator;function _w(e){return e===null||typeof e!="object"?null:(e=ty&&e[ty]||e["@@iterator"],typeof e=="function"?e:null)}var uE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cE=Object.assign,hE={};function Aa(e,t,n){this.props=e,this.context=t,this.refs=hE,this.updater=n||uE}Aa.prototype.isReactComponent={};Aa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Aa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fE(){}fE.prototype=Aa.prototype;function am(e,t,n){this.props=e,this.context=t,this.refs=hE,this.updater=n||uE}var om=am.prototype=new fE;om.constructor=am;cE(om,Aa.prototype);om.isPureReactComponent=!0;var ey=Array.isArray,Ut={H:null,A:null,T:null,S:null,V:null},dE=Object.prototype.hasOwnProperty;function lm(e,t,n,i,s,r){return n=r.ref,{$$typeof:rm,type:e,key:t,ref:n!==void 0?n:null,props:r}}function vw(e,t){return lm(e.type,t,void 0,void 0,void 0,e.props)}function um(e){return typeof e=="object"&&e!==null&&e.$$typeof===rm}function Ew(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ny=/\/+/g;function Gh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ew(""+e.key):t.toString(36)}function iy(){}function Tw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(iy,iy):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function br(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case rm:case uw:a=!0;break;case lE:return a=e._init,br(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+Gh(e,0):i,ey(s)?(n="",a!=null&&(n=a.replace(ny,"$&/")+"/"),br(s,t,n,"",function(h){return h})):s!=null&&(um(s)&&(s=vw(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(ny,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(ey(e))for(var u=0;u<e.length;u++)i=e[u],r=l+Gh(i,u),a+=br(i,t,n,r,s);else if(u=_w(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+Gh(i,u++),a+=br(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return br(Tw(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function nu(e,t,n){if(e==null)return e;var i=[],s=0;return br(e,i,"","",function(r){return t.call(n,r,s++)}),i}function bw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sy=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Aw(){}rt.Children={map:nu,forEach:function(e,t,n){nu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return nu(e,function(){t++}),t},toArray:function(e){return nu(e,function(t){return t})||[]},only:function(e){if(!um(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=Aa;rt.Fragment=cw;rt.Profiler=fw;rt.PureComponent=am;rt.StrictMode=hw;rt.Suspense=gw;rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut;rt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ut.H.useMemoCache(e)}};rt.cache=function(e){return function(){return e.apply(null,arguments)}};rt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=cE({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!dE.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return lm(e.type,s,void 0,void 0,r,i)};rt.createContext=function(e){return e={$$typeof:mw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:dw,_context:e},e};rt.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)dE.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return lm(e,r,void 0,void 0,null,s)};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:pw,render:e}};rt.isValidElement=um;rt.lazy=function(e){return{$$typeof:lE,_payload:{_status:-1,_result:e},_init:bw}};rt.memo=function(e,t){return{$$typeof:yw,type:e,compare:t===void 0?null:t}};rt.startTransition=function(e){var t=Ut.T,n={};Ut.T=n;try{var i=e(),s=Ut.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Aw,sy)}catch(r){sy(r)}finally{Ut.T=t}};rt.unstable_useCacheRefresh=function(){return Ut.H.useCacheRefresh()};rt.use=function(e){return Ut.H.use(e)};rt.useActionState=function(e,t,n){return Ut.H.useActionState(e,t,n)};rt.useCallback=function(e,t){return Ut.H.useCallback(e,t)};rt.useContext=function(e){return Ut.H.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e,t){return Ut.H.useDeferredValue(e,t)};rt.useEffect=function(e,t,n){var i=Ut.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};rt.useId=function(){return Ut.H.useId()};rt.useImperativeHandle=function(e,t,n){return Ut.H.useImperativeHandle(e,t,n)};rt.useInsertionEffect=function(e,t){return Ut.H.useInsertionEffect(e,t)};rt.useLayoutEffect=function(e,t){return Ut.H.useLayoutEffect(e,t)};rt.useMemo=function(e,t){return Ut.H.useMemo(e,t)};rt.useOptimistic=function(e,t){return Ut.H.useOptimistic(e,t)};rt.useReducer=function(e,t,n){return Ut.H.useReducer(e,t,n)};rt.useRef=function(e){return Ut.H.useRef(e)};rt.useState=function(e){return Ut.H.useState(e)};rt.useSyncExternalStore=function(e,t,n){return Ut.H.useSyncExternalStore(e,t,n)};rt.useTransition=function(){return Ut.H.useTransition()};rt.version="19.1.1";oE.exports=rt;var U=oE.exports;const Sw=aw(U);var mE={exports:{}},Fc={},pE={exports:{}},gE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,K){var Y=z.length;z.push(K);t:for(;0<Y;){var vt=Y-1>>>1,mt=z[vt];if(0<s(mt,K))z[vt]=K,z[Y]=mt,Y=vt;else break t}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var K=z[0],Y=z.pop();if(Y!==K){z[0]=Y;t:for(var vt=0,mt=z.length,hn=mt>>>1;vt<hn;){var se=2*(vt+1)-1,Ot=z[se],qe=se+1,ge=z[qe];if(0>s(Ot,Y))qe<mt&&0>s(ge,Ot)?(z[vt]=ge,z[qe]=Y,vt=qe):(z[vt]=Ot,z[se]=Y,vt=se);else if(qe<mt&&0>s(ge,Y))z[vt]=ge,z[qe]=Y,vt=qe;else break t}}return K}function s(z,K){var Y=z.sortIndex-K.sortIndex;return Y!==0?Y:z.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,g=null,p=3,_=!1,I=!1,O=!1,V=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var K=n(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=z)i(h),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(h)}}function L(z){if(O=!1,D(z),!I)if(n(u)!==null)I=!0,F||(F=!0,C());else{var K=n(h);K!==null&&Dt(L,K.startTime-z)}}var F=!1,b=-1,v=5,A=-1;function w(){return V?!0:!(e.unstable_now()-A<v)}function x(){if(V=!1,F){var z=e.unstable_now();A=z;var K=!0;try{t:{I=!1,O&&(O=!1,E(b),b=-1),_=!0;var Y=p;try{e:{for(D(z),g=n(u);g!==null&&!(g.expirationTime>z&&w());){var vt=g.callback;if(typeof vt=="function"){g.callback=null,p=g.priorityLevel;var mt=vt(g.expirationTime<=z);if(z=e.unstable_now(),typeof mt=="function"){g.callback=mt,D(z),K=!0;break e}g===n(u)&&i(u),D(z)}else i(u);g=n(u)}if(g!==null)K=!0;else{var hn=n(h);hn!==null&&Dt(L,hn.startTime-z),K=!1}}break t}finally{g=null,p=Y,_=!1}K=void 0}}finally{K?C():F=!1}}}var C;if(typeof R=="function")C=function(){R(x)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ft=T.port2;T.port1.onmessage=x,C=function(){ft.postMessage(null)}}else C=function(){S(x,0)};function Dt(z,K){b=S(function(){z(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(z){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var Y=p;p=K;try{return z()}finally{p=Y}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=p;p=z;try{return K()}finally{p=Y}},e.unstable_scheduleCallback=function(z,K,Y){var vt=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?vt+Y:vt):Y=vt,z){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=Y+mt,z={id:m++,callback:K,priorityLevel:z,startTime:Y,expirationTime:mt,sortIndex:-1},Y>vt?(z.sortIndex=Y,t(h,z),n(u)===null&&z===n(h)&&(O?(E(b),b=-1):O=!0,Dt(L,Y-vt))):(z.sortIndex=mt,t(u,z),I||_||(I=!0,F||(F=!0,C()))),z},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(z){var K=p;return function(){var Y=p;p=K;try{return z.apply(this,arguments)}finally{p=Y}}}})(gE);pE.exports=gE;var ww=pE.exports,yE={exports:{}},Be={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=U;function _E(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ni(){}var Ue={d:{f:Ni,r:function(){throw Error(_E(522))},D:Ni,C:Ni,L:Ni,m:Ni,X:Ni,S:Ni,M:Ni},p:0,findDOMNode:null},xw=Symbol.for("react.portal");function Iw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var go=Rw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Gc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Be.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue;Be.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(_E(299));return Iw(e,t,null,n)};Be.flushSync=function(e){var t=go.T,n=Ue.p;try{if(go.T=null,Ue.p=2,e)return e()}finally{go.T=t,Ue.p=n,Ue.d.f()}};Be.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ue.d.C(e,t))};Be.prefetchDNS=function(e){typeof e=="string"&&Ue.d.D(e)};Be.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Gc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ue.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Ue.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Be.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Gc(t.as,t.crossOrigin);Ue.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ue.d.M(e)};Be.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Gc(n,t.crossOrigin);Ue.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Be.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Gc(t.as,t.crossOrigin);Ue.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ue.d.m(e)};Be.requestFormReset=function(e){Ue.d.r(e)};Be.unstable_batchedUpdates=function(e,t){return e(t)};Be.useFormState=function(e,t,n){return go.H.useFormState(e,t,n)};Be.useFormStatus=function(){return go.H.useHostTransitionStatus()};Be.version="19.1.1";function vE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vE)}catch(e){console.error(e)}}vE(),yE.exports=Be;var Cw=yE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue=ww,EE=U,Nw=Cw;function j(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function TE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ul(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ry(e){if(ul(e)!==e)throw Error(j(188))}function Dw(e){var t=e.alternate;if(!t){if(t=ul(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return ry(s),e;if(r===i)return ry(s),t;r=r.sibling}throw Error(j(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==i)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function AE(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=AE(e),t!==null)return t;e=e.sibling}return null}var jt=Object.assign,Ow=Symbol.for("react.element"),iu=Symbol.for("react.transitional.element"),ro=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),SE=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),wE=Symbol.for("react.consumer"),ri=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),zf=Symbol.for("react.suspense_list"),hm=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),Bf=Symbol.for("react.activity"),Mw=Symbol.for("react.memo_cache_sentinel"),ay=Symbol.iterator;function Za(e){return e===null||typeof e!="object"?null:(e=ay&&e[ay]||e["@@iterator"],typeof e=="function"?e:null)}var kw=Symbol.for("react.client.reference");function qf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===kw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nr:return"Fragment";case Lf:return"Profiler";case SE:return"StrictMode";case Uf:return"Suspense";case zf:return"SuspenseList";case Bf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ro:return"Portal";case ri:return(e.displayName||"Context")+".Provider";case wE:return(e._context.displayName||"Context")+".Consumer";case cm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hm:return t=e.displayName||null,t!==null?t:qf(e.type)||"Memo";case Mi:t=e._payload,e=e._init;try{return qf(e(t))}catch{}}return null}var ao=Array.isArray,nt=EE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt=Nw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bs={pending:!1,data:null,method:null,action:null},Hf=[],Dr=-1;function Yn(e){return{current:e}}function pe(e){0>Dr||(e.current=Hf[Dr],Hf[Dr]=null,Dr--)}function zt(e,t){Dr++,Hf[Dr]=e.current,e.current=t}var Pn=Yn(null),jo=Yn(null),Xi=Yn(null),Ku=Yn(null);function Yu(e,t){switch(zt(Xi,t),zt(jo,e),zt(Pn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?h_(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=h_(t),e=q0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}pe(Pn),zt(Pn,e)}function ia(){pe(Pn),pe(jo),pe(Xi)}function Ff(e){e.memoizedState!==null&&zt(Ku,e);var t=Pn.current,n=q0(t,e.type);t!==n&&(zt(jo,e),zt(Pn,n))}function $u(e){jo.current===e&&(pe(Pn),pe(jo)),Ku.current===e&&(pe(Ku),Ko._currentValue=Bs)}var Gf=Object.prototype.hasOwnProperty,fm=ue.unstable_scheduleCallback,Qh=ue.unstable_cancelCallback,Pw=ue.unstable_shouldYield,jw=ue.unstable_requestPaint,jn=ue.unstable_now,Lw=ue.unstable_getCurrentPriorityLevel,RE=ue.unstable_ImmediatePriority,xE=ue.unstable_UserBlockingPriority,Xu=ue.unstable_NormalPriority,Uw=ue.unstable_LowPriority,IE=ue.unstable_IdlePriority,zw=ue.log,Bw=ue.unstable_setDisableYieldValue,cl=null,rn=null;function Fi(e){if(typeof zw=="function"&&Bw(e),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(cl,e)}catch{}}var an=Math.clz32?Math.clz32:Fw,qw=Math.log,Hw=Math.LN2;function Fw(e){return e>>>=0,e===0?32:31-(qw(e)/Hw|0)|0}var su=256,ru=4194304;function Ms(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Ms(i):(a&=l,a!==0?s=Ms(a):n||(n=l&~e,n!==0&&(s=Ms(n))))):(l=i&~r,l!==0?s=Ms(l):a!==0?s=Ms(a):n||(n=i&~e,n!==0&&(s=Ms(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function hl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CE(){var e=su;return su<<=1,!(su&4194048)&&(su=256),e}function NE(){var e=ru;return ru<<=1,!(ru&62914560)&&(ru=4194304),e}function Kh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qw(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var m=31-an(n),g=1<<m;l[m]=0,u[m]=-1;var p=h[m];if(p!==null)for(h[m]=null,m=0;m<p.length;m++){var _=p[m];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&DE(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function DE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-an(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function OE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-an(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function dm(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function VE(){var e=bt.p;return e!==0?e:(e=window.event,e===void 0?32:W0(e.type))}function Kw(e,t){var n=bt.p;try{return bt.p=e,t()}finally{bt.p=n}}var vs=Math.random().toString(36).slice(2),De="__reactFiber$"+vs,Ke="__reactProps$"+vs,Sa="__reactContainer$"+vs,Qf="__reactEvents$"+vs,Yw="__reactListeners$"+vs,$w="__reactHandles$"+vs,oy="__reactResources$"+vs,dl="__reactMarker$"+vs;function pm(e){delete e[De],delete e[Ke],delete e[Qf],delete e[Yw],delete e[$w]}function Or(e){var t=e[De];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sa]||n[De]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=m_(e);e!==null;){if(n=e[De])return n;e=m_(e)}return t}e=n,n=e.parentNode}return null}function wa(e){if(e=e[De]||e[Sa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function oo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(j(33))}function Fr(e){var t=e[oy];return t||(t=e[oy]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function fe(e){e[dl]=!0}var ME=new Set,kE={};function rr(e,t){sa(e,t),sa(e+"Capture",t)}function sa(e,t){for(kE[e]=t,e=0;e<t.length;e++)ME.add(t[e])}var Xw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ly={},uy={};function Zw(e){return Gf.call(uy,e)?!0:Gf.call(ly,e)?!1:Xw.test(e)?uy[e]=!0:(ly[e]=!0,!1)}function Su(e,t,n){if(Zw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function au(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ei(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Yh,cy;function Ar(e){if(Yh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yh=t&&t[1]||"",cy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yh+e+cy}var $h=!1;function Xh(e,t){if(!e||$h)return"";$h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var p=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){p=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){p=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&p&&typeof _.stack=="string")return[_.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var m=`
`+u[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=s);break}}}finally{$h=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ar(n):""}function Ww(e){switch(e.tag){case 26:case 27:case 5:return Ar(e.type);case 16:return Ar("Lazy");case 13:return Ar("Suspense");case 19:return Ar("SuspenseList");case 0:case 15:return Xh(e.type,!1);case 11:return Xh(e.type.render,!1);case 1:return Xh(e.type,!0);case 31:return Ar("Activity");default:return""}}function hy(e){try{var t="";do t+=Ww(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jw(e){var t=PE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zu(e){e._valueTracker||(e._valueTracker=Jw(e))}function jE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=PE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var t1=/[\n"\\]/g;function gn(e){return e.replace(t1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Kf(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+dn(t)):e.value!==""+dn(t)&&(e.value=""+dn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Yf(e,a,dn(t)):n!=null?Yf(e,a,dn(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+dn(l):e.removeAttribute("name")}function LE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+dn(n):"",t=t!=null?""+dn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Yf(e,t,n){t==="number"&&Wu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Gr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+dn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function UE(e,t,n){if(t!=null&&(t=""+dn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+dn(n):""}function zE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(j(92));if(ao(i)){if(1<i.length)throw Error(j(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=dn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ra(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var e1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fy(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||e1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function BE(e,t,n){if(t!=null&&typeof t!="object")throw Error(j(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&fy(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&fy(e,r,t[r])}function gm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(e){return i1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var $f=null;function ym(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vr=null,Qr=null;function dy(e){var t=wa(e);if(t&&(e=t.stateNode)){var n=e[Ke]||null;t:switch(e=t.stateNode,t.type){case"input":if(Kf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Ke]||null;if(!s)throw Error(j(90));Kf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&jE(i)}break t;case"textarea":UE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}}}var Zh=!1;function qE(e,t,n){if(Zh)return e(t,n);Zh=!0;try{var i=e(t);return i}finally{if(Zh=!1,(Vr!==null||Qr!==null)&&(nh(),Vr&&(t=Vr,e=Qr,Qr=Vr=null,dy(t),e)))for(t=0;t<e.length;t++)dy(e[t])}}function Lo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ke]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xf=!1;if(pi)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){Xf=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{Xf=!1}var Gi=null,_m=null,Ru=null;function HE(){if(Ru)return Ru;var e,t=_m,n=t.length,i,s="value"in Gi?Gi.value:Gi.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return Ru=s.slice(e,1<i?1-i:void 0)}function xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ou(){return!0}function my(){return!1}function Ye(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ou:my,this.isPropagationStopped=my,this}return jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),t}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Ye(ar),ml=jt({},ar,{view:0,detail:0}),s1=Ye(ml),Wh,Jh,Ja,Yc=jt({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ja&&(Ja&&e.type==="mousemove"?(Wh=e.screenX-Ja.screenX,Jh=e.screenY-Ja.screenY):Jh=Wh=0,Ja=e),Wh)},movementY:function(e){return"movementY"in e?e.movementY:Jh}}),py=Ye(Yc),r1=jt({},Yc,{dataTransfer:0}),a1=Ye(r1),o1=jt({},ml,{relatedTarget:0}),tf=Ye(o1),l1=jt({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=Ye(l1),c1=jt({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h1=Ye(c1),f1=jt({},ar,{data:0}),gy=Ye(f1),d1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=p1[e])?!!t[e]:!1}function vm(){return g1}var y1=jt({},ml,{key:function(e){if(e.key){var t=d1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?m1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vm,charCode:function(e){return e.type==="keypress"?xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_1=Ye(y1),v1=jt({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yy=Ye(v1),E1=jt({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vm}),T1=Ye(E1),b1=jt({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),A1=Ye(b1),S1=jt({},Yc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=Ye(S1),R1=jt({},ar,{newState:0,oldState:0}),x1=Ye(R1),I1=[9,13,27,32],Em=pi&&"CompositionEvent"in window,yo=null;pi&&"documentMode"in document&&(yo=document.documentMode);var C1=pi&&"TextEvent"in window&&!yo,FE=pi&&(!Em||yo&&8<yo&&11>=yo),_y=" ",vy=!1;function GE(e,t){switch(e){case"keyup":return I1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function N1(e,t){switch(e){case"compositionend":return QE(t);case"keypress":return t.which!==32?null:(vy=!0,_y);case"textInput":return e=t.data,e===_y&&vy?null:e;default:return null}}function D1(e,t){if(Mr)return e==="compositionend"||!Em&&GE(e,t)?(e=HE(),Ru=_m=Gi=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return FE&&t.locale!=="ko"?null:t.data;default:return null}}var O1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O1[e.type]:t==="textarea"}function KE(e,t,n,i){Vr?Qr?Qr.push(i):Qr=[i]:Vr=i,t=gc(t,"onChange"),0<t.length&&(n=new Kc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var _o=null,Uo=null;function V1(e){U0(e,0)}function $c(e){var t=oo(e);if(jE(t))return e}function Ty(e,t){if(e==="change")return t}var YE=!1;if(pi){var ef;if(pi){var nf="oninput"in document;if(!nf){var by=document.createElement("div");by.setAttribute("oninput","return;"),nf=typeof by.oninput=="function"}ef=nf}else ef=!1;YE=ef&&(!document.documentMode||9<document.documentMode)}function Ay(){_o&&(_o.detachEvent("onpropertychange",$E),Uo=_o=null)}function $E(e){if(e.propertyName==="value"&&$c(Uo)){var t=[];KE(t,Uo,e,ym(e)),qE(V1,t)}}function M1(e,t,n){e==="focusin"?(Ay(),_o=t,Uo=n,_o.attachEvent("onpropertychange",$E)):e==="focusout"&&Ay()}function k1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $c(Uo)}function P1(e,t){if(e==="click")return $c(t)}function j1(e,t){if(e==="input"||e==="change")return $c(t)}function L1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:L1;function zo(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Gf.call(t,s)||!cn(e[s],t[s]))return!1}return!0}function Sy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wy(e,t){var n=Sy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Sy(n)}}function XE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?XE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wu(e.document)}return t}function Tm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var U1=pi&&"documentMode"in document&&11>=document.documentMode,kr=null,Zf=null,vo=null,Wf=!1;function Ry(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wf||kr==null||kr!==Wu(i)||(i=kr,"selectionStart"in i&&Tm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),vo&&zo(vo,i)||(vo=i,i=gc(Zf,"onSelect"),0<i.length&&(t=new Kc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=kr)))}function Vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},sf={},WE={};pi&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function or(e){if(sf[e])return sf[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in WE)return sf[e]=t[n];return e}var JE=or("animationend"),tT=or("animationiteration"),eT=or("animationstart"),z1=or("transitionrun"),B1=or("transitionstart"),q1=or("transitioncancel"),nT=or("transitionend"),iT=new Map,Jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jf.push("scrollEnd");function Cn(e,t){iT.set(e,t),rr(t,[e])}var xy=new WeakMap;function yn(e,t){if(typeof e=="object"&&e!==null){var n=xy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:hy(t)},xy.set(e,t),t)}return{value:e,source:t,stack:hy(t)}}var fn=[],jr=0,bm=0;function Xc(){for(var e=jr,t=bm=jr=0;t<e;){var n=fn[t];fn[t++]=null;var i=fn[t];fn[t++]=null;var s=fn[t];fn[t++]=null;var r=fn[t];if(fn[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&sT(n,s,r)}}function Zc(e,t,n,i){fn[jr++]=e,fn[jr++]=t,fn[jr++]=n,fn[jr++]=i,bm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Am(e,t,n,i){return Zc(e,t,n,i),Ju(e)}function Ra(e,t){return Zc(e,null,null,t),Ju(e)}function sT(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-an(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function Ju(e){if(50<Co)throw Co=0,Ed=null,Error(j(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Lr={};function H1(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,i){return new H1(e,t,n,i)}function Sm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fi(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function rT(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Iu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")Sm(e)&&(a=1);else if(typeof e=="string")a=GR(e,n,Pn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Bf:return e=en(31,n,t,s),e.elementType=Bf,e.lanes=r,e;case Nr:return qs(n.children,s,r,t);case SE:a=8,s|=24;break;case Lf:return e=en(12,n,t,s|2),e.elementType=Lf,e.lanes=r,e;case Uf:return e=en(13,n,t,s),e.elementType=Uf,e.lanes=r,e;case zf:return e=en(19,n,t,s),e.elementType=zf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vw:case ri:a=10;break t;case wE:a=9;break t;case cm:a=11;break t;case hm:a=14;break t;case Mi:a=16,i=null;break t}a=29,n=Error(j(130,e===null?"null":typeof e,"")),i=null}return t=en(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function qs(e,t,n,i){return e=en(7,e,i,t),e.lanes=n,e}function rf(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function af(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ur=[],zr=0,tc=null,ec=0,mn=[],pn=0,Hs=null,ai=1,oi="";function ks(e,t){Ur[zr++]=ec,Ur[zr++]=tc,tc=e,ec=t}function aT(e,t,n){mn[pn++]=ai,mn[pn++]=oi,mn[pn++]=Hs,Hs=e;var i=ai;e=oi;var s=32-an(i)-1;i&=~(1<<s),n+=1;var r=32-an(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ai=1<<32-an(t)+s|n<<s|i,oi=r+e}else ai=1<<r|n<<s|i,oi=e}function wm(e){e.return!==null&&(ks(e,1),aT(e,1,0))}function Rm(e){for(;e===tc;)tc=Ur[--zr],Ur[zr]=null,ec=Ur[--zr],Ur[zr]=null;for(;e===Hs;)Hs=mn[--pn],mn[pn]=null,oi=mn[--pn],mn[pn]=null,ai=mn[--pn],mn[pn]=null}var je=null,Yt=null,Tt=!1,Fs=null,Mn=!1,td=Error(j(519));function $s(e){var t=Error(j(418,""));throw Bo(yn(t,e)),td}function Iy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[De]=e,t[Ke]=i,n){case"dialog":ot("cancel",t),ot("close",t);break;case"iframe":case"object":case"embed":ot("load",t);break;case"video":case"audio":for(n=0;n<Fo.length;n++)ot(Fo[n],t);break;case"source":ot("error",t);break;case"img":case"image":case"link":ot("error",t),ot("load",t);break;case"details":ot("toggle",t);break;case"input":ot("invalid",t),LE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Zu(t);break;case"select":ot("invalid",t);break;case"textarea":ot("invalid",t),zE(t,i.value,i.defaultValue,i.children),Zu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||B0(t.textContent,n)?(i.popover!=null&&(ot("beforetoggle",t),ot("toggle",t)),i.onScroll!=null&&ot("scroll",t),i.onScrollEnd!=null&&ot("scrollend",t),i.onClick!=null&&(t.onclick=rh),t=!0):t=!1,t||$s(e)}function Cy(e){for(je=e.return;je;)switch(je.tag){case 5:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:je=je.return}}function to(e){if(e!==je)return!1;if(!Tt)return Cy(e),Tt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Rd(e.type,e.memoizedProps)),n=!n),n&&Yt&&$s(e),Cy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Yt=Rn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Yt=null}}else t===27?(t=Yt,Es(e.type)?(e=Cd,Cd=null,Yt=e):Yt=t):Yt=je?Rn(e.stateNode.nextSibling):null;return!0}function pl(){Yt=je=null,Tt=!1}function Ny(){var e=Fs;return e!==null&&(Ge===null?Ge=e:Ge.push.apply(Ge,e),Fs=null),e}function Bo(e){Fs===null?Fs=[e]:Fs.push(e)}var ed=Yn(null),lr=null,li=null;function Pi(e,t,n){zt(ed,t._currentValue),t._currentValue=n}function di(e){e._currentValue=ed.current,pe(ed)}function nd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function id(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),nd(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(j(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),nd(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function gl(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(j(387));if(a=a.memoizedProps,a!==null){var l=s.type;cn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===Ku.current){if(a=s.alternate,a===null)throw Error(j(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Ko):e=[Ko])}s=s.return}e!==null&&id(t,e,n,i),t.flags|=262144}function nc(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xs(e){lr=e,li=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Oe(e){return oT(lr,e)}function lu(e,t){return lr===null&&Xs(e),oT(e,t)}function oT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},li===null){if(e===null)throw Error(j(308));li=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else li=li.next=t;return n}var F1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},G1=ue.unstable_scheduleCallback,Q1=ue.unstable_NormalPriority,ae={$$typeof:ri,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xm(){return{controller:new F1,data:new Map,refCount:0}}function yl(e){e.refCount--,e.refCount===0&&G1(Q1,function(){e.controller.abort()})}var Eo=null,sd=0,aa=0,Kr=null;function K1(e,t){if(Eo===null){var n=Eo=[];sd=0,aa=Xm(),Kr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return sd++,t.then(Dy,Dy),t}function Dy(){if(--sd===0&&Eo!==null){Kr!==null&&(Kr.status="fulfilled");var e=Eo;Eo=null,aa=0,Kr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Y1(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Oy=nt.S;nt.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&K1(e,t),Oy!==null&&Oy(e,t)};var Gs=Yn(null);function Im(){var e=Gs.current;return e!==null?e:Nt.pooledCache}function Cu(e,t){t===null?zt(Gs,Gs.current):zt(Gs,t.pool)}function lT(){var e=Im();return e===null?null:{parent:ae._currentValue,pool:e}}var _l=Error(j(460)),uT=Error(j(474)),Wc=Error(j(542)),rd={then:function(){}};function Vy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function uu(){}function cT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(uu,uu),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ky(e),e;default:if(typeof t.status=="string")t.then(uu,uu);else{if(e=Nt,e!==null&&100<e.shellSuspendCounter)throw Error(j(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ky(e),e}throw To=t,_l}}var To=null;function My(){if(To===null)throw Error(j(459));var e=To;return To=null,e}function ky(e){if(e===_l||e===Wc)throw Error(j(483))}var ki=!1;function Cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Zi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,wt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Ju(e),sT(e,null,n),t}return Zc(e,i,t,n),Ju(e)}function bo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,OE(e,n)}}function of(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var od=!1;function Ao(){if(od){var e=Kr;if(e!==null)throw e}}function So(e,t,n,i){od=!1;var s=e.updateQueue;ki=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,m=h=u=null,l=r;do{var p=l.lane&-536870913,_=p!==l.lane;if(_?(yt&p)===p:(i&p)===p){p!==0&&p===aa&&(od=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var I=e,O=l;p=t;var V=n;switch(O.tag){case 1:if(I=O.payload,typeof I=="function"){g=I.call(V,g,p);break t}g=I;break t;case 3:I.flags=I.flags&-65537|128;case 0:if(I=O.payload,p=typeof I=="function"?I.call(V,g,p):I,p==null)break t;g=jt({},g,p);break t;case 2:ki=!0}}p=l.callback,p!==null&&(e.flags|=64,_&&(e.flags|=8192),_=s.callbacks,_===null?s.callbacks=[p]:_.push(p))}else _={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=_,u=g):m=m.next=_,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=m,r===null&&(s.shared.lanes=0),fs|=a,e.lanes=a,e.memoizedState=g}}function hT(e,t){if(typeof e!="function")throw Error(j(191,e));e.call(t)}function fT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hT(n[e],t)}var oa=Yn(null),ic=Yn(0);function Py(e,t){e=_i,zt(ic,e),zt(oa,t),_i=e|t.baseLanes}function ld(){zt(ic,_i),zt(oa,oa.current)}function Nm(){_i=ic.current,pe(oa),pe(ic)}var cs=0,at=null,xt=null,te=null,sc=!1,Yr=!1,Zs=!1,rc=0,qo=0,$r=null,$1=0;function Xt(){throw Error(j(321))}function Dm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function Om(e,t,n,i,s,r){return cs=r,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nt.H=e===null||e.memoizedState===null?HT:FT,Zs=!1,r=n(i,s),Zs=!1,Yr&&(r=mT(t,n,i,s)),dT(e),r}function dT(e){nt.H=ac;var t=xt!==null&&xt.next!==null;if(cs=0,te=xt=at=null,sc=!1,qo=0,$r=null,t)throw Error(j(300));e===null||me||(e=e.dependencies,e!==null&&nc(e)&&(me=!0))}function mT(e,t,n,i){at=e;var s=0;do{if(Yr&&($r=null),qo=0,Yr=!1,25<=s)throw Error(j(301));if(s+=1,te=xt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}nt.H=nR,r=t(n,i)}while(Yr);return r}function X1(){var e=nt.H,t=e.useState()[0];return t=typeof t.then=="function"?vl(t):t,e=e.useState()[0],(xt!==null?xt.memoizedState:null)!==e&&(at.flags|=1024),t}function Vm(){var e=rc!==0;return rc=0,e}function Mm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function km(e){if(sc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}sc=!1}cs=0,te=xt=at=null,Yr=!1,qo=rc=0,$r=null}function He(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return te===null?at.memoizedState=te=e:te=te.next=e,te}function ie(){if(xt===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=te===null?at.memoizedState:te.next;if(t!==null)te=t,xt=e;else{if(e===null)throw at.alternate===null?Error(j(467)):Error(j(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},te===null?at.memoizedState=te=e:te=te.next=e}return te}function Pm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(e){var t=qo;return qo+=1,$r===null&&($r=[]),e=cT($r,e,t),t=at,(te===null?t.memoizedState:te.next)===null&&(t=t.alternate,nt.H=t===null||t.memoizedState===null?HT:FT),e}function Jc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vl(e);if(e.$$typeof===ri)return Oe(e)}throw Error(j(438,String(e)))}function jm(e){var t=null,n=at.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=at.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Pm(),at.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Mw;return t.index++,n}function gi(e,t){return typeof t=="function"?t(e):t}function Nu(e){var t=ie();return Lm(t,xt,e)}function Lm(e,t,n){var i=e.queue;if(i===null)throw Error(j(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,m=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(yt&g)===g:(cs&g)===g){var p=h.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===aa&&(m=!0);else if((cs&p)===p){h=h.next,p===aa&&(m=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,at.lanes|=p,fs|=p;g=h.action,Zs&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else p={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,at.lanes|=g,fs|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!cn(r,e.memoizedState)&&(me=!0,m&&(n=Kr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function lf(e){var t=ie(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);cn(r,t.memoizedState)||(me=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function pT(e,t,n){var i=at,s=ie(),r=Tt;if(r){if(n===void 0)throw Error(j(407));n=n()}else n=t();var a=!cn((xt||s).memoizedState,n);a&&(s.memoizedState=n,me=!0),s=s.queue;var l=_T.bind(null,i,s,e);if(El(2048,8,l,[e]),s.getSnapshot!==t||a||te!==null&&te.memoizedState.tag&1){if(i.flags|=2048,la(9,th(),yT.bind(null,i,s,n,t),null),Nt===null)throw Error(j(349));r||cs&124||gT(i,t,n)}return n}function gT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=at.updateQueue,t===null?(t=Pm(),at.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yT(e,t,n,i){t.value=n,t.getSnapshot=i,vT(t)&&ET(e)}function _T(e,t,n){return n(function(){vT(t)&&ET(e)})}function vT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function ET(e){var t=Ra(e,2);t!==null&&ln(t,e,2)}function ud(e){var t=He();if(typeof e=="function"){var n=e;if(e=n(),Zs){Fi(!0);try{n()}finally{Fi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},t}function TT(e,t,n,i){return e.baseState=n,Lm(e,xt,typeof i=="function"?i:gi)}function Z1(e,t,n,i,s){if(eh(e))throw Error(j(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};nt.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,bT(t,r)):(r.next=n.next,t.pending=n.next=r)}}function bT(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=nt.T,a={};nt.T=a;try{var l=n(s,i),u=nt.S;u!==null&&u(a,l),jy(e,t,l)}catch(h){cd(e,t,h)}finally{nt.T=r}}else try{r=n(s,i),jy(e,t,r)}catch(h){cd(e,t,h)}}function jy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ly(e,t,i)},function(i){return cd(e,t,i)}):Ly(e,t,n)}function Ly(e,t,n){t.status="fulfilled",t.value=n,AT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,bT(e,n)))}function cd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,AT(t),t=t.next;while(t!==i)}e.action=null}function AT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ST(e,t){return t}function Uy(e,t){if(Tt){var n=Nt.formState;if(n!==null){t:{var i=at;if(Tt){if(Yt){e:{for(var s=Yt,r=Mn;s.nodeType!==8;){if(!r){s=null;break e}if(s=Rn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Yt=Rn(s.nextSibling),i=s.data==="F!";break t}}$s(i)}i=!1}i&&(t=n[0])}}return n=He(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ST,lastRenderedState:t},n.queue=i,n=zT.bind(null,at,i),i.dispatch=n,i=ud(!1),r=qm.bind(null,at,!1,i.queue),i=He(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=Z1.bind(null,at,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function zy(e){var t=ie();return wT(t,xt,e)}function wT(e,t,n){if(t=Lm(e,t,ST)[0],e=Nu(gi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=vl(t)}catch(a){throw a===_l?Wc:a}else i=t;t=ie();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(at.flags|=2048,la(9,th(),W1.bind(null,s,n),null)),[i,r,e]}function W1(e,t){e.action=t}function By(e){var t=ie(),n=xt;if(n!==null)return wT(t,n,e);ie(),t=t.memoizedState,n=ie();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function la(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=at.updateQueue,t===null&&(t=Pm(),at.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function th(){return{destroy:void 0,resource:void 0}}function RT(){return ie().memoizedState}function Du(e,t,n,i){var s=He();i=i===void 0?null:i,at.flags|=e,s.memoizedState=la(1|t,th(),n,i)}function El(e,t,n,i){var s=ie();i=i===void 0?null:i;var r=s.memoizedState.inst;xt!==null&&i!==null&&Dm(i,xt.memoizedState.deps)?s.memoizedState=la(t,r,n,i):(at.flags|=e,s.memoizedState=la(1|t,r,n,i))}function qy(e,t){Du(8390656,8,e,t)}function xT(e,t){El(2048,8,e,t)}function IT(e,t){return El(4,2,e,t)}function CT(e,t){return El(4,4,e,t)}function NT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DT(e,t,n){n=n!=null?n.concat([e]):null,El(4,4,NT.bind(null,t,e),n)}function Um(){}function OT(e,t){var n=ie();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Dm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function VT(e,t){var n=ie();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Dm(t,i[1]))return i[0];if(i=e(),Zs){Fi(!0);try{e()}finally{Fi(!1)}}return n.memoizedState=[i,t],i}function zm(e,t,n){return n===void 0||cs&1073741824?e.memoizedState=t:(e.memoizedState=n,e=A0(),at.lanes|=e,fs|=e,n)}function MT(e,t,n,i){return cn(n,t)?n:oa.current!==null?(e=zm(e,n,i),cn(e,t)||(me=!0),e):cs&42?(e=A0(),at.lanes|=e,fs|=e,t):(me=!0,e.memoizedState=n)}function kT(e,t,n,i,s){var r=bt.p;bt.p=r!==0&&8>r?r:8;var a=nt.T,l={};nt.T=l,qm(e,!1,t,n);try{var u=s(),h=nt.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=Y1(u,i);wo(e,t,m,on(e))}else wo(e,t,i,on(e))}catch(g){wo(e,t,{then:function(){},status:"rejected",reason:g},on())}finally{bt.p=r,nt.T=a}}function J1(){}function hd(e,t,n,i){if(e.tag!==5)throw Error(j(476));var s=PT(e).queue;kT(e,s,t,Bs,n===null?J1:function(){return jT(e),n(i)})}function PT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Bs,baseState:Bs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:Bs},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function jT(e){var t=PT(e).next.queue;wo(e,t,{},on())}function Bm(){return Oe(Ko)}function LT(){return ie().memoizedState}function UT(){return ie().memoizedState}function tR(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=on();e=Zi(n);var i=Wi(t,e,n);i!==null&&(ln(i,t,n),bo(i,t,n)),t={cache:xm()},e.payload=t;return}t=t.return}}function eR(e,t,n){var i=on();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},eh(e)?BT(t,n):(n=Am(e,t,n,i),n!==null&&(ln(n,e,i),qT(n,t,i)))}function zT(e,t,n){var i=on();wo(e,t,n,i)}function wo(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(eh(e))BT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,cn(l,a))return Zc(e,t,s,0),Nt===null&&Xc(),!1}catch{}finally{}if(n=Am(e,t,s,i),n!==null)return ln(n,e,i),qT(n,t,i),!0}return!1}function qm(e,t,n,i){if(i={lane:2,revertLane:Xm(),action:i,hasEagerState:!1,eagerState:null,next:null},eh(e)){if(t)throw Error(j(479))}else t=Am(e,n,i,2),t!==null&&ln(t,e,2)}function eh(e){var t=e.alternate;return e===at||t!==null&&t===at}function BT(e,t){Yr=sc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,OE(e,n)}}var ac={readContext:Oe,use:Jc,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt},HT={readContext:Oe,use:Jc,useCallback:function(e,t){return He().memoizedState=[e,t===void 0?null:t],e},useContext:Oe,useEffect:qy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Du(4194308,4,NT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Du(4194308,4,e,t)},useInsertionEffect:function(e,t){Du(4,2,e,t)},useMemo:function(e,t){var n=He();t=t===void 0?null:t;var i=e();if(Zs){Fi(!0);try{e()}finally{Fi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=He();if(n!==void 0){var s=n(t);if(Zs){Fi(!0);try{n(t)}finally{Fi(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=eR.bind(null,at,e),[i.memoizedState,e]},useRef:function(e){var t=He();return e={current:e},t.memoizedState=e},useState:function(e){e=ud(e);var t=e.queue,n=zT.bind(null,at,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Um,useDeferredValue:function(e,t){var n=He();return zm(n,e,t)},useTransition:function(){var e=ud(!1);return e=kT.bind(null,at,e.queue,!0,!1),He().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=at,s=He();if(Tt){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),Nt===null)throw Error(j(349));yt&124||gT(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,qy(_T.bind(null,i,r,e),[e]),i.flags|=2048,la(9,th(),yT.bind(null,i,r,n,t),null),n},useId:function(){var e=He(),t=Nt.identifierPrefix;if(Tt){var n=oi,i=ai;n=(i&~(1<<32-an(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=rc++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=$1++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Bm,useFormState:Uy,useActionState:Uy,useOptimistic:function(e){var t=He();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qm.bind(null,at,!0,n),n.dispatch=t,[e,t]},useMemoCache:jm,useCacheRefresh:function(){return He().memoizedState=tR.bind(null,at)}},FT={readContext:Oe,use:Jc,useCallback:OT,useContext:Oe,useEffect:xT,useImperativeHandle:DT,useInsertionEffect:IT,useLayoutEffect:CT,useMemo:VT,useReducer:Nu,useRef:RT,useState:function(){return Nu(gi)},useDebugValue:Um,useDeferredValue:function(e,t){var n=ie();return MT(n,xt.memoizedState,e,t)},useTransition:function(){var e=Nu(gi)[0],t=ie().memoizedState;return[typeof e=="boolean"?e:vl(e),t]},useSyncExternalStore:pT,useId:LT,useHostTransitionStatus:Bm,useFormState:zy,useActionState:zy,useOptimistic:function(e,t){var n=ie();return TT(n,xt,e,t)},useMemoCache:jm,useCacheRefresh:UT},nR={readContext:Oe,use:Jc,useCallback:OT,useContext:Oe,useEffect:xT,useImperativeHandle:DT,useInsertionEffect:IT,useLayoutEffect:CT,useMemo:VT,useReducer:lf,useRef:RT,useState:function(){return lf(gi)},useDebugValue:Um,useDeferredValue:function(e,t){var n=ie();return xt===null?zm(n,e,t):MT(n,xt.memoizedState,e,t)},useTransition:function(){var e=lf(gi)[0],t=ie().memoizedState;return[typeof e=="boolean"?e:vl(e),t]},useSyncExternalStore:pT,useId:LT,useHostTransitionStatus:Bm,useFormState:By,useActionState:By,useOptimistic:function(e,t){var n=ie();return xt!==null?TT(n,xt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:jm,useCacheRefresh:UT},Xr=null,Ho=0;function cu(e){var t=Ho;return Ho+=1,Xr===null&&(Xr=[]),cT(Xr,e,t)}function eo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hu(e,t){throw t.$$typeof===Ow?Error(j(525)):(e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Hy(e){var t=e._init;return t(e._payload)}function GT(e){function t(S,E){if(e){var R=S.deletions;R===null?(S.deletions=[E],S.flags|=16):R.push(E)}}function n(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function i(S){for(var E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function s(S,E){return S=fi(S,E),S.index=0,S.sibling=null,S}function r(S,E,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<E?(S.flags|=67108866,E):R):(S.flags|=67108866,E)):(S.flags|=1048576,E)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,E,R,D){return E===null||E.tag!==6?(E=rf(R,S.mode,D),E.return=S,E):(E=s(E,R),E.return=S,E)}function u(S,E,R,D){var L=R.type;return L===Nr?m(S,E,R.props.children,D,R.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Mi&&Hy(L)===E.type)?(E=s(E,R.props),eo(E,R),E.return=S,E):(E=Iu(R.type,R.key,R.props,null,S.mode,D),eo(E,R),E.return=S,E)}function h(S,E,R,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=af(R,S.mode,D),E.return=S,E):(E=s(E,R.children||[]),E.return=S,E)}function m(S,E,R,D,L){return E===null||E.tag!==7?(E=qs(R,S.mode,D,L),E.return=S,E):(E=s(E,R),E.return=S,E)}function g(S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=rf(""+E,S.mode,R),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case iu:return R=Iu(E.type,E.key,E.props,null,S.mode,R),eo(R,E),R.return=S,R;case ro:return E=af(E,S.mode,R),E.return=S,E;case Mi:var D=E._init;return E=D(E._payload),g(S,E,R)}if(ao(E)||Za(E))return E=qs(E,S.mode,R,null),E.return=S,E;if(typeof E.then=="function")return g(S,cu(E),R);if(E.$$typeof===ri)return g(S,lu(S,E),R);hu(S,E)}return null}function p(S,E,R,D){var L=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(S,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case iu:return R.key===L?u(S,E,R,D):null;case ro:return R.key===L?h(S,E,R,D):null;case Mi:return L=R._init,R=L(R._payload),p(S,E,R,D)}if(ao(R)||Za(R))return L!==null?null:m(S,E,R,D,null);if(typeof R.then=="function")return p(S,E,cu(R),D);if(R.$$typeof===ri)return p(S,E,lu(S,R),D);hu(S,R)}return null}function _(S,E,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(R)||null,l(E,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case iu:return S=S.get(D.key===null?R:D.key)||null,u(E,S,D,L);case ro:return S=S.get(D.key===null?R:D.key)||null,h(E,S,D,L);case Mi:var F=D._init;return D=F(D._payload),_(S,E,R,D,L)}if(ao(D)||Za(D))return S=S.get(R)||null,m(E,S,D,L,null);if(typeof D.then=="function")return _(S,E,R,cu(D),L);if(D.$$typeof===ri)return _(S,E,R,lu(E,D),L);hu(E,D)}return null}function I(S,E,R,D){for(var L=null,F=null,b=E,v=E=0,A=null;b!==null&&v<R.length;v++){b.index>v?(A=b,b=null):A=b.sibling;var w=p(S,b,R[v],D);if(w===null){b===null&&(b=A);break}e&&b&&w.alternate===null&&t(S,b),E=r(w,E,v),F===null?L=w:F.sibling=w,F=w,b=A}if(v===R.length)return n(S,b),Tt&&ks(S,v),L;if(b===null){for(;v<R.length;v++)b=g(S,R[v],D),b!==null&&(E=r(b,E,v),F===null?L=b:F.sibling=b,F=b);return Tt&&ks(S,v),L}for(b=i(b);v<R.length;v++)A=_(b,S,v,R[v],D),A!==null&&(e&&A.alternate!==null&&b.delete(A.key===null?v:A.key),E=r(A,E,v),F===null?L=A:F.sibling=A,F=A);return e&&b.forEach(function(x){return t(S,x)}),Tt&&ks(S,v),L}function O(S,E,R,D){if(R==null)throw Error(j(151));for(var L=null,F=null,b=E,v=E=0,A=null,w=R.next();b!==null&&!w.done;v++,w=R.next()){b.index>v?(A=b,b=null):A=b.sibling;var x=p(S,b,w.value,D);if(x===null){b===null&&(b=A);break}e&&b&&x.alternate===null&&t(S,b),E=r(x,E,v),F===null?L=x:F.sibling=x,F=x,b=A}if(w.done)return n(S,b),Tt&&ks(S,v),L;if(b===null){for(;!w.done;v++,w=R.next())w=g(S,w.value,D),w!==null&&(E=r(w,E,v),F===null?L=w:F.sibling=w,F=w);return Tt&&ks(S,v),L}for(b=i(b);!w.done;v++,w=R.next())w=_(b,S,v,w.value,D),w!==null&&(e&&w.alternate!==null&&b.delete(w.key===null?v:w.key),E=r(w,E,v),F===null?L=w:F.sibling=w,F=w);return e&&b.forEach(function(C){return t(S,C)}),Tt&&ks(S,v),L}function V(S,E,R,D){if(typeof R=="object"&&R!==null&&R.type===Nr&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case iu:t:{for(var L=R.key;E!==null;){if(E.key===L){if(L=R.type,L===Nr){if(E.tag===7){n(S,E.sibling),D=s(E,R.props.children),D.return=S,S=D;break t}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Mi&&Hy(L)===E.type){n(S,E.sibling),D=s(E,R.props),eo(D,R),D.return=S,S=D;break t}n(S,E);break}else t(S,E);E=E.sibling}R.type===Nr?(D=qs(R.props.children,S.mode,D,R.key),D.return=S,S=D):(D=Iu(R.type,R.key,R.props,null,S.mode,D),eo(D,R),D.return=S,S=D)}return a(S);case ro:t:{for(L=R.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(S,E.sibling),D=s(E,R.children||[]),D.return=S,S=D;break t}else{n(S,E);break}else t(S,E);E=E.sibling}D=af(R,S.mode,D),D.return=S,S=D}return a(S);case Mi:return L=R._init,R=L(R._payload),V(S,E,R,D)}if(ao(R))return I(S,E,R,D);if(Za(R)){if(L=Za(R),typeof L!="function")throw Error(j(150));return R=L.call(R),O(S,E,R,D)}if(typeof R.then=="function")return V(S,E,cu(R),D);if(R.$$typeof===ri)return V(S,E,lu(S,R),D);hu(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(S,E.sibling),D=s(E,R),D.return=S,S=D):(n(S,E),D=rf(R,S.mode,D),D.return=S,S=D),a(S)):n(S,E)}return function(S,E,R,D){try{Ho=0;var L=V(S,E,R,D);return Xr=null,L}catch(b){if(b===_l||b===Wc)throw b;var F=en(29,b,null,S.mode);return F.lanes=D,F.return=S,F}finally{}}}var ua=GT(!0),QT=GT(!1),En=Yn(null),Ln=null;function ji(e){var t=e.alternate;zt(oe,oe.current&1),zt(En,e),Ln===null&&(t===null||oa.current!==null||t.memoizedState!==null)&&(Ln=e)}function KT(e){if(e.tag===22){if(zt(oe,oe.current),zt(En,e),Ln===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ln=e)}}else Li()}function Li(){zt(oe,oe.current),zt(En,En.current)}function ui(e){pe(En),Ln===e&&(Ln=null),pe(oe)}var oe=Yn(0);function oc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Id(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function uf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:jt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=on(),s=Zi(i);s.payload=t,n!=null&&(s.callback=n),t=Wi(e,s,i),t!==null&&(ln(t,e,i),bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=on(),s=Zi(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Wi(e,s,i),t!==null&&(ln(t,e,i),bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=on(),i=Zi(n);i.tag=2,t!=null&&(i.callback=t),t=Wi(e,i,n),t!==null&&(ln(t,e,n),bo(t,e,n))}};function Fy(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!zo(n,i)||!zo(s,r):!0}function Gy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&fd.enqueueReplaceState(t,t.state,null)}function Ws(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=jt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var lc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function YT(e){lc(e)}function $T(e){console.error(e)}function XT(e){lc(e)}function uc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Qy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function dd(e,t,n){return n=Zi(n),n.tag=3,n.payload={element:null},n.callback=function(){uc(e,t)},n}function ZT(e){return e=Zi(e),e.tag=3,e}function WT(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Qy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Qy(t,n,i),typeof s!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function iR(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&gl(t,n,s,!0),n=En.current,n!==null){switch(n.tag){case 13:return Ln===null?Td():n.alternate===null&&$t===0&&($t=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===rd?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Ef(e,i,s)),!1;case 22:return n.flags|=65536,i===rd?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Ef(e,i,s)),!1}throw Error(j(435,n.tag))}return Ef(e,i,s),Td(),!1}if(Tt)return t=En.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==td&&(e=Error(j(422),{cause:i}),Bo(yn(e,n)))):(i!==td&&(t=Error(j(423),{cause:i}),Bo(yn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=yn(i,n),s=dd(e.stateNode,i,s),of(e,s),$t!==4&&($t=2)),!1;var r=Error(j(520),{cause:i});if(r=yn(r,n),Io===null?Io=[r]:Io.push(r),$t!==4&&($t=2),t===null)return!0;i=yn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=dd(n.stateNode,i,e),of(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ji===null||!Ji.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=ZT(s),WT(s,e,n,i),of(n,s),!1}n=n.return}while(n!==null);return!1}var JT=Error(j(461)),me=!1;function _e(e,t,n,i){t.child=e===null?QT(t,null,n,i):ua(t,e.child,n,i)}function Ky(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Xs(t),i=Om(e,t,n,a,r,s),l=Vm(),e!==null&&!me?(Mm(e,t,s),yi(e,t,s)):(Tt&&l&&wm(t),t.flags|=1,_e(e,t,i,s),t.child)}function Yy(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!Sm(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,t0(e,t,r,i,s)):(e=Iu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Hm(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:zo,n(a,i)&&e.ref===t.ref)return yi(e,t,s)}return t.flags|=1,e=fi(r,i),e.ref=t.ref,e.return=t,t.child=e}function t0(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(zo(r,i)&&e.ref===t.ref)if(me=!1,t.pendingProps=i=r,Hm(e,s))e.flags&131072&&(me=!0);else return t.lanes=e.lanes,yi(e,t,s)}return md(e,t,n,i,s)}function e0(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return $y(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cu(t,r!==null?r.cachePool:null),r!==null?Py(t,r):ld(),KT(t);else return t.lanes=t.childLanes=536870912,$y(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(Cu(t,r.cachePool),Py(t,r),Li(),t.memoizedState=null):(e!==null&&Cu(t,null),ld(),Li());return _e(e,t,s,n),t.child}function $y(e,t,n,i){var s=Im();return s=s===null?null:{parent:ae._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Cu(t,null),ld(),KT(t),e!==null&&gl(e,t,i,!0),null}function Ou(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(j(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function md(e,t,n,i,s){return Xs(t),n=Om(e,t,n,i,void 0,s),i=Vm(),e!==null&&!me?(Mm(e,t,s),yi(e,t,s)):(Tt&&i&&wm(t),t.flags|=1,_e(e,t,n,s),t.child)}function Xy(e,t,n,i,s,r){return Xs(t),t.updateQueue=null,n=mT(t,i,n,s),dT(e),i=Vm(),e!==null&&!me?(Mm(e,t,r),yi(e,t,r)):(Tt&&i&&wm(t),t.flags|=1,_e(e,t,n,r),t.child)}function Zy(e,t,n,i,s){if(Xs(t),t.stateNode===null){var r=Lr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Oe(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=fd,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},Cm(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?Oe(a):Lr,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(uf(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&fd.enqueueReplaceState(r,r.state,null),So(t,i,r,s),Ao(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=Ws(n,l);r.props=u;var h=r.context,m=n.contextType;a=Lr,typeof m=="object"&&m!==null&&(a=Oe(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&Gy(t,r,i,a),ki=!1;var p=t.memoizedState;r.state=p,So(t,i,r,s),Ao(),h=t.memoizedState,l||p!==h||ki?(typeof g=="function"&&(uf(t,n,g,i),h=t.memoizedState),(u=ki||Fy(t,n,u,i,p,h,a))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,ad(e,t),a=t.memoizedProps,m=Ws(n,a),r.props=m,g=t.pendingProps,p=r.context,h=n.contextType,u=Lr,typeof h=="object"&&h!==null&&(u=Oe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||p!==u)&&Gy(t,r,i,u),ki=!1,p=t.memoizedState,r.state=p,So(t,i,r,s),Ao();var _=t.memoizedState;a!==g||p!==_||ki||e!==null&&e.dependencies!==null&&nc(e.dependencies)?(typeof l=="function"&&(uf(t,n,l,i),_=t.memoizedState),(m=ki||Fy(t,n,m,i,p,_,u)||e!==null&&e.dependencies!==null&&nc(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),r.props=i,r.state=_,r.context=u,i=m):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Ou(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=ua(t,e.child,null,s),t.child=ua(t,null,n,s)):_e(e,t,n,s),t.memoizedState=r.state,e=t.child):e=yi(e,t,s),e}function Wy(e,t,n,i){return pl(),t.flags|=256,_e(e,t,n,i),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(e){return{baseLanes:e,cachePool:lT()}}function ff(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=vn),e}function n0(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(oe.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(Tt){if(s?ji(t):Li(),Tt){var l=Yt,u;if(u=l){t:{for(u=l,l=Mn;u.nodeType!==8;){if(!l){l=null;break t}if(u=Rn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Hs!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},u=en(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,je=t,Yt=null,u=!0):u=!1}u||$s(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Id(l)?t.lanes=32:t.lanes=536870912,null;ui(t)}return l=i.children,i=i.fallback,s?(Li(),s=t.mode,l=cc({mode:"hidden",children:l},s),i=qs(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=hf(n),s.childLanes=ff(e,a,n),t.memoizedState=cf,i):(ji(t),pd(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(ji(t),t.flags&=-257,t=df(e,t,n)):t.memoizedState!==null?(Li(),t.child=e.child,t.flags|=128,t=null):(Li(),s=i.fallback,l=t.mode,i=cc({mode:"visible",children:i.children},l),s=qs(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,ua(t,e.child,null,n),i=t.child,i.memoizedState=hf(n),i.childLanes=ff(e,a,n),t.memoizedState=cf,t=s);else if(ji(t),Id(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(j(419)),i.stack="",i.digest=a,Bo({value:i,source:null,stack:null}),t=df(e,t,n)}else if(me||gl(e,t,n,!1),a=(n&e.childLanes)!==0,me||a){if(a=Nt,a!==null&&(i=n&-n,i=i&42?1:dm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Ra(e,i),ln(a,e,i),JT;l.data==="$?"||Td(),t=df(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Yt=Rn(l.nextSibling),je=t,Tt=!0,Fs=null,Mn=!1,e!==null&&(mn[pn++]=ai,mn[pn++]=oi,mn[pn++]=Hs,ai=e.id,oi=e.overflow,Hs=t),t=pd(t,i.children),t.flags|=4096);return t}return s?(Li(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=fi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=fi(h,s):(s=qs(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=hf(n):(u=l.cachePool,u!==null?(h=ae._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=lT(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=ff(e,a,n),t.memoizedState=cf,i):(ji(t),n=e.child,e=n.sibling,n=fi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function pd(e,t){return t=cc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cc(e,t){return e=en(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function df(e,t,n){return ua(t,e.child,null,n),e=pd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),nd(e.return,t,n)}function mf(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function i0(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(_e(e,t,i.children,n),i=oe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jy(e,n,t);else if(e.tag===19)Jy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(zt(oe,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&oc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),mf(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&oc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}mf(t,!0,n,null,r);break;case"together":mf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fs|=t.lanes,!(n&t.childLanes))if(e!==null){if(gl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=fi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&nc(e)))}function sR(e,t,n){switch(t.tag){case 3:Yu(t,t.stateNode.containerInfo),Pi(t,ae,e.memoizedState.cache),pl();break;case 27:case 5:Ff(t);break;case 4:Yu(t,t.stateNode.containerInfo);break;case 10:Pi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ji(t),t.flags|=128,null):n&t.child.childLanes?n0(e,t,n):(ji(t),e=yi(e,t,n),e!==null?e.sibling:null);ji(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(gl(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return i0(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),zt(oe,oe.current),i)break;return null;case 22:case 23:return t.lanes=0,e0(e,t,n);case 24:Pi(t,ae,e.memoizedState.cache)}return yi(e,t,n)}function s0(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)me=!0;else{if(!Hm(e,n)&&!(t.flags&128))return me=!1,sR(e,t,n);me=!!(e.flags&131072)}else me=!1,Tt&&t.flags&1048576&&aT(t,ec,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")Sm(i)?(e=Ws(i,e),t.tag=1,t=Zy(null,t,i,e,n)):(t.tag=0,t=md(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===cm){t.tag=11,t=Ky(null,t,i,e,n);break t}else if(s===hm){t.tag=14,t=Yy(null,t,i,e,n);break t}}throw t=qf(i)||i,Error(j(306,t,""))}}return t;case 0:return md(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=Ws(i,t.pendingProps),Zy(e,t,i,s,n);case 3:t:{if(Yu(t,t.stateNode.containerInfo),e===null)throw Error(j(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,ad(e,t),So(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Pi(t,ae,i),i!==r.cache&&id(t,[ae],n,!0),Ao(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Wy(e,t,i,n);break t}else if(i!==s){s=yn(Error(j(424)),t),Bo(s),t=Wy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yt=Rn(e.firstChild),je=t,Tt=!0,Fs=null,Mn=!0,n=QT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(pl(),i===s){t=yi(e,t,n);break t}_e(e,t,i,n)}t=t.child}return t;case 26:return Ou(e,t),e===null?(n=g_(t.type,null,t.pendingProps,null))?t.memoizedState=n:Tt||(n=t.type,e=t.pendingProps,i=yc(Xi.current).createElement(n),i[De]=t,i[Ke]=e,Ae(i,n,e),fe(i),t.stateNode=i):t.memoizedState=g_(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ff(t),e===null&&Tt&&(i=t.stateNode=F0(t.type,t.pendingProps,Xi.current),je=t,Mn=!0,s=Yt,Es(t.type)?(Cd=s,Yt=Rn(i.firstChild)):Yt=s),_e(e,t,t.pendingProps.children,n),Ou(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Tt&&((s=i=Yt)&&(i=OR(i,t.type,t.pendingProps,Mn),i!==null?(t.stateNode=i,je=t,Yt=Rn(i.firstChild),Mn=!1,s=!0):s=!1),s||$s(t)),Ff(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,Rd(s,r)?i=null:a!==null&&Rd(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=Om(e,t,X1,null,null,n),Ko._currentValue=s),Ou(e,t),_e(e,t,i,n),t.child;case 6:return e===null&&Tt&&((e=n=Yt)&&(n=VR(n,t.pendingProps,Mn),n!==null?(t.stateNode=n,je=t,Yt=null,e=!0):e=!1),e||$s(t)),null;case 13:return n0(e,t,n);case 4:return Yu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ua(t,null,i,n):_e(e,t,i,n),t.child;case 11:return Ky(e,t,t.type,t.pendingProps,n);case 7:return _e(e,t,t.pendingProps,n),t.child;case 8:return _e(e,t,t.pendingProps.children,n),t.child;case 12:return _e(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Pi(t,t.type,i.value),_e(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Xs(t),s=Oe(s),i=i(s),t.flags|=1,_e(e,t,i,n),t.child;case 14:return Yy(e,t,t.type,t.pendingProps,n);case 15:return t0(e,t,t.type,t.pendingProps,n);case 19:return i0(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=cc(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=fi(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return e0(e,t,n);case 24:return Xs(t),i=Oe(ae),e===null?(s=Im(),s===null&&(s=Nt,r=xm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},Cm(t),Pi(t,ae,s)):(e.lanes&n&&(ad(e,t),So(t,null,null,n),Ao()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Pi(t,ae,i)):(i=r.cache,Pi(t,ae,i),i!==s.cache&&id(t,[ae],n,!0))),_e(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(j(156,t.tag))}function ni(e){e.flags|=4}function t_(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!K0(t)){if(t=En.current,t!==null&&((yt&4194048)===yt?Ln!==null:(yt&62914560)!==yt&&!(yt&536870912)||t!==Ln))throw To=rd,uT;e.flags|=8192}}function fu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?NE():536870912,e.lanes|=t,ca|=t)}function no(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function rR(e,t,n){var i=t.pendingProps;switch(Rm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return Ht(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),di(ae),ia(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(to(t)?ni(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ny())),Ht(t),null;case 26:return n=t.memoizedState,e===null?(ni(t),n!==null?(Ht(t),t_(t,n)):(Ht(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ni(t),Ht(t),t_(t,n)):(Ht(t),t.flags&=-16777217):(e.memoizedProps!==i&&ni(t),Ht(t),t.flags&=-16777217),null;case 27:$u(t),n=Xi.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ni(t);else{if(!i){if(t.stateNode===null)throw Error(j(166));return Ht(t),null}e=Pn.current,to(t)?Iy(t):(e=F0(s,i,n),t.stateNode=e,ni(t))}return Ht(t),null;case 5:if($u(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ni(t);else{if(!i){if(t.stateNode===null)throw Error(j(166));return Ht(t),null}if(e=Pn.current,to(t))Iy(t);else{switch(s=yc(Xi.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[De]=t,e[Ke]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(Ae(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ni(t)}}return Ht(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ni(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(j(166));if(e=Xi.current,to(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=je,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[De]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||B0(e.nodeValue,n)),e||$s(t)}else e=yc(e).createTextNode(i),e[De]=t,t.stateNode=e}return Ht(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=to(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(j(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[De]=t}else pl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ht(t),s=!1}else s=Ny(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ui(t),t):(ui(t),null)}if(ui(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),fu(t,t.updateQueue),Ht(t),null;case 4:return ia(),e===null&&Zm(t.stateNode.containerInfo),Ht(t),null;case 10:return di(t.type),Ht(t),null;case 19:if(pe(oe),s=t.memoizedState,s===null)return Ht(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)no(s,!1);else{if($t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=oc(e),r!==null){for(t.flags|=128,no(s,!1),e=r.updateQueue,t.updateQueue=e,fu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)rT(n,e),n=n.sibling;return zt(oe,oe.current&1|2),t.child}e=e.sibling}s.tail!==null&&jn()>fc&&(t.flags|=128,i=!0,no(s,!1),t.lanes=4194304)}else{if(!i)if(e=oc(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,fu(t,e),no(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Tt)return Ht(t),null}else 2*jn()-s.renderingStartTime>fc&&n!==536870912&&(t.flags|=128,i=!0,no(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=jn(),t.sibling=null,e=oe.current,zt(oe,i?e&1|2:e&1),t):(Ht(t),null);case 22:case 23:return ui(t),Nm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),n=t.updateQueue,n!==null&&fu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&pe(Gs),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),di(ae),Ht(t),null;case 25:return null;case 30:return null}throw Error(j(156,t.tag))}function aR(e,t){switch(Rm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return di(ae),ia(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return $u(t),null;case 13:if(ui(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));pl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(oe),null;case 4:return ia(),null;case 10:return di(t.type),null;case 22:case 23:return ui(t),Nm(),e!==null&&pe(Gs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return di(ae),null;case 25:return null;default:return null}}function r0(e,t){switch(Rm(t),t.tag){case 3:di(ae),ia();break;case 26:case 27:case 5:$u(t);break;case 4:ia();break;case 13:ui(t);break;case 19:pe(oe);break;case 10:di(t.type);break;case 22:case 23:ui(t),Nm(),e!==null&&pe(Gs);break;case 24:di(ae)}}function Tl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Ct(t,t.return,l)}}function hs(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(m){Ct(s,u,m)}}}i=i.next}while(i!==r)}}catch(m){Ct(t,t.return,m)}}function a0(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{fT(t,n)}catch(i){Ct(e,e.return,i)}}}function o0(e,t,n){n.props=Ws(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ct(e,t,i)}}function Ro(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){Ct(e,t,s)}}function kn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Ct(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Ct(e,t,s)}else n.current=null}function l0(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Ct(e,e.return,s)}}function pf(e,t,n){try{var i=e.stateNode;xR(i,e.type,n,t),i[Ke]=t}catch(s){Ct(e,e.return,s)}}function u0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Es(e.type)||e.tag===4}function gf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||u0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Es(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rh));else if(i!==4&&(i===27&&Es(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}function hc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Es(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(hc(e,t,n),e=e.sibling;e!==null;)hc(e,t,n),e=e.sibling}function c0(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ae(t,i,n),t[De]=e,t[Ke]=n}catch(r){Ct(e,e.return,r)}}var si=!1,Zt=!1,yf=!1,e_=typeof WeakSet=="function"?WeakSet:Set,he=null;function oR(e,t){if(e=e.containerInfo,Sd=Tc,e=ZE(e),Tm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,m=0,g=e,p=null;e:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)p=g,g=_;for(;;){if(g===e)break e;if(p===n&&++h===s&&(l=a),p===r&&++m===i&&(u=a),(_=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:e,selectionRange:n},Tc=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){switch(t=he,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var I=Ws(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(I,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){Ct(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)xd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(j(163))}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}}function h0(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Di(e,n),i&4&&Tl(5,n);break;case 1:if(Di(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Ct(n,n.return,a)}else{var s=Ws(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ct(n,n.return,a)}}i&64&&a0(n),i&512&&Ro(n,n.return);break;case 3:if(Di(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{fT(e,t)}catch(a){Ct(n,n.return,a)}}break;case 27:t===null&&i&4&&c0(n);case 26:case 5:Di(e,n),t===null&&i&4&&l0(n),i&512&&Ro(n,n.return);break;case 12:Di(e,n);break;case 13:Di(e,n),i&4&&m0(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=gR.bind(null,n),MR(e,n))));break;case 22:if(i=n.memoizedState!==null||si,!i){t=t!==null&&t.memoizedState!==null||Zt,s=si;var r=Zt;si=i,(Zt=t)&&!r?Vi(e,n,(n.subtreeFlags&8772)!==0):Di(e,n),si=s,Zt=r}break;case 30:break;default:Di(e,n)}}function f0(e){var t=e.alternate;t!==null&&(e.alternate=null,f0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pm(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lt=null,Fe=!1;function ii(e,t,n){for(n=n.child;n!==null;)d0(e,t,n),n=n.sibling}function d0(e,t,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 26:Zt||kn(n,t),ii(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Zt||kn(n,t);var i=Lt,s=Fe;Es(n.type)&&(Lt=n.stateNode,Fe=!1),ii(e,t,n),No(n.stateNode),Lt=i,Fe=s;break;case 5:Zt||kn(n,t);case 6:if(i=Lt,s=Fe,Lt=null,ii(e,t,n),Lt=i,Fe=s,Lt!==null)if(Fe)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(n.stateNode)}catch(r){Ct(n,t,r)}else try{Lt.removeChild(n.stateNode)}catch(r){Ct(n,t,r)}break;case 18:Lt!==null&&(Fe?(e=Lt,d_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Xo(e)):d_(Lt,n.stateNode));break;case 4:i=Lt,s=Fe,Lt=n.stateNode.containerInfo,Fe=!0,ii(e,t,n),Lt=i,Fe=s;break;case 0:case 11:case 14:case 15:Zt||hs(2,n,t),Zt||hs(4,n,t),ii(e,t,n);break;case 1:Zt||(kn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&o0(n,t,i)),ii(e,t,n);break;case 21:ii(e,t,n);break;case 22:Zt=(i=Zt)||n.memoizedState!==null,ii(e,t,n),Zt=i;break;default:ii(e,t,n)}}function m0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xo(e)}catch(n){Ct(t,t.return,n)}}function lR(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new e_),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new e_),t;default:throw Error(j(435,e.tag))}}function _f(e,t){var n=lR(e);t.forEach(function(i){var s=yR.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function We(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(Es(l.type)){Lt=l.stateNode,Fe=!1;break t}break;case 5:Lt=l.stateNode,Fe=!1;break t;case 3:case 4:Lt=l.stateNode.containerInfo,Fe=!0;break t}l=l.return}if(Lt===null)throw Error(j(160));d0(r,a,s),Lt=null,Fe=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)p0(t,e),t=t.sibling}var Sn=null;function p0(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:We(t,e),Je(e),i&4&&(hs(3,e,e.return),Tl(3,e),hs(5,e,e.return));break;case 1:We(t,e),Je(e),i&512&&(Zt||n===null||kn(n,n.return)),i&64&&si&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=Sn;if(We(t,e),Je(e),i&512&&(Zt||n===null||kn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[dl]||r[De]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Ae(r,i,n),r[De]=e,fe(r),i=r;break t;case"link":var a=__("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),Ae(r,i,n),s.head.appendChild(r);break;case"meta":if(a=__("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),Ae(r,i,n),s.head.appendChild(r);break;default:throw Error(j(468,i))}r[De]=e,fe(r),i=r}e.stateNode=i}else v_(s,e.type,e.stateNode);else e.stateNode=y_(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?v_(s,e.type,e.stateNode):y_(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&pf(e,e.memoizedProps,n.memoizedProps)}break;case 27:We(t,e),Je(e),i&512&&(Zt||n===null||kn(n,n.return)),n!==null&&i&4&&pf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(We(t,e),Je(e),i&512&&(Zt||n===null||kn(n,n.return)),e.flags&32){s=e.stateNode;try{ra(s,"")}catch(_){Ct(e,e.return,_)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,pf(e,s,n!==null?n.memoizedProps:s)),i&1024&&(yf=!0);break;case 6:if(We(t,e),Je(e),i&4){if(e.stateNode===null)throw Error(j(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Ct(e,e.return,_)}}break;case 3:if(ku=null,s=Sn,Sn=_c(t.containerInfo),We(t,e),Sn=s,Je(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Xo(t.containerInfo)}catch(_){Ct(e,e.return,_)}yf&&(yf=!1,g0(e));break;case 4:i=Sn,Sn=_c(e.stateNode.containerInfo),We(t,e),Je(e),Sn=i;break;case 12:We(t,e),Je(e);break;case 13:We(t,e),Je(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ym=jn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_f(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=si,m=Zt;if(si=h||s,Zt=m||u,We(t,e),Zt=m,si=h,Je(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||si||Zt||Ps(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,p=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(_){Ct(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){Ct(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,_f(e,n))));break;case 19:We(t,e),Je(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_f(e,i)));break;case 30:break;case 21:break;default:We(t,e),Je(e)}}function Je(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(u0(i)){n=i;break}i=i.return}if(n==null)throw Error(j(160));switch(n.tag){case 27:var s=n.stateNode,r=gf(e);hc(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(ra(a,""),n.flags&=-33);var l=gf(e);hc(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=gf(e);gd(e,h,u);break;default:throw Error(j(161))}}catch(m){Ct(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;g0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Di(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)h0(e,t.alternate,t),t=t.sibling}function Ps(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:hs(4,t,t.return),Ps(t);break;case 1:kn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&o0(t,t.return,n),Ps(t);break;case 27:No(t.stateNode);case 26:case 5:kn(t,t.return),Ps(t);break;case 22:t.memoizedState===null&&Ps(t);break;case 30:Ps(t);break;default:Ps(t)}e=e.sibling}}function Vi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Vi(s,r,n),Tl(4,r);break;case 1:if(Vi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){Ct(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)hT(u[s],l)}catch(h){Ct(i,i.return,h)}}n&&a&64&&a0(r),Ro(r,r.return);break;case 27:c0(r);case 26:case 5:Vi(s,r,n),n&&i===null&&a&4&&l0(r),Ro(r,r.return);break;case 12:Vi(s,r,n);break;case 13:Vi(s,r,n),n&&a&4&&m0(s,r);break;case 22:r.memoizedState===null&&Vi(s,r,n),Ro(r,r.return);break;case 30:break;default:Vi(s,r,n)}t=t.sibling}}function Fm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&yl(n))}function Gm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yl(e))}function On(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)y0(e,t,n,i),t=t.sibling}function y0(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:On(e,t,n,i),s&2048&&Tl(9,t);break;case 1:On(e,t,n,i);break;case 3:On(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yl(e)));break;case 12:if(s&2048){On(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Ct(t,t.return,u)}}else On(e,t,n,i);break;case 13:On(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?On(e,t,n,i):xo(e,t):r._visibility&2?On(e,t,n,i):(r._visibility|=2,Sr(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&Fm(a,t);break;case 24:On(e,t,n,i),s&2048&&Gm(t.alternate,t);break;default:On(e,t,n,i)}}function Sr(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Sr(r,a,l,u,s),Tl(8,a);break;case 23:break;case 22:var m=a.stateNode;a.memoizedState!==null?m._visibility&2?Sr(r,a,l,u,s):xo(r,a):(m._visibility|=2,Sr(r,a,l,u,s)),s&&h&2048&&Fm(a.alternate,a);break;case 24:Sr(r,a,l,u,s),s&&h&2048&&Gm(a.alternate,a);break;default:Sr(r,a,l,u,s)}t=t.sibling}}function xo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:xo(n,i),s&2048&&Fm(i.alternate,i);break;case 24:xo(n,i),s&2048&&Gm(i.alternate,i);break;default:xo(n,i)}t=t.sibling}}var lo=8192;function Er(e){if(e.subtreeFlags&lo)for(e=e.child;e!==null;)_0(e),e=e.sibling}function _0(e){switch(e.tag){case 26:Er(e),e.flags&lo&&e.memoizedState!==null&&KR(Sn,e.memoizedState,e.memoizedProps);break;case 5:Er(e);break;case 3:case 4:var t=Sn;Sn=_c(e.stateNode.containerInfo),Er(e),Sn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=lo,lo=16777216,Er(e),lo=t):Er(e));break;default:Er(e)}}function v0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function io(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];he=i,T0(i,e)}v0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)E0(e),e=e.sibling}function E0(e){switch(e.tag){case 0:case 11:case 15:io(e),e.flags&2048&&hs(9,e,e.return);break;case 3:io(e);break;case 12:io(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vu(e)):io(e);break;default:io(e)}}function Vu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];he=i,T0(i,e)}v0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:hs(8,t,t.return),Vu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Vu(t));break;default:Vu(t)}e=e.sibling}}function T0(e,t){for(;he!==null;){var n=he;switch(n.tag){case 0:case 11:case 15:hs(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:yl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,he=i;else t:for(n=e;he!==null;){i=he;var s=i.sibling,r=i.return;if(f0(i),i===n){he=null;break t}if(s!==null){s.return=r,he=s;break t}he=r}}}var uR={getCacheForType:function(e){var t=Oe(ae),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},cR=typeof WeakMap=="function"?WeakMap:Map,wt=0,Nt=null,lt=null,yt=0,At=0,tn=null,Qi=!1,xa=!1,Qm=!1,_i=0,$t=0,fs=0,Qs=0,Km=0,vn=0,ca=0,Io=null,Ge=null,yd=!1,Ym=0,fc=1/0,dc=null,Ji=null,Ee=0,ts=null,ha=null,Zr=0,_d=0,vd=null,b0=null,Co=0,Ed=null;function on(){if(wt&2&&yt!==0)return yt&-yt;if(nt.T!==null){var e=aa;return e!==0?e:Xm()}return VE()}function A0(){vn===0&&(vn=!(yt&536870912)||Tt?CE():536870912);var e=En.current;return e!==null&&(e.flags|=32),vn}function ln(e,t,n){(e===Nt&&(At===2||At===9)||e.cancelPendingCommit!==null)&&(fa(e,0),Ki(e,yt,vn,!1)),fl(e,n),(!(wt&2)||e!==Nt)&&(e===Nt&&(!(wt&2)&&(Qs|=n),$t===4&&Ki(e,yt,vn,!1)),$n(e))}function S0(e,t,n){if(wt&6)throw Error(j(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||hl(e,t),s=i?dR(e,t):vf(e,t,!0),r=i;do{if(s===0){xa&&!i&&Ki(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!hR(n)){s=vf(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=Io;var u=l.current.memoizedState.isDehydrated;if(u&&(fa(l,a).flags|=256),a=vf(l,a,!1),a!==2){if(Qm&&!u){l.errorRecoveryDisabledLanes|=r,Qs|=r,s=4;break t}r=Ge,Ge=s,r!==null&&(Ge===null?Ge=r:Ge.push.apply(Ge,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){fa(e,0),Ki(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(j(345));case 4:if((t&4194048)!==t)break;case 6:Ki(i,t,vn,!Qi);break t;case 2:Ge=null;break;case 3:case 5:break;default:throw Error(j(329))}if((t&62914560)===t&&(s=Ym+300-jn(),10<s)){if(Ki(i,t,vn,!Qi),Qc(i,0,!0)!==0)break t;i.timeoutHandle=H0(n_.bind(null,i,n,Ge,dc,yd,t,vn,Qs,ca,Qi,r,2,-0,0),s);break t}n_(i,n,Ge,dc,yd,t,vn,Qs,ca,Qi,r,0,-0,0)}}break}while(!0);$n(e)}function n_(e,t,n,i,s,r,a,l,u,h,m,g,p,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Qo={stylesheets:null,count:0,unsuspend:QR},_0(t),g=YR(),g!==null)){e.cancelPendingCommit=g(s_.bind(null,e,t,r,n,i,s,a,l,u,m,1,p,_)),Ki(e,r,a,!h);return}s_(e,t,r,n,i,s,a,l,u)}function hR(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!cn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ki(e,t,n,i){t&=~Km,t&=~Qs,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-an(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&DE(e,n,t)}function nh(){return wt&6?!0:(bl(0),!1)}function $m(){if(lt!==null){if(At===0)var e=lt.return;else e=lt,li=lr=null,km(e),Xr=null,Ho=0,e=lt;for(;e!==null;)r0(e.alternate,e),e=e.return;lt=null}}function fa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,CR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),$m(),Nt=e,lt=n=fi(e.current,null),yt=t,At=0,tn=null,Qi=!1,xa=hl(e,t),Qm=!1,ca=vn=Km=Qs=fs=$t=0,Ge=Io=null,yd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-an(i),r=1<<s;t|=e[s],i&=~r}return _i=t,Xc(),n}function w0(e,t){at=null,nt.H=ac,t===_l||t===Wc?(t=My(),At=3):t===uT?(t=My(),At=4):At=t===JT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,tn=t,lt===null&&($t=1,uc(e,yn(t,e.current)))}function R0(){var e=nt.H;return nt.H=ac,e===null?ac:e}function x0(){var e=nt.A;return nt.A=uR,e}function Td(){$t=4,Qi||(yt&4194048)!==yt&&En.current!==null||(xa=!0),!(fs&134217727)&&!(Qs&134217727)||Nt===null||Ki(Nt,yt,vn,!1)}function vf(e,t,n){var i=wt;wt|=2;var s=R0(),r=x0();(Nt!==e||yt!==t)&&(dc=null,fa(e,t)),t=!1;var a=$t;t:do try{if(At!==0&&lt!==null){var l=lt,u=tn;switch(At){case 8:$m(),a=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(t=!0);var h=At;if(At=0,tn=null,Br(e,l,u,h),n&&xa){a=0;break t}break;default:h=At,At=0,tn=null,Br(e,l,u,h)}}fR(),a=$t;break}catch(m){w0(e,m)}while(!0);return t&&e.shellSuspendCounter++,li=lr=null,wt=i,nt.H=s,nt.A=r,lt===null&&(Nt=null,yt=0,Xc()),a}function fR(){for(;lt!==null;)I0(lt)}function dR(e,t){var n=wt;wt|=2;var i=R0(),s=x0();Nt!==e||yt!==t?(dc=null,fc=jn()+500,fa(e,t)):xa=hl(e,t);t:do try{if(At!==0&&lt!==null){t=lt;var r=tn;e:switch(At){case 1:At=0,tn=null,Br(e,t,r,1);break;case 2:case 9:if(Vy(r)){At=0,tn=null,i_(t);break}t=function(){At!==2&&At!==9||Nt!==e||(At=7),$n(e)},r.then(t,t);break t;case 3:At=7;break t;case 4:At=5;break t;case 7:Vy(r)?(At=0,tn=null,i_(t)):(At=0,tn=null,Br(e,t,r,7));break;case 5:var a=null;switch(lt.tag){case 26:a=lt.memoizedState;case 5:case 27:var l=lt;if(!a||K0(a)){At=0,tn=null;var u=l.sibling;if(u!==null)lt=u;else{var h=l.return;h!==null?(lt=h,ih(h)):lt=null}break e}}At=0,tn=null,Br(e,t,r,5);break;case 6:At=0,tn=null,Br(e,t,r,6);break;case 8:$m(),$t=6;break t;default:throw Error(j(462))}}mR();break}catch(m){w0(e,m)}while(!0);return li=lr=null,nt.H=i,nt.A=s,wt=n,lt!==null?0:(Nt=null,yt=0,Xc(),$t)}function mR(){for(;lt!==null&&!Pw();)I0(lt)}function I0(e){var t=s0(e.alternate,e,_i);e.memoizedProps=e.pendingProps,t===null?ih(e):lt=t}function i_(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Xy(n,t,t.pendingProps,t.type,void 0,yt);break;case 11:t=Xy(n,t,t.pendingProps,t.type.render,t.ref,yt);break;case 5:km(t);default:r0(n,t),t=lt=rT(t,_i),t=s0(n,t,_i)}e.memoizedProps=e.pendingProps,t===null?ih(e):lt=t}function Br(e,t,n,i){li=lr=null,km(t),Xr=null,Ho=0;var s=t.return;try{if(iR(e,s,t,n,yt)){$t=1,uc(e,yn(n,e.current)),lt=null;return}}catch(r){if(s!==null)throw lt=s,r;$t=1,uc(e,yn(n,e.current)),lt=null;return}t.flags&32768?(Tt||i===1?e=!0:xa||yt&536870912?e=!1:(Qi=e=!0,(i===2||i===9||i===3||i===6)&&(i=En.current,i!==null&&i.tag===13&&(i.flags|=16384))),C0(t,e)):ih(t)}function ih(e){var t=e;do{if(t.flags&32768){C0(t,Qi);return}e=t.return;var n=rR(t.alternate,t,_i);if(n!==null){lt=n;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);$t===0&&($t=5)}function C0(e,t){do{var n=aR(e.alternate,e);if(n!==null){n.flags&=32767,lt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){lt=e;return}lt=e=n}while(e!==null);$t=6,lt=null}function s_(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do sh();while(Ee!==0);if(wt&6)throw Error(j(327));if(t!==null){if(t===e.current)throw Error(j(177));if(r=t.lanes|t.childLanes,r|=bm,Qw(e,n,r,a,l,u),e===Nt&&(lt=Nt=null,yt=0),ha=t,ts=e,Zr=n,_d=r,vd=s,b0=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,_R(Xu,function(){return M0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=nt.T,nt.T=null,s=bt.p,bt.p=2,a=wt,wt|=4;try{oR(e,t,n)}finally{wt=a,bt.p=s,nt.T=i}}Ee=1,N0(),D0(),O0()}}function N0(){if(Ee===1){Ee=0;var e=ts,t=ha,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=nt.T,nt.T=null;var i=bt.p;bt.p=2;var s=wt;wt|=4;try{p0(t,e);var r=wd,a=ZE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&XE(l.ownerDocument.documentElement,l)){if(u!==null&&Tm(l)){var h=u.start,m=u.end;if(m===void 0&&(m=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(m,l.value.length);else{var g=l.ownerDocument||document,p=g&&g.defaultView||window;if(p.getSelection){var _=p.getSelection(),I=l.textContent.length,O=Math.min(u.start,I),V=u.end===void 0?O:Math.min(u.end,I);!_.extend&&O>V&&(a=V,V=O,O=a);var S=wy(l,O),E=wy(l,V);if(S&&E&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var R=g.createRange();R.setStart(S.node,S.offset),_.removeAllRanges(),O>V?(_.addRange(R),_.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Tc=!!Sd,wd=Sd=null}finally{wt=s,bt.p=i,nt.T=n}}e.current=t,Ee=2}}function D0(){if(Ee===2){Ee=0;var e=ts,t=ha,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=nt.T,nt.T=null;var i=bt.p;bt.p=2;var s=wt;wt|=4;try{h0(e,t.alternate,t)}finally{wt=s,bt.p=i,nt.T=n}}Ee=3}}function O0(){if(Ee===4||Ee===3){Ee=0,jw();var e=ts,t=ha,n=Zr,i=b0;t.subtreeFlags&10256||t.flags&10256?Ee=5:(Ee=0,ha=ts=null,V0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Ji=null),mm(n),t=t.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=nt.T,s=bt.p,bt.p=2,nt.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{nt.T=t,bt.p=s}}Zr&3&&sh(),$n(e),s=e.pendingLanes,n&4194090&&s&42?e===Ed?Co++:(Co=0,Ed=e):Co=0,bl(0)}}function V0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,yl(t)))}function sh(e){return N0(),D0(),O0(),M0()}function M0(){if(Ee!==5)return!1;var e=ts,t=_d;_d=0;var n=mm(Zr),i=nt.T,s=bt.p;try{bt.p=32>n?32:n,nt.T=null,n=vd,vd=null;var r=ts,a=Zr;if(Ee=0,ha=ts=null,Zr=0,wt&6)throw Error(j(331));var l=wt;if(wt|=4,E0(r.current),y0(r,r.current,a,n),wt=l,bl(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(cl,r)}catch{}return!0}finally{bt.p=s,nt.T=i,V0(e,t)}}function r_(e,t,n){t=yn(n,t),t=dd(e.stateNode,t,2),e=Wi(e,t,2),e!==null&&(fl(e,2),$n(e))}function Ct(e,t,n){if(e.tag===3)r_(e,e,n);else for(;t!==null;){if(t.tag===3){r_(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ji===null||!Ji.has(i))){e=yn(n,e),n=ZT(2),i=Wi(t,n,2),i!==null&&(WT(n,i,t,e),fl(i,2),$n(i));break}}t=t.return}}function Ef(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new cR;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Qm=!0,s.add(n),e=pR.bind(null,e,t,n),t.then(e,e))}function pR(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Nt===e&&(yt&n)===n&&($t===4||$t===3&&(yt&62914560)===yt&&300>jn()-Ym?!(wt&2)&&fa(e,0):Km|=n,ca===yt&&(ca=0)),$n(e)}function k0(e,t){t===0&&(t=NE()),e=Ra(e,t),e!==null&&(fl(e,t),$n(e))}function gR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),k0(e,n)}function yR(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(j(314))}i!==null&&i.delete(t),k0(e,n)}function _R(e,t){return fm(e,t)}var mc=null,wr=null,bd=!1,pc=!1,Tf=!1,Ks=0;function $n(e){e!==wr&&e.next===null&&(wr===null?mc=wr=e:wr=wr.next=e),pc=!0,bd||(bd=!0,ER())}function bl(e,t){if(!Tf&&pc){Tf=!0;do for(var n=!1,i=mc;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-an(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,a_(i,r))}else r=yt,r=Qc(i,i===Nt?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||hl(i,r)||(n=!0,a_(i,r));i=i.next}while(n);Tf=!1}}function vR(){P0()}function P0(){pc=bd=!1;var e=0;Ks!==0&&(IR()&&(e=Ks),Ks=0);for(var t=jn(),n=null,i=mc;i!==null;){var s=i.next,r=j0(i,t);r===0?(i.next=null,n===null?mc=s:n.next=s,s===null&&(wr=n)):(n=i,(e!==0||r&3)&&(pc=!0)),i=s}bl(e)}function j0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-an(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=Gw(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=Nt,n=yt,n=Qc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(At===2||At===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Qh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||hl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Qh(i),mm(n)){case 2:case 8:n=xE;break;case 32:n=Xu;break;case 268435456:n=IE;break;default:n=Xu}return i=L0.bind(null,e),n=fm(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Qh(i),e.callbackPriority=2,e.callbackNode=null,2}function L0(e,t){if(Ee!==0&&Ee!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sh()&&e.callbackNode!==n)return null;var i=yt;return i=Qc(e,e===Nt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(S0(e,i,t),j0(e,jn()),e.callbackNode!=null&&e.callbackNode===n?L0.bind(null,e):null)}function a_(e,t){if(sh())return null;S0(e,t,!0)}function ER(){NR(function(){wt&6?fm(RE,vR):P0()})}function Xm(){return Ks===0&&(Ks=CE()),Ks}function o_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wu(""+e)}function l_(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function TR(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=o_((s[Ke]||null).action),a=i.submitter;a&&(t=(t=a[Ke]||null)?o_(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Kc("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ks!==0){var u=a?l_(s,a):new FormData(s);hd(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?l_(s,a):new FormData(s),hd(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var bf=0;bf<Jf.length;bf++){var Af=Jf[bf],bR=Af.toLowerCase(),AR=Af[0].toUpperCase()+Af.slice(1);Cn(bR,"on"+AR)}Cn(JE,"onAnimationEnd");Cn(tT,"onAnimationIteration");Cn(eT,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(z1,"onTransitionRun");Cn(B1,"onTransitionStart");Cn(q1,"onTransitionCancel");Cn(nT,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fo));function U0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(m){lc(m)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(m){lc(m)}s.currentTarget=null,r=u}}}}function ot(e,t){var n=t[Qf];n===void 0&&(n=t[Qf]=new Set);var i=e+"__bubble";n.has(i)||(z0(t,e,2,!1),n.add(i))}function Sf(e,t,n){var i=0;t&&(i|=4),z0(n,e,i,t)}var du="_reactListening"+Math.random().toString(36).slice(2);function Zm(e){if(!e[du]){e[du]=!0,ME.forEach(function(n){n!=="selectionchange"&&(SR.has(n)||Sf(n,!1,e),Sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[du]||(t[du]=!0,Sf("selectionchange",!1,t))}}function z0(e,t,n,i){switch(W0(t)){case 2:var s=ZR;break;case 8:s=WR;break;default:s=ep}n=s.bind(null,t,n,e),s=void 0,!Xf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function wf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=Or(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}qE(function(){var h=r,m=ym(n),g=[];t:{var p=iT.get(e);if(p!==void 0){var _=Kc,I=e;switch(e){case"keypress":if(xu(n)===0)break t;case"keydown":case"keyup":_=_1;break;case"focusin":I="focus",_=tf;break;case"focusout":I="blur",_=tf;break;case"beforeblur":case"afterblur":_=tf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=T1;break;case JE:case tT:case eT:_=u1;break;case nT:_=A1;break;case"scroll":case"scrollend":_=s1;break;case"wheel":_=w1;break;case"copy":case"cut":case"paste":_=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=yy;break;case"toggle":case"beforetoggle":_=x1}var O=(t&4)!==0,V=!O&&(e==="scroll"||e==="scrollend"),S=O?p!==null?p+"Capture":null:p;O=[];for(var E=h,R;E!==null;){var D=E;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||S===null||(D=Lo(E,S),D!=null&&O.push(Go(E,D,R))),V)break;E=E.return}0<O.length&&(p=new _(p,I,null,n,m),g.push({event:p,listeners:O}))}}if(!(t&7)){t:{if(p=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",p&&n!==$f&&(I=n.relatedTarget||n.fromElement)&&(Or(I)||I[Sa]))break t;if((_||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=h,I=I?Or(I):null,I!==null&&(V=ul(I),O=I.tag,I!==V||O!==5&&O!==27&&O!==6)&&(I=null)):(_=null,I=h),_!==I)){if(O=py,D="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(O=yy,D="onPointerLeave",S="onPointerEnter",E="pointer"),V=_==null?p:oo(_),R=I==null?p:oo(I),p=new O(D,E+"leave",_,n,m),p.target=V,p.relatedTarget=R,D=null,Or(m)===h&&(O=new O(S,E+"enter",I,n,m),O.target=R,O.relatedTarget=V,D=O),V=D,_&&I)e:{for(O=_,S=I,E=0,R=O;R;R=Tr(R))E++;for(R=0,D=S;D;D=Tr(D))R++;for(;0<E-R;)O=Tr(O),E--;for(;0<R-E;)S=Tr(S),R--;for(;E--;){if(O===S||S!==null&&O===S.alternate)break e;O=Tr(O),S=Tr(S)}O=null}else O=null;_!==null&&u_(g,p,_,O,!1),I!==null&&V!==null&&u_(g,V,I,O,!0)}}t:{if(p=h?oo(h):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var L=Ty;else if(Ey(p))if(YE)L=j1;else{L=k1;var F=M1}else _=p.nodeName,!_||_.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?h&&gm(h.elementType)&&(L=Ty):L=P1;if(L&&(L=L(e,h))){KE(g,L,n,m);break t}F&&F(e,p,h),e==="focusout"&&h&&p.type==="number"&&h.memoizedProps.value!=null&&Yf(p,"number",p.value)}switch(F=h?oo(h):window,e){case"focusin":(Ey(F)||F.contentEditable==="true")&&(kr=F,Zf=h,vo=null);break;case"focusout":vo=Zf=kr=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,Ry(g,n,m);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":Ry(g,n,m)}var b;if(Em)t:{switch(e){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else Mr?GE(e,n)&&(v="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(FE&&n.locale!=="ko"&&(Mr||v!=="onCompositionStart"?v==="onCompositionEnd"&&Mr&&(b=HE()):(Gi=m,_m="value"in Gi?Gi.value:Gi.textContent,Mr=!0)),F=gc(h,v),0<F.length&&(v=new gy(v,e,null,n,m),g.push({event:v,listeners:F}),b?v.data=b:(b=QE(n),b!==null&&(v.data=b)))),(b=C1?N1(e,n):D1(e,n))&&(v=gc(h,"onBeforeInput"),0<v.length&&(F=new gy("onBeforeInput","beforeinput",null,n,m),g.push({event:F,listeners:v}),F.data=b)),TR(g,e,h,n,m)}U0(g,t)})}function Go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gc(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Lo(e,n),s!=null&&i.unshift(Go(e,s,r)),s=Lo(e,t),s!=null&&i.push(Go(e,s,r))),e.tag===3)return i;e=e.return}return[]}function Tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function u_(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=Lo(n,r),h!=null&&a.unshift(Go(n,h,u))):s||(h=Lo(n,r),h!=null&&a.push(Go(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var wR=/\r\n?/g,RR=/\u0000|\uFFFD/g;function c_(e){return(typeof e=="string"?e:""+e).replace(wR,`
`).replace(RR,"")}function B0(e,t){return t=c_(t),c_(e)===t}function rh(){}function Rt(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ra(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ra(e,""+i);break;case"className":au(e,"class",i);break;case"tabIndex":au(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":au(e,n,i);break;case"style":BE(e,i,r);break;case"data":if(t!=="object"){au(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=wu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Rt(e,t,"name",s.name,s,null),Rt(e,t,"formEncType",s.formEncType,s,null),Rt(e,t,"formMethod",s.formMethod,s,null),Rt(e,t,"formTarget",s.formTarget,s,null)):(Rt(e,t,"encType",s.encType,s,null),Rt(e,t,"method",s.method,s,null),Rt(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=wu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=rh);break;case"onScroll":i!=null&&ot("scroll",e);break;case"onScrollEnd":i!=null&&ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(j(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=wu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":ot("beforetoggle",e),ot("toggle",e),Su(e,"popover",i);break;case"xlinkActuate":ei(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ei(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ei(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ei(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ei(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ei(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ei(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ei(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ei(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Su(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=n1.get(n)||n,Su(e,n,i))}}function Ad(e,t,n,i,s,r){switch(n){case"style":BE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(j(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ra(e,i):(typeof i=="number"||typeof i=="bigint")&&ra(e,""+i);break;case"onScroll":i!=null&&ot("scroll",e);break;case"onScrollEnd":i!=null&&ot("scrollend",e);break;case"onClick":i!=null&&(e.onclick=rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[Ke]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Su(e,n,i)}}}function Ae(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",e),ot("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,t));default:Rt(e,t,r,a,n,null)}}s&&Rt(e,t,"srcSet",n.srcSet,n,null),i&&Rt(e,t,"src",n.src,n,null);return;case"input":ot("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":s=m;break;case"type":a=m;break;case"checked":u=m;break;case"defaultChecked":h=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(j(137,t));break;default:Rt(e,t,i,m,n,null)}}LE(e,r,l,u,h,a,s,!1),Zu(e);return;case"select":ot("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Rt(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Gr(e,!!i,t,!1):n!=null&&Gr(e,!!i,n,!0);return;case"textarea":ot("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(j(91));break;default:Rt(e,t,a,l,n,null)}zE(e,i,s,r),Zu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Rt(e,t,u,i,n,null)}return;case"dialog":ot("beforetoggle",e),ot("toggle",e),ot("cancel",e),ot("close",e);break;case"iframe":case"object":ot("load",e);break;case"video":case"audio":for(i=0;i<Fo.length;i++)ot(Fo[i],e);break;case"image":ot("error",e),ot("load",e);break;case"details":ot("toggle",e);break;case"embed":case"source":case"link":ot("error",e),ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,t));default:Rt(e,t,h,i,n,null)}return;default:if(gm(t)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Ad(e,t,m,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Rt(e,t,l,i,n,null))}function xR(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,m=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Rt(e,t,_,null,i,g)}}for(var p in i){var _=i[p];if(g=n[p],i.hasOwnProperty(p)&&(_!=null||g!=null))switch(p){case"type":r=_;break;case"name":s=_;break;case"checked":h=_;break;case"defaultChecked":m=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(j(137,t));break;default:_!==g&&Rt(e,t,p,_,i,g)}}Kf(e,a,l,u,h,m,r,s);return;case"select":_=a=l=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Rt(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Rt(e,t,s,r,i,u)}t=l,n=a,i=_,p!=null?Gr(e,!!n,p,!1):!!i!=!!n&&(t!=null?Gr(e,!!n,t,!0):Gr(e,!!n,n?[]:"",!1));return;case"textarea":_=p=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Rt(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(j(91));break;default:s!==r&&Rt(e,t,a,s,i,r)}UE(e,p,_);return;case"option":for(var I in n)if(p=n[I],n.hasOwnProperty(I)&&p!=null&&!i.hasOwnProperty(I))switch(I){case"selected":e.selected=!1;break;default:Rt(e,t,I,null,i,p)}for(u in i)if(p=i[u],_=n[u],i.hasOwnProperty(u)&&p!==_&&(p!=null||_!=null))switch(u){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Rt(e,t,u,p,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)p=n[O],n.hasOwnProperty(O)&&p!=null&&!i.hasOwnProperty(O)&&Rt(e,t,O,null,i,p);for(h in i)if(p=i[h],_=n[h],i.hasOwnProperty(h)&&p!==_&&(p!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(j(137,t));break;default:Rt(e,t,h,p,i,_)}return;default:if(gm(t)){for(var V in n)p=n[V],n.hasOwnProperty(V)&&p!==void 0&&!i.hasOwnProperty(V)&&Ad(e,t,V,void 0,i,p);for(m in i)p=i[m],_=n[m],!i.hasOwnProperty(m)||p===_||p===void 0&&_===void 0||Ad(e,t,m,p,i,_);return}}for(var S in n)p=n[S],n.hasOwnProperty(S)&&p!=null&&!i.hasOwnProperty(S)&&Rt(e,t,S,null,i,p);for(g in i)p=i[g],_=n[g],!i.hasOwnProperty(g)||p===_||p==null&&_==null||Rt(e,t,g,p,i,_)}var Sd=null,wd=null;function yc(e){return e.nodeType===9?e:e.ownerDocument}function h_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rf=null;function IR(){var e=window.event;return e&&e.type==="popstate"?e===Rf?!1:(Rf=e,!0):(Rf=null,!1)}var H0=typeof setTimeout=="function"?setTimeout:void 0,CR=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,NR=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(e){return f_.resolve(null).then(e).catch(DR)}:H0;function DR(e){setTimeout(function(){throw e})}function Es(e){return e==="head"}function d_(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&No(a.documentElement),n&2&&No(a.body),n&4)for(n=a.head,No(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[dl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Xo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Xo(t)}function xd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xd(n),pm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function OR(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[dl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Rn(e.nextSibling),e===null)break}return null}function VR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Rn(e.nextSibling),e===null))return null;return e}function Id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function MR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Cd=null;function m_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function F0(e,t,n){switch(t=yc(n),e){case"html":if(e=t.documentElement,!e)throw Error(j(452));return e;case"head":if(e=t.head,!e)throw Error(j(453));return e;case"body":if(e=t.body,!e)throw Error(j(454));return e;default:throw Error(j(451))}}function No(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pm(e)}var Tn=new Map,p_=new Set;function _c(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ai=bt.d;bt.d={f:kR,r:PR,D:jR,C:LR,L:UR,m:zR,X:qR,S:BR,M:HR};function kR(){var e=Ai.f(),t=nh();return e||t}function PR(e){var t=wa(e);t!==null&&t.tag===5&&t.type==="form"?jT(t):Ai.r(e)}var Ia=typeof document>"u"?null:document;function G0(e,t,n){var i=Ia;if(i&&typeof t=="string"&&t){var s=gn(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),p_.has(s)||(p_.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),Ae(t,"link",e),fe(t),i.head.appendChild(t)))}}function jR(e){Ai.D(e),G0("dns-prefetch",e,null)}function LR(e,t){Ai.C(e,t),G0("preconnect",e,t)}function UR(e,t,n){Ai.L(e,t,n);var i=Ia;if(i&&e&&t){var s='link[rel="preload"][as="'+gn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+gn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+gn(n.imageSizes)+'"]')):s+='[href="'+gn(e)+'"]';var r=s;switch(t){case"style":r=da(e);break;case"script":r=Ca(e)}Tn.has(r)||(e=jt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Tn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(Al(r))||t==="script"&&i.querySelector(Sl(r))||(t=i.createElement("link"),Ae(t,"link",e),fe(t),i.head.appendChild(t)))}}function zR(e,t){Ai.m(e,t);var n=Ia;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+gn(i)+'"][href="'+gn(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ca(e)}if(!Tn.has(r)&&(e=jt({rel:"modulepreload",href:e},t),Tn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sl(r)))return}i=n.createElement("link"),Ae(i,"link",e),fe(i),n.head.appendChild(i)}}}function BR(e,t,n){Ai.S(e,t,n);var i=Ia;if(i&&e){var s=Fr(i).hoistableStyles,r=da(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Al(r)))l.loading=5;else{e=jt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Tn.get(r))&&Wm(e,n);var u=a=i.createElement("link");fe(u),Ae(u,"link",e),u._p=new Promise(function(h,m){u.onload=h,u.onerror=m}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Mu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function qR(e,t){Ai.X(e,t);var n=Ia;if(n&&e){var i=Fr(n).hoistableScripts,s=Ca(e),r=i.get(s);r||(r=n.querySelector(Sl(s)),r||(e=jt({src:e,async:!0},t),(t=Tn.get(s))&&Jm(e,t),r=n.createElement("script"),fe(r),Ae(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function HR(e,t){Ai.M(e,t);var n=Ia;if(n&&e){var i=Fr(n).hoistableScripts,s=Ca(e),r=i.get(s);r||(r=n.querySelector(Sl(s)),r||(e=jt({src:e,async:!0,type:"module"},t),(t=Tn.get(s))&&Jm(e,t),r=n.createElement("script"),fe(r),Ae(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function g_(e,t,n,i){var s=(s=Xi.current)?_c(s):null;if(!s)throw Error(j(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=da(n.href),n=Fr(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=da(n.href);var r=Fr(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(Al(e)))&&!r._p&&(a.instance=r,a.state.loading=5),Tn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Tn.set(e,n),r||FR(s,e,n,a.state))),t&&i===null)throw Error(j(528,""));return a}if(t&&i!==null)throw Error(j(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ca(n),n=Fr(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,e))}}function da(e){return'href="'+gn(e)+'"'}function Al(e){return'link[rel="stylesheet"]['+e+"]"}function Q0(e){return jt({},e,{"data-precedence":e.precedence,precedence:null})}function FR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ae(t,"link",n),fe(t),e.head.appendChild(t))}function Ca(e){return'[src="'+gn(e)+'"]'}function Sl(e){return"script[async]"+e}function y_(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+gn(n.href)+'"]');if(i)return t.instance=i,fe(i),i;var s=jt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),fe(i),Ae(i,"style",s),Mu(i,n.precedence,e),t.instance=i;case"stylesheet":s=da(n.href);var r=e.querySelector(Al(s));if(r)return t.state.loading|=4,t.instance=r,fe(r),r;i=Q0(n),(s=Tn.get(s))&&Wm(i,s),r=(e.ownerDocument||e).createElement("link"),fe(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ae(r,"link",i),t.state.loading|=4,Mu(r,n.precedence,e),t.instance=r;case"script":return r=Ca(n.src),(s=e.querySelector(Sl(r)))?(t.instance=s,fe(s),s):(i=n,(s=Tn.get(r))&&(i=jt({},n),Jm(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),fe(s),Ae(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(j(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Mu(i,n.precedence,e));return t.instance}function Mu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Wm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Jm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ku=null;function __(e,t,n){if(ku===null){var i=new Map,s=ku=new Map;s.set(n,i)}else s=ku,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[dl]||r[De]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function v_(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function GR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function K0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Qo=null;function QR(){}function KR(e,t,n){if(Qo===null)throw Error(j(475));var i=Qo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=da(n.href),r=e.querySelector(Al(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=vc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,fe(r);return}r=e.ownerDocument||e,n=Q0(n),(s=Tn.get(s))&&Wm(n,s),r=r.createElement("link"),fe(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ae(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=vc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function YR(){if(Qo===null)throw Error(j(475));var e=Qo;return e.stylesheets&&e.count===0&&Nd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Nd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function vc(){if(this.count--,this.count===0){if(this.stylesheets)Nd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ec=null;function Nd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ec=new Map,t.forEach($R,e),Ec=null,vc.call(e))}function $R(e,t){if(!(t.state.loading&4)){var n=Ec.get(e);if(n)var i=n.get(null);else{n=new Map,Ec.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=vc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Ko={$$typeof:ri,Provider:null,Consumer:null,_currentValue:Bs,_currentValue2:Bs,_threadCount:0};function XR(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.hiddenUpdates=Kh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Y0(e,t,n,i,s,r,a,l,u,h,m,g){return e=new XR(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=en(3,null,null,t),e.current=r,r.stateNode=e,t=xm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},Cm(r),e}function $0(e){return e?(e=Lr,e):Lr}function X0(e,t,n,i,s,r){s=$0(s),i.context===null?i.context=s:i.pendingContext=s,i=Zi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Wi(e,i,t),n!==null&&(ln(n,e,t),bo(n,e,t))}function E_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tp(e,t){E_(e,t),(e=e.alternate)&&E_(e,t)}function Z0(e){if(e.tag===13){var t=Ra(e,67108864);t!==null&&ln(t,e,67108864),tp(e,67108864)}}var Tc=!0;function ZR(e,t,n,i){var s=nt.T;nt.T=null;var r=bt.p;try{bt.p=2,ep(e,t,n,i)}finally{bt.p=r,nt.T=s}}function WR(e,t,n,i){var s=nt.T;nt.T=null;var r=bt.p;try{bt.p=8,ep(e,t,n,i)}finally{bt.p=r,nt.T=s}}function ep(e,t,n,i){if(Tc){var s=Dd(i);if(s===null)wf(e,t,i,bc,n),T_(e,i);else if(t2(s,e,t,n,i))i.stopPropagation();else if(T_(e,i),t&4&&-1<JR.indexOf(e)){for(;s!==null;){var r=wa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Ms(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-an(a);l.entanglements[1]|=u,a&=~u}$n(r),!(wt&6)&&(fc=jn()+500,bl(0))}}break;case 13:l=Ra(r,2),l!==null&&ln(l,r,2),nh(),tp(r,2)}if(r=Dd(i),r===null&&wf(e,t,i,bc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else wf(e,t,i,null,n)}}function Dd(e){return e=ym(e),np(e)}var bc=null;function np(e){if(bc=null,e=Or(e),e!==null){var t=ul(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=bE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bc=e,null}function W0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lw()){case RE:return 2;case xE:return 8;case Xu:case Uw:return 32;case IE:return 268435456;default:return 32}default:return 32}}var Od=!1,es=null,ns=null,is=null,Yo=new Map,$o=new Map,Ui=[],JR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$o.delete(t.pointerId)}}function so(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=wa(t),t!==null&&Z0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function t2(e,t,n,i,s){switch(t){case"focusin":return es=so(es,e,t,n,i,s),!0;case"dragenter":return ns=so(ns,e,t,n,i,s),!0;case"mouseover":return is=so(is,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Yo.set(r,so(Yo.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,$o.set(r,so($o.get(r)||null,e,t,n,i,s)),!0}return!1}function J0(e){var t=Or(e.target);if(t!==null){var n=ul(t);if(n!==null){if(t=n.tag,t===13){if(t=bE(n),t!==null){e.blockedOn=t,Kw(e.priority,function(){if(n.tag===13){var i=on();i=dm(i);var s=Ra(n,i);s!==null&&ln(s,n,i),tp(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);$f=i,n.target.dispatchEvent(i),$f=null}else return t=wa(n),t!==null&&Z0(t),e.blockedOn=n,!1;t.shift()}return!0}function b_(e,t,n){Pu(e)&&n.delete(t)}function e2(){Od=!1,es!==null&&Pu(es)&&(es=null),ns!==null&&Pu(ns)&&(ns=null),is!==null&&Pu(is)&&(is=null),Yo.forEach(b_),$o.forEach(b_)}function mu(e,t){e.blockedOn===t&&(e.blockedOn=null,Od||(Od=!0,ue.unstable_scheduleCallback(ue.unstable_NormalPriority,e2)))}var pu=null;function A_(e){pu!==e&&(pu=e,ue.unstable_scheduleCallback(ue.unstable_NormalPriority,function(){pu===e&&(pu=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(np(i||n)===null)continue;break}var r=wa(n);r!==null&&(e.splice(t,3),t-=3,hd(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Xo(e){function t(u){return mu(u,e)}es!==null&&mu(es,e),ns!==null&&mu(ns,e),is!==null&&mu(is,e),Yo.forEach(t),$o.forEach(t);for(var n=0;n<Ui.length;n++){var i=Ui[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ui.length&&(n=Ui[0],n.blockedOn===null);)J0(n),n.blockedOn===null&&Ui.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Ke]||null;if(typeof r=="function")a||A_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Ke]||null)l=a.formAction;else if(np(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),A_(n)}}}function ip(e){this._internalRoot=e}ah.prototype.render=ip.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));var n=t.current,i=on();X0(n,i,e,t,null,null)};ah.prototype.unmount=ip.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;X0(e.current,2,null,e,null,null),nh(),t[Sa]=null}};function ah(e){this._internalRoot=e}ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=VE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ui.length&&t!==0&&t<Ui[n].priority;n++);Ui.splice(n,0,e),n===0&&J0(e)}};var S_=EE.version;if(S_!=="19.1.1")throw Error(j(527,S_,"19.1.1"));bt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=Dw(t),e=e!==null?AE(e):null,e=e===null?null:e.stateNode,e};var n2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{cl=gu.inject(n2),rn=gu}catch{}}Fc.createRoot=function(e,t){if(!TE(e))throw Error(j(299));var n=!1,i="",s=YT,r=$T,a=XT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=Y0(e,1,!1,null,null,n,i,s,r,a,l,null),e[Sa]=t.current,Zm(e),new ip(t)};Fc.hydrateRoot=function(e,t,n){if(!TE(e))throw Error(j(299));var i=!1,s="",r=YT,a=$T,l=XT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=Y0(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=$0(null),n=t.current,i=on(),i=dm(i),s=Zi(i),s.callback=null,Wi(n,s,i),n=i,t.current.lanes=n,fl(t,n),$n(t),e[Sa]=t.current,Zm(e),new ah(t)};Fc.version="19.1.1";function tb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tb)}catch(e){console.error(e)}}tb(),mE.exports=Fc;var i2=mE.exports;const s2=()=>{};var w_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},r2=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,m=r>>2,g=(r&3)<<4|l>>4;let p=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(p=64)),i.push(n[m],n[g],n[p],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(eb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):r2(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new a2;const p=r<<2|l>>4;if(i.push(p),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const I=h<<6&192|g;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o2=function(e){const t=eb(e);return nb.encodeByteArray(t,!0)},Ac=function(e){return o2(e).replace(/\./g,"")},ib=function(e){try{return nb.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=()=>l2().__FIREBASE_DEFAULTS__,c2=()=>{if(typeof process>"u"||typeof w_>"u")return;const e=w_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},h2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ib(e[1]);return t&&JSON.parse(t)},oh=()=>{try{return s2()||u2()||c2()||h2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sb=e=>{var t,n;return(n=(t=oh())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},f2=e=>{const t=sb(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},rb=()=>{var e;return(e=oh())==null?void 0:e.config},ab=e=>{var t;return(t=oh())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ob(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Ac(JSON.stringify(n)),Ac(JSON.stringify(a)),""].join(".")}const Do={};function p2(){const e={prod:[],emulator:[]};for(const t of Object.keys(Do))Do[t]?e.emulator.push(t):e.prod.push(t);return e}function g2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let R_=!1;function lb(e,t){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||Do[e]===t||Do[e]||R_)return;Do[e]=t;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=p2().prod.length>0;function a(){const p=document.getElementById(i);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function h(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{R_=!0,a()},p}function m(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function g(){const p=g2(i),_=n("text"),I=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const R=p.element;l(R),m(V,O);const D=h();u(E,S),R.append(E,I,V,D),document.body.appendChild(R)}r?(I.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function _2(){var t;const e=(t=oh())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function T2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A2(){return!_2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S2(){try{return typeof indexedDB=="object"}catch{return!1}}function w2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="FirebaseError";class Si extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=R2,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?x2(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Si(s,l,i)}}function x2(e,t){return e.replace(I2,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const I2=/\{\$([^}]+)}/g;function C2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Js(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(x_(r)&&x_(a)){if(!Js(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function x_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function uo(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function co(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function N2(e,t){const n=new D2(e,t);return n.subscribe.bind(n)}class D2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");O2(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=xf),s.error===void 0&&(s.error=xf),s.complete===void 0&&(s.complete=xf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function xf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(e){return e&&e._delegate?e._delegate:e}class tr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new d2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(k2(t))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=js){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=js){return this.instances.has(t)}getOptions(t=js){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:M2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=js){return this.component?this.component.multipleInstances?t:js:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M2(e){return e===js?void 0:e}function k2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new V2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ut||(ut={}));const j2={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},L2=ut.INFO,U2={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},z2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=U2[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class sp{constructor(t){this.name=t,this._logLevel=L2,this._logHandler=z2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?j2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const B2=(e,t)=>t.some(n=>e instanceof n);let I_,C_;function q2(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H2(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,Vd=new WeakMap,cb=new WeakMap,If=new WeakMap,rp=new WeakMap;function F2(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(ss(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&ub.set(n,e)}).catch(()=>{}),rp.set(t,e),t}function G2(e){if(Vd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});Vd.set(e,t)}let Md={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Vd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||cb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Q2(e){Md=e(Md)}function K2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Cf(this),t,...n);return cb.set(i,t.sort?t.sort():[t]),ss(i)}:H2().includes(e)?function(...t){return e.apply(Cf(this),t),ss(ub.get(this))}:function(...t){return ss(e.apply(Cf(this),t))}}function Y2(e){return typeof e=="function"?K2(e):(e instanceof IDBTransaction&&G2(e),B2(e,q2())?new Proxy(e,Md):e)}function ss(e){if(e instanceof IDBRequest)return F2(e);if(If.has(e))return If.get(e);const t=Y2(e);return t!==e&&(If.set(e,t),rp.set(t,e)),t}const Cf=e=>rp.get(e);function $2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=ss(a);return i&&a.addEventListener("upgradeneeded",u=>{i(ss(a.result),u.oldVersion,u.newVersion,ss(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const X2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],Nf=new Map;function N_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Nf.get(t))return Nf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=Z2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||X2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Nf.set(t,r),r}Q2(e=>({...e,get:(t,n,i)=>N_(t,n)||e.get(t,n,i),has:(t,n)=>!!N_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(J2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function J2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kd="@firebase/app",D_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new sp("@firebase/app"),tx="@firebase/app-compat",ex="@firebase/analytics-compat",nx="@firebase/analytics",ix="@firebase/app-check-compat",sx="@firebase/app-check",rx="@firebase/auth",ax="@firebase/auth-compat",ox="@firebase/database",lx="@firebase/data-connect",ux="@firebase/database-compat",cx="@firebase/functions",hx="@firebase/functions-compat",fx="@firebase/installations",dx="@firebase/installations-compat",mx="@firebase/messaging",px="@firebase/messaging-compat",gx="@firebase/performance",yx="@firebase/performance-compat",_x="@firebase/remote-config",vx="@firebase/remote-config-compat",Ex="@firebase/storage",Tx="@firebase/storage-compat",bx="@firebase/firestore",Ax="@firebase/ai",Sx="@firebase/firestore-compat",wx="firebase",Rx="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]",xx={[kd]:"fire-core",[tx]:"fire-core-compat",[nx]:"fire-analytics",[ex]:"fire-analytics-compat",[sx]:"fire-app-check",[ix]:"fire-app-check-compat",[rx]:"fire-auth",[ax]:"fire-auth-compat",[ox]:"fire-rtdb",[lx]:"fire-data-connect",[ux]:"fire-rtdb-compat",[cx]:"fire-fn",[hx]:"fire-fn-compat",[fx]:"fire-iid",[dx]:"fire-iid-compat",[mx]:"fire-fcm",[px]:"fire-fcm-compat",[gx]:"fire-perf",[yx]:"fire-perf-compat",[_x]:"fire-rc",[vx]:"fire-rc-compat",[Ex]:"fire-gcs",[Tx]:"fire-gcs-compat",[bx]:"fire-fst",[Sx]:"fire-fst-compat",[Ax]:"fire-vertex","fire-js":"fire-js",[wx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Map,Ix=new Map,jd=new Map;function O_(e,t){try{e.container.addComponent(t)}catch(n){vi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ma(e){const t=e.name;if(jd.has(t))return vi.debug(`There were multiple attempts to register component ${t}.`),!1;jd.set(t,e);for(const n of Sc.values())O_(n,e);for(const n of Ix.values())O_(n,e);return!0}function ap(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _n(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new wl("app","Firebase",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=Rx;function hb(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Pd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw rs.create("bad-app-name",{appName:String(s)});if(n||(n=rb()),!n)throw rs.create("no-options");const r=Sc.get(s);if(r){if(Js(n,r.options)&&Js(i,r.config))return r;throw rs.create("duplicate-app",{appName:s})}const a=new P2(s);for(const u of jd.values())a.addComponent(u);const l=new Nx(n,i,a);return Sc.set(s,l),l}function fb(e=Pd){const t=Sc.get(e);if(!t&&e===Pd&&rb())return hb();if(!t)throw rs.create("no-app",{appName:e});return t}function as(e,t,n){let i=xx[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}ma(new tr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="firebase-heartbeat-database",Ox=1,Zo="firebase-heartbeat-store";let Df=null;function db(){return Df||(Df=$2(Dx,Ox,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Zo)}catch(n){console.warn(n)}}}}).catch(e=>{throw rs.create("idb-open",{originalErrorMessage:e.message})})),Df}async function Vx(e){try{const n=(await db()).transaction(Zo),i=await n.objectStore(Zo).get(mb(e));return await n.done,i}catch(t){if(t instanceof Si)vi.warn(t.message);else{const n=rs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vi.warn(n.message)}}}async function V_(e,t){try{const i=(await db()).transaction(Zo,"readwrite");await i.objectStore(Zo).put(t,mb(e)),await i.done}catch(n){if(n instanceof Si)vi.warn(n.message);else{const i=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(i.message)}}}function mb(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=1024,kx=30;class Px{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Lx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=M_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>kx){const a=Ux(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M_(),{heartbeatsToSend:i,unsentEntries:s}=jx(this._heartbeatsCache.heartbeats),r=Ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return vi.warn(n),""}}}function M_(){return new Date().toISOString().substring(0,10)}function jx(e,t=Mx){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),k_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Lx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S2()?w2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Vx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function k_(e){return Ac(JSON.stringify({version:2,heartbeats:e})).length}function Ux(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(e){ma(new tr("platform-logger",t=>new W2(t),"PRIVATE")),ma(new tr("heartbeat",t=>new Px(t),"PRIVATE")),as(kd,D_,e),as(kd,D_,"esm2020"),as("fire-js","")}zx("");var P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,pb;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,v){function A(){}A.prototype=v.prototype,b.D=v.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(w,x,C){for(var T=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)T[ft-2]=arguments[ft];return v.prototype[x].apply(w,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,v,A){A||(A=0);var w=Array(16);if(typeof v=="string")for(var x=0;16>x;++x)w[x]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(x=0;16>x;++x)w[x]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=b.g[0],A=b.g[1],x=b.g[2];var C=b.g[3],T=v+(C^A&(x^C))+w[0]+3614090360&4294967295;v=A+(T<<7&4294967295|T>>>25),T=C+(x^v&(A^x))+w[1]+3905402710&4294967295,C=v+(T<<12&4294967295|T>>>20),T=x+(A^C&(v^A))+w[2]+606105819&4294967295,x=C+(T<<17&4294967295|T>>>15),T=A+(v^x&(C^v))+w[3]+3250441966&4294967295,A=x+(T<<22&4294967295|T>>>10),T=v+(C^A&(x^C))+w[4]+4118548399&4294967295,v=A+(T<<7&4294967295|T>>>25),T=C+(x^v&(A^x))+w[5]+1200080426&4294967295,C=v+(T<<12&4294967295|T>>>20),T=x+(A^C&(v^A))+w[6]+2821735955&4294967295,x=C+(T<<17&4294967295|T>>>15),T=A+(v^x&(C^v))+w[7]+4249261313&4294967295,A=x+(T<<22&4294967295|T>>>10),T=v+(C^A&(x^C))+w[8]+1770035416&4294967295,v=A+(T<<7&4294967295|T>>>25),T=C+(x^v&(A^x))+w[9]+2336552879&4294967295,C=v+(T<<12&4294967295|T>>>20),T=x+(A^C&(v^A))+w[10]+4294925233&4294967295,x=C+(T<<17&4294967295|T>>>15),T=A+(v^x&(C^v))+w[11]+2304563134&4294967295,A=x+(T<<22&4294967295|T>>>10),T=v+(C^A&(x^C))+w[12]+1804603682&4294967295,v=A+(T<<7&4294967295|T>>>25),T=C+(x^v&(A^x))+w[13]+4254626195&4294967295,C=v+(T<<12&4294967295|T>>>20),T=x+(A^C&(v^A))+w[14]+2792965006&4294967295,x=C+(T<<17&4294967295|T>>>15),T=A+(v^x&(C^v))+w[15]+1236535329&4294967295,A=x+(T<<22&4294967295|T>>>10),T=v+(x^C&(A^x))+w[1]+4129170786&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^x&(v^A))+w[6]+3225465664&4294967295,C=v+(T<<9&4294967295|T>>>23),T=x+(v^A&(C^v))+w[11]+643717713&4294967295,x=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(x^C))+w[0]+3921069994&4294967295,A=x+(T<<20&4294967295|T>>>12),T=v+(x^C&(A^x))+w[5]+3593408605&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^x&(v^A))+w[10]+38016083&4294967295,C=v+(T<<9&4294967295|T>>>23),T=x+(v^A&(C^v))+w[15]+3634488961&4294967295,x=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(x^C))+w[4]+3889429448&4294967295,A=x+(T<<20&4294967295|T>>>12),T=v+(x^C&(A^x))+w[9]+568446438&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^x&(v^A))+w[14]+3275163606&4294967295,C=v+(T<<9&4294967295|T>>>23),T=x+(v^A&(C^v))+w[3]+4107603335&4294967295,x=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(x^C))+w[8]+1163531501&4294967295,A=x+(T<<20&4294967295|T>>>12),T=v+(x^C&(A^x))+w[13]+2850285829&4294967295,v=A+(T<<5&4294967295|T>>>27),T=C+(A^x&(v^A))+w[2]+4243563512&4294967295,C=v+(T<<9&4294967295|T>>>23),T=x+(v^A&(C^v))+w[7]+1735328473&4294967295,x=C+(T<<14&4294967295|T>>>18),T=A+(C^v&(x^C))+w[12]+2368359562&4294967295,A=x+(T<<20&4294967295|T>>>12),T=v+(A^x^C)+w[5]+4294588738&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^x)+w[8]+2272392833&4294967295,C=v+(T<<11&4294967295|T>>>21),T=x+(C^v^A)+w[11]+1839030562&4294967295,x=C+(T<<16&4294967295|T>>>16),T=A+(x^C^v)+w[14]+4259657740&4294967295,A=x+(T<<23&4294967295|T>>>9),T=v+(A^x^C)+w[1]+2763975236&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^x)+w[4]+1272893353&4294967295,C=v+(T<<11&4294967295|T>>>21),T=x+(C^v^A)+w[7]+4139469664&4294967295,x=C+(T<<16&4294967295|T>>>16),T=A+(x^C^v)+w[10]+3200236656&4294967295,A=x+(T<<23&4294967295|T>>>9),T=v+(A^x^C)+w[13]+681279174&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^x)+w[0]+3936430074&4294967295,C=v+(T<<11&4294967295|T>>>21),T=x+(C^v^A)+w[3]+3572445317&4294967295,x=C+(T<<16&4294967295|T>>>16),T=A+(x^C^v)+w[6]+76029189&4294967295,A=x+(T<<23&4294967295|T>>>9),T=v+(A^x^C)+w[9]+3654602809&4294967295,v=A+(T<<4&4294967295|T>>>28),T=C+(v^A^x)+w[12]+3873151461&4294967295,C=v+(T<<11&4294967295|T>>>21),T=x+(C^v^A)+w[15]+530742520&4294967295,x=C+(T<<16&4294967295|T>>>16),T=A+(x^C^v)+w[2]+3299628645&4294967295,A=x+(T<<23&4294967295|T>>>9),T=v+(x^(A|~C))+w[0]+4096336452&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~x))+w[7]+1126891415&4294967295,C=v+(T<<10&4294967295|T>>>22),T=x+(v^(C|~A))+w[14]+2878612391&4294967295,x=C+(T<<15&4294967295|T>>>17),T=A+(C^(x|~v))+w[5]+4237533241&4294967295,A=x+(T<<21&4294967295|T>>>11),T=v+(x^(A|~C))+w[12]+1700485571&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~x))+w[3]+2399980690&4294967295,C=v+(T<<10&4294967295|T>>>22),T=x+(v^(C|~A))+w[10]+4293915773&4294967295,x=C+(T<<15&4294967295|T>>>17),T=A+(C^(x|~v))+w[1]+2240044497&4294967295,A=x+(T<<21&4294967295|T>>>11),T=v+(x^(A|~C))+w[8]+1873313359&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~x))+w[15]+4264355552&4294967295,C=v+(T<<10&4294967295|T>>>22),T=x+(v^(C|~A))+w[6]+2734768916&4294967295,x=C+(T<<15&4294967295|T>>>17),T=A+(C^(x|~v))+w[13]+1309151649&4294967295,A=x+(T<<21&4294967295|T>>>11),T=v+(x^(A|~C))+w[4]+4149444226&4294967295,v=A+(T<<6&4294967295|T>>>26),T=C+(A^(v|~x))+w[11]+3174756917&4294967295,C=v+(T<<10&4294967295|T>>>22),T=x+(v^(C|~A))+w[2]+718787259&4294967295,x=C+(T<<15&4294967295|T>>>17),T=A+(C^(x|~v))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(x+(T<<21&4294967295|T>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+C&4294967295}i.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var A=v-this.blockSize,w=this.B,x=this.h,C=0;C<v;){if(x==0)for(;C<=A;)s(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<v;)if(w[x++]=b.charCodeAt(C++),x==this.blockSize){s(this,w),x=0;break}}else for(;C<v;)if(w[x++]=b[C++],x==this.blockSize){s(this,w),x=0;break}}this.h=x,this.o+=v},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var A=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=A&255,A/=256;for(this.u(b),b=Array(16),v=A=0;4>v;++v)for(var w=0;32>w;w+=8)b[A++]=this.g[v]>>>w&255;return b};function r(b,v){var A=l;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=v(b)}function a(b,v){this.h=v;for(var A=[],w=!0,x=b.length-1;0<=x;x--){var C=b[x]|0;w&&C==v||(A[x]=C,w=!1)}this.g=A}var l={};function u(b){return-128<=b&&128>b?r(b,function(v){return new a([v|0],0>v?-1:0)}):new a([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return V(h(-b));for(var v=[],A=1,w=0;b>=A;w++)v[w]=b/A|0,A*=4294967296;return new a(v,0)}function m(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return V(m(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(v,8)),w=g,x=0;x<b.length;x+=8){var C=Math.min(8,b.length-x),T=parseInt(b.substring(x,x+C),v);8>C?(C=h(Math.pow(v,C)),w=w.j(C).add(h(T))):(w=w.j(A),w=w.add(h(T)))}return w}var g=u(0),p=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-V(this).m();for(var b=0,v=1,A=0;A<this.g.length;A++){var w=this.i(A);b+=(0<=w?w:4294967296+w)*v,v*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(O(this))return"-"+V(this).toString(b);for(var v=h(Math.pow(b,6)),A=this,w="";;){var x=D(A,v).g;A=S(A,x.j(v));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=x,I(A))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function O(b){return b.h==-1}e.l=function(b){return b=S(this,b),O(b)?-1:I(b)?0:1};function V(b){for(var v=b.g.length,A=[],w=0;w<v;w++)A[w]=~b.g[w];return new a(A,~b.h).add(p)}e.abs=function(){return O(this)?V(this):this},e.add=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0,x=0;x<=v;x++){var C=w+(this.i(x)&65535)+(b.i(x)&65535),T=(C>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);w=T>>>16,C&=65535,T&=65535,A[x]=T<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function S(b,v){return b.add(V(v))}e.j=function(b){if(I(this)||I(b))return g;if(O(this))return O(b)?V(this).j(V(b)):V(V(this).j(b));if(O(b))return V(this.j(V(b)));if(0>this.l(_)&&0>b.l(_))return h(this.m()*b.m());for(var v=this.g.length+b.g.length,A=[],w=0;w<2*v;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(var x=0;x<b.g.length;x++){var C=this.i(w)>>>16,T=this.i(w)&65535,ft=b.i(x)>>>16,Dt=b.i(x)&65535;A[2*w+2*x]+=T*Dt,E(A,2*w+2*x),A[2*w+2*x+1]+=C*Dt,E(A,2*w+2*x+1),A[2*w+2*x+1]+=T*ft,E(A,2*w+2*x+1),A[2*w+2*x+2]+=C*ft,E(A,2*w+2*x+2)}for(w=0;w<v;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=v;w<2*v;w++)A[w]=0;return new a(A,0)};function E(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function R(b,v){this.g=b,this.h=v}function D(b,v){if(I(v))throw Error("division by zero");if(I(b))return new R(g,g);if(O(b))return v=D(V(b),v),new R(V(v.g),V(v.h));if(O(v))return v=D(b,V(v)),new R(V(v.g),v.h);if(30<b.g.length){if(O(b)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var A=p,w=v;0>=w.l(b);)A=L(A),w=L(w);var x=F(A,1),C=F(w,1);for(w=F(w,2),A=F(A,2);!I(w);){var T=C.add(w);0>=T.l(b)&&(x=x.add(A),C=T),w=F(w,1),A=F(A,1)}return v=S(b,x.j(v)),new R(x,v)}for(x=g;0<=b.l(v);){for(A=Math.max(1,Math.floor(b.m()/v.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=h(A),T=C.j(v);O(T)||0<T.l(b);)A-=w,C=h(A),T=C.j(v);I(C)&&(C=p),x=x.add(C),b=S(b,T)}return new R(x,b)}e.A=function(b){return D(this,b).h},e.and=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0;w<v;w++)A[w]=this.i(w)&b.i(w);return new a(A,this.h&b.h)},e.or=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0;w<v;w++)A[w]=this.i(w)|b.i(w);return new a(A,this.h|b.h)},e.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),A=[],w=0;w<v;w++)A[w]=this.i(w)^b.i(w);return new a(A,this.h^b.h)};function L(b){for(var v=b.g.length+1,A=[],w=0;w<v;w++)A[w]=b.i(w)<<1|b.i(w-1)>>>31;return new a(A,b.h)}function F(b,v){var A=v>>5;v%=32;for(var w=b.g.length-A,x=[],C=0;C<w;C++)x[C]=0<v?b.i(C+A)>>>v|b.i(C+A+1)<<32-v:b.i(C+A);return new a(x,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,pb=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,os=a}).apply(typeof P_<"u"?P_:typeof self<"u"?self:typeof window<"u"?window:{});var yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gb,ho,yb,ju,Ld,_b,vb,Eb;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof yu=="object"&&yu];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var d=i;o=o.split(".");for(var y=0;y<o.length-1;y++){var N=o[y];if(!(N in d))break t;d=d[N]}o=o[o.length-1],y=d[o],c=c(y),c!=y&&c!=null&&t(d,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var d=0,y=!1,N={next:function(){if(!y&&d<o.length){var M=d++;return{value:c(M,o[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function m(o,c,d){return o.call.apply(o.bind,arguments)}function g(o,c,d){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function p(o,c,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,p.apply(null,arguments)}function _(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function I(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(y,N,M){for(var H=Array(arguments.length-2),It=2;It<arguments.length;It++)H[It-2]=arguments[It];return c.prototype[N].apply(y,H)}}function O(o){const c=o.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=o[y];return d}return[]}function V(o,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const N=o.length||0,M=y.length||0;o.length=N+M;for(let H=0;H<M;H++)o[N+H]=y[H]}else o.push(y)}}class S{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function F(o,c,d){for(const y in o)c.call(d,o[y],y,o)}function b(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function v(o){const c={};for(const d in o)c[d]=o[d];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let d,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(d in y)o[d]=y[d];for(let M=0;M<A.length;M++)d=A[M],Object.prototype.hasOwnProperty.call(y,d)&&(o[d]=y[d])}}function x(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function C(o){l.setTimeout(()=>{throw o},0)}function T(){var o=vt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ft{constructor(){this.h=this.g=null}add(c,d){const y=Dt.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var Dt=new S(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Y=!1,vt=new ft,mt=()=>{const o=l.Promise.resolve(void 0);K=()=>{o.then(hn)}};var hn=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(d){C(d)}var c=Dt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function ge(o,c){if(Ot.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:fr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ge.aa.h.call(this)}}I(ge,Ot);var fr={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Zn="closure_listenable_"+(1e6*Math.random()|0),bn=0;function Me(o,c,d,y,N){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=N,this.key=++bn,this.da=this.fa=!1}function Nn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ke(o){this.src=o,this.g={},this.h=0}ke.prototype.add=function(o,c,d,y,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var H=we(o,c,y,N);return-1<H?(c=o[H],d||(c.fa=!1)):(c=new Me(c,this.src,M,!!y,N),c.fa=d,o.push(c)),c};function $e(o,c){var d=c.type;if(d in o.g){var y=o.g[d],N=Array.prototype.indexOf.call(y,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(y,N,1),M&&(Nn(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function we(o,c,d,y){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==y)return N}return-1}var Wn="closure_lm_"+(1e6*Math.random()|0),Dn={};function dr(o,c,d,y,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)dr(o,c[M],d,y,N);return null}return d=st(d),o&&o[Zn]?o.K(c,d,h(y)?!!y.capture:!1,N):La(o,c,d,!1,y,N)}function La(o,c,d,y,N,M){if(!c)throw Error("Invalid event type");var H=h(N)?!!N.capture:!!N,It=Is(o);if(It||(o[Wn]=It=new ke(o)),d=It.add(c,d,y,H,M),d.proxy)return d;if(y=ws(),d.proxy=y,y.src=o,y.listener=d,o.addEventListener)qe||(N=H),N===void 0&&(N=!1),o.addEventListener(c.toString(),y,N);else if(o.attachEvent)o.attachEvent(pr(c.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function ws(){function o(d){return c.call(o.src,o.listener,d)}const c=xs;return o}function mr(o,c,d,y,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)mr(o,c[M],d,y,N);else y=h(y)?!!y.capture:!!y,d=st(d),o&&o[Zn]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],d=we(M,d,y,N),-1<d&&(Nn(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Is(o))&&(c=o.g[c.toString()],o=-1,c&&(o=we(c,d,y,N)),(d=-1<o?c[o]:null)&&Rs(d))}function Rs(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Zn])$e(c.i,o);else{var d=o.type,y=o.proxy;c.removeEventListener?c.removeEventListener(d,y,o.capture):c.detachEvent?c.detachEvent(pr(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=Is(c))?($e(d,o),d.h==0&&(d.src=null,c[Wn]=null)):Nn(o)}}}function pr(o){return o in Dn?Dn[o]:Dn[o]="on"+o}function xs(o,c){if(o.da)o=!0;else{c=new ge(c,this);var d=o.listener,y=o.ha||o.src;o.fa&&Rs(o),o=d.call(y,c)}return o}function Is(o){return o=o[Wn],o instanceof ke?o:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(o){return typeof o=="function"?o:(o[Z]||(o[Z]=function(c){return o.handleEvent(c)}),o[Z])}function dt(){se.call(this),this.i=new ke(this),this.M=this,this.F=null}I(dt,se),dt.prototype[Zn]=!0,dt.prototype.removeEventListener=function(o,c,d,y){mr(this,o,c,d,y)};function Vt(o,c){var d,y=o.F;if(y)for(d=[];y;y=y.F)d.push(y);if(o=o.M,y=c.type||c,typeof c=="string")c=new Ot(c,o);else if(c instanceof Ot)c.target=c.target||o;else{var N=c;c=new Ot(y,o),w(c,N)}if(N=!0,d)for(var M=d.length-1;0<=M;M--){var H=c.g=d[M];N=qt(H,y,!0,c)&&N}if(H=c.g=o,N=qt(H,y,!0,c)&&N,N=qt(H,y,!1,c)&&N,d)for(M=0;M<d.length;M++)H=c.g=d[M],N=qt(H,y,!1,c)&&N}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],y=0;y<d.length;y++)Nn(d[y]);delete o.g[c],o.h--}}this.F=null},dt.prototype.K=function(o,c,d,y){return this.i.add(String(o),c,!1,d,y)},dt.prototype.L=function(o,c,d,y){return this.i.add(String(o),c,!0,d,y)};function qt(o,c,d,y){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var H=c[M];if(H&&!H.da&&H.capture==d){var It=H.listener,ye=H.ha||H.src;H.fa&&$e(o.i,H),N=It.call(ye,y)!==!1&&N}}return N&&!y.defaultPrevented}function Re(o,c,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function q(o){o.g=Re(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class $ extends se{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function W(o){se.call(this),this.h=o,this.g={}}I(W,se);var J=[];function Mt(o){F(o.g,function(c,d){this.g.hasOwnProperty(d)&&Rs(c)},o),o.g={}}W.prototype.N=function(){W.aa.N.call(this),Mt(this)},W.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pt=l.JSON.stringify,Xe=l.JSON.parse,Ri=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Nh(){}Nh.prototype.h=null;function ug(o){return o.h||(o.h=o.i())}function cg(){}var Ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dh(){Ot.call(this,"d")}I(Dh,Ot);function Oh(){Ot.call(this,"c")}I(Oh,Ot);var Cs={},hg=null;function Bl(){return hg=hg||new dt}Cs.La="serverreachability";function fg(o){Ot.call(this,Cs.La,o)}I(fg,Ot);function za(o){const c=Bl();Vt(c,new fg(c))}Cs.STAT_EVENT="statevent";function dg(o,c){Ot.call(this,Cs.STAT_EVENT,o),this.stat=c}I(dg,Ot);function Pe(o){const c=Bl();Vt(c,new dg(c,o))}Cs.Ma="timingevent";function mg(o,c){Ot.call(this,Cs.Ma,o),this.size=c}I(mg,Ot);function Ba(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function qa(){this.g=!0}qa.prototype.xa=function(){this.g=!1};function jS(o,c,d,y,N,M){o.info(function(){if(o.g)if(M)for(var H="",It=M.split("&"),ye=0;ye<It.length;ye++){var Et=It[ye].split("=");if(1<Et.length){var xe=Et[0];Et=Et[1];var Ie=xe.split("_");H=2<=Ie.length&&Ie[1]=="type"?H+(xe+"="+Et+"&"):H+(xe+"=redacted&")}}else H=null;else H=M;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+c+`
`+d+`
`+H})}function LS(o,c,d,y,N,M,H){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+c+`
`+d+`
`+M+" "+H})}function gr(o,c,d,y){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+zS(o,d)+(y?" "+y:"")})}function US(o,c){o.info(function(){return"TIMEOUT: "+c})}qa.prototype.info=function(){};function zS(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var y=d[o];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var H=1;H<N.length;H++)N[H]=""}}}}return pt(d)}catch{return c}}var ql={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vh;function Hl(){}I(Hl,Nh),Hl.prototype.g=function(){return new XMLHttpRequest},Hl.prototype.i=function(){return{}},Vh=new Hl;function xi(o,c,d,y){this.j=o,this.i=c,this.l=d,this.R=y||1,this.U=new W(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}var yg={},Mh={};function kh(o,c,d){o.L=1,o.v=Kl(Jn(c)),o.m=d,o.P=!0,_g(o,null)}function _g(o,c){o.F=Date.now(),Fl(o),o.A=Jn(o.v);var d=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),Og(d.i,"t",y),o.C=0,d=o.j.J,o.h=new gg,o.g=Xg(o.j,d?c:null,!o.m),0<o.O&&(o.M=new $(p(o.Y,o,o.g),o.O)),c=o.U,d=o.g,y=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(J[0]=N.toString()),N=J);for(var M=0;M<N.length;M++){var H=dr(d,N[M],y||c.handleEvent,!1,c.h||c);if(!H)break;c.g[H.key]=H}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),za(),jS(o.i,o.u,o.A,o.l,o.R,o.m)}xi.prototype.ca=function(o){o=o.target;const c=this.M;c&&ti(o)==3?c.j():this.Y(o)},xi.prototype.Y=function(o){try{if(o==this.g)t:{const Ie=ti(this.g);var c=this.g.Ba();const vr=this.g.Z();if(!(3>Ie)&&(Ie!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||Ie!=4||c==7||(c==8||0>=vr?za(3):za(2)),Ph(this);var d=this.g.Z();this.X=d;e:if(vg(this)){var y=Ug(this.g);o="";var N=y.length,M=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ns(this),Ha(this);var H="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(y[c],{stream:!(M&&c==N-1)});y.length=0,this.h.g+=o,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=d==200,LS(this.i,this.u,this.A,this.l,this.R,Ie,d),this.o){if(this.T&&!this.K){e:{if(this.g){var It,ye=this.g;if((It=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(It)){var Et=It;break e}}Et=null}if(d=Et)gr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jh(this,d);else{this.o=!1,this.s=3,Pe(12),Ns(this),Ha(this);break t}}if(this.P){d=!0;let An;for(;!this.J&&this.C<H.length;)if(An=BS(this,H),An==Mh){Ie==4&&(this.s=4,Pe(14),d=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(An==yg){this.s=4,Pe(15),gr(this.i,this.l,H,"[Invalid Chunk]"),d=!1;break}else gr(this.i,this.l,An,null),jh(this,An);if(vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||H.length!=0||this.h.h||(this.s=1,Pe(16),d=!1),this.o=this.o&&d,!d)gr(this.i,this.l,H,"[Invalid Chunked Response]"),Ns(this),Ha(this);else if(0<H.length&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.ba&&!xe.M&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Hh(xe),xe.M=!0,Pe(11))}}else gr(this.i,this.l,H,null),jh(this,H);Ie==4&&Ns(this),this.o&&!this.J&&(Ie==4?Qg(this.j,this):(this.o=!1,Fl(this)))}else sw(this.g),d==400&&0<H.indexOf("Unknown SID")?(this.s=3,Pe(12)):(this.s=0,Pe(13)),Ns(this),Ha(this)}}}catch{}finally{}};function vg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function BS(o,c){var d=o.C,y=c.indexOf(`
`,d);return y==-1?Mh:(d=Number(c.substring(d,y)),isNaN(d)?yg:(y+=1,y+d>c.length?Mh:(c=c.slice(y,y+d),o.C=y+d,c)))}xi.prototype.cancel=function(){this.J=!0,Ns(this)};function Fl(o){o.S=Date.now()+o.I,Eg(o,o.I)}function Eg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ba(p(o.ba,o),c)}function Ph(o){o.B&&(l.clearTimeout(o.B),o.B=null)}xi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(US(this.i,this.A),this.L!=2&&(za(),Pe(17)),Ns(this),this.s=2,Ha(this)):Eg(this,this.S-o)};function Ha(o){o.j.G==0||o.J||Qg(o.j,o)}function Ns(o){Ph(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Mt(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function jh(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Lh(d.h,o))){if(!o.K&&Lh(d.h,o)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Jl(d),Zl(d);else break t;qh(d),Pe(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ba(p(d.Za,d),6e3));if(1>=Ag(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Os(d,11)}else if((o.K||d.g==o)&&Jl(d),!E(c))for(N=d.Da.g.parse(c),c=0;c<N.length;c++){let Et=N[c];if(d.T=Et[0],Et=Et[1],d.G==2)if(Et[0]=="c"){d.K=Et[1],d.ia=Et[2];const xe=Et[3];xe!=null&&(d.la=xe,d.j.info("VER="+d.la));const Ie=Et[4];Ie!=null&&(d.Aa=Ie,d.j.info("SVER="+d.Aa));const vr=Et[5];vr!=null&&typeof vr=="number"&&0<vr&&(y=1.5*vr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const An=o.g;if(An){const eu=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var M=y.h;M.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Uh(M,M.h),M.h=null))}if(y.D){const Fh=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Fh&&(y.ya=Fh,kt(y.I,y.D,Fh))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var H=o;if(y.qa=$g(y,y.J?y.ia:null,y.W),H.K){Sg(y.h,H);var It=H,ye=y.L;ye&&(It.I=ye),It.B&&(Ph(It),Fl(It)),y.g=H}else Fg(y);0<d.i.length&&Wl(d)}else Et[0]!="stop"&&Et[0]!="close"||Os(d,7);else d.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?Os(d,7):Bh(d):Et[0]!="noop"&&d.l&&d.l.ta(Et),d.v=0)}}za(4)}catch{}}var qS=class{constructor(o,c){this.g=o,this.map=c}};function Tg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ag(o){return o.h?1:o.g?o.g.size:0}function Lh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Uh(o,c){o.g?o.g.add(c):o.h=c}function Sg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Tg.prototype.cancel=function(){if(this.i=wg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function wg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return O(o.i)}function HS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,y=0;y<d;y++)c.push(o[y]);return c}c=[],d=0;for(y in o)c[d++]=o[y];return c}function FS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const y in o)c[d++]=y;return c}}}function Rg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=FS(o),y=HS(o),N=y.length,M=0;M<N;M++)c.call(void 0,y[M],d&&d[M],o)}var xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GS(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var y=o[d].indexOf("="),N=null;if(0<=y){var M=o[d].substring(0,y);N=o[d].substring(y+1)}else M=o[d];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ds(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ds){this.h=o.h,Gl(this,o.j),this.o=o.o,this.g=o.g,Ql(this,o.s),this.l=o.l;var c=o.i,d=new Qa;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Ig(this,d),this.m=o.m}else o&&(c=String(o).match(xg))?(this.h=!1,Gl(this,c[1]||"",!0),this.o=Fa(c[2]||""),this.g=Fa(c[3]||"",!0),Ql(this,c[4]),this.l=Fa(c[5]||"",!0),Ig(this,c[6]||"",!0),this.m=Fa(c[7]||"")):(this.h=!1,this.i=new Qa(null,this.h))}Ds.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ga(c,Cg,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ga(c,Cg,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ga(d,d.charAt(0)=="/"?YS:KS,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ga(d,XS)),o.join("")};function Jn(o){return new Ds(o)}function Gl(o,c,d){o.j=d?Fa(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Ql(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Ig(o,c,d){c instanceof Qa?(o.i=c,ZS(o.i,o.h)):(d||(c=Ga(c,$S)),o.i=new Qa(c,o.h))}function kt(o,c,d){o.i.set(c,d)}function Kl(o){return kt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Fa(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ga(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,QS),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function QS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Cg=/[#\/\?@]/g,KS=/[#\?:]/g,YS=/[#\?]/g,$S=/[#\?@]/g,XS=/#/g;function Qa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ii(o){o.g||(o.g=new Map,o.h=0,o.i&&GS(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}e=Qa.prototype,e.add=function(o,c){Ii(this),this.i=null,o=yr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Ng(o,c){Ii(o),c=yr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Dg(o,c){return Ii(o),c=yr(o,c),o.g.has(c)}e.forEach=function(o,c){Ii(this),this.g.forEach(function(d,y){d.forEach(function(N){o.call(c,N,y,this)},this)},this)},e.na=function(){Ii(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const N=o[y];for(let M=0;M<N.length;M++)d.push(c[y])}return d},e.V=function(o){Ii(this);let c=[];if(typeof o=="string")Dg(this,o)&&(c=c.concat(this.g.get(yr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},e.set=function(o,c){return Ii(this),this.i=null,o=yr(this,o),Dg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Og(o,c,d){Ng(o,c),0<d.length&&(o.i=null,o.g.set(yr(o,c),O(d)),o.h+=d.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const M=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var N=M;H[y]!==""&&(N+="="+encodeURIComponent(String(H[y]))),o.push(N)}}return this.i=o.join("&")};function yr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function ZS(o,c){c&&!o.j&&(Ii(o),o.i=null,o.g.forEach(function(d,y){var N=y.toLowerCase();y!=N&&(Ng(this,y),Og(this,N,d))},o)),o.j=c}function WS(o,c){const d=new qa;if(l.Image){const y=new Image;y.onload=_(Ci,d,"TestLoadImage: loaded",!0,c,y),y.onerror=_(Ci,d,"TestLoadImage: error",!1,c,y),y.onabort=_(Ci,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=_(Ci,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else c(!1)}function JS(o,c){const d=new qa,y=new AbortController,N=setTimeout(()=>{y.abort(),Ci(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:y.signal}).then(M=>{clearTimeout(N),M.ok?Ci(d,"TestPingServer: ok",!0,c):Ci(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Ci(d,"TestPingServer: error",!1,c)})}function Ci(o,c,d,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(d)}catch{}}function tw(){this.g=new Ri}function ew(o,c,d){const y=d||"";try{Rg(o,function(N,M){let H=N;h(N)&&(H=pt(N)),c.push(y+M+"="+encodeURIComponent(H))})}catch(N){throw c.push(y+"type="+encodeURIComponent("_badmap")),N}}function Yl(o){this.l=o.Ub||null,this.j=o.eb||!1}I(Yl,Nh),Yl.prototype.g=function(){return new $l(this.l,this.j)},Yl.prototype.i=function(o){return function(){return o}}({});function $l(o,c){dt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I($l,dt),e=$l.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ya(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ya(this)),this.g&&(this.readyState=3,Ya(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ka(this):Ya(this),this.readyState==3&&Vg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Ka(this))},e.Qa=function(o){this.g&&(this.response=o,Ka(this))},e.ga=function(){this.g&&Ka(this)};function Ka(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ya(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Ya(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Mg(o){let c="";return F(o,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function zh(o,c,d){t:{for(y in d){var y=!1;break t}y=!0}y||(d=Mg(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):kt(o,c,d))}function Qt(o){dt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Qt,dt);var nw=/^https?$/i,iw=["POST","PUT"];e=Qt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vh.g(),this.v=this.o?ug(this.o):ug(Vh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){kg(this,M);return}if(o=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)d.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())d.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(iw,c,void 0))||y||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of d)this.g.setRequestHeader(M,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){kg(this,M)}};function kg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Pg(o),Xl(o)}function Pg(o){o.A||(o.A=!0,Vt(o,"complete"),Vt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Vt(this,"complete"),Vt(this,"abort"),Xl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xl(this,!0)),Qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?jg(this):this.bb())},e.bb=function(){jg(this)};function jg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ti(o)!=4||o.Z()!=2)){if(o.u&&ti(o)==4)Re(o.Ea,0,o);else if(Vt(o,"readystatechange"),ti(o)==4){o.h=!1;try{const H=o.Z();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var d;if(!(d=c)){var y;if(y=H===0){var N=String(o.D).match(xg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!nw.test(N?N.toLowerCase():"")}d=y}if(d)Vt(o,"complete"),Vt(o,"success");else{o.m=6;try{var M=2<ti(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Pg(o)}}finally{Xl(o)}}}}function Xl(o,c){if(o.g){Lg(o);const d=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Vt(o,"ready");try{d.onreadystatechange=y}catch{}}}function Lg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function ti(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Xe(c)}};function Ug(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function sw(o){const c={};o=(o.g&&2<=ti(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(E(o[y]))continue;var d=x(o[y]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[N]||[];c[N]=M,M.push(d)}b(c,function(y){return y.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function zg(o){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,o),this.cb=$a("retryDelaySeedMs",1e4,o),this.Wa=$a("forwardChannelMaxRetries",2,o),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(o&&o.concurrentRequestLimit),this.Da=new tw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=zg.prototype,e.la=8,e.G=1,e.connect=function(o,c,d,y){Pe(0),this.W=o,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=$g(this,null,this.W),Wl(this)};function Bh(o){if(Bg(o),o.G==3){var c=o.U++,d=Jn(o.I);if(kt(d,"SID",o.K),kt(d,"RID",c),kt(d,"TYPE","terminate"),Xa(o,d),c=new xi(o,o.j,c),c.L=2,c.v=Kl(Jn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Xg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Fl(c)}Yg(o)}function Zl(o){o.g&&(Hh(o),o.g.cancel(),o.g=null)}function Bg(o){Zl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Jl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Wl(o){if(!bg(o.h)&&!o.s){o.s=!0;var c=o.Ga;K||mt(),Y||(K(),Y=!0),vt.add(c,o),o.B=0}}function rw(o,c){return Ag(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ba(p(o.Ga,o,c),Kg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new xi(this,this.j,o);let M=this.o;if(this.S&&(M?(M=v(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,d=0;d<this.i.length;d++){e:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break t}if(c===4096||d===this.i.length-1){c=d+1;break t}}c=1e3}else c=1e3;c=Hg(this,N,c),d=Jn(this.I),kt(d,"RID",o),kt(d,"CVER",22),this.D&&kt(d,"X-HTTP-Session-Id",this.D),Xa(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(Mg(M)))+"&"+c:this.m&&zh(d,this.m,M)),Uh(this.h,N),this.Ua&&kt(d,"TYPE","init"),this.P?(kt(d,"$req",c),kt(d,"SID","null"),N.T=!0,kh(N,d,null)):kh(N,d,c),this.G=2}}else this.G==3&&(o?qg(this,o):this.i.length==0||bg(this.h)||qg(this))};function qg(o,c){var d;c?d=c.l:d=o.U++;const y=Jn(o.I);kt(y,"SID",o.K),kt(y,"RID",d),kt(y,"AID",o.T),Xa(o,y),o.m&&o.o&&zh(y,o.m,o.o),d=new xi(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Hg(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Uh(o.h,d),kh(d,y,c)}function Xa(o,c){o.H&&F(o.H,function(d,y){kt(c,y,d)}),o.l&&Rg({},function(d,y){kt(c,y,d)})}function Hg(o,c,d){d=Math.min(o.i.length,d);var y=o.l?p(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const H=["count="+d];M==-1?0<d?(M=N[0].g,H.push("ofs="+M)):M=0:H.push("ofs="+M);let It=!0;for(let ye=0;ye<d;ye++){let Et=N[ye].g;const xe=N[ye].map;if(Et-=M,0>Et)M=Math.max(0,N[ye].g-100),It=!1;else try{ew(xe,H,"req"+Et+"_")}catch{y&&y(xe)}}if(It){y=H.join("&");break t}}}return o=o.i.splice(0,d),c.D=o,y}function Fg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;K||mt(),Y||(K(),Y=!0),vt.add(c,o),o.v=0}}function qh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ba(p(o.Fa,o),Kg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ba(p(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pe(10),Zl(this),Gg(this))};function Hh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Gg(o){o.g=new xi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Jn(o.qa);kt(c,"RID","rpc"),kt(c,"SID",o.K),kt(c,"AID",o.T),kt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&kt(c,"TO",o.ja),kt(c,"TYPE","xmlhttp"),Xa(o,c),o.m&&o.o&&zh(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Kl(Jn(c)),d.m=null,d.P=!0,_g(d,o)}e.Za=function(){this.C!=null&&(this.C=null,Zl(this),qh(this),Pe(19))};function Jl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Qg(o,c){var d=null;if(o.g==c){Jl(o),Hh(o),o.g=null;var y=2}else if(Lh(o.h,c))d=c.D,Sg(o.h,c),y=1;else return;if(o.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;y=Bl(),Vt(y,new mg(y,d)),Wl(o)}else Fg(o);else if(N=c.s,N==3||N==0&&0<c.X||!(y==1&&rw(o,c)||y==2&&qh(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),N){case 1:Os(o,5);break;case 4:Os(o,10);break;case 3:Os(o,6);break;default:Os(o,2)}}}function Kg(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function Os(o,c){if(o.j.info("Error code "+c),c==2){var d=p(o.fb,o),y=o.Xa;const N=!y;y=new Ds(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Gl(y,"https"),Kl(y),N?WS(y.toString(),d):JS(y.toString(),d)}else Pe(2);o.G=0,o.l&&o.l.sa(c),Yg(o),Bg(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function Yg(o){if(o.G=0,o.ka=[],o.l){const c=wg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function $g(o,c,d){var y=d instanceof Ds?Jn(d):new Ds(d);if(y.g!="")c&&(y.g=c+"."+y.g),Ql(y,y.s);else{var N=l.location;y=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new Ds(null);y&&Gl(M,y),c&&(M.g=c),N&&Ql(M,N),d&&(M.l=d),y=M}return d=o.D,c=o.ya,d&&c&&kt(y,d,c),kt(y,"VER",o.la),Xa(o,y),y}function Xg(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Qt(new Yl({eb:d})):new Qt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}e=Zg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function tu(){}tu.prototype.g=function(o,c){return new Ze(o,c)};function Ze(o,c){dt.call(this),this.g=new zg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new _r(this)}I(Ze,dt),Ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ze.prototype.close=function(){Bh(this.g)},Ze.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=pt(o),o=d);c.i.push(new qS(c.Ya++,o)),c.G==3&&Wl(c)},Ze.prototype.N=function(){this.g.l=null,delete this.j,Bh(this.g),delete this.g,Ze.aa.N.call(this)};function Wg(o){Dh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const d in c){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}I(Wg,Dh);function Jg(){Oh.call(this),this.status=1}I(Jg,Oh);function _r(o){this.g=o}I(_r,Zg),_r.prototype.ua=function(){Vt(this.g,"a")},_r.prototype.ta=function(o){Vt(this.g,new Wg(o))},_r.prototype.sa=function(o){Vt(this.g,new Jg)},_r.prototype.ra=function(){Vt(this.g,"b")},tu.prototype.createWebChannel=tu.prototype.g,Ze.prototype.send=Ze.prototype.o,Ze.prototype.open=Ze.prototype.m,Ze.prototype.close=Ze.prototype.close,Eb=function(){return new tu},vb=function(){return Bl()},_b=Cs,Ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ql.NO_ERROR=0,ql.TIMEOUT=8,ql.HTTP_ERROR=6,ju=ql,pg.COMPLETE="complete",yb=pg,cg.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",dt.prototype.listen=dt.prototype.K,ho=cg,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,gb=Qt}).apply(typeof yu<"u"?yu:typeof self<"u"?self:typeof window<"u"?window:{});const j_="@firebase/firestore",L_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new sp("@firebase/firestore");function Rr(){return er.logLevel}function G(e,...t){if(er.logLevel<=ut.DEBUG){const n=t.map(op);er.debug(`Firestore (${Oa}): ${e}`,...n)}}function Ei(e,...t){if(er.logLevel<=ut.ERROR){const n=t.map(op);er.error(`Firestore (${Oa}): ${e}`,...n)}}function pa(e,...t){if(er.logLevel<=ut.WARN){const n=t.map(op);er.warn(`Firestore (${Oa}): ${e}`,...n)}}function op(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,Tb(e,i,n)}function Tb(e,t,n){let i=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ei(i),new Error(i)}function _t(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||Tb(t,s,i)}function it(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Si{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Bx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ne.UNAUTHENTICATED))}shutdown(){}}class qx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hx{constructor(t){this.t=t,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_t(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Un,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Un)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string",31837,{l:i}),new bb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new Ne(t)}}class Fx{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Gx{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new Fx(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qx{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){_t(this.o===void 0,3512);const i=r=>{r.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Kx(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ct(e,t){return e<t?-1:e>t?1:0}function Ud(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return Of(s)===Of(r)?ct(s,r):Of(s)?1:-1}return ct(e.length,t.length)}const Yx=55296,$x=57343;function Of(e){const t=e.charCodeAt(0);return t>=Yx&&t<=$x}function ga(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class Vn{constructor(t,n,i){n===void 0?n=0:n>t.length&&X(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&X(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Vn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Vn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Vn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ct(t.length,n.length)}static compareSegments(t,n){const i=Vn.isNumericId(t),s=Vn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Vn.extractNumericId(t).compare(Vn.extractNumericId(n)):Ud(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return os.fromString(t.substring(4,t.length-2))}}class St extends Vn{construct(t,n,i){return new St(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new St(n)}static emptyPath(){return new St([])}}const Xx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Te extends Vn{construct(t,n,i){return new Te(t,n,i)}static isValidIdentifier(t){return Xx.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Te.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new Te([z_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Te(n)}static emptyPath(){return new Te([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(St.fromString(t))}static fromName(t){return new Q(St.fromString(t).popFirst(5))}static empty(){return new Q(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&St.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return St.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new St(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(e,t,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Zx(e,t,n,i){if(t===!0&&i===!0)throw new B(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function B_(e){if(!Q.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function q_(e){if(Q.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Sb(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function lh(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":X(12329,{type:typeof e})}function ze(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lh(e);throw new B(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e,t){const n={typeString:e};return t&&(n.value=t),n}function xl(e,t){if(!Sb(e))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-62135596800,F_=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(t){return Pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*F_);return new Pt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<H_)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F_}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(xl(t,Pt._jsonSchema))return new Pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-H_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:ne("string",Pt._jsonSchemaVersion),seconds:ne("number"),nanoseconds:ne("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(t){return new tt(t)}static min(){return new tt(new Pt(0,0))}static max(){return new tt(new Pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=-1;function Wx(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=tt.fromTimestamp(i===1e9?new Pt(n+1,0):new Pt(n,i));return new ds(s,Q.empty(),t)}function Jx(e){return new ds(e.readTime,e.key,Wo)}class ds{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ds(tt.min(),Q.empty(),Wo)}static max(){return new ds(tt.max(),Q.empty(),Wo)}}function tI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==eI)throw e;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(m=>{a[h]=m,++l,l===r&&i(a)},m=>s(m))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function iI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ma(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-1;function Il(e){return e==null}function wc(e){return e===0&&1/e==-1/0}function sI(e){return typeof e=="number"&&Number.isInteger(e)&&!wc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="";function rI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=G_(t)),t=aI(e.get(n),t);return G_(t)}function aI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case wb:n+="";break;default:n+=r}}return n}function G_(e){return e+wb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ts(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t,n){this.comparator=t,this.root=n||ve.EMPTY}insert(t,n){return new Gt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ve.BLACK,null,null))}remove(t){return new Gt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ve.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _u(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _u(this.root,t,this.comparator,!1)}getReverseIterator(){return new _u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _u(this.root,t,this.comparator,!0)}}class _u{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ve{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??ve.RED,this.left=s??ve.EMPTY,this.right=r??ve.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new ve(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ve.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return ve.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw X(27949);return t+(this.isRed()?0:1)}}ve.EMPTY=null,ve.RED=!0,ve.BLACK=!1;ve.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new ve(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.comparator=t,this.data=new Gt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(t){return new K_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof le)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new le(this.comparator);return n.data=t,n}}class K_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.fields=t,t.sort(Te.comparator)}static empty(){return new sn([])}unionWith(t){let n=new le(Te.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new sn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ga(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new xb("Invalid base64 string: "+r):r}}(t);return new Se(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new Se(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Se.EMPTY_BYTE_STRING=new Se("");const oI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(e){if(_t(!!e,39018),typeof e=="string"){let t=0;const n=oI.exec(e);if(_t(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wt(e.seconds),nanos:Wt(e.nanos)}}function Wt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ps(e){return typeof e=="string"?Se.fromBase64String(e):Se.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="server_timestamp",Cb="__type__",Nb="__previous_value__",Db="__local_write_time__";function ch(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Cb])==null?void 0:i.stringValue)===Ib}function hh(e){const t=e.mapValue.fields[Nb];return ch(t)?hh(t):t}function Jo(e){const t=ms(e.mapValue.fields[Db].timestampValue);return new Pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,n,i,s,r,a,l,u,h,m){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=m}}const Rc="(default)";class tl{constructor(t,n){this.projectId=t,this.database=n||Rc}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===Rc}isEqual(t){return t instanceof tl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="__type__",uI="__max__",vu={mapValue:{}},Vb="__vector__",xc="value";function gs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ch(e)?4:hI(e)?9007199254740991:cI(e)?10:11:X(28295,{value:e})}function Gn(e,t){if(e===t)return!0;const n=gs(e);if(n!==gs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jo(e).isEqual(Jo(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=ms(s.timestampValue),l=ms(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return ps(s.bytesValue).isEqual(ps(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Wt(s.geoPointValue.latitude)===Wt(r.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Wt(s.integerValue)===Wt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Wt(s.doubleValue),l=Wt(r.doubleValue);return a===l?wc(a)===wc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ga(e.arrayValue.values||[],t.arrayValue.values||[],Gn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(Q_(a)!==Q_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Gn(a[u],l[u])))return!1;return!0}(e,t);default:return X(52216,{left:e})}}function el(e,t){return(e.values||[]).find(n=>Gn(n,t))!==void 0}function ya(e,t){if(e===t)return 0;const n=gs(e),i=gs(t);if(n!==i)return ct(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=Wt(r.integerValue||r.doubleValue),u=Wt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Y_(e.timestampValue,t.timestampValue);case 4:return Y_(Jo(e),Jo(t));case 5:return Ud(e.stringValue,t.stringValue);case 6:return function(r,a){const l=ps(r),u=ps(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=ct(l[h],u[h]);if(m!==0)return m}return ct(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=ct(Wt(r.latitude),Wt(a.latitude));return l!==0?l:ct(Wt(r.longitude),Wt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return $_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var p,_,I,O;const l=r.fields||{},u=a.fields||{},h=(p=l[xc])==null?void 0:p.arrayValue,m=(_=u[xc])==null?void 0:_.arrayValue,g=ct(((I=h==null?void 0:h.values)==null?void 0:I.length)||0,((O=m==null?void 0:m.values)==null?void 0:O.length)||0);return g!==0?g:$_(h,m)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===vu.mapValue&&a===vu.mapValue)return 0;if(r===vu.mapValue)return 1;if(a===vu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const p=Ud(u[g],m[g]);if(p!==0)return p;const _=ya(l[u[g]],h[m[g]]);if(_!==0)return _}return ct(u.length,m.length)}(e.mapValue,t.mapValue);default:throw X(23264,{he:n})}}function Y_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=ms(e),i=ms(t),s=ct(n.seconds,i.seconds);return s!==0?s:ct(n.nanos,i.nanos)}function $_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ya(n[s],i[s]);if(r)return r}return ct(n.length,i.length)}function _a(e){return zd(e)}function zd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ms(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ps(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=zd(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${zd(n.fields[a])}`;return s+"}"}(e.mapValue):X(61005,{value:e})}function Lu(e){switch(gs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hh(e);return t?16+Lu(t):16;case 5:return 2*e.stringValue.length;case 6:return ps(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Lu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Ts(i.fields,(r,a)=>{s+=r.length+Lu(a)}),s}(e.mapValue);default:throw X(13486,{value:e})}}function Ic(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bd(e){return!!e&&"integerValue"in e}function cp(e){return!!e&&"arrayValue"in e}function X_(e){return!!e&&"nullValue"in e}function Z_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Uu(e){return!!e&&"mapValue"in e}function cI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Ob])==null?void 0:i.stringValue)===Vb}function Oo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ts(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Oo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Oo(e.arrayValue.values[n]);return t}return{...e}}function hI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===uI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.value=t}static empty(){return new Le({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Uu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Oo(n)}setAll(t){let n=Te.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=Oo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Gn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Uu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Ts(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Le(Oo(this.value))}}function Mb(e){const t=[];return Ts(e.fields,(n,i)=>{const s=new Te([n]);if(Uu(i)){const r=Mb(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new sn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new de(t,0,tt.min(),tt.min(),tt.min(),Le.empty(),0)}static newFoundDocument(t,n,i,s){return new de(t,1,n,tt.min(),i,s,0)}static newNoDocument(t,n){return new de(t,2,n,tt.min(),tt.min(),Le.empty(),0)}static newUnknownDocument(t,n){return new de(t,3,n,tt.min(),tt.min(),Le.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Le.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Le.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof de&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new de(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t,n){this.position=t,this.inclusive=n}}function W_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=ya(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function J_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n="asc"){this.field=t,this.dir=n}}function fI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{}class ee extends kb{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new mI(t,n,i):n==="array-contains"?new yI(t,i):n==="in"?new _I(t,i):n==="not-in"?new vI(t,i):n==="array-contains-any"?new EI(t,i):new ee(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new pI(t,i):new gI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ya(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(ya(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends kb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new xn(t,n)}matches(t){return Pb(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pb(e){return e.op==="and"}function jb(e){return dI(e)&&Pb(e)}function dI(e){for(const t of e.filters)if(t instanceof xn)return!1;return!0}function qd(e){if(e instanceof ee)return e.field.canonicalString()+e.op.toString()+_a(e.value);if(jb(e))return e.filters.map(t=>qd(t)).join(",");{const t=e.filters.map(n=>qd(n)).join(",");return`${e.op}(${t})`}}function Lb(e,t){return e instanceof ee?function(i,s){return s instanceof ee&&i.op===s.op&&i.field.isEqual(s.field)&&Gn(i.value,s.value)}(e,t):e instanceof xn?function(i,s){return s instanceof xn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&Lb(a,s.filters[l]),!0):!1}(e,t):void X(19439)}function Ub(e){return e instanceof ee?function(n){return`${n.field.canonicalString()} ${n.op} ${_a(n.value)}`}(e):e instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ub).join(" ,")+"}"}(e):"Filter"}class mI extends ee{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class pI extends ee{constructor(t,n){super(t,"in",n),this.keys=zb("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class gI extends ee{constructor(t,n){super(t,"not-in",n),this.keys=zb("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function zb(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class yI extends ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return cp(n)&&el(n.arrayValue,this.value)}}class _I extends ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}}class vI extends ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!el(this.value.arrayValue,n)}}class EI extends ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!cp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>el(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function tv(e,t=null,n=[],i=[],s=null,r=null,a=null){return new TI(e,t,n,i,s,r,a)}function hp(e){const t=it(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>qd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Il(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>_a(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>_a(i)).join(",")),t.Te=n}return t.Te}function fp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Lb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!J_(e.startAt,t.startAt)&&J_(e.endAt,t.endAt)}function Hd(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bI(e,t,n,i,s,r,a,l){return new ur(e,t,n,i,s,r,a,l)}function fh(e){return new ur(e)}function ev(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function dp(e){return e.collectionGroup!==null}function Wr(e){const t=it(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new le(Te.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new nl(r,i))}),n.has(Te.keyField().canonicalString())||t.Ie.push(new nl(Te.keyField(),i))}return t.Ie}function zn(e){const t=it(e);return t.Ee||(t.Ee=AI(t,Wr(e))),t.Ee}function AI(e,t){if(e.limitType==="F")return tv(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new nl(s.field,r)});const n=e.endAt?new va(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new va(e.startAt.position,e.startAt.inclusive):null;return tv(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Fd(e,t){const n=e.filters.concat([t]);return new ur(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cc(e,t,n){return new ur(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dh(e,t){return fp(zn(e),zn(t))&&e.limitType===t.limitType}function Bb(e){return`${hp(zn(e))}|lt:${e.limitType}`}function xr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Ub(s)).join(", ")}]`),Il(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>_a(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>_a(s)).join(",")),`Target(${i})`}(zn(e))}; limitType=${e.limitType})`}function mh(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Q.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of Wr(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=W_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Wr(i),s)||i.endAt&&!function(a,l,u){const h=W_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Wr(i),s))}(e,t)}function SI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qb(e){return(t,n)=>{let i=!1;for(const s of Wr(e)){const r=wI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function wI(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?ya(u,h):X(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ts(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return Rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Gt(Q.comparator);function Ti(){return RI}const Hb=new Gt(Q.comparator);function fo(...e){let t=Hb;for(const n of e)t=t.insert(n.key,n);return t}function Fb(e){let t=Hb;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function zs(){return Vo()}function Gb(){return Vo()}function Vo(){return new cr(e=>e.toString(),(e,t)=>e.isEqual(t))}const xI=new Gt(Q.comparator),II=new le(Q.comparator);function ht(...e){let t=II;for(const n of e)t=t.add(n);return t}const CI=new le(ct);function NI(){return CI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(t)?"-0":t}}function Qb(e){return{integerValue:""+e}}function Kb(e,t){return sI(t)?Qb(t):mp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this._=void 0}}function DI(e,t,n){return e instanceof il?function(s,r){const a={fields:{[Cb]:{stringValue:Ib},[Db]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&ch(r)&&(r=hh(r)),r&&(a.fields[Nb]=r),{mapValue:a}}(n,t):e instanceof sl?$b(e,t):e instanceof rl?Xb(e,t):function(s,r){const a=Yb(s,r),l=nv(a)+nv(s.Ae);return Bd(a)&&Bd(s.Ae)?Qb(l):mp(s.serializer,l)}(e,t)}function OI(e,t,n){return e instanceof sl?$b(e,t):e instanceof rl?Xb(e,t):n}function Yb(e,t){return e instanceof al?function(i){return Bd(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class il extends ph{}class sl extends ph{constructor(t){super(),this.elements=t}}function $b(e,t){const n=Zb(t);for(const i of e.elements)n.some(s=>Gn(s,i))||n.push(i);return{arrayValue:{values:n}}}class rl extends ph{constructor(t){super(),this.elements=t}}function Xb(e,t){let n=Zb(t);for(const i of e.elements)n=n.filter(s=>!Gn(s,i));return{arrayValue:{values:n}}}class al extends ph{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function nv(e){return Wt(e.integerValue||e.doubleValue)}function Zb(e){return cp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t,n){this.field=t,this.transform=n}}function VI(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof sl&&s instanceof sl||i instanceof rl&&s instanceof rl?ga(i.elements,s.elements,Gn):i instanceof al&&s instanceof al?Gn(i.Ae,s.Ae):i instanceof il&&s instanceof il}(e.transform,t.transform)}class MI{constructor(t,n){this.version=t,this.transformResults=n}}class be{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new be}static exists(t){return new be(void 0,t)}static updateTime(t){return new be(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class gh{}function Jb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new yh(e.key,be.none()):new Cl(e.key,e.data,be.none());{const n=e.data,i=Le.empty();let s=new le(Te.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new bs(e.key,i,new sn(s.toArray()),be.none())}}function kI(e,t,n){e instanceof Cl?function(s,r,a){const l=s.value.clone(),u=sv(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof bs?function(s,r,a){if(!zu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=sv(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(tA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Mo(e,t,n,i){return e instanceof Cl?function(r,a,l,u){if(!zu(r.precondition,a))return l;const h=r.value.clone(),m=rv(r.fieldTransforms,u,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof bs?function(r,a,l,u){if(!zu(r.precondition,a))return l;const h=rv(r.fieldTransforms,u,a),m=a.data;return m.setAll(tA(r)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return zu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function PI(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=Yb(i.transform,s||null);r!=null&&(n===null&&(n=Le.empty()),n.set(i.field,r))}return n||null}function iv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ga(i,s,(r,a)=>VI(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Cl extends gh{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bs extends gh{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function tA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function sv(e,t,n){const i=new Map;_t(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,OI(a,l,n[s]))}return i}function rv(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,DI(r,a,t))}return i}class yh extends gh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eA extends gh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&kI(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Mo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Mo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Gb();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=Jb(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(tt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&ga(this.mutations,t.mutations,(n,i)=>iv(n,i))&&ga(this.baseMutations,t.baseMutations,(n,i)=>iv(n,i))}}class pp{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){_t(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return xI}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new pp(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,gt;function nA(e){switch(e){case k.OK:return X(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return X(15467,{code:e})}}function iA(e){if(e===void 0)return Ei("GRPC error has no .code"),k.UNKNOWN;switch(e){case Jt.OK:return k.OK;case Jt.CANCELLED:return k.CANCELLED;case Jt.UNKNOWN:return k.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return k.INTERNAL;case Jt.UNAVAILABLE:return k.UNAVAILABLE;case Jt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Jt.NOT_FOUND:return k.NOT_FOUND;case Jt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Jt.ABORTED:return k.ABORTED;case Jt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Jt.DATA_LOSS:return k.DATA_LOSS;default:return X(39323,{code:e})}}(gt=Jt||(Jt={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new os([4294967295,4294967295],0);function av(e){const t=zI().encode(e),n=new pb;return n.update(t),new Uint8Array(n.digest())}function ov(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new os([n,i],0),new os([s,r],0)]}class gp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new mo(`Invalid padding: ${n}`);if(i<0)throw new mo(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new mo(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new mo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=os.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(os.fromNumber(i)));return s.compare(BI)===1&&(s=new os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=av(t),[i,s]=ov(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new gp(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=av(t),[i,s]=ov(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Nl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new _h(tt.min(),s,new Gt(ct),Ti(),ht())}}class Nl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Nl(i,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class sA{constructor(t,n){this.targetId=t,this.Ce=n}}class rA{constructor(t,n,i=Se.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class lv{constructor(){this.ve=0,this.Fe=uv(),this.Me=Se.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ht(),n=ht(),i=ht();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:X(38017,{changeType:r})}}),new Nl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=uv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ti(),this.Je=Eu(),this.He=Eu(),this.Ye=new Gt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:X(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Hd(r))if(i===0){const a=new Q(r.path);this.et(n,a,de.newNoDocument(a,tt.min()))}else _t(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=ps(i).toUint8Array()}catch(u){if(u instanceof xb)return pa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new gp(a,s,r)}catch(u){return pa(u instanceof mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Hd(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,de.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=ht();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new _h(t,n,this.Ye,this.je,i);return this.je=Ti(),this.Je=Eu(),this.He=Eu(),this.Ye=new Gt(ct),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new lv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new le(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new le(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||G("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new lv),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Eu(){return new Gt(Q.comparator)}function uv(){return new Gt(Q.comparator)}const HI={asc:"ASCENDING",desc:"DESCENDING"},FI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GI={and:"AND",or:"OR"};class QI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Gd(e,t){return e.useProto3Json||Il(t)?t:{value:t}}function Nc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function KI(e,t){return Nc(e,t.toTimestamp())}function un(e){return _t(!!e,49232),tt.fromTimestamp(function(n){const i=ms(n);return new Pt(i.seconds,i.nanos)}(e))}function yp(e,t){return Qd(e,t).canonicalString()}function Qd(e,t){const n=function(s){return new St(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function oA(e){const t=St.fromString(e);return _t(dA(t),10190,{key:t.toString()}),t}function Dc(e,t){return yp(e.databaseId,t.path)}function ko(e,t){const n=oA(t);if(n.get(1)!==e.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(uA(n))}function lA(e,t){return yp(e.databaseId,t)}function YI(e){const t=oA(e);return t.length===4?St.emptyPath():uA(t)}function Kd(e){return new St(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function uA(e){return _t(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function cv(e,t,n){return{name:Dc(e,t),fields:n.value.mapValue.fields}}function $I(e,t){return"found"in t?function(i,s){_t(!!s.found,43571),s.found.name,s.found.updateTime;const r=ko(i,s.found.name),a=un(s.found.updateTime),l=s.found.createTime?un(s.found.createTime):tt.min(),u=new Le({mapValue:{fields:s.found.fields}});return de.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){_t(!!s.missing,3894),_t(!!s.readTime,22933);const r=ko(i,s.missing),a=un(s.readTime);return de.newNoDocument(r,a)}(e,t):X(7234,{result:t})}function XI(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:X(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,m){return h.useProto3Json?(_t(m===void 0||typeof m=="string",58123),Se.fromBase64String(m||"")):(_t(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Se.fromUint8Array(m||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const m=h.code===void 0?k.UNKNOWN:iA(h.code);return new B(m,h.message||"")}(a);n=new rA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=ko(e,i.document.name),r=un(i.document.updateTime),a=i.document.createTime?un(i.document.createTime):tt.min(),l=new Le({mapValue:{fields:i.document.fields}}),u=de.newFoundDocument(s,r,a,l),h=i.targetIds||[],m=i.removedTargetIds||[];n=new Bu(h,m,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=ko(e,i.document),r=i.readTime?un(i.readTime):tt.min(),a=de.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Bu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=ko(e,i.document),r=i.removedTargetIds||[];n=new Bu([],r,s,null)}else{if(!("filter"in t))return X(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new UI(s,r),l=i.targetId;n=new sA(l,a)}}return n}function cA(e,t){let n;if(t instanceof Cl)n={update:cv(e,t.key,t.value)};else if(t instanceof yh)n={delete:Dc(e,t.key)};else if(t instanceof bs)n={update:cv(e,t.key,t.data),updateMask:rC(t.fieldMask)};else{if(!(t instanceof eA))return X(16599,{Vt:t.type});n={verify:Dc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof il)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof sl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof al)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:KI(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:X(27497)}(e,t.precondition)),n}function ZI(e,t){return e&&e.length>0?(_t(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?un(s.updateTime):un(r);return a.isEqual(tt.min())&&(a=un(r)),new MI(a,s.transformResults||[])}(n,t))):[]}function WI(e,t){return{documents:[lA(e,t.path)]}}function JI(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=lA(e,s);const r=function(h){if(h.length!==0)return fA(xn.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(m=>function(p){return{field:Ir(p.field),direction:nC(p.dir)}}(m))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Gd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function tC(e){let t=YI(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){_t(i===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:t=t.child(m.collectionId)}let r=[];n.where&&(r=function(g){const p=hA(g);return p instanceof xn&&jb(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(I){return new nl(Cr(I.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,Il(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,_=g.values||[];return new va(_,p)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const p=!g.before,_=g.values||[];return new va(_,p)}(n.endAt)),bI(t,s,a,r,l,"F",u,h)}function eC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function hA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Cr(n.unaryFilter.field);return ee.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Cr(n.unaryFilter.field);return ee.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cr(n.unaryFilter.field);return ee.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cr(n.unaryFilter.field);return ee.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(e):e.fieldFilter!==void 0?function(n){return ee.create(Cr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(i=>hA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(e):X(30097,{filter:e})}function nC(e){return HI[e]}function iC(e){return FI[e]}function sC(e){return GI[e]}function Ir(e){return{fieldPath:e.canonicalString()}}function Cr(e){return Te.fromServerFormat(e.fieldPath)}function fA(e){return e instanceof ee?function(n){if(n.op==="=="){if(Z_(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z_(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ir(n.field),op:iC(n.op),value:n.value}}}(e):e instanceof xn?function(n){const i=n.getFilters().map(s=>fA(s));return i.length===1?i[0]:{compositeFilter:{op:sC(n.op),filters:i}}}(e):X(54877,{filter:e})}function rC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function dA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,n,i,s,r=tt.min(),a=tt.min(),l=Se.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Yi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t){this.yt=t}}function oC(e){const t=tC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Cc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.Cn=new uC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ds.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ds.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class uC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new le(St.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new le(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mA=41943040;class Qe{static withCacheSize(t){return new Qe(t,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qe.DEFAULT_COLLECTION_PERCENTILE=10,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qe.DEFAULT=new Qe(mA,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qe.DISABLED=new Qe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ea(0)}static cr(){return new Ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="LruGarbageCollector",cC=1048576;function dv([e,t],[n,i]){const s=ct(e,n);return s===0?ct(t,i):s}class hC{constructor(t){this.Ir=t,this.buffer=new le(dv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();dv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){G(fv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ma(n)?G(fv,"Ignoring IndexedDB error during garbage collection: ",n):await Va(n)}await this.Vr(3e5)})}}class dC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(uh.ce);const i=new hC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(hv)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),Rr()<=ut.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function mC(e,t){return new dC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.changes=new cr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,de.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Mo(i.mutation,s,sn.empty(),Pt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ht()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ht()){const s=zs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=fo();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=zs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ht()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=Ti();const a=Vo(),l=function(){return Vo()}();return n.forEach((u,h)=>{const m=i.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof bs)?r=r.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),Mo(m.mutation,h,m.mutation.getFieldMask(),Pt.now())):a.set(h.key,sn.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>l.set(h,new gC(m,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=Vo();let s=new Gt((a,l)=>a-l),r=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=i.get(u)||sn.empty();m=l.applyToLocalView(h,m),i.set(u,m);const g=(s.get(l.batchId)||ht()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,m=u.value,g=Gb();m.forEach(p=>{if(!r.has(p)){const _=Jb(n.get(p),i.get(p));_!==null&&g.set(p,_),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):dp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(zs());let l=Wo,u=r;return a.next(h=>P.forEach(h,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(m)?P.resolve():this.remoteDocumentCache.getEntry(t,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,ht())).next(m=>({batchId:l,changes:Fb(m)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let s=fo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=fo();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,p){return new ur(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(m=>{m.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,de.newInvalidDocument(m)))});let l=fo();return a.forEach((u,h)=>{const m=r.get(u);m!==void 0&&Mo(m.mutation,h,sn.empty(),Pt.now()),mh(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:un(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:oC(s.bundledQuery),readTime:un(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.overlays=new Gt(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=zs();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=zs(),r=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Gt((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let m=r.get(h.largestBatchId);m===null&&(m=zs(),r=r.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=zs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new LI(n,i));let r=this.qr.get(n);r===void 0&&(r=ht(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.sessionToken=Se.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.Qr=new le(ce.$r),this.Ur=new le(ce.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ce(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ce(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new St([])),i=new ce(n,t),s=new ce(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new St([])),i=new ce(n,t),s=new ce(n,t+1);let r=ht();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new ce(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ce{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new le(ce.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jI(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new ce(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?up:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ce(n,0),s=new ce(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new le(ct);return n.forEach(s=>{const r=new ce(s,0),a=new ce(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;Q.isDocumentKey(r)||(r=r.child(""));const a=new ce(new Q(r),0);let l=new le(ct);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){_t(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new ce(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ce(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t){this.ri=t,this.docs=function(){return new Gt(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():de.newInvalidDocument(n))}getEntries(t,n){let i=Ti();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():de.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=Ti();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||tI(Jx(m),i)<=0||(s.has(m.key)||mh(n,m))&&(r=r.insert(m.key,m.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){X(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new AC(this)}getSize(t){return P.resolve(this.size)}}class AC extends pC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(t){this.persistence=t,this.si=new cr(n=>hp(n),fp),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.oi=0,this._i=new _p,this.targetCount=0,this.ai=Ea.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ea(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,n){this.ui={},this.overlays={},this.ci=new uh(0),this.li=!1,this.li=!0,this.hi=new EC,this.referenceDelegate=t(this),this.Pi=new SC(this),this.indexManager=new lC,this.remoteDocumentCache=function(s){return new bC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new aC(n),this.Ii=new _C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new vC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new TC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){G("MemoryPersistence","Starting transaction:",t);const s=new wC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class wC extends nI{constructor(t){super(),this.currentSequenceNumber=t}}class vp{constructor(t){this.persistence=t,this.Ri=new _p,this.Vi=null}static mi(t){return new vp(t)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=Q.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,tt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Oc{constructor(t,n){this.persistence=t,this.pi=new cr(i=>rI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=mC(this,n)}static mi(t,n){return new Oc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,tt.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Lu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=ht(),s=ht();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Ep(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return A2()?8:iI(Ve())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new RC;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(Rr()<=ut.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(Rr()<=ut.DEBUG&&G("QueryEngine","Query:",xr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Rr()<=ut.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zn(n))):P.resolve())}ys(t,n){if(ev(n))return P.resolve(null);let i=zn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cc(n,null,"F"),i=zn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=ht(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Cc(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return ev(n)||s.isEqual(tt.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(Rr()<=ut.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xr(n)),this.vs(t,a,n,Wx(s,Wo)).next(l=>l))})}Ds(t,n){let i=new le(qb(t));return n.forEach((s,r)=>{mh(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return Rr()<=ut.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",xr(n)),this.ps.getDocumentsMatchingQuery(t,n,ds.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",IC=3e8;class CC{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Gt(ct),this.xs=new cr(r=>hp(r),fp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function NC(e,t,n,i){return new CC(e,t,n,i)}async function gA(e,t){const n=it(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=ht();for(const h of s){a.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of r){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function DC(e,t){const n=it(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,m){const g=h.batch,p=g.keys();let _=P.resolve();return p.forEach(I=>{_=_.next(()=>m.getEntry(u,I)).next(O=>{const V=h.docVersions.get(I);_t(V!==null,48541),O.version.compareTo(V)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),m.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ht();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function yA(e){const t=it(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function OC(e,t){const n=it(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((m,g)=>{const p=s.get(g);if(!p)return;l.push(n.Pi.removeMatchingKeys(r,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,m.addedDocuments,g)));let _=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Se.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,i)),s=s.insert(g,_),function(O,V,S){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=IC?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,_,m)&&l.push(n.Pi.updateTargetData(r,_))});let u=Ti(),h=ht();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,m))}),l.push(VC(r,a,t.documentUpdates).next(m=>{u=m.ks,h=m.qs})),!i.isEqual(tt.min())){const m=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(m)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function VC(e,t,n){let i=ht(),s=ht();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=Ti();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(tt.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):G(Tp,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function MC(e,t){const n=it(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=up),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function kC(e,t){const n=it(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new Yi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Yd(e,t,n){const i=it(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ma(a))throw a;G(Tp,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function mv(e,t,n){const i=it(e);let s=tt.min(),r=ht();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,m){const g=it(u),p=g.xs.get(m);return p!==void 0?P.resolve(g.Ms.get(p)):g.Pi.getTargetData(h,m)}(i,a,zn(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:tt.min(),n?r:ht())).next(l=>(PC(i,SI(t),l),{documents:l,Qs:r})))}function PC(e,t,n){let i=e.Os.get(t)||tt.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class pv{constructor(){this.activeTargetIds=NI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jC{constructor(){this.Mo=new pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new pv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="ConnectivityMonitor";class yv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(gv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){G(gv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=null;function $d(){return Tu===null?Tu=function(){return 268435456+Math.round(2147483648*Math.random())}():Tu++,"0x"+Tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="RestConnection",UC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Rc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=$d(),l=this.zo(t,n.toUriEncodedString());G(Vf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),m=Na(h);return this.Jo(t,l,u,i,m).then(g=>(G(Vf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw pa(Vf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=UC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce="WebChannelConnection";class qC extends zC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=$d();return new Promise((l,u)=>{const h=new gb;h.setWithCredentials(!0),h.listenOnce(yb.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ju.NO_ERROR:const g=h.getResponseJson();G(Ce,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case ju.TIMEOUT:G(Ce,`RPC '${t}' ${a} timed out`),u(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const p=h.getStatus();if(G(Ce,`RPC '${t}' ${a} failed with status:`,p,"response text:",h.getResponseText()),p>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const O=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(I.status);u(new B(O,I.message))}else u(new B(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(k.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{G(Ce,`RPC '${t}' ${a} completed.`)}});const m=JSON.stringify(s);G(Ce,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",m,i,15)})}T_(t,n,i){const s=$d(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Eb(),l=vb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=r.join("");G(Ce,`Creating RPC '${t}' stream ${s}: ${m}`,u);const g=a.createWebChannel(m,u);this.I_(g);let p=!1,_=!1;const I=new BC({Yo:V=>{_?G(Ce,`Not sending because RPC '${t}' stream ${s} is closed:`,V):(p||(G(Ce,`Opening RPC '${t}' stream ${s} transport.`),g.open(),p=!0),G(Ce,`RPC '${t}' stream ${s} sending:`,V),g.send(V))},Zo:()=>g.close()}),O=(V,S,E)=>{V.listen(S,R=>{try{E(R)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,ho.EventType.OPEN,()=>{_||(G(Ce,`RPC '${t}' stream ${s} transport opened.`),I.o_())}),O(g,ho.EventType.CLOSE,()=>{_||(_=!0,G(Ce,`RPC '${t}' stream ${s} transport closed`),I.a_(),this.E_(g))}),O(g,ho.EventType.ERROR,V=>{_||(_=!0,pa(Ce,`RPC '${t}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),I.a_(new B(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,ho.EventType.MESSAGE,V=>{var S;if(!_){const E=V.data[0];_t(!!E,16349);const R=E,D=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(D){G(Ce,`RPC '${t}' stream ${s} received error:`,D);const L=D.status;let F=function(A){const w=Jt[A];if(w!==void 0)return iA(w)}(L),b=D.message;F===void 0&&(F=k.INTERNAL,b="Unknown error status: "+L+" with message "+D.message),_=!0,I.a_(new B(F,b)),g.close()}else G(Ce,`RPC '${t}' stream ${s} received:`,E),I.u_(E)}}),O(l,_b.STAT_EVENT,V=>{V.stat===Ld.PROXY?G(Ce,`RPC '${t}' stream ${s} detected buffering proxy`):V.stat===Ld.NOPROXY&&G(Ce,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(e){return new QI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="PersistentStream";class _A{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new B(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return G(_v,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(G(_v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HC extends _A{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=XI(this.serializer,t),i=function(r){if(!("targetChange"in r))return tt.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?tt.min():a.readTime?un(a.readTime):tt.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Kd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Hd(u)?{documents:WI(r,u)}:{query:JI(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=aA(r,a.resumeToken);const h=Gd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(tt.min())>0){l.readTime=Nc(r,a.snapshotVersion.toTimestamp());const h=Gd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=eC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Kd(this.serializer),n.removeTarget=t,this.q_(n)}}class FC extends _A{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return _t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ZI(t.writeResults,t.commitTime),i=un(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Kd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>cA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{}class QC extends GC{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,Qd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(k.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Qd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class KC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ei(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="RemoteStore";class YC{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{hr(this)&&(G(nr,"Restarting streams for network reachability change."),await async function(u){const h=it(u);h.Ea.add(4),await Dl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Eh(h)}(this))})}),this.Ra=new KC(i,s)}}async function Eh(e){if(hr(e))for(const t of e.da)await t(!0)}async function Dl(e){for(const t of e.da)await t(!1)}function vA(e,t){const n=it(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Rp(n)?wp(n):ka(n).O_()&&Sp(n,t))}function Ap(e,t){const n=it(e),i=ka(n);n.Ia.delete(t),i.O_()&&EA(n,t),n.Ia.size===0&&(i.O_()?i.L_():hr(n)&&n.Ra.set("Unknown"))}function Sp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ka(e).Y_(t)}function EA(e,t){e.Va.Ue(t),ka(e).Z_(t)}function wp(e){e.Va=new qI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ka(e).start(),e.Ra.ua()}function Rp(e){return hr(e)&&!ka(e).x_()&&e.Ia.size>0}function hr(e){return it(e).Ea.size===0}function TA(e){e.Va=void 0}async function $C(e){e.Ra.set("Online")}async function XC(e){e.Ia.forEach((t,n)=>{Sp(e,t)})}async function ZC(e,t){TA(e),Rp(e)?(e.Ra.ha(t),wp(e)):e.Ra.set("Unknown")}async function WC(e,t,n){if(e.Ra.set("Online"),t instanceof rA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){G(nr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Vc(e,i)}else if(t instanceof Bu?e.Va.Ze(t):t instanceof sA?e.Va.st(t):e.Va.tt(t),!n.isEqual(tt.min()))try{const i=await yA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=r.Ia.get(h);m&&r.Ia.set(h,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const m=r.Ia.get(u);if(!m)return;r.Ia.set(u,m.withResumeToken(Se.EMPTY_BYTE_STRING,m.snapshotVersion)),EA(r,u);const g=new Yi(m.target,u,h,m.sequenceNumber);Sp(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){G(nr,"Failed to raise snapshot:",i),await Vc(e,i)}}async function Vc(e,t,n){if(!Ma(t))throw t;e.Ea.add(1),await Dl(e),e.Ra.set("Offline"),n||(n=()=>yA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{G(nr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Eh(e)})}function bA(e,t){return t().catch(n=>Vc(e,n,t))}async function Th(e){const t=it(e),n=ys(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:up;for(;JC(t);)try{const s=await MC(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,tN(t,s)}catch(s){await Vc(t,s)}AA(t)&&SA(t)}function JC(e){return hr(e)&&e.Ta.length<10}function tN(e,t){e.Ta.push(t);const n=ys(e);n.O_()&&n.X_&&n.ea(t.mutations)}function AA(e){return hr(e)&&!ys(e).x_()&&e.Ta.length>0}function SA(e){ys(e).start()}async function eN(e){ys(e).ra()}async function nN(e){const t=ys(e);for(const n of e.Ta)t.ea(n.mutations)}async function iN(e,t,n){const i=e.Ta.shift(),s=pp.from(i,t,n);await bA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Th(e)}async function sN(e,t){t&&ys(e).X_&&await async function(i,s){if(function(a){return nA(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();ys(i).B_(),await bA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Th(i)}}(e,t),AA(e)&&SA(e)}async function vv(e,t){const n=it(e);n.asyncQueue.verifyOperationInProgress(),G(nr,"RemoteStore received new credentials");const i=hr(n);n.Ea.add(3),await Dl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Eh(n)}async function rN(e,t){const n=it(e);t?(n.Ea.delete(2),await Eh(n)):t||(n.Ea.add(2),await Dl(n),n.Ra.set("Unknown"))}function ka(e){return e.ma||(e.ma=function(n,i,s){const r=it(n);return r.sa(),new HC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:$C.bind(null,e),t_:XC.bind(null,e),r_:ZC.bind(null,e),H_:WC.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Rp(e)?wp(e):e.Ra.set("Unknown")):(await e.ma.stop(),TA(e))})),e.ma}function ys(e){return e.fa||(e.fa=function(n,i,s){const r=it(n);return r.sa(),new FC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:eN.bind(null,e),r_:sN.bind(null,e),ta:nN.bind(null,e),na:iN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Th(e)):(await e.fa.stop(),e.Ta.length>0&&(G(nr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new xp(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(e,t){if(Ei("AsyncQueue",`${t}: ${e}`),Ma(e))return new B(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{static emptySet(t){return new Jr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=fo(),this.sortedSet=new Gt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Jr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Jr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ga=new Gt(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):X(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Ta{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ta(t,n,Jr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class oN{constructor(){this.queries=Tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=it(n),r=s.queries;s.queries=Tv(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new B(k.ABORTED,"Firestore shutting down"))}}function Tv(){return new cr(e=>Bb(e),dh)}async function Cp(e,t){const n=it(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new aN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ip(a,`Initialization of query '${xr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&Dp(n)}async function Np(e,t){const n=it(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lN(e,t){const n=it(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&Dp(n)}function uN(e,t,n){const i=it(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function Dp(e){e.Ca.forEach(t=>{t.next()})}var Xd,bv;(bv=Xd||(Xd={})).Ma="default",bv.Cache="cache";class Op{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Ta(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ta.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t){this.key=t}}class RA{constructor(t){this.key=t}}class cN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=qb(t),this.tu=new Jr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Ev,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((m,g)=>{const p=s.get(m),_=mh(this.query,g)?g:null,I=!!p&&this.mutatedKeys.has(p.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;p&&_?p.data.isEqual(_.data)?I!==O&&(i.track({type:3,doc:_}),V=!0):this.su(p,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!p&&_?(i.track({type:0,doc:_}),V=!0):p&&!_&&(i.track({type:1,doc:p}),V=!0,(u||h)&&(l=!0)),V&&(_?(a=a.add(_),r=O?r.add(m):r.delete(m)):(a=a.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((m,g)=>function(_,I){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:V})}};return O(_)-O(I)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Ta(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ht(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new RA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new wA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ht();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vp="SyncEngine";class hN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class fN{constructor(t){this.key=t,this.hu=!1}}class dN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new cr(l=>Bb(l),dh),this.Iu=new Map,this.Eu=new Set,this.du=new Gt(Q.comparator),this.Au=new Map,this.Ru=new _p,this.Vu={},this.mu=new Map,this.fu=Ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mN(e,t,n=!0){const i=OA(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await xA(i,t,n,!0),s}async function pN(e,t){const n=OA(e);await xA(n,t,!0,!1)}async function xA(e,t,n,i){const s=await kC(e.localStore,zn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await gN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&vA(e.remoteStore,s),l}async function gN(e,t,n,i,s){e.pu=(g,p,_)=>async function(O,V,S,E){let R=V.view.ru(S);R.Cs&&(R=await mv(O.localStore,V.query,!1).then(({documents:b})=>V.view.ru(b,R)));const D=E&&E.targetChanges.get(V.targetId),L=E&&E.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(R,O.isPrimaryClient,D,L);return Sv(O,V.targetId,F.au),F.snapshot}(e,g,p,_);const r=await mv(e.localStore,t,!0),a=new cN(t,r.Qs),l=a.ru(r.documents),u=Nl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);Sv(e,n,h.au);const m=new hN(t,n,a);return e.Tu.set(t,m),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function yN(e,t,n){const i=it(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!dh(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Yd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ap(i.remoteStore,s.targetId),Zd(i,s.targetId)}).catch(Va)):(Zd(i,s.targetId),await Yd(i.localStore,s.targetId,!0))}async function _N(e,t){const n=it(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ap(n.remoteStore,i.targetId))}async function vN(e,t,n){const i=RN(e);try{const s=await function(a,l){const u=it(a),h=Pt.now(),m=l.reduce((_,I)=>_.add(I.key),ht());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=Ti(),O=ht();return u.Ns.getEntries(_,m).next(V=>{I=V,I.forEach((S,E)=>{E.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,I)).next(V=>{g=V;const S=[];for(const E of l){const R=PI(E,g.get(E.key).overlayedDocument);R!=null&&S.push(new bs(E.key,R,Mb(R.value.mapValue),be.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(V=>{p=V;const S=V.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,S)})}).then(()=>({batchId:p.batchId,changes:Fb(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Gt(ct)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await Ol(i,s.changes),await Th(i.remoteStore)}catch(s){const r=Ip(s,"Failed to persist write");n.reject(r)}}async function IA(e,t){const n=it(e);try{const i=await OC(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?_t(a.hu,14607):s.removedDocuments.size>0&&(_t(a.hu,42227),a.hu=!1))}),await Ol(n,i,t)}catch(i){await Va(i)}}function Av(e,t,n){const i=it(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=it(a);u.onlineState=l;let h=!1;u.queries.forEach((m,g)=>{for(const p of g.Sa)p.va(l)&&(h=!0)}),h&&Dp(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function EN(e,t,n){const i=it(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Gt(Q.comparator);a=a.insert(r,de.newNoDocument(r,tt.min()));const l=ht().add(r),u=new _h(tt.min(),new Map,new Gt(ct),a,l);await IA(i,u),i.du=i.du.remove(r),i.Au.delete(t),Mp(i)}else await Yd(i.localStore,t,!1).then(()=>Zd(i,t,n)).catch(Va)}async function TN(e,t){const n=it(e),i=t.batch.batchId;try{const s=await DC(n.localStore,t);NA(n,i,null),CA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ol(n,s)}catch(s){await Va(s)}}async function bN(e,t,n){const i=it(e);try{const s=await function(a,l){const u=it(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(_t(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(i.localStore,t);NA(i,t,n),CA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Ol(i,s)}catch(s){await Va(s)}}function CA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function NA(e,t,n){const i=it(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Zd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||DA(e,i)})}function DA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ap(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Mp(e))}function Sv(e,t,n){for(const i of n)i instanceof wA?(e.Ru.addReference(i.key,t),AN(e,i)):i instanceof RA?(G(Vp,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||DA(e,i.key)):X(19791,{wu:i})}function AN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(G(Vp,"New document in limbo: "+n),e.Eu.add(i),Mp(e))}function Mp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(St.fromString(t)),i=e.fu.next();e.Au.set(i,new fN(n)),e.du=e.du.insert(n,i),vA(e.remoteStore,new Yi(zn(fh(n.path)),i,"TargetPurposeLimboResolution",uh.ce))}}async function Ol(e,t,n){const i=it(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var m;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Ep.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const m=it(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,p=>P.forEach(p.Es,_=>m.persistence.referenceDelegate.addReference(g,p.targetId,_)).next(()=>P.forEach(p.ds,_=>m.persistence.referenceDelegate.removeReference(g,p.targetId,_)))))}catch(g){if(!Ma(g))throw g;G(Tp,"Failed to update sequence numbers: "+g)}for(const g of h){const p=g.targetId;if(!g.fromCache){const _=m.Ms.get(p),I=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(I);m.Ms=m.Ms.insert(p,O)}}}(i.localStore,r))}async function SN(e,t){const n=it(e);if(!n.currentUser.isEqual(t)){G(Vp,"User change. New user:",t.toKey());const i=await gA(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ol(n,i.Ls)}}function wN(e,t){const n=it(e),i=n.Au.get(t);if(i&&i.hu)return ht().add(i.key);{let s=ht();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function OA(e){const t=it(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=IA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EN.bind(null,t),t.Pu.H_=lN.bind(null,t.eventManager),t.Pu.yu=uN.bind(null,t.eventManager),t}function RN(e){const t=it(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bN.bind(null,t),t}class Mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=vh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return NC(this.persistence,new xC,t.initialUser,this.serializer)}Cu(t){return new pA(vp.mi,this.serializer)}Du(t){return new jC}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mc.provider={build:()=>new Mc};class xN extends Mc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){_t(this.persistence.referenceDelegate instanceof Oc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new fC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Qe.withCacheSize(this.cacheSizeBytes):Qe.DEFAULT;return new pA(i=>Oc.mi(i,n),this.serializer)}}class Wd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SN.bind(null,this.syncEngine),await rN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new oN}()}createDatastore(t){const n=vh(t.databaseInfo.databaseId),i=function(r){return new qC(r)}(t.databaseInfo);return function(r,a,l,u){return new QC(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new YC(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return yv.v()?new yv:new LC}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,m){const g=new dN(s,r,a,l,u,h);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=it(s);G(nr,"RemoteStore shutting down."),r.Ea.add(5),await Dl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ei("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=it(s),l={documents:r.map(g=>Dc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,St.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const p=$I(a.serializer,g);h.set(p.key.toString(),p)});const m=[];return r.forEach(g=>{const p=h.get(g.toString());_t(!!p,55234,{key:g}),m.push(p)}),m}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new yh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=Q.fromPath(i);this.mutations.push(new eA(s,this.precondition(s)))}),await async function(i,s){const r=it(i),a={writes:s.map(l=>cA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,St.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw X(50498,{Gu:t.constructor.name});n=tt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new B(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(tt.min())?be.exists(!1):be.updateTime(n):be.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(tt.min()))throw new B(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return be.updateTime(n)}return be.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new bp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new IN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!Il(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!nA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class NN{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ne.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{G(_s,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(G(_s,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Ip(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function kf(e,t){e.asyncQueue.verifyOperationInProgress(),G(_s,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await gA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await DN(e);G(_s,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>vv(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>vv(t.remoteStore,s)),e._onlineComponents=t}async function DN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){G(_s,"Using user provided OfflineComponentProvider");try{await kf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pa("Error using user provided cache. Falling back to memory cache: "+n),await kf(e,new Mc)}}else G(_s,"Using default OfflineComponentProvider"),await kf(e,new xN(void 0));return e._offlineComponents}async function Pp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(G(_s,"Using user provided OnlineComponentProvider"),await wv(e,e._uninitializedComponentsProvider._online)):(G(_s,"Using default OnlineComponentProvider"),await wv(e,new Wd))),e._onlineComponents}function ON(e){return Pp(e).then(t=>t.syncEngine)}function VN(e){return Pp(e).then(t=>t.datastore)}async function kc(e){const t=await Pp(e),n=t.eventManager;return n.onListen=mN.bind(null,t.syncEngine),n.onUnlisten=yN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_N.bind(null,t.syncEngine),n}function MN(e,t,n={}){const i=new Un;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const m=new kp({next:p=>{m.Nu(),a.enqueueAndForget(()=>Np(r,g));const _=p.docs.has(l);!_&&p.fromCache?h.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?h.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(p)},error:p=>h.reject(p)}),g=new Op(fh(l.path),m,{includeMetadataChanges:!0,qa:!0});return Cp(r,g)}(await kc(e),e.asyncQueue,t,n,i)),i.promise}function kN(e,t,n={}){const i=new Un;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const m=new kp({next:p=>{m.Nu(),a.enqueueAndForget(()=>Np(r,g)),p.fromCache&&u.source==="server"?h.reject(new B(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(p)},error:p=>h.reject(p)}),g=new Op(l,m,{includeMetadataChanges:!0,qa:!0});return Cp(r,g)}(await kc(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firestore.googleapis.com",xv=!0;class Iv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MA,this.ssl=xv}else this.host=t.host,this.ssl=t.ssl??xv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cC)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Zx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bh{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Bx;switch(i.type){case"firstParty":return new Gx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Rv.get(n);i&&(G("ComponentProvider","Removing Datastore"),Rv.delete(n),i.terminate())}(this),Promise.resolve()}}function PN(e,t,n,i={}){var h;e=ze(e,bh);const s=Na(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(ob(`https://${l}`),lb("Firestore",!0)),r.host!==MA&&r.host!==l&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Js(u,a)&&(e._setSettings(u),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ne.MOCK_USER;else{m=m2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ne(p)}e._authCredentials=new qx(new bb(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Xn(this.firestore,t,this._query)}}class Ft{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ft(this.firestore,t,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(xl(n,Ft._jsonSchema))return new Ft(t,i||null,new Q(St.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:ne("string",Ft._jsonSchemaVersion),referencePath:ne("string")};class ls extends Xn{constructor(t,n,i){super(t,n,fh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ft(this.firestore,null,new Q(t))}withConverter(t){return new ls(this.firestore,t,this._path)}}function Jd(e,t,...n){if(e=Bt(e),Ab("collection","path",t),e instanceof bh){const i=St.fromString(t,...n);return q_(i),new ls(e,null,i)}{if(!(e instanceof Ft||e instanceof ls))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(St.fromString(t,...n));return q_(i),new ls(e.firestore,null,i)}}function re(e,t,...n){if(e=Bt(e),arguments.length===1&&(t=lp.newId()),Ab("doc","path",t),e instanceof bh){const i=St.fromString(t,...n);return B_(i),new Ft(e,null,new Q(i))}{if(!(e instanceof Ft||e instanceof ls))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(St.fromString(t,...n));return B_(i),new Ft(e.firestore,e instanceof ls?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class Nv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bp(this,"async_queue_retry"),this._c=()=>{const i=Mf();i&&G(Cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Un;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ma(t))throw t;G(Cv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Ei("INTERNAL UNHANDLED ERROR: ",Dv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=xp.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Dv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class Qn extends bh{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new Nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Nv(t),this._firestoreClient=void 0,await t}}}function jN(e,t){const n=typeof e=="object"?e:fb(),i=typeof e=="string"?e:Rc,s=ap(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=f2("firestore");r&&PN(s,...r)}return s}function Vl(e){if(e._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||LN(e),e._firestoreClient}function LN(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,m){return new lI(l,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,VA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new NN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nn(Se.fromBase64String(t))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new nn(Se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(xl(t,nn._jsonSchema))return nn.fromBase64String(t.bytes)}}nn._jsonSchemaVersion="firestore/bytes/1.0",nn._jsonSchema={type:ne("string",nn._jsonSchemaVersion),bytes:ne("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Te(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bn._jsonSchemaVersion}}static fromJSON(t){if(xl(t,Bn._jsonSchema))return new Bn(t.latitude,t.longitude)}}Bn._jsonSchemaVersion="firestore/geoPoint/1.0",Bn._jsonSchema={type:ne("string",Bn._jsonSchemaVersion),latitude:ne("number"),longitude:ne("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(xl(t,qn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new qn(t.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qn._jsonSchemaVersion="firestore/vectorValue/1.0",qn._jsonSchema={type:ne("string",qn._jsonSchemaVersion),vectorValues:ne("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^__.*__$/;class zN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new bs(t,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(t,this.data,n,this.fieldTransforms)}}class kA{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new bs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function PA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:e})}}class jp{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new jp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Pc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(PA(this.Ac)&&UN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class BN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||vh(t)}Cc(t,n,i,s=!1){return new jp({Ac:t,methodName:n,Dc:i,path:Te.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pa(e){const t=e._freezeSettings(),n=vh(e._databaseId);return new BN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lp(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);Bp("Data must be an object, but it was:",a,i);const l=zA(i,a);let u,h;if(r.merge)u=new sn(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const m=[];for(const g of r.mergeFields){const p=tm(t,g,n);if(!a.contains(p))throw new B(k.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);qA(m,p)||m.push(p)}u=new sn(m),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new zN(new Le(l),u,h)}class Ah extends kl{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ah}}class Up extends kl{_toFieldTransform(t){return new Wb(t.path,new il)}isEqual(t){return t instanceof Up}}class zp extends kl{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new al(t.serializer,Kb(t.serializer,this.Fc));return new Wb(t.path,n)}isEqual(t){return t instanceof zp&&this.Fc===t.Fc}}function jA(e,t,n,i){const s=e.Cc(1,t,n);Bp("Data must be an object, but it was:",s,i);const r=[],a=Le.empty();Ts(i,(u,h)=>{const m=qp(t,u,n);h=Bt(h);const g=s.yc(m);if(h instanceof Ah)r.push(m);else{const p=Pl(h,g);p!=null&&(r.push(m),a.set(m,p))}});const l=new sn(r);return new kA(a,l,s.fieldTransforms)}function LA(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[tm(t,i,n)],u=[s];if(r.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(tm(t,r[p])),u.push(r[p+1]);const h=[],m=Le.empty();for(let p=l.length-1;p>=0;--p)if(!qA(h,l[p])){const _=l[p];let I=u[p];I=Bt(I);const O=a.yc(_);if(I instanceof Ah)h.push(_);else{const V=Pl(I,O);V!=null&&(h.push(_),m.set(_,V))}}const g=new sn(h);return new kA(m,g,a.fieldTransforms)}function UA(e,t,n,i=!1){return Pl(n,e.Cc(i?4:3,t))}function Pl(e,t){if(BA(e=Bt(e)))return Bp("Unsupported field value:",t,e),zA(e,t);if(e instanceof kl)return function(i,s){if(!PA(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=Pl(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=Bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Kb(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Pt.fromDate(i);return{timestampValue:Nc(s.serializer,r)}}if(i instanceof Pt){const r=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nc(s.serializer,r)}}if(i instanceof Bn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nn)return{bytesValue:aA(s.serializer,i._byteString)};if(i instanceof Ft){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:yp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof qn)return function(a,l){return{mapValue:{fields:{[Ob]:{stringValue:Vb},[xc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return mp(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${lh(i)}`)}(e,t)}function zA(e,t){const n={};return Rb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(e,(i,s)=>{const r=Pl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function BA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pt||e instanceof Bn||e instanceof nn||e instanceof Ft||e instanceof kl||e instanceof qn)}function Bp(e,t,n){if(!BA(n)||!Sb(n)){const i=lh(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function tm(e,t,n){if((t=Bt(t))instanceof Ml)return t._internalPath;if(typeof t=="string")return qp(e,t);throw Pc("Field path arguments must be of type string or ",e,!1,void 0,n)}const qN=new RegExp("[~\\*/\\[\\]]");function qp(e,t,n){if(t.search(qN)>=0)throw Pc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ml(...t.split("."))._internalPath}catch{throw Pc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new B(k.INVALID_ARGUMENT,l+e+u)}function qA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new HN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Hp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HN extends ol{data(){return super.data()}}function Hp(e,t){return typeof t=="string"?qp(e,t):t instanceof Ml?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fp{}class Sh extends Fp{}function Vv(e,t,...n){let i=[];t instanceof Fp&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Qp).length,l=r.filter(u=>u instanceof Gp).length;if(a>1||a>0&&l>0)throw new B(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Gp extends Sh{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Gp(t,n,i)}_apply(t){const n=this._parse(t);return FA(t._query,n),new Xn(t.firestore,t.converter,Fd(t._query,n))}_parse(t){const n=Pa(t.firestore);return function(r,a,l,u,h,m,g){let p;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new B(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){jv(g,m);const I=[];for(const O of g)I.push(Pv(u,r,O));p={arrayValue:{values:I}}}else p=Pv(u,r,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||jv(g,m),p=UA(l,a,g,m==="in"||m==="not-in");return ee.create(h,m,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Qp extends Fp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Qp(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)FA(a,u),a=Fd(a,u)}(t._query,n),new Xn(t.firestore,t.converter,Fd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kp extends Sh{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Kp(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nl(r,a)}(t._query,this._field,this._direction);return new Xn(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new ur(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function Mv(e,t="asc"){const n=t,i=Hp("orderBy",e);return Kp._create(i,n)}class Yp extends Sh{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new Yp(t,n,i)}_apply(t){return new Xn(t.firestore,t.converter,Cc(t._query,this._limit,this._limitType))}}function kv(e){return Yp._create("limit",e,"F")}class $p extends Sh{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new $p(t,n,i)}_apply(t){const n=GN(t,this.type,this._docOrFields,this._inclusive);return new Xn(t.firestore,t.converter,function(s,r){return new ur(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)}(t._query,n))}}function FN(...e){return $p._create("startAfter",e,!1)}function GN(e,t,n,i){if(n[0]=Bt(n[0]),n[0]instanceof ol)return function(r,a,l,u,h){if(!u)throw new B(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of Wr(r))if(g.field.isKeyField())m.push(Ic(a,u.key));else{const p=u.data.field(g.field);if(ch(p))throw new B(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=g.field.canonicalString();throw new B(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}m.push(p)}return new va(m,h)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const s=Pa(e.firestore);return function(a,l,u,h,m,g){const p=a.explicitOrderBy;if(m.length>p.length)throw new B(k.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let I=0;I<m.length;I++){const O=m[I];if(p[I].field.isKeyField()){if(typeof O!="string")throw new B(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof O}`);if(!dp(a)&&O.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${O}' contains a slash.`);const V=a.path.child(St.fromString(O));if(!Q.isDocumentKey(V))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const S=new Q(V);_.push(Ic(l,S))}else{const V=UA(u,h,O);_.push(V)}}return new va(_,g)}(e._query,e.firestore._databaseId,s,t,n,i)}}function Pv(e,t,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new B(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dp(t)&&n.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(St.fromString(n));if(!Q.isDocumentKey(i))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ic(e,new Q(i))}if(n instanceof Ft)return Ic(e,n._key);throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lh(n)}.`)}function jv(e,t){if(!Array.isArray(e)||e.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FA(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class GA{convertValue(t,n="none"){switch(gs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ps(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw X(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ts(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[xc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>Wt(a.doubleValue));return new qn(n)}convertGeoPoint(t){return new Bn(Wt(t.latitude),Wt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=hh(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Jo(t));default:return null}}convertTimestamp(t){const n=ms(t);return new Pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=St.fromString(t);_t(dA(i),9688,{name:t});const s=new tl(i.get(1),i.get(3)),r=new Q(i.popFirst(5));return s.isEqual(n)||Ei(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class QN extends GA{constructor(t){super(),this.firestore=t}convertBytes(t){return new nn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}class qr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class us extends ol{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Hp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=us._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}us._jsonSchemaVersion="firestore/documentSnapshot/1.0",us._jsonSchema={type:ne("string",us._jsonSchemaVersion),bundleSource:ne("string","DocumentSnapshot"),bundleName:ne("string"),bundle:ne("string")};class qu extends us{data(t={}){return super.data(t)}}class Ys{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new qr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new qu(this._firestore,this._userDataWriter,i.key,i,new qr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new qu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new qu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:KN(l.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ys._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function KN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(e){e=ze(e,Ft);const t=ze(e.firestore,Qn);return MN(Vl(t),e._key).then(n=>KA(t,e,n))}Ys._jsonSchemaVersion="firestore/querySnapshot/1.0",Ys._jsonSchema={type:ne("string",Ys._jsonSchemaVersion),bundleSource:ne("string","QuerySnapshot"),bundleName:ne("string"),bundle:ne("string")};class wh extends GA{constructor(t){super(),this.firestore=t}convertBytes(t){return new nn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function QA(e){e=ze(e,Xn);const t=ze(e.firestore,Qn),n=Vl(t),i=new wh(t);return HA(e._query),kN(n,e._query).then(s=>new Ys(t,i,e,s))}function $i(e,t,n){e=ze(e,Ft);const i=ze(e.firestore,Qn),s=Xp(e.converter,t,n);return Rh(i,[Lp(Pa(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,be.none())])}function YN(e,t,n,...i){e=ze(e,Ft);const s=ze(e.firestore,Qn),r=Pa(s);let a;return a=typeof(t=Bt(t))=="string"||t instanceof Ml?LA(r,"updateDoc",e._key,t,n,i):jA(r,"updateDoc",e._key,t),Rh(s,[a.toMutation(e._key,be.exists(!0))])}function $N(e){return Rh(ze(e.firestore,Qn),[new yh(e._key,be.none())])}function Lv(e,t){const n=ze(e.firestore,Qn),i=re(e),s=Xp(e.converter,t);return Rh(n,[Lp(Pa(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,be.exists(!1))]).then(()=>i)}function XN(e,...t){var u,h,m;e=Bt(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||Ov(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ov(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let r,a,l;if(e instanceof Ft)a=ze(e.firestore,Qn),l=fh(e._key.path),r={next:g=>{t[i]&&t[i](KA(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=ze(e,Xn);a=ze(g.firestore,Qn),l=g._query;const p=new wh(a);r={next:_=>{t[i]&&t[i](new Ys(a,p,g,_))},error:t[i+1],complete:t[i+2]},HA(e._query)}return function(p,_,I,O){const V=new kp(O),S=new Op(_,V,I);return p.asyncQueue.enqueueAndForget(async()=>Cp(await kc(p),S)),()=>{V.Nu(),p.asyncQueue.enqueueAndForget(async()=>Np(await kc(p),S))}}(Vl(a),l,s,r)}function Rh(e,t){return function(i,s){const r=new Un;return i.asyncQueue.enqueueAndForget(async()=>vN(await ON(i),s,r)),r.promise}(Vl(e),t)}function KA(e,t,n){const i=n.docs.get(t._key),s=new wh(e);return new us(e,s,t._key,i,new qr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={maxAttempts:5};function po(e,t){if((e=Bt(e)).firestore!==t)throw new B(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Pa(t)}get(t){const n=po(t,this._firestore),i=new QN(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return X(24041);const r=s[0];if(r.isFoundDocument())return new ol(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new ol(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:r})})}set(t,n,i){const s=po(t,this._firestore),r=Xp(s.converter,n,i),a=Lp(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=po(t,this._firestore);let a;return a=typeof(n=Bt(n))=="string"||n instanceof Ml?LA(this._dataReader,"Transaction.update",r._key,n,i,s):jA(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=po(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN extends WN{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=po(t,this._firestore),i=new wh(this._firestore);return super.get(t).then(s=>new us(this._firestore,i,n._key,s._document,new qr(!1,!1),n.converter))}}function Uv(e,t,n){e=ze(e,Qn);const i={...ZN,...n};return function(r){if(r.maxAttempts<1)throw new B(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new Un;return r.asyncQueue.enqueueAndForget(async()=>{const h=await VN(r);new CN(r.asyncQueue,h,l,a,u).ju()}),u.promise}(Vl(e),s=>t(new JN(e,s)),i)}function bu(){return new Up("serverTimestamp")}function tD(e){return new zp("increment",e)}(function(t,n=!0){(function(s){Oa=s})(Da),ma(new tr("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Qn(new Hx(i.getProvider("auth-internal")),new Qx(a,i.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(h.options.projectId,m)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),as(j_,L_,t),as(j_,L_,"esm2020")})();function YA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eD=YA,$A=new wl("auth","Firebase",YA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new sp("@firebase/auth");function nD(e,...t){jc.logLevel<=ut.WARN&&jc.warn(`Auth (${Da}): ${e}`,...t)}function Hu(e,...t){jc.logLevel<=ut.ERROR&&jc.error(`Auth (${Da}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(e,...t){throw Zp(e,...t)}function Hn(e,...t){return Zp(e,...t)}function XA(e,t,n){const i={...eD(),[t]:n};return new wl("auth","Firebase",i).create(t,{appName:e.name})}function mi(e){return XA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zp(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return $A.create(e,...t)}function et(e,t,...n){if(!e)throw Zp(t,...n)}function ci(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hu(t),new Error(t)}function bi(e,t){e||ci(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function iD(){return zv()==="http:"||zv()==="https:"}function zv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iD()||E2()||"connection"in navigator)?navigator.onLine:!0}function rD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n){this.shortDelay=t,this.longDelay=n,bi(n>t,"Short delay should be less than long delay!"),this.isMobile=y2()||T2()}get(){return sD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(e,t){bi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lD=new jl(3e4,6e4);function As(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function wi(e,t,n,i,s={}){return WA(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=Rl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return v2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Na(e.emulatorConfig.host)&&(h.credentials="include"),ZA.fetch()(await JA(e,e.config.apiHost,n,l),h)})}async function WA(e,t,n){e._canInitEmulator=!1;const i={...aD,...t};try{const s=new cD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Au(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Au(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Au(e,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw XA(e,m,h);In(e,m)}}catch(s){if(s instanceof Si)throw s;In(e,"network-request-failed",{message:String(s)})}}async function Ll(e,t,n,i,s={}){const r=await wi(e,t,n,i,s);return"mfaPendingCredential"in r&&In(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function JA(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Wp(e.config,s):`${e.config.apiScheme}://${s}`;return oD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function uD(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),lD.get())})}}function Au(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Hn(e,t,i);return s.customData._tokenResponse=n,s}function Bv(e){return e!==void 0&&e.enterprise!==void 0}class hD{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return uD(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fD(e,t){return wi(e,"GET","/v2/recaptchaConfig",As(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(e,t){return wi(e,"POST","/v1/accounts:delete",t)}async function Lc(e,t){return wi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mD(e,t=!1){const n=Bt(e),i=await n.getIdToken(t),s=Jp(i);et(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Po(Pf(s.auth_time)),issuedAtTime:Po(Pf(s.iat)),expirationTime:Po(Pf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Pf(e){return Number(e)*1e3}function Jp(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const s=ib(n);return s?JSON.parse(s):(Hu("Failed to decode base64 JWT payload"),null)}catch(s){return Hu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qv(e){const t=Jp(e);return et(t,"internal-error"),et(typeof t.exp<"u","internal-error"),et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Si&&pD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function pD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Po(this.lastLoginAt),this.creationTime=Po(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await ba(e,Lc(t,{idToken:n}));et(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?tS(s.providerUserInfo):[],a=_D(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,m)}async function yD(e){const t=Bt(e);await Uc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _D(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function tS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(e,t){const n=await WA(e,{},async()=>{const i=Rl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await JA(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Na(e.emulatorConfig.host)&&(u.credentials="include"),ZA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ED(e,t){return wi(e,"POST","/v2/accounts:revokeToken",As(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){et(t.idToken,"internal-error"),et(typeof t.idToken<"u","internal-error"),et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):qv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){et(t.length!==0,"internal-error");const n=qv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await vD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new ta;return i&&(et(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(et(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(et(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ta,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(e,t){et(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class wn{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new gD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await ba(this,this.stsTokenManager.getToken(this.auth,t));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return mD(this,t)}reload(){return yD(this)}_assign(t){this!==t&&(et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new wn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Uc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(mi(this.auth));const t=await this.getIdToken();return await ba(this,dD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:p,isAnonymous:_,providerData:I,stsTokenManager:O}=n;et(g&&O,t,"internal-error");const V=ta.fromJSON(this.name,O);et(typeof g=="string",t,"internal-error"),Oi(i,t.name),Oi(s,t.name),et(typeof p=="boolean",t,"internal-error"),et(typeof _=="boolean",t,"internal-error"),Oi(r,t.name),Oi(a,t.name),Oi(l,t.name),Oi(u,t.name),Oi(h,t.name),Oi(m,t.name);const S=new wn({uid:g,auth:t,email:s,emailVerified:p,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:m});return I&&Array.isArray(I)&&(S.providerData=I.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const s=new ta;s.updateFromServerResponse(n);const r=new wn({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Uc(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];et(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?tS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new ta;l.updateFromIdToken(i);const u=new wn({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new nm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function hi(e){bi(e instanceof Function,"Expected a class definition");let t=Hv.get(e);return t?(bi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}eS.type="NONE";const Fv=eS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(e,t,n){return`firebase:${e}:${t}:${n}`}class ea{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Fu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Fu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Lc(this.auth,{idToken:t}).catch(()=>{});return n?wn._fromGetAccountInfoResponse(this.auth,n,t):null}return wn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new ea(hi(Fv),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||hi(Fv);const a=Fu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const p=await Lc(t,{idToken:m}).catch(()=>{});if(!p)break;g=await wn._fromGetAccountInfoResponse(t,p,m)}else g=wn._fromJSON(t,m);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ea(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new ea(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(oS(t))return"Blackberry";if(lS(t))return"Webos";if(iS(t))return"Safari";if((t.includes("chrome/")||sS(t))&&!t.includes("edge/"))return"Chrome";if(aS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function nS(e=Ve()){return/firefox\//i.test(e)}function iS(e=Ve()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sS(e=Ve()){return/crios\//i.test(e)}function rS(e=Ve()){return/iemobile/i.test(e)}function aS(e=Ve()){return/android/i.test(e)}function oS(e=Ve()){return/blackberry/i.test(e)}function lS(e=Ve()){return/webos/i.test(e)}function tg(e=Ve()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function TD(e=Ve()){var t;return tg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function bD(){return b2()&&document.documentMode===10}function uS(e=Ve()){return tg(e)||aS(e)||lS(e)||oS(e)||/windows phone/i.test(e)||rS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(e,t=[]){let n;switch(e){case"Browser":n=Gv(Ve());break;case"Worker":n=`${Gv(Ve())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(e,t={}){return wi(e,"GET","/v2/passwordPolicy",As(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=6;class RD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qv(this),this.idTokenSubscription=new Qv(this),this.beforeStateQueue=new AD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await ea.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Lc(this,{idToken:t}),i=await wn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(_n(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Uc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=rD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(_n(this.app))return Promise.reject(mi(this));const n=t?Bt(t):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return _n(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SD(this),n=new RD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new wl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ED(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&hi(t)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=cS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&nD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ss(e){return Bt(e)}class Qv{constructor(t){this.auth=t,this.observer=null,this.addObserver=N2(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ID(e){xh=e}function hS(e){return xh.loadJS(e)}function CD(){return xh.recaptchaEnterpriseScript}function ND(){return xh.gapiScript}function DD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class OD{constructor(){this.enterprise=new VD}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class VD{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const MD="recaptcha-enterprise",fS="NO_RECAPTCHA";class kD{constructor(t){this.type=MD,this.auth=Ss(t)}async verify(t="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{fD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new hD(u);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;Bv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:t}).then(h=>{a(h)}).catch(()=>{a(fS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OD().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&Bv(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=CD();u.length!==0&&(u+=l),hS(u).then(()=>{s(l,r,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function Kv(e,t,n,i=!1,s=!1){const r=new kD(e);let a;if(s)a=fS;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function im(e,t,n,i,s){var r;if((r=e._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Kv(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Kv(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(e,t){const n=ap(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Js(r,t??{}))return s;In(s,"already-initialized")}return n.initialize({options:t})}function jD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(hi);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function LD(e,t,n){const i=Ss(e);et(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=dS(t),{host:a,port:l}=UD(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){et(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),et(Js(h,i.config.emulator)&&Js(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Na(a)?(ob(`${r}//${a}${u}`),lb("Auth",!0)):zD()}function dS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function UD(e){const t=dS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Yv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Yv(a)}}}function Yv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function zD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(t){return ci("not implemented")}_linkToIdToken(t,n){return ci("not implemented")}_getReauthenticationResolver(t){return ci("not implemented")}}async function BD(e,t){return wi(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(e,t){return Ll(e,"POST","/v1/accounts:signInWithPassword",As(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(e,t){return Ll(e,"POST","/v1/accounts:signInWithEmailLink",As(e,t))}async function FD(e,t){return Ll(e,"POST","/v1/accounts:signInWithEmailLink",As(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends eg{constructor(t,n,i,s=null){super("password",i),this._email=t,this._password=n,this._tenantId=s}static _fromEmailAndPassword(t,n){return new ll(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new ll(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(t,n,"signInWithPassword",qD);case"emailLink":return HD(t,{email:this._email,oobCode:this._password});default:In(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(t,i,"signUpPassword",BD);case"emailLink":return FD(t,{idToken:n,email:this._email,oobCode:this._password});default:In(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(e,t){return Ll(e,"POST","/v1/accounts:signInWithIdp",As(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="http://localhost";class ir extends eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ir(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new ir(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return na(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,na(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,na(t,n)}buildRequest(){const t={requestUri:GD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Rl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KD(e){const t=uo(co(e)).link,n=t?uo(co(t)).deep_link_id:null,i=uo(co(e)).deep_link_id;return(i?uo(co(i)).link:null)||i||n||t||e}class ng{constructor(t){const n=uo(co(t)),i=n.apiKey??null,s=n.oobCode??null,r=QD(n.mode??null);et(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=KD(t);try{return new ng(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(t,n){return ll._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=ng.parseLink(n);return et(i,"argument-error"),ll._fromEmailAndCode(t,i.code,i.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends mS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Ul{constructor(){super("facebook.com")}static credential(t){return ir._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zi.credentialFromTaggedObject(t)}static credentialFromError(t){return zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zi.credential(t.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Ul{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ir._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Bi.credentialFromTaggedObject(t)}static credentialFromError(t){return Bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Bi.credential(n,i)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Ul{constructor(){super("github.com")}static credential(t){return ir._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qi.credential(t.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Ul{constructor(){super("twitter.com")}static credential(t,n){return ir._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Hi.credentialFromTaggedObject(t)}static credentialFromError(t){return Hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Hi.credential(n,i)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(e,t){return Ll(e,"POST","/v1/accounts:signUp",As(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await wn._fromIdTokenResponse(t,i,s),a=$v(i);return new sr({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=$v(i);return new sr({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function $v(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Si{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new zc(t,n,i,s)}}function pS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?zc._fromErrorAndOperation(e,r,t,i):r})}async function $D(e,t,n=!1){const i=await ba(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return sr._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(e,t,n=!1){const{auth:i}=e;if(_n(i.app))return Promise.reject(mi(i));const s="reauthenticate";try{const r=await ba(e,pS(i,s,t,e),n);et(r.idToken,i,"internal-error");const a=Jp(r.idToken);et(a,i,"internal-error");const{sub:l}=a;return et(e.uid===l,i,"user-mismatch"),sr._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&In(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(e,t,n=!1){if(_n(e.app))return Promise.reject(mi(e));const i="signIn",s=await pS(e,i,t),r=await sr._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function ZD(e,t){return gS(Ss(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(e){const t=Ss(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function WD(e,t,n){if(_n(e.app))return Promise.reject(mi(e));const i=Ss(e),a=await im(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&yS(e),u}),l=await sr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function JD(e,t,n){return _n(e.app)?Promise.reject(mi(e)):ZD(Bt(e),ja.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&yS(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(e,t){return wi(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=Bt(e),r={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await ba(i,t4(i.auth,r));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(e,t){return Bt(e).setPersistence(t)}function i4(e,t,n,i){return Bt(e).onIdTokenChanged(t,n,i)}function s4(e,t,n){return Bt(e).beforeAuthStateChanged(t,n)}function r4(e,t,n,i){return Bt(e).onAuthStateChanged(t,n,i)}function a4(e){return Bt(e).signOut()}const Bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=1e3,l4=10;class vS extends _S{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);bD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,l4):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},o4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}vS.type="LOCAL";const ES=vS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS extends _S{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}TS.type="SESSION";const bS=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new Ih(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await u4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=ig("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===h)switch(p.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(p.data.response);break;default:clearTimeout(m),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function h4(e){Fn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function f4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function m4(){return AS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebaseLocalStorageDb",p4=1,qc="firebaseLocalStorage",wS="fbase_key";class zl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(e,t){return e.transaction([qc],t?"readwrite":"readonly").objectStore(qc)}function g4(){const e=indexedDB.deleteDatabase(SS);return new zl(e).toPromise()}function sm(){const e=indexedDB.open(SS,p4);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(qc,{keyPath:wS})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(qc)?t(i):(i.close(),await g4(),t(await sm()))})})}async function Xv(e,t,n){const i=Ch(e,!0).put({[wS]:t,value:n});return new zl(i).toPromise()}async function y4(e,t){const n=Ch(e,!1).get(t),i=await new zl(n).toPromise();return i===void 0?null:i.value}function Zv(e,t){const n=Ch(e,!0).delete(t);return new zl(n).toPromise()}const _4=800,v4=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>v4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(m4()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await f4(),!this.activeServiceWorker)return;this.sender=new c4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||d4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await sm();return await Xv(t,Bc,"1"),await Zv(t,Bc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>y4(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=Ch(s,!1).getAll();return new zl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const E4=RS;new jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(e,t){return t?hi(t):(et(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends eg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return na(t,this._buildIdpRequest())}_linkToIdToken(t,n){return na(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return na(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function b4(e){return gS(e.auth,new sg(e),e.bypassAuthState)}function A4(e){const{auth:t,user:n}=e;return et(n,t,"internal-error"),XD(n,new sg(e),e.bypassAuthState)}async function S4(e){const{auth:t,user:n}=e;return et(n,t,"internal-error"),$D(n,new sg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return b4;case"linkViaPopup":case"linkViaRedirect":return S4;case"reauthViaPopup":case"reauthViaRedirect":return A4;default:In(this.auth,"internal-error")}}resolve(t){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new jl(2e3,1e4);class Hr extends xS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Hr.currentPopupAction&&Hr.currentPopupAction.cancel(),Hr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return et(t,this.auth,"internal-error"),t}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const t=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,w4.get())};t()}}Hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="pendingRedirect",Gu=new Map;class x4 extends xS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Gu.get(this.auth._key());if(!t){try{const i=await I4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Gu.set(this.auth._key(),t)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I4(e,t){const n=D4(t),i=N4(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function C4(e,t){Gu.set(e._key(),t)}function N4(e){return hi(e._redirectPersistence)}function D4(e){return Fu(R4,e.config.apiKey,e.name)}async function O4(e,t){return await Ss(e)._initializationPromise,IS(e,t,!1)}async function IS(e,t,n=!1){if(_n(e.app))return Promise.reject(mi(e));const i=Ss(e),s=T4(i,t),a=await new x4(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=10*60*1e3;class M4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!k4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!CS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=V4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wv(t))}saveEventToCache(t){this.cachedEventUids.add(Wv(t)),this.lastProcessedEventTime=Date.now()}}function Wv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function CS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function k4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(e,t={}){return wi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L4=/^https?/;async function U4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await P4(e);for(const n of t)try{if(z4(n))return}catch{}In(e,"unauthorized-domain")}function z4(e){const t=em(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!L4.test(n))return!1;if(j4.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new jl(3e4,6e4);function Jv(){const e=Fn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function q4(e){return new Promise((t,n)=>{var s,r,a;function i(){Jv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(Hn(e,"network-request-failed"))},timeout:B4.get()})}if((r=(s=Fn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Fn().gapi)!=null&&a.load)i();else{const l=DD("iframefcb");return Fn()[l]=()=>{gapi.load?i():n(Hn(e,"network-request-failed"))},hS(`${ND()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Qu=null,t})}let Qu=null;function H4(e){return Qu=Qu||q4(e),Qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new jl(5e3,15e3),G4="__/auth/iframe",Q4="emulator/auth/iframe",K4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $4(e){const t=e.config;et(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Wp(t,Q4):`https://${e.config.authDomain}/${G4}`,i={apiKey:t.apiKey,appName:e.name,v:Da},s=Y4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Rl(i).slice(1)}`}async function X4(e){const t=await H4(e),n=Fn().gapi;return et(n,e,"internal-error"),t.open({where:document.body,url:$4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Hn(e,"network-request-failed"),l=Fn().setTimeout(()=>{r(a)},F4.get());function u(){Fn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W4=500,J4=600,tO="_blank",eO="http://localhost";class tE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nO(e,t,n,i=W4,s=J4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...Z4,width:i.toString(),height:s.toString(),top:r,left:a},h=Ve().toLowerCase();n&&(l=sS(h)?tO:n),nS(h)&&(t=t||eO,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[_,I])=>`${p}${_}=${I},`,"");if(TD(h)&&l!=="_self")return iO(t||"",l),new tE(null);const g=window.open(t||"",l,m);et(g,e,"popup-blocked");try{g.focus()}catch{}return new tE(g)}function iO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="__/auth/handler",rO="emulator/auth/handler",aO=encodeURIComponent("fac");async function eE(e,t,n,i,s,r){et(e.config.authDomain,e,"auth-domain-config-required"),et(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Da,eventId:s};if(t instanceof mS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",C2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(t instanceof Ul){const m=t.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await e._getAppCheckToken(),h=u?`#${aO}=${encodeURIComponent(u)}`:"";return`${oO(e)}?${Rl(l).slice(1)}${h}`}function oO({config:e}){return e.emulator?Wp(e,rO):`https://${e.authDomain}/${sO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="webStorageSupport";class lO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bS,this._completeRedirectFn=IS,this._overrideRedirectResult=C4}async _openPopup(t,n,i,s){var a;bi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await eE(t,n,i,em(),s);return nO(t,r,ig())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await eE(t,n,i,em(),s);return h4(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(bi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await X4(t),i=new M4(t);return n.register("authEvent",s=>(et(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(jf,{type:jf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[jf];r!==void 0&&n(!!r),In(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=U4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return uS()||iS()||tg()}}const uO=lO;var nE="@firebase/auth",iE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fO(e){ma(new tr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;et(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cS(e)},h=new xD(i,s,r,u);return jD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ma(new tr("auth-internal",t=>{const n=Ss(t.getProvider("auth").getImmediate());return(i=>new cO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(nE,iE,hO(e)),as(nE,iE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=5*60,mO=ab("authIdTokenMaxAge")||dO;let sE=null;const pO=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mO)return;const s=n==null?void 0:n.token;sE!==s&&(sE=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gO(e=fb()){const t=ap(e,"auth");if(t.isInitialized())return t.getImmediate();const n=PD(e,{popupRedirectResolver:uO,persistence:[E4,ES,bS]}),i=ab("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=pO(r.toString());s4(n,a,()=>a(n.currentUser)),i4(n,l=>a(l))}}const s=sb("auth");return s&&LD(n,`http://${s}`),n}function yO(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}ID({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Hn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",yO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fO("Browser");var _O="firebase",vO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(_O,vO,"app");const EO={apiKey:"AIzaSyAhMZTS-LgXURFr19kmDvVG3mc_j68PkNI",authDomain:"tene-9f8c9.firebaseapp.com",projectId:"tene-9f8c9",storageBucket:"tene-9f8c9.firebasestorage.app",messagingSenderId:"1096524923335",appId:"1:1096524923335:web:a2662d6197b49fe3bbd9e2"},NS=hb(EO),Kt=jN(NS),Ls=gO(NS);n4(Ls,ES);const TO=({auth:e,onRegisterClick:t})=>{const[n,i]=U.useState(!1),[s,r]=U.useState(""),[a,l]=U.useState(""),[u,h]=U.useState(""),[m,g]=U.useState(""),p=async I=>{if(I.preventDefault(),g(""),n){if(!u.trim()){g("Пожалуйста, введите имя.");return}try{const O=await WD(e,s,a);await e4(O.user,{displayName:u})}catch(O){g(_(O.code))}}else try{await JD(e,s,a)}catch(O){g(_(O.code))}},_=I=>{switch(I){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[n&&f.jsx("input",{type:"text",value:u,onChange:I=>h(I.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),f.jsx("input",{type:"email",value:s,onChange:I=>r(I.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),f.jsx("input",{type:"password",value:a,onChange:I=>l(I.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),m&&f.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),f.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:n?"Зарегистрироваться":"Войти"})]}),f.jsx("div",{className:"flex items-center justify-center",children:f.jsx("button",{onClick:()=>{n||t(),i(!n),g("")},className:"text-sm text-accent hover:underline",children:n?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},bO=({auth:e,onRegisterClick:t})=>f.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:f.jsxs("div",{className:"w-full max-w-sm text-center",children:[f.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),f.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),f.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:f.jsx(TO,{auth:e,onRegisterClick:t})})]})}),DS=({className:e=""})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:f.jsx("path",{d:"m9 18 6-6-6-6"})}),OS=({className:e=""})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("path",{d:"M19 12H5"}),f.jsx("polyline",{points:"12 19 5 12 12 5"})]}),VS=({className:e="",filled:t=!1})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),AO=({className:e=""})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[f.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),f.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),SO=({className:e=""})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:f.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),rg=({className:e="",filled:t=!1})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:f.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),MS=({className:e=""})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),f.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),kS=({className:e="",filled:t=!1})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:f.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),wO=({className:e="",filled:t=!1})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),RO=({className:e="",filled:t=!1})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("path",{d:"M4 22h16"}),f.jsx("path",{d:"M7 22V2h10v20"}),f.jsx("path",{d:"M7 12h4"})]}),xO=({className:e=""})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:f.jsx("path",{d:"m15 18-6-6 6-6"})}),IO=({className:e=""})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:f.jsx("path",{d:"m9 18 6-6-6-6"})}),CO=({className:e=""})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),f.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),NO=({className:e=""})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),f.jsx("polyline",{points:"16 17 21 12 16 7"}),f.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),DO=({className:e=""})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[f.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),f.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),ag=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>f.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((s,r)=>f.jsx("div",{onClick:()=>t(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:f.jsxs("div",{className:"relative transition-all duration-300",children:[f.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:f.jsx(kS,{filled:n.includes(s.id),width:"20",height:"20"})}),f.jsx("img",{src:`/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),f.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[f.jsx("h2",{className:"font-semibold text-xs truncate flex-1",children:s.title}),s.views>0&&f.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[f.jsx(DO,{className:"w-4 h-4"}),f.jsx("span",{children:s.views})]})]})]})},s.id)):f.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),OO=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},PS=Sw.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:I})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[f.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[f.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),f.jsx("span",{children:O(e.timestamp)})]}),u===e.id?f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.jsx("input",{type:"text",value:h,autoFocus:!0,onChange:V=>m(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),f.jsx("button",{onClick:()=>r(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),f.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):f.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),f.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[f.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[f.jsx(rg,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),f.jsx("span",{children:e.likeCount||0})]}),f.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),f.jsx("button",{onClick:()=>s(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===e.id&&f.jsxs("form",{onSubmit:V=>I(V,e.id),className:"flex items-center gap-2 mt-2",children:[f.jsx("input",{type:"text",value:p,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),f.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:f.jsx(MS,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&f.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(V=>f.jsx(PS,{comment:V,onReply:t,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:I},V.id))})]})}),VO=()=>f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[f.jsx(rg,{className:"animate-pulse-heart text-accent",filled:!0}),f.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),og=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[f.jsx(SO,{className:"mx-auto mb-4 text-accent"}),f.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),f.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),f.jsx("div",{className:"space-y-3",children:n.map(i=>f.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[f.jsx("p",{className:"font-bold",children:i.name}),f.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),f.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},lg=({onClose:e,onSelectMethod:t,plan:n})=>f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[f.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),f.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[f.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),f.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),f.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[f.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),f.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]}),f.jsxs("button",{onClick:()=>t("boosty"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[f.jsx("p",{className:"font-bold",children:"🧡 Оплатить через Boosty"}),f.jsx("p",{className:"text-sm opacity-70",children:"Автоматическая активация через Telegram"})]}),f.jsx("div",{className:"text-center pt-2",children:f.jsx("button",{onClick:()=>t("boosty"),className:"text-sm text-accent hover:underline",children:"Уже есть подписка? Синхронизировать аккаунт"})})]}),f.jsx("button",{onClick:e,className:"w-full py-3 mt-6 rounded-lg border border-border-color hover:bg-white/5 transition-colors",children:"Назад"})]})}),MO=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:RO},{id:"search",label:"Поиск",icon:VS},{id:"bookmarks",label:"Закладки",icon:kS},{id:"profile",label:"Профиль",icon:wO}];return f.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:f.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>f.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[f.jsx(i.icon,{filled:e===i.id}),f.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},kO=({onReadMore:e})=>{const[t,n]=U.useState([]),[i,s]=U.useState(0);U.useEffect(()=>{fetch("/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%t.length),a=()=>s(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return f.jsx("div",{className:"p-4",children:f.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[f.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-text-main",children:l.title}),f.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),f.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:f.jsx(xO,{className:"w-5 h-5"})}),f.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:f.jsx(IO,{className:"w-5 h-5"})})]})]})})},PO=({newsItem:e,onClose:t})=>f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:f.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[f.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),f.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),f.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),Kn=({title:e,onBack:t})=>f.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&f.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:f.jsx(OS,{})}),f.jsx("h1",{className:"text-xl font-bold",children:e})]}),jO=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Что такое Tenebris Verbum?"}),f.jsx("p",{className:"opacity-80",children:"Tenebris Verbum — это веб-приложение, созданное для комфортного чтения новелл. Оно представляет собой цифровую библиотеку, доступную через Telegram, и оптимизировано для мобильных устройств."}),f.jsxs("div",{className:"mt-4 space-y-2 opacity-80",children:[f.jsx("p",{className:"font-semibold",children:"Ключевые возможности приложения:"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[f.jsxs("li",{children:[f.jsx("b",{children:"Библиотека новелл:"})," Главный экран, где вы можете просматривать доступные новеллы, их обложки и названия."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Подробная информация о новелле:"})," Нажав на новеллу, вы увидите детальную страницу с её описанием, автором, жанрами и списком глав."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Удобная читалка:"})," Приложение предлагает продуманный интерфейс для чтения глав с возможностью настройки размера шрифта."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Система закладок:"})," Вы можете добавлять понравившиеся новеллы в закладки для быстрого доступа."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Поиск и фильтрация:"})," Есть функция поиска по названию новеллы и возможность фильтрации по жанрам прямо из карточки новеллы."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Интерактивность:"})," Пользователи могут оставлять комментарии к главам, отвечать на комментарии других, ставить лайки главам и комментариям."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Персонализация:"})," В профиле можно переключаться между светлой и тёмной темами оформления."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Система подписок:"})," Для доступа к эксклюзивным (платным) главам в приложении реализована система подписок."]})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Руководство пользователя и правила"}),f.jsxs("div",{className:"space-y-4 opacity-80",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"1. Вход и Регистрация:"}),f.jsx("p",{children:"При первом входе в приложение вас встретит экран авторизации. Вы можете создать новый аккаунт, указав ваше имя, email и пароль, либо войти в уже существующий. Это необходимо для сохранения вашего прогресса, закладок и статуса подписки."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"2. Навигация:"}),f.jsx("p",{children:"В нижней части экрана расположена панель навигации с четырьмя основными разделами:"}),f.jsxs("ul",{className:"list-disc list-inside ml-4",children:[f.jsxs("li",{children:[f.jsx("b",{children:"Библиотека:"})," Ваш основной экран с каталогом всех новелл."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Поиск:"})," Раздел для поиска новелл по названию."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Закладки:"})," Здесь хранятся все новеллы, которые вы отметили."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Профиль:"})," Управление вашим аккаунтом и подпиской."]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"3. Чтение:"}),f.jsx("p",{children:"На странице новеллы выберите нужную главу из списка. Некоторые главы могут быть отмечены иконкой замка (🔒) — это платный контент, доступный по подписке. В режиме чтения вы можете:"}),f.jsxs("ul",{className:"list-disc list-inside ml-4",children:[f.jsx("li",{children:"Переключаться между главами с помощью стрелок внизу экрана."}),f.jsx("li",{children:"Открыть оглавление, чтобы быстро перейти к другой главе."}),f.jsx("li",{children:'Зайти в настройки (иконка шестерёнки) и изменить размер текста кнопками "+" и "-".'})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"4. Профиль:"}),f.jsxs("p",{children:["В этом разделе вы можете видеть ваш email и имя. Здесь находится кнопка для выхода из аккаунта. Тут же можно включить или выключить тёмную тему. ",f.jsx("b",{children:"Ваш ID для привязки:"})," Это уникальный идентификатор вашего аккаунта. Он понадобится для активации подписки через Telegram-бота. Его можно скопировать одним нажатием."]})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Активация подписок"}),f.jsx("p",{className:"opacity-80 mb-3",children:"Подписка открывает доступ ко всем платным главам во всех новеллах. Процесс оформления разделён на несколько шагов."}),f.jsxs("div",{className:"space-y-4 opacity-80",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"Шаг 1: Выбор тарифа"}),f.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[f.jsxs("li",{children:["Зайдите в раздел ",f.jsx("b",{children:'"Профиль"'}),"."]}),f.jsxs("li",{children:["Нажмите кнопку ",f.jsx("b",{children:'"Оформить подписку"'}),"."]}),f.jsxs("li",{children:["Во всплывающем окне выберите один из доступных тарифов:",f.jsxs("ul",{className:"list-disc list-inside ml-6",children:[f.jsxs("li",{children:[f.jsx("b",{children:"1 месяц"})," за 199 ₽"]}),f.jsxs("li",{children:[f.jsx("b",{children:"3 месяца"})," за 539 ₽"]}),f.jsxs("li",{children:[f.jsx("b",{children:"1 год"})," за 1899 ₽"]})]})]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"Шаг 2: Выбор способа оплаты"}),f.jsxs("p",{className:"mb-2",children:["После выбора тарифа вам будет предложено три способа оплаты. Каждый из них требует взаимодействия с Telegram-ботом ",f.jsx("b",{children:"tenebrisverbot"}),"."]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h5",{className:"font-semibold",children:"Способ 1: Boosty (Автоматическая активация)"}),f.jsx("p",{children:"Это самый быстрый и рекомендуемый способ."}),f.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[f.jsxs("li",{children:["В приложении, после выбора тарифа, нажмите ",f.jsx("b",{children:'"Оплатить через Boosty"'}),"."]}),f.jsx("li",{children:"Вас автоматически перенаправит в Telegram-бот, который привяжет ваш Telegram-аккаунт к вашему профилю в приложении."}),f.jsx("li",{children:"Бот пришлет вам ссылку на Boosty и дальнейшие инструкции."}),f.jsx("li",{children:"Перейдите по ссылке, оформите подписку на Boosty и вступите в приватную Telegram-группу (ссылку предоставит Boosty после оплаты)."}),f.jsx("li",{children:"Как только вы вступите в группу, вернитесь в бот и отправьте ему команду /check ВАШ_ID (скопируйте ID из профиля в приложении)."}),f.jsxs("li",{children:["Бот проверит ваше членство в группе и ",f.jsx("b",{children:"автоматически активирует подписку на 1 месяц"}),"."]})]}),f.jsx("h5",{className:"font-semibold pt-2",children:"Способы 2 и 3: Банковская карта или Донат через Tribut (Ручная проверка)"}),f.jsx("p",{children:"Эти способы требуют ручного подтверждения администратором."}),f.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[f.jsxs("li",{children:["В приложении выберите тариф, а затем — ",f.jsx("b",{children:'"Банковской картой"'})," или ",f.jsx("b",{children:'"Донат через tribut"'}),"."]}),f.jsx("li",{children:"Вас перенаправит в Telegram-бот."}),f.jsxs("li",{children:["Бот сгенерирует для вас ",f.jsx("b",{children:"уникальный код платежа"})," (например, SUB12345-6789) и пришлет реквизиты."]}),f.jsxs("li",{children:[f.jsx("b",{children:"ЭТО ВАЖНО:"})," Совершите перевод/донат, и в поле ",f.jsx("b",{children:'"комментарий"'})," или ",f.jsx("b",{children:'"сообщение к донату" ОБЯЗАТЕЛЬНО'})," укажите тот самый уникальный код, который прислал бот. Без этого кода администратор не сможет найти ваш платеж."]}),f.jsx("li",{children:"После получения оплаты администратор воспользуется специальной командой, чтобы активировать вашу подписку."}),f.jsx("li",{children:"Бот пришлет вам уведомление об успешной активации."})]})]})]})]})]})]}),LO=()=>f.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),f.jsx("p",{children:"Настоящее Пользовательское соглашение (далее – «Соглашение») регулирует отношения между Администрацией приложения Tenebris Verbum (далее – «Администрация», «Сервис») и пользователем сети Интернет (далее – «Пользователь»), возникающие при использовании Сервиса."}),f.jsx("p",{children:"Перед началом использования Сервиса, пожалуйста, внимательно ознакомьтесь с его условиями. Начало использования Сервиса означает ваше полное и безоговорочное принятие (Акцепт) настоящего Соглашения. Если вы не согласны с какими-либо из его положений, вы должны немедленно прекратить использование Сервиса."}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Основные термины"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[f.jsxs("li",{children:[f.jsx("b",{children:"Сервис:"})," Веб-приложение Tenebris Verbum, предоставляющее доступ к художественным текстам (контенту) в режиме онлайн-чтения."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Пользователь:"})," Любое физическое лицо, достигшее 18 лет (или обладающее полной дееспособностью), которое осуществляет доступ к Сервису и принимает условия данного Соглашения."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Акцепт:"})," Полное и безоговорочное принятие Пользователем условий настоящего Соглашения, которое совершается путем продолжения использования Сервиса."]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Предмет Соглашения"}),f.jsx("p",{children:"2.1. Администрация предоставляет Пользователю неисключительное, безвозмездное право на доступ к контенту, размещенному в Сервисе, исключительно для личного некоммерческого ознакомления путем чтения."}),f.jsx("p",{children:"2.2. Сервис не предоставляет технической возможности для скачивания, сохранения или любого другого способа копирования контента."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Интеллектуальная собственность и правила использования контента"}),f.jsxs("p",{children:["3.1. ",f.jsx("b",{children:"Авторские права:"})," Все тексты, изображения и другие материалы, размещенные в Сервисе, являются объектами авторского права и защищены законодательством."]}),f.jsxs("div",{className:"mt-2",children:[f.jsxs("p",{children:["3.2. ",f.jsx("b",{children:"Запрещенные действия:"})," Пользователю категорически запрещается:"]}),f.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[f.jsx("li",{children:"Копировать, распространять, публично воспроизводить или иным образом использовать контент Сервиса в коммерческих или неличных целях."}),f.jsx("li",{children:"Использовать скрипты, боты или любые другие автоматизированные средства для сбора данных, массового скачивания или взаимодействия с Сервисом."}),f.jsx("li",{children:"Предпринимать попытки обойти технические ограничения, установленные Администрацией."})]})]}),f.jsxs("p",{className:"mt-2",children:["3.3. ",f.jsx("b",{children:"Процедура для правообладателей:"})," Если вы являетесь правообладателем и считаете, что ваши права нарушены, просим вас связаться с Администрацией через доступные каналы связи. Администрация обязуется рассмотреть ваше обращение и, в случае подтверждения нарушения, незамедлительно удалить соответствующий контент."]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Правовой статус Сервиса и ограничение ответственности"}),f.jsxs("p",{children:["4.1. ",f.jsx("b",{children:"Информационный посредник:"})," В соответствии со ст. 1253.1 ГК РФ, Сервис является информационным посредником. Администрация предоставляет платформу для размещения материалов и не является инициатором их создания, не изменяет их содержание и не несет ответственности за него до момента получения обоснованного уведомления о нарушении."]}),f.jsxs("p",{children:["4.2. ",f.jsx("b",{children:"Ответственность за контент:"})," Ответственность за правомерность использования контента несут независимые подрядчики, предоставляющие материалы для размещения и гарантирующие наличие у них всех необходимых прав. Администрация не несет ответственности за недобросовестные действия таких подрядчиков."]}),f.jsxs("p",{children:["4.3. ",f.jsx("b",{children:"Соблюдение законодательства:"})," Администрация принимает меры для соблюдения законодательства РФ, включая добавление обязательной маркировки, установку возрастной маркировки («18+») и незамедлительное удаление запрещенных материалов."]}),f.jsxs("p",{children:["4.4. ",f.jsx("b",{children:"Ограничение ответственности:"})," Администрация не несет ответственности за технические сбои, содержание произведений и любой косвенный ущерб, который может быть причинен Пользователю."]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Права и обязанности сторон"}),f.jsxs("div",{children:[f.jsxs("p",{children:["5.1. ",f.jsx("b",{children:"Администрация вправе:"})]}),f.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[f.jsx("li",{children:"В любое время изменять или удалять любой контент, изменять дизайн и функционал Сервиса."}),f.jsx("li",{children:"Применять технические средства защиты от вредоносных действий (например, блокировать IP-адреса, с которых исходит чрезмерное количество запросов или иная подозрительная активность)."}),f.jsx("li",{children:"Вносить изменения в настоящее Соглашение в одностороннем порядке. Новая редакция вступает в силу с момента ее публикации."})]})]}),f.jsxs("div",{className:"mt-2",children:[f.jsxs("p",{children:["5.2. ",f.jsx("b",{children:"Пользователь обязан:"})]}),f.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[f.jsx("li",{children:"Соблюдать условия настоящего Соглашения."}),f.jsx("li",{children:"Не использовать Сервис для распространения любой запрещенной информации."}),f.jsx("li",{children:"Соблюдать установленные возрастные ограничения."})]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"6. Разрешение споров"}),f.jsx("p",{children:"6.1. Все споры и разногласия подлежат разрешению в соответствии с действующим законодательством Российской Федерации."}),f.jsx("p",{children:"6.2. Местом разрешения споров в судебном порядке является суд по месту нахождения Администрации."})]})]}),UO=()=>f.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),f.jsx("p",{children:"Настоящая Политика конфиденциальности (далее – «Политика») является неотъемлемой частью Пользовательского соглашения и объясняет, какие данные мы собираем и для каких целей. Используя Сервис, вы выражаете безоговорочное согласие с настоящей Политикой."}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Собираемая информация"}),f.jsxs("div",{children:[f.jsxs("p",{children:["1.1. ",f.jsx("b",{children:"Данные, предоставляемые Пользователем:"})]}),f.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[f.jsxs("li",{children:[f.jsx("b",{children:"При регистрации:"})," Ваше имя, адрес электронной почты (email) и пароль (хранится в зашифрованном виде)."]}),f.jsxs("li",{children:[f.jsx("b",{children:"При взаимодействии:"})," Комментарии, лайки, закладки."]}),f.jsxs("li",{children:[f.jsx("b",{children:"При оплате:"})," Ваш Telegram ID для привязки к аккаунту и проверки статуса подписки."]})]})]}),f.jsxs("div",{className:"mt-2",children:[f.jsxs("p",{children:["1.2. ",f.jsx("b",{children:"Технические данные, собираемые автоматически:"})]}),f.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[f.jsxs("li",{children:[f.jsx("b",{children:"IP-адрес:"})," Для обеспечения безопасности и предотвращения злоупотреблений."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Информация о браузере, ОС и типе устройства:"})," Для корректной и адаптивной работы Сервиса."]}),f.jsxs("li",{children:[f.jsx("b",{children:"Данные о взаимодействии с Сервисом:"})," Время доступа и информация о посещенных страницах внутри Сервиса для ведения внутренней аналитики."]})]})]}),f.jsxs("p",{className:"mt-2",children:["1.3. ",f.jsx("b",{children:"Что мы НЕ собираем:"})," Сервис целенаправленно ",f.jsx("b",{children:"не собирает"})," и не обрабатывает ваши точные данные геолокации, историю просмотров вне нашего Сервиса и другие персональные данные, не указанные выше."]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Цели обработки данных"}),f.jsxs("p",{children:["2.1. ",f.jsx("b",{children:"Обеспечение работы Сервиса:"})," Собранные данные необходимы для управления вашей учетной записью, предоставления доступа к функциям, обработки подписок и защиты от мошеннических действий."]}),f.jsxs("p",{children:["2.2. ",f.jsx("b",{children:"Аналитика и улучшение:"})," Обезличенные технические данные используются для анализа работы Сервиса, выявления проблем и его дальнейшего совершенствования."]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Передача и хранение данных"}),f.jsxs("p",{children:["3.1. ",f.jsx("b",{children:"Хранение:"})," Данные хранятся на защищенных серверах в течение срока, необходимого для выполнения целей их обработки."]}),f.jsxs("div",{children:[f.jsxs("p",{children:["3.2. ",f.jsx("b",{children:"Передача третьим лицам:"})," Мы не продаем ваши данные. Передача возможна только:"]}),f.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[f.jsx("li",{children:"Техническим подрядчикам (например, хостинг-провайдерам), которые обеспечивают работу Сервиса."}),f.jsx("li",{children:"Государственным органам по законному и обоснованному запросу."})]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Защита информации"}),f.jsx("p",{children:"Администрация принимает все необходимые и достаточные технические и организационные меры для защиты вашей информации от несанкционированного доступа, изменения или раскрытия."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Изменение Политики"}),f.jsx("p",{children:"Администрация оставляет за собой право вносить изменения в настоящую Политику. Новая редакция вступает в силу с момента ее размещения в Сервисе. Продолжение использования Сервиса после внесения изменений означает ваше согласие с новой редакцией."})]})]}),zO=({onBack:e})=>{const[t,n]=U.useState("guide"),i=[{id:"guide",title:"Руководство"},{id:"terms",title:"Соглашение"},{id:"privacy",title:"Политика"}];return f.jsxs("div",{className:"bg-background min-h-screen text-text-main",children:[f.jsx(Kn,{title:"Справка и информация",onBack:e}),f.jsx("div",{className:"px-4 pt-4",children:f.jsx("div",{className:"flex space-x-1 rounded-lg bg-component-bg p-1 border border-border-color",children:i.map(s=>f.jsx("button",{onClick:()=>n(s.id),className:`w-full rounded-md py-2.5 text-sm font-medium transition-colors
                                ${t===s.id?"bg-accent text-white shadow":"text-text-main/70 hover:bg-background"}`,children:s.title},s.id))})}),f.jsxs("div",{className:"p-4",children:[t==="guide"&&f.jsx(jO,{}),t==="terms"&&f.jsx(LO,{}),t==="privacy"&&f.jsx(UO,{})]})]})},BO=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{if(!e)return f.jsxs("div",{children:[f.jsx(Kn,{title:"Загрузка...",onBack:h}),f.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});U.useEffect(()=>{if(e&&e.id){const T=`viewed-${e.id}`;if(!sessionStorage.getItem(T)){sessionStorage.setItem(T,"true");const ft=re(Kt,"novel_stats",e.id.toString());$i(ft,{views:tD(1)},{merge:!0}).catch(Dt=>console.error("Ошибка обновления счетчика просмотров:",Dt))}}},[e]);const[m,g]=U.useState(!1),[p,_]=U.useState(null),[I,O]=U.useState("newest"),[V,S]=U.useState(!1),E=U.useRef(null),[R,D]=U.useState(!1),L=Array.isArray(e.genres)?e.genres:[],F=i&&i.expires_at&&typeof i.expires_at.toDate=="function"&&i.expires_at.toDate()>new Date,b=U.useMemo(()=>u&&e&&u[e.id]?u[e.id].chapterId:null,[u,e]);U.useEffect(()=>{E.current&&setTimeout(()=>{E.current&&D(E.current.scrollHeight>E.current.clientHeight)},100)},[e.description]);const v=U.useMemo(()=>{if(!Array.isArray(a))return[];const T=[...a];return I==="newest"?T.reverse():a},[a,I]),A=T=>{!F&&T.isPaid?g(!0):t(T)},w=()=>{if(b){const T=a.find(ft=>ft.id===b);T&&t(T)}},x=T=>_(T),C=async T=>{var Dt;const ft=(Dt=window.Telegram)==null?void 0:Dt.WebApp;if(!ft||!r||!p){console.error("Telegram Web App, userId, or selectedPlan is not available."),ft&&ft.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}ft.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async z=>{if(!z)return;const K=re(Kt,"users",r);try{await $i(K,{pendingSubscription:{...p,method:T,date:new Date().toISOString()}},{merge:!0}),ft.openTelegramLink(`https://t.me/${s}?start=${r}`),ft.close()}catch(Y){console.error("Ошибка записи в Firebase:",Y),ft.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return f.jsxs("div",{className:"text-text-main",children:[f.jsx(Kn,{title:e.title,onBack:h}),f.jsxs("div",{className:"relative h-64",children:[f.jsx("img",{src:`/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),f.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[f.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),f.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:L.map(T=>{const Dt=`
            text-xs font-semibold px-3 py-1 rounded-full transition-colors 
            duration-200 bg-component-bg border hover:bg-border-color
            ${T==="16+"||T==="18+"?"border-genre-highlight-border text-genre-highlight-text":"border-border-color text-text-main"}
        `;return f.jsx("button",{onClick:()=>n(T),className:Dt,children:T},T)})}),f.jsx("div",{ref:E,className:`relative overflow-hidden transition-all duration-500 ${V?"max-h-full":"max-h-24"}`,children:f.jsx("div",{className:"text-sm mb-2 opacity-80 font-body prose",dangerouslySetInnerHTML:{__html:e.description}})}),R&&f.jsx("div",{className:"text-right",children:f.jsx("button",{onClick:()=>S(!V),className:"text-sm font-semibold text-accent mb-4",children:V?"Скрыть":"Читать полностью..."})}),b&&f.jsxs("button",{onClick:w,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",b,")"]}),f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),f.jsx("button",{onClick:()=>O(T=>T==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:I==="newest"?"Сначала новые":"Сначала старые"})]}),F&&f.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",i.expires_at.toDate().toLocaleDateString()]}),l?f.jsx("p",{children:"Загрузка глав..."}):f.jsx("div",{className:"flex flex-col gap-3",children:v.map(T=>{const ft=!F&&T.isPaid,Dt=b===T.id;return f.jsxs("div",{onClick:()=>A(T),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${ft?"opacity-70":""}`,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[Dt&&f.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),f.jsx("p",{className:"font-semibold",children:T.title})]}),ft?f.jsx(AO,{}):f.jsx(DS,{})]},T.id)})}),m&&f.jsx(og,{onClose:()=>g(!1),onSelectPlan:x}),p&&f.jsx(lg,{onClose:()=>_(null),onSelectMethod:C,plan:p})]})]})},qO=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:s,userName:r,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:m,onBack:g,isUserAdmin:p})=>{if(!t||!e)return f.jsxs("div",{children:[f.jsx(Kn,{title:"Загрузка...",onBack:g}),f.jsx("div",{className:"p-4 text-center",children:"Подготовка главы..."})]});const[_,I]=U.useState([]),[O,V]=U.useState(null),[S,E]=U.useState(!0),[R,D]=U.useState(!1),[L,F]=U.useState(""),[b,v]=U.useState(null),[A,w]=U.useState(""),[x,C]=U.useState(null),[T,ft]=U.useState(""),[Dt,z]=U.useState(0),[K,Y]=U.useState(!1),[vt,mt]=U.useState(!1),[hn,se]=U.useState(!1),[Ot,qe]=U.useState(!1),[ge,fr]=U.useState(null),[Zn,bn]=U.useState(""),[Me,Nn]=U.useState(!0),ke=h&&h.expires_at&&typeof h.expires_at.toDate=="function"&&h.expires_at.toDate()>new Date,$e=U.useMemo(()=>re(Kt,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]),we=U.useMemo(()=>Jd(Kt,`chapters_metadata/${t.id}_${e.id}/comments`),[t.id,e.id]),Wn=U.useCallback(async()=>{if(!(R||!S)){D(!0);try{let q;O?q=Vv(we,Mv("timestamp","desc"),FN(O),kv(20)):q=Vv(we,Mv("timestamp","desc"),kv(20));const $=await QA(q),W=$.docs.map(pt=>({id:pt.id,...pt.data()}));let J=W;s&&W.length>0&&(J=await Promise.all(W.map(async pt=>{const Xe=re(Kt,`chapters_metadata/${t.id}_${e.id}/comments/${pt.id}/likes`,s),Ri=await Us(Xe);return{...pt,userHasLiked:Ri.exists()}}))),I(pt=>[...pt,...J]);const Mt=$.docs[$.docs.length-1];V(Mt),$.docs.length<20&&E(!1)}catch(q){console.error("Ошибка загрузки комментариев: ",q)}finally{D(!1)}}},[R,S,O,we,s,t.id,e.id]);U.useEffect(()=>{I([]),V(null),E(!0),D(!1),(async()=>{try{const $=await Us($e);if(z($.exists()&&$.data().likeCount||0),s){const W=re(Kt,`chapters_metadata/${t.id}_${e.id}/likes`,s),J=await Us(W);Y(J.exists())}else Y(!1);await Wn()}catch($){console.error("Ошибка загрузки данных главы:",$)}})()},[$e,s,t.id,e.id]),U.useEffect(()=>{(async()=>{if(Nn(!0),bn(""),e.isPaid&&!ke){Nn(!1),bn(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const $=re(Kt,"chapter_content",`${t.id}-${e.id}`),W=await Us($);W.exists()?bn(W.data().content):bn(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch($){console.error("Ошибка загрузки главы:",$),bn(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Nn(!1)}})()},[t.id,e.id,e.isPaid,ke]);const Dn=U.useCallback(async(q,$=null)=>{q.preventDefault();const W=$?T:L;if(!(!W.trim()||!s))try{await $i($e,{},{merge:!0});const J={userId:s,userName:r||"Аноним",text:W,timestamp:bu(),likeCount:0,novelTitle:t.title,chapterTitle:e.title};let Mt=null;if($){J.replyTo=$;const Ri=await Us(re(we,$));Ri.exists()&&(Mt=Ri.data().userId)}const pt=await Lv(we,J);I(Ri=>[{...J,id:pt.id,userHasLiked:!1,timestamp:new Date},...Ri]);const Xe=Jd(Kt,"notifications");await Lv(Xe,{...J,processed:!1,createdAt:bu(),replyToUid:Mt}),$?(C(null),ft("")):F("")}catch(J){console.error("Ошибка добавления комментария:",J)}},[s,r,L,T,$e,t.id,e.id,t.title,e.title,we]),dr=U.useCallback(async q=>{if(!s)return;const $=re(Kt,`chapters_metadata/${t.id}_${e.id}/comments`,q),W=re(Kt,`chapters_metadata/${t.id}_${e.id}/comments/${q}/likes`,s);I(J=>J.map(Mt=>{if(Mt.id===q){const pt=Mt.userHasLiked?(Mt.likeCount||1)-1:(Mt.likeCount||0)+1;return{...Mt,userHasLiked:!Mt.userHasLiked,likeCount:pt}}return Mt}));try{await Uv(Kt,async J=>{const Mt=await J.get(W),pt=await J.get($);if(!pt.exists())return;const Xe=pt.data().likeCount||0;Mt.exists()?(J.delete(W),J.update($,{likeCount:Math.max(0,Xe-1)})):(J.set(W,{timestamp:bu()}),J.update($,{likeCount:Xe+1}))})}catch(J){console.error("Ошибка при обновлении лайка комментария:",J),I(Mt=>Mt.map(pt=>{if(pt.id===q){const Xe=pt.userHasLiked?(pt.likeCount||0)+1:(pt.likeCount||1)-1;return{...pt,userHasLiked:!pt.userHasLiked,likeCount:Xe}}return pt}))}},[s,t.id,e.id]),La=U.useCallback(q=>{q?(v(q.id),w(q.text)):(v(null),w(""))},[]),ws=U.useCallback(async q=>{if(!A.trim())return;const $=re(Kt,`chapters_metadata/${t.id}_${e.id}/comments`,q);await YN($,{text:A}),I(W=>W.map(J=>J.id===q?{...J,text:A}:J)),v(null),w("")},[A,t.id,e.id]),mr=U.useCallback(async q=>{const $=re(Kt,`chapters_metadata/${t.id}_${e.id}/comments`,q);await $N($),I(W=>W.filter(J=>J.id!==q))},[t.id,e.id]),Rs=U.useCallback(q=>{C($=>$===q?null:q),ft("")},[]),pr=async()=>{if(!s)return;const q=K;Y(!q),z(W=>q?W-1:W+1);const $=re(Kt,`chapters_metadata/${t.id}_${e.id}/likes`,s);try{await Uv(Kt,async W=>{var Xe;const J=await W.get($),pt=((Xe=(await W.get($e)).data())==null?void 0:Xe.likeCount)||0;J.exists()?(W.delete($),W.set($e,{likeCount:Math.max(0,pt-1)},{merge:!0})):(W.set($,{timestamp:bu()}),W.set($e,{likeCount:pt+1},{merge:!0}))})}catch(W){console.error("Ошибка при обновлении лайка:",W),Y(q),z(J=>q?J+1:J-1)}},xs=q=>{q&&(!ke&&q.isPaid?(mt(!1),qe(!0)):(l(q),mt(!1)))},Is=q=>{fr(q),qe(!1)},Z=async q=>{var W;const $=(W=window.Telegram)==null?void 0:W.WebApp;$&&s&&ge&&$.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async J=>{if(J){const Mt=re(Kt,"users",s);try{await $i(Mt,{pendingSubscription:{...ge,method:q,date:new Date().toISOString()}},{merge:!0}),$.openTelegramLink(`https://t.me/${m}?start=${s}`),$.close()}catch(pt){console.error("Ошибка записи в Firebase:",pt),$.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},st=u.findIndex(q=>q.id===e.id),dt=u[st-1],Vt=u[st+1],qt=q=>window.marked?`<div class="prose">${window.marked.parse(q)}</div>`:q,Re=U.useMemo(()=>[..._].sort((q,$)=>{var Mt,pt;const W=(Mt=q.timestamp)!=null&&Mt.toDate?q.timestamp.toDate().getTime():0,J=(pt=$.timestamp)!=null&&pt.toDate?$.timestamp.toDate().getTime():0;return W-J}),[_]);return f.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[f.jsx(Kn,{title:t.title,onBack:g}),f.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[f.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),f.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:Me?'<p class="text-center">Загрузка текста главы...</p>':qt(Zn)}}),f.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),f.jsxs("div",{className:"border-t border-border-color pt-8",children:[f.jsx("div",{className:"flex items-center gap-4 mb-8",children:f.jsxs("button",{onClick:pr,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[f.jsx(rg,{filled:K,className:K?"text-accent":""}),f.jsx("span",{className:"font-bold text-lg",children:Dt})]})}),f.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),f.jsxs("div",{className:"space-y-4 mb-6",children:[_.length>0?OO(Re).map(q=>f.jsx(PS,{comment:q,onReply:Rs,onLike:dr,onEdit:La,onDelete:mr,onUpdate:ws,isUserAdmin:p,currentUserId:s,editingCommentId:b,editingText:A,setEditingText:w,replyingTo:x,replyText:T,setReplyText:ft,onCommentSubmit:Dn},q.id)):!R&&f.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"}),R&&f.jsx("p",{className:"text-center opacity-70",children:"Загрузка комментариев..."}),S&&!R&&_.length>0&&f.jsx("div",{className:"text-center pt-4",children:f.jsx("button",{onClick:Wn,disabled:R,className:"text-accent hover:underline font-semibold px-4 py-2 rounded-lg disabled:opacity-50",children:R?"Загрузка...":"Загрузить ещё"})})]}),f.jsxs("form",{onSubmit:q=>Dn(q,null),className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:L,onChange:q=>F(q.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),f.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:f.jsx(MS,{className:"w-5 h-5"})})]})]})]}),f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[f.jsx("button",{onClick:()=>xs(dt),disabled:!dt,className:"p-2 disabled:opacity-50",children:f.jsx(OS,{})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>mt(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),f.jsx("button",{onClick:()=>se(!0),className:"p-2 rounded-lg bg-background",children:f.jsx(CO,{})})]}),f.jsx("button",{onClick:()=>xs(Vt),disabled:!Vt,className:"p-2 disabled:opacity-50",children:f.jsx(DS,{className:"opacity-100"})})]}),vt&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>mt(!1),children:f.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:q=>q.stopPropagation(),children:[f.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),f.jsx("div",{className:"overflow-y-auto",children:f.jsx("div",{className:"flex flex-col gap-2",children:u.map(q=>f.jsx("button",{onClick:()=>xs(q),className:`p-2 text-left rounded-md ${q.id===e.id?"bg-accent text-white":"bg-background"}`,children:q.title},q.id))})})]})}),hn&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>se(!1),children:f.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:q=>q.stopPropagation(),children:[f.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{children:"Размер текста"}),f.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[f.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),f.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),Ot&&f.jsx(og,{onClose:()=>qe(!1),onSelectPlan:Is}),ge&&f.jsx(lg,{onClose:()=>fr(null),onSelectMethod:Z,plan:ge})]})},HO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>f.jsxs("div",{children:[f.jsx(Kn,{title:"Закладки"}),f.jsx(ag,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),FO=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i,auth:s,onThemeToggle:r,currentTheme:a,onShowHelp:l})=>{const u=()=>{a4(s).catch(_=>{console.error("Ошибка выхода:",_)})},h=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(_=>console.error("Не удалось скопировать UID: ",_))},g=t&&t.expires_at&&typeof t.expires_at.toDate=="function"?t.expires_at.toDate():null,p=g&&g>new Date;return f.jsxs("div",{children:[f.jsx(Kn,{title:"Профиль"}),f.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-lg",children:(e==null?void 0:e.displayName)||"Аноним"}),f.jsx("p",{className:"text-sm text-text-main/70",children:e==null?void 0:e.email})]}),f.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-background transition-colors",children:f.jsx(NO,{})})]})}),f.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[f.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{children:"Тёмная тема"}),f.jsx("button",{onClick:r,className:"w-14 h-7 rounded-full bg-background flex items-center transition-colors p-1",children:f.jsx("div",{className:`w-5 h-5 rounded-full bg-accent shadow-md transform transition-transform ${a==="dark"?"translate-x-7":""}`})})]})]}),f.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[f.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),p?f.jsxs("div",{children:[f.jsx("p",{className:"text-green-500",children:"Активна"}),f.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",g.toLocaleDateString()]})]}):f.jsxs("div",{children:[f.jsx("p",{className:"text-red-500",children:"Неактивна"}),f.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),f.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),f.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[f.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для привязки"}),f.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для связи вашего аккаунта с Telegram-ботом. Например, после подписки на Boosty."}),f.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:f.jsx("code",{children:i||"Загрузка..."})}),f.jsx("button",{onClick:h,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]}),f.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:f.jsx("button",{onClick:l,className:"w-full text-left text-sm text-accent hover:underline",children:"Справка и правовая информация"})})]})},GO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=U.useState(""),a=U.useMemo(()=>e.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())),[e,s]);return f.jsxs("div",{children:[f.jsx(Kn,{title:"Поиск"}),f.jsx("div",{className:"p-4",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:f.jsx(VS,{className:"text-text-main opacity-50"})}),f.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"})]})}),s&&a.length===0?f.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Ничего не найдено"}):f.jsx(ag,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})};function QO(){const[e,t]=U.useState(localStorage.getItem("theme")||"light"),[n,i]=U.useState(16),[s,r]=U.useState("font-sans"),[a,l]=U.useState("list"),[u,h]=U.useState("library"),[m,g]=U.useState([]),[p,_]=U.useState(null),[I,O]=U.useState(null),[V,S]=U.useState(null),[E,R]=U.useState(null),[D,L]=U.useState(null),[F,b]=U.useState(!0),[v,A]=U.useState(!1),[w,x]=U.useState([]),[C,T]=U.useState(!0),[ft,Dt]=U.useState(null),[z,K]=U.useState([]),[Y,vt]=U.useState(!1),[mt,hn]=U.useState(null),[se,Ot]=U.useState(null),[qe,ge]=U.useState(!1),[fr,Zn]=U.useState(!1),bn="tenebrisverbot",Me=D==null?void 0:D.uid;U.useEffect(()=>{const Z=window.document.documentElement;e==="dark"?Z.classList.add("dark"):Z.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const Nn=()=>{t(Z=>Z==="light"?"dark":"light")},ke=U.useCallback(async Z=>{if(Me){const st=re(Kt,"users",Me);try{await $i(st,Z,{merge:!0})}catch(dt){console.error("Не удалось обновить данные пользователя:",dt)}}},[Me]),$e=U.useCallback(Z=>{i(st=>{const dt=Math.max(12,Math.min(32,st+Z));return ke({settings:{fontSize:dt,fontClass:s}}),dt})},[s,ke]);U.useEffect(()=>{let Z=()=>{},st=!0;const dt=r4(Ls,async qt=>{if(Z(),qt){if(!st)return;L(qt);const Re=await qt.getIdTokenResult();A(!!Re.claims.admin);const q=re(Kt,"users",qt.uid),$=await Us(q);if(st)if($.exists()){const W=$.data();Dt(W.lastRead||null),K(W.bookmarks||[])}else $i(q,{bookmarks:[],lastRead:{}}),Dt(null),K([]);Z=XN(q,W=>{var J;st&&R(((J=W.data())==null?void 0:J.subscription)||null)}),b(!1)}else{if(!st)return;L(null),A(!1),R(null),Dt(null),K([]),b(!1)}});return O4(Ls).catch(qt=>{console.error("Ошибка при обработке входа через Telegram:",qt)}),(async()=>{try{const Re=await(await fetch("/data/novels.json")).json(),q=await QA(Jd(Kt,"novel_stats")),$=new Map;q.forEach(J=>{$.set(J.id,J.data().views)});const W=Re.novels.map(J=>({...J,views:$.get(J.id.toString())||0}));st&&g(W)}catch(qt){console.error("Ошибка загрузки новелл или статистики:",qt)}})(),()=>{st=!1,dt(),Z()}},[]),U.useEffect(()=>{if(!p){x([]);return}(async()=>{T(!0);try{const st=re(Kt,"chapter_info",p.id.toString()),dt=await Us(st);if(dt.exists()&&dt.data()){const qt=dt.data().chapters||{},Re=Object.keys(qt).map(q=>({id:parseInt(q),title:`Глава ${q}`,isPaid:qt[q].isPaid||!1})).sort((q,$)=>q.id-$.id);x(Re)}else console.log("Документ с главами не найден в chapter_info!"),x([])}catch(st){console.error("Ошибка загрузки глав из Firebase:",st),x([])}finally{T(!1)}})()},[p]);const we=U.useCallback(()=>{a==="reader"?(l("details"),O(null)):a==="details"&&(l("list"),S(null),_(null))},[a]);U.useEffect(()=>{var st;const Z=(st=window.Telegram)==null?void 0:st.WebApp;if(Z)return Z.ready(),Z.expand(),Z.onEvent("backButtonClicked",we),a==="list"?Z.BackButton.hide():Z.BackButton.show(),()=>Z.offEvent("backButtonClicked",we)},[a,we]),U.useEffect(()=>{var st;const Z=(st=window.Telegram)==null?void 0:st.WebApp;Z&&(Z.setHeaderColor("#FFFFFF"),Z.setBackgroundColor("#F5F1ED"))},[]);const Wn=U.useCallback(async Z=>{if(O(Z),l("reader"),Me&&p){const st={...ft||{},[p.id]:{novelId:p.id,chapterId:Z.id,timestamp:new Date().toISOString()}};Dt(st),await ke({lastRead:st})}},[Me,p,ft,ke]),Dn=Z=>{_(Z),l("details")},dr=Z=>{S(Z),l("list"),h("library")},La=()=>{S(null)},ws=U.useCallback(async Z=>{const st=z.includes(Z)?z.filter(dt=>dt!==Z):[...z,Z];K(st),await ke({bookmarks:st})},[z,ke]),mr=U.useMemo(()=>!m||m.length===0||!z?[]:m.filter(Z=>z.includes(Z.id)),[m,z]),Rs=()=>{vt(!0)},pr=Z=>{hn(Z),vt(!1)},xs=async Z=>{var dt;const st=(dt=window.Telegram)==null?void 0:dt.WebApp;if(Z==="boosty"){if(!Ls.currentUser)return;const Vt=Ls.currentUser.uid,qt="tenebrisverbot";try{const Re=re(Kt,"users",Vt);await $i(Re,{pendingSubscription:{name:mt.name,price:mt.price,method:"boosty",duration:mt.duration}},{merge:!0});const q=`https://t.me/${qt}?start=${Vt}`;st?st.openTelegramLink(q):window.open(q,"_blank"),hn(null),vt(!1)}catch(Re){console.error("Ошибка при создании заявки на оплату Boosty:",Re)}return}if(!st||!Me||!mt){st&&st.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}st.showConfirm("Вы будете перенаправлены в бот для завершения оплаты...",async Vt=>{if(!Vt)return;const qt=re(Kt,"users",Me);try{await $i(qt,{pendingSubscription:{...mt,method:Z,date:new Date().toISOString()}},{merge:!0}),st.openTelegramLink(`https://t.me/${bn}?start=${Me}`),st.close()}catch(Re){console.error("Ошибка записи в Firebase:",Re),st.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(F)return f.jsx(VO,{});if(fr)return f.jsx(zO,{onBack:()=>Zn(!1)});if(!D)return f.jsx(bO,{auth:Ls,onRegisterClick:()=>ge(!0)});const Is=()=>{if(a==="details")return f.jsx(BO,{novel:p,onSelectChapter:Wn,onGenreSelect:dr,subscription:E,botUsername:bn,userId:Me,chapters:w,isLoadingChapters:C,lastReadData:ft,onBack:we});if(a==="reader")return f.jsx(qO,{chapter:I,novel:p,fontSize:n,onFontSizeChange:$e,userId:Me,userName:(D==null?void 0:D.displayName)||"Аноним",currentFontClass:s,onSelectChapter:Wn,allChapters:w,subscription:E,botUsername:bn,onBack:we,isUserAdmin:v});switch(u){case"library":return f.jsxs(f.Fragment,{children:[f.jsx(Kn,{title:"Библиотека"}),f.jsx(kO,{onReadMore:Ot}),V&&f.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[f.jsxs("p",{className:"text-sm",children:[f.jsx("span",{className:"opacity-70",children:"Жанр:"}),f.jsx("strong",{className:"ml-2",children:V})]}),f.jsx("button",{onClick:La,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),f.jsx(ag,{novels:m.filter(Z=>!V||Z.genres&&Z.genres.includes(V)),onSelectNovel:Dn,bookmarks:z,onToggleBookmark:ws})]});case"search":return f.jsx(GO,{novels:m,onSelectNovel:Dn,bookmarks:z,onToggleBookmark:ws});case"bookmarks":return f.jsx(HO,{novels:mr,onSelectNovel:Dn,bookmarks:z,onToggleBookmark:ws});case"profile":return f.jsx(FO,{user:D,subscription:E,onGetSubscriptionClick:Rs,userId:Me,auth:Ls,onThemeToggle:Nn,currentTheme:e,onShowHelp:()=>Zn(!0)});default:return f.jsx(Kn,{title:"Библиотека"})}};return f.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${v?"":"no-select"}`,children:[f.jsx("div",{className:"pb-20",children:Is()}),a==="list"&&f.jsx(MO,{activeTab:u,setActiveTab:h}),Y&&f.jsx(og,{onClose:()=>vt(!1),onSelectPlan:pr}),mt&&f.jsx(lg,{onClose:()=>hn(null),onSelectMethod:xs,plan:mt}),se&&f.jsx(PO,{newsItem:se,onClose:()=>Ot(null)})]})}i2.createRoot(document.getElementById("root")).render(f.jsx(U.StrictMode,{children:f.jsx(QO,{})}));
