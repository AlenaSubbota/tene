(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var G_={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=Symbol.for("react.transitional.element"),zA=Symbol.for("react.fragment");function F_(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:LA,type:e,key:i,ref:t!==void 0?t:null,props:n}}Gu.Fragment=zA;Gu.jsx=F_;Gu.jsxs=F_;G_.exports=Gu;var M=G_.exports,Q_={exports:{}},W={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd=Symbol.for("react.transitional.element"),jA=Symbol.for("react.portal"),BA=Symbol.for("react.fragment"),qA=Symbol.for("react.strict_mode"),HA=Symbol.for("react.profiler"),GA=Symbol.for("react.consumer"),FA=Symbol.for("react.context"),QA=Symbol.for("react.forward_ref"),KA=Symbol.for("react.suspense"),YA=Symbol.for("react.memo"),K_=Symbol.for("react.lazy"),$g=Symbol.iterator;function XA(e){return e===null||typeof e!="object"?null:(e=$g&&e[$g]||e["@@iterator"],typeof e=="function"?e:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X_=Object.assign,$_={};function xs(e,t,n){this.props=e,this.context=t,this.refs=$_,this.updater=n||Y_}xs.prototype.isReactComponent={};xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Z_(){}Z_.prototype=xs.prototype;function fd(e,t,n){this.props=e,this.context=t,this.refs=$_,this.updater=n||Y_}var dd=fd.prototype=new Z_;dd.constructor=fd;X_(dd,xs.prototype);dd.isPureReactComponent=!0;var Zg=Array.isArray,Rt={H:null,A:null,T:null,S:null,V:null},J_=Object.prototype.hasOwnProperty;function md(e,t,n,i,r,s){return n=s.ref,{$$typeof:hd,type:e,key:t,ref:n!==void 0?n:null,props:s}}function $A(e,t){return md(e.type,t,void 0,void 0,void 0,e.props)}function gd(e){return typeof e=="object"&&e!==null&&e.$$typeof===hd}function ZA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jg=/\/+/g;function $c(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ZA(""+e.key):t.toString(36)}function Wg(){}function JA(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Wg,Wg):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ur(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case hd:case jA:a=!0;break;case K_:return a=e._init,Ur(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+$c(e,0):i,Zg(r)?(n="",a!=null&&(n=a.replace(Jg,"$&/")+"/"),Ur(r,t,n,"",function(h){return h})):r!=null&&(gd(r)&&(r=$A(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Jg,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(Zg(e))for(var u=0;u<e.length;u++)i=e[u],s=l+$c(i,u),a+=Ur(i,t,n,s,r);else if(u=XA(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+$c(i,u++),a+=Ur(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Ur(JA(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function rl(e,t,n){if(e==null)return e;var i=[],r=0;return Ur(e,i,"","",function(s){return t.call(n,s,r++)}),i}function WA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function t1(){}W.Children={map:rl,forEach:function(e,t,n){rl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rl(e,function(){t++}),t},toArray:function(e){return rl(e,function(t){return t})||[]},only:function(e){if(!gd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=xs;W.Fragment=BA;W.Profiler=HA;W.PureComponent=fd;W.StrictMode=qA;W.Suspense=KA;W.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Rt;W.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Rt.H.useMemoCache(e)}};W.cache=function(e){return function(){return e.apply(null,arguments)}};W.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=X_({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!J_.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return md(e.type,r,void 0,void 0,s,i)};W.createContext=function(e){return e={$$typeof:FA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:GA,_context:e},e};W.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)J_.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return md(e,s,void 0,void 0,null,r)};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:QA,render:e}};W.isValidElement=gd;W.lazy=function(e){return{$$typeof:K_,_payload:{_status:-1,_result:e},_init:WA}};W.memo=function(e,t){return{$$typeof:YA,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=Rt.T,n={};Rt.T=n;try{var i=e(),r=Rt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(t1,tp)}catch(s){tp(s)}finally{Rt.T=t}};W.unstable_useCacheRefresh=function(){return Rt.H.useCacheRefresh()};W.use=function(e){return Rt.H.use(e)};W.useActionState=function(e,t,n){return Rt.H.useActionState(e,t,n)};W.useCallback=function(e,t){return Rt.H.useCallback(e,t)};W.useContext=function(e){return Rt.H.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e,t){return Rt.H.useDeferredValue(e,t)};W.useEffect=function(e,t,n){var i=Rt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};W.useId=function(){return Rt.H.useId()};W.useImperativeHandle=function(e,t,n){return Rt.H.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Rt.H.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Rt.H.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Rt.H.useMemo(e,t)};W.useOptimistic=function(e,t){return Rt.H.useOptimistic(e,t)};W.useReducer=function(e,t,n){return Rt.H.useReducer(e,t,n)};W.useRef=function(e){return Rt.H.useRef(e)};W.useState=function(e){return Rt.H.useState(e)};W.useSyncExternalStore=function(e,t,n){return Rt.H.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Rt.H.useTransition()};W.version="19.1.1";Q_.exports=W;var at=Q_.exports,W_={exports:{}},Fu={},tv={exports:{}},ev={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,$){var X=j.length;j.push($);t:for(;0<X;){var _t=X-1>>>1,F=j[_t];if(0<r(F,$))j[_t]=$,j[X]=F,X=_t;else break t}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var $=j[0],X=j.pop();if(X!==$){j[0]=X;t:for(var _t=0,F=j.length,gt=F>>>1;_t<gt;){var Ct=2*(_t+1)-1,Dt=j[Ct],ze=Ct+1,te=j[ze];if(0>r(Dt,X))ze<F&&0>r(te,Dt)?(j[_t]=te,j[ze]=X,_t=ze):(j[_t]=Dt,j[Ct]=X,_t=Ct);else if(ze<F&&0>r(te,X))j[_t]=te,j[ze]=X,_t=ze;else break t}}return $}function r(j,$){var X=j.sortIndex-$.sortIndex;return X!==0?X:j.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,_=!1,N=!1,V=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var $=n(h);$!==null;){if($.callback===null)i(h);else if($.startTime<=j)i(h),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(h)}}function L(j){if(V=!1,D(j),!N)if(n(u)!==null)N=!0,B||(B=!0,I());else{var $=n(h);$!==null&&Ze(L,$.startTime-j)}}var B=!1,T=-1,y=5,S=-1;function v(){return x?!0:!(e.unstable_now()-S<y)}function R(){if(x=!1,B){var j=e.unstable_now();S=j;var $=!0;try{t:{N=!1,V&&(V=!1,E(T),T=-1),_=!0;var X=m;try{e:{for(D(j),p=n(u);p!==null&&!(p.expirationTime>j&&v());){var _t=p.callback;if(typeof _t=="function"){p.callback=null,m=p.priorityLevel;var F=_t(p.expirationTime<=j);if(j=e.unstable_now(),typeof F=="function"){p.callback=F,D(j),$=!0;break e}p===n(u)&&i(u),D(j)}else i(u);p=n(u)}if(p!==null)$=!0;else{var gt=n(h);gt!==null&&Ze(L,gt.startTime-j),$=!1}}break t}finally{p=null,m=X,_=!1}$=void 0}}finally{$?I():B=!1}}}var I;if(typeof w=="function")I=function(){w(R)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,ye=b.port2;b.port1.onmessage=R,I=function(){ye.postMessage(null)}}else I=function(){A(R,0)};function Ze(j,$){T=A(function(){j(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var X=m;m=$;try{return j()}finally{m=X}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=m;m=j;try{return $()}finally{m=X}},e.unstable_scheduleCallback=function(j,$,X){var _t=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_t+X:_t):X=_t,j){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=X+F,j={id:d++,callback:$,priorityLevel:j,startTime:X,expirationTime:F,sortIndex:-1},X>_t?(j.sortIndex=X,t(h,j),n(u)===null&&j===n(h)&&(V?(E(T),T=-1):V=!0,Ze(L,X-_t))):(j.sortIndex=F,t(u,j),N||_||(N=!0,B||(B=!0,I()))),j},e.unstable_shouldYield=v,e.unstable_wrapCallback=function(j){var $=m;return function(){var X=m;m=$;try{return j.apply(this,arguments)}finally{m=X}}}})(ev);tv.exports=ev;var e1=tv.exports,nv={exports:{}},Se={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1=at;function iv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ni(){}var Te={d:{f:ni,r:function(){throw Error(iv(522))},D:ni,C:ni,L:ni,m:ni,X:ni,S:ni,M:ni},p:0,findDOMNode:null},i1=Symbol.for("react.portal");function r1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Aa=n1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Se.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Te;Se.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(iv(299));return r1(e,t,null,n)};Se.flushSync=function(e){var t=Aa.T,n=Te.p;try{if(Aa.T=null,Te.p=2,e)return e()}finally{Aa.T=t,Te.p=n,Te.d.f()}};Se.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Te.d.C(e,t))};Se.prefetchDNS=function(e){typeof e=="string"&&Te.d.D(e)};Se.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Qu(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Te.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Te.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Se.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Qu(t.as,t.crossOrigin);Te.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Te.d.M(e)};Se.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Qu(n,t.crossOrigin);Te.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Se.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Qu(t.as,t.crossOrigin);Te.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Te.d.m(e)};Se.requestFormReset=function(e){Te.d.r(e)};Se.unstable_batchedUpdates=function(e,t){return e(t)};Se.useFormState=function(e,t,n){return Aa.H.useFormState(e,t,n)};Se.useFormStatus=function(){return Aa.H.useHostTransitionStatus()};Se.version="19.1.1";function rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rv)}catch(e){console.error(e)}}rv(),nv.exports=Se;var s1=nv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=e1,sv=at,a1=s1;function P(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function av(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function po(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ov(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ep(e){if(po(e)!==e)throw Error(P(188))}function o1(e){var t=e.alternate;if(!t){if(t=po(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return ep(r),e;if(s===i)return ep(r),t;s=s.sibling}throw Error(P(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function lv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=lv(e),t!==null)return t;e=e.sibling}return null}var bt=Object.assign,l1=Symbol.for("react.element"),sl=Symbol.for("react.transitional.element"),ga=Symbol.for("react.portal"),Fr=Symbol.for("react.fragment"),uv=Symbol.for("react.strict_mode"),Hh=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),cv=Symbol.for("react.consumer"),On=Symbol.for("react.context"),pd=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),Fh=Symbol.for("react.suspense_list"),yd=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),Qh=Symbol.for("react.activity"),c1=Symbol.for("react.memo_cache_sentinel"),np=Symbol.iterator;function oa(e){return e===null||typeof e!="object"?null:(e=np&&e[np]||e["@@iterator"],typeof e=="function"?e:null)}var h1=Symbol.for("react.client.reference");function Kh(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===h1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fr:return"Fragment";case Hh:return"Profiler";case uv:return"StrictMode";case Gh:return"Suspense";case Fh:return"SuspenseList";case Qh:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ga:return"Portal";case On:return(e.displayName||"Context")+".Provider";case cv:return(e._context.displayName||"Context")+".Consumer";case pd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yd:return t=e.displayName||null,t!==null?t:Kh(e.type)||"Memo";case ai:t=e._payload,e=e._init;try{return Kh(e(t))}catch{}}return null}var pa=Array.isArray,K=sv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht=a1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sr={pending:!1,data:null,method:null,action:null},Yh=[],Qr=-1;function An(e){return{current:e}}function Wt(e){0>Qr||(e.current=Yh[Qr],Yh[Qr]=null,Qr--)}function It(e,t){Qr++,Yh[Qr]=e.current,e.current=t}var hn=An(null),Fa=An(null),Ti=An(null),Yl=An(null);function Xl(e,t){switch(It(Ti,t),It(Fa,e),It(hn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?oy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=oy(t),e=I0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Wt(hn),It(hn,e)}function ps(){Wt(hn),Wt(Fa),Wt(Ti)}function Xh(e){e.memoizedState!==null&&It(Yl,e);var t=hn.current,n=I0(t,e.type);t!==n&&(It(Fa,e),It(hn,n))}function $l(e){Fa.current===e&&(Wt(hn),Wt(Fa)),Yl.current===e&&(Wt(Yl),eo._currentValue=sr)}var $h=Object.prototype.hasOwnProperty,_d=Kt.unstable_scheduleCallback,Zc=Kt.unstable_cancelCallback,f1=Kt.unstable_shouldYield,d1=Kt.unstable_requestPaint,fn=Kt.unstable_now,m1=Kt.unstable_getCurrentPriorityLevel,hv=Kt.unstable_ImmediatePriority,fv=Kt.unstable_UserBlockingPriority,Zl=Kt.unstable_NormalPriority,g1=Kt.unstable_LowPriority,dv=Kt.unstable_IdlePriority,p1=Kt.log,y1=Kt.unstable_setDisableYieldValue,yo=null,xe=null;function pi(e){if(typeof p1=="function"&&y1(e),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(yo,e)}catch{}}var ke=Math.clz32?Math.clz32:E1,_1=Math.log,v1=Math.LN2;function E1(e){return e>>>=0,e===0?32:31-(_1(e)/v1|0)|0}var al=256,ol=4194304;function tr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ku(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=tr(i):(a&=l,a!==0?r=tr(a):n||(n=l&~e,n!==0&&(r=tr(n))))):(l=i&~s,l!==0?r=tr(l):a!==0?r=tr(a):n||(n=i&~e,n!==0&&(r=tr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function _o(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function T1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mv(){var e=al;return al<<=1,!(al&4194048)&&(al=256),e}function gv(){var e=ol;return ol<<=1,!(ol&62914560)&&(ol=4194304),e}function Jc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S1(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-ke(n),p=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~p}i!==0&&pv(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function pv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ke(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function yv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ke(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function vd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ed(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function _v(){var e=ht.p;return e!==0?e:(e=window.event,e===void 0?32:U0(e.type))}function A1(e,t){var n=ht.p;try{return ht.p=e,t()}finally{ht.p=n}}var Fi=Math.random().toString(36).slice(2),me="__reactFiber$"+Fi,Ie="__reactProps$"+Fi,ks="__reactContainer$"+Fi,Zh="__reactEvents$"+Fi,b1="__reactListeners$"+Fi,w1="__reactHandles$"+Fi,ip="__reactResources$"+Fi,Eo="__reactMarker$"+Fi;function Td(e){delete e[me],delete e[Ie],delete e[Zh],delete e[b1],delete e[w1]}function Kr(e){var t=e[me];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[me]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=cy(e);e!==null;){if(n=e[me])return n;e=cy(e)}return t}e=n,n=e.parentNode}return null}function Ps(e){if(e=e[me]||e[ks]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ya(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(P(33))}function rs(e){var t=e[ip];return t||(t=e[ip]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $t(e){e[Eo]=!0}var vv=new Set,Ev={};function Sr(e,t){ys(e,t),ys(e+"Capture",t)}function ys(e,t){for(Ev[e]=t,e=0;e<t.length;e++)vv.add(t[e])}var R1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rp={},sp={};function I1(e){return $h.call(sp,e)?!0:$h.call(rp,e)?!1:R1.test(e)?sp[e]=!0:(rp[e]=!0,!1)}function wl(e,t,n){if(I1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ll(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function In(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Wc,ap;function Lr(e){if(Wc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wc=t&&t[1]||"",ap=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wc+e+ap}var th=!1;function eh(e,t){if(!e||th)return"";th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_){var m=_}Reflect.construct(e,[],p)}else{try{p.call()}catch(_){m=_}e.call(p.prototype)}}else{try{throw Error()}catch(_){m=_}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{th=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Lr(n):""}function C1(e){switch(e.tag){case 26:case 27:case 5:return Lr(e.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 15:return eh(e.type,!1);case 11:return eh(e.type.render,!1);case 1:return eh(e.type,!0);case 31:return Lr("Activity");default:return""}}function op(e){try{var t="";do t+=C1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Be(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function D1(e){var t=Tv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jl(e){e._valueTracker||(e._valueTracker=D1(e))}function Sv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Tv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var N1=/[\n"\\]/g;function Ge(e){return e.replace(N1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Jh(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Be(t)):e.value!==""+Be(t)&&(e.value=""+Be(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Wh(e,a,Be(t)):n!=null?Wh(e,a,Be(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Be(l):e.removeAttribute("name")}function Av(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+Be(n):"",t=t!=null?""+Be(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Wh(e,t,n){t==="number"&&Wl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ss(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Be(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function bv(e,t,n){if(t!=null&&(t=""+Be(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Be(n):""}function wv(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(P(92));if(pa(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Be(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function _s(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var O1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||O1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Rv(e,t,n){if(t!=null&&typeof t!="object")throw Error(P(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&lp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&lp(e,s,t[s])}function Sd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),V1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(e){return V1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var tf=null;function Ad(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yr=null,as=null;function up(e){var t=Ps(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;t:switch(e=t.stateNode,t.type){case"input":if(Jh(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ge(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ie]||null;if(!r)throw Error(P(90));Jh(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Sv(i)}break t;case"textarea":bv(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ss(e,!!n.multiple,t,!1)}}}var nh=!1;function Iv(e,t,n){if(nh)return e(t,n);nh=!0;try{var i=e(t);return i}finally{if(nh=!1,(Yr!==null||as!==null)&&(ic(),Yr&&(t=Yr,e=as,as=Yr=null,up(t),e)))for(t=0;t<e.length;t++)up(e[t])}}function Qa(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ie]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=!1;if(qn)try{var la={};Object.defineProperty(la,"passive",{get:function(){ef=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{ef=!1}var yi=null,bd=null,Il=null;function Cv(){if(Il)return Il;var e,t=bd,n=t.length,i,r="value"in yi?yi.value:yi.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return Il=r.slice(e,1<i?1-i:void 0)}function Cl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function cp(){return!1}function Ce(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ul:cp,this.isPropagationStopped=cp,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=Ce(Ar),To=bt({},Ar,{view:0,detail:0}),x1=Ce(To),ih,rh,ua,Xu=bt({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ua&&(ua&&e.type==="mousemove"?(ih=e.screenX-ua.screenX,rh=e.screenY-ua.screenY):rh=ih=0,ua=e),ih)},movementY:function(e){return"movementY"in e?e.movementY:rh}}),hp=Ce(Xu),k1=bt({},Xu,{dataTransfer:0}),P1=Ce(k1),U1=bt({},To,{relatedTarget:0}),sh=Ce(U1),L1=bt({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),z1=Ce(L1),j1=bt({},Ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),B1=Ce(j1),q1=bt({},Ar,{data:0}),fp=Ce(q1),H1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F1[e])?!!t[e]:!1}function wd(){return Q1}var K1=bt({},To,{key:function(e){if(e.key){var t=H1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wd,charCode:function(e){return e.type==="keypress"?Cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Y1=Ce(K1),X1=bt({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dp=Ce(X1),$1=bt({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wd}),Z1=Ce($1),J1=bt({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),W1=Ce(J1),tb=bt({},Xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eb=Ce(tb),nb=bt({},Ar,{newState:0,oldState:0}),ib=Ce(nb),rb=[9,13,27,32],Rd=qn&&"CompositionEvent"in window,ba=null;qn&&"documentMode"in document&&(ba=document.documentMode);var sb=qn&&"TextEvent"in window&&!ba,Dv=qn&&(!Rd||ba&&8<ba&&11>=ba),mp=" ",gp=!1;function Nv(e,t){switch(e){case"keyup":return rb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ov(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xr=!1;function ab(e,t){switch(e){case"compositionend":return Ov(t);case"keypress":return t.which!==32?null:(gp=!0,mp);case"textInput":return e=t.data,e===mp&&gp?null:e;default:return null}}function ob(e,t){if(Xr)return e==="compositionend"||!Rd&&Nv(e,t)?(e=Cv(),Il=bd=yi=null,Xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dv&&t.locale!=="ko"?null:t.data;default:return null}}var lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lb[e.type]:t==="textarea"}function Mv(e,t,n,i){Yr?as?as.push(i):as=[i]:Yr=i,t=yu(t,"onChange"),0<t.length&&(n=new Yu("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var wa=null,Ka=null;function ub(e){b0(e,0)}function $u(e){var t=ya(e);if(Sv(t))return e}function yp(e,t){if(e==="change")return t}var Vv=!1;if(qn){var ah;if(qn){var oh="oninput"in document;if(!oh){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),oh=typeof _p.oninput=="function"}ah=oh}else ah=!1;Vv=ah&&(!document.documentMode||9<document.documentMode)}function vp(){wa&&(wa.detachEvent("onpropertychange",xv),Ka=wa=null)}function xv(e){if(e.propertyName==="value"&&$u(Ka)){var t=[];Mv(t,Ka,e,Ad(e)),Iv(ub,t)}}function cb(e,t,n){e==="focusin"?(vp(),wa=t,Ka=n,wa.attachEvent("onpropertychange",xv)):e==="focusout"&&vp()}function hb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $u(Ka)}function fb(e,t){if(e==="click")return $u(t)}function db(e,t){if(e==="input"||e==="change")return $u(t)}function mb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Le=typeof Object.is=="function"?Object.is:mb;function Ya(e,t){if(Le(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!$h.call(t,r)||!Le(e[r],t[r]))return!1}return!0}function Ep(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tp(e,t){var n=Ep(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Ep(n)}}function kv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Id(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var gb=qn&&"documentMode"in document&&11>=document.documentMode,$r=null,nf=null,Ra=null,rf=!1;function Sp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rf||$r==null||$r!==Wl(i)||(i=$r,"selectionStart"in i&&Id(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ra&&Ya(Ra,i)||(Ra=i,i=yu(nf,"onSelect"),0<i.length&&(t=new Yu("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=$r)))}function Wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zr={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},lh={},Uv={};qn&&(Uv=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function br(e){if(lh[e])return lh[e];if(!Zr[e])return e;var t=Zr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Uv)return lh[e]=t[n];return e}var Lv=br("animationend"),zv=br("animationiteration"),jv=br("animationstart"),pb=br("transitionrun"),yb=br("transitionstart"),_b=br("transitioncancel"),Bv=br("transitionend"),qv=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function sn(e,t){qv.set(e,t),Sr(t,[e])}var Ap=new WeakMap;function Fe(e,t){if(typeof e=="object"&&e!==null){var n=Ap.get(e);return n!==void 0?n:(t={value:e,source:t,stack:op(t)},Ap.set(e,t),t)}return{value:e,source:t,stack:op(t)}}var je=[],Jr=0,Cd=0;function Zu(){for(var e=Jr,t=Cd=Jr=0;t<e;){var n=je[t];je[t++]=null;var i=je[t];je[t++]=null;var r=je[t];je[t++]=null;var s=je[t];if(je[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&Hv(n,r,s)}}function Ju(e,t,n,i){je[Jr++]=e,je[Jr++]=t,je[Jr++]=n,je[Jr++]=i,Cd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Dd(e,t,n,i){return Ju(e,t,n,i),tu(e)}function Us(e,t){return Ju(e,null,null,t),tu(e)}function Hv(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-ke(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function tu(e){if(50<Pa)throw Pa=0,Rf=null,Error(P(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Wr={};function vb(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,t,n,i){return new vb(e,t,n,i)}function Nd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ln(e,t){var n=e.alternate;return n===null?(n=Ve(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Gv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Dl(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Nd(e)&&(a=1);else if(typeof e=="string")a=Tw(e,n,hn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Qh:return e=Ve(31,n,t,r),e.elementType=Qh,e.lanes=s,e;case Fr:return ar(n.children,r,s,t);case uv:a=8,r|=24;break;case Hh:return e=Ve(12,n,t,r|2),e.elementType=Hh,e.lanes=s,e;case Gh:return e=Ve(13,n,t,r),e.elementType=Gh,e.lanes=s,e;case Fh:return e=Ve(19,n,t,r),e.elementType=Fh,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case u1:case On:a=10;break t;case cv:a=9;break t;case pd:a=11;break t;case yd:a=14;break t;case ai:a=16,i=null;break t}a=29,n=Error(P(130,e===null?"null":typeof e,"")),i=null}return t=Ve(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function ar(e,t,n,i){return e=Ve(7,e,i,t),e.lanes=n,e}function uh(e,t,n){return e=Ve(6,e,null,t),e.lanes=n,e}function ch(e,t,n){return t=Ve(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ts=[],es=0,eu=null,nu=0,qe=[],He=0,or=null,Mn=1,Vn="";function er(e,t){ts[es++]=nu,ts[es++]=eu,eu=e,nu=t}function Fv(e,t,n){qe[He++]=Mn,qe[He++]=Vn,qe[He++]=or,or=e;var i=Mn;e=Vn;var r=32-ke(i)-1;i&=~(1<<r),n+=1;var s=32-ke(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Mn=1<<32-ke(t)+r|n<<r|i,Vn=s+e}else Mn=1<<s|n<<r|i,Vn=e}function Od(e){e.return!==null&&(er(e,1),Fv(e,1,0))}function Md(e){for(;e===eu;)eu=ts[--es],ts[es]=null,nu=ts[--es],ts[es]=null;for(;e===or;)or=qe[--He],qe[He]=null,Vn=qe[--He],qe[He]=null,Mn=qe[--He],qe[He]=null}var Ee=null,xt=null,ct=!1,lr=null,un=!1,af=Error(P(519));function dr(e){var t=Error(P(418,""));throw Xa(Fe(t,e)),af}function bp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[me]=e,t[Ie]=i,n){case"dialog":et("cancel",t),et("close",t);break;case"iframe":case"object":case"embed":et("load",t);break;case"video":case"audio":for(n=0;n<Ja.length;n++)et(Ja[n],t);break;case"source":et("error",t);break;case"img":case"image":case"link":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"input":et("invalid",t),Av(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Jl(t);break;case"select":et("invalid",t);break;case"textarea":et("invalid",t),wv(t,i.value,i.defaultValue,i.children),Jl(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||R0(t.textContent,n)?(i.popover!=null&&(et("beforetoggle",t),et("toggle",t)),i.onScroll!=null&&et("scroll",t),i.onScrollEnd!=null&&et("scrollend",t),i.onClick!=null&&(t.onclick=ac),t=!0):t=!1,t||dr(e)}function wp(e){for(Ee=e.return;Ee;)switch(Ee.tag){case 5:case 13:un=!1;return;case 27:case 3:un=!0;return;default:Ee=Ee.return}}function ca(e){if(e!==Ee)return!1;if(!ct)return wp(e),ct=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Mf(e.type,e.memoizedProps)),n=!n),n&&xt&&dr(e),wp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){xt=rn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}xt=null}}else t===27?(t=xt,Qi(e.type)?(e=kf,kf=null,xt=e):xt=t):xt=Ee?rn(e.stateNode.nextSibling):null;return!0}function So(){xt=Ee=null,ct=!1}function Rp(){var e=lr;return e!==null&&(we===null?we=e:we.push.apply(we,e),lr=null),e}function Xa(e){lr===null?lr=[e]:lr.push(e)}var of=An(null),wr=null,xn=null;function li(e,t,n){It(of,t._currentValue),t._currentValue=n}function zn(e){e._currentValue=of.current,Wt(of)}function lf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function uf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lf(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(P(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),lf(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ao(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=r.type;Le(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===Yl.current){if(a=r.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(eo):e=[eo])}r=r.return}e!==null&&uf(t,e,n,i),t.flags|=262144}function iu(e){for(e=e.firstContext;e!==null;){if(!Le(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function mr(e){wr=e,xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ge(e){return Qv(wr,e)}function cl(e,t){return wr===null&&mr(e),Qv(e,t)}function Qv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},xn===null){if(e===null)throw Error(P(308));xn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xn=xn.next=t;return n}var Eb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Tb=Kt.unstable_scheduleCallback,Sb=Kt.unstable_NormalPriority,Ht={$$typeof:On,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new Eb,data:new Map,refCount:0}}function bo(e){e.refCount--,e.refCount===0&&Tb(Sb,function(){e.controller.abort()})}var Ia=null,cf=0,vs=0,os=null;function Ab(e,t){if(Ia===null){var n=Ia=[];cf=0,vs=nm(),os={status:"pending",value:void 0,then:function(i){n.push(i)}}}return cf++,t.then(Ip,Ip),t}function Ip(){if(--cf===0&&Ia!==null){os!==null&&(os.status="fulfilled");var e=Ia;Ia=null,vs=0,os=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function bb(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Cp=K.S;K.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ab(e,t),Cp!==null&&Cp(e,t)};var ur=An(null);function xd(){var e=ur.current;return e!==null?e:Tt.pooledCache}function Nl(e,t){t===null?It(ur,ur.current):It(ur,t.pool)}function Kv(){var e=xd();return e===null?null:{parent:Ht._currentValue,pool:e}}var wo=Error(P(460)),Yv=Error(P(474)),Wu=Error(P(542)),hf={then:function(){}};function Dp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function hl(){}function Xv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(hl,hl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Op(e),e;default:if(typeof t.status=="string")t.then(hl,hl);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(P(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Op(e),e}throw Ca=t,wo}}var Ca=null;function Np(){if(Ca===null)throw Error(P(459));var e=Ca;return Ca=null,e}function Op(e){if(e===wo||e===Wu)throw Error(P(483))}var oi=!1;function kd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ff(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=tu(e),Hv(e,null,n),t}return Ju(e,i,t,n),tu(e)}function Da(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yv(e,n)}}function hh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var df=!1;function Na(){if(df){var e=os;if(e!==null)throw e}}function Oa(e,t,n,i){df=!1;var r=e.updateQueue;oi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(lt&m)===m:(i&m)===m){m!==0&&m===vs&&(df=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var N=e,V=l;m=t;var x=n;switch(V.tag){case 1:if(N=V.payload,typeof N=="function"){p=N.call(x,p,m);break t}p=N;break t;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,m=typeof N=="function"?N.call(x,p,m):N,m==null)break t;p=bt({},p,m);break t;case 2:oi=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=p):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Ui|=a,e.lanes=a,e.memoizedState=p}}function $v(e,t){if(typeof e!="function")throw Error(P(191,e));e.call(t)}function Zv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)$v(n[e],t)}var Es=An(null),ru=An(0);function Mp(e,t){e=Fn,It(ru,e),It(Es,t),Fn=e|t.baseLanes}function mf(){It(ru,Fn),It(Es,Es.current)}function Pd(){Fn=ru.current,Wt(Es),Wt(ru)}var ki=0,tt=null,yt=null,jt=null,su=!1,ls=!1,gr=!1,au=0,$a=0,us=null,wb=0;function Pt(){throw Error(P(321))}function Ud(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Le(e[n],t[n]))return!1;return!0}function Ld(e,t,n,i,r,s){return ki=s,tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,K.H=e===null||e.memoizedState===null?CE:DE,gr=!1,s=n(i,r),gr=!1,ls&&(s=Wv(t,n,i,r)),Jv(e),s}function Jv(e){K.H=ou;var t=yt!==null&&yt.next!==null;if(ki=0,jt=yt=tt=null,su=!1,$a=0,us=null,t)throw Error(P(300));e===null||Zt||(e=e.dependencies,e!==null&&iu(e)&&(Zt=!0))}function Wv(e,t,n,i){tt=e;var r=0;do{if(ls&&(us=null),$a=0,ls=!1,25<=r)throw Error(P(301));if(r+=1,jt=yt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}K.H=Mb,s=t(n,i)}while(ls);return s}function Rb(){var e=K.H,t=e.useState()[0];return t=typeof t.then=="function"?Ro(t):t,e=e.useState()[0],(yt!==null?yt.memoizedState:null)!==e&&(tt.flags|=1024),t}function zd(){var e=au!==0;return au=0,e}function jd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Bd(e){if(su){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}su=!1}ki=0,jt=yt=tt=null,ls=!1,$a=au=0,us=null}function Ae(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?tt.memoizedState=jt=e:jt=jt.next=e,jt}function qt(){if(yt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=jt===null?tt.memoizedState:jt.next;if(t!==null)jt=t,yt=e;else{if(e===null)throw tt.alternate===null?Error(P(467)):Error(P(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},jt===null?tt.memoizedState=jt=e:jt=jt.next=e}return jt}function qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(e){var t=$a;return $a+=1,us===null&&(us=[]),e=Xv(us,e,t),t=tt,(jt===null?t.memoizedState:jt.next)===null&&(t=t.alternate,K.H=t===null||t.memoizedState===null?CE:DE),e}function tc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ro(e);if(e.$$typeof===On)return ge(e)}throw Error(P(438,String(e)))}function Hd(e){var t=null,n=tt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=tt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=qd(),tt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=c1;return t.index++,n}function Hn(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=qt();return Gd(t,yt,e)}function Gd(e,t,n){var i=e.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(lt&p)===p:(ki&p)===p){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===vs&&(d=!0);else if((ki&m)===m){h=h.next,m===vs&&(d=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=s):u=u.next=p,tt.lanes|=m,Ui|=m;p=h.action,gr&&n(s,p),s=h.hasEagerState?h.eagerState:n(s,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,tt.lanes|=p,Ui|=p;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!Le(s,e.memoizedState)&&(Zt=!0,d&&(n=os,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function fh(e){var t=qt(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Le(s,t.memoizedState)||(Zt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function tE(e,t,n){var i=tt,r=qt(),s=ct;if(s){if(n===void 0)throw Error(P(407));n=n()}else n=t();var a=!Le((yt||r).memoizedState,n);a&&(r.memoizedState=n,Zt=!0),r=r.queue;var l=iE.bind(null,i,r,e);if(Io(2048,8,l,[e]),r.getSnapshot!==t||a||jt!==null&&jt.memoizedState.tag&1){if(i.flags|=2048,Ts(9,ec(),nE.bind(null,i,r,n,t),null),Tt===null)throw Error(P(349));s||ki&124||eE(i,t,n)}return n}function eE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tt.updateQueue,t===null?(t=qd(),tt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nE(e,t,n,i){t.value=n,t.getSnapshot=i,rE(t)&&sE(e)}function iE(e,t,n){return n(function(){rE(t)&&sE(e)})}function rE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Le(e,n)}catch{return!0}}function sE(e){var t=Us(e,2);t!==null&&Ue(t,e,2)}function gf(e){var t=Ae();if(typeof e=="function"){var n=e;if(e=n(),gr){pi(!0);try{n()}finally{pi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t}function aE(e,t,n,i){return e.baseState=n,Gd(e,yt,typeof i=="function"?i:Hn)}function Ib(e,t,n,i,r){if(nc(e))throw Error(P(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};K.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,oE(t,s)):(s.next=n.next,t.pending=n.next=s)}}function oE(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=K.T,a={};K.T=a;try{var l=n(r,i),u=K.S;u!==null&&u(a,l),Vp(e,t,l)}catch(h){pf(e,t,h)}finally{K.T=s}}else try{s=n(r,i),Vp(e,t,s)}catch(h){pf(e,t,h)}}function Vp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){xp(e,t,i)},function(i){return pf(e,t,i)}):xp(e,t,n)}function xp(e,t,n){t.status="fulfilled",t.value=n,lE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,oE(e,n)))}function pf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,lE(t),t=t.next;while(t!==i)}e.action=null}function lE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function uE(e,t){return t}function kp(e,t){if(ct){var n=Tt.formState;if(n!==null){t:{var i=tt;if(ct){if(xt){e:{for(var r=xt,s=un;r.nodeType!==8;){if(!s){r=null;break e}if(r=rn(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){xt=rn(r.nextSibling),i=r.data==="F!";break t}}dr(i)}i=!1}i&&(t=n[0])}}return n=Ae(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uE,lastRenderedState:t},n.queue=i,n=wE.bind(null,tt,i),i.dispatch=n,i=gf(!1),s=Yd.bind(null,tt,!1,i.queue),i=Ae(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Ib.bind(null,tt,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Pp(e){var t=qt();return cE(t,yt,e)}function cE(e,t,n){if(t=Gd(e,t,uE)[0],e=Ol(Hn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Ro(t)}catch(a){throw a===wo?Wu:a}else i=t;t=qt();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(tt.flags|=2048,Ts(9,ec(),Cb.bind(null,r,n),null)),[i,s,e]}function Cb(e,t){e.action=t}function Up(e){var t=qt(),n=yt;if(n!==null)return cE(t,n,e);qt(),t=t.memoizedState,n=qt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ts(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=tt.updateQueue,t===null&&(t=qd(),tt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ec(){return{destroy:void 0,resource:void 0}}function hE(){return qt().memoizedState}function Ml(e,t,n,i){var r=Ae();i=i===void 0?null:i,tt.flags|=e,r.memoizedState=Ts(1|t,ec(),n,i)}function Io(e,t,n,i){var r=qt();i=i===void 0?null:i;var s=r.memoizedState.inst;yt!==null&&i!==null&&Ud(i,yt.memoizedState.deps)?r.memoizedState=Ts(t,s,n,i):(tt.flags|=e,r.memoizedState=Ts(1|t,s,n,i))}function Lp(e,t){Ml(8390656,8,e,t)}function fE(e,t){Io(2048,8,e,t)}function dE(e,t){return Io(4,2,e,t)}function mE(e,t){return Io(4,4,e,t)}function gE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pE(e,t,n){n=n!=null?n.concat([e]):null,Io(4,4,gE.bind(null,t,e),n)}function Fd(){}function yE(e,t){var n=qt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Ud(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function _E(e,t){var n=qt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Ud(t,i[1]))return i[0];if(i=e(),gr){pi(!0);try{e()}finally{pi(!1)}}return n.memoizedState=[i,t],i}function Qd(e,t,n){return n===void 0||ki&1073741824?e.memoizedState=t:(e.memoizedState=n,e=l0(),tt.lanes|=e,Ui|=e,n)}function vE(e,t,n,i){return Le(n,t)?n:Es.current!==null?(e=Qd(e,n,i),Le(e,t)||(Zt=!0),e):ki&42?(e=l0(),tt.lanes|=e,Ui|=e,t):(Zt=!0,e.memoizedState=n)}function EE(e,t,n,i,r){var s=ht.p;ht.p=s!==0&&8>s?s:8;var a=K.T,l={};K.T=l,Yd(e,!1,t,n);try{var u=r(),h=K.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=bb(u,i);Ma(e,t,d,Pe(e))}else Ma(e,t,i,Pe(e))}catch(p){Ma(e,t,{then:function(){},status:"rejected",reason:p},Pe())}finally{ht.p=s,K.T=a}}function Db(){}function yf(e,t,n,i){if(e.tag!==5)throw Error(P(476));var r=TE(e).queue;EE(e,r,t,sr,n===null?Db:function(){return SE(e),n(i)})}function TE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:sr,baseState:sr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:sr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function SE(e){var t=TE(e).next.queue;Ma(e,t,{},Pe())}function Kd(){return ge(eo)}function AE(){return qt().memoizedState}function bE(){return qt().memoizedState}function Nb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pe();e=Si(n);var i=Ai(t,e,n);i!==null&&(Ue(i,t,n),Da(i,t,n)),t={cache:Vd()},e.payload=t;return}t=t.return}}function Ob(e,t,n){var i=Pe();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},nc(e)?RE(t,n):(n=Dd(e,t,n,i),n!==null&&(Ue(n,e,i),IE(n,t,i)))}function wE(e,t,n){var i=Pe();Ma(e,t,n,i)}function Ma(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(nc(e))RE(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Le(l,a))return Ju(e,t,r,0),Tt===null&&Zu(),!1}catch{}finally{}if(n=Dd(e,t,r,i),n!==null)return Ue(n,e,i),IE(n,t,i),!0}return!1}function Yd(e,t,n,i){if(i={lane:2,revertLane:nm(),action:i,hasEagerState:!1,eagerState:null,next:null},nc(e)){if(t)throw Error(P(479))}else t=Dd(e,n,i,2),t!==null&&Ue(t,e,2)}function nc(e){var t=e.alternate;return e===tt||t!==null&&t===tt}function RE(e,t){ls=su=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function IE(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yv(e,n)}}var ou={readContext:ge,use:tc,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},CE={readContext:ge,use:tc,useCallback:function(e,t){return Ae().memoizedState=[e,t===void 0?null:t],e},useContext:ge,useEffect:Lp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ml(4194308,4,gE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){Ml(4,2,e,t)},useMemo:function(e,t){var n=Ae();t=t===void 0?null:t;var i=e();if(gr){pi(!0);try{e()}finally{pi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ae();if(n!==void 0){var r=n(t);if(gr){pi(!0);try{n(t)}finally{pi(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Ob.bind(null,tt,e),[i.memoizedState,e]},useRef:function(e){var t=Ae();return e={current:e},t.memoizedState=e},useState:function(e){e=gf(e);var t=e.queue,n=wE.bind(null,tt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Fd,useDeferredValue:function(e,t){var n=Ae();return Qd(n,e,t)},useTransition:function(){var e=gf(!1);return e=EE.bind(null,tt,e.queue,!0,!1),Ae().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=tt,r=Ae();if(ct){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Tt===null)throw Error(P(349));lt&124||eE(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Lp(iE.bind(null,i,s,e),[e]),i.flags|=2048,Ts(9,ec(),nE.bind(null,i,s,n,t),null),n},useId:function(){var e=Ae(),t=Tt.identifierPrefix;if(ct){var n=Vn,i=Mn;n=(i&~(1<<32-ke(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=au++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=wb++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Kd,useFormState:kp,useActionState:kp,useOptimistic:function(e){var t=Ae();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Yd.bind(null,tt,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hd,useCacheRefresh:function(){return Ae().memoizedState=Nb.bind(null,tt)}},DE={readContext:ge,use:tc,useCallback:yE,useContext:ge,useEffect:fE,useImperativeHandle:pE,useInsertionEffect:dE,useLayoutEffect:mE,useMemo:_E,useReducer:Ol,useRef:hE,useState:function(){return Ol(Hn)},useDebugValue:Fd,useDeferredValue:function(e,t){var n=qt();return vE(n,yt.memoizedState,e,t)},useTransition:function(){var e=Ol(Hn)[0],t=qt().memoizedState;return[typeof e=="boolean"?e:Ro(e),t]},useSyncExternalStore:tE,useId:AE,useHostTransitionStatus:Kd,useFormState:Pp,useActionState:Pp,useOptimistic:function(e,t){var n=qt();return aE(n,yt,e,t)},useMemoCache:Hd,useCacheRefresh:bE},Mb={readContext:ge,use:tc,useCallback:yE,useContext:ge,useEffect:fE,useImperativeHandle:pE,useInsertionEffect:dE,useLayoutEffect:mE,useMemo:_E,useReducer:fh,useRef:hE,useState:function(){return fh(Hn)},useDebugValue:Fd,useDeferredValue:function(e,t){var n=qt();return yt===null?Qd(n,e,t):vE(n,yt.memoizedState,e,t)},useTransition:function(){var e=fh(Hn)[0],t=qt().memoizedState;return[typeof e=="boolean"?e:Ro(e),t]},useSyncExternalStore:tE,useId:AE,useHostTransitionStatus:Kd,useFormState:Up,useActionState:Up,useOptimistic:function(e,t){var n=qt();return yt!==null?aE(n,yt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hd,useCacheRefresh:bE},cs=null,Za=0;function fl(e){var t=Za;return Za+=1,cs===null&&(cs=[]),Xv(cs,e,t)}function ha(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===l1?Error(P(525)):(e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function zp(e){var t=e._init;return t(e._payload)}function NE(e){function t(A,E){if(e){var w=A.deletions;w===null?(A.deletions=[E],A.flags|=16):w.push(E)}}function n(A,E){if(!e)return null;for(;E!==null;)t(A,E),E=E.sibling;return null}function i(A){for(var E=new Map;A!==null;)A.key!==null?E.set(A.key,A):E.set(A.index,A),A=A.sibling;return E}function r(A,E){return A=Ln(A,E),A.index=0,A.sibling=null,A}function s(A,E,w){return A.index=w,e?(w=A.alternate,w!==null?(w=w.index,w<E?(A.flags|=67108866,E):w):(A.flags|=67108866,E)):(A.flags|=1048576,E)}function a(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function l(A,E,w,D){return E===null||E.tag!==6?(E=uh(w,A.mode,D),E.return=A,E):(E=r(E,w),E.return=A,E)}function u(A,E,w,D){var L=w.type;return L===Fr?d(A,E,w.props.children,D,w.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ai&&zp(L)===E.type)?(E=r(E,w.props),ha(E,w),E.return=A,E):(E=Dl(w.type,w.key,w.props,null,A.mode,D),ha(E,w),E.return=A,E)}function h(A,E,w,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=ch(w,A.mode,D),E.return=A,E):(E=r(E,w.children||[]),E.return=A,E)}function d(A,E,w,D,L){return E===null||E.tag!==7?(E=ar(w,A.mode,D,L),E.return=A,E):(E=r(E,w),E.return=A,E)}function p(A,E,w){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=uh(""+E,A.mode,w),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case sl:return w=Dl(E.type,E.key,E.props,null,A.mode,w),ha(w,E),w.return=A,w;case ga:return E=ch(E,A.mode,w),E.return=A,E;case ai:var D=E._init;return E=D(E._payload),p(A,E,w)}if(pa(E)||oa(E))return E=ar(E,A.mode,w,null),E.return=A,E;if(typeof E.then=="function")return p(A,fl(E),w);if(E.$$typeof===On)return p(A,cl(A,E),w);dl(A,E)}return null}function m(A,E,w,D){var L=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return L!==null?null:l(A,E,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sl:return w.key===L?u(A,E,w,D):null;case ga:return w.key===L?h(A,E,w,D):null;case ai:return L=w._init,w=L(w._payload),m(A,E,w,D)}if(pa(w)||oa(w))return L!==null?null:d(A,E,w,D,null);if(typeof w.then=="function")return m(A,E,fl(w),D);if(w.$$typeof===On)return m(A,E,cl(A,w),D);dl(A,w)}return null}function _(A,E,w,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(w)||null,l(E,A,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case sl:return A=A.get(D.key===null?w:D.key)||null,u(E,A,D,L);case ga:return A=A.get(D.key===null?w:D.key)||null,h(E,A,D,L);case ai:var B=D._init;return D=B(D._payload),_(A,E,w,D,L)}if(pa(D)||oa(D))return A=A.get(w)||null,d(E,A,D,L,null);if(typeof D.then=="function")return _(A,E,w,fl(D),L);if(D.$$typeof===On)return _(A,E,w,cl(E,D),L);dl(E,D)}return null}function N(A,E,w,D){for(var L=null,B=null,T=E,y=E=0,S=null;T!==null&&y<w.length;y++){T.index>y?(S=T,T=null):S=T.sibling;var v=m(A,T,w[y],D);if(v===null){T===null&&(T=S);break}e&&T&&v.alternate===null&&t(A,T),E=s(v,E,y),B===null?L=v:B.sibling=v,B=v,T=S}if(y===w.length)return n(A,T),ct&&er(A,y),L;if(T===null){for(;y<w.length;y++)T=p(A,w[y],D),T!==null&&(E=s(T,E,y),B===null?L=T:B.sibling=T,B=T);return ct&&er(A,y),L}for(T=i(T);y<w.length;y++)S=_(T,A,y,w[y],D),S!==null&&(e&&S.alternate!==null&&T.delete(S.key===null?y:S.key),E=s(S,E,y),B===null?L=S:B.sibling=S,B=S);return e&&T.forEach(function(R){return t(A,R)}),ct&&er(A,y),L}function V(A,E,w,D){if(w==null)throw Error(P(151));for(var L=null,B=null,T=E,y=E=0,S=null,v=w.next();T!==null&&!v.done;y++,v=w.next()){T.index>y?(S=T,T=null):S=T.sibling;var R=m(A,T,v.value,D);if(R===null){T===null&&(T=S);break}e&&T&&R.alternate===null&&t(A,T),E=s(R,E,y),B===null?L=R:B.sibling=R,B=R,T=S}if(v.done)return n(A,T),ct&&er(A,y),L;if(T===null){for(;!v.done;y++,v=w.next())v=p(A,v.value,D),v!==null&&(E=s(v,E,y),B===null?L=v:B.sibling=v,B=v);return ct&&er(A,y),L}for(T=i(T);!v.done;y++,v=w.next())v=_(T,A,y,v.value,D),v!==null&&(e&&v.alternate!==null&&T.delete(v.key===null?y:v.key),E=s(v,E,y),B===null?L=v:B.sibling=v,B=v);return e&&T.forEach(function(I){return t(A,I)}),ct&&er(A,y),L}function x(A,E,w,D){if(typeof w=="object"&&w!==null&&w.type===Fr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case sl:t:{for(var L=w.key;E!==null;){if(E.key===L){if(L=w.type,L===Fr){if(E.tag===7){n(A,E.sibling),D=r(E,w.props.children),D.return=A,A=D;break t}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ai&&zp(L)===E.type){n(A,E.sibling),D=r(E,w.props),ha(D,w),D.return=A,A=D;break t}n(A,E);break}else t(A,E);E=E.sibling}w.type===Fr?(D=ar(w.props.children,A.mode,D,w.key),D.return=A,A=D):(D=Dl(w.type,w.key,w.props,null,A.mode,D),ha(D,w),D.return=A,A=D)}return a(A);case ga:t:{for(L=w.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(A,E.sibling),D=r(E,w.children||[]),D.return=A,A=D;break t}else{n(A,E);break}else t(A,E);E=E.sibling}D=ch(w,A.mode,D),D.return=A,A=D}return a(A);case ai:return L=w._init,w=L(w._payload),x(A,E,w,D)}if(pa(w))return N(A,E,w,D);if(oa(w)){if(L=oa(w),typeof L!="function")throw Error(P(150));return w=L.call(w),V(A,E,w,D)}if(typeof w.then=="function")return x(A,E,fl(w),D);if(w.$$typeof===On)return x(A,E,cl(A,w),D);dl(A,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,E!==null&&E.tag===6?(n(A,E.sibling),D=r(E,w),D.return=A,A=D):(n(A,E),D=uh(w,A.mode,D),D.return=A,A=D),a(A)):n(A,E)}return function(A,E,w,D){try{Za=0;var L=x(A,E,w,D);return cs=null,L}catch(T){if(T===wo||T===Wu)throw T;var B=Ve(29,T,null,A.mode);return B.lanes=D,B.return=A,B}finally{}}}var Ss=NE(!0),OE=NE(!1),Xe=An(null),dn=null;function ui(e){var t=e.alternate;It(Gt,Gt.current&1),It(Xe,e),dn===null&&(t===null||Es.current!==null||t.memoizedState!==null)&&(dn=e)}function ME(e){if(e.tag===22){if(It(Gt,Gt.current),It(Xe,e),dn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(dn=e)}}else ci()}function ci(){It(Gt,Gt.current),It(Xe,Xe.current)}function kn(e){Wt(Xe),dn===e&&(dn=null),Wt(Gt)}var Gt=An(0);function lu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||xf(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function dh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:bt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _f={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Pe(),r=Si(i);r.payload=t,n!=null&&(r.callback=n),t=Ai(e,r,i),t!==null&&(Ue(t,e,i),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Pe(),r=Si(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ai(e,r,i),t!==null&&(Ue(t,e,i),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pe(),i=Si(n);i.tag=2,t!=null&&(i.callback=t),t=Ai(e,i,n),t!==null&&(Ue(t,e,n),Da(t,e,n))}};function jp(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ya(n,i)||!Ya(r,s):!0}function Bp(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&_f.enqueueReplaceState(t,t.state,null)}function pr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=bt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var uu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function VE(e){uu(e)}function xE(e){console.error(e)}function kE(e){uu(e)}function cu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function qp(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function vf(e,t,n){return n=Si(n),n.tag=3,n.payload={element:null},n.callback=function(){cu(e,t)},n}function PE(e){return e=Si(e),e.tag=3,e}function UE(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){qp(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){qp(t,n,i),typeof r!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Vb(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ao(t,n,r,!0),n=Xe.current,n!==null){switch(n.tag){case 13:return dn===null?If():n.alternate===null&&kt===0&&(kt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===hf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),bh(e,i,r)),!1;case 22:return n.flags|=65536,i===hf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),bh(e,i,r)),!1}throw Error(P(435,n.tag))}return bh(e,i,r),If(),!1}if(ct)return t=Xe.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==af&&(e=Error(P(422),{cause:i}),Xa(Fe(e,n)))):(i!==af&&(t=Error(P(423),{cause:i}),Xa(Fe(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Fe(i,n),r=vf(e.stateNode,i,r),hh(e,r),kt!==4&&(kt=2)),!1;var s=Error(P(520),{cause:i});if(s=Fe(s,n),ka===null?ka=[s]:ka.push(s),kt!==4&&(kt=2),t===null)return!0;i=Fe(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=vf(n.stateNode,i,e),hh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(bi===null||!bi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=PE(r),UE(r,e,n,i),hh(n,r),!1}n=n.return}while(n!==null);return!1}var LE=Error(P(461)),Zt=!1;function ne(e,t,n,i){t.child=e===null?OE(t,null,n,i):Ss(t,e.child,n,i)}function Hp(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return mr(t),i=Ld(e,t,n,a,s,r),l=zd(),e!==null&&!Zt?(jd(e,t,r),Gn(e,t,r)):(ct&&l&&Od(t),t.flags|=1,ne(e,t,i,r),t.child)}function Gp(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Nd(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,zE(e,t,s,i,r)):(e=Dl(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Xd(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ya,n(a,i)&&e.ref===t.ref)return Gn(e,t,r)}return t.flags|=1,e=Ln(s,i),e.ref=t.ref,e.return=t,t.child=e}function zE(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Ya(s,i)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=i=s,Xd(e,r))e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,Gn(e,t,r)}return Ef(e,t,n,i,r)}function jE(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Fp(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Nl(t,s!==null?s.cachePool:null),s!==null?Mp(t,s):mf(),ME(t);else return t.lanes=t.childLanes=536870912,Fp(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(Nl(t,s.cachePool),Mp(t,s),ci(),t.memoizedState=null):(e!==null&&Nl(t,null),mf(),ci());return ne(e,t,r,n),t.child}function Fp(e,t,n,i){var r=xd();return r=r===null?null:{parent:Ht._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Nl(t,null),mf(),ME(t),e!==null&&Ao(e,t,i,!0),null}function Vl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ef(e,t,n,i,r){return mr(t),n=Ld(e,t,n,i,void 0,r),i=zd(),e!==null&&!Zt?(jd(e,t,r),Gn(e,t,r)):(ct&&i&&Od(t),t.flags|=1,ne(e,t,n,r),t.child)}function Qp(e,t,n,i,r,s){return mr(t),t.updateQueue=null,n=Wv(t,i,n,r),Jv(e),i=zd(),e!==null&&!Zt?(jd(e,t,s),Gn(e,t,s)):(ct&&i&&Od(t),t.flags|=1,ne(e,t,n,s),t.child)}function Kp(e,t,n,i,r){if(mr(t),t.stateNode===null){var s=Wr,a=n.contextType;typeof a=="object"&&a!==null&&(s=ge(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_f,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},kd(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?ge(a):Wr,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(dh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&_f.enqueueReplaceState(s,s.state,null),Oa(t,i,s,r),Na(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=pr(n,l);s.props=u;var h=s.context,d=n.contextType;a=Wr,typeof d=="object"&&d!==null&&(a=ge(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&Bp(t,s,i,a),oi=!1;var m=t.memoizedState;s.state=m,Oa(t,i,s,r),Na(),h=t.memoizedState,l||m!==h||oi?(typeof p=="function"&&(dh(t,n,p,i),h=t.memoizedState),(u=oi||jp(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,ff(e,t),a=t.memoizedProps,d=pr(n,a),s.props=d,p=t.pendingProps,m=s.context,h=n.contextType,u=Wr,typeof h=="object"&&h!==null&&(u=ge(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==u)&&Bp(t,s,i,u),oi=!1,m=t.memoizedState,s.state=m,Oa(t,i,s,r),Na();var _=t.memoizedState;a!==p||m!==_||oi||e!==null&&e.dependencies!==null&&iu(e.dependencies)?(typeof l=="function"&&(dh(t,n,l,i),_=t.memoizedState),(d=oi||jp(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&iu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Vl(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Ss(t,e.child,null,r),t.child=Ss(t,null,n,r)):ne(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Gn(e,t,r),e}function Yp(e,t,n,i){return So(),t.flags|=256,ne(e,t,n,i),t.child}var mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gh(e){return{baseLanes:e,cachePool:Kv()}}function ph(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ye),e}function BE(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Gt.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ct){if(r?ui(t):ci(),ct){var l=xt,u;if(u=l){t:{for(u=l,l=un;u.nodeType!==8;){if(!l){l=null;break t}if(u=rn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:or!==null?{id:Mn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},u=Ve(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ee=t,xt=null,u=!0):u=!1}u||dr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return xf(l)?t.lanes=32:t.lanes=536870912,null;kn(t)}return l=i.children,i=i.fallback,r?(ci(),r=t.mode,l=hu({mode:"hidden",children:l},r),i=ar(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=gh(n),r.childLanes=ph(e,a,n),t.memoizedState=mh,i):(ui(t),Tf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(ui(t),t.flags&=-257,t=yh(e,t,n)):t.memoizedState!==null?(ci(),t.child=e.child,t.flags|=128,t=null):(ci(),r=i.fallback,l=t.mode,i=hu({mode:"visible",children:i.children},l),r=ar(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Ss(t,e.child,null,n),i=t.child,i.memoizedState=gh(n),i.childLanes=ph(e,a,n),t.memoizedState=mh,t=r);else if(ui(t),xf(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(P(419)),i.stack="",i.digest=a,Xa({value:i,source:null,stack:null}),t=yh(e,t,n)}else if(Zt||Ao(e,t,n,!1),a=(n&e.childLanes)!==0,Zt||a){if(a=Tt,a!==null&&(i=n&-n,i=i&42?1:vd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Us(e,i),Ue(a,e,i),LE;l.data==="$?"||If(),t=yh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,xt=rn(l.nextSibling),Ee=t,ct=!0,lr=null,un=!1,e!==null&&(qe[He++]=Mn,qe[He++]=Vn,qe[He++]=or,Mn=e.id,Vn=e.overflow,or=t),t=Tf(t,i.children),t.flags|=4096);return t}return r?(ci(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Ln(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Ln(h,r):(r=ar(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=gh(n):(u=l.cachePool,u!==null?(h=Ht._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=Kv(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=ph(e,a,n),t.memoizedState=mh,i):(ui(t),n=e.child,e=n.sibling,n=Ln(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Tf(e,t){return t=hu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function hu(e,t){return e=Ve(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yh(e,t,n){return Ss(t,e.child,null,n),e=Tf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xp(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),lf(e.return,t,n)}function _h(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function qE(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ne(e,t,i.children,n),i=Gt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xp(e,n,t);else if(e.tag===19)Xp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(It(Gt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&lu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),_h(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&lu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}_h(t,!0,n,null,s);break;case"together":_h(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ui|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ao(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xd(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&iu(e)))}function xb(e,t,n){switch(t.tag){case 3:Xl(t,t.stateNode.containerInfo),li(t,Ht,e.memoizedState.cache),So();break;case 27:case 5:Xh(t);break;case 4:Xl(t,t.stateNode.containerInfo);break;case 10:li(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ui(t),t.flags|=128,null):n&t.child.childLanes?BE(e,t,n):(ui(t),e=Gn(e,t,n),e!==null?e.sibling:null);ui(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ao(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return qE(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),It(Gt,Gt.current),i)break;return null;case 22:case 23:return t.lanes=0,jE(e,t,n);case 24:li(t,Ht,e.memoizedState.cache)}return Gn(e,t,n)}function HE(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Zt=!0;else{if(!Xd(e,n)&&!(t.flags&128))return Zt=!1,xb(e,t,n);Zt=!!(e.flags&131072)}else Zt=!1,ct&&t.flags&1048576&&Fv(t,nu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Nd(i)?(e=pr(i,e),t.tag=1,t=Kp(null,t,i,e,n)):(t.tag=0,t=Ef(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===pd){t.tag=11,t=Hp(null,t,i,e,n);break t}else if(r===yd){t.tag=14,t=Gp(null,t,i,e,n);break t}}throw t=Kh(i)||i,Error(P(306,t,""))}}return t;case 0:return Ef(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=pr(i,t.pendingProps),Kp(e,t,i,r,n);case 3:t:{if(Xl(t,t.stateNode.containerInfo),e===null)throw Error(P(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,ff(e,t),Oa(t,i,null,n);var a=t.memoizedState;if(i=a.cache,li(t,Ht,i),i!==s.cache&&uf(t,[Ht],n,!0),Na(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Yp(e,t,i,n);break t}else if(i!==r){r=Fe(Error(P(424)),t),Xa(r),t=Yp(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(xt=rn(e.firstChild),Ee=t,ct=!0,lr=null,un=!0,n=OE(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(So(),i===r){t=Gn(e,t,n);break t}ne(e,t,i,n)}t=t.child}return t;case 26:return Vl(e,t),e===null?(n=fy(t.type,null,t.pendingProps,null))?t.memoizedState=n:ct||(n=t.type,e=t.pendingProps,i=_u(Ti.current).createElement(n),i[me]=t,i[Ie]=e,ae(i,n,e),$t(i),t.stateNode=i):t.memoizedState=fy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Xh(t),e===null&&ct&&(i=t.stateNode=D0(t.type,t.pendingProps,Ti.current),Ee=t,un=!0,r=xt,Qi(t.type)?(kf=r,xt=rn(i.firstChild)):xt=r),ne(e,t,t.pendingProps.children,n),Vl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ct&&((r=i=xt)&&(i=lw(i,t.type,t.pendingProps,un),i!==null?(t.stateNode=i,Ee=t,xt=rn(i.firstChild),un=!1,r=!0):r=!1),r||dr(t)),Xh(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Mf(r,s)?i=null:a!==null&&Mf(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=Ld(e,t,Rb,null,null,n),eo._currentValue=r),Vl(e,t),ne(e,t,i,n),t.child;case 6:return e===null&&ct&&((e=n=xt)&&(n=uw(n,t.pendingProps,un),n!==null?(t.stateNode=n,Ee=t,xt=null,e=!0):e=!1),e||dr(t)),null;case 13:return BE(e,t,n);case 4:return Xl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ss(t,null,i,n):ne(e,t,i,n),t.child;case 11:return Hp(e,t,t.type,t.pendingProps,n);case 7:return ne(e,t,t.pendingProps,n),t.child;case 8:return ne(e,t,t.pendingProps.children,n),t.child;case 12:return ne(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,li(t,t.type,i.value),ne(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,mr(t),r=ge(r),i=i(r),t.flags|=1,ne(e,t,i,n),t.child;case 14:return Gp(e,t,t.type,t.pendingProps,n);case 15:return zE(e,t,t.type,t.pendingProps,n);case 19:return qE(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=hu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Ln(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return jE(e,t,n);case 24:return mr(t),i=ge(Ht),e===null?(r=xd(),r===null&&(r=Tt,s=Vd(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},kd(t),li(t,Ht,r)):(e.lanes&n&&(ff(e,t),Oa(t,null,null,n),Na()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),li(t,Ht,i)):(i=s.cache,li(t,Ht,i),i!==r.cache&&uf(t,[Ht],n,!0))),ne(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(P(156,t.tag))}function Cn(e){e.flags|=4}function $p(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!M0(t)){if(t=Xe.current,t!==null&&((lt&4194048)===lt?dn!==null:(lt&62914560)!==lt&&!(lt&536870912)||t!==dn))throw Ca=hf,Yv;e.flags|=8192}}function ml(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gv():536870912,e.lanes|=t,As|=t)}function fa(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function kb(e,t,n){var i=t.pendingProps;switch(Md(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Nt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),zn(Ht),ps(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ca(t)?Cn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rp())),Nt(t),null;case 26:return n=t.memoizedState,e===null?(Cn(t),n!==null?(Nt(t),$p(t,n)):(Nt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Cn(t),Nt(t),$p(t,n)):(Nt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Cn(t),Nt(t),t.flags&=-16777217),null;case 27:$l(t),n=Ti.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Cn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Nt(t),null}e=hn.current,ca(t)?bp(t):(e=D0(r,i,n),t.stateNode=e,Cn(t))}return Nt(t),null;case 5:if($l(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Cn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Nt(t),null}if(e=hn.current,ca(t))bp(t);else{switch(r=_u(Ti.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[me]=t,e[Ie]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(ae(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Cn(t)}}return Nt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Cn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(P(166));if(e=Ti.current,ca(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ee,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[me]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||R0(e.nodeValue,n)),e||dr(t)}else e=_u(e).createTextNode(i),e[me]=t,t.stateNode=e}return Nt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ca(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(P(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[me]=t}else So(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nt(t),r=!1}else r=Rp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(kn(t),t):(kn(t),null)}if(kn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ml(t,t.updateQueue),Nt(t),null;case 4:return ps(),e===null&&im(t.stateNode.containerInfo),Nt(t),null;case 10:return zn(t.type),Nt(t),null;case 19:if(Wt(Gt),r=t.memoizedState,r===null)return Nt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)fa(r,!1);else{if(kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=lu(e),s!==null){for(t.flags|=128,fa(r,!1),e=s.updateQueue,t.updateQueue=e,ml(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Gv(n,e),n=n.sibling;return It(Gt,Gt.current&1|2),t.child}e=e.sibling}r.tail!==null&&fn()>du&&(t.flags|=128,i=!0,fa(r,!1),t.lanes=4194304)}else{if(!i)if(e=lu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ml(t,e),fa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!ct)return Nt(t),null}else 2*fn()-r.renderingStartTime>du&&n!==536870912&&(t.flags|=128,i=!0,fa(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=fn(),t.sibling=null,e=Gt.current,It(Gt,i?e&1|2:e&1),t):(Nt(t),null);case 22:case 23:return kn(t),Pd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),n=t.updateQueue,n!==null&&ml(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Wt(ur),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),zn(Ht),Nt(t),null;case 25:return null;case 30:return null}throw Error(P(156,t.tag))}function Pb(e,t){switch(Md(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(Ht),ps(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return $l(t),null;case 13:if(kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));So()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Wt(Gt),null;case 4:return ps(),null;case 10:return zn(t.type),null;case 22:case 23:return kn(t),Pd(),e!==null&&Wt(ur),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zn(Ht),null;case 25:return null;default:return null}}function GE(e,t){switch(Md(t),t.tag){case 3:zn(Ht),ps();break;case 26:case 27:case 5:$l(t);break;case 4:ps();break;case 13:kn(t);break;case 19:Wt(Gt);break;case 10:zn(t.type);break;case 22:case 23:kn(t),Pd(),e!==null&&Wt(ur);break;case 24:zn(Ht)}}function Co(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Et(t,t.return,l)}}function Pi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Et(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Et(t,t.return,d)}}function FE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Zv(t,n)}catch(i){Et(e,e.return,i)}}}function QE(e,t,n){n.props=pr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Et(e,t,i)}}function Va(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Et(e,t,r)}}function cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Et(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Et(e,t,r)}else n.current=null}function KE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Et(e,e.return,r)}}function vh(e,t,n){try{var i=e.stateNode;iw(i,e.type,n,t),i[Ie]=t}catch(r){Et(e,e.return,r)}}function YE(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qi(e.type)||e.tag===4}function Eh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||YE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ac));else if(i!==4&&(i===27&&Qi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Sf(e,t,n),e=e.sibling;e!==null;)Sf(e,t,n),e=e.sibling}function fu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Qi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}function XE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ae(t,i,n),t[me]=e,t[Ie]=n}catch(s){Et(e,e.return,s)}}var Nn=!1,Ut=!1,Th=!1,Zp=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Ub(e,t){if(e=e.containerInfo,Nf=Su,e=Pv(e),Id(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,p=e,m=null;e:for(;;){for(var _;p!==n||r!==0&&p.nodeType!==3||(l=a+r),p!==s||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Of={focusedElem:e,selectionRange:n},Su=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){switch(t=Xt,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var N=pr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(N,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Et(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Vf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(P(163))}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}}function $E(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ii(e,n),i&4&&Co(5,n);break;case 1:if(ii(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Et(n,n.return,a)}else{var r=pr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Et(n,n.return,a)}}i&64&&FE(n),i&512&&Va(n,n.return);break;case 3:if(ii(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Zv(e,t)}catch(a){Et(n,n.return,a)}}break;case 27:t===null&&i&4&&XE(n);case 26:case 5:ii(e,n),t===null&&i&4&&KE(n),i&512&&Va(n,n.return);break;case 12:ii(e,n);break;case 13:ii(e,n),i&4&&WE(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Qb.bind(null,n),cw(e,n))));break;case 22:if(i=n.memoizedState!==null||Nn,!i){t=t!==null&&t.memoizedState!==null||Ut,r=Nn;var s=Ut;Nn=i,(Ut=t)&&!s?si(e,n,(n.subtreeFlags&8772)!==0):ii(e,n),Nn=r,Ut=s}break;case 30:break;default:ii(e,n)}}function ZE(e){var t=e.alternate;t!==null&&(e.alternate=null,ZE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Td(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var wt=null,be=!1;function Dn(e,t,n){for(n=n.child;n!==null;)JE(e,t,n),n=n.sibling}function JE(e,t,n){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(yo,n)}catch{}switch(n.tag){case 26:Ut||cn(n,t),Dn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ut||cn(n,t);var i=wt,r=be;Qi(n.type)&&(wt=n.stateNode,be=!1),Dn(e,t,n),Ua(n.stateNode),wt=i,be=r;break;case 5:Ut||cn(n,t);case 6:if(i=wt,r=be,wt=null,Dn(e,t,n),wt=i,be=r,wt!==null)if(be)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(n.stateNode)}catch(s){Et(n,t,s)}else try{wt.removeChild(n.stateNode)}catch(s){Et(n,t,s)}break;case 18:wt!==null&&(be?(e=wt,uy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ro(e)):uy(wt,n.stateNode));break;case 4:i=wt,r=be,wt=n.stateNode.containerInfo,be=!0,Dn(e,t,n),wt=i,be=r;break;case 0:case 11:case 14:case 15:Ut||Pi(2,n,t),Ut||Pi(4,n,t),Dn(e,t,n);break;case 1:Ut||(cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&QE(n,t,i)),Dn(e,t,n);break;case 21:Dn(e,t,n);break;case 22:Ut=(i=Ut)||n.memoizedState!==null,Dn(e,t,n),Ut=i;break;default:Dn(e,t,n)}}function WE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ro(e)}catch(n){Et(t,t.return,n)}}function Lb(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Zp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Zp),t;default:throw Error(P(435,e.tag))}}function Sh(e,t){var n=Lb(e);t.forEach(function(i){var r=Kb.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Ne(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(Qi(l.type)){wt=l.stateNode,be=!1;break t}break;case 5:wt=l.stateNode,be=!1;break t;case 3:case 4:wt=l.stateNode.containerInfo,be=!0;break t}l=l.return}if(wt===null)throw Error(P(160));JE(s,a,r),wt=null,be=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)t0(t,e),t=t.sibling}var We=null;function t0(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ne(t,e),Oe(e),i&4&&(Pi(3,e,e.return),Co(3,e),Pi(5,e,e.return));break;case 1:Ne(t,e),Oe(e),i&512&&(Ut||n===null||cn(n,n.return)),i&64&&Nn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=We;if(Ne(t,e),Oe(e),i&512&&(Ut||n===null||cn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Eo]||s[me]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),ae(s,i,n),s[me]=e,$t(s),i=s;break t;case"link":var a=my("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),ae(s,i,n),r.head.appendChild(s);break;case"meta":if(a=my("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),ae(s,i,n),r.head.appendChild(s);break;default:throw Error(P(468,i))}s[me]=e,$t(s),i=s}e.stateNode=i}else gy(r,e.type,e.stateNode);else e.stateNode=dy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?gy(r,e.type,e.stateNode):dy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&vh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ne(t,e),Oe(e),i&512&&(Ut||n===null||cn(n,n.return)),n!==null&&i&4&&vh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ne(t,e),Oe(e),i&512&&(Ut||n===null||cn(n,n.return)),e.flags&32){r=e.stateNode;try{_s(r,"")}catch(_){Et(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,vh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Th=!0);break;case 6:if(Ne(t,e),Oe(e),i&4){if(e.stateNode===null)throw Error(P(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Et(e,e.return,_)}}break;case 3:if(Pl=null,r=We,We=vu(t.containerInfo),Ne(t,e),We=r,Oe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ro(t.containerInfo)}catch(_){Et(e,e.return,_)}Th&&(Th=!1,e0(e));break;case 4:i=We,We=vu(e.stateNode.containerInfo),Ne(t,e),Oe(e),We=i;break;case 12:Ne(t,e),Oe(e);break;case 13:Ne(t,e),Oe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(tm=fn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Sh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Nn,d=Ut;if(Nn=h||r,Ut=d||u,Ne(t,e),Ut=d,Nn=h,Oe(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Nn||Ut||nr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Et(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Et(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Sh(e,n))));break;case 19:Ne(t,e),Oe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Sh(e,i)));break;case 30:break;case 21:break;default:Ne(t,e),Oe(e)}}function Oe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(YE(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var r=n.stateNode,s=Eh(e);fu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(_s(a,""),n.flags&=-33);var l=Eh(e);fu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Eh(e);Sf(e,h,u);break;default:throw Error(P(161))}}catch(d){Et(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function e0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;e0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ii(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$E(e,t.alternate,t),t=t.sibling}function nr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Pi(4,t,t.return),nr(t);break;case 1:cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&QE(t,t.return,n),nr(t);break;case 27:Ua(t.stateNode);case 26:case 5:cn(t,t.return),nr(t);break;case 22:t.memoizedState===null&&nr(t);break;case 30:nr(t);break;default:nr(t)}e=e.sibling}}function si(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:si(r,s,n),Co(4,s);break;case 1:if(si(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Et(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)$v(u[r],l)}catch(h){Et(i,i.return,h)}}n&&a&64&&FE(s),Va(s,s.return);break;case 27:XE(s);case 26:case 5:si(r,s,n),n&&i===null&&a&4&&KE(s),Va(s,s.return);break;case 12:si(r,s,n);break;case 13:si(r,s,n),n&&a&4&&WE(r,s);break;case 22:s.memoizedState===null&&si(r,s,n),Va(s,s.return);break;case 30:break;default:si(r,s,n)}t=t.sibling}}function $d(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&bo(n))}function Zd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&bo(e))}function on(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)n0(e,t,n,i),t=t.sibling}function n0(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:on(e,t,n,i),r&2048&&Co(9,t);break;case 1:on(e,t,n,i);break;case 3:on(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&bo(e)));break;case 12:if(r&2048){on(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Et(t,t.return,u)}}else on(e,t,n,i);break;case 13:on(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?on(e,t,n,i):xa(e,t):s._visibility&2?on(e,t,n,i):(s._visibility|=2,zr(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&$d(a,t);break;case 24:on(e,t,n,i),r&2048&&Zd(t.alternate,t);break;default:on(e,t,n,i)}}function zr(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:zr(s,a,l,u,r),Co(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?zr(s,a,l,u,r):xa(s,a):(d._visibility|=2,zr(s,a,l,u,r)),r&&h&2048&&$d(a.alternate,a);break;case 24:zr(s,a,l,u,r),r&&h&2048&&Zd(a.alternate,a);break;default:zr(s,a,l,u,r)}t=t.sibling}}function xa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:xa(n,i),r&2048&&$d(i.alternate,i);break;case 24:xa(n,i),r&2048&&Zd(i.alternate,i);break;default:xa(n,i)}t=t.sibling}}var _a=8192;function kr(e){if(e.subtreeFlags&_a)for(e=e.child;e!==null;)i0(e),e=e.sibling}function i0(e){switch(e.tag){case 26:kr(e),e.flags&_a&&e.memoizedState!==null&&Aw(We,e.memoizedState,e.memoizedProps);break;case 5:kr(e);break;case 3:case 4:var t=We;We=vu(e.stateNode.containerInfo),kr(e),We=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=_a,_a=16777216,kr(e),_a=t):kr(e));break;default:kr(e)}}function r0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function da(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,a0(i,e)}r0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)s0(e),e=e.sibling}function s0(e){switch(e.tag){case 0:case 11:case 15:da(e),e.flags&2048&&Pi(9,e,e.return);break;case 3:da(e);break;case 12:da(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xl(e)):da(e);break;default:da(e)}}function xl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,a0(i,e)}r0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Pi(8,t,t.return),xl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,xl(t));break;default:xl(t)}e=e.sibling}}function a0(e,t){for(;Xt!==null;){var n=Xt;switch(n.tag){case 0:case 11:case 15:Pi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:bo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Xt=i;else t:for(n=e;Xt!==null;){i=Xt;var r=i.sibling,s=i.return;if(ZE(i),i===n){Xt=null;break t}if(r!==null){r.return=s,Xt=r;break t}Xt=s}}}var zb={getCacheForType:function(e){var t=ge(Ht),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},jb=typeof WeakMap=="function"?WeakMap:Map,mt=0,Tt=null,nt=null,lt=0,dt=0,Me=null,_i=!1,Ls=!1,Jd=!1,Fn=0,kt=0,Ui=0,cr=0,Wd=0,Ye=0,As=0,ka=null,we=null,Af=!1,tm=0,du=1/0,mu=null,bi=null,re=0,wi=null,bs=null,hs=0,bf=0,wf=null,o0=null,Pa=0,Rf=null;function Pe(){if(mt&2&&lt!==0)return lt&-lt;if(K.T!==null){var e=vs;return e!==0?e:nm()}return _v()}function l0(){Ye===0&&(Ye=!(lt&536870912)||ct?mv():536870912);var e=Xe.current;return e!==null&&(e.flags|=32),Ye}function Ue(e,t,n){(e===Tt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(ws(e,0),vi(e,lt,Ye,!1)),vo(e,n),(!(mt&2)||e!==Tt)&&(e===Tt&&(!(mt&2)&&(cr|=n),kt===4&&vi(e,lt,Ye,!1)),bn(e))}function u0(e,t,n){if(mt&6)throw Error(P(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||_o(e,t),r=i?Hb(e,t):Ah(e,t,!0),s=i;do{if(r===0){Ls&&!i&&vi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Bb(n)){r=Ah(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=ka;var u=l.current.memoizedState.isDehydrated;if(u&&(ws(l,a).flags|=256),a=Ah(l,a,!1),a!==2){if(Jd&&!u){l.errorRecoveryDisabledLanes|=s,cr|=s,r=4;break t}s=we,we=r,s!==null&&(we===null?we=s:we.push.apply(we,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ws(e,0),vi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(P(345));case 4:if((t&4194048)!==t)break;case 6:vi(i,t,Ye,!_i);break t;case 2:we=null;break;case 3:case 5:break;default:throw Error(P(329))}if((t&62914560)===t&&(r=tm+300-fn(),10<r)){if(vi(i,t,Ye,!_i),Ku(i,0,!0)!==0)break t;i.timeoutHandle=C0(Jp.bind(null,i,n,we,mu,Af,t,Ye,cr,As,_i,s,2,-0,0),r);break t}Jp(i,n,we,mu,Af,t,Ye,cr,As,_i,s,0,-0,0)}}break}while(!0);bn(e)}function Jp(e,t,n,i,r,s,a,l,u,h,d,p,m,_){if(e.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(to={stylesheets:null,count:0,unsuspend:Sw},i0(t),p=bw(),p!==null)){e.cancelPendingCommit=p(ty.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),vi(e,s,a,!h);return}ty(e,t,s,n,i,r,a,l,u)}function Bb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Le(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vi(e,t,n,i){t&=~Wd,t&=~cr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-ke(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&pv(e,n,t)}function ic(){return mt&6?!0:(Do(0),!1)}function em(){if(nt!==null){if(dt===0)var e=nt.return;else e=nt,xn=wr=null,Bd(e),cs=null,Za=0,e=nt;for(;e!==null;)GE(e.alternate,e),e=e.return;nt=null}}function ws(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,sw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),em(),Tt=e,nt=n=Ln(e.current,null),lt=t,dt=0,Me=null,_i=!1,Ls=_o(e,t),Jd=!1,As=Ye=Wd=cr=Ui=kt=0,we=ka=null,Af=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-ke(i),s=1<<r;t|=e[r],i&=~s}return Fn=t,Zu(),n}function c0(e,t){tt=null,K.H=ou,t===wo||t===Wu?(t=Np(),dt=3):t===Yv?(t=Np(),dt=4):dt=t===LE?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Me=t,nt===null&&(kt=1,cu(e,Fe(t,e.current)))}function h0(){var e=K.H;return K.H=ou,e===null?ou:e}function f0(){var e=K.A;return K.A=zb,e}function If(){kt=4,_i||(lt&4194048)!==lt&&Xe.current!==null||(Ls=!0),!(Ui&134217727)&&!(cr&134217727)||Tt===null||vi(Tt,lt,Ye,!1)}function Ah(e,t,n){var i=mt;mt|=2;var r=h0(),s=f0();(Tt!==e||lt!==t)&&(mu=null,ws(e,t)),t=!1;var a=kt;t:do try{if(dt!==0&&nt!==null){var l=nt,u=Me;switch(dt){case 8:em(),a=6;break t;case 3:case 2:case 9:case 6:Xe.current===null&&(t=!0);var h=dt;if(dt=0,Me=null,ns(e,l,u,h),n&&Ls){a=0;break t}break;default:h=dt,dt=0,Me=null,ns(e,l,u,h)}}qb(),a=kt;break}catch(d){c0(e,d)}while(!0);return t&&e.shellSuspendCounter++,xn=wr=null,mt=i,K.H=r,K.A=s,nt===null&&(Tt=null,lt=0,Zu()),a}function qb(){for(;nt!==null;)d0(nt)}function Hb(e,t){var n=mt;mt|=2;var i=h0(),r=f0();Tt!==e||lt!==t?(mu=null,du=fn()+500,ws(e,t)):Ls=_o(e,t);t:do try{if(dt!==0&&nt!==null){t=nt;var s=Me;e:switch(dt){case 1:dt=0,Me=null,ns(e,t,s,1);break;case 2:case 9:if(Dp(s)){dt=0,Me=null,Wp(t);break}t=function(){dt!==2&&dt!==9||Tt!==e||(dt=7),bn(e)},s.then(t,t);break t;case 3:dt=7;break t;case 4:dt=5;break t;case 7:Dp(s)?(dt=0,Me=null,Wp(t)):(dt=0,Me=null,ns(e,t,s,7));break;case 5:var a=null;switch(nt.tag){case 26:a=nt.memoizedState;case 5:case 27:var l=nt;if(!a||M0(a)){dt=0,Me=null;var u=l.sibling;if(u!==null)nt=u;else{var h=l.return;h!==null?(nt=h,rc(h)):nt=null}break e}}dt=0,Me=null,ns(e,t,s,5);break;case 6:dt=0,Me=null,ns(e,t,s,6);break;case 8:em(),kt=6;break t;default:throw Error(P(462))}}Gb();break}catch(d){c0(e,d)}while(!0);return xn=wr=null,K.H=i,K.A=r,mt=n,nt!==null?0:(Tt=null,lt=0,Zu(),kt)}function Gb(){for(;nt!==null&&!f1();)d0(nt)}function d0(e){var t=HE(e.alternate,e,Fn);e.memoizedProps=e.pendingProps,t===null?rc(e):nt=t}function Wp(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qp(n,t,t.pendingProps,t.type,void 0,lt);break;case 11:t=Qp(n,t,t.pendingProps,t.type.render,t.ref,lt);break;case 5:Bd(t);default:GE(n,t),t=nt=Gv(t,Fn),t=HE(n,t,Fn)}e.memoizedProps=e.pendingProps,t===null?rc(e):nt=t}function ns(e,t,n,i){xn=wr=null,Bd(t),cs=null,Za=0;var r=t.return;try{if(Vb(e,r,t,n,lt)){kt=1,cu(e,Fe(n,e.current)),nt=null;return}}catch(s){if(r!==null)throw nt=r,s;kt=1,cu(e,Fe(n,e.current)),nt=null;return}t.flags&32768?(ct||i===1?e=!0:Ls||lt&536870912?e=!1:(_i=e=!0,(i===2||i===9||i===3||i===6)&&(i=Xe.current,i!==null&&i.tag===13&&(i.flags|=16384))),m0(t,e)):rc(t)}function rc(e){var t=e;do{if(t.flags&32768){m0(t,_i);return}e=t.return;var n=kb(t.alternate,t,Fn);if(n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);kt===0&&(kt=5)}function m0(e,t){do{var n=Pb(e.alternate,e);if(n!==null){n.flags&=32767,nt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){nt=e;return}nt=e=n}while(e!==null);kt=6,nt=null}function ty(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do sc();while(re!==0);if(mt&6)throw Error(P(327));if(t!==null){if(t===e.current)throw Error(P(177));if(s=t.lanes|t.childLanes,s|=Cd,S1(e,n,s,a,l,u),e===Tt&&(nt=Tt=null,lt=0),bs=t,wi=e,hs=n,bf=s,wf=r,o0=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Yb(Zl,function(){return v0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=K.T,K.T=null,r=ht.p,ht.p=2,a=mt,mt|=4;try{Ub(e,t,n)}finally{mt=a,ht.p=r,K.T=i}}re=1,g0(),p0(),y0()}}function g0(){if(re===1){re=0;var e=wi,t=bs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=K.T,K.T=null;var i=ht.p;ht.p=2;var r=mt;mt|=4;try{t0(t,e);var s=Of,a=Pv(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&kv(l.ownerDocument.documentElement,l)){if(u!==null&&Id(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var _=m.getSelection(),N=l.textContent.length,V=Math.min(u.start,N),x=u.end===void 0?V:Math.min(u.end,N);!_.extend&&V>x&&(a=x,x=V,V=a);var A=Tp(l,V),E=Tp(l,x);if(A&&E&&(_.rangeCount!==1||_.anchorNode!==A.node||_.anchorOffset!==A.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var w=p.createRange();w.setStart(A.node,A.offset),_.removeAllRanges(),V>x?(_.addRange(w),_.extend(E.node,E.offset)):(w.setEnd(E.node,E.offset),_.addRange(w))}}}}for(p=[],_=l;_=_.parentNode;)_.nodeType===1&&p.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var D=p[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Su=!!Nf,Of=Nf=null}finally{mt=r,ht.p=i,K.T=n}}e.current=t,re=2}}function p0(){if(re===2){re=0;var e=wi,t=bs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=K.T,K.T=null;var i=ht.p;ht.p=2;var r=mt;mt|=4;try{$E(e,t.alternate,t)}finally{mt=r,ht.p=i,K.T=n}}re=3}}function y0(){if(re===4||re===3){re=0,d1();var e=wi,t=bs,n=hs,i=o0;t.subtreeFlags&10256||t.flags&10256?re=5:(re=0,bs=wi=null,_0(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(bi=null),Ed(n),t=t.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(yo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=K.T,r=ht.p,ht.p=2,K.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{K.T=t,ht.p=r}}hs&3&&sc(),bn(e),r=e.pendingLanes,n&4194090&&r&42?e===Rf?Pa++:(Pa=0,Rf=e):Pa=0,Do(0)}}function _0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,bo(t)))}function sc(e){return g0(),p0(),y0(),v0()}function v0(){if(re!==5)return!1;var e=wi,t=bf;bf=0;var n=Ed(hs),i=K.T,r=ht.p;try{ht.p=32>n?32:n,K.T=null,n=wf,wf=null;var s=wi,a=hs;if(re=0,bs=wi=null,hs=0,mt&6)throw Error(P(331));var l=mt;if(mt|=4,s0(s.current),n0(s,s.current,a,n),mt=l,Do(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(yo,s)}catch{}return!0}finally{ht.p=r,K.T=i,_0(e,t)}}function ey(e,t,n){t=Fe(n,t),t=vf(e.stateNode,t,2),e=Ai(e,t,2),e!==null&&(vo(e,2),bn(e))}function Et(e,t,n){if(e.tag===3)ey(e,e,n);else for(;t!==null;){if(t.tag===3){ey(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bi===null||!bi.has(i))){e=Fe(n,e),n=PE(2),i=Ai(t,n,2),i!==null&&(UE(n,i,t,e),vo(i,2),bn(i));break}}t=t.return}}function bh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new jb;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Jd=!0,r.add(n),e=Fb.bind(null,e,t,n),t.then(e,e))}function Fb(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Tt===e&&(lt&n)===n&&(kt===4||kt===3&&(lt&62914560)===lt&&300>fn()-tm?!(mt&2)&&ws(e,0):Wd|=n,As===lt&&(As=0)),bn(e)}function E0(e,t){t===0&&(t=gv()),e=Us(e,t),e!==null&&(vo(e,t),bn(e))}function Qb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),E0(e,n)}function Kb(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(t),E0(e,n)}function Yb(e,t){return _d(e,t)}var gu=null,jr=null,Cf=!1,pu=!1,wh=!1,hr=0;function bn(e){e!==jr&&e.next===null&&(jr===null?gu=jr=e:jr=jr.next=e),pu=!0,Cf||(Cf=!0,$b())}function Do(e,t){if(!wh&&pu){wh=!0;do for(var n=!1,i=gu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-ke(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,ny(i,s))}else s=lt,s=Ku(i,i===Tt?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||_o(i,s)||(n=!0,ny(i,s));i=i.next}while(n);wh=!1}}function Xb(){T0()}function T0(){pu=Cf=!1;var e=0;hr!==0&&(rw()&&(e=hr),hr=0);for(var t=fn(),n=null,i=gu;i!==null;){var r=i.next,s=S0(i,t);s===0?(i.next=null,n===null?gu=r:n.next=r,r===null&&(jr=n)):(n=i,(e!==0||s&3)&&(pu=!0)),i=r}Do(e)}function S0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-ke(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=T1(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Tt,n=lt,n=Ku(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Zc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||_o(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Zc(i),Ed(n)){case 2:case 8:n=fv;break;case 32:n=Zl;break;case 268435456:n=dv;break;default:n=Zl}return i=A0.bind(null,e),n=_d(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Zc(i),e.callbackPriority=2,e.callbackNode=null,2}function A0(e,t){if(re!==0&&re!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var i=lt;return i=Ku(e,e===Tt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(u0(e,i,t),S0(e,fn()),e.callbackNode!=null&&e.callbackNode===n?A0.bind(null,e):null)}function ny(e,t){if(sc())return null;u0(e,t,!0)}function $b(){aw(function(){mt&6?_d(hv,Xb):T0()})}function nm(){return hr===0&&(hr=mv()),hr}function iy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rl(""+e)}function ry(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Zb(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=iy((r[Ie]||null).action),a=i.submitter;a&&(t=(t=a[Ie]||null)?iy(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Yu("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(hr!==0){var u=a?ry(r,a):new FormData(r);yf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?ry(r,a):new FormData(r),yf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Rh=0;Rh<sf.length;Rh++){var Ih=sf[Rh],Jb=Ih.toLowerCase(),Wb=Ih[0].toUpperCase()+Ih.slice(1);sn(Jb,"on"+Wb)}sn(Lv,"onAnimationEnd");sn(zv,"onAnimationIteration");sn(jv,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(pb,"onTransitionRun");sn(yb,"onTransitionStart");sn(_b,"onTransitionCancel");sn(Bv,"onTransitionEnd");ys("onMouseEnter",["mouseout","mouseover"]);ys("onMouseLeave",["mouseout","mouseover"]);ys("onPointerEnter",["pointerout","pointerover"]);ys("onPointerLeave",["pointerout","pointerover"]);Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ja));function b0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){uu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){uu(d)}r.currentTarget=null,s=u}}}}function et(e,t){var n=t[Zh];n===void 0&&(n=t[Zh]=new Set);var i=e+"__bubble";n.has(i)||(w0(t,e,2,!1),n.add(i))}function Ch(e,t,n){var i=0;t&&(i|=4),w0(n,e,i,t)}var gl="_reactListening"+Math.random().toString(36).slice(2);function im(e){if(!e[gl]){e[gl]=!0,vv.forEach(function(n){n!=="selectionchange"&&(tw.has(n)||Ch(n,!1,e),Ch(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gl]||(t[gl]=!0,Ch("selectionchange",!1,t))}}function w0(e,t,n,i){switch(U0(t)){case 2:var r=Iw;break;case 8:r=Cw;break;default:r=om}n=r.bind(null,t,n,e),r=void 0,!ef||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Dh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Kr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}Iv(function(){var h=s,d=Ad(n),p=[];t:{var m=qv.get(e);if(m!==void 0){var _=Yu,N=e;switch(e){case"keypress":if(Cl(n)===0)break t;case"keydown":case"keyup":_=Y1;break;case"focusin":N="focus",_=sh;break;case"focusout":N="blur",_=sh;break;case"beforeblur":case"afterblur":_=sh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Z1;break;case Lv:case zv:case jv:_=z1;break;case Bv:_=W1;break;case"scroll":case"scrollend":_=x1;break;case"wheel":_=eb;break;case"copy":case"cut":case"paste":_=B1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=dp;break;case"toggle":case"beforetoggle":_=ib}var V=(t&4)!==0,x=!V&&(e==="scroll"||e==="scrollend"),A=V?m!==null?m+"Capture":null:m;V=[];for(var E=h,w;E!==null;){var D=E;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||A===null||(D=Qa(E,A),D!=null&&V.push(Wa(E,D,w))),x)break;E=E.return}0<V.length&&(m=new _(m,N,null,n,d),p.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==tf&&(N=n.relatedTarget||n.fromElement)&&(Kr(N)||N[ks]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=h,N=N?Kr(N):null,N!==null&&(x=po(N),V=N.tag,N!==x||V!==5&&V!==27&&V!==6)&&(N=null)):(_=null,N=h),_!==N)){if(V=hp,D="onMouseLeave",A="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(V=dp,D="onPointerLeave",A="onPointerEnter",E="pointer"),x=_==null?m:ya(_),w=N==null?m:ya(N),m=new V(D,E+"leave",_,n,d),m.target=x,m.relatedTarget=w,D=null,Kr(d)===h&&(V=new V(A,E+"enter",N,n,d),V.target=w,V.relatedTarget=x,D=V),x=D,_&&N)e:{for(V=_,A=N,E=0,w=V;w;w=Pr(w))E++;for(w=0,D=A;D;D=Pr(D))w++;for(;0<E-w;)V=Pr(V),E--;for(;0<w-E;)A=Pr(A),w--;for(;E--;){if(V===A||A!==null&&V===A.alternate)break e;V=Pr(V),A=Pr(A)}V=null}else V=null;_!==null&&sy(p,m,_,V,!1),N!==null&&x!==null&&sy(p,x,N,V,!0)}}t:{if(m=h?ya(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=yp;else if(pp(m))if(Vv)L=db;else{L=hb;var B=cb}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Sd(h.elementType)&&(L=yp):L=fb;if(L&&(L=L(e,h))){Mv(p,L,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Wh(m,"number",m.value)}switch(B=h?ya(h):window,e){case"focusin":(pp(B)||B.contentEditable==="true")&&($r=B,nf=h,Ra=null);break;case"focusout":Ra=nf=$r=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Sp(p,n,d);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":Sp(p,n,d)}var T;if(Rd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Xr?Nv(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Dv&&n.locale!=="ko"&&(Xr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Xr&&(T=Cv()):(yi=d,bd="value"in yi?yi.value:yi.textContent,Xr=!0)),B=yu(h,y),0<B.length&&(y=new fp(y,e,null,n,d),p.push({event:y,listeners:B}),T?y.data=T:(T=Ov(n),T!==null&&(y.data=T)))),(T=sb?ab(e,n):ob(e,n))&&(y=yu(h,"onBeforeInput"),0<y.length&&(B=new fp("onBeforeInput","beforeinput",null,n,d),p.push({event:B,listeners:y}),B.data=T)),Zb(p,e,h,n,d)}b0(p,t)})}function Wa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Qa(e,n),r!=null&&i.unshift(Wa(e,r,s)),r=Qa(e,t),r!=null&&i.push(Wa(e,r,s))),e.tag===3)return i;e=e.return}return[]}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Qa(n,s),h!=null&&a.unshift(Wa(n,h,u))):r||(h=Qa(n,s),h!=null&&a.push(Wa(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ew=/\r\n?/g,nw=/\u0000|\uFFFD/g;function ay(e){return(typeof e=="string"?e:""+e).replace(ew,`
`).replace(nw,"")}function R0(e,t){return t=ay(t),ay(e)===t}function ac(){}function pt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||_s(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&_s(e,""+i);break;case"className":ll(e,"class",i);break;case"tabIndex":ll(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(e,n,i);break;case"style":Rv(e,i,s);break;case"data":if(t!=="object"){ll(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Rl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&pt(e,t,"name",r.name,r,null),pt(e,t,"formEncType",r.formEncType,r,null),pt(e,t,"formMethod",r.formMethod,r,null),pt(e,t,"formTarget",r.formTarget,r,null)):(pt(e,t,"encType",r.encType,r,null),pt(e,t,"method",r.method,r,null),pt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Rl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=ac);break;case"onScroll":i!=null&&et("scroll",e);break;case"onScrollEnd":i!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Rl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":et("beforetoggle",e),et("toggle",e),wl(e,"popover",i);break;case"xlinkActuate":In(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":In(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":In(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":In(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":In(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":In(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":In(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":In(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":In(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":wl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=M1.get(n)||n,wl(e,n,i))}}function Df(e,t,n,i,r,s){switch(n){case"style":Rv(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"children":typeof i=="string"?_s(e,i):(typeof i=="number"||typeof i=="bigint")&&_s(e,""+i);break;case"onScroll":i!=null&&et("scroll",e);break;case"onScrollEnd":i!=null&&et("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ac);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ev.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ie]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):wl(e,n,i)}}}function ae(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:pt(e,t,s,a,n,null)}}r&&pt(e,t,"srcSet",n.srcSet,n,null),i&&pt(e,t,"src",n.src,n,null);return;case"input":et("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(P(137,t));break;default:pt(e,t,i,d,n,null)}}Av(e,s,l,u,h,a,r,!1),Jl(e);return;case"select":et("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:pt(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?ss(e,!!i,t,!1):n!=null&&ss(e,!!i,n,!0);return;case"textarea":et("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:pt(e,t,a,l,n,null)}wv(e,i,r,s),Jl(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:pt(e,t,u,i,n,null)}return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(i=0;i<Ja.length;i++)et(Ja[i],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:pt(e,t,h,i,n,null)}return;default:if(Sd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Df(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&pt(e,t,l,i,n,null))}function iw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var p=n[_];if(n.hasOwnProperty(_)&&p!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(_)||pt(e,t,_,null,i,p)}}for(var m in i){var _=i[m];if(p=n[m],i.hasOwnProperty(m)&&(_!=null||p!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,t));break;default:_!==p&&pt(e,t,m,_,i,p)}}Jh(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||pt(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&pt(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?ss(e,!!n,m,!1):!!i!=!!n&&(t!=null?ss(e,!!n,t,!0):ss(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:pt(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(P(91));break;default:r!==s&&pt(e,t,a,r,i,s)}bv(e,m,_);return;case"option":for(var N in n)if(m=n[N],n.hasOwnProperty(N)&&m!=null&&!i.hasOwnProperty(N))switch(N){case"selected":e.selected=!1;break;default:pt(e,t,N,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pt(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&pt(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,t));break;default:pt(e,t,h,m,i,_)}return;default:if(Sd(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!i.hasOwnProperty(x)&&Df(e,t,x,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||Df(e,t,d,m,i,_);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&pt(e,t,A,null,i,m);for(p in i)m=i[p],_=n[p],!i.hasOwnProperty(p)||m===_||m==null&&_==null||pt(e,t,p,m,i,_)}var Nf=null,Of=null;function _u(e){return e.nodeType===9?e:e.ownerDocument}function oy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Mf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nh=null;function rw(){var e=window.event;return e&&e.type==="popstate"?e===Nh?!1:(Nh=e,!0):(Nh=null,!1)}var C0=typeof setTimeout=="function"?setTimeout:void 0,sw=typeof clearTimeout=="function"?clearTimeout:void 0,ly=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof ly<"u"?function(e){return ly.resolve(null).then(e).catch(ow)}:C0;function ow(e){setTimeout(function(){throw e})}function Qi(e){return e==="head"}function uy(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&Ua(a.documentElement),n&2&&Ua(a.body),n&4)for(n=a.head,Ua(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Eo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),ro(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);ro(t)}function Vf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vf(n),Td(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function lw(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Eo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=rn(e.nextSibling),e===null)break}return null}function uw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=rn(e.nextSibling),e===null))return null;return e}function xf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function cw(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var kf=null;function cy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function D0(e,t,n){switch(t=_u(n),e){case"html":if(e=t.documentElement,!e)throw Error(P(452));return e;case"head":if(e=t.head,!e)throw Error(P(453));return e;case"body":if(e=t.body,!e)throw Error(P(454));return e;default:throw Error(P(451))}}function Ua(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Td(e)}var $e=new Map,hy=new Set;function vu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zn=ht.d;ht.d={f:hw,r:fw,D:dw,C:mw,L:gw,m:pw,X:_w,S:yw,M:vw};function hw(){var e=Zn.f(),t=ic();return e||t}function fw(e){var t=Ps(e);t!==null&&t.tag===5&&t.type==="form"?SE(t):Zn.r(e)}var zs=typeof document>"u"?null:document;function N0(e,t,n){var i=zs;if(i&&typeof t=="string"&&t){var r=Ge(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),hy.has(r)||(hy.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),ae(t,"link",e),$t(t),i.head.appendChild(t)))}}function dw(e){Zn.D(e),N0("dns-prefetch",e,null)}function mw(e,t){Zn.C(e,t),N0("preconnect",e,t)}function gw(e,t,n){Zn.L(e,t,n);var i=zs;if(i&&e&&t){var r='link[rel="preload"][as="'+Ge(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Ge(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Ge(n.imageSizes)+'"]')):r+='[href="'+Ge(e)+'"]';var s=r;switch(t){case"style":s=Rs(e);break;case"script":s=js(e)}$e.has(s)||(e=bt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),$e.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(No(s))||t==="script"&&i.querySelector(Oo(s))||(t=i.createElement("link"),ae(t,"link",e),$t(t),i.head.appendChild(t)))}}function pw(e,t){Zn.m(e,t);var n=zs;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Ge(i)+'"][href="'+Ge(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=js(e)}if(!$e.has(s)&&(e=bt({rel:"modulepreload",href:e},t),$e.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Oo(s)))return}i=n.createElement("link"),ae(i,"link",e),$t(i),n.head.appendChild(i)}}}function yw(e,t,n){Zn.S(e,t,n);var i=zs;if(i&&e){var r=rs(i).hoistableStyles,s=Rs(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(No(s)))l.loading=5;else{e=bt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$e.get(s))&&rm(e,n);var u=a=i.createElement("link");$t(u),ae(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,kl(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function _w(e,t){Zn.X(e,t);var n=zs;if(n&&e){var i=rs(n).hoistableScripts,r=js(e),s=i.get(r);s||(s=n.querySelector(Oo(r)),s||(e=bt({src:e,async:!0},t),(t=$e.get(r))&&sm(e,t),s=n.createElement("script"),$t(s),ae(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function vw(e,t){Zn.M(e,t);var n=zs;if(n&&e){var i=rs(n).hoistableScripts,r=js(e),s=i.get(r);s||(s=n.querySelector(Oo(r)),s||(e=bt({src:e,async:!0,type:"module"},t),(t=$e.get(r))&&sm(e,t),s=n.createElement("script"),$t(s),ae(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function fy(e,t,n,i){var r=(r=Ti.current)?vu(r):null;if(!r)throw Error(P(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Rs(n.href),n=rs(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Rs(n.href);var s=rs(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(No(e)))&&!s._p&&(a.instance=s,a.state.loading=5),$e.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$e.set(e,n),s||Ew(r,e,n,a.state))),t&&i===null)throw Error(P(528,""));return a}if(t&&i!==null)throw Error(P(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=js(n),n=rs(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,e))}}function Rs(e){return'href="'+Ge(e)+'"'}function No(e){return'link[rel="stylesheet"]['+e+"]"}function O0(e){return bt({},e,{"data-precedence":e.precedence,precedence:null})}function Ew(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ae(t,"link",n),$t(t),e.head.appendChild(t))}function js(e){return'[src="'+Ge(e)+'"]'}function Oo(e){return"script[async]"+e}function dy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Ge(n.href)+'"]');if(i)return t.instance=i,$t(i),i;var r=bt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),$t(i),ae(i,"style",r),kl(i,n.precedence,e),t.instance=i;case"stylesheet":r=Rs(n.href);var s=e.querySelector(No(r));if(s)return t.state.loading|=4,t.instance=s,$t(s),s;i=O0(n),(r=$e.get(r))&&rm(i,r),s=(e.ownerDocument||e).createElement("link"),$t(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ae(s,"link",i),t.state.loading|=4,kl(s,n.precedence,e),t.instance=s;case"script":return s=js(n.src),(r=e.querySelector(Oo(s)))?(t.instance=r,$t(r),r):(i=n,(r=$e.get(s))&&(i=bt({},n),sm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),$t(r),ae(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(P(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,kl(i,n.precedence,e));return t.instance}function kl(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function rm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Pl=null;function my(e,t,n){if(Pl===null){var i=new Map,r=Pl=new Map;r.set(n,i)}else r=Pl,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Eo]||s[me]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function gy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Tw(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function M0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var to=null;function Sw(){}function Aw(e,t,n){if(to===null)throw Error(P(475));var i=to;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Rs(n.href),s=e.querySelector(No(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Eu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,$t(s);return}s=e.ownerDocument||e,n=O0(n),(r=$e.get(r))&&rm(n,r),s=s.createElement("link"),$t(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ae(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Eu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function bw(){if(to===null)throw Error(P(475));var e=to;return e.stylesheets&&e.count===0&&Pf(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Pf(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Eu(){if(this.count--,this.count===0){if(this.stylesheets)Pf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tu=null;function Pf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tu=new Map,t.forEach(ww,e),Tu=null,Eu.call(e))}function ww(e,t){if(!(t.state.loading&4)){var n=Tu.get(e);if(n)var i=n.get(null);else{n=new Map,Tu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Eu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var eo={$$typeof:On,Provider:null,Consumer:null,_currentValue:sr,_currentValue2:sr,_threadCount:0};function Rw(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jc(0),this.hiddenUpdates=Jc(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function V0(e,t,n,i,r,s,a,l,u,h,d,p){return e=new Rw(e,t,n,a,l,u,h,p),t=1,s===!0&&(t|=24),s=Ve(3,null,null,t),e.current=s,s.stateNode=e,t=Vd(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},kd(s),e}function x0(e){return e?(e=Wr,e):Wr}function k0(e,t,n,i,r,s){r=x0(r),i.context===null?i.context=r:i.pendingContext=r,i=Si(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ai(e,i,t),n!==null&&(Ue(n,e,t),Da(n,e,t))}function py(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function am(e,t){py(e,t),(e=e.alternate)&&py(e,t)}function P0(e){if(e.tag===13){var t=Us(e,67108864);t!==null&&Ue(t,e,67108864),am(e,67108864)}}var Su=!0;function Iw(e,t,n,i){var r=K.T;K.T=null;var s=ht.p;try{ht.p=2,om(e,t,n,i)}finally{ht.p=s,K.T=r}}function Cw(e,t,n,i){var r=K.T;K.T=null;var s=ht.p;try{ht.p=8,om(e,t,n,i)}finally{ht.p=s,K.T=r}}function om(e,t,n,i){if(Su){var r=Uf(i);if(r===null)Dh(e,t,i,Au,n),yy(e,i);else if(Nw(r,e,t,n,i))i.stopPropagation();else if(yy(e,i),t&4&&-1<Dw.indexOf(e)){for(;r!==null;){var s=Ps(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=tr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-ke(a);l.entanglements[1]|=u,a&=~u}bn(s),!(mt&6)&&(du=fn()+500,Do(0))}}break;case 13:l=Us(s,2),l!==null&&Ue(l,s,2),ic(),am(s,2)}if(s=Uf(i),s===null&&Dh(e,t,i,Au,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Dh(e,t,i,null,n)}}function Uf(e){return e=Ad(e),lm(e)}var Au=null;function lm(e){if(Au=null,e=Kr(e),e!==null){var t=po(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=ov(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Au=e,null}function U0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(m1()){case hv:return 2;case fv:return 8;case Zl:case g1:return 32;case dv:return 268435456;default:return 32}default:return 32}}var Lf=!1,Ri=null,Ii=null,Ci=null,no=new Map,io=new Map,hi=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yy(e,t){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":no.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(t.pointerId)}}function ma(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Ps(t),t!==null&&P0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Nw(e,t,n,i,r){switch(t){case"focusin":return Ri=ma(Ri,e,t,n,i,r),!0;case"dragenter":return Ii=ma(Ii,e,t,n,i,r),!0;case"mouseover":return Ci=ma(Ci,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return no.set(s,ma(no.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,io.set(s,ma(io.get(s)||null,e,t,n,i,r)),!0}return!1}function L0(e){var t=Kr(e.target);if(t!==null){var n=po(t);if(n!==null){if(t=n.tag,t===13){if(t=ov(n),t!==null){e.blockedOn=t,A1(e.priority,function(){if(n.tag===13){var i=Pe();i=vd(i);var r=Us(n,i);r!==null&&Ue(r,n,i),am(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Uf(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);tf=i,n.target.dispatchEvent(i),tf=null}else return t=Ps(n),t!==null&&P0(t),e.blockedOn=n,!1;t.shift()}return!0}function _y(e,t,n){Ul(e)&&n.delete(t)}function Ow(){Lf=!1,Ri!==null&&Ul(Ri)&&(Ri=null),Ii!==null&&Ul(Ii)&&(Ii=null),Ci!==null&&Ul(Ci)&&(Ci=null),no.forEach(_y),io.forEach(_y)}function pl(e,t){e.blockedOn===t&&(e.blockedOn=null,Lf||(Lf=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,Ow)))}var yl=null;function vy(e){yl!==e&&(yl=e,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,function(){yl===e&&(yl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(lm(i||n)===null)continue;break}var s=Ps(n);s!==null&&(e.splice(t,3),t-=3,yf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function ro(e){function t(u){return pl(u,e)}Ri!==null&&pl(Ri,e),Ii!==null&&pl(Ii,e),Ci!==null&&pl(Ci,e),no.forEach(t),io.forEach(t);for(var n=0;n<hi.length;n++){var i=hi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<hi.length&&(n=hi[0],n.blockedOn===null);)L0(n),n.blockedOn===null&&hi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ie]||null;if(typeof s=="function")a||vy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ie]||null)l=a.formAction;else if(lm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),vy(n)}}}function um(e){this._internalRoot=e}oc.prototype.render=um.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));var n=t.current,i=Pe();k0(n,i,e,t,null,null)};oc.prototype.unmount=um.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;k0(e.current,2,null,e,null,null),ic(),t[ks]=null}};function oc(e){this._internalRoot=e}oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_v();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hi.length&&t!==0&&t<hi[n].priority;n++);hi.splice(n,0,e),n===0&&L0(e)}};var Ey=sv.version;if(Ey!=="19.1.1")throw Error(P(527,Ey,"19.1.1"));ht.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=o1(t),e=e!==null?lv(e):null,e=e===null?null:e.stateNode,e};var Mw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{yo=_l.inject(Mw),xe=_l}catch{}}Fu.createRoot=function(e,t){if(!av(e))throw Error(P(299));var n=!1,i="",r=VE,s=xE,a=kE,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=V0(e,1,!1,null,null,n,i,r,s,a,l,null),e[ks]=t.current,im(e),new um(t)};Fu.hydrateRoot=function(e,t,n){if(!av(e))throw Error(P(299));var i=!1,r="",s=VE,a=xE,l=kE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=V0(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=x0(null),n=t.current,i=Pe(),i=vd(i),r=Si(i),r.callback=null,Ai(n,r,i),n=i,t.current.lanes=n,vo(t,n),bn(t),e[ks]=t.current,im(e),new oc(t)};Fu.version="19.1.1";function z0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z0)}catch(e){console.error(e)}}z0(),W_.exports=Fu;var Vw=W_.exports;const xw=()=>{};var Ty={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},kw=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},B0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[p],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(j0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):kw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const p=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||p==null)throw new Pw;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),p!==64){const N=h<<6&192|p;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(e){const t=j0(e);return B0.encodeByteArray(t,!0)},bu=function(e){return Uw(e).replace(/\./g,"")},q0=function(e){try{return B0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=()=>Lw().__FIREBASE_DEFAULTS__,jw=()=>{if(typeof process>"u"||typeof Ty>"u")return;const e=Ty.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Bw=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&q0(e[1]);return t&&JSON.parse(t)},lc=()=>{try{return xw()||zw()||jw()||Bw()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},H0=e=>{var t,n;return(n=(t=lc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},qw=e=>{const t=H0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},G0=()=>{var e;return(e=lc())==null?void 0:e.config},F0=e=>{var t;return(t=lc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[bu(JSON.stringify(n)),bu(JSON.stringify(a)),""].join(".")}const La={};function Fw(){const e={prod:[],emulator:[]};for(const t of Object.keys(La))La[t]?e.emulator.push(t):e.prod.push(t);return e}function Qw(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Sy=!1;function K0(e,t){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||La[e]===t||La[e]||Sy)return;La[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=Fw().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Sy=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=Qw(i),_=n("text"),N=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),x=document.getElementById(V)||document.createElement("a"),A=n("preprendIcon"),E=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),d(x,V);const D=h();u(E,A),w.append(E,N,x,D),document.body.appendChild(w)}s?(N.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function Yw(){var t;const e=(t=lc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $w(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Zw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jw(){const e=pe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ww(){return!Yw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tR(){try{return typeof indexedDB=="object"}catch{return!1}}function eR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="FirebaseError";class Jn extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=nR,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mo.prototype.create)}}class Mo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?iR(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Jn(r,l,i)}}function iR(e,t){return e.replace(rR,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const rR=/\{\$([^}]+)}/g;function sR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function yr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Ay(s)&&Ay(a)){if(!yr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ay(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function aR(e,t){const n=new oR(e,t);return n.subscribe.bind(n)}class oR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");lR(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Oh),r.error===void 0&&(r.error=Oh),r.complete===void 0&&(r.complete=Oh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(e){return e&&e._delegate?e._delegate:e}class _r{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Hw;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hR(t))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=ir){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ir){return this.instances.has(t)}getOptions(t=ir){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ir){return this.component?this.component.multipleInstances?t:ir:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cR(e){return e===ir?void 0:e}function hR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new uR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(it||(it={}));const dR={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},mR=it.INFO,gR={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},pR=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=gR[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class cm{constructor(t){this.name=t,this._logLevel=mR,this._logHandler=pR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in it))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?dR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...t),this._logHandler(this,it.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...t),this._logHandler(this,it.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,it.INFO,...t),this._logHandler(this,it.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,it.WARN,...t),this._logHandler(this,it.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...t),this._logHandler(this,it.ERROR,...t)}}const yR=(e,t)=>t.some(n=>e instanceof n);let by,wy;function _R(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vR(){return wy||(wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y0=new WeakMap,zf=new WeakMap,X0=new WeakMap,Mh=new WeakMap,hm=new WeakMap;function ER(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Di(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Y0.set(n,e)}).catch(()=>{}),hm.set(t,e),t}function TR(e){if(zf.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});zf.set(e,t)}let jf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return zf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||X0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Di(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function SR(e){jf=e(jf)}function AR(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Vh(this),t,...n);return X0.set(i,t.sort?t.sort():[t]),Di(i)}:vR().includes(e)?function(...t){return e.apply(Vh(this),t),Di(Y0.get(this))}:function(...t){return Di(e.apply(Vh(this),t))}}function bR(e){return typeof e=="function"?AR(e):(e instanceof IDBTransaction&&TR(e),yR(e,_R())?new Proxy(e,jf):e)}function Di(e){if(e instanceof IDBRequest)return ER(e);if(Mh.has(e))return Mh.get(e);const t=bR(e);return t!==e&&(Mh.set(e,t),hm.set(t,e)),t}const Vh=e=>hm.get(e);function wR(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Di(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Di(a.result),u.oldVersion,u.newVersion,Di(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const RR=["get","getKey","getAll","getAllKeys","count"],IR=["put","add","delete","clear"],xh=new Map;function Ry(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xh.get(t))return xh.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=IR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||RR.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return xh.set(t,s),s}SR(e=>({...e,get:(t,n,i)=>Ry(t,n)||e.get(t,n,i),has:(t,n)=>!!Ry(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DR(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Bf="@firebase/app",Iy="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new cm("@firebase/app"),NR="@firebase/app-compat",OR="@firebase/analytics-compat",MR="@firebase/analytics",VR="@firebase/app-check-compat",xR="@firebase/app-check",kR="@firebase/auth",PR="@firebase/auth-compat",UR="@firebase/database",LR="@firebase/data-connect",zR="@firebase/database-compat",jR="@firebase/functions",BR="@firebase/functions-compat",qR="@firebase/installations",HR="@firebase/installations-compat",GR="@firebase/messaging",FR="@firebase/messaging-compat",QR="@firebase/performance",KR="@firebase/performance-compat",YR="@firebase/remote-config",XR="@firebase/remote-config-compat",$R="@firebase/storage",ZR="@firebase/storage-compat",JR="@firebase/firestore",WR="@firebase/ai",t2="@firebase/firestore-compat",e2="firebase",n2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",i2={[Bf]:"fire-core",[NR]:"fire-core-compat",[MR]:"fire-analytics",[OR]:"fire-analytics-compat",[xR]:"fire-app-check",[VR]:"fire-app-check-compat",[kR]:"fire-auth",[PR]:"fire-auth-compat",[UR]:"fire-rtdb",[LR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[jR]:"fire-fn",[BR]:"fire-fn-compat",[qR]:"fire-iid",[HR]:"fire-iid-compat",[GR]:"fire-fcm",[FR]:"fire-fcm-compat",[QR]:"fire-perf",[KR]:"fire-perf-compat",[YR]:"fire-rc",[XR]:"fire-rc-compat",[$R]:"fire-gcs",[ZR]:"fire-gcs-compat",[JR]:"fire-fst",[t2]:"fire-fst-compat",[WR]:"fire-vertex","fire-js":"fire-js",[e2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Map,r2=new Map,Hf=new Map;function Cy(e,t){try{e.container.addComponent(t)}catch(n){Qn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Is(e){const t=e.name;if(Hf.has(t))return Qn.debug(`There were multiple attempts to register component ${t}.`),!1;Hf.set(t,e);for(const n of wu.values())Cy(n,e);for(const n of r2.values())Cy(n,e);return!0}function fm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new Mo("app","Firebase",s2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=n2;function $0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:qf,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Ni.create("bad-app-name",{appName:String(r)});if(n||(n=G0()),!n)throw Ni.create("no-options");const s=wu.get(r);if(s){if(yr(n,s.options)&&yr(i,s.config))return s;throw Ni.create("duplicate-app",{appName:r})}const a=new fR(r);for(const u of Hf.values())a.addComponent(u);const l=new a2(n,i,a);return wu.set(r,l),l}function Z0(e=qf){const t=wu.get(e);if(!t&&e===qf&&G0())return $0();if(!t)throw Ni.create("no-app",{appName:e});return t}function Oi(e,t,n){let i=i2[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}Is(new _r(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="firebase-heartbeat-database",l2=1,so="firebase-heartbeat-store";let kh=null;function J0(){return kh||(kh=wR(o2,l2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(so)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ni.create("idb-open",{originalErrorMessage:e.message})})),kh}async function u2(e){try{const n=(await J0()).transaction(so),i=await n.objectStore(so).get(W0(e));return await n.done,i}catch(t){if(t instanceof Jn)Qn.warn(t.message);else{const n=Ni.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Qn.warn(n.message)}}}async function Dy(e,t){try{const i=(await J0()).transaction(so,"readwrite");await i.objectStore(so).put(t,W0(e)),await i.done}catch(n){if(n instanceof Jn)Qn.warn(n.message);else{const i=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(i.message)}}}function W0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=1024,h2=30;class f2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ny();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>h2){const a=g2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Qn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ny(),{heartbeatsToSend:i,unsentEntries:r}=d2(this._heartbeatsCache.heartbeats),s=bu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qn.warn(n),""}}}function Ny(){return new Date().toISOString().substring(0,10)}function d2(e,t=c2){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Oy(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Oy(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class m2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tR()?eR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Dy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Dy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Oy(e){return bu(JSON.stringify({version:2,heartbeats:e})).length}function g2(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(e){Is(new _r("platform-logger",t=>new CR(t),"PRIVATE")),Is(new _r("heartbeat",t=>new f2(t),"PRIVATE")),Oi(Bf,Iy,e),Oi(Bf,Iy,"esm2020"),Oi("fire-js","")}p2("");var y2="firebase",_2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(y2,_2,"app");var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mi,tT;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function S(){}S.prototype=y.prototype,T.D=y.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(v,R,I){for(var b=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)b[ye-2]=arguments[ye];return y.prototype[R].apply(v,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,y,S){S||(S=0);var v=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)v[R]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(R=0;16>R;++R)v[R]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=T.g[0],S=T.g[1],R=T.g[2];var I=T.g[3],b=y+(I^S&(R^I))+v[0]+3614090360&4294967295;y=S+(b<<7&4294967295|b>>>25),b=I+(R^y&(S^R))+v[1]+3905402710&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(S^I&(y^S))+v[2]+606105819&4294967295,R=I+(b<<17&4294967295|b>>>15),b=S+(y^R&(I^y))+v[3]+3250441966&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(I^S&(R^I))+v[4]+4118548399&4294967295,y=S+(b<<7&4294967295|b>>>25),b=I+(R^y&(S^R))+v[5]+1200080426&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(S^I&(y^S))+v[6]+2821735955&4294967295,R=I+(b<<17&4294967295|b>>>15),b=S+(y^R&(I^y))+v[7]+4249261313&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(I^S&(R^I))+v[8]+1770035416&4294967295,y=S+(b<<7&4294967295|b>>>25),b=I+(R^y&(S^R))+v[9]+2336552879&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(S^I&(y^S))+v[10]+4294925233&4294967295,R=I+(b<<17&4294967295|b>>>15),b=S+(y^R&(I^y))+v[11]+2304563134&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(I^S&(R^I))+v[12]+1804603682&4294967295,y=S+(b<<7&4294967295|b>>>25),b=I+(R^y&(S^R))+v[13]+4254626195&4294967295,I=y+(b<<12&4294967295|b>>>20),b=R+(S^I&(y^S))+v[14]+2792965006&4294967295,R=I+(b<<17&4294967295|b>>>15),b=S+(y^R&(I^y))+v[15]+1236535329&4294967295,S=R+(b<<22&4294967295|b>>>10),b=y+(R^I&(S^R))+v[1]+4129170786&4294967295,y=S+(b<<5&4294967295|b>>>27),b=I+(S^R&(y^S))+v[6]+3225465664&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(I^y))+v[11]+643717713&4294967295,R=I+(b<<14&4294967295|b>>>18),b=S+(I^y&(R^I))+v[0]+3921069994&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(R^I&(S^R))+v[5]+3593408605&4294967295,y=S+(b<<5&4294967295|b>>>27),b=I+(S^R&(y^S))+v[10]+38016083&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(I^y))+v[15]+3634488961&4294967295,R=I+(b<<14&4294967295|b>>>18),b=S+(I^y&(R^I))+v[4]+3889429448&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(R^I&(S^R))+v[9]+568446438&4294967295,y=S+(b<<5&4294967295|b>>>27),b=I+(S^R&(y^S))+v[14]+3275163606&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(I^y))+v[3]+4107603335&4294967295,R=I+(b<<14&4294967295|b>>>18),b=S+(I^y&(R^I))+v[8]+1163531501&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(R^I&(S^R))+v[13]+2850285829&4294967295,y=S+(b<<5&4294967295|b>>>27),b=I+(S^R&(y^S))+v[2]+4243563512&4294967295,I=y+(b<<9&4294967295|b>>>23),b=R+(y^S&(I^y))+v[7]+1735328473&4294967295,R=I+(b<<14&4294967295|b>>>18),b=S+(I^y&(R^I))+v[12]+2368359562&4294967295,S=R+(b<<20&4294967295|b>>>12),b=y+(S^R^I)+v[5]+4294588738&4294967295,y=S+(b<<4&4294967295|b>>>28),b=I+(y^S^R)+v[8]+2272392833&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^S)+v[11]+1839030562&4294967295,R=I+(b<<16&4294967295|b>>>16),b=S+(R^I^y)+v[14]+4259657740&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(S^R^I)+v[1]+2763975236&4294967295,y=S+(b<<4&4294967295|b>>>28),b=I+(y^S^R)+v[4]+1272893353&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^S)+v[7]+4139469664&4294967295,R=I+(b<<16&4294967295|b>>>16),b=S+(R^I^y)+v[10]+3200236656&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(S^R^I)+v[13]+681279174&4294967295,y=S+(b<<4&4294967295|b>>>28),b=I+(y^S^R)+v[0]+3936430074&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^S)+v[3]+3572445317&4294967295,R=I+(b<<16&4294967295|b>>>16),b=S+(R^I^y)+v[6]+76029189&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(S^R^I)+v[9]+3654602809&4294967295,y=S+(b<<4&4294967295|b>>>28),b=I+(y^S^R)+v[12]+3873151461&4294967295,I=y+(b<<11&4294967295|b>>>21),b=R+(I^y^S)+v[15]+530742520&4294967295,R=I+(b<<16&4294967295|b>>>16),b=S+(R^I^y)+v[2]+3299628645&4294967295,S=R+(b<<23&4294967295|b>>>9),b=y+(R^(S|~I))+v[0]+4096336452&4294967295,y=S+(b<<6&4294967295|b>>>26),b=I+(S^(y|~R))+v[7]+1126891415&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~S))+v[14]+2878612391&4294967295,R=I+(b<<15&4294967295|b>>>17),b=S+(I^(R|~y))+v[5]+4237533241&4294967295,S=R+(b<<21&4294967295|b>>>11),b=y+(R^(S|~I))+v[12]+1700485571&4294967295,y=S+(b<<6&4294967295|b>>>26),b=I+(S^(y|~R))+v[3]+2399980690&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~S))+v[10]+4293915773&4294967295,R=I+(b<<15&4294967295|b>>>17),b=S+(I^(R|~y))+v[1]+2240044497&4294967295,S=R+(b<<21&4294967295|b>>>11),b=y+(R^(S|~I))+v[8]+1873313359&4294967295,y=S+(b<<6&4294967295|b>>>26),b=I+(S^(y|~R))+v[15]+4264355552&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~S))+v[6]+2734768916&4294967295,R=I+(b<<15&4294967295|b>>>17),b=S+(I^(R|~y))+v[13]+1309151649&4294967295,S=R+(b<<21&4294967295|b>>>11),b=y+(R^(S|~I))+v[4]+4149444226&4294967295,y=S+(b<<6&4294967295|b>>>26),b=I+(S^(y|~R))+v[11]+3174756917&4294967295,I=y+(b<<10&4294967295|b>>>22),b=R+(y^(I|~S))+v[2]+718787259&4294967295,R=I+(b<<15&4294967295|b>>>17),b=S+(I^(R|~y))+v[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var S=y-this.blockSize,v=this.B,R=this.h,I=0;I<y;){if(R==0)for(;I<=S;)r(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(v[R++]=T.charCodeAt(I++),R==this.blockSize){r(this,v),R=0;break}}else for(;I<y;)if(v[R++]=T[I++],R==this.blockSize){r(this,v),R=0;break}}this.h=R,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var S=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=S&255,S/=256;for(this.u(T),T=Array(16),y=S=0;4>y;++y)for(var v=0;32>v;v+=8)T[S++]=this.g[y]>>>v&255;return T};function s(T,y){var S=l;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=y(T)}function a(T,y){this.h=y;for(var S=[],v=!0,R=T.length-1;0<=R;R--){var I=T[R]|0;v&&I==y||(S[R]=I,v=!1)}this.g=S}var l={};function u(T){return-128<=T&&128>T?s(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return x(h(-T));for(var y=[],S=1,v=0;T>=S;v++)y[v]=T/S|0,S*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return x(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(y,8)),v=p,R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R),b=parseInt(T.substring(R,R+I),y);8>I?(I=h(Math.pow(y,I)),v=v.j(I).add(h(b))):(v=v.j(S),v=v.add(h(b)))}return v}var p=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-x(this).m();for(var T=0,y=1,S=0;S<this.g.length;S++){var v=this.i(S);T+=(0<=v?v:4294967296+v)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N(this))return"0";if(V(this))return"-"+x(this).toString(T);for(var y=h(Math.pow(T,6)),S=this,v="";;){var R=D(S,y).g;S=A(S,R.j(y));var I=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=R,N(S))return I+v;for(;6>I.length;)I="0"+I;v=I+v}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function N(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=A(this,T),V(T)?-1:N(T)?0:1};function x(T){for(var y=T.g.length,S=[],v=0;v<y;v++)S[v]=~T.g[v];return new a(S,~T.h).add(m)}e.abs=function(){return V(this)?x(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],v=0,R=0;R<=y;R++){var I=v+(this.i(R)&65535)+(T.i(R)&65535),b=(I>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);v=b>>>16,I&=65535,b&=65535,S[R]=b<<16|I}return new a(S,S[S.length-1]&-2147483648?-1:0)};function A(T,y){return T.add(x(y))}e.j=function(T){if(N(this)||N(T))return p;if(V(this))return V(T)?x(this).j(x(T)):x(x(this).j(T));if(V(T))return x(this.j(x(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,S=[],v=0;v<2*y;v++)S[v]=0;for(v=0;v<this.g.length;v++)for(var R=0;R<T.g.length;R++){var I=this.i(v)>>>16,b=this.i(v)&65535,ye=T.i(R)>>>16,Ze=T.i(R)&65535;S[2*v+2*R]+=b*Ze,E(S,2*v+2*R),S[2*v+2*R+1]+=I*Ze,E(S,2*v+2*R+1),S[2*v+2*R+1]+=b*ye,E(S,2*v+2*R+1),S[2*v+2*R+2]+=I*ye,E(S,2*v+2*R+2)}for(v=0;v<y;v++)S[v]=S[2*v+1]<<16|S[2*v];for(v=y;v<2*y;v++)S[v]=0;return new a(S,0)};function E(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function w(T,y){this.g=T,this.h=y}function D(T,y){if(N(y))throw Error("division by zero");if(N(T))return new w(p,p);if(V(T))return y=D(x(T),y),new w(x(y.g),x(y.h));if(V(y))return y=D(T,x(y)),new w(x(y.g),y.h);if(30<T.g.length){if(V(T)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var S=m,v=y;0>=v.l(T);)S=L(S),v=L(v);var R=B(S,1),I=B(v,1);for(v=B(v,2),S=B(S,2);!N(v);){var b=I.add(v);0>=b.l(T)&&(R=R.add(S),I=b),v=B(v,1),S=B(S,1)}return y=A(T,R.j(y)),new w(R,y)}for(R=p;0<=T.l(y);){for(S=Math.max(1,Math.floor(T.m()/y.m())),v=Math.ceil(Math.log(S)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),I=h(S),b=I.j(y);V(b)||0<b.l(T);)S-=v,I=h(S),b=I.j(y);N(I)&&(I=m),R=R.add(I),T=A(T,b)}return new w(R,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],v=0;v<y;v++)S[v]=this.i(v)&T.i(v);return new a(S,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],v=0;v<y;v++)S[v]=this.i(v)|T.i(v);return new a(S,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],v=0;v<y;v++)S[v]=this.i(v)^T.i(v);return new a(S,this.h^T.h)};function L(T){for(var y=T.g.length+1,S=[],v=0;v<y;v++)S[v]=T.i(v)<<1|T.i(v-1)>>>31;return new a(S,T.h)}function B(T,y){var S=y>>5;y%=32;for(var v=T.g.length-S,R=[],I=0;I<v;I++)R[I]=0<y?T.i(I+S)>>>y|T.i(I+S+1)<<32-y:T.i(I+S);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Mi=a}).apply(typeof My<"u"?My:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eT,va,nT,Ll,Gf,iT,rT,sT;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var g=0;g<o.length-1;g++){var C=o[g];if(!(C in f))break t;f=f[C]}o=o[o.length-1],g=f[o],c=c(g),c!=g&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,g=!1,C={next:function(){if(!g&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function p(o,c,f){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),o.apply(c,C)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function N(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(g,C,O){for(var z=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)z[vt-2]=arguments[vt];return c.prototype[C].apply(g,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let g=0;g<c;g++)f[g]=o[g];return f}return[]}function x(o,c){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(u(g)){const C=o.length||0,O=g.length||0;o.length=C+O;for(let z=0;z<O;z++)o[C+z]=g[z]}else o.push(g)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function B(o,c,f){for(const g in o)c.call(f,o[g],g,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,c){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)o[f]=g[f];for(let O=0;O<S.length;O++)f=S[O],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function R(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function b(){var o=_t;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ye{constructor(){this.h=this.g=null}add(c,f){const g=Ze.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ze=new A(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $,X=!1,_t=new ye,F=()=>{const o=l.Promise.resolve(void 0);$=()=>{o.then(gt)}};var gt=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){I(f)}var c=Ze;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function Ct(){this.s=this.s,this.C=this.C}Ct.prototype.s=!1,Ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function te(o,c){if(Dt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var C=!0;break t}catch{}C=!1}C||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Nr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&te.aa.h.call(this)}}N(te,Dt);var Nr={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ki="closure_listenable_"+(1e6*Math.random()|0),wc=0;function Rc(o,c,f,g,C){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=C,this.key=++wc,this.da=this.fa=!1}function Yi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function an(o){this.src=o,this.g={},this.h=0}an.prototype.add=function(o,c,f,g,C){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var z=Cc(o,c,g,C);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new Rc(c,this.src,O,!!g,C),c.fa=f,o.push(c)),c};function Ic(o,c){var f=c.type;if(f in o.g){var g=o.g[f],C=Array.prototype.indexOf.call(g,c,void 0),O;(O=0<=C)&&Array.prototype.splice.call(g,C,1),O&&(Yi(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Cc(o,c,f,g){for(var C=0;C<o.length;++C){var O=o[C];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==g)return C}return-1}var Dc="closure_lm_"+(1e6*Math.random()|0),Nc={};function Zm(o,c,f,g,C){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Zm(o,c[O],f,g,C);return null}return f=tg(f),o&&o[Ki]?o.K(c,f,h(g)?!!g.capture:!1,C):uA(o,c,f,!1,g,C)}function uA(o,c,f,g,C,O){if(!c)throw Error("Invalid event type");var z=h(C)?!!C.capture:!!C,vt=Mc(o);if(vt||(o[Dc]=vt=new an(o)),f=vt.add(c,f,g,z,O),f.proxy)return f;if(g=cA(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)ze||(C=z),C===void 0&&(C=!1),o.addEventListener(c.toString(),g,C);else if(o.attachEvent)o.attachEvent(Wm(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function cA(){function o(f){return c.call(o.src,o.listener,f)}const c=hA;return o}function Jm(o,c,f,g,C){if(Array.isArray(c))for(var O=0;O<c.length;O++)Jm(o,c[O],f,g,C);else g=h(g)?!!g.capture:!!g,f=tg(f),o&&o[Ki]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=Cc(O,f,g,C),-1<f&&(Yi(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=Mc(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Cc(c,f,g,C)),(f=-1<o?c[o]:null)&&Oc(f))}function Oc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ki])Ic(c.i,o);else{var f=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(f,g,o.capture):c.detachEvent?c.detachEvent(Wm(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=Mc(c))?(Ic(f,o),f.h==0&&(f.src=null,c[Dc]=null)):Yi(o)}}}function Wm(o){return o in Nc?Nc[o]:Nc[o]="on"+o}function hA(o,c){if(o.da)o=!0;else{c=new te(c,this);var f=o.listener,g=o.ha||o.src;o.fa&&Oc(o),o=f.call(g,c)}return o}function Mc(o){return o=o[Dc],o instanceof an?o:null}var Vc="__closure_events_fn_"+(1e9*Math.random()>>>0);function tg(o){return typeof o=="function"?o:(o[Vc]||(o[Vc]=function(c){return o.handleEvent(c)}),o[Vc])}function le(){Ct.call(this),this.i=new an(this),this.M=this,this.F=null}N(le,Ct),le.prototype[Ki]=!0,le.prototype.removeEventListener=function(o,c,f,g){Jm(this,o,c,f,g)};function _e(o,c){var f,g=o.F;if(g)for(f=[];g;g=g.F)f.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new Dt(c,o);else if(c instanceof Dt)c.target=c.target||o;else{var C=c;c=new Dt(g,o),v(c,C)}if(C=!0,f)for(var O=f.length-1;0<=O;O--){var z=c.g=f[O];C=qo(z,g,!0,c)&&C}if(z=c.g=o,C=qo(z,g,!0,c)&&C,C=qo(z,g,!1,c)&&C,f)for(O=0;O<f.length;O++)z=c.g=f[O],C=qo(z,g,!1,c)&&C}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],g=0;g<f.length;g++)Yi(f[g]);delete o.g[c],o.h--}}this.F=null},le.prototype.K=function(o,c,f,g){return this.i.add(String(o),c,!1,f,g)},le.prototype.L=function(o,c,f,g){return this.i.add(String(o),c,!0,f,g)};function qo(o,c,f,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,O=0;O<c.length;++O){var z=c[O];if(z&&!z.da&&z.capture==f){var vt=z.listener,ee=z.ha||z.src;z.fa&&Ic(o.i,z),C=vt.call(ee,g)!==!1&&C}}return C&&!g.defaultPrevented}function eg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function ng(o){o.g=eg(()=>{o.g=null,o.i&&(o.i=!1,ng(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class fA extends Ct{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ng(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(o){Ct.call(this),this.h=o,this.g={}}N(Ys,Ct);var ig=[];function rg(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&Oc(c)},o),o.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),rg(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xc=l.JSON.stringify,dA=l.JSON.parse,mA=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function kc(){}kc.prototype.h=null;function sg(o){return o.h||(o.h=o.i())}function ag(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pc(){Dt.call(this,"d")}N(Pc,Dt);function Uc(){Dt.call(this,"c")}N(Uc,Dt);var Xi={},og=null;function Ho(){return og=og||new le}Xi.La="serverreachability";function lg(o){Dt.call(this,Xi.La,o)}N(lg,Dt);function $s(o){const c=Ho();_e(c,new lg(c))}Xi.STAT_EVENT="statevent";function ug(o,c){Dt.call(this,Xi.STAT_EVENT,o),this.stat=c}N(ug,Dt);function ve(o){const c=Ho();_e(c,new ug(c,o))}Xi.Ma="timingevent";function cg(o,c){Dt.call(this,Xi.Ma,o),this.size=c}N(cg,Dt);function Zs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Js(){this.g=!0}Js.prototype.xa=function(){this.g=!1};function gA(o,c,f,g,C,O){o.info(function(){if(o.g)if(O)for(var z="",vt=O.split("&"),ee=0;ee<vt.length;ee++){var ut=vt[ee].split("=");if(1<ut.length){var ue=ut[0];ut=ut[1];var ce=ue.split("_");z=2<=ce.length&&ce[1]=="type"?z+(ue+"="+ut+"&"):z+(ue+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+c+`
`+f+`
`+z})}function pA(o,c,f,g,C,O,z){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+c+`
`+f+`
`+O+" "+z})}function Or(o,c,f,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+_A(o,f)+(g?" "+g:"")})}function yA(o,c){o.info(function(){return"TIMEOUT: "+c})}Js.prototype.info=function(){};function _A(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var g=f[o];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var O=C[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return xc(f)}catch{return c}}var Go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lc;function Fo(){}N(Fo,kc),Fo.prototype.g=function(){return new XMLHttpRequest},Fo.prototype.i=function(){return{}},Lc=new Fo;function Wn(o,c,f,g){this.j=o,this.i=c,this.l=f,this.R=g||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fg}function fg(){this.i=null,this.g="",this.h=!1}var dg={},zc={};function jc(o,c,f){o.L=1,o.v=Xo(wn(c)),o.m=f,o.P=!0,mg(o,null)}function mg(o,c){o.F=Date.now(),Qo(o),o.A=wn(o.v);var f=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Cg(f.i,"t",g),o.C=0,f=o.j.J,o.h=new fg,o.g=Qg(o.j,f?c:null,!o.m),0<o.O&&(o.M=new fA(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,g=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(ig[0]=C.toString()),C=ig);for(var O=0;O<C.length;O++){var z=Zm(f,C[O],g||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),$s(),gA(o.i,o.u,o.A,o.l,o.R,o.m)}Wn.prototype.ca=function(o){o=o.target;const c=this.M;c&&Rn(o)==3?c.j():this.Y(o)},Wn.prototype.Y=function(o){try{if(o==this.g)t:{const ce=Rn(this.g);var c=this.g.Ba();const xr=this.g.Z();if(!(3>ce)&&(ce!=3||this.g&&(this.h.h||this.g.oa()||kg(this.g)))){this.J||ce!=4||c==7||(c==8||0>=xr?$s(3):$s(2)),Bc(this);var f=this.g.Z();this.X=f;e:if(gg(this)){var g=kg(this.g);o="";var C=g.length,O=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$i(this),Ws(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(O&&c==C-1)});g.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,pA(this.i,this.u,this.A,this.l,this.R,ce,f),this.o){if(this.T&&!this.K){e:{if(this.g){var vt,ee=this.g;if((vt=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(vt)){var ut=vt;break e}}ut=null}if(f=ut)Or(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qc(this,f);else{this.o=!1,this.s=3,ve(12),$i(this),Ws(this);break t}}if(this.P){f=!0;let Je;for(;!this.J&&this.C<z.length;)if(Je=vA(this,z),Je==zc){ce==4&&(this.s=4,ve(14),f=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==dg){this.s=4,ve(15),Or(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Or(this.i,this.l,Je,null),qc(this,Je);if(gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||z.length!=0||this.h.h||(this.s=1,ve(16),f=!1),this.o=this.o&&f,!f)Or(this.i,this.l,z,"[Invalid Chunked Response]"),$i(this),Ws(this);else if(0<z.length&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.ba&&!ue.M&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Yc(ue),ue.M=!0,ve(11))}}else Or(this.i,this.l,z,null),qc(this,z);ce==4&&$i(this),this.o&&!this.J&&(ce==4?qg(this.j,this):(this.o=!1,Qo(this)))}else PA(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,ve(12)):(this.s=0,ve(13)),$i(this),Ws(this)}}}catch{}finally{}};function gg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function vA(o,c){var f=o.C,g=c.indexOf(`
`,f);return g==-1?zc:(f=Number(c.substring(f,g)),isNaN(f)?dg:(g+=1,g+f>c.length?zc:(c=c.slice(g,g+f),o.C=g+f,c)))}Wn.prototype.cancel=function(){this.J=!0,$i(this)};function Qo(o){o.S=Date.now()+o.I,pg(o,o.I)}function pg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Zs(m(o.ba,o),c)}function Bc(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Wn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(yA(this.i,this.A),this.L!=2&&($s(),ve(17)),$i(this),this.s=2,Ws(this)):pg(this,this.S-o)};function Ws(o){o.j.G==0||o.J||qg(o.j,o)}function $i(o){Bc(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,rg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function qc(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Hc(f.h,o))){if(!o.K&&Hc(f.h,o)&&f.G==3){try{var g=f.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)el(f),Wo(f);else break t;Kc(f),ve(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Zs(m(f.Za,f),6e3));if(1>=vg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ji(f,11)}else if((o.K||f.g==o)&&el(f),!E(c))for(C=f.Da.g.parse(c),c=0;c<C.length;c++){let ut=C[c];if(f.T=ut[0],ut=ut[1],f.G==2)if(ut[0]=="c"){f.K=ut[1],f.ia=ut[2];const ue=ut[3];ue!=null&&(f.la=ue,f.j.info("VER="+f.la));const ce=ut[4];ce!=null&&(f.Aa=ce,f.j.info("SVER="+f.Aa));const xr=ut[5];xr!=null&&typeof xr=="number"&&0<xr&&(g=1.5*xr,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Je=o.g;if(Je){const il=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var O=g.h;O.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Gc(O,O.h),O.h=null))}if(g.D){const Xc=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;Xc&&(g.ya=Xc,St(g.I,g.D,Xc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var z=o;if(g.qa=Fg(g,g.J?g.ia:null,g.W),z.K){Eg(g.h,z);var vt=z,ee=g.L;ee&&(vt.I=ee),vt.B&&(Bc(vt),Qo(vt)),g.g=z}else jg(g);0<f.i.length&&tl(f)}else ut[0]!="stop"&&ut[0]!="close"||Ji(f,7);else f.G==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Ji(f,7):Qc(f):ut[0]!="noop"&&f.l&&f.l.ta(ut),f.v=0)}}$s(4)}catch{}}var EA=class{constructor(o,c){this.g=o,this.map=c}};function yg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _g(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function vg(o){return o.h?1:o.g?o.g.size:0}function Hc(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Gc(o,c){o.g?o.g.add(c):o.h=c}function Eg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}yg.prototype.cancel=function(){if(this.i=Tg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Tg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function TA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,g=0;g<f;g++)c.push(o[g]);return c}c=[],f=0;for(g in o)c[f++]=o[g];return c}function SA(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const g in o)c[f++]=g;return c}}}function Sg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=SA(o),g=TA(o),C=g.length,O=0;O<C;O++)c.call(void 0,g[O],f&&f[O],o)}var Ag=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AA(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var g=o[f].indexOf("="),C=null;if(0<=g){var O=o[f].substring(0,g);C=o[f].substring(g+1)}else O=o[f];c(O,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Zi(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Zi){this.h=o.h,Ko(this,o.j),this.o=o.o,this.g=o.g,Yo(this,o.s),this.l=o.l;var c=o.i,f=new na;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),bg(this,f),this.m=o.m}else o&&(c=String(o).match(Ag))?(this.h=!1,Ko(this,c[1]||"",!0),this.o=ta(c[2]||""),this.g=ta(c[3]||"",!0),Yo(this,c[4]),this.l=ta(c[5]||"",!0),bg(this,c[6]||"",!0),this.m=ta(c[7]||"")):(this.h=!1,this.i=new na(null,this.h))}Zi.prototype.toString=function(){var o=[],c=this.j;c&&o.push(ea(c,wg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ea(c,wg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ea(f,f.charAt(0)=="/"?RA:wA,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ea(f,CA)),o.join("")};function wn(o){return new Zi(o)}function Ko(o,c,f){o.j=f?ta(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Yo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function bg(o,c,f){c instanceof na?(o.i=c,DA(o.i,o.h)):(f||(c=ea(c,IA)),o.i=new na(c,o.h))}function St(o,c,f){o.i.set(c,f)}function Xo(o){return St(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ta(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ea(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,bA),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function bA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var wg=/[#\/\?@]/g,wA=/[#\?:]/g,RA=/[#\?]/g,IA=/[#\?@]/g,CA=/#/g;function na(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ti(o){o.g||(o.g=new Map,o.h=0,o.i&&AA(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=na.prototype,e.add=function(o,c){ti(this),this.i=null,o=Mr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Rg(o,c){ti(o),c=Mr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Ig(o,c){return ti(o),c=Mr(o,c),o.g.has(c)}e.forEach=function(o,c){ti(this),this.g.forEach(function(f,g){f.forEach(function(C){o.call(c,C,g,this)},this)},this)},e.na=function(){ti(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let g=0;g<c.length;g++){const C=o[g];for(let O=0;O<C.length;O++)f.push(c[g])}return f},e.V=function(o){ti(this);let c=[];if(typeof o=="string")Ig(this,o)&&(c=c.concat(this.g.get(Mr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return ti(this),this.i=null,o=Mr(this,o),Ig(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Cg(o,c,f){Rg(o,c),0<f.length&&(o.i=null,o.g.set(Mr(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var g=c[f];const O=encodeURIComponent(String(g)),z=this.V(g);for(g=0;g<z.length;g++){var C=O;z[g]!==""&&(C+="="+encodeURIComponent(String(z[g]))),o.push(C)}}return this.i=o.join("&")};function Mr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function DA(o,c){c&&!o.j&&(ti(o),o.i=null,o.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Rg(this,g),Cg(this,C,f))},o)),o.j=c}function NA(o,c){const f=new Js;if(l.Image){const g=new Image;g.onload=_(ei,f,"TestLoadImage: loaded",!0,c,g),g.onerror=_(ei,f,"TestLoadImage: error",!1,c,g),g.onabort=_(ei,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=_(ei,f,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function OA(o,c){const f=new Js,g=new AbortController,C=setTimeout(()=>{g.abort(),ei(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(O=>{clearTimeout(C),O.ok?ei(f,"TestPingServer: ok",!0,c):ei(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),ei(f,"TestPingServer: error",!1,c)})}function ei(o,c,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function MA(){this.g=new mA}function VA(o,c,f){const g=f||"";try{Sg(o,function(C,O){let z=C;h(C)&&(z=xc(C)),c.push(g+O+"="+encodeURIComponent(z))})}catch(C){throw c.push(g+"type="+encodeURIComponent("_badmap")),C}}function $o(o){this.l=o.Ub||null,this.j=o.eb||!1}N($o,kc),$o.prototype.g=function(){return new Zo(this.l,this.j)},$o.prototype.i=function(o){return function(){return o}}({});function Zo(o,c){le.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Zo,le),e=Zo.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ra(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ia(this):ra(this),this.readyState==3&&Dg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ia(this))},e.Qa=function(o){this.g&&(this.response=o,ia(this))},e.ga=function(){this.g&&ia(this)};function ia(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ra(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function ra(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ng(o){let c="";return B(o,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function Fc(o,c,f){t:{for(g in f){var g=!1;break t}g=!0}g||(f=Ng(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):St(o,c,f))}function Vt(o){le.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Vt,le);var xA=/^https?$/i,kA=["POST","PUT"];e=Vt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lc.g(),this.v=this.o?sg(this.o):sg(Lc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){Og(this,O);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())f.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(kA,c,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of f)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xg(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){Og(this,O)}};function Og(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Mg(o),Jo(o)}function Mg(o){o.A||(o.A=!0,_e(o,"complete"),_e(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,_e(this,"complete"),_e(this,"abort"),Jo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),Vt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vg(this):this.bb())},e.bb=function(){Vg(this)};function Vg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Rn(o)!=4||o.Z()!=2)){if(o.u&&Rn(o)==4)eg(o.Ea,0,o);else if(_e(o,"readystatechange"),Rn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var g;if(g=z===0){var C=String(o.D).match(Ag)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),g=!xA.test(C?C.toLowerCase():"")}f=g}if(f)_e(o,"complete"),_e(o,"success");else{o.m=6;try{var O=2<Rn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",Mg(o)}}finally{Jo(o)}}}}function Jo(o,c){if(o.g){xg(o);const f=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||_e(o,"ready");try{f.onreadystatechange=g}catch{}}}function xg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Rn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),dA(c)}};function kg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function PA(o){const c={};o=(o.g&&2<=Rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(E(o[g]))continue;var f=R(o[g]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[C]||[];c[C]=O,O.push(f)}T(c,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function Pg(o){this.Aa=0,this.i=[],this.j=new Js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sa("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sa("baseRetryDelayMs",5e3,o),this.cb=sa("retryDelaySeedMs",1e4,o),this.Wa=sa("forwardChannelMaxRetries",2,o),this.wa=sa("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new yg(o&&o.concurrentRequestLimit),this.Da=new MA,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Pg.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,g){ve(0),this.W=o,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Fg(this,null,this.W),tl(this)};function Qc(o){if(Ug(o),o.G==3){var c=o.U++,f=wn(o.I);if(St(f,"SID",o.K),St(f,"RID",c),St(f,"TYPE","terminate"),aa(o,f),c=new Wn(o,o.j,c),c.L=2,c.v=Xo(wn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Qg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Qo(c)}Gg(o)}function Wo(o){o.g&&(Yc(o),o.g.cancel(),o.g=null)}function Ug(o){Wo(o),o.u&&(l.clearTimeout(o.u),o.u=null),el(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function tl(o){if(!_g(o.h)&&!o.s){o.s=!0;var c=o.Ga;$||F(),X||($(),X=!0),_t.add(c,o),o.B=0}}function UA(o,c){return vg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Zs(m(o.Ga,o,c),Hg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Wn(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),v(O,this.S)):O=this.S),this.m!==null||this.O||(C.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=zg(this,C,c),f=wn(this.I),St(f,"RID",o),St(f,"CVER",22),this.D&&St(f,"X-HTTP-Session-Id",this.D),aa(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(Ng(O)))+"&"+c:this.m&&Fc(f,this.m,O)),Gc(this.h,C),this.Ua&&St(f,"TYPE","init"),this.P?(St(f,"$req",c),St(f,"SID","null"),C.T=!0,jc(C,f,null)):jc(C,f,c),this.G=2}}else this.G==3&&(o?Lg(this,o):this.i.length==0||_g(this.h)||Lg(this))};function Lg(o,c){var f;c?f=c.l:f=o.U++;const g=wn(o.I);St(g,"SID",o.K),St(g,"RID",f),St(g,"AID",o.T),aa(o,g),o.m&&o.o&&Fc(g,o.m,o.o),f=new Wn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=zg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Gc(o.h,f),jc(f,g,c)}function aa(o,c){o.H&&B(o.H,function(f,g){St(c,g,f)}),o.l&&Sg({},function(f,g){St(c,g,f)})}function zg(o,c,f){f=Math.min(o.i.length,f);var g=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let O=-1;for(;;){const z=["count="+f];O==-1?0<f?(O=C[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let vt=!0;for(let ee=0;ee<f;ee++){let ut=C[ee].g;const ue=C[ee].map;if(ut-=O,0>ut)O=Math.max(0,C[ee].g-100),vt=!1;else try{VA(ue,z,"req"+ut+"_")}catch{g&&g(ue)}}if(vt){g=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,g}function jg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;$||F(),X||($(),X=!0),_t.add(c,o),o.v=0}}function Kc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Zs(m(o.Fa,o),Hg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Bg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Zs(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ve(10),Wo(this),Bg(this))};function Yc(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Bg(o){o.g=new Wn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=wn(o.qa);St(c,"RID","rpc"),St(c,"SID",o.K),St(c,"AID",o.T),St(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&St(c,"TO",o.ja),St(c,"TYPE","xmlhttp"),aa(o,c),o.m&&o.o&&Fc(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Xo(wn(c)),f.m=null,f.P=!0,mg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Wo(this),Kc(this),ve(19))};function el(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function qg(o,c){var f=null;if(o.g==c){el(o),Yc(o),o.g=null;var g=2}else if(Hc(o.h,c))f=c.D,Eg(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var C=o.B;g=Ho(),_e(g,new cg(g,f)),tl(o)}else jg(o);else if(C=c.s,C==3||C==0&&0<c.X||!(g==1&&UA(o,c)||g==2&&Kc(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),C){case 1:Ji(o,5);break;case 4:Ji(o,10);break;case 3:Ji(o,6);break;default:Ji(o,2)}}}function Hg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Ji(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),g=o.Xa;const C=!g;g=new Zi(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ko(g,"https"),Xo(g),C?NA(g.toString(),f):OA(g.toString(),f)}else ve(2);o.G=0,o.l&&o.l.sa(c),Gg(o),Ug(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function Gg(o){if(o.G=0,o.ka=[],o.l){const c=Tg(o.h);(c.length!=0||o.i.length!=0)&&(x(o.ka,c),x(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Fg(o,c,f){var g=f instanceof Zi?wn(f):new Zi(f);if(g.g!="")c&&(g.g=c+"."+g.g),Yo(g,g.s);else{var C=l.location;g=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var O=new Zi(null);g&&Ko(O,g),c&&(O.g=c),C&&Yo(O,C),f&&(O.l=f),g=O}return f=o.D,c=o.ya,f&&c&&St(g,f,c),St(g,"VER",o.la),aa(o,g),g}function Qg(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Vt(new $o({eb:f})):new Vt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kg(){}e=Kg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function nl(){}nl.prototype.g=function(o,c){return new De(o,c)};function De(o,c){le.call(this),this.g=new Pg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Vr(this)}N(De,le),De.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},De.prototype.close=function(){Qc(this.g)},De.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=xc(o),o=f);c.i.push(new EA(c.Ya++,o)),c.G==3&&tl(c)},De.prototype.N=function(){this.g.l=null,delete this.j,Qc(this.g),delete this.g,De.aa.N.call(this)};function Yg(o){Pc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(Yg,Pc);function Xg(){Uc.call(this),this.status=1}N(Xg,Uc);function Vr(o){this.g=o}N(Vr,Kg),Vr.prototype.ua=function(){_e(this.g,"a")},Vr.prototype.ta=function(o){_e(this.g,new Yg(o))},Vr.prototype.sa=function(o){_e(this.g,new Xg)},Vr.prototype.ra=function(){_e(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,De.prototype.send=De.prototype.o,De.prototype.open=De.prototype.m,De.prototype.close=De.prototype.close,sT=function(){return new nl},rT=function(){return Ho()},iT=Xi,Gf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Ll=Go,hg.COMPLETE="complete",nT=hg,ag.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",le.prototype.listen=le.prototype.K,va=ag,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,eT=Vt}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const Vy="@firebase/firestore",xy="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fe.UNAUTHENTICATED=new fe(null),fe.GOOGLE_CREDENTIALS=new fe("google-credentials-uid"),fe.FIRST_PARTY=new fe("first-party-uid"),fe.MOCK_USER=new fe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new cm("@firebase/firestore");function Br(){return vr.logLevel}function q(e,...t){if(vr.logLevel<=it.DEBUG){const n=t.map(dm);vr.debug(`Firestore (${Hs}): ${e}`,...n)}}function Kn(e,...t){if(vr.logLevel<=it.ERROR){const n=t.map(dm);vr.error(`Firestore (${Hs}): ${e}`,...n)}}function Cs(e,...t){if(vr.logLevel<=it.WARN){const n=t.map(dm);vr.warn(`Firestore (${Hs}): ${e}`,...n)}}function dm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,aT(e,i,n)}function aT(e,t,n){let i=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Kn(i),new Error(i)}function ft(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||aT(t,r,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Jn{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class v2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(fe.UNAUTHENTICATED))}shutdown(){}}class E2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class T2{constructor(t){this.t=t,this.currentUser=fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ft(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vi,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vi)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new oT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string",2055,{h:t}),new fe(t)}}class S2{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=fe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A2{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new S2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ky{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ft(this.o===void 0,3512);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ky(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ky(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=w2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function rt(e,t){return e<t?-1:e>t?1:0}function Ff(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return Ph(r)===Ph(s)?rt(r,s):Ph(r)?1:-1}return rt(e.length,t.length)}const R2=55296,I2=57343;function Ph(e){const t=e.charCodeAt(0);return t>=R2&&t<=I2}function Ds(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class ln{constructor(t,n,i){n===void 0?n=0:n>t.length&&Q(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Q(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ln.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ln?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=ln.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return rt(t.length,n.length)}static compareSegments(t,n){const i=ln.isNumericId(t),r=ln.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ln.extractNumericId(t).compare(ln.extractNumericId(n)):Ff(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Mi.fromString(t.substring(4,t.length-2))}}class Ot extends ln{construct(t,n,i){return new Ot(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ot(n)}static emptyPath(){return new Ot([])}}const C2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends ln{construct(t,n,i){return new se(t,n,i)}static isValidIdentifier(t){return C2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new se([Py])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new se(n)}static emptyPath(){return new se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(Ot.fromString(t))}static fromName(t){return new G(Ot.fromString(t).popFirst(5))}static empty(){return new G(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ot.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ot.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new Ot(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(e,t,n){if(!n)throw new H(U.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function N2(e,t,n,i){if(t===!0&&i===!0)throw new H(U.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Uy(e){if(!G.isDocumentKey(e))throw new H(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lT(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function gm(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Q(12329,{type:typeof e})}function ao(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gm(e);throw new H(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(e,t){const n={typeString:e};return t&&(n.value=t),n}function xo(e,t){if(!lT(e))throw new H(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new H(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=-62135596800,zy=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(t){return At.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*zy);return new At(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Ly)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zy}_compareTo(t){return this.seconds===t.seconds?rt(this.nanoseconds,t.nanoseconds):rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(xo(t,At._jsonSchema))return new At(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ly;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:Bt("string",At._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new At(0,0))}static max(){return new Z(new At(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=-1;function O2(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new At(n+1,0):new At(n,i));return new Li(r,G.empty(),t)}function M2(e){return new Li(e.readTime,e.key,oo)}class Li{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Li(Z.min(),G.empty(),oo)}static max(){return new Li(Z.max(),G.empty(),oo)}}function V2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(e){if(e.code!==U.FAILED_PRECONDITION||e.message!==x2)throw e;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new k((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):k.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):k.reject(n)}static resolve(t){return new k((n,i)=>{n(t)})}static reject(t){return new k((n,i)=>{i(t)})}static waitFor(t){return new k((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=k.resolve(!1);for(const i of t)n=n.next(r=>r?k.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new k((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new k((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function P2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fs(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}uc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=-1;function cc(e){return e==null}function Ru(e){return e===0&&1/e==-1/0}function U2(e){return typeof e=="number"&&Number.isInteger(e)&&!Ru(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="";function L2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=jy(t)),t=z2(e.get(n),t);return jy(t)}function z2(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case uT:n+="";break;default:n+=s}}return n}function jy(e){return e+uT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cT(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t,n){this.comparator=t,this.root=n||ie.EMPTY}insert(t,n){return new Mt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ie.BLACK,null,null))}remove(t){return new Mt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ie.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new El(this.root,t,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new El(this.root,t,this.comparator,!0)}}class El{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ie{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ie.RED,this.left=r??ie.EMPTY,this.right=s??ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ie(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ie.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Q(27949);return t+(this.isRed()?0:1)}}ie.EMPTY=null,ie.RED=!0,ie.BLACK=!1;ie.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ie(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this.comparator=t,this.data=new Mt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(t){return new qy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Qt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Qt(this.comparator);return n.data=t,n}}class qy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.fields=t,t.sort(se.comparator)}static empty(){return new en([])}unionWith(t){let n=new Qt(se.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new en(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ds(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hT("Invalid base64 string: "+s):s}}(t);return new oe(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new oe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}oe.EMPTY_BYTE_STRING=new oe("");const j2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(e){if(ft(!!e,39018),typeof e=="string"){let t=0;const n=j2.exec(e);if(ft(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Lt(e.seconds),nanos:Lt(e.nanos)}}function Lt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ji(e){return typeof e=="string"?oe.fromBase64String(e):oe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="server_timestamp",dT="__type__",mT="__previous_value__",gT="__local_write_time__";function ym(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[dT])==null?void 0:i.stringValue)===fT}function hc(e){const t=e.mapValue.fields[mT];return ym(t)?hc(t):t}function lo(e){const t=zi(e.mapValue.fields[gT].timestampValue);return new At(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Iu="(default)";class uo{constructor(t,n){this.projectId=t,this.database=n||Iu}static empty(){return new uo("","")}get isDefaultDatabase(){return this.database===Iu}isEqual(t){return t instanceof uo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="__type__",q2="__max__",Tl={mapValue:{}},yT="__vector__",Cu="value";function Bi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ym(e)?4:G2(e)?9007199254740991:H2(e)?10:11:Q(28295,{value:e})}function Tn(e,t){if(e===t)return!0;const n=Bi(e);if(n!==Bi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return lo(e).isEqual(lo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=zi(r.timestampValue),l=zi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return ji(r.bytesValue).isEqual(ji(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Lt(r.geoPointValue.latitude)===Lt(s.geoPointValue.latitude)&&Lt(r.geoPointValue.longitude)===Lt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Lt(r.integerValue)===Lt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Lt(r.doubleValue),l=Lt(s.doubleValue);return a===l?Ru(a)===Ru(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Ds(e.arrayValue.values||[],t.arrayValue.values||[],Tn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(By(a)!==By(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Tn(a[u],l[u])))return!1;return!0}(e,t);default:return Q(52216,{left:e})}}function co(e,t){return(e.values||[]).find(n=>Tn(n,t))!==void 0}function Ns(e,t){if(e===t)return 0;const n=Bi(e),i=Bi(t);if(n!==i)return rt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Lt(s.integerValue||s.doubleValue),u=Lt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Hy(e.timestampValue,t.timestampValue);case 4:return Hy(lo(e),lo(t));case 5:return Ff(e.stringValue,t.stringValue);case 6:return function(s,a){const l=ji(s),u=ji(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=rt(l[h],u[h]);if(d!==0)return d}return rt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=rt(Lt(s.latitude),Lt(a.latitude));return l!==0?l:rt(Lt(s.longitude),Lt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Gy(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,N,V;const l=s.fields||{},u=a.fields||{},h=(m=l[Cu])==null?void 0:m.arrayValue,d=(_=u[Cu])==null?void 0:_.arrayValue,p=rt(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return p!==0?p:Gy(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===Tl.mapValue&&a===Tl.mapValue)return 0;if(s===Tl.mapValue)return 1;if(a===Tl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=Ff(u[p],d[p]);if(m!==0)return m;const _=Ns(l[u[p]],h[d[p]]);if(_!==0)return _}return rt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Q(23264,{he:n})}}function Hy(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return rt(e,t);const n=zi(e),i=zi(t),r=rt(n.seconds,i.seconds);return r!==0?r:rt(n.nanos,i.nanos)}function Gy(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ns(n[r],i[r]);if(s)return s}return rt(n.length,i.length)}function Os(e){return Qf(e)}function Qf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=zi(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ji(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Qf(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Qf(n.fields[a])}`;return r+"}"}(e.mapValue):Q(61005,{value:e})}function zl(e){switch(Bi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hc(e);return t?16+zl(t):16;case 5:return 2*e.stringValue.length;case 6:return ji(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+zl(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Rr(i.fields,(s,a)=>{r+=s.length+zl(a)}),r}(e.mapValue);default:throw Q(13486,{value:e})}}function Kf(e){return!!e&&"integerValue"in e}function _m(e){return!!e&&"arrayValue"in e}function Fy(e){return!!e&&"nullValue"in e}function Qy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jl(e){return!!e&&"mapValue"in e}function H2(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[pT])==null?void 0:i.stringValue)===yT}function za(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Rr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=za(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=za(e.arrayValue.values[n]);return t}return{...e}}function G2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.value=t}static empty(){return new Qe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!jl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=za(n)}setAll(t){let n=se.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=za(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Tn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Rr(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Qe(za(this.value))}}function _T(e){const t=[];return Rr(e.fields,(n,i)=>{const r=new se([n]);if(jl(i)){const s=_T(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new en(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new de(t,0,Z.min(),Z.min(),Z.min(),Qe.empty(),0)}static newFoundDocument(t,n,i,r){return new de(t,1,n,Z.min(),i,r,0)}static newNoDocument(t,n){return new de(t,2,n,Z.min(),Z.min(),Qe.empty(),0)}static newUnknownDocument(t,n){return new de(t,3,n,Z.min(),Z.min(),Qe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof de&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new de(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,n){this.position=t,this.inclusive=n}}function Ky(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=Ns(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Yy(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,n="asc"){this.field=t,this.dir=n}}function F2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{}class Ft extends vT{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new K2(t,n,i):n==="array-contains"?new $2(t,i):n==="in"?new Z2(t,i):n==="not-in"?new J2(t,i):n==="array-contains-any"?new W2(t,i):new Ft(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new Y2(t,i):new X2(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ns(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(Ns(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends vT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Sn(t,n)}matches(t){return ET(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ET(e){return e.op==="and"}function TT(e){return Q2(e)&&ET(e)}function Q2(e){for(const t of e.filters)if(t instanceof Sn)return!1;return!0}function Yf(e){if(e instanceof Ft)return e.field.canonicalString()+e.op.toString()+Os(e.value);if(TT(e))return e.filters.map(t=>Yf(t)).join(",");{const t=e.filters.map(n=>Yf(n)).join(",");return`${e.op}(${t})`}}function ST(e,t){return e instanceof Ft?function(i,r){return r instanceof Ft&&i.op===r.op&&i.field.isEqual(r.field)&&Tn(i.value,r.value)}(e,t):e instanceof Sn?function(i,r){return r instanceof Sn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&ST(a,r.filters[l]),!0):!1}(e,t):void Q(19439)}function AT(e){return e instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Os(n.value)}`}(e):e instanceof Sn?function(n){return n.op.toString()+" {"+n.getFilters().map(AT).join(" ,")+"}"}(e):"Filter"}class K2 extends Ft{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class Y2 extends Ft{constructor(t,n){super(t,"in",n),this.keys=bT("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class X2 extends Ft{constructor(t,n){super(t,"not-in",n),this.keys=bT("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function bT(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class $2 extends Ft{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return _m(n)&&co(n.arrayValue,this.value)}}class Z2 extends Ft{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&co(this.value.arrayValue,n)}}class J2 extends Ft{constructor(t,n){super(t,"not-in",n)}matches(t){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!co(this.value.arrayValue,n)}}class W2 extends Ft{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!_m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>co(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Xy(e,t=null,n=[],i=[],r=null,s=null,a=null){return new tI(e,t,n,i,r,s,a)}function vm(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Yf(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Os(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Os(i)).join(",")),t.Te=n}return t.Te}function Em(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!F2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ST(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yy(e.startAt,t.startAt)&&Yy(e.endAt,t.endAt)}function Xf(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eI(e,t,n,i,r,s,a,l){return new fc(e,t,n,i,r,s,a,l)}function Tm(e){return new fc(e)}function $y(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function nI(e){return e.collectionGroup!==null}function ja(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qt(se.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Nu(s,i))}),n.has(se.keyField().canonicalString())||t.Ie.push(new Nu(se.keyField(),i))}return t.Ie}function mn(e){const t=J(e);return t.Ee||(t.Ee=iI(t,ja(e))),t.Ee}function iI(e,t){if(e.limitType==="F")return Xy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Nu(r.field,s)});const n=e.endAt?new Du(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Du(e.startAt.position,e.startAt.inclusive):null;return Xy(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function $f(e,t,n){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dc(e,t){return Em(mn(e),mn(t))&&e.limitType===t.limitType}function wT(e){return`${vm(mn(e))}|lt:${e.limitType}`}function qr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>AT(r)).join(", ")}]`),cc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Os(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Os(r)).join(",")),`Target(${i})`}(mn(e))}; limitType=${e.limitType})`}function mc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of ja(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=Ky(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,ja(i),r)||i.endAt&&!function(a,l,u){const h=Ky(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,ja(i),r))}(e,t)}function rI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function RT(e){return(t,n)=>{let i=!1;for(const r of ja(e)){const s=sI(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function sI(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ns(u,h):Q(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Q(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Rr(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return cT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=new Mt(G.comparator);function Yn(){return aI}const IT=new Mt(G.comparator);function Ea(...e){let t=IT;for(const n of e)t=t.insert(n.key,n);return t}function CT(e){let t=IT;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function rr(){return Ba()}function DT(){return Ba()}function Ba(){return new Ir(e=>e.toString(),(e,t)=>e.isEqual(t))}const oI=new Mt(G.comparator),lI=new Qt(G.comparator);function st(...e){let t=lI;for(const n of e)t=t.add(n);return t}const uI=new Qt(rt);function cI(){return uI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(t)?"-0":t}}function NT(e){return{integerValue:""+e}}function hI(e,t){return U2(t)?NT(t):Sm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this._=void 0}}function fI(e,t,n){return e instanceof Ou?function(r,s){const a={fields:{[dT]:{stringValue:fT},[gT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ym(s)&&(s=hc(s)),s&&(a.fields[mT]=s),{mapValue:a}}(n,t):e instanceof ho?MT(e,t):e instanceof fo?VT(e,t):function(r,s){const a=OT(r,s),l=Zy(a)+Zy(r.Ae);return Kf(a)&&Kf(r.Ae)?NT(l):Sm(r.serializer,l)}(e,t)}function dI(e,t,n){return e instanceof ho?MT(e,t):e instanceof fo?VT(e,t):n}function OT(e,t){return e instanceof Mu?function(i){return Kf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Ou extends gc{}class ho extends gc{constructor(t){super(),this.elements=t}}function MT(e,t){const n=xT(t);for(const i of e.elements)n.some(r=>Tn(r,i))||n.push(i);return{arrayValue:{values:n}}}class fo extends gc{constructor(t){super(),this.elements=t}}function VT(e,t){let n=xT(t);for(const i of e.elements)n=n.filter(r=>!Tn(r,i));return{arrayValue:{values:n}}}class Mu extends gc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Zy(e){return Lt(e.integerValue||e.doubleValue)}function xT(e){return _m(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function mI(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof ho&&r instanceof ho||i instanceof fo&&r instanceof fo?Ds(i.elements,r.elements,Tn):i instanceof Mu&&r instanceof Mu?Tn(i.Ae,r.Ae):i instanceof Ou&&r instanceof Ou}(e.transform,t.transform)}class gI{constructor(t,n){this.version=t,this.transformResults=n}}class jn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new jn}static exists(t){return new jn(void 0,t)}static updateTime(t){return new jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Bl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class pc{}function kT(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new UT(e.key,jn.none()):new ko(e.key,e.data,jn.none());{const n=e.data,i=Qe.empty();let r=new Qt(se.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Cr(e.key,i,new en(r.toArray()),jn.none())}}function pI(e,t,n){e instanceof ko?function(r,s,a){const l=r.value.clone(),u=Wy(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Cr?function(r,s,a){if(!Bl(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Wy(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(PT(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function qa(e,t,n,i){return e instanceof ko?function(s,a,l,u){if(!Bl(s.precondition,a))return l;const h=s.value.clone(),d=t_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Cr?function(s,a,l,u){if(!Bl(s.precondition,a))return l;const h=t_(s.fieldTransforms,u,a),d=a.data;return d.setAll(PT(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,i):function(s,a,l){return Bl(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function yI(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=OT(i.transform,r||null);s!=null&&(n===null&&(n=Qe.empty()),n.set(i.field,s))}return n||null}function Jy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ds(i,r,(s,a)=>mI(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ko extends pc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cr extends pc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PT(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Wy(e,t,n){const i=new Map;ft(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,dI(a,l,n[r]))}return i}function t_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,fI(s,a,t))}return i}class UT extends pc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _I extends pc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&pI(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=qa(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=qa(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=DT();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=kT(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),st())}isEqual(t){return this.batchId===t.batchId&&Ds(this.mutations,t.mutations,(n,i)=>Jy(n,i))&&Ds(this.baseMutations,t.baseMutations,(n,i)=>Jy(n,i))}}class Am{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){ft(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return oI}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Am(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,ot;function SI(e){switch(e){case U.OK:return Q(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Q(15467,{code:e})}}function LT(e){if(e===void 0)return Kn("GRPC error has no .code"),U.UNKNOWN;switch(e){case zt.OK:return U.OK;case zt.CANCELLED:return U.CANCELLED;case zt.UNKNOWN:return U.UNKNOWN;case zt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case zt.INTERNAL:return U.INTERNAL;case zt.UNAVAILABLE:return U.UNAVAILABLE;case zt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case zt.NOT_FOUND:return U.NOT_FOUND;case zt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case zt.ABORTED:return U.ABORTED;case zt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case zt.DATA_LOSS:return U.DATA_LOSS;default:return Q(39323,{code:e})}}(ot=zt||(zt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new Mi([4294967295,4294967295],0);function e_(e){const t=AI().encode(e),n=new tT;return n.update(t),new Uint8Array(n.digest())}function n_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Mi([n,i],0),new Mi([r,s],0)]}class bm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ta(`Invalid padding: ${n}`);if(i<0)throw new Ta(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Mi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Mi.fromNumber(i)));return r.compare(bI)===1&&(r=new Mi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=e_(t),[i,r]=n_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new bm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=e_(t),[i,r]=n_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Po.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new yc(Z.min(),r,new Mt(rt),Yn(),st())}}class Po{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Po(i,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class zT{constructor(t,n){this.targetId=t,this.Ce=n}}class jT{constructor(t,n,i=oe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class i_{constructor(){this.ve=0,this.Fe=r_(),this.Me=oe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=st(),n=st(),i=st();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q(38017,{changeType:s})}}),new Po(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=r_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Yn(),this.Je=Sl(),this.He=Sl(),this.Ye=new Mt(rt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Q(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Xf(s))if(i===0){const a=new G(s.path);this.et(n,a,de.newNoDocument(a,Z.min()))}else ft(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=ji(i).toUint8Array()}catch(u){if(u instanceof hT)return Cs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new bm(a,r,s)}catch(u){return Cs(u instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Xf(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,de.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=st();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new yc(t,n,this.Ye,this.je,i);return this.je=Yn(),this.Je=Sl(),this.He=Sl(),this.Ye=new Mt(rt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new i_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Qt(rt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Qt(rt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||q("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new i_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Sl(){return new Mt(G.comparator)}function r_(){return new Mt(G.comparator)}const RI={asc:"ASCENDING",desc:"DESCENDING"},II={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CI={and:"AND",or:"OR"};class DI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Zf(e,t){return e.useProto3Json||cc(t)?t:{value:t}}function Vu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BT(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function NI(e,t){return Vu(e,t.toTimestamp())}function gn(e){return ft(!!e,49232),Z.fromTimestamp(function(n){const i=zi(n);return new At(i.seconds,i.nanos)}(e))}function wm(e,t){return Jf(e,t).canonicalString()}function Jf(e,t){const n=function(r){return new Ot(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function qT(e){const t=Ot.fromString(e);return ft(KT(t),10190,{key:t.toString()}),t}function Wf(e,t){return wm(e.databaseId,t.path)}function Uh(e,t){const n=qT(t);if(n.get(1)!==e.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(GT(n))}function HT(e,t){return wm(e.databaseId,t)}function OI(e){const t=qT(e);return t.length===4?Ot.emptyPath():GT(t)}function td(e){return new Ot(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function GT(e){return ft(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function s_(e,t,n){return{name:Wf(e,t),fields:n.value.mapValue.fields}}function MI(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ft(d===void 0||typeof d=="string",58123),oe.fromBase64String(d||"")):(ft(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),oe.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?U.UNKNOWN:LT(h.code);return new H(d,h.message||"")}(a);n=new jT(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Uh(e,i.document.name),s=gn(i.document.updateTime),a=i.document.createTime?gn(i.document.createTime):Z.min(),l=new Qe({mapValue:{fields:i.document.fields}}),u=de.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new ql(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Uh(e,i.document),s=i.readTime?gn(i.readTime):Z.min(),a=de.newNoDocument(r,s),l=i.removedTargetIds||[];n=new ql([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Uh(e,i.document),s=i.removedTargetIds||[];n=new ql([],s,r,null)}else{if(!("filter"in t))return Q(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new TI(r,s),l=i.targetId;n=new zT(l,a)}}return n}function VI(e,t){let n;if(t instanceof ko)n={update:s_(e,t.key,t.value)};else if(t instanceof UT)n={delete:Wf(e,t.key)};else if(t instanceof Cr)n={update:s_(e,t.key,t.data),updateMask:qI(t.fieldMask)};else{if(!(t instanceof _I))return Q(16599,{Vt:t.type});n={verify:Wf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Ou)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ho)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Q(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:NI(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(e,t.precondition)),n}function xI(e,t){return e&&e.length>0?(ft(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?gn(r.updateTime):gn(s);return a.isEqual(Z.min())&&(a=gn(s)),new gI(a,r.transformResults||[])}(n,t))):[]}function kI(e,t){return{documents:[HT(e,t.path)]}}function PI(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=HT(e,r);const s=function(h){if(h.length!==0)return QT(Sn.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Hr(m.field),direction:zI(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Zf(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function UI(e){let t=OI(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ft(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=FT(p);return m instanceof Sn&&TT(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(N){return new Nu(Gr(N.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,cc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,_=p.values||[];return new Du(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,_=p.values||[];return new Du(_,m)}(n.endAt)),eI(t,r,a,s,l,"F",u,h)}function LI(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function FT(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Gr(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Gr(n.unaryFilter.field);return Ft.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gr(n.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gr(n.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ft.create(Gr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Sn.create(n.compositeFilter.filters.map(i=>FT(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(e):Q(30097,{filter:e})}function zI(e){return RI[e]}function jI(e){return II[e]}function BI(e){return CI[e]}function Hr(e){return{fieldPath:e.canonicalString()}}function Gr(e){return se.fromServerFormat(e.fieldPath)}function QT(e){return e instanceof Ft?function(n){if(n.op==="=="){if(Qy(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NAN"}};if(Fy(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qy(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NOT_NAN"}};if(Fy(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hr(n.field),op:jI(n.op),value:n.value}}}(e):e instanceof Sn?function(n){const i=n.getFilters().map(r=>QT(r));return i.length===1?i[0]:{compositeFilter:{op:BI(n.op),filters:i}}}(e):Q(54877,{filter:e})}function qI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function KT(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t,n,i,r,s=Z.min(),a=Z.min(),l=oe.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Ei(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t){this.yt=t}}function GI(e){const t=UI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?$f(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.Cn=new QI}addToCollectionParentIndex(t,n){return this.Cn.add(n),k.resolve()}getCollectionParents(t,n){return k.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return k.resolve()}deleteFieldIndex(t,n){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,n){return k.resolve()}getDocumentsMatchingTarget(t,n){return k.resolve(null)}getIndexType(t,n){return k.resolve(0)}getFieldIndexes(t,n){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,n){return k.resolve(Li.min())}getMinOffsetFromCollectionGroup(t,n){return k.resolve(Li.min())}updateCollectionGroup(t,n,i){return k.resolve()}updateIndexEntries(t,n){return k.resolve()}}class QI{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Qt(Ot.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Qt(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YT=41943040;class Re{static withCacheSize(t){return new Re(t,Re.DEFAULT_COLLECTION_PERCENTILE,Re.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Re.DEFAULT_COLLECTION_PERCENTILE=10,Re.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Re.DEFAULT=new Re(YT,Re.DEFAULT_COLLECTION_PERCENTILE,Re.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Re.DISABLED=new Re(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ms(0)}static cr(){return new Ms(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="LruGarbageCollector",KI=1048576;function l_([e,t],[n,i]){const r=rt(e,n);return r===0?rt(t,i):r}class YI{constructor(t){this.Ir=t,this.buffer=new Qt(l_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();l_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XI{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){q(o_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fs(n)?q(o_,"Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Vr(3e5)})}}class $I{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return k.resolve(uc.ce);const i=new YI(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(a_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),Br()<=it.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function ZI(e,t){return new $I(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.changes=new Ir(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,de.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?k.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&qa(i.mutation,r,en.empty(),At.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,st()).next(()=>i))}getLocalViewOfDocuments(t,n,i=st()){const r=rr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=Ea();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=rr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,st()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=Yn();const a=Ba(),l=function(){return Ba()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof Cr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),qa(d.mutation,h,d.mutation.getFieldMask(),At.now())):a.set(h.key,en.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new WI(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=Ba();let r=new Mt((a,l)=>a-l),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||en.empty();d=l.applyToLocalView(h,d),i.set(u,d);const p=(r.get(l.batchId)||st()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=DT();d.forEach(m=>{if(!s.has(m)){const _=kT(n.get(m),i.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return k.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):nI(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):k.resolve(rr());let l=oo,u=s;return a.next(h=>k.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,st())).next(d=>({batchId:l,changes:CT(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let r=Ea();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=Ea();return this.indexManager.getCollectionParents(t,s).next(l=>k.forEach(l,u=>{const h=function(p,m){return new fc(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,de.newInvalidDocument(d)))});let l=Ea();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&qa(d.mutation,h,en.empty(),At.now()),mc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return k.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:gn(r.createTime)}}(n)),k.resolve()}getNamedQuery(t,n){return k.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:GI(r.bundledQuery),readTime:gn(r.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.overlays=new Mt(G.comparator),this.qr=new Map}getOverlay(t,n){return k.resolve(this.overlays.get(n))}getOverlays(t,n){const i=rr();return k.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),k.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),k.resolve()}getOverlaysForCollection(t,n,i){const r=rr(),s=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return k.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Mt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=rr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=rr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return k.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new EI(n,i));let s=this.qr.get(n);s===void 0&&(s=st(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.sessionToken=oe.EMPTY_BYTE_STRING}getSessionToken(t){return k.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,k.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.Qr=new Qt(Yt.$r),this.Ur=new Qt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Yt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Yt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new Ot([])),i=new Yt(n,t),r=new Yt(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new Ot([])),i=new Yt(n,t),r=new Yt(n,t+1);let s=st();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new Yt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Yt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||rt(t.Yr,n.Yr)}static Kr(t,n){return rt(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(Yt.$r)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new vI(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new Yt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return k.resolve(a)}lookupMutationBatch(t,n){return k.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?pm:this.tr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Yt(n,0),r=new Yt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Qt(rt);return n.forEach(r=>{const s=new Yt(r,0),a=new Yt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),k.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const a=new Yt(new G(s),0);let l=new Qt(rt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),k.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return k.forEach(n.mutations,r=>{const s=new Yt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Yt(n,0),r=this.Zr.firstAfterOrEqual(i);return k.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t){this.ri=t,this.docs=function(){return new Mt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return k.resolve(i?i.document.mutableCopy():de.newInvalidDocument(n))}getEntries(t,n){let i=Yn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():de.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Yn();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||V2(M2(d),i)<=0||(r.has(d.key)||mc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Q(9500)}ii(t,n){return k.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new aC(this)}getSize(t){return k.resolve(this.size)}}class aC extends JI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),k.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.persistence=t,this.si=new Ir(n=>vm(n),Em),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Rm,this.targetCount=0,this.ai=Ms.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),k.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ms(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,k.resolve()}updateTargetData(t,n){return this.Pr(n),k.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),k.waitFor(s).next(()=>r)}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return k.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),k.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),k.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),k.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return k.resolve(i)}containsKey(t,n){return k.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t,n){this.ui={},this.overlays={},this.ci=new uc(0),this.li=!1,this.li=!0,this.hi=new iC,this.referenceDelegate=t(this),this.Pi=new oC(this),this.indexManager=new FI,this.remoteDocumentCache=function(r){return new sC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new HI(n),this.Ii=new eC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new nC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new rC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){q("MemoryPersistence","Starting transaction:",t);const r=new lC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return k.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class lC extends k2{constructor(t){super(),this.currentSequenceNumber=t}}class Im{constructor(t){this.persistence=t,this.Ri=new Rm,this.Vi=null}static mi(t){return new Im(t)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),k.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),k.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),k.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,i=>{const r=G.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return k.or([()=>k.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class xu{constructor(t,n){this.persistence=t,this.pi=new Ir(i=>L2(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=ZI(this,n)}static mi(t,n){return new xu(t,n)}Ei(){}di(t){return k.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return k.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?k.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),k.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),k.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zl(t.data.value)),n}br(t,n,i){return k.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return k.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=st(),r=st();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Cm(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Ww()?8:P2(pe())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new uC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(Br()<=it.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(Br()<=it.DEBUG&&q("QueryEngine","Query:",qr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Br()<=it.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mn(n))):k.resolve())}ys(t,n){if($y(n))return k.resolve(null);let i=mn(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=$f(n,null,"F"),i=mn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=st(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,$f(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return $y(n)||r.isEqual(Z.min())?k.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?k.resolve(null):(Br()<=it.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qr(n)),this.vs(t,a,n,O2(r,oo)).next(l=>l))})}Ds(t,n){let i=new Qt(RT(t));return n.forEach((r,s)=>{mc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return Br()<=it.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",qr(n)),this.ps.getDocumentsMatchingQuery(t,n,Li.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="LocalStore",hC=3e8;class fC{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Mt(rt),this.xs=new Ir(s=>vm(s),Em),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function dC(e,t,n,i){return new fC(e,t,n,i)}async function $T(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=st();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function mC(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let _=k.resolve();return m.forEach(N=>{_=_.next(()=>d.getEntry(u,N)).next(V=>{const x=h.docVersions.get(N);ft(x!==null,48541),V.version.compareTo(x)<0&&(p.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=st();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function ZT(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function gC(e,t){const n=J(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?_=_.withResumeToken(oe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(p,_),function(V,x,A){return V.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=hC?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=Yn(),h=st();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(pC(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return k.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function pC(e,t,n){let i=st(),r=st();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=Yn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):q(Dm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function yC(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=pm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function _C(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,k.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Ei(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function ed(e,t,n){const i=J(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Fs(a))throw a;q(Dm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function u_(e,t,n){const i=J(e);let r=Z.min(),s=st();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const p=J(u),m=p.xs.get(d);return m!==void 0?k.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(i,a,mn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Z.min(),n?s:st())).next(l=>(vC(i,rI(t),l),{documents:l,Qs:s})))}function vC(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class c_{constructor(){this.activeTargetIds=cI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class EC{constructor(){this.Mo=new c_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new c_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="ConnectivityMonitor";class f_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(h_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){q(h_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al=null;function nd(){return Al===null?Al=function(){return 268435456+Math.round(2147483648*Math.random())}():Al++,"0x"+Al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="RestConnection",SC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Iu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=nd(),l=this.zo(t,n.toUriEncodedString());q(Lh,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=Bs(h);return this.Jo(t,l,u,i,d).then(p=>(q(Lh,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Cs(Lh,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=SC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he="WebChannelConnection";class wC extends AC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=nd();return new Promise((l,u)=>{const h=new eT;h.setWithCredentials(!0),h.listenOnce(nT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ll.NO_ERROR:const p=h.getResponseJson();q(he,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ll.TIMEOUT:q(he,`RPC '${t}' ${a} timed out`),u(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:const m=h.getStatus();if(q(he,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const V=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(N.status);u(new H(V,N.message))}else u(new H(U.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(U.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{q(he,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);q(he,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=nd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=sT(),l=rT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");q(he,`Creating RPC '${t}' stream ${r}: ${d}`,u);const p=a.createWebChannel(d,u);this.I_(p);let m=!1,_=!1;const N=new bC({Yo:x=>{_?q(he,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(m||(q(he,`Opening RPC '${t}' stream ${r} transport.`),p.open(),m=!0),q(he,`RPC '${t}' stream ${r} sending:`,x),p.send(x))},Zo:()=>p.close()}),V=(x,A,E)=>{x.listen(A,w=>{try{E(w)}catch(D){setTimeout(()=>{throw D},0)}})};return V(p,va.EventType.OPEN,()=>{_||(q(he,`RPC '${t}' stream ${r} transport opened.`),N.o_())}),V(p,va.EventType.CLOSE,()=>{_||(_=!0,q(he,`RPC '${t}' stream ${r} transport closed`),N.a_(),this.E_(p))}),V(p,va.EventType.ERROR,x=>{_||(_=!0,Cs(he,`RPC '${t}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),N.a_(new H(U.UNAVAILABLE,"The operation could not be completed")))}),V(p,va.EventType.MESSAGE,x=>{var A;if(!_){const E=x.data[0];ft(!!E,16349);const w=E,D=(w==null?void 0:w.error)||((A=w[0])==null?void 0:A.error);if(D){q(he,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let B=function(S){const v=zt[S];if(v!==void 0)return LT(v)}(L),T=D.message;B===void 0&&(B=U.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,N.a_(new H(B,T)),p.close()}else q(he,`RPC '${t}' stream ${r} received:`,E),N.u_(E)}}),V(l,iT.STAT_EVENT,x=>{x.stat===Gf.PROXY?q(he,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===Gf.NOPROXY&&q(he,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(e){return new DI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="PersistentStream";class WT{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new H(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return q(d_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(q(d_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RC extends WT{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=MI(this.serializer,t),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?gn(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=td(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Xf(u)?{documents:kI(s,u)}:{query:PI(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=BT(s,a.resumeToken);const h=Zf(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=Vu(s,a.snapshotVersion.toTimestamp());const h=Zf(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=LI(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=td(this.serializer),n.removeTarget=t,this.q_(n)}}class IC extends WT{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=xI(t.writeResults,t.commitTime),i=gn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=td(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>VI(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{}class DC extends CC{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Jf(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Jf(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class NC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="RemoteStore";class OC{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Dr(this)&&(q(Er,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await Uo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await vc(h)}(this))})}),this.Ra=new NC(i,r)}}async function vc(e){if(Dr(e))for(const t of e.da)await t(!0)}async function Uo(e){for(const t of e.da)await t(!1)}function tS(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Vm(n)?Mm(n):Qs(n).O_()&&Om(n,t))}function Nm(e,t){const n=J(e),i=Qs(n);n.Ia.delete(t),i.O_()&&eS(n,t),n.Ia.size===0&&(i.O_()?i.L_():Dr(n)&&n.Ra.set("Unknown"))}function Om(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Qs(e).Y_(t)}function eS(e,t){e.Va.Ue(t),Qs(e).Z_(t)}function Mm(e){e.Va=new wI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Qs(e).start(),e.Ra.ua()}function Vm(e){return Dr(e)&&!Qs(e).x_()&&e.Ia.size>0}function Dr(e){return J(e).Ea.size===0}function nS(e){e.Va=void 0}async function MC(e){e.Ra.set("Online")}async function VC(e){e.Ia.forEach((t,n)=>{Om(e,t)})}async function xC(e,t){nS(e),Vm(e)?(e.Ra.ha(t),Mm(e)):e.Ra.set("Unknown")}async function kC(e,t,n){if(e.Ra.set("Online"),t instanceof jT&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){q(Er,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ku(e,i)}else if(t instanceof ql?e.Va.Ze(t):t instanceof zT?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await ZT(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(oe.EMPTY_BYTE_STRING,d.snapshotVersion)),eS(s,u);const p=new Ei(d.target,u,h,d.sequenceNumber);Om(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){q(Er,"Failed to raise snapshot:",i),await ku(e,i)}}async function ku(e,t,n){if(!Fs(t))throw t;e.Ea.add(1),await Uo(e),e.Ra.set("Offline"),n||(n=()=>ZT(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{q(Er,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vc(e)})}function iS(e,t){return t().catch(n=>ku(e,n,t))}async function Ec(e){const t=J(e),n=qi(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:pm;for(;PC(t);)try{const r=await yC(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,UC(t,r)}catch(r){await ku(t,r)}rS(t)&&sS(t)}function PC(e){return Dr(e)&&e.Ta.length<10}function UC(e,t){e.Ta.push(t);const n=qi(e);n.O_()&&n.X_&&n.ea(t.mutations)}function rS(e){return Dr(e)&&!qi(e).x_()&&e.Ta.length>0}function sS(e){qi(e).start()}async function LC(e){qi(e).ra()}async function zC(e){const t=qi(e);for(const n of e.Ta)t.ea(n.mutations)}async function jC(e,t,n){const i=e.Ta.shift(),r=Am.from(i,t,n);await iS(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Ec(e)}async function BC(e,t){t&&qi(e).X_&&await async function(i,r){if(function(a){return SI(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();qi(i).B_(),await iS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ec(i)}}(e,t),rS(e)&&sS(e)}async function m_(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),q(Er,"RemoteStore received new credentials");const i=Dr(n);n.Ea.add(3),await Uo(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vc(n)}async function qC(e,t){const n=J(e);t?(n.Ea.delete(2),await vc(n)):t||(n.Ea.add(2),await Uo(n),n.Ra.set("Unknown"))}function Qs(e){return e.ma||(e.ma=function(n,i,r){const s=J(n);return s.sa(),new RC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:MC.bind(null,e),t_:VC.bind(null,e),r_:xC.bind(null,e),H_:kC.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Vm(e)?Mm(e):e.Ra.set("Unknown")):(await e.ma.stop(),nS(e))})),e.ma}function qi(e){return e.fa||(e.fa=function(n,i,r){const s=J(n);return s.sa(),new IC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:LC.bind(null,e),r_:BC.bind(null,e),ta:zC.bind(null,e),na:jC.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ec(e)):(await e.fa.stop(),e.Ta.length>0&&(q(Er,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new xm(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(e,t){if(Kn("AsyncQueue",`${t}: ${e}`),Fs(e))return new H(U.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{static emptySet(t){return new fs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Ea(),this.sortedSet=new Mt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof fs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new fs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.ga=new Mt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Q(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Vs{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Vs(t,n,fs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class GC{constructor(){this.queries=p_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=p_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function p_(){return new Ir(e=>wT(e),dc)}async function FC(e,t){const n=J(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new HC,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=km(a,`Initialization of query '${qr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Pm(n)}async function QC(e,t){const n=J(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function KC(e,t){const n=J(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&Pm(n)}function YC(e,t,n){const i=J(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function Pm(e){e.Ca.forEach(t=>{t.next()})}var id,y_;(y_=id||(id={})).Ma="default",y_.Cache="cache";class XC{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Vs(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Vs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==id.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t){this.key=t}}class oS{constructor(t){this.key=t}}class $C{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=RT(t),this.tu=new fs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new g_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,p)=>{const m=r.get(d),_=mc(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?N!==V&&(i.track({type:3,doc:_}),x=!0):this.su(m,_)||(i.track({type:2,doc:_}),x=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),x=!0):m&&!_&&(i.track({type:1,doc:m}),x=!0,(u||h)&&(l=!0)),x&&(_?(a=a.add(_),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,p)=>function(_,N){const V=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:x})}};return V(_)-V(N)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Vs(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=st(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new oS(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new aS(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=st();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Vs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Um="SyncEngine";class ZC{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class JC{constructor(t){this.key=t,this.hu=!1}}class WC{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ir(l=>wT(l),dc),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(G.comparator),this.Au=new Map,this.Ru=new Rm,this.Vu={},this.mu=new Map,this.fu=Ms.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tD(e,t,n=!0){const i=dS(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await lS(i,t,n,!0),r}async function eD(e,t){const n=dS(e);await lS(n,t,!0,!1)}async function lS(e,t,n,i){const r=await _C(e.localStore,mn(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await nD(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&tS(e.remoteStore,r),l}async function nD(e,t,n,i,r){e.pu=(p,m,_)=>async function(V,x,A,E){let w=x.view.ru(A);w.Cs&&(w=await u_(V.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,w)));const D=E&&E.targetChanges.get(x.targetId),L=E&&E.targetMismatches.get(x.targetId)!=null,B=x.view.applyChanges(w,V.isPrimaryClient,D,L);return v_(V,x.targetId,B.au),B.snapshot}(e,p,m,_);const s=await u_(e.localStore,t,!0),a=new $C(t,s.Qs),l=a.ru(s.documents),u=Po.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);v_(e,n,h.au);const d=new ZC(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function iD(e,t,n){const i=J(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!dc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ed(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Nm(i.remoteStore,r.targetId),rd(i,r.targetId)}).catch(Gs)):(rd(i,r.targetId),await ed(i.localStore,r.targetId,!0))}async function rD(e,t){const n=J(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Nm(n.remoteStore,i.targetId))}async function sD(e,t,n){const i=fD(e);try{const r=await function(a,l){const u=J(a),h=At.now(),d=l.reduce((_,N)=>_.add(N.key),st());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=Yn(),V=st();return u.Ns.getEntries(_,d).next(x=>{N=x,N.forEach((A,E)=>{E.isValidDocument()||(V=V.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(x=>{p=x;const A=[];for(const E of l){const w=yI(E,p.get(E.key).overlayedDocument);w!=null&&A.push(new Cr(E.key,w,_T(w.value.mapValue),jn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,A,l)}).next(x=>{m=x;const A=x.applyToLocalDocumentSet(p,V);return u.documentOverlayCache.saveOverlays(_,x.batchId,A)})}).then(()=>({batchId:m.batchId,changes:CT(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Mt(rt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await Lo(i,r.changes),await Ec(i.remoteStore)}catch(r){const s=km(r,"Failed to persist write");n.reject(s)}}async function uS(e,t){const n=J(e);try{const i=await gC(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ft(a.hu,14607):r.removedDocuments.size>0&&(ft(a.hu,42227),a.hu=!1))}),await Lo(n,i,t)}catch(i){await Gs(i)}}function __(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Pm(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function aD(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Mt(G.comparator);a=a.insert(s,de.newNoDocument(s,Z.min()));const l=st().add(s),u=new yc(Z.min(),new Map,new Mt(rt),a,l);await uS(i,u),i.du=i.du.remove(s),i.Au.delete(t),Lm(i)}else await ed(i.localStore,t,!1).then(()=>rd(i,t,n)).catch(Gs)}async function oD(e,t){const n=J(e),i=t.batch.batchId;try{const r=await mC(n.localStore,t);hS(n,i,null),cS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Lo(n,r)}catch(r){await Gs(r)}}async function lD(e,t,n){const i=J(e);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(ft(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);hS(i,t,n),cS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Lo(i,r)}catch(r){await Gs(r)}}function cS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function hS(e,t,n){const i=J(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function rd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||fS(e,i)})}function fS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Nm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Lm(e))}function v_(e,t,n){for(const i of n)i instanceof aS?(e.Ru.addReference(i.key,t),uD(e,i)):i instanceof oS?(q(Um,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||fS(e,i.key)):Q(19791,{wu:i})}function uD(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(q(Um,"New document in limbo: "+n),e.Eu.add(i),Lm(e))}function Lm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(Ot.fromString(t)),i=e.fu.next();e.Au.set(i,new JC(n)),e.du=e.du.insert(n,i),tS(e.remoteStore,new Ei(mn(Tm(n.path)),i,"TargetPurposeLimboResolution",uc.ce))}}async function Lo(e,t,n){const i=J(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){r.push(h);const p=Cm.As(u.targetId,h);s.push(p)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(h,m=>k.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>k.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Fs(p))throw p;q(Dm,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const _=d.Ms.get(m),N=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,s))}async function cD(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){q(Um,"User change. New user:",t.toKey());const i=await $T(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Lo(n,i.Ls)}}function hD(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return st().add(i.key);{let r=st();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function dS(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=aD.bind(null,t),t.Pu.H_=KC.bind(null,t.eventManager),t.Pu.yu=YC.bind(null,t.eventManager),t}function fD(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lD.bind(null,t),t}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_c(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return dC(this.persistence,new cC,t.initialUser,this.serializer)}Cu(t){return new XT(Im.mi,this.serializer)}Du(t){return new EC}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class dD extends Pu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ft(this.persistence.referenceDelegate instanceof xu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new XI(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Re.withCacheSize(this.cacheSizeBytes):Re.DEFAULT;return new XT(i=>xu.mi(i,n),this.serializer)}}class sd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>__(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cD.bind(null,this.syncEngine),await qC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new GC}()}createDatastore(t){const n=_c(t.databaseInfo.databaseId),i=function(s){return new wC(s)}(t.databaseInfo);return function(s,a,l,u){return new DC(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new OC(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>__(this.syncEngine,n,0),function(){return f_.v()?new f_:new TC}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const p=new WC(r,s,a,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=J(r);q(Er,"RemoteStore shutting down."),s.Ea.add(5),await Uo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}sd.provider={build:()=>new sd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Kn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="FirestoreClient";class gD{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=fe.UNAUTHENTICATED,this.clientId=mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{q(Hi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(q(Hi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=km(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function jh(e,t){e.asyncQueue.verifyOperationInProgress(),q(Hi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $T(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function E_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await pD(e);q(Hi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>m_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>m_(t.remoteStore,r)),e._onlineComponents=t}async function pD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){q(Hi,"Using user provided OfflineComponentProvider");try{await jh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Cs("Error using user provided cache. Falling back to memory cache: "+n),await jh(e,new Pu)}}else q(Hi,"Using default OfflineComponentProvider"),await jh(e,new dD(void 0));return e._offlineComponents}async function mS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(q(Hi,"Using user provided OnlineComponentProvider"),await E_(e,e._uninitializedComponentsProvider._online)):(q(Hi,"Using default OnlineComponentProvider"),await E_(e,new sd))),e._onlineComponents}function yD(e){return mS(e).then(t=>t.syncEngine)}async function _D(e){const t=await mS(e),n=t.eventManager;return n.onListen=tD.bind(null,t.syncEngine),n.onUnlisten=iD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=eD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rD.bind(null,t.syncEngine),n}function vD(e,t,n={}){const i=new Vi;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new mD({next:m=>{d.Nu(),a.enqueueAndForget(()=>QC(s,p));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new H(U.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new H(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new XC(Tm(l.path),d,{includeMetadataChanges:!0,qa:!0});return FC(s,p)}(await _D(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firestore.googleapis.com",S_=!0;class A_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pS,this.ssl=S_}else this.host=t.host,this.ssl=t.ssl??S_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=YT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<KI)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}N2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zm{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new v2;switch(i.type){case"firstParty":return new A2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=T_.get(n);i&&(q("ComponentProvider","Removing Datastore"),T_.delete(n),i.terminate())}(this),Promise.resolve()}}function ED(e,t,n,i={}){var h;e=ao(e,zm);const r=Bs(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(Q0(`https://${l}`),K0("Firestore",!0)),s.host!==pS&&s.host!==l&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!yr(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=fe.MOCK_USER;else{d=Gw(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new H(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new fe(m)}e._authCredentials=new E2(new oT(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new jm(this.firestore,t,this._query)}}class Jt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jt(this.firestore,t,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(xo(n,Jt._jsonSchema))return new Jt(t,i||null,new G(Ot.fromString(n.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Bt("string",Jt._jsonSchemaVersion),referencePath:Bt("string")};class mo extends jm{constructor(t,n,i){super(t,n,Tm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jt(this.firestore,null,new G(t))}withConverter(t){return new mo(this.firestore,t,this._path)}}function ad(e,t,...n){if(e=En(e),arguments.length===1&&(t=mm.newId()),D2("doc","path",t),e instanceof zm){const i=Ot.fromString(t,...n);return Uy(i),new Jt(e,null,new G(i))}{if(!(e instanceof Jt||e instanceof mo))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Ot.fromString(t,...n));return Uy(i),new Jt(e.firestore,e instanceof mo?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="AsyncQueue";class w_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JT(this,"async_queue_retry"),this._c=()=>{const i=zh();i&&q(b_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=zh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=zh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Fs(t))throw t;q(b_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",R_(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=xm.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:R_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function R_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Bm extends zm{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new w_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w_(t),this._firestoreClient=void 0,await t}}}function TD(e,t){const n=typeof e=="object"?e:Z0(),i=typeof e=="string"?e:Iu,r=fm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=qw("firestore");s&&ED(r,...s)}return r}function yS(e){if(e._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||SD(e),e._firestoreClient}function SD(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new B2(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new gD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ke(oe.fromBase64String(t))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ke(oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ke._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(xo(t,Ke._jsonSchema))return Ke.fromBase64String(t.bytes)}}Ke._jsonSchemaVersion="firestore/bytes/1.0",Ke._jsonSchema={type:Bt("string",Ke._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return rt(this._lat,t._lat)||rt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(t){if(xo(t,pn._jsonSchema))return new pn(t.latitude,t.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:Bt("string",pn._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:yn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(xo(t,yn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new yn(t.vectorValues);throw new H(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yn._jsonSchemaVersion="firestore/vectorValue/1.0",yn._jsonSchema={type:Bt("string",yn._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=/^__.*__$/;class bD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Cr(t,this.data,this.fieldMask,n,this.fieldTransforms):new ko(t,this.data,n,this.fieldTransforms)}}function vS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:e})}}class Hm{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Uu(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(vS(this.Ac)&&AD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class wD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||_c(t)}Cc(t,n,i,r=!1){return new Hm({Ac:t,methodName:n,Dc:i,path:se.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RD(e){const t=e._freezeSettings(),n=_c(e._databaseId);return new wD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ID(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);AS("Data must be an object, but it was:",a,i);const l=TS(i,a);let u,h;if(s.merge)u=new en(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=CD(t,p,n);if(!a.contains(m))throw new H(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ND(d,m)||d.push(m)}u=new en(d),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new bD(new Qe(l),u,h)}function ES(e,t){if(SS(e=En(e)))return AS("Unsupported field value:",t,e),TS(e,t);if(e instanceof _S)return function(i,r){if(!vS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=ES(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=En(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=At.fromDate(i);return{timestampValue:Vu(r.serializer,s)}}if(i instanceof At){const s=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vu(r.serializer,s)}}if(i instanceof pn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ke)return{bytesValue:BT(r.serializer,i._byteString)};if(i instanceof Jt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof yn)return function(a,l){return{mapValue:{fields:{[pT]:{stringValue:yT},[Cu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Sm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${gm(i)}`)}(e,t)}function TS(e,t){const n={};return cT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rr(e,(i,r)=>{const s=ES(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function SS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof At||e instanceof pn||e instanceof Ke||e instanceof Jt||e instanceof _S||e instanceof yn)}function AS(e,t,n){if(!SS(n)||!lT(n)){const i=gm(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function CD(e,t,n){if((t=En(t))instanceof qm)return t._internalPath;if(typeof t=="string")return bS(e,t);throw Uu("Field path arguments must be of type string or ",e,!1,void 0,n)}const DD=new RegExp("[~\\*/\\[\\]]");function bS(e,t,n){if(t.search(DD)>=0)throw Uu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qm(...t.split("."))._internalPath}catch{throw Uu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Uu(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new H(U.INVALID_ARGUMENT,l+e+u)}function ND(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new OD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(RS("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OD extends wS{data(){return super.data()}}function RS(e,t){return typeof t=="string"?bS(e,t):t instanceof qm?t._internalPath:t._delegate._internalPath}class MD{convertValue(t,n="none"){switch(Bi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Lt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Q(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Rr(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[Cu].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Lt(a.doubleValue));return new yn(n)}convertGeoPoint(t){return new pn(Lt(t.latitude),Lt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=hc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(lo(t));default:return null}}convertTimestamp(t){const n=zi(t);return new At(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Ot.fromString(t);ft(KT(i),9688,{name:t});const r=new uo(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||Kn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Sa{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class fr extends wS{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(RS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=fr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fr._jsonSchemaVersion="firestore/documentSnapshot/1.0",fr._jsonSchema={type:Bt("string",fr._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Hl extends fr{data(t={}){return super.data(t)}}class Ha{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Sa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Hl(this._firestore,this._userDataWriter,i.key,i,new Sa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Hl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Hl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:xD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ha._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function xD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(e){e=ao(e,Jt);const t=ao(e.firestore,Bm);return vD(yS(t),e._key).then(n=>LD(t,e,n))}Ha._jsonSchemaVersion="firestore/querySnapshot/1.0",Ha._jsonSchema={type:Bt("string",Ha._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class PD extends MD{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ke(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function IS(e,t,n){e=ao(e,Jt);const i=ao(e.firestore,Bm),r=VD(e.converter,t,n);return UD(i,[ID(RD(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,jn.none())])}function UD(e,t){return function(i,r){const s=new Vi;return i.asyncQueue.enqueueAndForget(async()=>sD(await yD(i),r,s)),s.promise}(yS(e),t)}function LD(e,t,n){const i=n.docs.get(t._key),r=new PD(e);return new fr(e,r,t._key,i,new Sa(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){Hs=r})(qs),Is(new _r("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Bm(new T2(i.getProvider("auth-internal")),new b2(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Oi(Vy,xy,t),Oi(Vy,xy,"esm2020")})();function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zD=CS,DS=new Mo("auth","Firebase",CS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new cm("@firebase/auth");function jD(e,...t){Lu.logLevel<=it.WARN&&Lu.warn(`Auth (${qs}): ${e}`,...t)}function Gl(e,...t){Lu.logLevel<=it.ERROR&&Lu.error(`Auth (${qs}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e,...t){throw Gm(e,...t)}function _n(e,...t){return Gm(e,...t)}function NS(e,t,n){const i={...zD(),[t]:n};return new Mo("auth","Firebase",i).create(t,{appName:e.name})}function xi(e){return NS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gm(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return DS.create(e,...t)}function Y(e,t,...n){if(!e)throw Gm(t,...n)}function Pn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Gl(t),new Error(t)}function $n(e,t){e||Pn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function BD(){return I_()==="http:"||I_()==="https:"}function I_(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BD()||$w()||"connection"in navigator)?navigator.onLine:!0}function HD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,n){this.shortDelay=t,this.longDelay=n,$n(n>t,"Short delay should be less than long delay!"),this.isMobile=Kw()||Zw()}get(){return qD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t){$n(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QD=new zo(3e4,6e4);function Tc(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ks(e,t,n,i,r={}){return MS(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Vo({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return Xw()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Bs(e.emulatorConfig.host)&&(h.credentials="include"),OS.fetch()(await xS(e,e.config.apiHost,n,l),h)})}async function MS(e,t,n){e._canInitEmulator=!1;const i={...GD,...t};try{const r=new KD(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw bl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw bl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw bl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw NS(e,d,h);Xn(e,d)}}catch(r){if(r instanceof Jn)throw r;Xn(e,"network-request-failed",{message:String(r)})}}async function VS(e,t,n,i,r={}){const s=await Ks(e,t,n,i,r);return"mfaPendingCredential"in s&&Xn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function xS(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?Fm(e.config,r):`${e.config.apiScheme}://${r}`;return FD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class KD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_n(this.auth,"network-request-failed")),QD.get())})}}function bl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_n(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(e,t){return Ks(e,"POST","/v1/accounts:delete",t)}async function zu(e,t){return Ks(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function XD(e,t=!1){const n=En(e),i=await n.getIdToken(t),r=Qm(i);Y(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ga(Bh(r.auth_time)),issuedAtTime:Ga(Bh(r.iat)),expirationTime:Ga(Bh(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bh(e){return Number(e)*1e3}function Qm(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const r=q0(n);return r?JSON.parse(r):(Gl("Failed to decode base64 JWT payload"),null)}catch(r){return Gl("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function C_(e){const t=Qm(e);return Y(t,"internal-error"),Y(typeof t.exp<"u","internal-error"),Y(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Jn&&$D(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function $D({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(e){var p;const t=e.auth,n=await e.getIdToken(),i=await go(e,zu(t,{idToken:n}));Y(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(p=r.providerUserInfo)!=null&&p.length?kS(r.providerUserInfo):[],a=WD(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ld(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function JD(e){const t=En(e);await ju(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function WD(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function kS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(e,t){const n=await MS(e,{},async()=>{const i=Vo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await xS(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Bs(e.emulatorConfig.host)&&(u.credentials="include"),OS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eN(e,t){return Ks(e,"POST","/v2/accounts:revokeToken",Tc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Y(t.idToken,"internal-error"),Y(typeof t.idToken<"u","internal-error"),Y(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):C_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Y(t.length!==0,"internal-error");const n=C_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await tN(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ds;return i&&(Y(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(Y(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(Y(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ds,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(e,t){Y(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class nn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new ZD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ld(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await go(this,this.stsTokenManager.getToken(this.auth,t));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return XD(this,t)}reload(){return JD(this)}_assign(t){this!==t&&(Y(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new nn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await ju(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(xi(this.auth));const t=await this.getIdToken();return await go(this,YD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:N,stsTokenManager:V}=n;Y(p&&V,t,"internal-error");const x=ds.fromJSON(this.name,V);Y(typeof p=="string",t,"internal-error"),ri(i,t.name),ri(r,t.name),Y(typeof m=="boolean",t,"internal-error"),Y(typeof _=="boolean",t,"internal-error"),ri(s,t.name),ri(a,t.name),ri(l,t.name),ri(u,t.name),ri(h,t.name),ri(d,t.name);const A=new nn({uid:p,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:x,createdAt:h,lastLoginAt:d});return N&&Array.isArray(N)&&(A.providerData=N.map(E=>({...E}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(t,n,i=!1){const r=new ds;r.updateFromServerResponse(n);const s=new nn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await ju(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];Y(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?kS(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new ds;l.updateFromIdToken(i);const u=new nn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ld(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new Map;function Un(e){$n(e instanceof Function,"Expected a class definition");let t=D_.get(e);return t?($n(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}PS.type="NONE";const N_=PS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(e,t,n){return`firebase:${e}:${t}:${n}`}class ms{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Fl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fl("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await zu(this.auth,{idToken:t}).catch(()=>{});return n?nn._fromGetAccountInfoResponse(this.auth,n,t):null}return nn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new ms(Un(N_),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Un(N_);const a=Fl(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let p;if(typeof d=="string"){const m=await zu(t,{idToken:d}).catch(()=>{});if(!m)break;p=await nn._fromGetAccountInfoResponse(t,m,d)}else p=nn._fromJSON(t,d);h!==s&&(l=p),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ms(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new ms(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(US(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qS(t))return"Blackberry";if(HS(t))return"Webos";if(LS(t))return"Safari";if((t.includes("chrome/")||zS(t))&&!t.includes("edge/"))return"Chrome";if(BS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function US(e=pe()){return/firefox\//i.test(e)}function LS(e=pe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function zS(e=pe()){return/crios\//i.test(e)}function jS(e=pe()){return/iemobile/i.test(e)}function BS(e=pe()){return/android/i.test(e)}function qS(e=pe()){return/blackberry/i.test(e)}function HS(e=pe()){return/webos/i.test(e)}function Km(e=pe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nN(e=pe()){var t;return Km(e)&&!!((t=window.navigator)!=null&&t.standalone)}function iN(){return Jw()&&document.documentMode===10}function GS(e=pe()){return Km(e)||BS(e)||HS(e)||qS(e)||/windows phone/i.test(e)||jS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(e,t=[]){let n;switch(e){case"Browser":n=O_(pe());break;case"Worker":n=`${O_(pe())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(e,t={}){return Ks(e,"GET","/v2/passwordPolicy",Tc(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=6;class oN{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??aN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new rN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await ms.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zu(this,{idToken:t}),i=await nn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(tn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await ju(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=HD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(tn(this.app))return Promise.reject(xi(this));const n=t?En(t):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Y(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return tn(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await sN(this),n=new oN(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Mo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await eN(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Un(t)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await ms.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&jD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Sc(e){return En(e)}class M_{constructor(t){this.auth=t,this.observer=null,this.addObserver=aR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uN(e){Ym=e}function cN(e){return Ym.loadJS(e)}function hN(){return Ym.gapiScript}function fN(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(e,t){const n=fm(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(yr(s,t??{}))return r;Xn(r,"already-initialized")}return n.initialize({options:t})}function mN(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Un);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function gN(e,t,n){const i=Sc(e);Y(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=QS(t),{host:a,port:l}=pN(t),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Y(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Y(yr(h,i.config.emulator)&&yr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Bs(a)?(Q0(`${s}//${a}${u}`),K0("Auth",!0)):yN()}function QS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pN(e){const t=QS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:V_(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:V_(a)}}}function V_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function yN(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(t){return Pn("not implemented")}_linkToIdToken(t,n){return Pn("not implemented")}_getReauthenticationResolver(t){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(e,t){return VS(e,"POST","/v1/accounts:signInWithIdp",Tc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="http://localhost";class Tr extends KS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Tr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Tr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return gs(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,gs(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,gs(t,n)}buildRequest(){const t={requestUri:_N,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Vo(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends YS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends jo{constructor(){super("facebook.com")}static credential(t){return Tr._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return fi.credentialFromTaggedObject(t)}static credentialFromError(t){return fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return fi.credential(t.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Tr._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return di.credentialFromTaggedObject(t)}static credentialFromError(t){return di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return di.credential(n,i)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends jo{constructor(){super("github.com")}static credential(t){return Tr._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mi.credentialFromTaggedObject(t)}static credentialFromError(t){return mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mi.credential(t.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends jo{constructor(){super("twitter.com")}static credential(t,n){return Tr._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return gi.credentialFromTaggedObject(t)}static credentialFromError(t){return gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return gi.credential(n,i)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(e,t){return VS(e,"POST","/v1/accounts:signUp",Tc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await nn._fromIdTokenResponse(t,i,r),a=x_(i);return new Gi({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=x_(i);return new Gi({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function x_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(e){var r;if(tn(e.app))return Promise.reject(xi(e));const t=Sc(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new Gi({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await vN(t,{returnSecureToken:!0}),i=await Gi._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Jn{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Bu(t,n,i,r)}}function XS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(e,s,t,i):s})}async function TN(e,t,n=!1){const i=await go(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Gi._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(e,t,n=!1){const{auth:i}=e;if(tn(i.app))return Promise.reject(xi(i));const r="reauthenticate";try{const s=await go(e,XS(i,r,t,e),n);Y(s.idToken,i,"internal-error");const a=Qm(s.idToken);Y(a,i,"internal-error");const{sub:l}=a;return Y(e.uid===l,i,"user-mismatch"),Gi._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(e,t,n=!1){if(tn(e.app))return Promise.reject(xi(e));const i="signIn",r=await XS(e,i,t),s=await Gi._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function bN(e,t,n,i){return En(e).onIdTokenChanged(t,n,i)}function wN(e,t,n){return En(e).beforeAuthStateChanged(t,n)}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=1e3,IN=10;class ZS extends $S{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);iN()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,IN):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},RN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ZS.type="LOCAL";const CN=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends $S{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}JS.type="SESSION";const WS=JS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Ac(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await DN(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=Xm("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function ON(e){vn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function MN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VN(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function xN(){return tA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firebaseLocalStorageDb",kN=1,Hu="firebaseLocalStorage",nA="fbase_key";class Bo{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bc(e,t){return e.transaction([Hu],t?"readwrite":"readonly").objectStore(Hu)}function PN(){const e=indexedDB.deleteDatabase(eA);return new Bo(e).toPromise()}function ud(){const e=indexedDB.open(eA,kN);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Hu,{keyPath:nA})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Hu)?t(i):(i.close(),await PN(),t(await ud()))})})}async function k_(e,t,n){const i=bc(e,!0).put({[nA]:t,value:n});return new Bo(i).toPromise()}async function UN(e,t){const n=bc(e,!1).get(t),i=await new Bo(n).toPromise();return i===void 0?null:i.value}function P_(e,t){const n=bc(e,!0).delete(t);return new Bo(n).toPromise()}const LN=800,zN=3;class iA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ud(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>zN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ac._getInstance(xN()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await MN(),!this.activeServiceWorker)return;this.sender=new NN(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||VN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ud();return await k_(t,qu,"1"),await P_(t,qu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>k_(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>UN(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>P_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=bc(r,!1).getAll();return new Bo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iA.type="LOCAL";const jN=iA;new zo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(e,t){return t?Un(t):(Y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends KS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return gs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return gs(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function qN(e){return AN(e.auth,new $m(e),e.bypassAuthState)}function HN(e){const{auth:t,user:n}=e;return Y(n,t,"internal-error"),SN(n,new $m(e),e.bypassAuthState)}async function GN(e){const{auth:t,user:n}=e;return Y(n,t,"internal-error"),TN(n,new $m(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return qN;case"linkViaPopup":case"linkViaRedirect":return GN;case"reauthViaPopup":case"reauthViaRedirect":return HN;default:Xn(this.auth,"internal-error")}}resolve(t){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new zo(2e3,1e4);class is extends rA{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Y(t,this.auth,"internal-error"),t}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const t=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,FN.get())};t()}}is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="pendingRedirect",Ql=new Map;class KN extends rA{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Ql.get(this.auth._key());if(!t){try{const i=await YN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Ql.set(this.auth._key(),t)}return this.bypassAuthState||Ql.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YN(e,t){const n=ZN(t),i=$N(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function XN(e,t){Ql.set(e._key(),t)}function $N(e){return Un(e._redirectPersistence)}function ZN(e){return Fl(QN,e.config.apiKey,e.name)}async function JN(e,t,n=!1){if(tn(e.app))return Promise.reject(xi(e));const i=Sc(e),r=BN(i,t),a=await new KN(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=10*60*1e3;class t4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!e4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!sA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=WN&&this.cachedEventUids.clear(),this.cachedEventUids.has(U_(t))}saveEventToCache(t){this.cachedEventUids.add(U_(t)),this.lastProcessedEventTime=Date.now()}}function U_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function sA({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function e4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(e,t={}){return Ks(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r4=/^https?/;async function s4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await n4(e);for(const n of t)try{if(a4(n))return}catch{}Xn(e,"unauthorized-domain")}function a4(e){const t=od(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!r4.test(n))return!1;if(i4.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new zo(3e4,6e4);function L_(){const e=vn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function l4(e){return new Promise((t,n)=>{var r,s,a;function i(){L_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{L_(),n(_n(e,"network-request-failed"))},timeout:o4.get()})}if((s=(r=vn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=vn().gapi)!=null&&a.load)i();else{const l=fN("iframefcb");return vn()[l]=()=>{gapi.load?i():n(_n(e,"network-request-failed"))},cN(`${hN()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Kl=null,t})}let Kl=null;function u4(e){return Kl=Kl||l4(e),Kl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new zo(5e3,15e3),h4="__/auth/iframe",f4="emulator/auth/iframe",d4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g4(e){const t=e.config;Y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Fm(t,f4):`https://${e.config.authDomain}/${h4}`,i={apiKey:t.apiKey,appName:e.name,v:qs},r=m4.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Vo(i).slice(1)}`}async function p4(e){const t=await u4(e),n=vn().gapi;return Y(n,e,"internal-error"),t.open({where:document.body,url:g4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=_n(e,"network-request-failed"),l=vn().setTimeout(()=>{s(a)},c4.get());function u(){vn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_4=500,v4=600,E4="_blank",T4="http://localhost";class z_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S4(e,t,n,i=_4,r=v4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...y4,width:i.toString(),height:r.toString(),top:s,left:a},h=pe().toLowerCase();n&&(l=zS(h)?E4:n),US(h)&&(t=t||T4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,N])=>`${m}${_}=${N},`,"");if(nN(h)&&l!=="_self")return A4(t||"",l),new z_(null);const p=window.open(t||"",l,d);Y(p,e,"popup-blocked");try{p.focus()}catch{}return new z_(p)}function A4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="__/auth/handler",w4="emulator/auth/handler",R4=encodeURIComponent("fac");async function j_(e,t,n,i,r,s){Y(e.config.authDomain,e,"auth-domain-config-required"),Y(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:qs,eventId:r};if(t instanceof YS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",sR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(t instanceof jo){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${R4}=${encodeURIComponent(u)}`:"";return`${I4(e)}?${Vo(l).slice(1)}${h}`}function I4({config:e}){return e.emulator?Fm(e,w4):`https://${e.authDomain}/${b4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="webStorageSupport";class C4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WS,this._completeRedirectFn=JN,this._overrideRedirectResult=XN}async _openPopup(t,n,i,r){var a;$n((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await j_(t,n,i,od(),r);return S4(t,s,Xm())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await j_(t,n,i,od(),r);return ON(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):($n(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await p4(t),i=new t4(t);return n.register("authEvent",r=>(Y(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(qh,{type:qh},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[qh];s!==void 0&&n(!!s),Xn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return GS()||LS()||Km()}}const D4=C4;var B_="@firebase/auth",q_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M4(e){Is(new _r("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Y(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FS(e)},h=new lN(i,r,s,u);return mN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Is(new _r("auth-internal",t=>{const n=Sc(t.getProvider("auth").getImmediate());return(i=>new N4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(B_,q_,O4(e)),Oi(B_,q_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=5*60,x4=F0("authIdTokenMaxAge")||V4;let H_=null;const k4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>x4)return;const r=n==null?void 0:n.token;H_!==r&&(H_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function P4(e=Z0()){const t=fm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=dN(e,{popupRedirectResolver:D4,persistence:[jN,CN,WS]}),i=F0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=k4(s.toString());wN(n,a,()=>a(n.currentUser)),bN(n,l=>a(l))}}const r=H0("auth");return r&&gN(n,`http://${r}`),n}function U4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}uN({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=_n("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",U4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M4("Browser");const L4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},aA=$0(L4),cd=TD(aA),z4=P4(aA),j4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:M.jsx("path",{d:"m9 18 6-6-6-6"})}),oA=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[M.jsx("circle",{cx:"12",cy:"12",r:"4"}),M.jsx("path",{d:"M12 2v2"}),M.jsx("path",{d:"M12 20v2"}),M.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),M.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),M.jsx("path",{d:"M2 12h2"}),M.jsx("path",{d:"M20 12h2"}),M.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),M.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),lA=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:M.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),B4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[M.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),M.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),q4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[M.jsx("path",{d:"M19 12H5"}),M.jsx("polyline",{points:"12 19 5 12 12 5"})]}),H4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 ${e}`,children:[M.jsx("circle",{cx:"11",cy:"11",r:"8"}),M.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),G4=({className:e=""})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[M.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),M.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),F4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:M.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),Q4=({className:e=""})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:M.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),K4=({theme:e})=>{const t=Bn[e];return M.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[M.jsx(Q4,{className:"animate-pulse-heart text-pink-400"}),M.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},Bn={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400"}},Y4=({onClose:e,onSelectPlan:t,theme:n})=>{const i=Bn[n],r=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return M.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:M.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${i.componentBg} ${i.text}`,children:[M.jsx(F4,{className:`mx-auto mb-4 text-${i.accent}`}),M.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),M.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),M.jsx("div",{className:"space-y-3",children:r.map(s=>M.jsxs("button",{onClick:()=>t(s),className:`relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${i.border} ${i.componentBg} hover:border-${i.accentHover}`,children:[M.jsx("p",{className:"font-bold",children:s.name}),M.jsxs("p",{className:"text-sm",children:[s.price," ₽"]})]},s.duration))}),M.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${i.border}`,children:"Не сейчас"})]})})},X4=({onClose:e,onSelectMethod:t,theme:n,plan:i})=>{const r=Bn[n];return M.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:M.jsxs("div",{className:`w-full max-w-sm rounded-2xl p-6 shadow-lg ${r.componentBg} ${r.text}`,children:[M.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),M.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",i.name," (",i.price," ₽)"]}),M.jsxs("div",{className:"space-y-3",children:[M.jsxs("button",{onClick:()=>t("card"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[M.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),M.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),M.jsxs("button",{onClick:()=>t("tribut"),className:`w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 ${r.border} ${r.componentBg} hover:border-${r.accentHover}`,children:[M.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),M.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),M.jsx("button",{onClick:e,className:`w-full py-3 mt-4 rounded-lg border ${r.border}`,children:"Назад"})]})})},$4=({onBack:e,onHome:t,isReader:n=!1,onTextSizeChange:i,onThemeChange:r,theme:s})=>{const[a,l]=at.useState(!1);return M.jsxs("div",{className:"fixed bottom-4 right-4 z-20",children:[a&&M.jsxs("div",{className:"flex flex-col items-center gap-3 mb-3",children:[n&&M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"w-28 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-around text-stone-700 dark:text-gray-200",children:[M.jsx("button",{onClick:()=>i(-2),className:"text-2xl font-bold",children:"-"}),M.jsx("button",{onClick:()=>i(2),className:"text-2xl font-bold",children:"+"})]}),M.jsx("button",{onClick:r,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:s==="dark"?M.jsx(oA,{}):M.jsx(lA,{})})]}),e&&M.jsx("button",{onClick:e,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:M.jsx(q4,{})}),t&&M.jsx("button",{onClick:t,className:"w-14 h-14 rounded-full bg-white/80 dark:bg-gray-700/80 backdrop-blur-md shadow-lg flex items-center justify-center text-stone-700 dark:text-gray-200",children:M.jsx(B4,{})})]}),M.jsx("button",{onClick:()=>l(!a),className:"w-16 h-16 rounded-full bg-pink-500 text-white shadow-lg flex items-center justify-center transform transition-transform duration-300 hover:scale-110",children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ${a?"rotate-45":"rotate-0"}`,children:[M.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),M.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})},Z4=({novels:e,onSelectNovel:t,theme:n,setTheme:i,genreFilter:r,onClearGenreFilter:s})=>{const a=Bn[n],[l,u]=at.useState(""),h=at.useMemo(()=>e.filter(d=>(!r||d.genres.includes(r))&&d.title.toLowerCase().includes(l.toLowerCase())),[e,l,r]);return!e.length&&!l?M.jsx("div",{className:`p-4 text-center ${a.text}`,children:"Загрузка библиотеки..."}):M.jsxs("div",{className:`p-4 ${a.text}`,children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h1",{className:"text-3xl font-bold",children:"Библиотека"}),M.jsx("button",{onClick:()=>i(n==="dark"?"light":"dark"),className:`p-2 rounded-full ${a.componentBg} ${a.border} border`,children:n==="dark"?M.jsx(oA,{}):M.jsx(lA,{})})]}),r&&M.jsxs("div",{className:`flex items-center justify-between p-3 mb-4 rounded-lg border ${a.border} ${a.componentBg}`,children:[M.jsxs("p",{className:"text-sm",children:[M.jsx("span",{className:"opacity-70",children:"Жанр:"}),M.jsx("strong",{className:"ml-2",children:r})]}),M.jsx("button",{onClick:s,className:`text-xs font-bold text-${a.accent} hover:underline`,children:"Сбросить"})]}),M.jsxs("div",{className:"relative mb-6",children:[M.jsx(H4,{className:a.searchPlaceholder}),M.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:l,onChange:d=>u(d.target.value),className:`w-full ${a.searchBg} ${a.border} border rounded-lg py-2 pl-10 pr-4 ${a.text} ${a.searchPlaceholder} focus:outline-none focus:ring-2 ${a.searchRing} transition-shadow duration-300`})]}),M.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4",children:h.map((d,p)=>M.jsxs("div",{onClick:()=>t(d),className:"cursor-pointer group relative animate-fade-in-down",style:{animationDelay:`${p*50}ms`},children:[M.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r from-${a.accent} to-purple-500 rounded-lg blur-md opacity-0 group-hover:opacity-50 transition duration-500`}),M.jsxs("div",{className:"relative",children:[M.jsx("img",{src:d.coverUrl,alt:d.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${a.border} border`}),M.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${a.text}`,children:d.title})]})]},d.id))})]})},J4=({novel:e,onSelectChapter:t,theme:n,subscription:i,botUsername:r,userId:s,chaptersCache:a,lastReadData:l})=>{const u=Bn[n],[h,d]=at.useState([]),[p,m]=at.useState(!0),[_,N]=at.useState(!1),[V,x]=at.useState(null),[A,E]=at.useState("newest"),w=i&&new Date(i.expires_at)>new Date,D=at.useMemo(()=>l&&l[e.id]?l[e.id].chapterId:null,[l,e.id]);at.useEffect(()=>{a[e.id]?(d(a[e.id]),m(!1)):(m(!0),fetch(`data/chapters/${e.id}.json`).then(v=>v.json()).then(v=>{d(v.chapters||[]),m(!1)}).catch(v=>{console.error(v),d([]),m(!1)}))},[e.id,a]);const L=at.useMemo(()=>{const v=[...h];return A==="newest"?v.reverse():h},[h,A]),B=v=>{!w&&v.isPaid?N(!0):t(v)},T=()=>{if(D){const v=h.find(R=>R.id===D);v&&t(v)}},y=v=>x(v),S=async v=>{var I;const R=(I=window.Telegram)==null?void 0:I.WebApp;if(R&&s&&V){const b=ad(cd,"users",s);try{await IS(b,{pendingSubscription:{...V,method:v,date:new Date().toISOString()}},{merge:!0}),R.openTelegramLink(`https://t.me/${r}?start=true`)}catch(ye){console.error("Ошибка записи в Firebase:",ye),R.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}};return M.jsxs("div",{className:u.text,children:[_&&!V&&M.jsx(Y4,{onClose:()=>N(!1),onSelectPlan:y,theme:n}),_&&V&&M.jsx(X4,{onClose:()=>x(null),onSelectMethod:S,theme:n,plan:V}),M.jsxs("div",{className:"relative h-64",children:[M.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),M.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${n==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),M.jsxs("div",{className:"absolute bottom-4 left-4",children:[M.jsx("h1",{className:"text-3xl font-bold",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.5)"},children:e.title}),M.jsx("p",{className:"text-sm",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:e.author})]})]}),M.jsxs("div",{className:"p-4",children:[M.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(v=>M.jsx("button",{onClick:()=>onGenreSelect(v),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${n==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:v},v))}),M.jsx("p",{className:`text-sm mb-6 ${n==="dark"?"text-gray-300":"text-stone-600"}`,children:e.description}),D&&M.jsxs("button",{onClick:T,className:`w-full py-3 mb-4 rounded-lg bg-${u.accent} text-white font-bold transition-transform hover:scale-105`,children:["Продолжить чтение (Глава ",D,")"]}),M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),M.jsx("button",{onClick:()=>E(v=>v==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${u.accent}`,children:A==="newest"?"Сначала новые":"Сначала старые"})]}),w&&M.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),p?M.jsx("p",{className:u.text,children:"Загрузка глав..."}):M.jsx("div",{className:"flex flex-col gap-3",children:L.map(v=>{const R=!w&&v.isPaid;return M.jsxs("div",{onClick:()=>B(v),className:`p-4 ${u.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-${u.accentHover} border ${u.border} flex items-center justify-between shadow-sm hover:shadow-md ${R?"opacity-70":""}`,children:[D===v.id&&M.jsx("span",{className:`absolute left-2 text-xs text-${u.accent}`,children:"●"}),M.jsx("div",{children:M.jsx("p",{className:`font-semibold ${u.componentText}`,children:v.title})}),R?M.jsx(G4,{className:u.text}):M.jsx(j4,{className:u.text})]},v.id)})})]})]})},W4=({chapter:e,novel:t,theme:n,fontSize:i})=>{const r=Bn[n];return M.jsx("div",{className:`min-h-screen transition-colors duration-300 ${r.bg}`,children:M.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto",children:[M.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center",children:t.title}),M.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80",children:e.title}),M.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${r.text}`,style:{fontSize:`${i}px`},children:e.content})]})})};function tO(){const[e,t]=at.useState("light"),[n,i]=at.useState(18),[r,s]=at.useState("list"),[a,l]=at.useState([]),[u,h]=at.useState(null),[d,p]=at.useState(null),[m,_]=at.useState(null),[N,V]=at.useState(null),[x,A]=at.useState(null),[E,w]=at.useState(!0),[D,L]=at.useState({}),[B,T]=at.useState(null),y="tenebrisverbot",S=at.useCallback(async F=>{if(x&&x!=="guest_user"){const gt=ad(cd,"users",x);try{await IS(gt,F,{merge:!0})}catch(Ct){console.error("Не удалось обновить данные пользователя:",Ct)}}},[x]),v=F=>{t(F),S({settings:{theme:F,fontSize:n}})},R=F=>{i(gt=>{const Ct=Math.max(12,Math.min(32,gt+F));return S({settings:{theme:e,fontSize:Ct}}),Ct})};at.useEffect(()=>{(async()=>{var gt,Ct,Dt,ze;try{const te=(gt=window.Telegram)==null?void 0:gt.WebApp;let Nr="guest_user";if(te&&(te.ready(),te.expand(),Nr=((ze=(Dt=(Ct=te.initDataUnsafe)==null?void 0:Ct.user)==null?void 0:Dt.id)==null?void 0:ze.toString())||"guest_user"),A(Nr),await EN(z4),Nr!=="guest_user"){const Rc=ad(cd,"users",Nr),Yi=await kD(Rc);if(Yi.exists()){const an=Yi.data();V(an.subscription||null),T(an.lastRead||null),an.settings&&(t(an.settings.theme||"light"),i(an.settings.fontSize||18))}}const Ki=await fetch("data/novels.json");if(!Ki.ok)throw new Error("Failed to fetch novels");const wc=await Ki.json();l(wc.novels)}catch(te){console.error("Ошибка инициализации:",te)}finally{w(!1)}})()},[]),at.useEffect(()=>{a.length>0&&a.forEach(F=>{fetch(`data/chapters/${F.id}.json`).then(gt=>gt.json()).then(gt=>L(Ct=>({...Ct,[F.id]:gt.chapters||[]}))).catch(gt=>console.error(`Не удалось предзагрузить главы для ${F.title}:`,gt))})},[a]),at.useEffect(()=>{document.documentElement.className=e},[e]);const I=at.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),_(null))},[r]),b=at.useCallback(()=>{s("list"),_(null)},[]);at.useEffect(()=>{var gt;const F=(gt=window.Telegram)==null?void 0:gt.WebApp;if(F)return F.onEvent("backButtonClicked",I),r==="list"?F.BackButton.hide():F.BackButton.show(),()=>F.offEvent("backButtonClicked",I)},[r,I]),at.useEffect(()=>{var gt;const F=(gt=window.Telegram)==null?void 0:gt.WebApp;F&&(F.setHeaderColor(Bn[e].tgHeader),F.setBackgroundColor(Bn[e].tgBg))},[e]);const ye=at.useCallback(async F=>{if(p(F),s("reader"),x&&x!=="guest_user"&&u){const gt={...B,[u.id]:{novelId:u.id,chapterId:F.id,timestamp:new Date().toISOString()}};T(gt),await S({lastRead:gt})}},[x,u,B,S]),Ze=F=>{h(F),s("details")},j=F=>{_(F),s("list")},$=()=>{_(null)};if(E)return M.jsx(K4,{theme:e});const X=()=>{switch(r){case"details":return M.jsx(J4,{novel:u,onSelectChapter:ye,onGenreSelect:j,theme:e,subscription:N,botUsername:y,userId:x,chaptersCache:D,lastReadData:B});case"reader":return M.jsx(W4,{chapter:d,novel:u,theme:e,fontSize:n});case"list":default:return M.jsx(Z4,{novels:a,onSelectNovel:Ze,theme:e,setTheme:v,genreFilter:m,onClearGenreFilter:$})}},_t=Bn[e];return M.jsxs("main",{className:`${_t.bg} min-h-screen`,children:[X(),M.jsx($4,{onBack:r!=="list"?I:null,onHome:r!=="list"?b:null,isReader:r==="reader",onTextSizeChange:R,onThemeChange:()=>v(e==="dark"?"light":"dark"),theme:e})]})}Vw.createRoot(document.getElementById("root")).render(M.jsx(at.StrictMode,{children:M.jsx(tO,{})}));
