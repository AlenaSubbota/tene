(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ib(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pv={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=Symbol.for("react.transitional.element"),sb=Symbol.for("react.fragment");function yv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:rb,type:e,key:i,ref:t!==void 0?t:null,props:n}}pc.Fragment=sb;pc.jsx=yv;pc.jsxs=yv;pv.exports=pc;var v=pv.exports,_v={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=Symbol.for("react.transitional.element"),ab=Symbol.for("react.portal"),ob=Symbol.for("react.fragment"),lb=Symbol.for("react.strict_mode"),ub=Symbol.for("react.profiler"),cb=Symbol.for("react.consumer"),hb=Symbol.for("react.context"),fb=Symbol.for("react.forward_ref"),db=Symbol.for("react.suspense"),mb=Symbol.for("react.memo"),vv=Symbol.for("react.lazy"),Ap=Symbol.iterator;function gb(e){return e===null||typeof e!="object"?null:(e=Ap&&e[Ap]||e["@@iterator"],typeof e=="function"?e:null)}var Tv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ev=Object.assign,Av={};function na(e,t,n){this.props=e,this.context=t,this.refs=Av,this.updater=n||Tv}na.prototype.isReactComponent={};na.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};na.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bv(){}bv.prototype=na.prototype;function Md(e,t,n){this.props=e,this.context=t,this.refs=Av,this.updater=n||Tv}var kd=Md.prototype=new bv;kd.constructor=Md;Ev(kd,na.prototype);kd.isPureReactComponent=!0;var bp=Array.isArray,Lt={H:null,A:null,T:null,S:null,V:null},Sv=Object.prototype.hasOwnProperty;function Ud(e,t,n,i,r,s){return n=s.ref,{$$typeof:Od,type:e,key:t,ref:n!==void 0?n:null,props:s}}function pb(e,t){return Ud(e.type,t,void 0,void 0,void 0,e.props)}function Pd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Od}function yb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sp=/\/+/g;function vh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yb(""+e.key):t.toString(36)}function wp(){}function _b(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(wp,wp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ns(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Od:case ab:a=!0;break;case vv:return a=e._init,ns(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+vh(e,0):i,bp(r)?(n="",a!=null&&(n=a.replace(Sp,"$&/")+"/"),ns(r,t,n,"",function(h){return h})):r!=null&&(Pd(r)&&(r=pb(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Sp,"$&/")+"/")+a)),t.push(r)),1;a=0;var l=i===""?".":i+":";if(bp(e))for(var u=0;u<e.length;u++)i=e[u],s=l+vh(i,u),a+=ns(i,t,n,s,r);else if(u=gb(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=l+vh(i,u++),a+=ns(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return ns(_b(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Ol(e,t,n){if(e==null)return e;var i=[],r=0;return ns(e,i,"","",function(s){return t.call(n,s,r++)}),i}function vb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Tb(){}et.Children={map:Ol,forEach:function(e,t,n){Ol(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ol(e,function(){t++}),t},toArray:function(e){return Ol(e,function(t){return t})||[]},only:function(e){if(!Pd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=na;et.Fragment=ob;et.Profiler=ub;et.PureComponent=Md;et.StrictMode=lb;et.Suspense=db;et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;et.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Lt.H.useMemoCache(e)}};et.cache=function(e){return function(){return e.apply(null,arguments)}};et.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Ev({},e.props),r=e.key,s=void 0;if(t!=null)for(a in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!Sv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Ud(e.type,r,void 0,void 0,s,i)};et.createContext=function(e){return e={$$typeof:hb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:cb,_context:e},e};et.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)Sv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Ud(e,s,void 0,void 0,null,r)};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:fb,render:e}};et.isValidElement=Pd;et.lazy=function(e){return{$$typeof:vv,_payload:{_status:-1,_result:e},_init:vb}};et.memo=function(e,t){return{$$typeof:mb,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=Lt.T,n={};Lt.T=n;try{var i=e(),r=Lt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Tb,Rp)}catch(s){Rp(s)}finally{Lt.T=t}};et.unstable_useCacheRefresh=function(){return Lt.H.useCacheRefresh()};et.use=function(e){return Lt.H.use(e)};et.useActionState=function(e,t,n){return Lt.H.useActionState(e,t,n)};et.useCallback=function(e,t){return Lt.H.useCallback(e,t)};et.useContext=function(e){return Lt.H.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e,t){return Lt.H.useDeferredValue(e,t)};et.useEffect=function(e,t,n){var i=Lt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};et.useId=function(){return Lt.H.useId()};et.useImperativeHandle=function(e,t,n){return Lt.H.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return Lt.H.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return Lt.H.useLayoutEffect(e,t)};et.useMemo=function(e,t){return Lt.H.useMemo(e,t)};et.useOptimistic=function(e,t){return Lt.H.useOptimistic(e,t)};et.useReducer=function(e,t,n){return Lt.H.useReducer(e,t,n)};et.useRef=function(e){return Lt.H.useRef(e)};et.useState=function(e){return Lt.H.useState(e)};et.useSyncExternalStore=function(e,t,n){return Lt.H.useSyncExternalStore(e,t,n)};et.useTransition=function(){return Lt.H.useTransition()};et.version="19.1.1";_v.exports=et;var H=_v.exports;const Eb=ib(H);var wv={exports:{}},yc={},Rv={exports:{}},Iv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,X){var Y=q.length;q.push(X);t:for(;0<Y;){var gt=Y-1>>>1,xt=q[gt];if(0<r(xt,X))q[gt]=X,q[Y]=xt,Y=gt;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var X=q[0],Y=q.pop();if(Y!==X){q[0]=Y;t:for(var gt=0,xt=q.length,pn=xt>>>1;gt<pn;){var zt=2*(gt+1)-1,ct=q[zt],$t=zt+1,be=q[$t];if(0>r(ct,Y))$t<xt&&0>r(be,ct)?(q[gt]=be,q[$t]=Y,gt=$t):(q[gt]=ct,q[zt]=Y,gt=zt);else if($t<xt&&0>r(be,Y))q[gt]=be,q[$t]=Y,gt=$t;else break t}}return X}function r(q,X){var Y=q.sortIndex-X.sortIndex;return Y!==0?Y:q.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,x=!1,O=!1,V=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(q){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=q)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function L(q){if(O=!1,D(q),!x)if(n(u)!==null)x=!0,B||(B=!0,I());else{var X=n(h);X!==null&&me(L,X.startTime-q)}}var B=!1,E=-1,y=5,A=-1;function w(){return V?!0:!(e.unstable_now()-A<y)}function C(){if(V=!1,B){var q=e.unstable_now();A=q;var X=!0;try{t:{x=!1,O&&(O=!1,T(E),E=-1),_=!0;var Y=m;try{e:{for(D(q),g=n(u);g!==null&&!(g.expirationTime>q&&w());){var gt=g.callback;if(typeof gt=="function"){g.callback=null,m=g.priorityLevel;var xt=gt(g.expirationTime<=q);if(q=e.unstable_now(),typeof xt=="function"){g.callback=xt,D(q),X=!0;break e}g===n(u)&&i(u),D(q)}else i(u);g=n(u)}if(g!==null)X=!0;else{var pn=n(h);pn!==null&&me(L,pn.startTime-q),X=!1}}break t}finally{g=null,m=Y,_=!1}X=void 0}}finally{X?I():B=!1}}}var I;if(typeof R=="function")I=function(){R(C)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,yt=b.port2;b.port1.onmessage=C,I=function(){yt.postMessage(null)}}else I=function(){S(C,0)};function me(q,X){E=S(function(){q(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Y=m;m=X;try{return q()}finally{m=Y}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Y=m;m=q;try{return X()}finally{m=Y}},e.unstable_scheduleCallback=function(q,X,Y){var gt=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?gt+Y:gt):Y=gt,q){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=Y+xt,q={id:d++,callback:X,priorityLevel:q,startTime:Y,expirationTime:xt,sortIndex:-1},Y>gt?(q.sortIndex=Y,t(h,q),n(u)===null&&q===n(h)&&(O?(T(E),E=-1):O=!0,me(L,Y-gt))):(q.sortIndex=xt,t(u,q),x||_||(x=!0,B||(B=!0,I()))),q},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(q){var X=m;return function(){var Y=m;m=X;try{return q.apply(this,arguments)}finally{m=Y}}}})(Iv);Rv.exports=Iv;var Ab=Rv.exports,Cv={exports:{}},Ue={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb=H;function Nv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function yi(){}var ke={d:{f:yi,r:function(){throw Error(Nv(522))},D:yi,C:yi,L:yi,m:yi,X:yi,S:yi,M:yi},p:0,findDOMNode:null},Sb=Symbol.for("react.portal");function wb(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sb,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ga=bb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _c(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ue.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ke;Ue.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Nv(299));return wb(e,t,null,n)};Ue.flushSync=function(e){var t=Ga.T,n=ke.p;try{if(Ga.T=null,ke.p=2,e)return e()}finally{Ga.T=t,ke.p=n,ke.d.f()}};Ue.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ke.d.C(e,t))};Ue.prefetchDNS=function(e){typeof e=="string"&&ke.d.D(e)};Ue.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=_c(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ke.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ke.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ue.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=_c(t.as,t.crossOrigin);ke.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ke.d.M(e)};Ue.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=_c(n,t.crossOrigin);ke.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ue.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=_c(t.as,t.crossOrigin);ke.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ke.d.m(e)};Ue.requestFormReset=function(e){ke.d.r(e)};Ue.unstable_batchedUpdates=function(e,t){return e(t)};Ue.useFormState=function(e,t,n){return Ga.H.useFormState(e,t,n)};Ue.useFormStatus=function(){return Ga.H.useHostTransitionStatus()};Ue.version="19.1.1";function xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xv)}catch(e){console.error(e)}}xv(),Cv.exports=Ue;var Rb=Cv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae=Ab,Dv=H,Ib=Rb;function P(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ov(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ip(e){if(Bo(e)!==e)throw Error(P(188))}function Cb(e){var t=e.alternate;if(!t){if(t=Bo(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Ip(r),e;if(s===i)return Ip(r),t;s=s.sibling}throw Error(P(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function Mv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Mv(e),t!==null)return t;e=e.sibling}return null}var Ut=Object.assign,Nb=Symbol.for("react.element"),Ml=Symbol.for("react.transitional.element"),Pa=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),df=Symbol.for("react.profiler"),xb=Symbol.for("react.provider"),Uv=Symbol.for("react.consumer"),Yn=Symbol.for("react.context"),Ld=Symbol.for("react.forward_ref"),mf=Symbol.for("react.suspense"),gf=Symbol.for("react.suspense_list"),jd=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),pf=Symbol.for("react.activity"),Db=Symbol.for("react.memo_cache_sentinel"),Cp=Symbol.iterator;function Na(e){return e===null||typeof e!="object"?null:(e=Cp&&e[Cp]||e["@@iterator"],typeof e=="function"?e:null)}var Vb=Symbol.for("react.client.reference");function yf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Vb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cs:return"Fragment";case df:return"Profiler";case kv:return"StrictMode";case mf:return"Suspense";case gf:return"SuspenseList";case pf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Pa:return"Portal";case Yn:return(e.displayName||"Context")+".Provider";case Uv:return(e._context.displayName||"Context")+".Consumer";case Ld:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jd:return t=e.displayName||null,t!==null?t:yf(e.type)||"Memo";case Ei:t=e._payload,e=e._init;try{return yf(e(t))}catch{}}return null}var La=Array.isArray,J=Dv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=Ib.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wr={pending:!1,data:null,method:null,action:null},_f=[],hs=-1;function Pn(e){return{current:e}}function de(e){0>hs||(e.current=_f[hs],_f[hs]=null,hs--)}function jt(e,t){hs++,_f[hs]=e.current,e.current=t}var xn=Pn(null),go=Pn(null),Ui=Pn(null),bu=Pn(null);function Su(e,t){switch(jt(Ui,t),jt(go,e),jt(xn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Oy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Oy(t),e=WT(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}de(xn),jt(xn,e)}function Ls(){de(xn),de(go),de(Ui)}function vf(e){e.memoizedState!==null&&jt(bu,e);var t=xn.current,n=WT(t,e.type);t!==n&&(jt(go,e),jt(xn,n))}function wu(e){go.current===e&&(de(xn),de(go)),bu.current===e&&(de(bu),wo._currentValue=wr)}var Tf=Object.prototype.hasOwnProperty,zd=ae.unstable_scheduleCallback,Th=ae.unstable_cancelCallback,Ob=ae.unstable_shouldYield,Mb=ae.unstable_requestPaint,Dn=ae.unstable_now,kb=ae.unstable_getCurrentPriorityLevel,Pv=ae.unstable_ImmediatePriority,Lv=ae.unstable_UserBlockingPriority,Ru=ae.unstable_NormalPriority,Ub=ae.unstable_LowPriority,jv=ae.unstable_IdlePriority,Pb=ae.log,Lb=ae.unstable_setDisableYieldValue,qo=null,Je=null;function xi(e){if(typeof Pb=="function"&&Lb(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(qo,e)}catch{}}var We=Math.clz32?Math.clz32:Bb,jb=Math.log,zb=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(jb(e)/zb|0)|0}var kl=256,Ul=4194304;function Tr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=Tr(i):(a&=l,a!==0?r=Tr(a):n||(n=l&~e,n!==0&&(r=Tr(n))))):(l=i&~s,l!==0?r=Tr(l):a!==0?r=Tr(a):n||(n=i&~e,n!==0&&(r=Tr(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function Ho(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function qb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zv(){var e=kl;return kl<<=1,!(kl&4194048)&&(kl=256),e}function Bv(){var e=Ul;return Ul<<=1,!(Ul&62914560)&&(Ul=4194304),e}function Eh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hb(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-We(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&qv(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function qv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-We(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Hv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-We(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Bd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Fv(){var e=vt.p;return e!==0?e:(e=window.event,e===void 0?32:uE(e.type))}function Fb(e,t){var n=vt.p;try{return vt.p=e,t()}finally{vt.p=n}}var or=Math.random().toString(36).slice(2),Ne="__reactFiber$"+or,Be="__reactProps$"+or,ia="__reactContainer$"+or,Ef="__reactEvents$"+or,Gb="__reactListeners$"+or,Qb="__reactHandles$"+or,Np="__reactResources$"+or,Go="__reactMarker$"+or;function Hd(e){delete e[Ne],delete e[Be],delete e[Ef],delete e[Gb],delete e[Qb]}function fs(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ia]||n[Ne]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Uy(e);e!==null;){if(n=e[Ne])return n;e=Uy(e)}return t}e=n,n=e.parentNode}return null}function ra(e){if(e=e[Ne]||e[ia]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ja(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(P(33))}function Ss(e){var t=e[Np];return t||(t=e[Np]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ce(e){e[Go]=!0}var Gv=new Set,Qv={};function qr(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(Qv[e]=t,e=0;e<t.length;e++)Gv.add(t[e])}var Yb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xp={},Dp={};function Kb(e){return Tf.call(Dp,e)?!0:Tf.call(xp,e)?!1:Yb.test(e)?Dp[e]=!0:(xp[e]=!0,!1)}function eu(e,t,n){if(Kb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Pl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function qn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Ah,Vp;function is(e){if(Ah===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ah=t&&t[1]||"",Vp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ah+e+Vp}var bh=!1;function Sh(e,t){if(!e||bh)return"";bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=r);break}}}finally{bh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?is(n):""}function Xb(e){switch(e.tag){case 26:case 27:case 5:return is(e.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Sh(e.type,!1);case 11:return Sh(e.type.render,!1);case 1:return Sh(e.type,!0);case 31:return is("Activity");default:return""}}function Op(e){try{var t="";do t+=Xb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $b(e){var t=Yv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Iu(e){e._valueTracker||(e._valueTracker=$b(e))}function Kv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Yv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Cu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zb=/[\n"\\]/g;function cn(e){return e.replace(Zb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Af(e,t,n,i,r,s,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+on(t)):e.value!==""+on(t)&&(e.value=""+on(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?bf(e,a,on(t)):n!=null?bf(e,a,on(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+on(l):e.removeAttribute("name")}function Xv(e,t,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+on(n):"",t=t!=null?""+on(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function bf(e,t,n){t==="number"&&Cu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ws(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function $v(e,t,n){if(t!=null&&(t=""+on(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+on(n):""}function Zv(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(P(92));if(La(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=on(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function zs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Jb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Jv(e,t,n){if(t!=null&&typeof t!="object")throw Error(P(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Mp(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&Mp(e,s,t[s])}function Fd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nu(e){return tS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Sf=null;function Gd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ds=null,Rs=null;function kp(e){var t=ra(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;t:switch(e=t.stateNode,t.type){case"input":if(Af(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Be]||null;if(!r)throw Error(P(90));Af(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Kv(i)}break t;case"textarea":$v(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ws(e,!!n.multiple,t,!1)}}}var wh=!1;function Wv(e,t,n){if(wh)return e(t,n);wh=!0;try{var i=e(t);return i}finally{if(wh=!1,(ds!==null||Rs!==null)&&(Nc(),ds&&(t=ds,e=Rs,Rs=ds=null,kp(t),e)))for(t=0;t<e.length;t++)kp(e[t])}}function po(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Be]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wf=!1;if(ii)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){wf=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{wf=!1}var Di=null,Qd=null,iu=null;function t0(){if(iu)return iu;var e,t=Qd,n=t.length,i,r="value"in Di?Di.value:Di.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return iu=r.slice(e,1<i?1-i:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ll(){return!0}function Up(){return!1}function He(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ll:Up,this.isPropagationStopped=Up,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=He(Hr),Qo=Ut({},Hr,{view:0,detail:0}),eS=He(Qo),Rh,Ih,Da,Ec=Ut({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Da&&(Da&&e.type==="mousemove"?(Rh=e.screenX-Da.screenX,Ih=e.screenY-Da.screenY):Ih=Rh=0,Da=e),Rh)},movementY:function(e){return"movementY"in e?e.movementY:Ih}}),Pp=He(Ec),nS=Ut({},Ec,{dataTransfer:0}),iS=He(nS),rS=Ut({},Qo,{relatedTarget:0}),Ch=He(rS),sS=Ut({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),aS=He(sS),oS=Ut({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lS=He(oS),uS=Ut({},Hr,{data:0}),Lp=He(uS),cS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fS[e])?!!t[e]:!1}function Yd(){return dS}var mS=Ut({},Qo,{key:function(e){if(e.key){var t=cS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gS=He(mS),pS=Ut({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=He(pS),yS=Ut({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),_S=He(yS),vS=Ut({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),TS=He(vS),ES=Ut({},Ec,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AS=He(ES),bS=Ut({},Hr,{newState:0,oldState:0}),SS=He(bS),wS=[9,13,27,32],Kd=ii&&"CompositionEvent"in window,Qa=null;ii&&"documentMode"in document&&(Qa=document.documentMode);var RS=ii&&"TextEvent"in window&&!Qa,e0=ii&&(!Kd||Qa&&8<Qa&&11>=Qa),zp=" ",Bp=!1;function n0(e,t){switch(e){case"keyup":return wS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function IS(e,t){switch(e){case"compositionend":return i0(t);case"keypress":return t.which!==32?null:(Bp=!0,zp);case"textInput":return e=t.data,e===zp&&Bp?null:e;default:return null}}function CS(e,t){if(ms)return e==="compositionend"||!Kd&&n0(e,t)?(e=t0(),iu=Qd=Di=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e0&&t.locale!=="ko"?null:t.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NS[e.type]:t==="textarea"}function r0(e,t,n,i){ds?Rs?Rs.push(i):Rs=[i]:ds=i,t=Qu(t,"onChange"),0<t.length&&(n=new Tc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ya=null,yo=null;function xS(e){$T(e,0)}function Ac(e){var t=ja(e);if(Kv(t))return e}function Hp(e,t){if(e==="change")return t}var s0=!1;if(ii){var Nh;if(ii){var xh="oninput"in document;if(!xh){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),xh=typeof Fp.oninput=="function"}Nh=xh}else Nh=!1;s0=Nh&&(!document.documentMode||9<document.documentMode)}function Gp(){Ya&&(Ya.detachEvent("onpropertychange",a0),yo=Ya=null)}function a0(e){if(e.propertyName==="value"&&Ac(yo)){var t=[];r0(t,yo,e,Gd(e)),Wv(xS,t)}}function DS(e,t,n){e==="focusin"?(Gp(),Ya=t,yo=n,Ya.attachEvent("onpropertychange",a0)):e==="focusout"&&Gp()}function VS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ac(yo)}function OS(e,t){if(e==="click")return Ac(t)}function MS(e,t){if(e==="input"||e==="change")return Ac(t)}function kS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:kS;function _o(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Tf.call(t,r)||!sn(e[r],t[r]))return!1}return!0}function Qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yp(e,t){var n=Qp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Qp(n)}}function o0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?o0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function l0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Cu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Cu(e.document)}return t}function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var US=ii&&"documentMode"in document&&11>=document.documentMode,gs=null,Rf=null,Ka=null,If=!1;function Kp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;If||gs==null||gs!==Cu(i)||(i=gs,"selectionStart"in i&&Xd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ka&&_o(Ka,i)||(Ka=i,i=Qu(Rf,"onSelect"),0<i.length&&(t=new Tc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gs)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ps={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionrun:vr("Transition","TransitionRun"),transitionstart:vr("Transition","TransitionStart"),transitioncancel:vr("Transition","TransitionCancel"),transitionend:vr("Transition","TransitionEnd")},Dh={},u0={};ii&&(u0=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Fr(e){if(Dh[e])return Dh[e];if(!ps[e])return e;var t=ps[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in u0)return Dh[e]=t[n];return e}var c0=Fr("animationend"),h0=Fr("animationiteration"),f0=Fr("animationstart"),PS=Fr("transitionrun"),LS=Fr("transitionstart"),jS=Fr("transitioncancel"),d0=Fr("transitionend"),m0=new Map,Cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cf.push("scrollEnd");function bn(e,t){m0.set(e,t),qr(t,[e])}var Xp=new WeakMap;function hn(e,t){if(typeof e=="object"&&e!==null){var n=Xp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Op(t)},Xp.set(e,t),t)}return{value:e,source:t,stack:Op(t)}}var an=[],ys=0,$d=0;function bc(){for(var e=ys,t=$d=ys=0;t<e;){var n=an[t];an[t++]=null;var i=an[t];an[t++]=null;var r=an[t];an[t++]=null;var s=an[t];if(an[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&g0(n,r,s)}}function Sc(e,t,n,i){an[ys++]=e,an[ys++]=t,an[ys++]=n,an[ys++]=i,$d|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Zd(e,t,n,i){return Sc(e,t,n,i),Nu(e)}function sa(e,t){return Sc(e,null,null,t),Nu(e)}function g0(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-We(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Nu(e){if(50<ro)throw ro=0,Xf=null,Error(P(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _s={};function zS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,t,n,i){return new zS(e,t,n,i)}function Jd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wn(e,t){var n=e.alternate;return n===null?(n=Xe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function p0(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function su(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Jd(e)&&(a=1);else if(typeof e=="string")a=qw(e,n,xn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case pf:return e=Xe(31,n,t,r),e.elementType=pf,e.lanes=s,e;case cs:return Rr(n.children,r,s,t);case kv:a=8,r|=24;break;case df:return e=Xe(12,n,t,r|2),e.elementType=df,e.lanes=s,e;case mf:return e=Xe(13,n,t,r),e.elementType=mf,e.lanes=s,e;case gf:return e=Xe(19,n,t,r),e.elementType=gf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xb:case Yn:a=10;break t;case Uv:a=9;break t;case Ld:a=11;break t;case jd:a=14;break t;case Ei:a=16,i=null;break t}a=29,n=Error(P(130,e===null?"null":typeof e,"")),i=null}return t=Xe(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Rr(e,t,n,i){return e=Xe(7,e,i,t),e.lanes=n,e}function Vh(e,t,n){return e=Xe(6,e,null,t),e.lanes=n,e}function Oh(e,t,n){return t=Xe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var vs=[],Ts=0,xu=null,Du=0,ln=[],un=0,Ir=null,Kn=1,Xn="";function Er(e,t){vs[Ts++]=Du,vs[Ts++]=xu,xu=e,Du=t}function y0(e,t,n){ln[un++]=Kn,ln[un++]=Xn,ln[un++]=Ir,Ir=e;var i=Kn;e=Xn;var r=32-We(i)-1;i&=~(1<<r),n+=1;var s=32-We(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kn=1<<32-We(t)+r|n<<r|i,Xn=s+e}else Kn=1<<s|n<<r|i,Xn=e}function Wd(e){e.return!==null&&(Er(e,1),y0(e,1,0))}function tm(e){for(;e===xu;)xu=vs[--Ts],vs[Ts]=null,Du=vs[--Ts],vs[Ts]=null;for(;e===Ir;)Ir=ln[--un],ln[un]=null,Xn=ln[--un],ln[un]=null,Kn=ln[--un],ln[un]=null}var Oe=null,Gt=null,_t=!1,Cr=null,Cn=!1,Nf=Error(P(519));function Vr(e){var t=Error(P(418,""));throw vo(hn(t,e)),Nf}function $p(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[Be]=i,n){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(n=0;n<Ao.length;n++)st(Ao[n],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),Xv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Iu(t);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),Zv(t,i.value,i.defaultValue,i.children),Iu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||JT(t.textContent,n)?(i.popover!=null&&(st("beforetoggle",t),st("toggle",t)),i.onScroll!=null&&st("scroll",t),i.onScrollEnd!=null&&st("scrollend",t),i.onClick!=null&&(t.onclick=Vc),t=!0):t=!1,t||Vr(e)}function Zp(e){for(Oe=e.return;Oe;)switch(Oe.tag){case 5:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Oe=Oe.return}}function Va(e){if(e!==Oe)return!1;if(!_t)return Zp(e),_t=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||ed(e.type,e.memoizedProps)),n=!n),n&&Gt&&Vr(e),Zp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Gt=En(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Gt=null}}else t===27?(t=Gt,lr(e.type)?(e=rd,rd=null,Gt=e):Gt=t):Gt=Oe?En(e.stateNode.nextSibling):null;return!0}function Yo(){Gt=Oe=null,_t=!1}function Jp(){var e=Cr;return e!==null&&(je===null?je=e:je.push.apply(je,e),Cr=null),e}function vo(e){Cr===null?Cr=[e]:Cr.push(e)}var xf=Pn(null),Gr=null,$n=null;function bi(e,t,n){jt(xf,t._currentValue),t._currentValue=n}function ti(e){e._currentValue=xf.current,de(xf)}function Df(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Vf(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Df(s.return,n,e),i||(a=null);break t}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(P(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Df(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ko(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=r.type;sn(r.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(r===bu.current){if(a=r.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(wo):e=[wo])}r=r.return}e!==null&&Vf(t,e,n,i),t.flags|=262144}function Vu(e){for(e=e.firstContext;e!==null;){if(!sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Or(e){Gr=e,$n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xe(e){return _0(Gr,e)}function jl(e,t){return Gr===null&&Or(e),_0(e,t)}function _0(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},$n===null){if(e===null)throw Error(P(308));$n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $n=$n.next=t;return n}var BS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},qS=ae.unstable_scheduleCallback,HS=ae.unstable_NormalPriority,ie={$$typeof:Yn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function em(){return{controller:new BS,data:new Map,refCount:0}}function Xo(e){e.refCount--,e.refCount===0&&qS(HS,function(){e.controller.abort()})}var Xa=null,Of=0,Bs=0,Is=null;function FS(e,t){if(Xa===null){var n=Xa=[];Of=0,Bs=Sm(),Is={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Of++,t.then(Wp,Wp),t}function Wp(){if(--Of===0&&Xa!==null){Is!==null&&(Is.status="fulfilled");var e=Xa;Xa=null,Bs=0,Is=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function GS(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var ty=J.S;J.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&FS(e,t),ty!==null&&ty(e,t)};var Nr=Pn(null);function nm(){var e=Nr.current;return e!==null?e:Ot.pooledCache}function au(e,t){t===null?jt(Nr,Nr.current):jt(Nr,t.pool)}function v0(){var e=nm();return e===null?null:{parent:ie._currentValue,pool:e}}var $o=Error(P(460)),T0=Error(P(474)),wc=Error(P(542)),Mf={then:function(){}};function ey(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zl(){}function E0(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(zl,zl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,iy(e),e;default:if(typeof t.status=="string")t.then(zl,zl);else{if(e=Ot,e!==null&&100<e.shellSuspendCounter)throw Error(P(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,iy(e),e}throw $a=t,$o}}var $a=null;function ny(){if($a===null)throw Error(P(459));var e=$a;return $a=null,e}function iy(e){if(e===$o||e===wc)throw Error(P(483))}var Ai=!1;function im(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Li(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,wt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Nu(e),g0(e,null,n),t}return Sc(e,i,t,n),Nu(e)}function Za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Hv(e,n)}}function Mh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Uf=!1;function Ja(){if(Uf){var e=Is;if(e!==null)throw e}}function Wa(e,t,n,i){Uf=!1;var r=e.updateQueue;Ai=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(dt&m)===m:(i&m)===m){m!==0&&m===Bs&&(Uf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,O=l;m=t;var V=n;switch(O.tag){case 1:if(x=O.payload,typeof x=="function"){g=x.call(V,g,m);break t}g=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=O.payload,m=typeof x=="function"?x.call(V,g,m):x,m==null)break t;g=Ut({},g,m);break t;case 2:Ai=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Ji|=a,e.lanes=a,e.memoizedState=g}}function A0(e,t){if(typeof e!="function")throw Error(P(191,e));e.call(t)}function b0(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)A0(n[e],t)}var qs=Pn(null),Ou=Pn(0);function ry(e,t){e=ai,jt(Ou,e),jt(qs,t),ai=e|t.baseLanes}function Pf(){jt(Ou,ai),jt(qs,qs.current)}function rm(){ai=Ou.current,de(qs),de(Ou)}var $i=0,it=null,Ct=null,Jt=null,Mu=!1,Cs=!1,Mr=!1,ku=0,To=0,Ns=null,QS=0;function Yt(){throw Error(P(321))}function sm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function am(e,t,n,i,r,s){return $i=s,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J.H=e===null||e.memoizedState===null?tT:eT,Mr=!1,s=n(i,r),Mr=!1,Cs&&(s=w0(t,n,i,r)),S0(e),s}function S0(e){J.H=Uu;var t=Ct!==null&&Ct.next!==null;if($i=0,Jt=Ct=it=null,Mu=!1,To=0,Ns=null,t)throw Error(P(300));e===null||fe||(e=e.dependencies,e!==null&&Vu(e)&&(fe=!0))}function w0(e,t,n,i){it=e;var r=0;do{if(Cs&&(Ns=null),To=0,Cs=!1,25<=r)throw Error(P(301));if(r+=1,Jt=Ct=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}J.H=WS,s=t(n,i)}while(Cs);return s}function YS(){var e=J.H,t=e.useState()[0];return t=typeof t.then=="function"?Zo(t):t,e=e.useState()[0],(Ct!==null?Ct.memoizedState:null)!==e&&(it.flags|=1024),t}function om(){var e=ku!==0;return ku=0,e}function lm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function um(e){if(Mu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Mu=!1}$i=0,Jt=Ct=it=null,Cs=!1,To=ku=0,Ns=null}function Pe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?it.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function ee(){if(Ct===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=Jt===null?it.memoizedState:Jt.next;if(t!==null)Jt=t,Ct=e;else{if(e===null)throw it.alternate===null?Error(P(467)):Error(P(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Jt===null?it.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(e){var t=To;return To+=1,Ns===null&&(Ns=[]),e=E0(Ns,e,t),t=it,(Jt===null?t.memoizedState:Jt.next)===null&&(t=t.alternate,J.H=t===null||t.memoizedState===null?tT:eT),e}function Rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zo(e);if(e.$$typeof===Yn)return xe(e)}throw Error(P(438,String(e)))}function hm(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=cm(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Db;return t.index++,n}function ri(e,t){return typeof t=="function"?t(e):t}function ou(e){var t=ee();return fm(t,Ct,e)}function fm(e,t,n){var i=e.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(dt&g)===g:($i&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Bs&&(d=!0);else if(($i&m)===m){h=h.next,m===Bs&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,it.lanes|=m,Ji|=m;g=h.action,Mr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,it.lanes|=g,Ji|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=s:u.next=l,!sn(s,e.memoizedState)&&(fe=!0,d&&(n=Is,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function kh(e){var t=ee(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);sn(s,t.memoizedState)||(fe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function R0(e,t,n){var i=it,r=ee(),s=_t;if(s){if(n===void 0)throw Error(P(407));n=n()}else n=t();var a=!sn((Ct||r).memoizedState,n);a&&(r.memoizedState=n,fe=!0),r=r.queue;var l=N0.bind(null,i,r,e);if(Jo(2048,8,l,[e]),r.getSnapshot!==t||a||Jt!==null&&Jt.memoizedState.tag&1){if(i.flags|=2048,Hs(9,Ic(),C0.bind(null,i,r,n,t),null),Ot===null)throw Error(P(349));s||$i&124||I0(i,t,n)}return n}function I0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=cm(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function C0(e,t,n,i){t.value=n,t.getSnapshot=i,x0(t)&&D0(e)}function N0(e,t,n){return n(function(){x0(t)&&D0(e)})}function x0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function D0(e){var t=sa(e,2);t!==null&&en(t,e,2)}function Lf(e){var t=Pe();if(typeof e=="function"){var n=e;if(e=n(),Mr){xi(!0);try{n()}finally{xi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:e},t}function V0(e,t,n,i){return e.baseState=n,fm(e,Ct,typeof i=="function"?i:ri)}function KS(e,t,n,i,r){if(Cc(e))throw Error(P(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};J.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,O0(t,s)):(s.next=n.next,t.pending=n.next=s)}}function O0(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=J.T,a={};J.T=a;try{var l=n(r,i),u=J.S;u!==null&&u(a,l),sy(e,t,l)}catch(h){jf(e,t,h)}finally{J.T=s}}else try{s=n(r,i),sy(e,t,s)}catch(h){jf(e,t,h)}}function sy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ay(e,t,i)},function(i){return jf(e,t,i)}):ay(e,t,n)}function ay(e,t,n){t.status="fulfilled",t.value=n,M0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,O0(e,n)))}function jf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,M0(t),t=t.next;while(t!==i)}e.action=null}function M0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function k0(e,t){return t}function oy(e,t){if(_t){var n=Ot.formState;if(n!==null){t:{var i=it;if(_t){if(Gt){e:{for(var r=Gt,s=Cn;r.nodeType!==8;){if(!s){r=null;break e}if(r=En(r.nextSibling),r===null){r=null;break e}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Gt=En(r.nextSibling),i=r.data==="F!";break t}}Vr(i)}i=!1}i&&(t=n[0])}}return n=Pe(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:t},n.queue=i,n=Z0.bind(null,it,i),i.dispatch=n,i=Lf(!1),s=pm.bind(null,it,!1,i.queue),i=Pe(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=KS.bind(null,it,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ly(e){var t=ee();return U0(t,Ct,e)}function U0(e,t,n){if(t=fm(e,t,k0)[0],e=ou(ri)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Zo(t)}catch(a){throw a===$o?wc:a}else i=t;t=ee();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Hs(9,Ic(),XS.bind(null,r,n),null)),[i,s,e]}function XS(e,t){e.action=t}function uy(e){var t=ee(),n=Ct;if(n!==null)return U0(t,n,e);ee(),t=t.memoizedState,n=ee();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Hs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=cm(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ic(){return{destroy:void 0,resource:void 0}}function P0(){return ee().memoizedState}function lu(e,t,n,i){var r=Pe();i=i===void 0?null:i,it.flags|=e,r.memoizedState=Hs(1|t,Ic(),n,i)}function Jo(e,t,n,i){var r=ee();i=i===void 0?null:i;var s=r.memoizedState.inst;Ct!==null&&i!==null&&sm(i,Ct.memoizedState.deps)?r.memoizedState=Hs(t,s,n,i):(it.flags|=e,r.memoizedState=Hs(1|t,s,n,i))}function cy(e,t){lu(8390656,8,e,t)}function L0(e,t){Jo(2048,8,e,t)}function j0(e,t){return Jo(4,2,e,t)}function z0(e,t){return Jo(4,4,e,t)}function B0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function q0(e,t,n){n=n!=null?n.concat([e]):null,Jo(4,4,B0.bind(null,t,e),n)}function dm(){}function H0(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&sm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function F0(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&sm(t,i[1]))return i[0];if(i=e(),Mr){xi(!0);try{e()}finally{xi(!1)}}return n.memoizedState=[i,t],i}function mm(e,t,n){return n===void 0||$i&1073741824?e.memoizedState=t:(e.memoizedState=n,e=MT(),it.lanes|=e,Ji|=e,n)}function G0(e,t,n,i){return sn(n,t)?n:qs.current!==null?(e=mm(e,n,i),sn(e,t)||(fe=!0),e):$i&42?(e=MT(),it.lanes|=e,Ji|=e,t):(fe=!0,e.memoizedState=n)}function Q0(e,t,n,i,r){var s=vt.p;vt.p=s!==0&&8>s?s:8;var a=J.T,l={};J.T=l,pm(e,!1,t,n);try{var u=r(),h=J.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=GS(u,i);to(e,t,d,tn(e))}else to(e,t,i,tn(e))}catch(g){to(e,t,{then:function(){},status:"rejected",reason:g},tn())}finally{vt.p=s,J.T=a}}function $S(){}function zf(e,t,n,i){if(e.tag!==5)throw Error(P(476));var r=Y0(e).queue;Q0(e,r,t,wr,n===null?$S:function(){return K0(e),n(i)})}function Y0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:wr,baseState:wr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:wr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function K0(e){var t=Y0(e).next.queue;to(e,t,{},tn())}function gm(){return xe(wo)}function X0(){return ee().memoizedState}function $0(){return ee().memoizedState}function ZS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=tn();e=Pi(n);var i=Li(t,e,n);i!==null&&(en(i,t,n),Za(i,t,n)),t={cache:em()},e.payload=t;return}t=t.return}}function JS(e,t,n){var i=tn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Cc(e)?J0(t,n):(n=Zd(e,t,n,i),n!==null&&(en(n,e,i),W0(n,t,i)))}function Z0(e,t,n){var i=tn();to(e,t,n,i)}function to(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))J0(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,sn(l,a))return Sc(e,t,r,0),Ot===null&&bc(),!1}catch{}finally{}if(n=Zd(e,t,r,i),n!==null)return en(n,e,i),W0(n,t,i),!0}return!1}function pm(e,t,n,i){if(i={lane:2,revertLane:Sm(),action:i,hasEagerState:!1,eagerState:null,next:null},Cc(e)){if(t)throw Error(P(479))}else t=Zd(e,n,i,2),t!==null&&en(t,e,2)}function Cc(e){var t=e.alternate;return e===it||t!==null&&t===it}function J0(e,t){Cs=Mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function W0(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Hv(e,n)}}var Uu={readContext:xe,use:Rc,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},tT={readContext:xe,use:Rc,useCallback:function(e,t){return Pe().memoizedState=[e,t===void 0?null:t],e},useContext:xe,useEffect:cy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,lu(4194308,4,B0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lu(4194308,4,e,t)},useInsertionEffect:function(e,t){lu(4,2,e,t)},useMemo:function(e,t){var n=Pe();t=t===void 0?null:t;var i=e();if(Mr){xi(!0);try{e()}finally{xi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Pe();if(n!==void 0){var r=n(t);if(Mr){xi(!0);try{n(t)}finally{xi(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=JS.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Pe();return e={current:e},t.memoizedState=e},useState:function(e){e=Lf(e);var t=e.queue,n=Z0.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:dm,useDeferredValue:function(e,t){var n=Pe();return mm(n,e,t)},useTransition:function(){var e=Lf(!1);return e=Q0.bind(null,it,e.queue,!0,!1),Pe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,r=Pe();if(_t){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Ot===null)throw Error(P(349));dt&124||I0(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,cy(N0.bind(null,i,s,e),[e]),i.flags|=2048,Hs(9,Ic(),C0.bind(null,i,s,n,t),null),n},useId:function(){var e=Pe(),t=Ot.identifierPrefix;if(_t){var n=Xn,i=Kn;n=(i&~(1<<32-We(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=ku++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=QS++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:gm,useFormState:oy,useActionState:oy,useOptimistic:function(e){var t=Pe();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=pm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:hm,useCacheRefresh:function(){return Pe().memoizedState=ZS.bind(null,it)}},eT={readContext:xe,use:Rc,useCallback:H0,useContext:xe,useEffect:L0,useImperativeHandle:q0,useInsertionEffect:j0,useLayoutEffect:z0,useMemo:F0,useReducer:ou,useRef:P0,useState:function(){return ou(ri)},useDebugValue:dm,useDeferredValue:function(e,t){var n=ee();return G0(n,Ct.memoizedState,e,t)},useTransition:function(){var e=ou(ri)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:Zo(e),t]},useSyncExternalStore:R0,useId:X0,useHostTransitionStatus:gm,useFormState:ly,useActionState:ly,useOptimistic:function(e,t){var n=ee();return V0(n,Ct,e,t)},useMemoCache:hm,useCacheRefresh:$0},WS={readContext:xe,use:Rc,useCallback:H0,useContext:xe,useEffect:L0,useImperativeHandle:q0,useInsertionEffect:j0,useLayoutEffect:z0,useMemo:F0,useReducer:kh,useRef:P0,useState:function(){return kh(ri)},useDebugValue:dm,useDeferredValue:function(e,t){var n=ee();return Ct===null?mm(n,e,t):G0(n,Ct.memoizedState,e,t)},useTransition:function(){var e=kh(ri)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:Zo(e),t]},useSyncExternalStore:R0,useId:X0,useHostTransitionStatus:gm,useFormState:uy,useActionState:uy,useOptimistic:function(e,t){var n=ee();return Ct!==null?V0(n,Ct,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hm,useCacheRefresh:$0},xs=null,Eo=0;function Bl(e){var t=Eo;return Eo+=1,xs===null&&(xs=[]),E0(xs,e,t)}function Oa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ql(e,t){throw t.$$typeof===Nb?Error(P(525)):(e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hy(e){var t=e._init;return t(e._payload)}function nT(e){function t(S,T){if(e){var R=S.deletions;R===null?(S.deletions=[T],S.flags|=16):R.push(T)}}function n(S,T){if(!e)return null;for(;T!==null;)t(S,T),T=T.sibling;return null}function i(S){for(var T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function r(S,T){return S=Wn(S,T),S.index=0,S.sibling=null,S}function s(S,T,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<T?(S.flags|=67108866,T):R):(S.flags|=67108866,T)):(S.flags|=1048576,T)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,T,R,D){return T===null||T.tag!==6?(T=Vh(R,S.mode,D),T.return=S,T):(T=r(T,R),T.return=S,T)}function u(S,T,R,D){var L=R.type;return L===cs?d(S,T,R.props.children,D,R.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ei&&hy(L)===T.type)?(T=r(T,R.props),Oa(T,R),T.return=S,T):(T=su(R.type,R.key,R.props,null,S.mode,D),Oa(T,R),T.return=S,T)}function h(S,T,R,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=Oh(R,S.mode,D),T.return=S,T):(T=r(T,R.children||[]),T.return=S,T)}function d(S,T,R,D,L){return T===null||T.tag!==7?(T=Rr(R,S.mode,D,L),T.return=S,T):(T=r(T,R),T.return=S,T)}function g(S,T,R){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Vh(""+T,S.mode,R),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ml:return R=su(T.type,T.key,T.props,null,S.mode,R),Oa(R,T),R.return=S,R;case Pa:return T=Oh(T,S.mode,R),T.return=S,T;case Ei:var D=T._init;return T=D(T._payload),g(S,T,R)}if(La(T)||Na(T))return T=Rr(T,S.mode,R,null),T.return=S,T;if(typeof T.then=="function")return g(S,Bl(T),R);if(T.$$typeof===Yn)return g(S,jl(S,T),R);ql(S,T)}return null}function m(S,T,R,D){var L=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(S,T,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ml:return R.key===L?u(S,T,R,D):null;case Pa:return R.key===L?h(S,T,R,D):null;case Ei:return L=R._init,R=L(R._payload),m(S,T,R,D)}if(La(R)||Na(R))return L!==null?null:d(S,T,R,D,null);if(typeof R.then=="function")return m(S,T,Bl(R),D);if(R.$$typeof===Yn)return m(S,T,jl(S,R),D);ql(S,R)}return null}function _(S,T,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(R)||null,l(T,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ml:return S=S.get(D.key===null?R:D.key)||null,u(T,S,D,L);case Pa:return S=S.get(D.key===null?R:D.key)||null,h(T,S,D,L);case Ei:var B=D._init;return D=B(D._payload),_(S,T,R,D,L)}if(La(D)||Na(D))return S=S.get(R)||null,d(T,S,D,L,null);if(typeof D.then=="function")return _(S,T,R,Bl(D),L);if(D.$$typeof===Yn)return _(S,T,R,jl(T,D),L);ql(T,D)}return null}function x(S,T,R,D){for(var L=null,B=null,E=T,y=T=0,A=null;E!==null&&y<R.length;y++){E.index>y?(A=E,E=null):A=E.sibling;var w=m(S,E,R[y],D);if(w===null){E===null&&(E=A);break}e&&E&&w.alternate===null&&t(S,E),T=s(w,T,y),B===null?L=w:B.sibling=w,B=w,E=A}if(y===R.length)return n(S,E),_t&&Er(S,y),L;if(E===null){for(;y<R.length;y++)E=g(S,R[y],D),E!==null&&(T=s(E,T,y),B===null?L=E:B.sibling=E,B=E);return _t&&Er(S,y),L}for(E=i(E);y<R.length;y++)A=_(E,S,y,R[y],D),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?y:A.key),T=s(A,T,y),B===null?L=A:B.sibling=A,B=A);return e&&E.forEach(function(C){return t(S,C)}),_t&&Er(S,y),L}function O(S,T,R,D){if(R==null)throw Error(P(151));for(var L=null,B=null,E=T,y=T=0,A=null,w=R.next();E!==null&&!w.done;y++,w=R.next()){E.index>y?(A=E,E=null):A=E.sibling;var C=m(S,E,w.value,D);if(C===null){E===null&&(E=A);break}e&&E&&C.alternate===null&&t(S,E),T=s(C,T,y),B===null?L=C:B.sibling=C,B=C,E=A}if(w.done)return n(S,E),_t&&Er(S,y),L;if(E===null){for(;!w.done;y++,w=R.next())w=g(S,w.value,D),w!==null&&(T=s(w,T,y),B===null?L=w:B.sibling=w,B=w);return _t&&Er(S,y),L}for(E=i(E);!w.done;y++,w=R.next())w=_(E,S,y,w.value,D),w!==null&&(e&&w.alternate!==null&&E.delete(w.key===null?y:w.key),T=s(w,T,y),B===null?L=w:B.sibling=w,B=w);return e&&E.forEach(function(I){return t(S,I)}),_t&&Er(S,y),L}function V(S,T,R,D){if(typeof R=="object"&&R!==null&&R.type===cs&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ml:t:{for(var L=R.key;T!==null;){if(T.key===L){if(L=R.type,L===cs){if(T.tag===7){n(S,T.sibling),D=r(T,R.props.children),D.return=S,S=D;break t}}else if(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ei&&hy(L)===T.type){n(S,T.sibling),D=r(T,R.props),Oa(D,R),D.return=S,S=D;break t}n(S,T);break}else t(S,T);T=T.sibling}R.type===cs?(D=Rr(R.props.children,S.mode,D,R.key),D.return=S,S=D):(D=su(R.type,R.key,R.props,null,S.mode,D),Oa(D,R),D.return=S,S=D)}return a(S);case Pa:t:{for(L=R.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){n(S,T.sibling),D=r(T,R.children||[]),D.return=S,S=D;break t}else{n(S,T);break}else t(S,T);T=T.sibling}D=Oh(R,S.mode,D),D.return=S,S=D}return a(S);case Ei:return L=R._init,R=L(R._payload),V(S,T,R,D)}if(La(R))return x(S,T,R,D);if(Na(R)){if(L=Na(R),typeof L!="function")throw Error(P(150));return R=L.call(R),O(S,T,R,D)}if(typeof R.then=="function")return V(S,T,Bl(R),D);if(R.$$typeof===Yn)return V(S,T,jl(S,R),D);ql(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,T!==null&&T.tag===6?(n(S,T.sibling),D=r(T,R),D.return=S,S=D):(n(S,T),D=Vh(R,S.mode,D),D.return=S,S=D),a(S)):n(S,T)}return function(S,T,R,D){try{Eo=0;var L=V(S,T,R,D);return xs=null,L}catch(E){if(E===$o||E===wc)throw E;var B=Xe(29,E,null,S.mode);return B.lanes=D,B.return=S,B}finally{}}}var Fs=nT(!0),iT=nT(!1),mn=Pn(null),Vn=null;function Si(e){var t=e.alternate;jt(re,re.current&1),jt(mn,e),Vn===null&&(t===null||qs.current!==null||t.memoizedState!==null)&&(Vn=e)}function rT(e){if(e.tag===22){if(jt(re,re.current),jt(mn,e),Vn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vn=e)}}else wi()}function wi(){jt(re,re.current),jt(mn,mn.current)}function Zn(e){de(mn),Vn===e&&(Vn=null),de(re)}var re=Pn(0);function Pu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||id(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Uh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ut({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tn(),r=Pi(i);r.payload=t,n!=null&&(r.callback=n),t=Li(e,r,i),t!==null&&(en(t,e,i),Za(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tn(),r=Pi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Li(e,r,i),t!==null&&(en(t,e,i),Za(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tn(),i=Pi(n);i.tag=2,t!=null&&(i.callback=t),t=Li(e,i,n),t!==null&&(en(t,e,n),Za(t,e,n))}};function fy(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!_o(n,i)||!_o(r,s):!0}function dy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Bf.enqueueReplaceState(t,t.state,null)}function kr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ut({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Lu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function sT(e){Lu(e)}function aT(e){console.error(e)}function oT(e){Lu(e)}function ju(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function my(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function qf(e,t,n){return n=Pi(n),n.tag=3,n.payload={element:null},n.callback=function(){ju(e,t)},n}function lT(e){return e=Pi(e),e.tag=3,e}function uT(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){my(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){my(t,n,i),typeof r!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function tw(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ko(t,n,r,!0),n=mn.current,n!==null){switch(n.tag){case 13:return Vn===null?$f():n.alternate===null&&Qt===0&&(Qt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Mf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Yh(e,i,r)),!1;case 22:return n.flags|=65536,i===Mf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Yh(e,i,r)),!1}throw Error(P(435,n.tag))}return Yh(e,i,r),$f(),!1}if(_t)return t=mn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Nf&&(e=Error(P(422),{cause:i}),vo(hn(e,n)))):(i!==Nf&&(t=Error(P(423),{cause:i}),vo(hn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=hn(i,n),r=qf(e.stateNode,i,r),Mh(e,r),Qt!==4&&(Qt=2)),!1;var s=Error(P(520),{cause:i});if(s=hn(s,n),io===null?io=[s]:io.push(s),Qt!==4&&(Qt=2),t===null)return!0;i=hn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=qf(n.stateNode,i,e),Mh(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ji===null||!ji.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=lT(r),uT(r,e,n,i),Mh(n,r),!1}n=n.return}while(n!==null);return!1}var cT=Error(P(461)),fe=!1;function pe(e,t,n,i){t.child=e===null?iT(t,null,n,i):Fs(t,e.child,n,i)}function gy(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Or(t),i=am(e,t,n,a,s,r),l=om(),e!==null&&!fe?(lm(e,t,r),si(e,t,r)):(_t&&l&&Wd(t),t.flags|=1,pe(e,t,i,r),t.child)}function py(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Jd(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,hT(e,t,s,i,r)):(e=su(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!ym(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(a,i)&&e.ref===t.ref)return si(e,t,r)}return t.flags|=1,e=Wn(s,i),e.ref=t.ref,e.return=t,t.child=e}function hT(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(_o(s,i)&&e.ref===t.ref)if(fe=!1,t.pendingProps=i=s,ym(e,r))e.flags&131072&&(fe=!0);else return t.lanes=e.lanes,si(e,t,r)}return Hf(e,t,n,i,r)}function fT(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return yy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&au(t,s!==null?s.cachePool:null),s!==null?ry(t,s):Pf(),rT(t);else return t.lanes=t.childLanes=536870912,yy(e,t,s!==null?s.baseLanes|n:n,n)}else s!==null?(au(t,s.cachePool),ry(t,s),wi(),t.memoizedState=null):(e!==null&&au(t,null),Pf(),wi());return pe(e,t,r,n),t.child}function yy(e,t,n,i){var r=nm();return r=r===null?null:{parent:ie._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&au(t,null),Pf(),rT(t),e!==null&&Ko(e,t,i,!0),null}function uu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Hf(e,t,n,i,r){return Or(t),n=am(e,t,n,i,void 0,r),i=om(),e!==null&&!fe?(lm(e,t,r),si(e,t,r)):(_t&&i&&Wd(t),t.flags|=1,pe(e,t,n,r),t.child)}function _y(e,t,n,i,r,s){return Or(t),t.updateQueue=null,n=w0(t,i,n,r),S0(e),i=om(),e!==null&&!fe?(lm(e,t,s),si(e,t,s)):(_t&&i&&Wd(t),t.flags|=1,pe(e,t,n,s),t.child)}function vy(e,t,n,i,r){if(Or(t),t.stateNode===null){var s=_s,a=n.contextType;typeof a=="object"&&a!==null&&(s=xe(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Bf,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},im(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?xe(a):_s,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Uh(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Bf.enqueueReplaceState(s,s.state,null),Wa(t,i,s,r),Ja(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,u=kr(n,l);s.props=u;var h=s.context,d=n.contextType;a=_s,typeof d=="object"&&d!==null&&(a=xe(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&dy(t,s,i,a),Ai=!1;var m=t.memoizedState;s.state=m,Wa(t,i,s,r),Ja(),h=t.memoizedState,l||m!==h||Ai?(typeof g=="function"&&(Uh(t,n,g,i),h=t.memoizedState),(u=Ai||fy(t,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,kf(e,t),a=t.memoizedProps,d=kr(n,a),s.props=d,g=t.pendingProps,m=s.context,h=n.contextType,u=_s,typeof h=="object"&&h!==null&&(u=xe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&dy(t,s,i,u),Ai=!1,m=t.memoizedState,s.state=m,Wa(t,i,s,r),Ja();var _=t.memoizedState;a!==g||m!==_||Ai||e!==null&&e.dependencies!==null&&Vu(e.dependencies)?(typeof l=="function"&&(Uh(t,n,l,i),_=t.memoizedState),(d=Ai||fy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Vu(e.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),s.props=i,s.state=_,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,uu(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Fs(t,e.child,null,r),t.child=Fs(t,null,n,r)):pe(e,t,n,r),t.memoizedState=s.state,e=t.child):e=si(e,t,r),e}function Ty(e,t,n,i){return Yo(),t.flags|=256,pe(e,t,n,i),t.child}var Ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lh(e){return{baseLanes:e,cachePool:v0()}}function jh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=dn),e}function dT(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(re.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(_t){if(r?Si(t):wi(),_t){var l=Gt,u;if(u=l){t:{for(u=l,l=Cn;u.nodeType!==8;){if(!l){l=null;break t}if(u=En(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ir!==null?{id:Kn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},u=Xe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Oe=t,Gt=null,u=!0):u=!1}u||Vr(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return id(l)?t.lanes=32:t.lanes=536870912,null;Zn(t)}return l=i.children,i=i.fallback,r?(wi(),r=t.mode,l=zu({mode:"hidden",children:l},r),i=Rr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,r=t.child,r.memoizedState=Lh(n),r.childLanes=jh(e,a,n),t.memoizedState=Ph,i):(Si(t),Ff(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Si(t),t.flags&=-257,t=zh(e,t,n)):t.memoizedState!==null?(wi(),t.child=e.child,t.flags|=128,t=null):(wi(),r=i.fallback,l=t.mode,i=zu({mode:"visible",children:i.children},l),r=Rr(r,l,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Fs(t,e.child,null,n),i=t.child,i.memoizedState=Lh(n),i.childLanes=jh(e,a,n),t.memoizedState=Ph,t=r);else if(Si(t),id(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(P(419)),i.stack="",i.digest=a,vo({value:i,source:null,stack:null}),t=zh(e,t,n)}else if(fe||Ko(e,t,n,!1),a=(n&e.childLanes)!==0,fe||a){if(a=Ot,a!==null&&(i=n&-n,i=i&42?1:Bd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,sa(e,i),en(a,e,i),cT;l.data==="$?"||$f(),t=zh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Gt=En(l.nextSibling),Oe=t,_t=!0,Cr=null,Cn=!1,e!==null&&(ln[un++]=Kn,ln[un++]=Xn,ln[un++]=Ir,Kn=e.id,Xn=e.overflow,Ir=t),t=Ff(t,i.children),t.flags|=4096);return t}return r?(wi(),r=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Wn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Wn(h,r):(r=Rr(r,l,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,l=e.child.memoizedState,l===null?l=Lh(n):(u=l.cachePool,u!==null?(h=ie._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=v0(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=jh(e,a,n),t.memoizedState=Ph,i):(Si(t),n=e.child,e=n.sibling,n=Wn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Ff(e,t){return t=zu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zu(e,t){return e=Xe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zh(e,t,n){return Fs(t,e.child,null,n),e=Ff(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ey(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Df(e.return,t,n)}function Bh(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function mT(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(pe(e,t,i.children,n),i=re.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ey(e,n,t);else if(e.tag===19)Ey(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(jt(re,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Pu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Bh(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Pu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Bh(t,!0,n,null,s);break;case"together":Bh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function si(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ji|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ko(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=Wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ym(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Vu(e)))}function ew(e,t,n){switch(t.tag){case 3:Su(t,t.stateNode.containerInfo),bi(t,ie,e.memoizedState.cache),Yo();break;case 27:case 5:vf(t);break;case 4:Su(t,t.stateNode.containerInfo);break;case 10:bi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Si(t),t.flags|=128,null):n&t.child.childLanes?dT(e,t,n):(Si(t),e=si(e,t,n),e!==null?e.sibling:null);Si(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ko(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return mT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),jt(re,re.current),i)break;return null;case 22:case 23:return t.lanes=0,fT(e,t,n);case 24:bi(t,ie,e.memoizedState.cache)}return si(e,t,n)}function gT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)fe=!0;else{if(!ym(e,n)&&!(t.flags&128))return fe=!1,ew(e,t,n);fe=!!(e.flags&131072)}else fe=!1,_t&&t.flags&1048576&&y0(t,Du,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Jd(i)?(e=kr(i,e),t.tag=1,t=vy(null,t,i,e,n)):(t.tag=0,t=Hf(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Ld){t.tag=11,t=gy(null,t,i,e,n);break t}else if(r===jd){t.tag=14,t=py(null,t,i,e,n);break t}}throw t=yf(i)||i,Error(P(306,t,""))}}return t;case 0:return Hf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=kr(i,t.pendingProps),vy(e,t,i,r,n);case 3:t:{if(Su(t,t.stateNode.containerInfo),e===null)throw Error(P(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,kf(e,t),Wa(t,i,null,n);var a=t.memoizedState;if(i=a.cache,bi(t,ie,i),i!==s.cache&&Vf(t,[ie],n,!0),Ja(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Ty(e,t,i,n);break t}else if(i!==r){r=hn(Error(P(424)),t),vo(r),t=Ty(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gt=En(e.firstChild),Oe=t,_t=!0,Cr=null,Cn=!0,n=iT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Yo(),i===r){t=si(e,t,n);break t}pe(e,t,i,n)}t=t.child}return t;case 26:return uu(e,t),e===null?(n=Ly(t.type,null,t.pendingProps,null))?t.memoizedState=n:_t||(n=t.type,e=t.pendingProps,i=Yu(Ui.current).createElement(n),i[Ne]=t,i[Be]=e,Ee(i,n,e),ce(i),t.stateNode=i):t.memoizedState=Ly(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return vf(t),e===null&&_t&&(i=t.stateNode=eE(t.type,t.pendingProps,Ui.current),Oe=t,Cn=!0,r=Gt,lr(t.type)?(rd=r,Gt=En(i.firstChild)):Gt=r),pe(e,t,t.pendingProps.children,n),uu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_t&&((r=i=Gt)&&(i=Nw(i,t.type,t.pendingProps,Cn),i!==null?(t.stateNode=i,Oe=t,Gt=En(i.firstChild),Cn=!1,r=!0):r=!1),r||Vr(t)),vf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,ed(r,s)?i=null:a!==null&&ed(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=am(e,t,YS,null,null,n),wo._currentValue=r),uu(e,t),pe(e,t,i,n),t.child;case 6:return e===null&&_t&&((e=n=Gt)&&(n=xw(n,t.pendingProps,Cn),n!==null?(t.stateNode=n,Oe=t,Gt=null,e=!0):e=!1),e||Vr(t)),null;case 13:return dT(e,t,n);case 4:return Su(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Fs(t,null,i,n):pe(e,t,i,n),t.child;case 11:return gy(e,t,t.type,t.pendingProps,n);case 7:return pe(e,t,t.pendingProps,n),t.child;case 8:return pe(e,t,t.pendingProps.children,n),t.child;case 12:return pe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,bi(t,t.type,i.value),pe(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Or(t),r=xe(r),i=i(r),t.flags|=1,pe(e,t,i,n),t.child;case 14:return py(e,t,t.type,t.pendingProps,n);case 15:return hT(e,t,t.type,t.pendingProps,n);case 19:return mT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=zu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Wn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return fT(e,t,n);case 24:return Or(t),i=xe(ie),e===null?(r=nm(),r===null&&(r=Ot,s=em(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},im(t),bi(t,ie,r)):(e.lanes&n&&(kf(e,t),Wa(t,null,null,n),Ja()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),bi(t,ie,i)):(i=s.cache,bi(t,ie,i),i!==r.cache&&Vf(t,[ie],n,!0))),pe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(P(156,t.tag))}function Hn(e){e.flags|=4}function Ay(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!rE(t)){if(t=mn.current,t!==null&&((dt&4194048)===dt?Vn!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==Vn))throw $a=Mf,T0;e.flags|=8192}}function Hl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Bv():536870912,e.lanes|=t,Gs|=t)}function Ma(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function nw(e,t,n){var i=t.pendingProps;switch(tm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return Bt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ti(ie),Ls(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Va(t)?Hn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jp())),Bt(t),null;case 26:return n=t.memoizedState,e===null?(Hn(t),n!==null?(Bt(t),Ay(t,n)):(Bt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Hn(t),Bt(t),Ay(t,n)):(Bt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Hn(t),Bt(t),t.flags&=-16777217),null;case 27:wu(t),n=Ui.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Bt(t),null}e=xn.current,Va(t)?$p(t):(e=eE(r,i,n),t.stateNode=e,Hn(t))}return Bt(t),null;case 5:if(wu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Bt(t),null}if(e=xn.current,Va(t))$p(t);else{switch(r=Yu(Ui.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Ne]=t,e[Be]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;t:switch(Ee(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Hn(t)}}return Bt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(P(166));if(e=Ui.current,Va(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Oe,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ne]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||JT(e.nodeValue,n)),e||Vr(t)}else e=Yu(e).createTextNode(i),e[Ne]=t,t.stateNode=e}return Bt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Va(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(P(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[Ne]=t}else Yo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),r=!1}else r=Jp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Zn(t),t):(Zn(t),null)}if(Zn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Hl(t,t.updateQueue),Bt(t),null;case 4:return Ls(),e===null&&wm(t.stateNode.containerInfo),Bt(t),null;case 10:return ti(t.type),Bt(t),null;case 19:if(de(re),r=t.memoizedState,r===null)return Bt(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Ma(r,!1);else{if(Qt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Pu(e),s!==null){for(t.flags|=128,Ma(r,!1),e=s.updateQueue,t.updateQueue=e,Hl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)p0(n,e),n=n.sibling;return jt(re,re.current&1|2),t.child}e=e.sibling}r.tail!==null&&Dn()>qu&&(t.flags|=128,i=!0,Ma(r,!1),t.lanes=4194304)}else{if(!i)if(e=Pu(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Hl(t,e),Ma(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!_t)return Bt(t),null}else 2*Dn()-r.renderingStartTime>qu&&n!==536870912&&(t.flags|=128,i=!0,Ma(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Dn(),t.sibling=null,e=re.current,jt(re,i?e&1|2:e&1),t):(Bt(t),null);case 22:case 23:return Zn(t),rm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),n=t.updateQueue,n!==null&&Hl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&de(Nr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ti(ie),Bt(t),null;case 25:return null;case 30:return null}throw Error(P(156,t.tag))}function iw(e,t){switch(tm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(ie),Ls(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return wu(t),null;case 13:if(Zn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Yo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(re),null;case 4:return Ls(),null;case 10:return ti(t.type),null;case 22:case 23:return Zn(t),rm(),e!==null&&de(Nr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ti(ie),null;case 25:return null;default:return null}}function pT(e,t){switch(tm(t),t.tag){case 3:ti(ie),Ls();break;case 26:case 27:case 5:wu(t);break;case 4:Ls();break;case 13:Zn(t);break;case 19:de(re);break;case 10:ti(t.type);break;case 22:case 23:Zn(t),rm(),e!==null&&de(Nr);break;case 24:ti(ie)}}function Wo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Vt(t,t.return,l)}}function Zi(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=t;var u=n,h=l;try{h()}catch(d){Vt(r,u,d)}}}i=i.next}while(i!==s)}}catch(d){Vt(t,t.return,d)}}function yT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{b0(t,n)}catch(i){Vt(e,e.return,i)}}}function _T(e,t,n){n.props=kr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Vt(e,t,i)}}function eo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Vt(e,t,r)}}function Nn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Vt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Vt(e,t,r)}else n.current=null}function vT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Vt(e,e.return,r)}}function qh(e,t,n){try{var i=e.stateNode;Sw(i,e.type,n,t),i[Be]=t}catch(r){Vt(e,e.return,r)}}function TT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&lr(e.type)||e.tag===4}function Hh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||TT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&lr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vc));else if(i!==4&&(i===27&&lr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Gf(e,t,n),e=e.sibling;e!==null;)Gf(e,t,n),e=e.sibling}function Bu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&lr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Bu(e,t,n),e=e.sibling;e!==null;)Bu(e,t,n),e=e.sibling}function ET(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ee(t,i,n),t[Ne]=e,t[Be]=n}catch(s){Vt(e,e.return,s)}}var Gn=!1,Kt=!1,Fh=!1,by=typeof WeakSet=="function"?WeakSet:Set,ue=null;function rw(e,t){if(e=e.containerInfo,Wf=Zu,e=l0(e),Xd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(td={focusedElem:e,selectionRange:n},Zu=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){switch(t=ue,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=kr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){Vt(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)nd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":nd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(P(163))}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}}function AT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:_i(e,n),i&4&&Wo(5,n);break;case 1:if(_i(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Vt(n,n.return,a)}else{var r=kr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Vt(n,n.return,a)}}i&64&&yT(n),i&512&&eo(n,n.return);break;case 3:if(_i(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{b0(e,t)}catch(a){Vt(n,n.return,a)}}break;case 27:t===null&&i&4&&ET(n);case 26:case 5:_i(e,n),t===null&&i&4&&vT(n),i&512&&eo(n,n.return);break;case 12:_i(e,n);break;case 13:_i(e,n),i&4&&wT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=dw.bind(null,n),Dw(e,n))));break;case 22:if(i=n.memoizedState!==null||Gn,!i){t=t!==null&&t.memoizedState!==null||Kt,r=Gn;var s=Kt;Gn=i,(Kt=t)&&!s?Ti(e,n,(n.subtreeFlags&8772)!==0):_i(e,n),Gn=r,Kt=s}break;case 30:break;default:_i(e,n)}}function bT(e){var t=e.alternate;t!==null&&(e.alternate=null,bT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Hd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pt=null,Le=!1;function Fn(e,t,n){for(n=n.child;n!==null;)ST(e,t,n),n=n.sibling}function ST(e,t,n){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(qo,n)}catch{}switch(n.tag){case 26:Kt||Nn(n,t),Fn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Kt||Nn(n,t);var i=Pt,r=Le;lr(n.type)&&(Pt=n.stateNode,Le=!1),Fn(e,t,n),so(n.stateNode),Pt=i,Le=r;break;case 5:Kt||Nn(n,t);case 6:if(i=Pt,r=Le,Pt=null,Fn(e,t,n),Pt=i,Le=r,Pt!==null)if(Le)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(n.stateNode)}catch(s){Vt(n,t,s)}else try{Pt.removeChild(n.stateNode)}catch(s){Vt(n,t,s)}break;case 18:Pt!==null&&(Le?(e=Pt,ky(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Co(e)):ky(Pt,n.stateNode));break;case 4:i=Pt,r=Le,Pt=n.stateNode.containerInfo,Le=!0,Fn(e,t,n),Pt=i,Le=r;break;case 0:case 11:case 14:case 15:Kt||Zi(2,n,t),Kt||Zi(4,n,t),Fn(e,t,n);break;case 1:Kt||(Nn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&_T(n,t,i)),Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:Kt=(i=Kt)||n.memoizedState!==null,Fn(e,t,n),Kt=i;break;default:Fn(e,t,n)}}function wT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Co(e)}catch(n){Vt(t,t.return,n)}}function sw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new by),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new by),t;default:throw Error(P(435,e.tag))}}function Gh(e,t){var n=sw(e);t.forEach(function(i){var r=mw.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Qe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(lr(l.type)){Pt=l.stateNode,Le=!1;break t}break;case 5:Pt=l.stateNode,Le=!1;break t;case 3:case 4:Pt=l.stateNode.containerInfo,Le=!0;break t}l=l.return}if(Pt===null)throw Error(P(160));ST(s,a,r),Pt=null,Le=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)RT(t,e),t=t.sibling}var vn=null;function RT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qe(t,e),Ye(e),i&4&&(Zi(3,e,e.return),Wo(3,e),Zi(5,e,e.return));break;case 1:Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),i&64&&Gn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=vn;if(Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Go]||s[Ne]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Ee(s,i,n),s[Ne]=e,ce(s),i=s;break t;case"link":var a=zy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}s=r.createElement(i),Ee(s,i,n),r.head.appendChild(s);break;case"meta":if(a=zy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}s=r.createElement(i),Ee(s,i,n),r.head.appendChild(s);break;default:throw Error(P(468,i))}s[Ne]=e,ce(s),i=s}e.stateNode=i}else By(r,e.type,e.stateNode);else e.stateNode=jy(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?By(r,e.type,e.stateNode):jy(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&qh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),n!==null&&i&4&&qh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Qe(t,e),Ye(e),i&512&&(Kt||n===null||Nn(n,n.return)),e.flags&32){r=e.stateNode;try{zs(r,"")}catch(_){Vt(e,e.return,_)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,qh(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Fh=!0);break;case 6:if(Qe(t,e),Ye(e),i&4){if(e.stateNode===null)throw Error(P(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Vt(e,e.return,_)}}break;case 3:if(fu=null,r=vn,vn=Ku(t.containerInfo),Qe(t,e),vn=r,Ye(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(t.containerInfo)}catch(_){Vt(e,e.return,_)}Fh&&(Fh=!1,IT(e));break;case 4:i=vn,vn=Ku(e.stateNode.containerInfo),Qe(t,e),Ye(e),vn=i;break;case 12:Qe(t,e),Ye(e);break;case 13:Qe(t,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Am=Dn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gh(e,i)));break;case 22:r=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Gn,d=Kt;if(Gn=h||r,Kt=d||u,Qe(t,e),Kt=d,Gn=h,Ye(e),i&8192)t:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||u||Gn||Kt||Ar(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Vt(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(_){Vt(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Gh(e,n))));break;case 19:Qe(t,e),Ye(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gh(e,i)));break;case 30:break;case 21:break;default:Qe(t,e),Ye(e)}}function Ye(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(TT(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var r=n.stateNode,s=Hh(e);Bu(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(zs(a,""),n.flags&=-33);var l=Hh(e);Bu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Hh(e);Gf(e,h,u);break;default:throw Error(P(161))}}catch(d){Vt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;IT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function _i(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)AT(e,t.alternate,t),t=t.sibling}function Ar(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Zi(4,t,t.return),Ar(t);break;case 1:Nn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&_T(t,t.return,n),Ar(t);break;case 27:so(t.stateNode);case 26:case 5:Nn(t,t.return),Ar(t);break;case 22:t.memoizedState===null&&Ar(t);break;case 30:Ar(t);break;default:Ar(t)}e=e.sibling}}function Ti(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ti(r,s,n),Wo(4,s);break;case 1:if(Ti(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Vt(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)A0(u[r],l)}catch(h){Vt(i,i.return,h)}}n&&a&64&&yT(s),eo(s,s.return);break;case 27:ET(s);case 26:case 5:Ti(r,s,n),n&&i===null&&a&4&&vT(s),eo(s,s.return);break;case 12:Ti(r,s,n);break;case 13:Ti(r,s,n),n&&a&4&&wT(r,s);break;case 22:s.memoizedState===null&&Ti(r,s,n),eo(s,s.return);break;case 30:break;default:Ti(r,s,n)}t=t.sibling}}function _m(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Xo(n))}function vm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xo(e))}function Rn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)CT(e,t,n,i),t=t.sibling}function CT(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Rn(e,t,n,i),r&2048&&Wo(9,t);break;case 1:Rn(e,t,n,i);break;case 3:Rn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xo(e)));break;case 12:if(r&2048){Rn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Vt(t,t.return,u)}}else Rn(e,t,n,i);break;case 13:Rn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Rn(e,t,n,i):no(e,t):s._visibility&2?Rn(e,t,n,i):(s._visibility|=2,rs(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&_m(a,t);break;case 24:Rn(e,t,n,i),r&2048&&vm(t.alternate,t);break;default:Rn(e,t,n,i)}}function rs(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:rs(s,a,l,u,r),Wo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?rs(s,a,l,u,r):no(s,a):(d._visibility|=2,rs(s,a,l,u,r)),r&&h&2048&&_m(a.alternate,a);break;case 24:rs(s,a,l,u,r),r&&h&2048&&vm(a.alternate,a);break;default:rs(s,a,l,u,r)}t=t.sibling}}function no(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:no(n,i),r&2048&&_m(i.alternate,i);break;case 24:no(n,i),r&2048&&vm(i.alternate,i);break;default:no(n,i)}t=t.sibling}}var za=8192;function ts(e){if(e.subtreeFlags&za)for(e=e.child;e!==null;)NT(e),e=e.sibling}function NT(e){switch(e.tag){case 26:ts(e),e.flags&za&&e.memoizedState!==null&&Fw(vn,e.memoizedState,e.memoizedProps);break;case 5:ts(e);break;case 3:case 4:var t=vn;vn=Ku(e.stateNode.containerInfo),ts(e),vn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=za,za=16777216,ts(e),za=t):ts(e));break;default:ts(e)}}function xT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ka(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,VT(i,e)}xT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)DT(e),e=e.sibling}function DT(e){switch(e.tag){case 0:case 11:case 15:ka(e),e.flags&2048&&Zi(9,e,e.return);break;case 3:ka(e);break;case 12:ka(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,cu(e)):ka(e);break;default:ka(e)}}function cu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,VT(i,e)}xT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Zi(8,t,t.return),cu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,cu(t));break;default:cu(t)}e=e.sibling}}function VT(e,t){for(;ue!==null;){var n=ue;switch(n.tag){case 0:case 11:case 15:Zi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Xo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ue=i;else t:for(n=e;ue!==null;){i=ue;var r=i.sibling,s=i.return;if(bT(i),i===n){ue=null;break t}if(r!==null){r.return=s,ue=r;break t}ue=s}}}var aw={getCacheForType:function(e){var t=xe(ie),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},ow=typeof WeakMap=="function"?WeakMap:Map,wt=0,Ot=null,at=null,dt=0,St=0,Ke=null,Vi=!1,aa=!1,Tm=!1,ai=0,Qt=0,Ji=0,xr=0,Em=0,dn=0,Gs=0,io=null,je=null,Qf=!1,Am=0,qu=1/0,Hu=null,ji=null,_e=0,zi=null,Qs=null,Ds=0,Yf=0,Kf=null,OT=null,ro=0,Xf=null;function tn(){if(wt&2&&dt!==0)return dt&-dt;if(J.T!==null){var e=Bs;return e!==0?e:Sm()}return Fv()}function MT(){dn===0&&(dn=!(dt&536870912)||_t?zv():536870912);var e=mn.current;return e!==null&&(e.flags|=32),dn}function en(e,t,n){(e===Ot&&(St===2||St===9)||e.cancelPendingCommit!==null)&&(Ys(e,0),Oi(e,dt,dn,!1)),Fo(e,n),(!(wt&2)||e!==Ot)&&(e===Ot&&(!(wt&2)&&(xr|=n),Qt===4&&Oi(e,dt,dn,!1)),Ln(e))}function kT(e,t,n){if(wt&6)throw Error(P(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Ho(e,t),r=i?cw(e,t):Qh(e,t,!0),s=i;do{if(r===0){aa&&!i&&Oi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!lw(n)){r=Qh(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;r=io;var u=l.current.memoizedState.isDehydrated;if(u&&(Ys(l,a).flags|=256),a=Qh(l,a,!1),a!==2){if(Tm&&!u){l.errorRecoveryDisabledLanes|=s,xr|=s,r=4;break t}s=je,je=r,s!==null&&(je===null?je=s:je.push.apply(je,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ys(e,0),Oi(e,t,0,!0);break}t:{switch(i=e,s=r,s){case 0:case 1:throw Error(P(345));case 4:if((t&4194048)!==t)break;case 6:Oi(i,t,dn,!Vi);break t;case 2:je=null;break;case 3:case 5:break;default:throw Error(P(329))}if((t&62914560)===t&&(r=Am+300-Dn(),10<r)){if(Oi(i,t,dn,!Vi),vc(i,0,!0)!==0)break t;i.timeoutHandle=tE(Sy.bind(null,i,n,je,Hu,Qf,t,dn,xr,Gs,Vi,s,2,-0,0),r);break t}Sy(i,n,je,Hu,Qf,t,dn,xr,Gs,Vi,s,0,-0,0)}}break}while(!0);Ln(e)}function Sy(e,t,n,i,r,s,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(So={stylesheets:null,count:0,unsuspend:Hw},NT(t),g=Gw(),g!==null)){e.cancelPendingCommit=g(Ry.bind(null,e,t,s,n,i,r,a,l,u,d,1,m,_)),Oi(e,s,a,!h);return}Ry(e,t,s,n,i,r,a,l,u)}function lw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!sn(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oi(e,t,n,i){t&=~Em,t&=~xr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-We(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&qv(e,n,t)}function Nc(){return wt&6?!0:(tl(0),!1)}function bm(){if(at!==null){if(St===0)var e=at.return;else e=at,$n=Gr=null,um(e),xs=null,Eo=0,e=at;for(;e!==null;)pT(e.alternate,e),e=e.return;at=null}}function Ys(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Rw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),bm(),Ot=e,at=n=Wn(e.current,null),dt=t,St=0,Ke=null,Vi=!1,aa=Ho(e,t),Tm=!1,Gs=dn=Em=xr=Ji=Qt=0,je=io=null,Qf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-We(i),s=1<<r;t|=e[r],i&=~s}return ai=t,bc(),n}function UT(e,t){it=null,J.H=Uu,t===$o||t===wc?(t=ny(),St=3):t===T0?(t=ny(),St=4):St=t===cT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ke=t,at===null&&(Qt=1,ju(e,hn(t,e.current)))}function PT(){var e=J.H;return J.H=Uu,e===null?Uu:e}function LT(){var e=J.A;return J.A=aw,e}function $f(){Qt=4,Vi||(dt&4194048)!==dt&&mn.current!==null||(aa=!0),!(Ji&134217727)&&!(xr&134217727)||Ot===null||Oi(Ot,dt,dn,!1)}function Qh(e,t,n){var i=wt;wt|=2;var r=PT(),s=LT();(Ot!==e||dt!==t)&&(Hu=null,Ys(e,t)),t=!1;var a=Qt;t:do try{if(St!==0&&at!==null){var l=at,u=Ke;switch(St){case 8:bm(),a=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(t=!0);var h=St;if(St=0,Ke=null,Es(e,l,u,h),n&&aa){a=0;break t}break;default:h=St,St=0,Ke=null,Es(e,l,u,h)}}uw(),a=Qt;break}catch(d){UT(e,d)}while(!0);return t&&e.shellSuspendCounter++,$n=Gr=null,wt=i,J.H=r,J.A=s,at===null&&(Ot=null,dt=0,bc()),a}function uw(){for(;at!==null;)jT(at)}function cw(e,t){var n=wt;wt|=2;var i=PT(),r=LT();Ot!==e||dt!==t?(Hu=null,qu=Dn()+500,Ys(e,t)):aa=Ho(e,t);t:do try{if(St!==0&&at!==null){t=at;var s=Ke;e:switch(St){case 1:St=0,Ke=null,Es(e,t,s,1);break;case 2:case 9:if(ey(s)){St=0,Ke=null,wy(t);break}t=function(){St!==2&&St!==9||Ot!==e||(St=7),Ln(e)},s.then(t,t);break t;case 3:St=7;break t;case 4:St=5;break t;case 7:ey(s)?(St=0,Ke=null,wy(t)):(St=0,Ke=null,Es(e,t,s,7));break;case 5:var a=null;switch(at.tag){case 26:a=at.memoizedState;case 5:case 27:var l=at;if(!a||rE(a)){St=0,Ke=null;var u=l.sibling;if(u!==null)at=u;else{var h=l.return;h!==null?(at=h,xc(h)):at=null}break e}}St=0,Ke=null,Es(e,t,s,5);break;case 6:St=0,Ke=null,Es(e,t,s,6);break;case 8:bm(),Qt=6;break t;default:throw Error(P(462))}}hw();break}catch(d){UT(e,d)}while(!0);return $n=Gr=null,J.H=i,J.A=r,wt=n,at!==null?0:(Ot=null,dt=0,bc(),Qt)}function hw(){for(;at!==null&&!Ob();)jT(at)}function jT(e){var t=gT(e.alternate,e,ai);e.memoizedProps=e.pendingProps,t===null?xc(e):at=t}function wy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=_y(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=_y(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:um(t);default:pT(n,t),t=at=p0(t,ai),t=gT(n,t,ai)}e.memoizedProps=e.pendingProps,t===null?xc(e):at=t}function Es(e,t,n,i){$n=Gr=null,um(t),xs=null,Eo=0;var r=t.return;try{if(tw(e,r,t,n,dt)){Qt=1,ju(e,hn(n,e.current)),at=null;return}}catch(s){if(r!==null)throw at=r,s;Qt=1,ju(e,hn(n,e.current)),at=null;return}t.flags&32768?(_t||i===1?e=!0:aa||dt&536870912?e=!1:(Vi=e=!0,(i===2||i===9||i===3||i===6)&&(i=mn.current,i!==null&&i.tag===13&&(i.flags|=16384))),zT(t,e)):xc(t)}function xc(e){var t=e;do{if(t.flags&32768){zT(t,Vi);return}e=t.return;var n=nw(t.alternate,t,ai);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Qt===0&&(Qt=5)}function zT(e,t){do{var n=iw(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);Qt=6,at=null}function Ry(e,t,n,i,r,s,a,l,u){e.cancelPendingCommit=null;do Dc();while(_e!==0);if(wt&6)throw Error(P(327));if(t!==null){if(t===e.current)throw Error(P(177));if(s=t.lanes|t.childLanes,s|=$d,Hb(e,n,s,a,l,u),e===Ot&&(at=Ot=null,dt=0),Qs=t,zi=e,Ds=n,Yf=s,Kf=r,OT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,gw(Ru,function(){return GT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=J.T,J.T=null,r=vt.p,vt.p=2,a=wt,wt|=4;try{rw(e,t,n)}finally{wt=a,vt.p=r,J.T=i}}_e=1,BT(),qT(),HT()}}function BT(){if(_e===1){_e=0;var e=zi,t=Qs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=J.T,J.T=null;var i=vt.p;vt.p=2;var r=wt;wt|=4;try{RT(t,e);var s=td,a=l0(e.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&o0(l.ownerDocument.documentElement,l)){if(u!==null&&Xd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,O=Math.min(u.start,x),V=u.end===void 0?O:Math.min(u.end,x);!_.extend&&O>V&&(a=V,V=O,O=a);var S=Yp(l,O),T=Yp(l,V);if(S&&T&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var R=g.createRange();R.setStart(S.node,S.offset),_.removeAllRanges(),O>V?(_.addRange(R),_.extend(T.node,T.offset)):(R.setEnd(T.node,T.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Zu=!!Wf,td=Wf=null}finally{wt=r,vt.p=i,J.T=n}}e.current=t,_e=2}}function qT(){if(_e===2){_e=0;var e=zi,t=Qs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=J.T,J.T=null;var i=vt.p;vt.p=2;var r=wt;wt|=4;try{AT(e,t.alternate,t)}finally{wt=r,vt.p=i,J.T=n}}_e=3}}function HT(){if(_e===4||_e===3){_e=0,Mb();var e=zi,t=Qs,n=Ds,i=OT;t.subtreeFlags&10256||t.flags&10256?_e=5:(_e=0,Qs=zi=null,FT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ji=null),qd(n),t=t.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(qo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=J.T,r=vt.p,vt.p=2,J.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{J.T=t,vt.p=r}}Ds&3&&Dc(),Ln(e),r=e.pendingLanes,n&4194090&&r&42?e===Xf?ro++:(ro=0,Xf=e):ro=0,tl(0)}}function FT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Xo(t)))}function Dc(e){return BT(),qT(),HT(),GT()}function GT(){if(_e!==5)return!1;var e=zi,t=Yf;Yf=0;var n=qd(Ds),i=J.T,r=vt.p;try{vt.p=32>n?32:n,J.T=null,n=Kf,Kf=null;var s=zi,a=Ds;if(_e=0,Qs=zi=null,Ds=0,wt&6)throw Error(P(331));var l=wt;if(wt|=4,DT(s.current),CT(s,s.current,a,n),wt=l,tl(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(qo,s)}catch{}return!0}finally{vt.p=r,J.T=i,FT(e,t)}}function Iy(e,t,n){t=hn(n,t),t=qf(e.stateNode,t,2),e=Li(e,t,2),e!==null&&(Fo(e,2),Ln(e))}function Vt(e,t,n){if(e.tag===3)Iy(e,e,n);else for(;t!==null;){if(t.tag===3){Iy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ji===null||!ji.has(i))){e=hn(n,e),n=lT(2),i=Li(t,n,2),i!==null&&(uT(n,i,t,e),Fo(i,2),Ln(i));break}}t=t.return}}function Yh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new ow;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Tm=!0,r.add(n),e=fw.bind(null,e,t,n),t.then(e,e))}function fw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ot===e&&(dt&n)===n&&(Qt===4||Qt===3&&(dt&62914560)===dt&&300>Dn()-Am?!(wt&2)&&Ys(e,0):Em|=n,Gs===dt&&(Gs=0)),Ln(e)}function QT(e,t){t===0&&(t=Bv()),e=sa(e,t),e!==null&&(Fo(e,t),Ln(e))}function dw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),QT(e,n)}function mw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(t),QT(e,n)}function gw(e,t){return zd(e,t)}var Fu=null,ss=null,Zf=!1,Gu=!1,Kh=!1,Dr=0;function Ln(e){e!==ss&&e.next===null&&(ss===null?Fu=ss=e:ss=ss.next=e),Gu=!0,Zf||(Zf=!0,yw())}function tl(e,t){if(!Kh&&Gu){Kh=!0;do for(var n=!1,i=Fu;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-We(42|e)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Cy(i,s))}else s=dt,s=vc(i,i===Ot?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Ho(i,s)||(n=!0,Cy(i,s));i=i.next}while(n);Kh=!1}}function pw(){YT()}function YT(){Gu=Zf=!1;var e=0;Dr!==0&&(ww()&&(e=Dr),Dr=0);for(var t=Dn(),n=null,i=Fu;i!==null;){var r=i.next,s=KT(i,t);s===0?(i.next=null,n===null?Fu=r:n.next=r,r===null&&(ss=n)):(n=i,(e!==0||s&3)&&(Gu=!0)),i=r}tl(e)}function KT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-We(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=qb(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}if(t=Ot,n=dt,n=vc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(St===2||St===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Th(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ho(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Th(i),qd(n)){case 2:case 8:n=Lv;break;case 32:n=Ru;break;case 268435456:n=jv;break;default:n=Ru}return i=XT.bind(null,e),n=zd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Th(i),e.callbackPriority=2,e.callbackNode=null,2}function XT(e,t){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Dc()&&e.callbackNode!==n)return null;var i=dt;return i=vc(e,e===Ot?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(kT(e,i,t),KT(e,Dn()),e.callbackNode!=null&&e.callbackNode===n?XT.bind(null,e):null)}function Cy(e,t){if(Dc())return null;kT(e,t,!0)}function yw(){Iw(function(){wt&6?zd(Pv,pw):YT()})}function Sm(){return Dr===0&&(Dr=zv()),Dr}function Ny(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:nu(""+e)}function xy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function _w(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=Ny((r[Be]||null).action),a=i.submitter;a&&(t=(t=a[Be]||null)?Ny(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var l=new Tc("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Dr!==0){var u=a?xy(r,a):new FormData(r);zf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?xy(r,a):new FormData(r),zf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Xh=0;Xh<Cf.length;Xh++){var $h=Cf[Xh],vw=$h.toLowerCase(),Tw=$h[0].toUpperCase()+$h.slice(1);bn(vw,"on"+Tw)}bn(c0,"onAnimationEnd");bn(h0,"onAnimationIteration");bn(f0,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(PS,"onTransitionRun");bn(LS,"onTransitionStart");bn(jS,"onTransitionCancel");bn(d0,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ao));function $T(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Lu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break t;s=l,r.currentTarget=h;try{s(r)}catch(d){Lu(d)}r.currentTarget=null,s=u}}}}function st(e,t){var n=t[Ef];n===void 0&&(n=t[Ef]=new Set);var i=e+"__bubble";n.has(i)||(ZT(t,e,2,!1),n.add(i))}function Zh(e,t,n){var i=0;t&&(i|=4),ZT(n,e,i,t)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function wm(e){if(!e[Fl]){e[Fl]=!0,Gv.forEach(function(n){n!=="selectionchange"&&(Ew.has(n)||Zh(n,!1,e),Zh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fl]||(t[Fl]=!0,Zh("selectionchange",!1,t))}}function ZT(e,t,n,i){switch(uE(t)){case 2:var r=Kw;break;case 8:r=Xw;break;default:r=Nm}n=r.bind(null,t,n,e),r=void 0,!wf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Jh(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=fs(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue t}l=l.parentNode}}i=i.return}Wv(function(){var h=s,d=Gd(n),g=[];t:{var m=m0.get(e);if(m!==void 0){var _=Tc,x=e;switch(e){case"keypress":if(ru(n)===0)break t;case"keydown":case"keyup":_=gS;break;case"focusin":x="focus",_=Ch;break;case"focusout":x="blur",_=Ch;break;case"beforeblur":case"afterblur":_=Ch;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=iS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=_S;break;case c0:case h0:case f0:_=aS;break;case d0:_=TS;break;case"scroll":case"scrollend":_=eS;break;case"wheel":_=AS;break;case"copy":case"cut":case"paste":_=lS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=jp;break;case"toggle":case"beforetoggle":_=SS}var O=(t&4)!==0,V=!O&&(e==="scroll"||e==="scrollend"),S=O?m!==null?m+"Capture":null:m;O=[];for(var T=h,R;T!==null;){var D=T;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||S===null||(D=po(T,S),D!=null&&O.push(bo(T,D,R))),V)break;T=T.return}0<O.length&&(m=new _(m,x,null,n,d),g.push({event:m,listeners:O}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Sf&&(x=n.relatedTarget||n.fromElement)&&(fs(x)||x[ia]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?fs(x):null,x!==null&&(V=Bo(x),O=x.tag,x!==V||O!==5&&O!==27&&O!==6)&&(x=null)):(_=null,x=h),_!==x)){if(O=Pp,D="onMouseLeave",S="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(O=jp,D="onPointerLeave",S="onPointerEnter",T="pointer"),V=_==null?m:ja(_),R=x==null?m:ja(x),m=new O(D,T+"leave",_,n,d),m.target=V,m.relatedTarget=R,D=null,fs(d)===h&&(O=new O(S,T+"enter",x,n,d),O.target=R,O.relatedTarget=V,D=O),V=D,_&&x)e:{for(O=_,S=x,T=0,R=O;R;R=es(R))T++;for(R=0,D=S;D;D=es(D))R++;for(;0<T-R;)O=es(O),T--;for(;0<R-T;)S=es(S),R--;for(;T--;){if(O===S||S!==null&&O===S.alternate)break e;O=es(O),S=es(S)}O=null}else O=null;_!==null&&Dy(g,m,_,O,!1),x!==null&&V!==null&&Dy(g,V,x,O,!0)}}t:{if(m=h?ja(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Hp;else if(qp(m))if(s0)L=MS;else{L=VS;var B=DS}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Fd(h.elementType)&&(L=Hp):L=OS;if(L&&(L=L(e,h))){r0(g,L,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&bf(m,"number",m.value)}switch(B=h?ja(h):window,e){case"focusin":(qp(B)||B.contentEditable==="true")&&(gs=B,Rf=h,Ka=null);break;case"focusout":Ka=Rf=gs=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,Kp(g,n,d);break;case"selectionchange":if(US)break;case"keydown":case"keyup":Kp(g,n,d)}var E;if(Kd)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else ms?n0(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(e0&&n.locale!=="ko"&&(ms||y!=="onCompositionStart"?y==="onCompositionEnd"&&ms&&(E=t0()):(Di=d,Qd="value"in Di?Di.value:Di.textContent,ms=!0)),B=Qu(h,y),0<B.length&&(y=new Lp(y,e,null,n,d),g.push({event:y,listeners:B}),E?y.data=E:(E=i0(n),E!==null&&(y.data=E)))),(E=RS?IS(e,n):CS(e,n))&&(y=Qu(h,"onBeforeInput"),0<y.length&&(B=new Lp("onBeforeInput","beforeinput",null,n,d),g.push({event:B,listeners:y}),B.data=E)),_w(g,e,h,n,d)}$T(g,t)})}function bo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qu(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=po(e,n),r!=null&&i.unshift(bo(e,r,s)),r=po(e,t),r!=null&&i.push(bo(e,r,s))),e.tag===3)return i;e=e.return}return[]}function es(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dy(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=po(n,s),h!=null&&a.unshift(bo(n,h,u))):r||(h=po(n,s),h!=null&&a.push(bo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Aw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function Vy(e){return(typeof e=="string"?e:""+e).replace(Aw,`
`).replace(bw,"")}function JT(e,t){return t=Vy(t),Vy(e)===t}function Vc(){}function It(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||zs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&zs(e,""+i);break;case"className":Pl(e,"class",i);break;case"tabIndex":Pl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Pl(e,n,i);break;case"style":Jv(e,i,s);break;case"data":if(t!=="object"){Pl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=nu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&It(e,t,"name",r.name,r,null),It(e,t,"formEncType",r.formEncType,r,null),It(e,t,"formMethod",r.formMethod,r,null),It(e,t,"formTarget",r.formTarget,r,null)):(It(e,t,"encType",r.encType,r,null),It(e,t,"method",r.method,r,null),It(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=nu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Vc);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=nu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":st("beforetoggle",e),st("toggle",e),eu(e,"popover",i);break;case"xlinkActuate":qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":qn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":qn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":qn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":qn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":eu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Wb.get(n)||n,eu(e,n,i))}}function Jf(e,t,n,i,r,s){switch(n){case"style":Jv(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"children":typeof i=="string"?zs(e,i):(typeof i=="number"||typeof i=="bigint")&&zs(e,""+i);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Vc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qv.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Be]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):eu(e,n,i)}}}function Ee(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:It(e,t,s,a,n,null)}}r&&It(e,t,"srcSet",n.srcSet,n,null),i&&It(e,t,"src",n.src,n,null);return;case"input":st("invalid",e);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(P(137,t));break;default:It(e,t,i,d,n,null)}}Xv(e,s,l,u,h,a,r,!1),Iu(e);return;case"select":st("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:It(e,t,r,l,n,null)}t=s,n=a,e.multiple=!!i,t!=null?ws(e,!!i,t,!1):n!=null&&ws(e,!!i,n,!0);return;case"textarea":st("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:It(e,t,a,l,n,null)}Zv(e,i,r,s),Iu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:It(e,t,u,i,n,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(i=0;i<Ao.length;i++)st(Ao[i],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:It(e,t,h,i,n,null)}return;default:if(Fd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Jf(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&It(e,t,l,i,n,null))}function Sw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||It(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,t));break;default:_!==g&&It(e,t,m,_,i,g)}}Af(e,a,l,u,h,d,s,r);return;case"select":_=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||It(e,t,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&It(e,t,r,s,i,u)}t=l,n=a,i=_,m!=null?ws(e,!!n,m,!1):!!i!=!!n&&(t!=null?ws(e,!!n,t,!0):ws(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:It(e,t,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(P(91));break;default:r!==s&&It(e,t,a,r,i,s)}$v(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:It(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:It(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&It(e,t,O,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,t));break;default:It(e,t,h,m,i,_)}return;default:if(Fd(t)){for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!==void 0&&!i.hasOwnProperty(V)&&Jf(e,t,V,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||Jf(e,t,d,m,i,_);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&It(e,t,S,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||It(e,t,g,m,i,_)}var Wf=null,td=null;function Yu(e){return e.nodeType===9?e:e.ownerDocument}function Oy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WT(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wh=null;function ww(){var e=window.event;return e&&e.type==="popstate"?e===Wh?!1:(Wh=e,!0):(Wh=null,!1)}var tE=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(e){return My.resolve(null).then(e).catch(Cw)}:tE;function Cw(e){setTimeout(function(){throw e})}function lr(e){return e==="head"}function ky(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&so(a.documentElement),n&2&&so(a.body),n&4)for(n=a.head,so(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Go]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){e.removeChild(s),Co(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Co(t)}function nd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":nd(n),Hd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Nw(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Go])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=En(e.nextSibling),e===null)break}return null}function xw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=En(e.nextSibling),e===null))return null;return e}function id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Dw(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var rd=null;function Uy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function eE(e,t,n){switch(t=Yu(n),e){case"html":if(e=t.documentElement,!e)throw Error(P(452));return e;case"head":if(e=t.head,!e)throw Error(P(453));return e;case"body":if(e=t.body,!e)throw Error(P(454));return e;default:throw Error(P(451))}}function so(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Hd(e)}var gn=new Map,Py=new Set;function Ku(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hi=vt.d;vt.d={f:Vw,r:Ow,D:Mw,C:kw,L:Uw,m:Pw,X:jw,S:Lw,M:zw};function Vw(){var e=hi.f(),t=Nc();return e||t}function Ow(e){var t=ra(e);t!==null&&t.tag===5&&t.type==="form"?K0(t):hi.r(e)}var oa=typeof document>"u"?null:document;function nE(e,t,n){var i=oa;if(i&&typeof t=="string"&&t){var r=cn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Py.has(r)||(Py.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Ee(t,"link",e),ce(t),i.head.appendChild(t)))}}function Mw(e){hi.D(e),nE("dns-prefetch",e,null)}function kw(e,t){hi.C(e,t),nE("preconnect",e,t)}function Uw(e,t,n){hi.L(e,t,n);var i=oa;if(i&&e&&t){var r='link[rel="preload"][as="'+cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+cn(n.imageSizes)+'"]')):r+='[href="'+cn(e)+'"]';var s=r;switch(t){case"style":s=Ks(e);break;case"script":s=la(e)}gn.has(s)||(e=Ut({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),gn.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(el(s))||t==="script"&&i.querySelector(nl(s))||(t=i.createElement("link"),Ee(t,"link",e),ce(t),i.head.appendChild(t)))}}function Pw(e,t){hi.m(e,t);var n=oa;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+cn(i)+'"][href="'+cn(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=la(e)}if(!gn.has(s)&&(e=Ut({rel:"modulepreload",href:e},t),gn.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(nl(s)))return}i=n.createElement("link"),Ee(i,"link",e),ce(i),n.head.appendChild(i)}}}function Lw(e,t,n){hi.S(e,t,n);var i=oa;if(i&&e){var r=Ss(i).hoistableStyles,s=Ks(e);t=t||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(el(s)))l.loading=5;else{e=Ut({rel:"stylesheet",href:e,"data-precedence":t},n),(n=gn.get(s))&&Rm(e,n);var u=a=i.createElement("link");ce(u),Ee(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,hu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function jw(e,t){hi.X(e,t);var n=oa;if(n&&e){var i=Ss(n).hoistableScripts,r=la(e),s=i.get(r);s||(s=n.querySelector(nl(r)),s||(e=Ut({src:e,async:!0},t),(t=gn.get(r))&&Im(e,t),s=n.createElement("script"),ce(s),Ee(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function zw(e,t){hi.M(e,t);var n=oa;if(n&&e){var i=Ss(n).hoistableScripts,r=la(e),s=i.get(r);s||(s=n.querySelector(nl(r)),s||(e=Ut({src:e,async:!0,type:"module"},t),(t=gn.get(r))&&Im(e,t),s=n.createElement("script"),ce(s),Ee(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Ly(e,t,n,i){var r=(r=Ui.current)?Ku(r):null;if(!r)throw Error(P(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ks(n.href),n=Ss(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ks(n.href);var s=Ss(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(el(e)))&&!s._p&&(a.instance=s,a.state.loading=5),gn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gn.set(e,n),s||Bw(r,e,n,a.state))),t&&i===null)throw Error(P(528,""));return a}if(t&&i!==null)throw Error(P(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=la(n),n=Ss(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,e))}}function Ks(e){return'href="'+cn(e)+'"'}function el(e){return'link[rel="stylesheet"]['+e+"]"}function iE(e){return Ut({},e,{"data-precedence":e.precedence,precedence:null})}function Bw(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ee(t,"link",n),ce(t),e.head.appendChild(t))}function la(e){return'[src="'+cn(e)+'"]'}function nl(e){return"script[async]"+e}function jy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+cn(n.href)+'"]');if(i)return t.instance=i,ce(i),i;var r=Ut({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ce(i),Ee(i,"style",r),hu(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ks(n.href);var s=e.querySelector(el(r));if(s)return t.state.loading|=4,t.instance=s,ce(s),s;i=iE(n),(r=gn.get(r))&&Rm(i,r),s=(e.ownerDocument||e).createElement("link"),ce(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ee(s,"link",i),t.state.loading|=4,hu(s,n.precedence,e),t.instance=s;case"script":return s=la(n.src),(r=e.querySelector(nl(s)))?(t.instance=r,ce(r),r):(i=n,(r=gn.get(s))&&(i=Ut({},n),Im(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ce(r),Ee(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(P(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,hu(i,n.precedence,e));return t.instance}function hu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Rm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Im(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fu=null;function zy(e,t,n){if(fu===null){var i=new Map,r=fu=new Map;r.set(n,i)}else r=fu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Go]||s[Ne]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function By(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function qw(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function rE(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var So=null;function Hw(){}function Fw(e,t,n){if(So===null)throw Error(P(475));var i=So;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Ks(n.href),s=e.querySelector(el(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Xu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ce(s);return}s=e.ownerDocument||e,n=iE(n),(r=gn.get(r))&&Rm(n,r),s=s.createElement("link"),ce(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ee(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Xu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Gw(){if(So===null)throw Error(P(475));var e=So;return e.stylesheets&&e.count===0&&sd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&sd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Xu(){if(this.count--,this.count===0){if(this.stylesheets)sd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $u=null;function sd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$u=new Map,t.forEach(Qw,e),$u=null,Xu.call(e))}function Qw(e,t){if(!(t.state.loading&4)){var n=$u.get(e);if(n)var i=n.get(null);else{n=new Map,$u.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Xu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var wo={$$typeof:Yn,Provider:null,Consumer:null,_currentValue:wr,_currentValue2:wr,_threadCount:0};function Yw(e,t,n,i,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.hiddenUpdates=Eh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function sE(e,t,n,i,r,s,a,l,u,h,d,g){return e=new Yw(e,t,n,a,l,u,h,g),t=1,s===!0&&(t|=24),s=Xe(3,null,null,t),e.current=s,s.stateNode=e,t=em(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},im(s),e}function aE(e){return e?(e=_s,e):_s}function oE(e,t,n,i,r,s){r=aE(r),i.context===null?i.context=r:i.pendingContext=r,i=Pi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Li(e,i,t),n!==null&&(en(n,e,t),Za(n,e,t))}function qy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cm(e,t){qy(e,t),(e=e.alternate)&&qy(e,t)}function lE(e){if(e.tag===13){var t=sa(e,67108864);t!==null&&en(t,e,67108864),Cm(e,67108864)}}var Zu=!0;function Kw(e,t,n,i){var r=J.T;J.T=null;var s=vt.p;try{vt.p=2,Nm(e,t,n,i)}finally{vt.p=s,J.T=r}}function Xw(e,t,n,i){var r=J.T;J.T=null;var s=vt.p;try{vt.p=8,Nm(e,t,n,i)}finally{vt.p=s,J.T=r}}function Nm(e,t,n,i){if(Zu){var r=ad(i);if(r===null)Jh(e,t,i,Ju,n),Hy(e,i);else if(Zw(r,e,t,n,i))i.stopPropagation();else if(Hy(e,i),t&4&&-1<$w.indexOf(e)){for(;r!==null;){var s=ra(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Tr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-We(a);l.entanglements[1]|=u,a&=~u}Ln(s),!(wt&6)&&(qu=Dn()+500,tl(0))}}break;case 13:l=sa(s,2),l!==null&&en(l,s,2),Nc(),Cm(s,2)}if(s=ad(i),s===null&&Jh(e,t,i,Ju,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Jh(e,t,i,null,n)}}function ad(e){return e=Gd(e),xm(e)}var Ju=null;function xm(e){if(Ju=null,e=fs(e),e!==null){var t=Bo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Ov(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ju=e,null}function uE(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kb()){case Pv:return 2;case Lv:return 8;case Ru:case Ub:return 32;case jv:return 268435456;default:return 32}default:return 32}}var od=!1,Bi=null,qi=null,Hi=null,Ro=new Map,Io=new Map,Ri=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(e,t){switch(e){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Ro.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(t.pointerId)}}function Ua(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=ra(t),t!==null&&lE(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Zw(e,t,n,i,r){switch(t){case"focusin":return Bi=Ua(Bi,e,t,n,i,r),!0;case"dragenter":return qi=Ua(qi,e,t,n,i,r),!0;case"mouseover":return Hi=Ua(Hi,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ro.set(s,Ua(Ro.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Io.set(s,Ua(Io.get(s)||null,e,t,n,i,r)),!0}return!1}function cE(e){var t=fs(e.target);if(t!==null){var n=Bo(t);if(n!==null){if(t=n.tag,t===13){if(t=Ov(n),t!==null){e.blockedOn=t,Fb(e.priority,function(){if(n.tag===13){var i=tn();i=Bd(i);var r=sa(n,i);r!==null&&en(r,n,i),Cm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function du(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ad(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Sf=i,n.target.dispatchEvent(i),Sf=null}else return t=ra(n),t!==null&&lE(t),e.blockedOn=n,!1;t.shift()}return!0}function Fy(e,t,n){du(e)&&n.delete(t)}function Jw(){od=!1,Bi!==null&&du(Bi)&&(Bi=null),qi!==null&&du(qi)&&(qi=null),Hi!==null&&du(Hi)&&(Hi=null),Ro.forEach(Fy),Io.forEach(Fy)}function Gl(e,t){e.blockedOn===t&&(e.blockedOn=null,od||(od=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,Jw)))}var Ql=null;function Gy(e){Ql!==e&&(Ql=e,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,function(){Ql===e&&(Ql=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(xm(i||n)===null)continue;break}var s=ra(n);s!==null&&(e.splice(t,3),t-=3,zf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Co(e){function t(u){return Gl(u,e)}Bi!==null&&Gl(Bi,e),qi!==null&&Gl(qi,e),Hi!==null&&Gl(Hi,e),Ro.forEach(t),Io.forEach(t);for(var n=0;n<Ri.length;n++){var i=Ri[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ri.length&&(n=Ri[0],n.blockedOn===null);)cE(n),n.blockedOn===null&&Ri.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Be]||null;if(typeof s=="function")a||Gy(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Be]||null)l=a.formAction;else if(xm(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Gy(n)}}}function Dm(e){this._internalRoot=e}Oc.prototype.render=Dm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));var n=t.current,i=tn();oE(n,i,e,t,null,null)};Oc.prototype.unmount=Dm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;oE(e.current,2,null,e,null,null),Nc(),t[ia]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ri.length&&t!==0&&t<Ri[n].priority;n++);Ri.splice(n,0,e),n===0&&cE(e)}};var Qy=Dv.version;if(Qy!=="19.1.1")throw Error(P(527,Qy,"19.1.1"));vt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Cb(t),e=e!==null?Mv(e):null,e=e===null?null:e.stateNode,e};var Ww={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{qo=Yl.inject(Ww),Je=Yl}catch{}}yc.createRoot=function(e,t){if(!Vv(e))throw Error(P(299));var n=!1,i="",r=sT,s=aT,a=oT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=sE(e,1,!1,null,null,n,i,r,s,a,l,null),e[ia]=t.current,wm(e),new Dm(t)};yc.hydrateRoot=function(e,t,n){if(!Vv(e))throw Error(P(299));var i=!1,r="",s=sT,a=aT,l=oT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=sE(e,1,!0,t,n??null,i,r,s,a,l,u,h),t.context=aE(null),n=t.current,i=tn(),i=Bd(i),r=Pi(i),r.callback=null,Li(n,r,i),n=i,t.current.lanes=n,Fo(t,n),Ln(t),e[ia]=t.current,wm(e),new Oc(t)};yc.version="19.1.1";function hE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hE)}catch(e){console.error(e)}}hE(),wv.exports=yc;var t2=wv.exports;const e2=()=>{};var Yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},n2=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],a=e[n++],l=e[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,l=a?e[r+1]:0,u=r+2<e.length,h=u?e[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):n2(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new i2;const m=s<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const x=h<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r2=function(e){const t=fE(e);return dE.encodeByteArray(t,!0)},Wu=function(e){return r2(e).replace(/\./g,"")},mE=function(e){try{return dE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=()=>s2().__FIREBASE_DEFAULTS__,o2=()=>{if(typeof process>"u"||typeof Yy>"u")return;const e=Yy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},l2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mE(e[1]);return t&&JSON.parse(t)},Mc=()=>{try{return e2()||a2()||o2()||l2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},u2=e=>{var t,n;return(n=(t=Mc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},c2=e=>{const t=u2(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},gE=()=>{var e;return(e=Mc())==null?void 0:e.config},h2=e=>{var t;return(t=Mc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d2(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Wu(JSON.stringify(n)),Wu(JSON.stringify(a)),""].join(".")}const ao={};function g2(){const e={prod:[],emulator:[]};for(const t of Object.keys(ao))ao[t]?e.emulator.push(t):e.prod.push(t);return e}function p2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Ky=!1;function y2(e,t){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||ao[e]===t||ao[e]||Ky)return;ao[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=g2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ky=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=p2(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(V,O);const D=h();u(T,S),R.append(T,x,V,D),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function v2(){var t;const e=(t=Mc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function A2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S2(){return!v2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w2(){try{return typeof indexedDB=="object"}catch{return!1}}function R2(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)==null?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class fi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=I2,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}}class rl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?C2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new fi(r,l,i)}}function C2(e,t){return e.replace(N2,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const N2=/\{\$([^}]+)}/g;function No(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],a=t[r];if(Xy(s)&&Xy(a)){if(!No(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Xy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function x2(e,t){const n=new D2(e,t);return n.subscribe.bind(n)}class D2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");V2(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=tf),r.error===void 0&&(r.error=tf),r.complete===void 0&&(r.complete=tf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){return e&&e._delegate?e._delegate:e}class Ur{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new f2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(k2(t))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=br){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=br){return this.instances.has(t)}getOptions(t=br){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:M2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=br){return this.component?this.component.multipleInstances?t:br:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M2(e){return e===br?void 0:e}function k2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new O2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const P2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},L2=ot.INFO,j2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},z2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=j2[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Om{constructor(t){this.name=t,this._logLevel=L2,this._logHandler=z2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?P2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const B2=(e,t)=>t.some(n=>e instanceof n);let $y,Zy;function q2(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H2(){return Zy||(Zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pE=new WeakMap,ld=new WeakMap,yE=new WeakMap,ef=new WeakMap,Mm=new WeakMap;function F2(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Fi(e.result)),r()},a=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&pE.set(n,e)}).catch(()=>{}),Mm.set(t,e),t}function G2(e){if(ld.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});ld.set(e,t)}let ud={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ld.get(e);if(t==="objectStoreNames")return e.objectStoreNames||yE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Q2(e){ud=e(ud)}function Y2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(nf(this),t,...n);return yE.set(i,t.sort?t.sort():[t]),Fi(i)}:H2().includes(e)?function(...t){return e.apply(nf(this),t),Fi(pE.get(this))}:function(...t){return Fi(e.apply(nf(this),t))}}function K2(e){return typeof e=="function"?Y2(e):(e instanceof IDBTransaction&&G2(e),B2(e,q2())?new Proxy(e,ud):e)}function Fi(e){if(e instanceof IDBRequest)return F2(e);if(ef.has(e))return ef.get(e);const t=K2(e);return t!==e&&(ef.set(e,t),Mm.set(t,e)),t}const nf=e=>Mm.get(e);function X2(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),l=Fi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Fi(a.result),u.oldVersion,u.newVersion,Fi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const $2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],rf=new Map;function Jy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(rf.get(t))return rf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Z2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||$2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return rf.set(t,s),s}Q2(e=>({...e,get:(t,n,i)=>Jy(t,n)||e.get(t,n,i),has:(t,n)=>!!Jy(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function W2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const cd="@firebase/app",Wy="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new Om("@firebase/app"),tR="@firebase/app-compat",eR="@firebase/analytics-compat",nR="@firebase/analytics",iR="@firebase/app-check-compat",rR="@firebase/app-check",sR="@firebase/auth",aR="@firebase/auth-compat",oR="@firebase/database",lR="@firebase/data-connect",uR="@firebase/database-compat",cR="@firebase/functions",hR="@firebase/functions-compat",fR="@firebase/installations",dR="@firebase/installations-compat",mR="@firebase/messaging",gR="@firebase/messaging-compat",pR="@firebase/performance",yR="@firebase/performance-compat",_R="@firebase/remote-config",vR="@firebase/remote-config-compat",TR="@firebase/storage",ER="@firebase/storage-compat",AR="@firebase/firestore",bR="@firebase/ai",SR="@firebase/firestore-compat",wR="firebase",RR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="[DEFAULT]",IR={[cd]:"fire-core",[tR]:"fire-core-compat",[nR]:"fire-analytics",[eR]:"fire-analytics-compat",[rR]:"fire-app-check",[iR]:"fire-app-check-compat",[sR]:"fire-auth",[aR]:"fire-auth-compat",[oR]:"fire-rtdb",[lR]:"fire-data-connect",[uR]:"fire-rtdb-compat",[cR]:"fire-fn",[hR]:"fire-fn-compat",[fR]:"fire-iid",[dR]:"fire-iid-compat",[mR]:"fire-fcm",[gR]:"fire-fcm-compat",[pR]:"fire-perf",[yR]:"fire-perf-compat",[_R]:"fire-rc",[vR]:"fire-rc-compat",[TR]:"fire-gcs",[ER]:"fire-gcs-compat",[AR]:"fire-fst",[SR]:"fire-fst-compat",[bR]:"fire-vertex","fire-js":"fire-js",[wR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,CR=new Map,fd=new Map;function t_(e,t){try{e.container.addComponent(t)}catch(n){oi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Xs(e){const t=e.name;if(fd.has(t))return oi.debug(`There were multiple attempts to register component ${t}.`),!1;fd.set(t,e);for(const n of tc.values())t_(n,e);for(const n of CR.values())t_(n,e);return!0}function _E(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new rl("app","Firebase",NR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=RR;function vE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:hd,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Gi.create("bad-app-name",{appName:String(r)});if(n||(n=gE()),!n)throw Gi.create("no-options");const s=tc.get(r);if(s){if(No(n,s.options)&&No(i,s.config))return s;throw Gi.create("duplicate-app",{appName:r})}const a=new U2(r);for(const u of fd.values())a.addComponent(u);const l=new xR(n,i,a);return tc.set(r,l),l}function DR(e=hd){const t=tc.get(e);if(!t&&e===hd&&gE())return vE();if(!t)throw Gi.create("no-app",{appName:e});return t}function Qi(e,t,n){let i=IR[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=t.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),oi.warn(a.join(" "));return}Xs(new Ur(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebase-heartbeat-database",OR=1,xo="firebase-heartbeat-store";let sf=null;function TE(){return sf||(sf=X2(VR,OR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Gi.create("idb-open",{originalErrorMessage:e.message})})),sf}async function MR(e){try{const n=(await TE()).transaction(xo),i=await n.objectStore(xo).get(EE(e));return await n.done,i}catch(t){if(t instanceof fi)oi.warn(t.message);else{const n=Gi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});oi.warn(n.message)}}}async function e_(e,t){try{const i=(await TE()).transaction(xo,"readwrite");await i.objectStore(xo).put(t,EE(e)),await i.done}catch(n){if(n instanceof fi)oi.warn(n.message);else{const i=Gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oi.warn(i.message)}}}function EE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=1024,UR=30;class PR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=n_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>UR){const a=zR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){oi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n_(),{heartbeatsToSend:i,unsentEntries:r}=LR(this._heartbeatsCache.heartbeats),s=Wu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return oi.warn(n),""}}}function n_(){return new Date().toISOString().substring(0,10)}function LR(e,t=kR){const n=[];let i=e.slice();for(const r of e){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),i_(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),i_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class jR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w2()?R2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return e_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return e_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function i_(e){return Wu(JSON.stringify({version:2,heartbeats:e})).length}function zR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(e){Xs(new Ur("platform-logger",t=>new J2(t),"PRIVATE")),Xs(new Ur("heartbeat",t=>new PR(t),"PRIVATE")),Qi(cd,Wy,e),Qi(cd,Wy,"esm2020"),Qi("fire-js","")}BR("");var qR="firebase",HR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(qR,HR,"app");var r_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yi,AE;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,y){function A(){}A.prototype=y.prototype,E.D=y.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(w,C,I){for(var b=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)b[yt-2]=arguments[yt];return y.prototype[C].apply(w,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,A){A||(A=0);var w=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)w[C]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(C=0;16>C;++C)w[C]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=E.g[0],A=E.g[1],C=E.g[2];var I=E.g[3],b=y+(I^A&(C^I))+w[0]+3614090360&4294967295;y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[1]+3905402710&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[2]+606105819&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[3]+3250441966&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[4]+4118548399&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[5]+1200080426&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[6]+2821735955&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[7]+4249261313&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[8]+1770035416&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[9]+2336552879&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[10]+4294925233&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[11]+2304563134&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(I^A&(C^I))+w[12]+1804603682&4294967295,y=A+(b<<7&4294967295|b>>>25),b=I+(C^y&(A^C))+w[13]+4254626195&4294967295,I=y+(b<<12&4294967295|b>>>20),b=C+(A^I&(y^A))+w[14]+2792965006&4294967295,C=I+(b<<17&4294967295|b>>>15),b=A+(y^C&(I^y))+w[15]+1236535329&4294967295,A=C+(b<<22&4294967295|b>>>10),b=y+(C^I&(A^C))+w[1]+4129170786&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[6]+3225465664&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[11]+643717713&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[0]+3921069994&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[5]+3593408605&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[10]+38016083&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[15]+3634488961&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[4]+3889429448&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[9]+568446438&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[14]+3275163606&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[3]+4107603335&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[8]+1163531501&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(C^I&(A^C))+w[13]+2850285829&4294967295,y=A+(b<<5&4294967295|b>>>27),b=I+(A^C&(y^A))+w[2]+4243563512&4294967295,I=y+(b<<9&4294967295|b>>>23),b=C+(y^A&(I^y))+w[7]+1735328473&4294967295,C=I+(b<<14&4294967295|b>>>18),b=A+(I^y&(C^I))+w[12]+2368359562&4294967295,A=C+(b<<20&4294967295|b>>>12),b=y+(A^C^I)+w[5]+4294588738&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[8]+2272392833&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[11]+1839030562&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[14]+4259657740&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[1]+2763975236&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[4]+1272893353&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[7]+4139469664&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[10]+3200236656&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[13]+681279174&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[0]+3936430074&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[3]+3572445317&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[6]+76029189&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(A^C^I)+w[9]+3654602809&4294967295,y=A+(b<<4&4294967295|b>>>28),b=I+(y^A^C)+w[12]+3873151461&4294967295,I=y+(b<<11&4294967295|b>>>21),b=C+(I^y^A)+w[15]+530742520&4294967295,C=I+(b<<16&4294967295|b>>>16),b=A+(C^I^y)+w[2]+3299628645&4294967295,A=C+(b<<23&4294967295|b>>>9),b=y+(C^(A|~I))+w[0]+4096336452&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[7]+1126891415&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[14]+2878612391&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[5]+4237533241&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[12]+1700485571&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[3]+2399980690&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[10]+4293915773&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[1]+2240044497&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[8]+1873313359&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[15]+4264355552&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[6]+2734768916&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[13]+1309151649&4294967295,A=C+(b<<21&4294967295|b>>>11),b=y+(C^(A|~I))+w[4]+4149444226&4294967295,y=A+(b<<6&4294967295|b>>>26),b=I+(A^(y|~C))+w[11]+3174756917&4294967295,I=y+(b<<10&4294967295|b>>>22),b=C+(y^(I|~A))+w[2]+718787259&4294967295,C=I+(b<<15&4294967295|b>>>17),b=A+(I^(C|~y))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+I&4294967295}i.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var A=y-this.blockSize,w=this.B,C=this.h,I=0;I<y;){if(C==0)for(;I<=A;)r(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<y;)if(w[C++]=E.charCodeAt(I++),C==this.blockSize){r(this,w),C=0;break}}else for(;I<y;)if(w[C++]=E[I++],C==this.blockSize){r(this,w),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var A=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=A&255,A/=256;for(this.u(E),E=Array(16),y=A=0;4>y;++y)for(var w=0;32>w;w+=8)E[A++]=this.g[y]>>>w&255;return E};function s(E,y){var A=l;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=y(E)}function a(E,y){this.h=y;for(var A=[],w=!0,C=E.length-1;0<=C;C--){var I=E[C]|0;w&&I==y||(A[C]=I,w=!1)}this.g=A}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return V(h(-E));for(var y=[],A=1,w=0;E>=A;w++)y[w]=E/A|0,A*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return V(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(y,8)),w=g,C=0;C<E.length;C+=8){var I=Math.min(8,E.length-C),b=parseInt(E.substring(C,C+I),y);8>I?(I=h(Math.pow(y,I)),w=w.j(I).add(h(b))):(w=w.j(A),w=w.add(h(b)))}return w}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-V(this).m();for(var E=0,y=1,A=0;A<this.g.length;A++){var w=this.i(A);E+=(0<=w?w:4294967296+w)*y,y*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x(this))return"0";if(O(this))return"-"+V(this).toString(E);for(var y=h(Math.pow(E,6)),A=this,w="";;){var C=D(A,y).g;A=S(A,C.j(y));var I=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=C,x(A))return I+w;for(;6>I.length;)I="0"+I;w=I+w}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function x(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function O(E){return E.h==-1}e.l=function(E){return E=S(this,E),O(E)?-1:x(E)?0:1};function V(E){for(var y=E.g.length,A=[],w=0;w<y;w++)A[w]=~E.g[w];return new a(A,~E.h).add(m)}e.abs=function(){return O(this)?V(this):this},e.add=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0,C=0;C<=y;C++){var I=w+(this.i(C)&65535)+(E.i(C)&65535),b=(I>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);w=b>>>16,I&=65535,b&=65535,A[C]=b<<16|I}return new a(A,A[A.length-1]&-2147483648?-1:0)};function S(E,y){return E.add(V(y))}e.j=function(E){if(x(this)||x(E))return g;if(O(this))return O(E)?V(this).j(V(E)):V(V(this).j(E));if(O(E))return V(this.j(V(E)));if(0>this.l(_)&&0>E.l(_))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,A=[],w=0;w<2*y;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<E.g.length;C++){var I=this.i(w)>>>16,b=this.i(w)&65535,yt=E.i(C)>>>16,me=E.i(C)&65535;A[2*w+2*C]+=b*me,T(A,2*w+2*C),A[2*w+2*C+1]+=I*me,T(A,2*w+2*C+1),A[2*w+2*C+1]+=b*yt,T(A,2*w+2*C+1),A[2*w+2*C+2]+=I*yt,T(A,2*w+2*C+2)}for(w=0;w<y;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=y;w<2*y;w++)A[w]=0;return new a(A,0)};function T(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function R(E,y){this.g=E,this.h=y}function D(E,y){if(x(y))throw Error("division by zero");if(x(E))return new R(g,g);if(O(E))return y=D(V(E),y),new R(V(y.g),V(y.h));if(O(y))return y=D(E,V(y)),new R(V(y.g),y.h);if(30<E.g.length){if(O(E)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,w=y;0>=w.l(E);)A=L(A),w=L(w);var C=B(A,1),I=B(w,1);for(w=B(w,2),A=B(A,2);!x(w);){var b=I.add(w);0>=b.l(E)&&(C=C.add(A),I=b),w=B(w,1),A=B(A,1)}return y=S(E,C.j(y)),new R(C,y)}for(C=g;0<=E.l(y);){for(A=Math.max(1,Math.floor(E.m()/y.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),I=h(A),b=I.j(y);O(b)||0<b.l(E);)A-=w,I=h(A),b=I.j(y);x(I)&&(I=m),C=C.add(I),E=S(E,b)}return new R(C,E)}e.A=function(E){return D(this,E).h},e.and=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)&E.i(w);return new a(A,this.h&E.h)},e.or=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)|E.i(w);return new a(A,this.h|E.h)},e.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)^E.i(w);return new a(A,this.h^E.h)};function L(E){for(var y=E.g.length+1,A=[],w=0;w<y;w++)A[w]=E.i(w)<<1|E.i(w-1)>>>31;return new a(A,E.h)}function B(E,y){var A=y>>5;y%=32;for(var w=E.g.length-A,C=[],I=0;I<w;I++)C[I]=0<y?E.i(I+A)>>>y|E.i(I+A+1)<<32-y:E.i(I+A);return new a(C,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,AE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Yi=a}).apply(typeof r_<"u"?r_:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bE,Ba,SE,mu,dd,wE,RE,IE;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,M){for(var j=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)j[Dt-2]=arguments[Dt];return c.prototype[N].apply(p,j)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function V(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,M=p.length||0;o.length=N+M;for(let j=0;j<M;j++)o[N+j]=p[j]}else o.push(p)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function T(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let M=0;M<A.length;M++)f=A[M],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function C(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function b(){var o=gt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class yt{constructor(){this.h=this.g=null}add(c,f){const p=me.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var me=new S(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,Y=!1,gt=new yt,xt=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(pn)}};var pn=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){I(f)}var c=me;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function be(o,c){if(ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:De[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&be.aa.h.call(this)}}x(be,ct);var De={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Sn="closure_listenable_"+(1e6*Math.random()|0),hr=0;function ma(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++hr,this.da=this.fa=!1}function di(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function wn(o){this.src=o,this.g={},this.h=0}wn.prototype.add=function(o,c,f,p,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var j=dr(o,c,p,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new ma(c,this.src,M,!!p,N),c.fa=f,o.push(c)),c};function fr(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(p,N,1),M&&(di(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function dr(o,c,f,p){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==p)return N}return-1}var jn="closure_lm_"+(1e6*Math.random()|0),mr={};function Xr(o,c,f,p,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)Xr(o,c[M],f,p,N);return null}return f=At(f),o&&o[Sn]?o.K(c,f,h(p)?!!p.capture:!1,N):$(o,c,f,!1,p,N)}function $(o,c,f,p,N,M){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,Dt=Et(o);if(Dt||(o[jn]=Dt=new wn(o)),f=Dt.add(c,f,p,j,M),f.proxy)return f;if(p=ht(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)$t||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ht(){function o(f){return c.call(o.src,o.listener,f)}const c=tt;return o}function Tt(o,c,f,p,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)Tt(o,c[M],f,p,N);else p=h(p)?!!p.capture:!!p,f=At(f),o&&o[Sn]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=dr(M,f,p,N),-1<f&&(di(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Et(o))&&(c=o.g[c.toString()],o=-1,c&&(o=dr(c,f,p,N)),(f=-1<o?c[o]:null)&&yn(f))}function yn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Sn])fr(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(G(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=Et(c))?(fr(f,o),f.h==0&&(f.src=null,c[jn]=null)):di(o)}}}function G(o){return o in mr?mr[o]:mr[o]="on"+o}function tt(o,c){if(o.da)o=!0;else{c=new be(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&yn(o),o=f.call(p,c)}return o}function Et(o){return o=o[jn],o instanceof wn?o:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(o){return typeof o=="function"?o:(o[Rt]||(o[Rt]=function(c){return o.handleEvent(c)}),o[Rt])}function rt(){zt.call(this),this.i=new wn(this),this.M=this,this.F=null}x(rt,zt),rt.prototype[Sn]=!0,rt.prototype.removeEventListener=function(o,c,f,p){Tt(this,o,c,f,p)};function bt(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new ct(c,o);else if(c instanceof ct)c.target=c.target||o;else{var N=c;c=new ct(p,o),w(c,N)}if(N=!0,f)for(var M=f.length-1;0<=M;M--){var j=c.g=f[M];N=Fe(j,p,!0,c)&&N}if(j=c.g=o,N=Fe(j,p,!0,c)&&N,N=Fe(j,p,!1,c)&&N,f)for(M=0;M<f.length;M++)j=c.g=f[M],N=Fe(j,p,!1,c)&&N}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)di(f[p]);delete o.g[c],o.h--}}this.F=null},rt.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},rt.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Fe(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var j=c[M];if(j&&!j.da&&j.capture==f){var Dt=j.listener,ge=j.ha||j.src;j.fa&&fr(o.i,j),N=Dt.call(ge,p)!==!1&&N}}return N&&!p.defaultPrevented}function ga(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function yl(o){o.g=ga(()=>{o.g=null,o.i&&(o.i=!1,yl(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class nh extends zt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:yl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pa(o){zt.call(this),this.h=o,this.g={}}x(pa,zt);var Ng=[];function xg(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&yn(c)},o),o.g={}}pa.prototype.N=function(){pa.aa.N.call(this),xg(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ih=l.JSON.stringify,VA=l.JSON.parse,OA=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function rh(){}rh.prototype.h=null;function Dg(o){return o.h||(o.h=o.i())}function Vg(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sh(){ct.call(this,"d")}x(sh,ct);function ah(){ct.call(this,"c")}x(ah,ct);var gr={},Og=null;function _l(){return Og=Og||new rt}gr.La="serverreachability";function Mg(o){ct.call(this,gr.La,o)}x(Mg,ct);function _a(o){const c=_l();bt(c,new Mg(c))}gr.STAT_EVENT="statevent";function kg(o,c){ct.call(this,gr.STAT_EVENT,o),this.stat=c}x(kg,ct);function Ve(o){const c=_l();bt(c,new kg(c,o))}gr.Ma="timingevent";function Ug(o,c){ct.call(this,gr.Ma,o),this.size=c}x(Ug,ct);function va(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function MA(o,c,f,p,N,M){o.info(function(){if(o.g)if(M)for(var j="",Dt=M.split("&"),ge=0;ge<Dt.length;ge++){var pt=Dt[ge].split("=");if(1<pt.length){var Se=pt[0];pt=pt[1];var we=Se.split("_");j=2<=we.length&&we[1]=="type"?j+(Se+"="+pt+"&"):j+(Se+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function kA(o,c,f,p,N,M,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+M+" "+j})}function $r(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+PA(o,f)+(p?" "+p:"")})}function UA(o,c){o.info(function(){return"TIMEOUT: "+c})}Ta.prototype.info=function(){};function PA(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return ih(f)}catch{return c}}var vl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oh;function Tl(){}x(Tl,rh),Tl.prototype.g=function(){return new XMLHttpRequest},Tl.prototype.i=function(){return{}},oh=new Tl;function mi(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lg}function Lg(){this.i=null,this.g="",this.h=!1}var jg={},lh={};function uh(o,c,f){o.L=1,o.v=Sl(zn(c)),o.m=f,o.P=!0,zg(o,null)}function zg(o,c){o.F=Date.now(),El(o),o.A=zn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),tp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Lg,o.g=_p(o.j,f?c:null,!o.m),0<o.O&&(o.M=new nh(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ng[0]=N.toString()),N=Ng);for(var M=0;M<N.length;M++){var j=Xr(f,N[M],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),_a(),MA(o.i,o.u,o.A,o.l,o.R,o.m)}mi.prototype.ca=function(o){o=o.target;const c=this.M;c&&Bn(o)==3?c.j():this.Y(o)},mi.prototype.Y=function(o){try{if(o==this.g)t:{const we=Bn(this.g);var c=this.g.Ba();const Wr=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||op(this.g)))){this.J||we!=4||c==7||(c==8||0>=Wr?_a(3):_a(2)),ch(this);var f=this.g.Z();this.X=f;e:if(Bg(this)){var p=op(this.g);o="";var N=p.length,M=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Ea(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(M&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,kA(this.i,this.u,this.A,this.l,this.R,we,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,ge=this.g;if((Dt=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Dt)){var pt=Dt;break e}}pt=null}if(f=pt)$r(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hh(this,f);else{this.o=!1,this.s=3,Ve(12),pr(this),Ea(this);break t}}if(this.P){f=!0;let _n;for(;!this.J&&this.C<j.length;)if(_n=LA(this,j),_n==lh){we==4&&(this.s=4,Ve(14),f=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==jg){this.s=4,Ve(15),$r(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else $r(this.i,this.l,_n,null),hh(this,_n);if(Bg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||j.length!=0||this.h.h||(this.s=1,Ve(16),f=!1),this.o=this.o&&f,!f)$r(this.i,this.l,j,"[Invalid Chunked Response]"),pr(this),Ea(this);else if(0<j.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),yh(Se),Se.M=!0,Ve(11))}}else $r(this.i,this.l,j,null),hh(this,j);we==4&&pr(this),this.o&&!this.J&&(we==4?mp(this.j,this):(this.o=!1,El(this)))}else eb(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),pr(this),Ea(this)}}}catch{}finally{}};function Bg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function LA(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?lh:(f=Number(c.substring(f,p)),isNaN(f)?jg:(p+=1,p+f>c.length?lh:(c=c.slice(p,p+f),o.C=p+f,c)))}mi.prototype.cancel=function(){this.J=!0,pr(this)};function El(o){o.S=Date.now()+o.I,qg(o,o.I)}function qg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=va(m(o.ba,o),c)}function ch(o){o.B&&(l.clearTimeout(o.B),o.B=null)}mi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(UA(this.i,this.A),this.L!=2&&(_a(),Ve(17)),pr(this),this.s=2,Ea(this)):qg(this,this.S-o)};function Ea(o){o.j.G==0||o.J||mp(o.j,o)}function pr(o){ch(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,xg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function hh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||fh(f.h,o))){if(!o.K&&fh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)xl(f),Cl(f);else break t;ph(f),Ve(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=va(m(f.Za,f),6e3));if(1>=Gg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _r(f,11)}else if((o.K||f.g==o)&&xl(f),!T(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let pt=N[c];if(f.T=pt[0],pt=pt[1],f.G==2)if(pt[0]=="c"){f.K=pt[1],f.ia=pt[2];const Se=pt[3];Se!=null&&(f.la=Se,f.j.info("VER="+f.la));const we=pt[4];we!=null&&(f.Aa=we,f.j.info("SVER="+f.Aa));const Wr=pt[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(p=1.5*Wr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const _n=o.g;if(_n){const Vl=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vl){var M=p.h;M.g||Vl.indexOf("spdy")==-1&&Vl.indexOf("quic")==-1&&Vl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(dh(M,M.h),M.h=null))}if(p.D){const _h=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(p.ya=_h,Mt(p.I,p.D,_h))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=yp(p,p.J?p.ia:null,p.W),j.K){Qg(p.h,j);var Dt=j,ge=p.L;ge&&(Dt.I=ge),Dt.B&&(ch(Dt),El(Dt)),p.g=j}else fp(p);0<f.i.length&&Nl(f)}else pt[0]!="stop"&&pt[0]!="close"||_r(f,7);else f.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?_r(f,7):gh(f):pt[0]!="noop"&&f.l&&f.l.ta(pt),f.v=0)}}_a(4)}catch{}}var jA=class{constructor(o,c){this.g=o,this.map=c}};function Hg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gg(o){return o.h?1:o.g?o.g.size:0}function fh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function dh(o,c){o.g?o.g.add(c):o.h=c}function Qg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Hg.prototype.cancel=function(){if(this.i=Yg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Yg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function zA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function BA(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Kg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=BA(o),p=zA(o),N=p.length,M=0;M<N;M++)c.call(void 0,p[M],f&&f[M],o)}var Xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qA(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var M=o[f].substring(0,p);N=o[f].substring(p+1)}else M=o[f];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function yr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof yr){this.h=o.h,Al(this,o.j),this.o=o.o,this.g=o.g,bl(this,o.s),this.l=o.l;var c=o.i,f=new Sa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),$g(this,f),this.m=o.m}else o&&(c=String(o).match(Xg))?(this.h=!1,Al(this,c[1]||"",!0),this.o=Aa(c[2]||""),this.g=Aa(c[3]||"",!0),bl(this,c[4]),this.l=Aa(c[5]||"",!0),$g(this,c[6]||"",!0),this.m=Aa(c[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}yr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(ba(c,Zg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ba(c,Zg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ba(f,f.charAt(0)=="/"?GA:FA,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ba(f,YA)),o.join("")};function zn(o){return new yr(o)}function Al(o,c,f){o.j=f?Aa(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function bl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function $g(o,c,f){c instanceof Sa?(o.i=c,KA(o.i,o.h)):(f||(c=ba(c,QA)),o.i=new Sa(c,o.h))}function Mt(o,c,f){o.i.set(c,f)}function Sl(o){return Mt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Aa(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ba(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,HA),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function HA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Zg=/[#\/\?@]/g,FA=/[#\?:]/g,GA=/[#\?]/g,QA=/[#\?@]/g,YA=/#/g;function Sa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function gi(o){o.g||(o.g=new Map,o.h=0,o.i&&qA(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Sa.prototype,e.add=function(o,c){gi(this),this.i=null,o=Zr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Jg(o,c){gi(o),c=Zr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Wg(o,c){return gi(o),c=Zr(o,c),o.g.has(c)}e.forEach=function(o,c){gi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){gi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let M=0;M<N.length;M++)f.push(c[p])}return f},e.V=function(o){gi(this);let c=[];if(typeof o=="string")Wg(this,o)&&(c=c.concat(this.g.get(Zr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return gi(this),this.i=null,o=Zr(this,o),Wg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function tp(o,c,f){Jg(o,c),0<f.length&&(o.i=null,o.g.set(Zr(o,c),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const M=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var N=M;j[p]!==""&&(N+="="+encodeURIComponent(String(j[p]))),o.push(N)}}return this.i=o.join("&")};function Zr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function KA(o,c){c&&!o.j&&(gi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(Jg(this,p),tp(this,N,f))},o)),o.j=c}function XA(o,c){const f=new Ta;if(l.Image){const p=new Image;p.onload=_(pi,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(pi,f,"TestLoadImage: error",!1,c,p),p.onabort=_(pi,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(pi,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function $A(o,c){const f=new Ta,p=new AbortController,N=setTimeout(()=>{p.abort(),pi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(M=>{clearTimeout(N),M.ok?pi(f,"TestPingServer: ok",!0,c):pi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),pi(f,"TestPingServer: error",!1,c)})}function pi(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function ZA(){this.g=new OA}function JA(o,c,f){const p=f||"";try{Kg(o,function(N,M){let j=N;h(N)&&(j=ih(N)),c.push(p+M+"="+encodeURIComponent(j))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function wl(o){this.l=o.Ub||null,this.j=o.eb||!1}x(wl,rh),wl.prototype.g=function(){return new Rl(this.l,this.j)},wl.prototype.i=function(o){return function(){return o}}({});function Rl(o,c){rt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Rl,rt),e=Rl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ra(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ep(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ep(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?wa(this):Ra(this),this.readyState==3&&ep(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,wa(this))},e.Qa=function(o){this.g&&(this.response=o,wa(this))},e.ga=function(){this.g&&wa(this)};function wa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ra(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ra(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function np(o){let c="";return B(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function mh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=np(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Mt(o,c,f))}function Ft(o){rt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ft,rt);var WA=/^https?$/i,tb=["POST","PUT"];e=Ft.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oh.g(),this.v=this.o?Dg(this.o):Dg(oh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){ip(this,M);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const M of p.keys())f.set(M,p.get(M));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(tb,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,j]of f)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ap(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){ip(this,M)}};function ip(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,rp(o),Il(o)}function rp(o){o.A||(o.A=!0,bt(o,"complete"),bt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,bt(this,"complete"),bt(this,"abort"),Il(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?sp(this):this.bb())},e.bb=function(){sp(this)};function sp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Bn(o)!=4||o.Z()!=2)){if(o.u&&Bn(o)==4)ga(o.Ea,0,o);else if(bt(o,"readystatechange"),Bn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var N=String(o.D).match(Xg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!WA.test(N?N.toLowerCase():"")}f=p}if(f)bt(o,"complete"),bt(o,"success");else{o.m=6;try{var M=2<Bn(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",rp(o)}}finally{Il(o)}}}}function Il(o,c){if(o.g){ap(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||bt(o,"ready");try{f.onreadystatechange=p}catch{}}}function ap(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Bn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),VA(c)}};function op(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function eb(o){const c={};o=(o.g&&2<=Bn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var f=C(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[N]||[];c[N]=M,M.push(f)}E(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function lp(o){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,o),this.cb=Ia("retryDelaySeedMs",1e4,o),this.Wa=Ia("forwardChannelMaxRetries",2,o),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Hg(o&&o.concurrentRequestLimit),this.Da=new ZA,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=lp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ve(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=yp(this,null,this.W),Nl(this)};function gh(o){if(up(o),o.G==3){var c=o.U++,f=zn(o.I);if(Mt(f,"SID",o.K),Mt(f,"RID",c),Mt(f,"TYPE","terminate"),Ca(o,f),c=new mi(o,o.j,c),c.L=2,c.v=Sl(zn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=_p(c.j,null),c.g.ea(c.v)),c.F=Date.now(),El(c)}pp(o)}function Cl(o){o.g&&(yh(o),o.g.cancel(),o.g=null)}function up(o){Cl(o),o.u&&(l.clearTimeout(o.u),o.u=null),xl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Nl(o){if(!Fg(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||xt(),Y||(X(),Y=!0),gt.add(c,o),o.B=0}}function nb(o,c){return Gg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=va(m(o.Ga,o,c),gp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new mi(this,this.j,o);let M=this.o;if(this.S&&(M?(M=y(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=hp(this,N,c),f=zn(this.I),Mt(f,"RID",o),Mt(f,"CVER",22),this.D&&Mt(f,"X-HTTP-Session-Id",this.D),Ca(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(np(M)))+"&"+c:this.m&&mh(f,this.m,M)),dh(this.h,N),this.Ua&&Mt(f,"TYPE","init"),this.P?(Mt(f,"$req",c),Mt(f,"SID","null"),N.T=!0,uh(N,f,null)):uh(N,f,c),this.G=2}}else this.G==3&&(o?cp(this,o):this.i.length==0||Fg(this.h)||cp(this))};function cp(o,c){var f;c?f=c.l:f=o.U++;const p=zn(o.I);Mt(p,"SID",o.K),Mt(p,"RID",f),Mt(p,"AID",o.T),Ca(o,p),o.m&&o.o&&mh(p,o.m,o.o),f=new mi(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=hp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),dh(o.h,f),uh(f,p,c)}function Ca(o,c){o.H&&B(o.H,function(f,p){Mt(c,p,f)}),o.l&&Kg({},function(f,p){Mt(c,p,f)})}function hp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const j=["count="+f];M==-1?0<f?(M=N[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Dt=!0;for(let ge=0;ge<f;ge++){let pt=N[ge].g;const Se=N[ge].map;if(pt-=M,0>pt)M=Math.max(0,N[ge].g-100),Dt=!1;else try{JA(Se,j,"req"+pt+"_")}catch{p&&p(Se)}}if(Dt){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function fp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||xt(),Y||(X(),Y=!0),gt.add(c,o),o.v=0}}function ph(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=va(m(o.Fa,o),gp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,dp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=va(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),Cl(this),dp(this))};function yh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function dp(o){o.g=new mi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=zn(o.qa);Mt(c,"RID","rpc"),Mt(c,"SID",o.K),Mt(c,"AID",o.T),Mt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Mt(c,"TO",o.ja),Mt(c,"TYPE","xmlhttp"),Ca(o,c),o.m&&o.o&&mh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Sl(zn(c)),f.m=null,f.P=!0,zg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Cl(this),ph(this),Ve(19))};function xl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function mp(o,c){var f=null;if(o.g==c){xl(o),yh(o),o.g=null;var p=2}else if(fh(o.h,c))f=c.D,Qg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=_l(),bt(p,new Ug(p,f)),Nl(o)}else fp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&nb(o,c)||p==2&&ph(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:_r(o,5);break;case 4:_r(o,10);break;case 3:_r(o,6);break;default:_r(o,2)}}}function gp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function _r(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new yr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Al(p,"https"),Sl(p),N?XA(p.toString(),f):$A(p.toString(),f)}else Ve(2);o.G=0,o.l&&o.l.sa(c),pp(o),up(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function pp(o){if(o.G=0,o.ka=[],o.l){const c=Yg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function yp(o,c,f){var p=f instanceof yr?zn(f):new yr(f);if(p.g!="")c&&(p.g=c+"."+p.g),bl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new yr(null);p&&Al(M,p),c&&(M.g=c),N&&bl(M,N),f&&(M.l=f),p=M}return f=o.D,c=o.ya,f&&c&&Mt(p,f,c),Mt(p,"VER",o.la),Ca(o,p),p}function _p(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ft(new wl({eb:f})):new Ft(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function vp(){}e=vp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Dl(){}Dl.prototype.g=function(o,c){return new Ge(o,c)};function Ge(o,c){rt.call(this),this.g=new lp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!T(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Jr(this)}x(Ge,rt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){gh(this.g)},Ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ih(o),o=f);c.i.push(new jA(c.Ya++,o)),c.G==3&&Nl(c)},Ge.prototype.N=function(){this.g.l=null,delete this.j,gh(this.g),delete this.g,Ge.aa.N.call(this)};function Tp(o){sh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(Tp,sh);function Ep(){ah.call(this),this.status=1}x(Ep,ah);function Jr(o){this.g=o}x(Jr,vp),Jr.prototype.ua=function(){bt(this.g,"a")},Jr.prototype.ta=function(o){bt(this.g,new Tp(o))},Jr.prototype.sa=function(o){bt(this.g,new Ep)},Jr.prototype.ra=function(){bt(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,IE=function(){return new Dl},RE=function(){return _l()},wE=gr,dd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vl.NO_ERROR=0,vl.TIMEOUT=8,vl.HTTP_ERROR=6,mu=vl,Pg.COMPLETE="complete",SE=Pg,Vg.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Ba=Vg,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,bE=Ft}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const s_="@firebase/firestore",a_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Om("@firebase/firestore");function as(){return Pr.logLevel}function F(e,...t){if(Pr.logLevel<=ot.DEBUG){const n=t.map(km);Pr.debug(`Firestore (${ua}): ${e}`,...n)}}function li(e,...t){if(Pr.logLevel<=ot.ERROR){const n=t.map(km);Pr.error(`Firestore (${ua}): ${e}`,...n)}}function $s(e,...t){if(Pr.logLevel<=ot.WARN){const n=t.map(km);Pr.warn(`Firestore (${ua}): ${e}`,...n)}}function km(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,CE(e,i,n)}function CE(e,t,n){let i=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw li(i),new Error(i)}function mt(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||CE(t,r,i)}function W(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends fi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class FR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ce.UNAUTHENTICATED))}shutdown(){}}class GR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QR{constructor(t){this.t=t,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ei,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ei)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new NE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Ce(t)}}class YR{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KR{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new YR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class o_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new o_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new o_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=$R(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function md(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),s=t.charAt(i);if(r!==s)return af(r)===af(s)?lt(r,s):af(r)?1:-1}return lt(e.length,t.length)}const ZR=55296,JR=57343;function af(e){const t=e.charCodeAt(0);return t>=ZR&&t<=JR}function Zs(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="__name__";class In{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return In.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof In?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=In.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return lt(t.length,n.length)}static compareSegments(t,n){const i=In.isNumericId(t),r=In.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?In.extractNumericId(t).compare(In.extractNumericId(n)):md(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Yi.fromString(t.substring(4,t.length-2))}}class Nt extends In{construct(t,n,i){return new Nt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const WR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends In{construct(t,n,i){return new ve(t,n,i)}static isValidIdentifier(t){return WR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l_}static keyField(){return new ve([l_])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ve(n)}static emptyPath(){return new ve([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(Nt.fromString(t))}static fromName(t){return new Q(Nt.fromString(t).popFirst(5))}static empty(){return new Q(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Nt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function tI(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function u_(e){if(!Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function c_(e){if(Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function DE(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Uc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function nn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t){const n={typeString:e};return t&&(n.value=t),n}function sl(e,t){if(!DE(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=-62135596800,f_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*f_);return new kt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<h_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(sl(t,kt._jsonSchema))return new kt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-h_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:te("string",kt._jsonSchemaVersion),seconds:te("number"),nanoseconds:te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new kt(0,0))}static max(){return new Z(new kt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=-1;function eI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new kt(n+1,0):new kt(n,i));return new Wi(r,Q.empty(),t)}function nI(e){return new Wi(e.readTime,e.key,Do)}class Wi{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Wi(Z.min(),Q.empty(),Do)}static max(){return new Wi(Z.max(),Q.empty(),Do)}}function iI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==rI)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,i)=>{n(t)})}static reject(t){return new U((n,i)=>{i(t)})}static waitFor(t){return new U((n,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(t){let n=U.resolve(!1);for(const i of t)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new U((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(t,n){return new U((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function aI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ha(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=-1;function al(e){return e==null}function ec(e){return e===0&&1/e==-1/0}function oI(e){return typeof e=="number"&&Number.isInteger(e)&&!ec(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="";function lI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=d_(t)),t=uI(e.get(n),t);return d_(t)}function uI(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case VE:n+="";break;default:n+=s}}return n}function d_(e){return e+VE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ur(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function OE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t,n){this.comparator=t,this.root=n||ye.EMPTY}insert(t,n){return new Ht(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new Ht(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xl(this.root,t,this.comparator,!0)}}class Xl{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ye.RED,this.left=r??ye.EMPTY,this.right=s??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ye(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ye.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,r,s){return this}insert(t,n,i){return new ye(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.comparator=t,this.data=new Ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new g_(this.data.getIterator())}getIteratorFrom(t){return new g_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof se)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new se(this.comparator);return n.data=t,n}}class g_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.fields=t,t.sort(ve.comparator)}static empty(){return new Ze([])}unionWith(t){let n=new se(ve.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ze(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zs(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ME("Invalid base64 string: "+s):s}}(t);return new Ae(n)}static fromUint8Array(t){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Ae(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const cI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=cI.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xt(e.seconds),nanos:Xt(e.nanos)}}function Xt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function er(e){return typeof e=="string"?Ae.fromBase64String(e):Ae.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="server_timestamp",UE="__type__",PE="__previous_value__",LE="__local_write_time__";function Lm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[UE])==null?void 0:i.stringValue)===kE}function Lc(e){const t=e.mapValue.fields[PE];return Lm(t)?Lc(t):t}function Vo(e){const t=tr(e.mapValue.fields[LE].timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n,i,r,s,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const nc="(default)";class Oo{constructor(t,n){this.projectId=t,this.database=n||nc}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database===nc}isEqual(t){return t instanceof Oo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="__type__",fI="__max__",$l={mapValue:{}},zE="__vector__",ic="value";function nr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lm(e)?4:mI(e)?9007199254740991:dI(e)?10:11:K(28295,{value:e})}function Un(e,t){if(e===t)return!0;const n=nr(e);if(n!==nr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vo(e).isEqual(Vo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=tr(r.timestampValue),l=tr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return er(r.bytesValue).isEqual(er(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Xt(r.geoPointValue.latitude)===Xt(s.geoPointValue.latitude)&&Xt(r.geoPointValue.longitude)===Xt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xt(r.integerValue)===Xt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Xt(r.doubleValue),l=Xt(s.doubleValue);return a===l?ec(a)===ec(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Zs(e.arrayValue.values||[],t.arrayValue.values||[],Un);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(m_(a)!==m_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function Mo(e,t){return(e.values||[]).find(n=>Un(n,t))!==void 0}function Js(e,t){if(e===t)return 0;const n=nr(e),i=nr(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Xt(s.integerValue||s.doubleValue),u=Xt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return p_(e.timestampValue,t.timestampValue);case 4:return p_(Vo(e),Vo(t));case 5:return md(e.stringValue,t.stringValue);case 6:return function(s,a){const l=er(s),u=er(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const l=lt(Xt(s.latitude),Xt(a.latitude));return l!==0?l:lt(Xt(s.longitude),Xt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return y_(e.arrayValue,t.arrayValue);case 10:return function(s,a){var m,_,x,O;const l=s.fields||{},u=a.fields||{},h=(m=l[ic])==null?void 0:m.arrayValue,d=(_=u[ic])==null?void 0:_.arrayValue,g=lt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return g!==0?g:y_(h,d)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===$l.mapValue&&a===$l.mapValue)return 0;if(s===$l.mapValue)return 1;if(a===$l.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=md(u[g],d[g]);if(m!==0)return m;const _=Js(l[u[g]],h[d[g]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function p_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=tr(e),i=tr(t),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function y_(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Js(n[r],i[r]);if(s)return s}return lt(n.length,i.length)}function Ws(e){return gd(e)}function gd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=tr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return er(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=gd(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${gd(n.fields[a])}`;return r+"}"}(e.mapValue):K(61005,{value:e})}function gu(e){switch(nr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lc(e);return t?16+gu(t):16;case 5:return 2*e.stringValue.length;case 6:return er(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+gu(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return ur(i.fields,(s,a)=>{r+=s.length+gu(a)}),r}(e.mapValue);default:throw K(13486,{value:e})}}function __(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function pd(e){return!!e&&"integerValue"in e}function jm(e){return!!e&&"arrayValue"in e}function v_(e){return!!e&&"nullValue"in e}function T_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pu(e){return!!e&&"mapValue"in e}function dI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[jE])==null?void 0:i.stringValue)===zE}function oo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ur(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=oo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oo(e.arrayValue.values[n]);return t}return{...e}}function mI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===fI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!pu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=oo(n)}setAll(t){let n=ve.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=oo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Un(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];pu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){ur(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Me(oo(this.value))}}function BE(e){const t=[];return ur(e.fields,(n,i)=>{const r=new ve([n]);if(pu(i)){const s=BE(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Ze(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n,i,r,s,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new he(t,0,Z.min(),Z.min(),Z.min(),Me.empty(),0)}static newFoundDocument(t,n,i,r){return new he(t,1,n,Z.min(),i,r,0)}static newNoDocument(t,n){return new he(t,2,n,Z.min(),Z.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new he(t,3,n,Z.min(),Z.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof he&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,n){this.position=t,this.inclusive=n}}function E_(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=Js(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function A_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Un(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,n="asc"){this.field=t,this.dir=n}}function gI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class Wt extends qE{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new yI(t,n,i):n==="array-contains"?new TI(t,i):n==="in"?new EI(t,i):n==="not-in"?new AI(t,i):n==="array-contains-any"?new bI(t,i):new Wt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new _I(t,i):new vI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Js(n,this.value)):n!==null&&nr(this.value)===nr(n)&&this.matchesComparison(Js(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends qE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return HE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function HE(e){return e.op==="and"}function FE(e){return pI(e)&&HE(e)}function pI(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function yd(e){if(e instanceof Wt)return e.field.canonicalString()+e.op.toString()+Ws(e.value);if(FE(e))return e.filters.map(t=>yd(t)).join(",");{const t=e.filters.map(n=>yd(n)).join(",");return`${e.op}(${t})`}}function GE(e,t){return e instanceof Wt?function(i,r){return r instanceof Wt&&i.op===r.op&&i.field.isEqual(r.field)&&Un(i.value,r.value)}(e,t):e instanceof An?function(i,r){return r instanceof An&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&GE(a,r.filters[l]),!0):!1}(e,t):void K(19439)}function QE(e){return e instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ws(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(QE).join(" ,")+"}"}(e):"Filter"}class yI extends Wt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class _I extends Wt{constructor(t,n){super(t,"in",n),this.keys=YE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class vI extends Wt{constructor(t,n){super(t,"not-in",n),this.keys=YE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function YE(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class TI extends Wt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return jm(n)&&Mo(n.arrayValue,this.value)}}class EI extends Wt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Mo(this.value.arrayValue,n)}}class AI extends Wt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mo(this.value.arrayValue,n)}}class bI extends Wt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Mo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function b_(e,t=null,n=[],i=[],r=null,s=null,a=null){return new SI(e,t,n,i,r,s,a)}function zm(e){const t=W(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>yd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),al(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Ws(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Ws(i)).join(",")),t.Te=n}return t.Te}function Bm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!GE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!A_(e.startAt,t.startAt)&&A_(e.endAt,t.endAt)}function _d(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wI(e,t,n,i,r,s,a,l){return new fa(e,t,n,i,r,s,a,l)}function jc(e){return new fa(e)}function S_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function KE(e){return e.collectionGroup!==null}function lo(e){const t=W(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new se(ve.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new ko(s,i))}),n.has(ve.keyField().canonicalString())||t.Ie.push(new ko(ve.keyField(),i))}return t.Ie}function On(e){const t=W(e);return t.Ee||(t.Ee=RI(t,lo(e))),t.Ee}function RI(e,t){if(e.limitType==="F")return b_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ko(r.field,s)});const n=e.endAt?new rc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new rc(e.startAt.position,e.startAt.inclusive):null;return b_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function vd(e,t){const n=e.filters.concat([t]);return new fa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Td(e,t,n){return new fa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zc(e,t){return Bm(On(e),On(t))&&e.limitType===t.limitType}function XE(e){return`${zm(On(e))}|lt:${e.limitType}`}function os(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>QE(r)).join(", ")}]`),al(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ws(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ws(r)).join(",")),`Target(${i})`}(On(e))}; limitType=${e.limitType})`}function Bc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of lo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=E_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,lo(i),r)||i.endAt&&!function(a,l,u){const h=E_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,lo(i),r))}(e,t)}function II(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $E(e){return(t,n)=>{let i=!1;for(const r of lo(e)){const s=CI(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function CI(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Js(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ur(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return OE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new Ht(Q.comparator);function ui(){return NI}const ZE=new Ht(Q.comparator);function qa(...e){let t=ZE;for(const n of e)t=t.insert(n.key,n);return t}function JE(e){let t=ZE;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Sr(){return uo()}function WE(){return uo()}function uo(){return new Qr(e=>e.toString(),(e,t)=>e.isEqual(t))}const xI=new Ht(Q.comparator),DI=new se(Q.comparator);function ut(...e){let t=DI;for(const n of e)t=t.add(n);return t}const VI=new se(lt);function OI(){return VI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(t)?"-0":t}}function t1(e){return{integerValue:""+e}}function MI(e,t){return oI(t)?t1(t):qm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function kI(e,t,n){return e instanceof Uo?function(r,s){const a={fields:{[UE]:{stringValue:kE},[LE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Lm(s)&&(s=Lc(s)),s&&(a.fields[PE]=s),{mapValue:a}}(n,t):e instanceof Po?n1(e,t):e instanceof Lo?i1(e,t):function(r,s){const a=e1(r,s),l=w_(a)+w_(r.Ae);return pd(a)&&pd(r.Ae)?t1(l):qm(r.serializer,l)}(e,t)}function UI(e,t,n){return e instanceof Po?n1(e,t):e instanceof Lo?i1(e,t):n}function e1(e,t){return e instanceof sc?function(i){return pd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Uo extends qc{}class Po extends qc{constructor(t){super(),this.elements=t}}function n1(e,t){const n=r1(t);for(const i of e.elements)n.some(r=>Un(r,i))||n.push(i);return{arrayValue:{values:n}}}class Lo extends qc{constructor(t){super(),this.elements=t}}function i1(e,t){let n=r1(t);for(const i of e.elements)n=n.filter(r=>!Un(r,i));return{arrayValue:{values:n}}}class sc extends qc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function w_(e){return Xt(e.integerValue||e.doubleValue)}function r1(e){return jm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t,n){this.field=t,this.transform=n}}function LI(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Po&&r instanceof Po||i instanceof Lo&&r instanceof Lo?Zs(i.elements,r.elements,Un):i instanceof sc&&r instanceof sc?Un(i.Ae,r.Ae):i instanceof Uo&&r instanceof Uo}(e.transform,t.transform)}class jI{constructor(t,n){this.version=t,this.transformResults=n}}class Te{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Te}static exists(t){return new Te(void 0,t)}static updateTime(t){return new Te(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function yu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Hc{}function s1(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Fc(e.key,Te.none()):new ol(e.key,e.data,Te.none());{const n=e.data,i=Me.empty();let r=new se(ve.comparator);for(let s of t.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new cr(e.key,i,new Ze(r.toArray()),Te.none())}}function zI(e,t,n){e instanceof ol?function(r,s,a){const l=r.value.clone(),u=I_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof cr?function(r,s,a){if(!yu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=I_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(a1(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function co(e,t,n,i){return e instanceof ol?function(s,a,l,u){if(!yu(s.precondition,a))return l;const h=s.value.clone(),d=C_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof cr?function(s,a,l,u){if(!yu(s.precondition,a))return l;const h=C_(s.fieldTransforms,u,a),d=a.data;return d.setAll(a1(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,a,l){return yu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function BI(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=e1(i.transform,r||null);s!=null&&(n===null&&(n=Me.empty()),n.set(i.field,s))}return n||null}function R_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Zs(i,r,(s,a)=>LI(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ol extends Hc{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cr extends Hc{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a1(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function I_(e,t,n){const i=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,UI(a,l,n[r]))}return i}function C_(e,t,n){const i=new Map;for(const r of e){const s=r.transform,a=n.data.field(r.field);i.set(r.field,kI(s,a,t))}return i}class Fc extends Hc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o1 extends Hc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&zI(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=co(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=co(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=WE();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=s1(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&Zs(this.mutations,t.mutations,(n,i)=>R_(n,i))&&Zs(this.baseMutations,t.baseMutations,(n,i)=>R_(n,i))}}class Hm{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){mt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return xI}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Hm(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,ft;function l1(e){switch(e){case k.OK:return K(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function u1(e){if(e===void 0)return li("GRPC error has no .code"),k.UNKNOWN;switch(e){case Zt.OK:return k.OK;case Zt.CANCELLED:return k.CANCELLED;case Zt.UNKNOWN:return k.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return k.INTERNAL;case Zt.UNAVAILABLE:return k.UNAVAILABLE;case Zt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Zt.NOT_FOUND:return k.NOT_FOUND;case Zt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Zt.ABORTED:return k.ABORTED;case Zt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Zt.DATA_LOSS:return k.DATA_LOSS;default:return K(39323,{code:e})}}(ft=Zt||(Zt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Yi([4294967295,4294967295],0);function N_(e){const t=GI().encode(e),n=new AE;return n.update(t),new Uint8Array(n.digest())}function x_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Yi([n,i],0),new Yi([r,s],0)]}class Fm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ha(`Invalid padding: ${n}`);if(i<0)throw new Ha(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Yi.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Yi.fromNumber(i)));return r.compare(QI)===1&&(r=new Yi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=N_(t),[i,r]=x_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Fm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=N_(t),[i,r]=x_(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,ll.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Gc(Z.min(),r,new Ht(lt),ui(),ut())}}class ll{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new ll(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class c1{constructor(t,n){this.targetId=t,this.Ce=n}}class h1{constructor(t,n,i=Ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class D_{constructor(){this.ve=0,this.Fe=V_(),this.Me=Ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K(38017,{changeType:s})}}),new ll(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=V_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YI{constructor(t){this.Ge=t,this.ze=new Map,this.je=ui(),this.Je=Zl(),this.He=Zl(),this.Ye=new Ht(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const s=r.target;if(_d(s))if(i===0){const a=new Q(s.path);this.et(n,a,he.newNoDocument(a,Z.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=er(i).toUint8Array()}catch(u){if(u instanceof ME)return $s("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Fm(a,r,s)}catch(u){return $s(u instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&_d(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,he.newNoDocument(u,t))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ut();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const r=new Gc(t,n,this.Ye,this.je,i);return this.je=ui(),this.Je=Zl(),this.He=Zl(),this.Ye=new Ht(lt),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new D_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new se(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new se(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new D_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Zl(){return new Ht(Q.comparator)}function V_(){return new Ht(Q.comparator)}const KI={asc:"ASCENDING",desc:"DESCENDING"},XI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$I={and:"AND",or:"OR"};class ZI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ed(e,t){return e.useProto3Json||al(t)?t:{value:t}}function ac(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function f1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function JI(e,t){return ac(e,t.toTimestamp())}function rn(e){return mt(!!e,49232),Z.fromTimestamp(function(n){const i=tr(n);return new kt(i.seconds,i.nanos)}(e))}function Gm(e,t){return Ad(e,t).canonicalString()}function Ad(e,t){const n=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function d1(e){const t=Nt.fromString(e);return mt(v1(t),10190,{key:t.toString()}),t}function oc(e,t){return Gm(e.databaseId,t.path)}function ho(e,t){const n=d1(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(g1(n))}function m1(e,t){return Gm(e.databaseId,t)}function WI(e){const t=d1(e);return t.length===4?Nt.emptyPath():g1(t)}function bd(e){return new Nt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function g1(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function O_(e,t,n){return{name:oc(e,t),fields:n.value.mapValue.fields}}function tC(e,t){return"found"in t?function(i,r){mt(!!r.found,43571),r.found.name,r.found.updateTime;const s=ho(i,r.found.name),a=rn(r.found.updateTime),l=r.found.createTime?rn(r.found.createTime):Z.min(),u=new Me({mapValue:{fields:r.found.fields}});return he.newFoundDocument(s,a,l,u)}(e,t):"missing"in t?function(i,r){mt(!!r.missing,3894),mt(!!r.readTime,22933);const s=ho(i,r.missing),a=rn(r.readTime);return he.newNoDocument(s,a)}(e,t):K(7234,{result:t})}function eC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(mt(d===void 0||typeof d=="string",58123),Ae.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ae.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:u1(h.code);return new z(d,h.message||"")}(a);n=new h1(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=ho(e,i.document.name),s=rn(i.document.updateTime),a=i.document.createTime?rn(i.document.createTime):Z.min(),l=new Me({mapValue:{fields:i.document.fields}}),u=he.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new _u(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=ho(e,i.document),s=i.readTime?rn(i.readTime):Z.min(),a=he.newNoDocument(r,s),l=i.removedTargetIds||[];n=new _u([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=ho(e,i.document),s=i.removedTargetIds||[];n=new _u([],s,r,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new FI(r,s),l=i.targetId;n=new c1(l,a)}}return n}function p1(e,t){let n;if(t instanceof ol)n={update:O_(e,t.key,t.value)};else if(t instanceof Fc)n={delete:oc(e,t.key)};else if(t instanceof cr)n={update:O_(e,t.key,t.data),updateMask:cC(t.fieldMask)};else{if(!(t instanceof o1))return K(16599,{Vt:t.type});n={verify:oc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Uo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Po)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:JI(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(e,t.precondition)),n}function nC(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map(n=>function(r,s){let a=r.updateTime?rn(r.updateTime):rn(s);return a.isEqual(Z.min())&&(a=rn(s)),new jI(a,r.transformResults||[])}(n,t))):[]}function iC(e,t){return{documents:[m1(e,t.path)]}}function rC(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=m1(e,r);const s=function(h){if(h.length!==0)return _1(An.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ls(m.field),direction:oC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ed(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:r}}function sC(e){let t=WI(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){mt(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=y1(g);return m instanceof An&&FE(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(x){return new ko(us(x.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,al(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new rc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new rc(_,m)}(n.endAt)),wI(t,r,a,s,l,"F",u,h)}function aC(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function y1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=us(n.unaryFilter.field);return Wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=us(n.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=us(n.unaryFilter.field);return Wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=us(n.unaryFilter.field);return Wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return Wt.create(us(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>y1(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function oC(e){return KI[e]}function lC(e){return XI[e]}function uC(e){return $I[e]}function ls(e){return{fieldPath:e.canonicalString()}}function us(e){return ve.fromServerFormat(e.fieldPath)}function _1(e){return e instanceof Wt?function(n){if(n.op==="=="){if(T_(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NAN"}};if(v_(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T_(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NAN"}};if(v_(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ls(n.field),op:lC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(r=>_1(r));return i.length===1?i[0]:{compositeFilter:{op:uC(n.op),filters:i}}}(e):K(54877,{filter:e})}function cC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function v1(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t,n,i,r,s=Z.min(),a=Z.min(),l=Ae.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Mi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t){this.yt=t}}function fC(e){const t=sC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Td(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.Cn=new mC}addToCollectionParentIndex(t,n){return this.Cn.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(Wi.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(Wi.min())}updateCollectionGroup(t,n,i){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class mC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new se(Nt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new se(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T1=41943040;class ze{static withCacheSize(t){return new ze(t,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ze.DEFAULT_COLLECTION_PERCENTILE=10,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ze.DEFAULT=new ze(T1,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ze.DISABLED=new ze(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ta(0)}static cr(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="LruGarbageCollector",gC=1048576;function U_([e,t],[n,i]){const r=lt(e,n);return r===0?lt(t,i):r}class pC{constructor(t){this.Ir=t,this.buffer=new se(U_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();U_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(k_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ha(n)?F(k_,"Ignoring IndexedDB error during garbage collection: ",n):await ca(n)}await this.Vr(3e5)})}}class _C{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return U.resolve(Pc.ce);const i=new pC(n);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(M_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),as()<=ot.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function vC(e,t){return new _C(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.changes=new Qr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,he.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&co(i.mutation,r,Ze.empty(),kt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const r=Sr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let a=qa();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Sr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,r){let s=ui();const a=uo(),l=function(){return uo()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof cr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),co(d.mutation,h,d.mutation.getFieldMask(),kt.now())):a.set(h.key,Ze.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new EC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=uo();let r=new Ht((a,l)=>a-l),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Ze.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ut()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=WE();d.forEach(m=>{if(!s.has(m)){const _=s1(n.get(m),i.get(m));_!==null&&g.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return U.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):KE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):U.resolve(Sr());let l=Do,u=s;return a.next(h=>U.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:JE(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let r=qa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let a=qa();return this.indexManager.getCollectionParents(t,s).next(l=>U.forEach(l,u=>{const h=function(g,m){return new fa(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,he.newInvalidDocument(d)))});let l=qa();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&co(d.mutation,h,Ze.empty(),kt.now()),Bc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rn(r.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:fC(r.bundledQuery),readTime:rn(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.overlays=new Ht(Q.comparator),this.qr=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Sr();return U.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.St(t,n,s)}),U.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),U.resolve()}getOverlaysForCollection(t,n,i){const r=Sr(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return U.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Ht((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Sr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Sr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return U.resolve(l)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new HI(n,i));let s=this.qr.get(n);s===void 0&&(s=ut(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.Qr=new se(le.$r),this.Ur=new se(le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new le(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new le(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new Nt([])),i=new le(n,t),r=new le(n,t+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new Nt([])),i=new le(n,t),r=new le(n,t+1);let s=ut();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new le(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class le{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new se(le.$r)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qI(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new le(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(t,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Pm:this.tr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new le(n,0),r=new le(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new se(lt);return n.forEach(r=>{const s=new le(r,0),a=new le(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),U.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const a=new le(new Q(s),0);let l=new se(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Yr)),!0)},a),U.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return U.forEach(n.mutations,r=>{const s=new le(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new le(n,0),r=this.Zr.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t){this.ri=t,this.docs=function(){return new Ht(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():he.newInvalidDocument(n))}getEntries(t,n){let i=ui();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():he.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=ui();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||iI(nI(d),i)<=0||(r.has(d.key)||Bc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(t,n,i,r){K(9500)}ii(t,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new CC(this)}getSize(t){return U.resolve(this.size)}}class CC extends TC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),U.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t){this.persistence=t,this.si=new Qr(n=>zm(n),Bm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Qm,this.targetCount=0,this.ai=ta.ur()}forEachTarget(t,n){return this.si.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),U.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ta(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.Pr(n),U.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return U.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),U.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return U.resolve(i)}containsKey(t,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t,n){this.ui={},this.overlays={},this.ci=new Pc(0),this.li=!1,this.li=!0,this.hi=new wC,this.referenceDelegate=t(this),this.Pi=new NC(this),this.indexManager=new dC,this.remoteDocumentCache=function(r){return new IC(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new hC(n),this.Ii=new bC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new SC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new RC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const r=new xC(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(t,n){return U.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class xC extends sI{constructor(t){super(),this.currentSequenceNumber=t}}class Ym{constructor(t){this.persistence=t,this.Ri=new Qm,this.Vi=null}static mi(t){return new Ym(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),U.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,i=>{const r=Q.fromPath(i);return this.gi(t,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class lc{constructor(t,n){this.persistence=t,this.pi=new Qr(i=>lI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=vC(this,n)}static mi(t,n){return new lc(t,n)}Ei(){}di(t){return U.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return U.forEach(this.pi,(i,r)=>this.br(t,i,r).next(s=>s?U.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),U.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),U.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),U.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=gu(t.data.value)),n}br(t,n,i){return U.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return U.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=ut(),r=ut();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Km(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return S2()?8:aI(qe())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.ys(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new DC;return this.Ss(t,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>s.result)}bs(t,n,i,r){return i.documentReadCount<this.fs?(as()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(as()<=ot.DEBUG&&F("QueryEngine","Query:",os(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(as()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,On(n))):U.resolve())}ys(t,n){if(S_(n))return U.resolve(null);let i=On(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Td(n,null,"F"),i=On(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=ut(...s);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Td(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,r){return S_(n)||r.isEqual(Z.min())?U.resolve(null):this.ps.getDocuments(t,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?U.resolve(null):(as()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),os(n)),this.vs(t,a,n,eI(r,Do)).next(l=>l))})}Ds(t,n){let i=new se($E(t));return n.forEach((r,s)=>{Bc(t,s)&&(i=i.add(s))}),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(t,n,i){return as()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",os(n)),this.ps.getDocumentsMatchingQuery(t,n,Wi.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="LocalStore",OC=3e8;class MC{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ht(lt),this.xs=new Qr(s=>zm(s),Bm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new AC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function kC(e,t,n,i){return new MC(e,t,n,i)}async function A1(e,t){const n=W(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ut();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function UC(e,t){const n=W(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=U.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(O=>{const V=h.docVersions.get(x);mt(V!==null,48541),O.version.compareTo(V)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function b1(e){const t=W(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function PC(e,t){const n=W(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,g)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Ae.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(g,_),function(O,V,S){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=OC?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(s,_))});let u=ui(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(LC(s,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return U.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=r,s))}function LC(e,t,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let a=ui();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(Xm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:r}})}function jC(e,t){const n=W(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Pm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function zC(e,t){const n=W(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,t).next(s=>s?(r=s,U.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Mi(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Sd(e,t,n){const i=W(e),r=i.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ha(a))throw a;F(Xm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function P_(e,t,n){const i=W(e);let r=Z.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=W(u),m=g.xs.get(d);return m!==void 0?U.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,On(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?r:Z.min(),n?s:ut())).next(l=>(BC(i,II(t),l),{documents:l,Qs:s})))}function BC(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Os.set(t,i)}class L_{constructor(){this.activeTargetIds=OI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qC{constructor(){this.Mo=new L_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new L_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="ConnectivityMonitor";class z_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(j_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(j_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function wd(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="RestConnection",FC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===nc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,s){const a=wd(),l=this.zo(t,n.toUriEncodedString());F(of,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:h}=new URL(l),d=il(h);return this.Jo(t,l,u,i,d).then(g=>(F(of,`Received RPC '${t}' ${a}: `,g),g),g=>{throw $s(of,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,r,s,a){return this.Go(t,n,i,r,s)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}zo(t,n){const i=FC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="WebChannelConnection";class YC extends GC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,s){const a=wd();return new Promise((l,u)=>{const h=new bE;h.setWithCredentials(!0),h.listenOnce(SE.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case mu.NO_ERROR:const g=h.getResponseJson();F(Re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case mu.TIMEOUT:F(Re,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const m=h.getStatus();if(F(Re,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const O=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(T)>=0?T:k.UNKNOWN}(x.status);u(new z(O,x.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(Re,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(r);F(Re,`RPC '${t}' ${a} sending request:`,r),h.send(n,"POST",d,i,15)})}T_(t,n,i){const r=wd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=IE(),l=RE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");F(Re,`Creating RPC '${t}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const x=new QC({Yo:V=>{_?F(Re,`Not sending because RPC '${t}' stream ${r} is closed:`,V):(m||(F(Re,`Opening RPC '${t}' stream ${r} transport.`),g.open(),m=!0),F(Re,`RPC '${t}' stream ${r} sending:`,V),g.send(V))},Zo:()=>g.close()}),O=(V,S,T)=>{V.listen(S,R=>{try{T(R)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,Ba.EventType.OPEN,()=>{_||(F(Re,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),O(g,Ba.EventType.CLOSE,()=>{_||(_=!0,F(Re,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(g))}),O(g,Ba.EventType.ERROR,V=>{_||(_=!0,$s(Re,`RPC '${t}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),x.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,Ba.EventType.MESSAGE,V=>{var S;if(!_){const T=V.data[0];mt(!!T,16349);const R=T,D=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(D){F(Re,`RPC '${t}' stream ${r} received error:`,D);const L=D.status;let B=function(A){const w=Zt[A];if(w!==void 0)return u1(w)}(L),E=D.message;B===void 0&&(B=k.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),_=!0,x.a_(new z(B,E)),g.close()}else F(Re,`RPC '${t}' stream ${r} received:`,T),x.u_(T)}}),O(l,wE.STAT_EVENT,V=>{V.stat===dd.PROXY?F(Re,`RPC '${t}' stream ${r} detected buffering proxy`):V.stat===dd.NOPROXY&&F(Re,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(e){return new ZI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="PersistentStream";class S1{constructor(t,n,i,r,s,a,l,u){this.Mi=t,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $m(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{t(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(B_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(B_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KC extends S1{constructor(t,n,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=eC(this.serializer,t),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?rn(a.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=bd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=_d(u)?{documents:iC(s,u)}:{query:rC(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=f1(s,a.resumeToken);const h=Ed(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=ac(s,a.snapshotVersion.toTimestamp());const h=Ed(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=aC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=bd(this.serializer),n.removeTarget=t,this.q_(n)}}class XC extends S1{constructor(t,n,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=nC(t.writeResults,t.commitTime),i=rn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=bd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>p1(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{}class ZC extends $C{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Ad(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(t,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Ad(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class JC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="RemoteStore";class WC{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Yr(this)&&(F(Lr,"Restarting streams for network reachability change."),await async function(u){const h=W(u);h.Ea.add(4),await ul(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Yc(h)}(this))})}),this.Ra=new JC(i,r)}}async function Yc(e){if(Yr(e))for(const t of e.da)await t(!0)}async function ul(e){for(const t of e.da)await t(!1)}function w1(e,t){const n=W(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),tg(n)?Wm(n):da(n).O_()&&Jm(n,t))}function Zm(e,t){const n=W(e),i=da(n);n.Ia.delete(t),i.O_()&&R1(n,t),n.Ia.size===0&&(i.O_()?i.L_():Yr(n)&&n.Ra.set("Unknown"))}function Jm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}da(e).Y_(t)}function R1(e,t){e.Va.Ue(t),da(e).Z_(t)}function Wm(e){e.Va=new YI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),da(e).start(),e.Ra.ua()}function tg(e){return Yr(e)&&!da(e).x_()&&e.Ia.size>0}function Yr(e){return W(e).Ea.size===0}function I1(e){e.Va=void 0}async function tN(e){e.Ra.set("Online")}async function eN(e){e.Ia.forEach((t,n)=>{Jm(e,t)})}async function nN(e,t){I1(e),tg(e)?(e.Ra.ha(t),Wm(e)):e.Ra.set("Unknown")}async function iN(e,t,n){if(e.Ra.set("Online"),t instanceof h1&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(i){F(Lr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await uc(e,i)}else if(t instanceof _u?e.Va.Ze(t):t instanceof c1?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await b1(e.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(Ae.EMPTY_BYTE_STRING,d.snapshotVersion)),R1(s,u);const g=new Mi(d.target,u,h,d.sequenceNumber);Jm(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(Lr,"Failed to raise snapshot:",i),await uc(e,i)}}async function uc(e,t,n){if(!ha(t))throw t;e.Ea.add(1),await ul(e),e.Ra.set("Offline"),n||(n=()=>b1(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(Lr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Yc(e)})}function C1(e,t){return t().catch(n=>uc(e,n,t))}async function Kc(e){const t=W(e),n=ir(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pm;for(;rN(t);)try{const r=await jC(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,sN(t,r)}catch(r){await uc(t,r)}N1(t)&&x1(t)}function rN(e){return Yr(e)&&e.Ta.length<10}function sN(e,t){e.Ta.push(t);const n=ir(e);n.O_()&&n.X_&&n.ea(t.mutations)}function N1(e){return Yr(e)&&!ir(e).x_()&&e.Ta.length>0}function x1(e){ir(e).start()}async function aN(e){ir(e).ra()}async function oN(e){const t=ir(e);for(const n of e.Ta)t.ea(n.mutations)}async function lN(e,t,n){const i=e.Ta.shift(),r=Hm.from(i,t,n);await C1(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Kc(e)}async function uN(e,t){t&&ir(e).X_&&await async function(i,r){if(function(a){return l1(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();ir(i).B_(),await C1(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Kc(i)}}(e,t),N1(e)&&x1(e)}async function q_(e,t){const n=W(e);n.asyncQueue.verifyOperationInProgress(),F(Lr,"RemoteStore received new credentials");const i=Yr(n);n.Ea.add(3),await ul(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Yc(n)}async function cN(e,t){const n=W(e);t?(n.Ea.delete(2),await Yc(n)):t||(n.Ea.add(2),await ul(n),n.Ra.set("Unknown"))}function da(e){return e.ma||(e.ma=function(n,i,r){const s=W(n);return s.sa(),new KC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:tN.bind(null,e),t_:eN.bind(null,e),r_:nN.bind(null,e),H_:iN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),tg(e)?Wm(e):e.Ra.set("Unknown")):(await e.ma.stop(),I1(e))})),e.ma}function ir(e){return e.fa||(e.fa=function(n,i,r){const s=W(n);return s.sa(),new XC(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:aN.bind(null,e),r_:uN.bind(null,e),ta:oN.bind(null,e),na:lN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Kc(e)):(await e.fa.stop(),e.Ta.length>0&&(F(Lr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const a=Date.now()+i,l=new eg(t,n,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(e,t){if(li("AsyncQueue",`${t}: ${e}`),ha(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static emptySet(t){return new Vs(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=qa(),this.sortedSet=new Ht(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Vs)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Vs;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.ga=new Ht(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ea{constructor(t,n,i,r,s,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ea(t,n,Vs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class fN{constructor(){this.queries=F_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=W(n),s=r.queries;r.queries=F_(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function F_(){return new Qr(e=>XE(e),zc)}async function D1(e,t){const n=W(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.ba()&&t.Da()&&(i=2):(s=new hN,i=t.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=ng(a,`Initialization of query '${os(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&ig(n)}async function V1(e,t){const n=W(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=t.Da()?0:1:!s.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function dN(e,t){const n=W(e);let i=!1;for(const r of t){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&ig(n)}function mN(e,t,n){const i=W(e),r=i.queries.get(t);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(t)}function ig(e){e.Ca.forEach(t=>{t.next()})}var Rd,G_;(G_=Rd||(Rd={})).Ma="default",G_.Cache="cache";class O1{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ea(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ea.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Rd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t){this.key=t}}class k1{constructor(t){this.key=t}}class gN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=$E(t),this.tu=new Vs(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new H_,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,g)=>{const m=r.get(d),_=Bc(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?x!==O&&(i.track({type:3,doc:_}),V=!0):this.su(m,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),V=!0):m&&!_&&(i.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(_?(a=a.add(_),s=O?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,x){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:V})}};return O(_)-O(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ea(this.query,t.tu,s,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new H_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new k1(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new M1(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rg="SyncEngine";class pN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class yN{constructor(t){this.key=t,this.hu=!1}}class _N{constructor(t,n,i,r,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Qr(l=>XE(l),zc),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(Q.comparator),this.Au=new Map,this.Ru=new Qm,this.Vu={},this.mu=new Map,this.fu=ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vN(e,t,n=!0){const i=B1(e);let r;const s=i.Tu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await U1(i,t,n,!0),r}async function TN(e,t){const n=B1(e);await U1(n,t,!0,!1)}async function U1(e,t,n,i){const r=await zC(e.localStore,On(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await EN(e,t,s,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&w1(e.remoteStore,r),l}async function EN(e,t,n,i,r){e.pu=(g,m,_)=>async function(O,V,S,T){let R=V.view.ru(S);R.Cs&&(R=await P_(O.localStore,V.query,!1).then(({documents:E})=>V.view.ru(E,R)));const D=T&&T.targetChanges.get(V.targetId),L=T&&T.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(R,O.isPrimaryClient,D,L);return Y_(O,V.targetId,B.au),B.snapshot}(e,g,m,_);const s=await P_(e.localStore,t,!0),a=new gN(t,s.Qs),l=a.ru(s.documents),u=ll.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,u);Y_(e,n,h.au);const d=new pN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function AN(e,t,n){const i=W(e),r=i.Tu.get(t),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!zc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Sd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Zm(i.remoteStore,r.targetId),Id(i,r.targetId)}).catch(ca)):(Id(i,r.targetId),await Sd(i.localStore,r.targetId,!0))}async function bN(e,t){const n=W(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Zm(n.remoteStore,i.targetId))}async function SN(e,t,n){const i=DN(e);try{const r=await function(a,l){const u=W(a),h=kt.now(),d=l.reduce((_,x)=>_.add(x.key),ut());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=ui(),O=ut();return u.Ns.getEntries(_,d).next(V=>{x=V,x.forEach((S,T)=>{T.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(V=>{g=V;const S=[];for(const T of l){const R=BI(T,g.get(T.key).overlayedDocument);R!=null&&S.push(new cr(T.key,R,BE(R.value.mapValue),Te.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(V=>{m=V;const S=V.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,S)})}).then(()=>({batchId:m.batchId,changes:JE(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ht(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,r.batchId,n),await cl(i,r.changes),await Kc(i.remoteStore)}catch(r){const s=ng(r,"Failed to persist write");n.reject(s)}}async function P1(e,t){const n=W(e);try{const i=await PC(n.localStore,t);t.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?mt(a.hu,14607):r.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await cl(n,i,t)}catch(i){await ca(i)}}function Q_(e,t,n){const i=W(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=W(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&ig(u)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function wN(e,t,n){const i=W(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),s=r&&r.key;if(s){let a=new Ht(Q.comparator);a=a.insert(s,he.newNoDocument(s,Z.min()));const l=ut().add(s),u=new Gc(Z.min(),new Map,new Ht(lt),a,l);await P1(i,u),i.du=i.du.remove(s),i.Au.delete(t),sg(i)}else await Sd(i.localStore,t,!1).then(()=>Id(i,t,n)).catch(ca)}async function RN(e,t){const n=W(e),i=t.batch.batchId;try{const r=await UC(n.localStore,t);j1(n,i,null),L1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cl(n,r)}catch(r){await ca(r)}}async function IN(e,t,n){const i=W(e);try{const r=await function(a,l){const u=W(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(mt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);j1(i,t,n),L1(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await cl(i,r)}catch(r){await ca(r)}}function L1(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function j1(e,t,n){const i=W(e);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Id(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||z1(e,i)})}function z1(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Zm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),sg(e))}function Y_(e,t,n){for(const i of n)i instanceof M1?(e.Ru.addReference(i.key,t),CN(e,i)):i instanceof k1?(F(rg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||z1(e,i.key)):K(19791,{wu:i})}function CN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(rg,"New document in limbo: "+n),e.Eu.add(i),sg(e))}function sg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(Nt.fromString(t)),i=e.fu.next();e.Au.set(i,new yN(n)),e.du=e.du.insert(n,i),w1(e.remoteStore,new Mi(On(jc(n.path)),i,"TargetPurposeLimboResolution",Pc.ce))}}async function cl(e,t,n){const i=W(e),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Km.As(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,h){const d=W(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(h,m=>U.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>U.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!ha(g))throw g;F(Xm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,O)}}}(i.localStore,s))}async function NN(e,t){const n=W(e);if(!n.currentUser.isEqual(t)){F(rg,"User change. New user:",t.toKey());const i=await A1(n.localStore,t);n.currentUser=t,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await cl(n,i.Ls)}}function xN(e,t){const n=W(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let r=ut();const s=n.Iu.get(t);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function B1(e){const t=W(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=P1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wN.bind(null,t),t.Pu.H_=dN.bind(null,t.eventManager),t.Pu.yu=mN.bind(null,t.eventManager),t}function DN(e){const t=W(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IN.bind(null,t),t}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Qc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return kC(this.persistence,new VC,t.initialUser,this.serializer)}Cu(t){return new E1(Ym.mi,this.serializer)}Du(t){return new qC}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class VN extends cc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof lc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ze.withCacheSize(this.cacheSizeBytes):ze.DEFAULT;return new E1(i=>lc.mi(i,n),this.serializer)}}class Cd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Q_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NN.bind(null,this.syncEngine),await cN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new fN}()}createDatastore(t){const n=Qc(t.databaseInfo.databaseId),i=function(s){return new YC(s)}(t.databaseInfo);return function(s,a,l,u){return new ZC(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,a,l){return new WC(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Q_(this.syncEngine,n,0),function(){return z_.v()?new z_:new HC}())}createSyncEngine(t,n){return function(r,s,a,l,u,h,d){const g=new _N(r,s,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=W(r);F(Lr,"RemoteStore shutting down."),s.Ea.add(5),await ul(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Cd.provider={build:()=>new Cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):li("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=W(r),l={documents:s.map(g=>oc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Nt.emptyPath(),l,s.length),h=new Map;u.forEach(g=>{const m=tC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return s.forEach(g=>{const m=h.get(g.toString());mt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Fc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Q.fromPath(i);this.mutations.push(new o1(r,this.precondition(r)))}),await async function(i,r){const s=W(i),a={writes:r.map(l=>p1(s.serializer,l))};await s.Go("Commit",s.serializer.databaseId,Nt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K(50498,{Gu:t.constructor.name});n=Z.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Z.min())?Te.exists(!1):Te.updateTime(n):Te.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Z.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Te.updateTime(n)}return Te.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new $m(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new ON(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!al(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!l1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="FirestoreClient";class kN{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ce.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{F(rr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(rr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=ng(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function uf(e,t){e.asyncQueue.verifyOperationInProgress(),F(rr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await A1(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function K_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await UN(e);F(rr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>q_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>q_(t.remoteStore,r)),e._onlineComponents=t}async function UN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(rr,"Using user provided OfflineComponentProvider");try{await uf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;$s("Error using user provided cache. Falling back to memory cache: "+n),await uf(e,new cc)}}else F(rr,"Using default OfflineComponentProvider"),await uf(e,new VN(void 0));return e._offlineComponents}async function ag(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(rr,"Using user provided OnlineComponentProvider"),await K_(e,e._uninitializedComponentsProvider._online)):(F(rr,"Using default OnlineComponentProvider"),await K_(e,new Cd))),e._onlineComponents}function PN(e){return ag(e).then(t=>t.syncEngine)}function LN(e){return ag(e).then(t=>t.datastore)}async function Nd(e){const t=await ag(e),n=t.eventManager;return n.onListen=vN.bind(null,t.syncEngine),n.onUnlisten=AN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=TN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=bN.bind(null,t.syncEngine),n}function jN(e,t,n={}){const i=new ei;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new q1({next:m=>{d.Nu(),a.enqueueAndForget(()=>V1(s,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new O1(jc(l.path),d,{includeMetadataChanges:!0,qa:!0});return D1(s,g)}(await Nd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firestore.googleapis.com",$_=!0;class Z_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F1,this.ssl=$_}else this.host=t.host,this.ssl=t.ssl??$_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=T1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H1(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Xc{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new FR;switch(i.type){case"firstParty":return new KR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=X_.get(n);i&&(F("ComponentProvider","Removing Datastore"),X_.delete(n),i.terminate())}(this),Promise.resolve()}}function zN(e,t,n,i={}){var h;e=nn(e,Xc);const r=il(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(d2(`https://${l}`),y2("Firestore",!0)),s.host!==F1&&s.host!==l&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!No(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ce.MOCK_USER;else{d=m2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ce(m)}e._authCredentials=new GR(new NE(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Kr(this.firestore,t,this._query)}}class qt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qt(this.firestore,t,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(sl(n,qt._jsonSchema))return new qt(t,i||null,new Q(Nt.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:te("string",qt._jsonSchemaVersion),referencePath:te("string")};class Ki extends Kr{constructor(t,n,i){super(t,n,jc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qt(this.firestore,null,new Q(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function J_(e,t,...n){if(e=oe(e),xE("collection","path",t),e instanceof Xc){const i=Nt.fromString(t,...n);return c_(i),new Ki(e,null,i)}{if(!(e instanceof qt||e instanceof Ki))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return c_(i),new Ki(e.firestore,null,i)}}function Ie(e,t,...n){if(e=oe(e),arguments.length===1&&(t=Um.newId()),xE("doc","path",t),e instanceof Xc){const i=Nt.fromString(t,...n);return u_(i),new qt(e,null,new Q(i))}{if(!(e instanceof qt||e instanceof Ki))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return u_(i),new qt(e.firestore,e instanceof Ki?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="AsyncQueue";class tv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $m(this,"async_queue_retry"),this._c=()=>{const i=lf();i&&F(W_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=lf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=lf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ei;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ha(t))throw t;F(W_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",ev(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=eg.createAndSchedule(this,t,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&K(47125,{Pc:ev(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function ev(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class ci extends Xc{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new tv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new tv(t),this._firestoreClient=void 0,await t}}}function BN(e,t){const n=typeof e=="object"?e:DR(),i=typeof e=="string"?e:nc,r=_E(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=c2("firestore");s&&zN(r,...s)}return r}function $c(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||qN(e),e._firestoreClient}function qN(e){var i,r,s;const t=e._freezeSettings(),n=function(l,u,h,d){return new hI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,H1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new kN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $e(Ae.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $e(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(sl(t,$e._jsonSchema))return $e.fromBase64String(t.bytes)}}$e._jsonSchemaVersion="firestore/bytes/1.0",$e._jsonSchema={type:te("string",$e._jsonSchemaVersion),bytes:te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(t){if(sl(t,Mn._jsonSchema))return new Mn(t.latitude,t.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:te("string",Mn._jsonSchemaVersion),latitude:te("number"),longitude:te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(sl(t,kn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new kn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kn._jsonSchemaVersion="firestore/vectorValue/1.0",kn._jsonSchema={type:te("string",kn._jsonSchemaVersion),vectorValues:te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/^__.*__$/;class FN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new cr(t,this.data,this.fieldMask,n,this.fieldTransforms):new ol(t,this.data,n,this.fieldTransforms)}}class G1{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new cr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Q1(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class og{constructor(t,n,i,r,s,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new og({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return hc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Q1(this.Ac)&&HN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class GN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Qc(t)}Cc(t,n,i,r=!1){return new og({Ac:t,methodName:n,Dc:i,path:ve.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(e){const t=e._freezeSettings(),n=Qc(e._databaseId);return new GN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lg(e,t,n,i,r,s={}){const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,r);cg("Data must be an object, but it was:",a,i);const l=X1(i,a);let u,h;if(s.merge)u=new Ze(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=xd(t,g,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Z1(d,m)||d.push(m)}u=new Ze(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new FN(new Me(l),u,h)}class Jc extends Zc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Jc}}class ug extends Zc{_toFieldTransform(t){return new PI(t.path,new Uo)}isEqual(t){return t instanceof ug}}function Y1(e,t,n,i){const r=e.Cc(1,t,n);cg("Data must be an object, but it was:",r,i);const s=[],a=Me.empty();ur(i,(u,h)=>{const d=hg(t,u,n);h=oe(h);const g=r.yc(d);if(h instanceof Jc)s.push(d);else{const m=dl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new Ze(s);return new G1(a,l,r.fieldTransforms)}function K1(e,t,n,i,r,s){const a=e.Cc(1,t,n),l=[xd(t,i,n)],u=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(xd(t,s[m])),u.push(s[m+1]);const h=[],d=Me.empty();for(let m=l.length-1;m>=0;--m)if(!Z1(h,l[m])){const _=l[m];let x=u[m];x=oe(x);const O=a.yc(_);if(x instanceof Jc)h.push(_);else{const V=dl(x,O);V!=null&&(h.push(_),d.set(_,V))}}const g=new Ze(h);return new G1(d,g,a.fieldTransforms)}function QN(e,t,n,i=!1){return dl(n,e.Cc(i?4:3,t))}function dl(e,t){if($1(e=oe(e)))return cg("Unsupported field value:",t,e),X1(e,t);if(e instanceof Zc)return function(i,r){if(!Q1(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=dl(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=oe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return MI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=kt.fromDate(i);return{timestampValue:ac(r.serializer,s)}}if(i instanceof kt){const s=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ac(r.serializer,s)}}if(i instanceof Mn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $e)return{bytesValue:f1(r.serializer,i._byteString)};if(i instanceof qt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof kn)return function(a,l){return{mapValue:{fields:{[jE]:{stringValue:zE},[ic]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return qm(l.serializer,h)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Uc(i)}`)}(e,t)}function X1(e,t){const n={};return OE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ur(e,(i,r)=>{const s=dl(r,t.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function $1(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof Mn||e instanceof $e||e instanceof qt||e instanceof Zc||e instanceof kn)}function cg(e,t,n){if(!$1(n)||!DE(n)){const i=Uc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function xd(e,t,n){if((t=oe(t))instanceof hl)return t._internalPath;if(typeof t=="string")return hg(e,t);throw hc("Field path arguments must be of type string or ",e,!1,void 0,n)}const YN=new RegExp("[~\\*/\\[\\]]");function hg(e,t,n){if(t.search(YN)>=0)throw hc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hl(...t.split("."))._internalPath}catch{throw hc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function hc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function Z1(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new KN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(fg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KN extends fc{data(){return super.data()}}function fg(e,t){return typeof t=="string"?hg(e,t):t instanceof hl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dg{}class J1 extends dg{}function $N(e,t,...n){let i=[];t instanceof dg&&i.push(t),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof gg).length,l=s.filter(u=>u instanceof mg).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class mg extends J1{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new mg(t,n,i)}_apply(t){const n=this._parse(t);return W1(t._query,n),new Kr(t.firestore,t.converter,vd(t._query,n))}_parse(t){const n=fl(t.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){rv(g,d);const x=[];for(const O of g)x.push(iv(u,s,O));m={arrayValue:{values:x}}}else m=iv(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||rv(g,d),m=QN(l,a,g,d==="in"||d==="not-in");return Wt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class gg extends dg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new gg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)W1(a,u),a=vd(a,u)}(t._query,n),new Kr(t.firestore,t.converter,vd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pg extends J1{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new pg(t,n)}_apply(t){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ko(s,a)}(t._query,this._field,this._direction);return new Kr(t.firestore,t.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new fa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function ZN(e,t="asc"){const n=t,i=fg("orderBy",e);return pg._create(i,n)}function iv(e,t,n){if(typeof(n=oe(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Nt.fromString(n));if(!Q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return __(e,new Q(i))}if(n instanceof qt)return __(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(n)}.`)}function rv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function W1(e,t){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class tA{convertValue(t,n="none"){switch(nr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(er(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ur(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var i,r,s;const n=(s=(r=(i=t.fields)==null?void 0:i[ic].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Xt(a.doubleValue));return new kn(n)}convertGeoPoint(t){return new Mn(Xt(t.latitude),Xt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Lc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vo(t));default:return null}}convertTimestamp(t){const n=tr(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Nt.fromString(t);mt(v1(i),9688,{name:t});const r=new Oo(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||li(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class JN extends tA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}class As{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Xi extends fc{constructor(t,n,i,r,s,a){super(t,n,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(fg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Xi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:te("string",Xi._jsonSchemaVersion),bundleSource:te("string","DocumentSnapshot"),bundleName:te("string"),bundle:te("string")};class vu extends Xi{data(t={}){return super.data(t)}}class Os{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new As(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new vu(this._firestore,this._userDataWriter,i.key,i,new As(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new vu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new As(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new vu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new As(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:WN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Os._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(e){e=nn(e,qt);const t=nn(e.firestore,ci);return jN($c(t),e._key).then(n=>eA(t,e,n))}Os._jsonSchemaVersion="firestore/querySnapshot/1.0",Os._jsonSchema={type:te("string",Os._jsonSchemaVersion),bundleSource:te("string","QuerySnapshot"),bundleName:te("string"),bundle:te("string")};class _g extends tA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Ms(e,t,n){e=nn(e,qt);const i=nn(e.firestore,ci),r=yg(e.converter,t,n);return Wc(i,[lg(fl(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Te.none())])}function tx(e,t,n,...i){e=nn(e,qt);const r=nn(e.firestore,ci),s=fl(r);let a;return a=typeof(t=oe(t))=="string"||t instanceof hl?K1(s,"updateDoc",e._key,t,n,i):Y1(s,"updateDoc",e._key,t),Wc(r,[a.toMutation(e._key,Te.exists(!0))])}function ex(e){return Wc(nn(e.firestore,ci),[new Fc(e._key,Te.none())])}function nx(e,t){const n=nn(e.firestore,ci),i=Ie(e),r=yg(e.converter,t);return Wc(n,[lg(fl(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Te.exists(!1))]).then(()=>i)}function Tu(e,...t){var u,h,d;e=oe(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||nv(t[i])||(n=t[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(nv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let s,a,l;if(e instanceof qt)a=nn(e.firestore,ci),l=jc(e._key.path),s={next:g=>{t[i]&&t[i](eA(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=nn(e,Kr);a=nn(g.firestore,ci),l=g._query;const m=new _g(a);s={next:_=>{t[i]&&t[i](new Os(a,m,g,_))},error:t[i+1],complete:t[i+2]},XN(e._query)}return function(m,_,x,O){const V=new q1(O),S=new O1(_,V,x);return m.asyncQueue.enqueueAndForget(async()=>D1(await Nd(m),S)),()=>{V.Nu(),m.asyncQueue.enqueueAndForget(async()=>V1(await Nd(m),S))}}($c(a),l,r,s)}function Wc(e,t){return function(i,r){const s=new ei;return i.asyncQueue.enqueueAndForget(async()=>SN(await PN(i),r,s)),s.promise}($c(e),t)}function eA(e,t,n){const i=n.docs.get(t._key),r=new _g(e);return new Xi(e,r,t._key,i,new As(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix={maxAttempts:5};function Fa(e,t){if((e=oe(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=fl(t)}get(t){const n=Fa(t,this._firestore),i=new JN(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return K(24041);const s=r[0];if(s.isFoundDocument())return new fc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new fc(this._firestore,i,n._key,null,n.converter);throw K(18433,{doc:s})})}set(t,n,i){const r=Fa(t,this._firestore),s=yg(r.converter,n,i),a=lg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(t,n,i,...r){const s=Fa(t,this._firestore);let a;return a=typeof(n=oe(n))=="string"||n instanceof hl?K1(this._dataReader,"Transaction.update",s._key,n,i,r):Y1(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(t){const n=Fa(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends rx{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Fa(t,this._firestore),i=new _g(this._firestore);return super.get(t).then(r=>new Xi(this._firestore,i,n._key,r._document,new As(!1,!1),n.converter))}}function sv(e,t,n){e=nn(e,ci);const i={...ix,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,l){const u=new ei;return s.asyncQueue.enqueueAndForget(async()=>{const h=await LN(s);new MN(s.asyncQueue,h,l,a,u).ju()}),u.promise}($c(e),r=>t(new sx(e,r)),i)}function cf(){return new ug("serverTimestamp")}(function(t,n=!0){(function(r){ua=r})(kc),Xs(new Ur("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new ci(new QR(i.getProvider("auth-internal")),new XR(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(h.options.projectId,d)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Qi(s_,a_,t),Qi(s_,a_,"esm2020")})();function nA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ax=nA,iA=new rl("auth","Firebase",nA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Om("@firebase/auth");function ox(e,...t){dc.logLevel<=ot.WARN&&dc.warn(`Auth (${kc}): ${e}`,...t)}function Eu(e,...t){dc.logLevel<=ot.ERROR&&dc.error(`Auth (${kc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(e,...t){throw Tg(e,...t)}function fo(e,...t){return Tg(e,...t)}function vg(e,t,n){const i={...ax(),[t]:n};return new rl("auth","Firebase",i).create(t,{appName:e.name})}function ni(e){return vg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rA(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&sr(e,"argument-error"),vg(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return iA.create(e,...t)}function nt(e,t,...n){if(!e)throw Tg(t,...n)}function Jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Eu(t),new Error(t)}function jr(e,t){e||Jn(t)}function lx(){return av()==="http:"||av()==="https:"}function av(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lx()||E2()||"connection"in navigator)?navigator.onLine:!0}function cx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t,n){this.shortDelay=t,this.longDelay=n,jr(n>t,"Short delay should be less than long delay!"),this.isMobile=_2()||A2()}get(){return ux()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(e,t){jr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mx=new ml(3e4,6e4);function th(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function gl(e,t,n,i,r={}){return aA(e,r,async()=>{let s={},a={};i&&(t==="GET"?a=i:s={body:JSON.stringify(i)});const l=Vm({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...s};return T2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&il(e.emulatorConfig.host)&&(h.credentials="include"),sA.fetch()(await lA(e,e.config.apiHost,n,l),h)})}async function aA(e,t,n){e._canInitEmulator=!1;const i={...fx,...t};try{const r=new gx(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Wl(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Wl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Wl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vg(e,d,h);sr(e,d)}}catch(r){if(r instanceof fi)throw r;sr(e,"network-request-failed",{message:String(r)})}}async function oA(e,t,n,i,r={}){const s=await gl(e,t,n,i,r);return"mfaPendingCredential"in s&&sr(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function lA(e,t,n,i){const r=`${t}${n}?${i}`,s=e,a=s.config.emulator?hx(e.config,r):`${e.config.apiScheme}://${r}`;return dx.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class gx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fo(this.auth,"network-request-failed")),mx.get())})}}function Wl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=fo(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(e,t){return gl(e,"POST","/v1/accounts:delete",t)}async function mc(e,t){return gl(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function yx(e,t=!1){const n=oe(e),i=await n.getIdToken(t),r=Eg(i);nt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:mo(hf(r.auth_time)),issuedAtTime:mo(hf(r.iat)),expirationTime:mo(hf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hf(e){return Number(e)*1e3}function Eg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Eu("JWT malformed, contained fewer than 3 sections"),null;try{const r=mE(n);return r?JSON.parse(r):(Eu("Failed to decode base64 JWT payload"),null)}catch(r){return Eu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ov(e){const t=Eg(e);return nt(t,"internal-error"),nt(typeof t.exp<"u","internal-error"),nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof fi&&_x(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function _x({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(e){var g;const t=e.auth,n=await e.getIdToken(),i=await jo(e,mc(t,{idToken:n}));nt(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const s=(g=r.providerUserInfo)!=null&&g.length?uA(r.providerUserInfo):[],a=Ex(e.providerData,s),l=e.isAnonymous,u=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Vd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function Tx(e){const t=oe(e);await zo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ex(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function uA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(e,t){const n=await aA(e,{},async()=>{const i=Vm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await lA(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&il(e.emulatorConfig.host)&&(u.credentials="include"),sA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bx(e,t){return gl(e,"POST","/v2/accounts:revokeToken",th(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){nt(t.idToken,"internal-error"),nt(typeof t.idToken<"u","internal-error"),nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ov(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){nt(t.length!==0,"internal-error");const n=ov(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Ax(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ks;return i&&(nt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(nt(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(nt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(e,t){nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Tn{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new vx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await jo(this,this.stsTokenManager.getToken(this.auth,t));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return yx(this,t)}reload(){return Tx(this)}_assign(t){this!==t&&(nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Tn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await zo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(ni(this.auth));const t=await this.getIdToken();return await jo(this,px(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:O}=n;nt(g&&O,t,"internal-error");const V=ks.fromJSON(this.name,O);nt(typeof g=="string",t,"internal-error"),vi(i,t.name),vi(r,t.name),nt(typeof m=="boolean",t,"internal-error"),nt(typeof _=="boolean",t,"internal-error"),vi(s,t.name),vi(a,t.name),vi(l,t.name),vi(u,t.name),vi(h,t.name),vi(d,t.name);const S=new Tn({uid:g,auth:t,email:r,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(S.providerData=x.map(T=>({...T}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const r=new ks;r.updateFromServerResponse(n);const s=new Tn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await zo(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];nt(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?uA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new ks;l.updateFromIdToken(i);const u=new Tn({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Vd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;function ki(e){jr(e instanceof Function,"Expected a class definition");let t=lv.get(e);return t?(jr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}cA.type="NONE";const uv=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(e,t,n){return`firebase:${e}:${t}:${n}`}class Us{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Au(this.userKey,r.apiKey,s),this.fullPersistenceKey=Au("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await mc(this.auth,{idToken:t}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,t):null}return Tn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Us(ki(uv),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ki(uv);const a=Au(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await mc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await Tn._fromGetAccountInfoResponse(t,m,d)}else g=Tn._fromJSON(t,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Us(s,t,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Us(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sx(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dA(t))return"Blackberry";if(mA(t))return"Webos";if(wx(t))return"Safari";if((t.includes("chrome/")||Rx(t))&&!t.includes("edge/"))return"Chrome";if(fA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Sx(e=qe()){return/firefox\//i.test(e)}function wx(e=qe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rx(e=qe()){return/crios\//i.test(e)}function hA(e=qe()){return/iemobile/i.test(e)}function fA(e=qe()){return/android/i.test(e)}function dA(e=qe()){return/blackberry/i.test(e)}function mA(e=qe()){return/webos/i.test(e)}function Ix(e=qe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Cx(){return b2()&&document.documentMode===10}function Nx(e=qe()){return Ix(e)||fA(e)||mA(e)||dA(e)||/windows phone/i.test(e)||hA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(e,t=[]){let n;switch(e){case"Browser":n=cv(qe());break;case"Worker":n=`${cv(qe())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((a,l)=>{try{const u=t(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(e,t={}){return gl(e,"GET","/v2/passwordPolicy",th(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=6;class Ox{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Vx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new xx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ki(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Us.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await mc(this,{idToken:t}),i=await Tn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(fn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await zo(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=cx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(fn(this.app))return Promise.reject(ni(this));const n=t?oe(t):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return fn(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Dx(this),n=new Ox(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new rl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await bx(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ki(t)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=gA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&ox(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function pl(e){return oe(e)}class hv{constructor(t){this.auth=t,this.observer=null,this.addObserver=x2(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(e,t){const n=_E(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(No(s,t??{}))return r;sr(r,"already-initialized")}return n.initialize({options:t})}function Ux(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ki);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(t){return Jn("not implemented")}_linkToIdToken(t,n){return Jn("not implemented")}_getReauthenticationResolver(t){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(e,t){return oA(e,"POST","/v1/accounts:signInWithIdp",th(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="http://localhost";class zr extends pA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new zr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new zr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Ps(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ps(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ps(t,n)}buildRequest(){const t={requestUri:Px,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Vm(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends eh{constructor(){super("facebook.com")}static credential(t){return zr._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ii.credentialFromTaggedObject(t)}static credentialFromError(t){return Ii.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ii.credential(t.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends eh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return zr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Qn.credentialFromTaggedObject(t)}static credentialFromError(t){return Qn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Qn.credential(n,i)}catch{return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com";Qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends eh{constructor(){super("github.com")}static credential(t){return zr._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ci.credentialFromTaggedObject(t)}static credentialFromError(t){return Ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ci.credential(t.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends eh{constructor(){super("twitter.com")}static credential(t,n){return zr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ni.credentialFromTaggedObject(t)}static credentialFromError(t){return Ni.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ni.credential(n,i)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(e,t){return oA(e,"POST","/v1/accounts:signUp",th(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await Tn._fromIdTokenResponse(t,i,r),a=fv(i);return new ar({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=fv(i);return new ar({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function fv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(e){var r;if(fn(e.app))return Promise.reject(ni(e));const t=pl(e);if(await t._initializationPromise,(r=t.currentUser)!=null&&r.isAnonymous)return new ar({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Lx(t,{returnSecureToken:!0}),i=await ar._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends fi{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new gc(t,n,i,r)}}function yA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(e,s,t,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(e){return new Set(e.map(({providerId:t})=>t).filter(t=>!!t))}async function Bx(e,t,n=!1){const i=await jo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ar._forOperation(e,"link",i)}async function qx(e,t,n){await zo(t);const i=zx(t.providerData);nt(i.has(n)===e,t.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(e,t,n=!1){const{auth:i}=e;if(fn(i.app))return Promise.reject(ni(i));const r="reauthenticate";try{const s=await jo(e,yA(i,r,t,e),n);nt(s.idToken,i,"internal-error");const a=Eg(s.idToken);nt(a,i,"internal-error");const{sub:l}=a;return nt(e.uid===l,i,"user-mismatch"),ar._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sr(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(e,t,n=!1){if(fn(e.app))return Promise.reject(ni(e));const i="signIn",r=await yA(e,i,t),s=await ar._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function Gx(e,t,n,i){return oe(e).onAuthStateChanged(t,n,i)}function Qx(e){return oe(e).signOut()}const dv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dv,"1"),this.storage.removeItem(dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1e3,Kx=10;class vA extends _A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Cx()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Kx):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},Yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}vA.type="LOCAL";const Xx=vA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends _A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$x.type="SESSION";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}new ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e,t){return nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends pA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ps(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ps(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ps(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Zx(e){return Fx(e.auth,new Sg(e),e.bypassAuthState)}function Jx(e){const{auth:t,user:n}=e;return nt(n,t,"internal-error"),Hx(n,new Sg(e),e.bypassAuthState)}async function Wx(e){const{auth:t,user:n}=e;return nt(n,t,"internal-error"),Bx(n,new Sg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Zx;case"linkViaPopup":case"linkViaRedirect":return Wx;case"reauthViaPopup":case"reauthViaRedirect":return Jx;default:sr(this.auth,"internal-error")}}resolve(t){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new ml(2e3,1e4);class bs extends EA{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return nt(t,this.auth,"internal-error"),t}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const t=TA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(fo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,tD.get())};t()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="pendingRedirect",ff=new Map;class nD extends EA{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=ff.get(this.auth._key());if(!t){try{const i=await iD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}ff.set(this.auth._key(),t)}return this.bypassAuthState||ff.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iD(e,t){const n=SA(t),i=bA(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function AA(e,t){return bA(e)._set(SA(t),"true")}function bA(e){return ki(e._redirectPersistence)}function SA(e){return Au(eD,e.config.apiKey,e.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e,t,n){return sD(e,t)}async function sD(e,t,n){if(fn(e.app))return Promise.reject(ni(e));const i=pl(e);rA(e,t,Ag),await i._initializationPromise;const r=bg(i);return await AA(r,i),r._openRedirect(i,t,"signInViaRedirect")}function aD(e,t,n){return oD(e,t)}async function oD(e,t,n){const i=oe(e);rA(i.auth,t,Ag),await i.auth._initializationPromise;const r=bg(i.auth);await qx(!1,i,t.providerId),await AA(r,i.auth);const s=await cD(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}async function lD(e,t){return await pl(e)._initializationPromise,uD(e,t,!1)}async function uD(e,t,n=!1){if(fn(e.app))return Promise.reject(ni(e));const i=pl(e),r=bg(i),a=await new nD(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}async function cD(e){const t=TA(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ml(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ml(5e3,15e3);var mv="@firebase/auth",gv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dD(e){Xs(new Ur("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;nt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gA(e)},h=new Mx(i,r,s,u);return Ux(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Xs(new Ur("auth-internal",t=>{const n=pl(t.getProvider("auth").getImmediate());return(i=>new hD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(mv,gv,fD(e)),Qi(mv,gv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=5*60;h2("authIdTokenMaxAge");dD("Browser");const gD=()=>v.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[v.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),v.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),v.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),v.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.82l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),v.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),pD=({user:e,subscription:t,onGetSubscriptionClick:n,auth:i})=>{const r=new Qn,s=async()=>{console.log("Попытка входа через Google (перенаправление)...");try{i.currentUser&&i.currentUser.isAnonymous?await aD(i.currentUser,r):await rD(i,r)}catch(u){console.error("Ошибка входа или привязки:",u)}},a=()=>{Qx(i).catch(u=>console.error("Ошибка выхода:",u))},l=t&&new Date(t.expires_at)>new Date;return v.jsxs("div",{className:"p-4 space-y-4",children:[e&&!e.isAnonymous?v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[v.jsx("img",{src:e.photoURL||void 0,alt:"Avatar",className:"w-16 h-16 rounded-full"}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold",children:e.displayName}),v.jsx("p",{className:"text-sm opacity-70",children:e.email})]})]}),v.jsx("button",{onClick:a,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold",children:"Выйти"})]}):v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Войдите в аккаунт"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Чтобы синхронизировать ваши закладки, подписку и прогресс чтения между устройствами."}),v.jsxs("button",{onClick:s,className:"w-full py-2 rounded-lg bg-white text-gray-800 font-bold flex items-center justify-center border border-gray-300 shadow-sm hover:bg-gray-50",children:[v.jsx(gD,{}),"Войти через Google"]})]}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),l?v.jsxs("div",{children:[v.jsx("p",{className:"text-green-500",children:"Активна"}),v.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(t.expires_at).toLocaleDateString()]})]}):v.jsxs("div",{children:[v.jsx("p",{className:"text-red-500",children:"Неактивна"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),v.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]})]})},yD={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},wA=vE(yD),ne=BN(wA),tu=kx(wA,{persistence:Xx}),RA=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),IA=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 12H5"}),v.jsx("polyline",{points:"12 19 5 12 12 5"})]}),CA=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),_D=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[v.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),vD=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),wg=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),NA=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),xA=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),TD=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),ED=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M4 22h16"}),v.jsx("path",{d:"M7 22V2h10v20"}),v.jsx("path",{d:"M7 12h4"})]}),AD=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m15 18-6-6 6-6"})}),bD=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),SD=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),wD=()=>v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[v.jsx(wg,{className:"animate-pulse-heart text-accent",filled:!0}),v.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),Rg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx(vD,{className:"mx-auto mb-4 text-accent"}),v.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),v.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),v.jsx("div",{className:"space-y-3",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:i.name}),v.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Ig=({onClose:e,onSelectMethod:t,plan:n})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),v.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),v.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),v.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),v.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),Br=({title:e,onBack:t})=>v.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&v.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:v.jsx(IA,{})}),v.jsx("h1",{className:"text-xl font-bold",children:e})]}),Cg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((r,s)=>v.jsx("div",{onClick:()=>t(r),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${s*50}ms`},children:v.jsxs("div",{className:"relative transition-all duration-300",children:[v.jsx("button",{onClick:a=>{a.stopPropagation(),i(r.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(r.id)?"text-accent":""}`,children:v.jsx(xA,{filled:n.includes(r.id),width:"20",height:"20"})}),v.jsx("img",{src:`/tene/${r.coverUrl}`,alt:r.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),v.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:r.title})]})},r.id)):v.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),RD=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:r,userId:s,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=H.useState(!1),[m,_]=H.useState(null),[x,O]=H.useState("newest"),[V,S]=H.useState(!1),T=H.useRef(null),[R,D]=H.useState(!1),L=i&&new Date(i.expires_at)>new Date,B=H.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);H.useEffect(()=>{T.current&&setTimeout(()=>{T.current&&D(T.current.scrollHeight>T.current.clientHeight)},100)},[e.description]);const E=H.useMemo(()=>{const I=[...a];return x==="newest"?I.reverse():a},[a,x]),y=I=>{!L&&I.isPaid?g(!0):t(I)},A=()=>{if(B){const I=a.find(b=>b.id===B);I&&t(I)}},w=I=>_(I),C=async I=>{var yt;const b=(yt=window.Telegram)==null?void 0:yt.WebApp;if(!b||!s||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),b&&b.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}b.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async me=>{if(!me)return;const q=Ie(ne,"users",s);try{await Ms(q,{pendingSubscription:{...m,method:I,date:new Date().toISOString()}},{merge:!0}),b.openTelegramLink(`https://t.me/${r}?start=${s}`),b.close()}catch(X){console.error("Ошибка записи в Firebase:",X),b.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return v.jsxs("div",{className:"text-text-main",children:[v.jsx(Br,{title:e.title,onBack:h}),v.jsxs("div",{className:"relative h-64",children:[v.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),v.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[v.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),v.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(I=>v.jsx("button",{onClick:()=>n(I),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:I},I))}),v.jsx("div",{ref:T,className:`relative overflow-hidden transition-all duration-500 ${V?"max-h-full":"max-h-24"}`,children:v.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&v.jsx("div",{className:"text-right",children:v.jsx("button",{onClick:()=>S(!V),className:"text-sm font-semibold text-accent mb-4",children:V?"Скрыть":"Читать полностью..."})}),B&&v.jsxs("button",{onClick:A,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",B,")"]}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),v.jsx("button",{onClick:()=>O(I=>I==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),L&&v.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?v.jsx("p",{children:"Загрузка глав..."}):v.jsx("div",{className:"flex flex-col gap-3",children:E.map(I=>{const b=!L&&I.isPaid,yt=B===I.id;return v.jsxs("div",{onClick:()=>y(I),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${b?"opacity-70":""}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[yt&&v.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),v.jsx("p",{className:"font-semibold",children:I.title})]}),b?v.jsx(_D,{}):v.jsx(RA,{})]},I.id)})}),d&&v.jsx(Rg,{onClose:()=>g(!1),onSelectPlan:w}),m&&v.jsx(Ig,{onClose:()=>_(null),onSelectMethod:C,plan:m})]})]})},ID=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},DA=Eb.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:_,onCommentSubmit:x})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[v.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),v.jsx("span",{children:O(e.timestamp)})]}),u===e.id?v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsx("input",{type:"text",value:h,autoFocus:!0,onChange:V=>d(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),v.jsx("button",{onClick:()=>s(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),v.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):v.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[v.jsx(wg,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),v.jsx("span",{children:e.likeCount||0})]}),v.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),v.jsx("button",{onClick:()=>r(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===e.id&&v.jsxs("form",{onSubmit:V=>x(V,e.id),className:"flex items-center gap-2 mt-2",children:[v.jsx("input",{type:"text",value:m,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),v.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:v.jsx(NA,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&v.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(V=>v.jsx(DA,{comment:V,onReply:t,onLike:n,onEdit:i,onDelete:r,onUpdate:s,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:_,onCommentSubmit:x},V.id))})]})}),CD=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:r,userName:s,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g,isUserAdmin:m})=>{const[_,x]=H.useState([]),[O,V]=H.useState(""),[S,T]=H.useState(null),[R,D]=H.useState(""),[L,B]=H.useState(null),[E,y]=H.useState(""),[A,w]=H.useState(0),[C,I]=H.useState(!1),[b,yt]=H.useState(!1),[me,q]=H.useState(!1),[X,Y]=H.useState(!1),[gt,xt]=H.useState(null),[pn,zt]=H.useState(""),[ct,$t]=H.useState(!0),be=h&&new Date(h.expires_at)>new Date,De=H.useMemo(()=>Ie(ne,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);H.useEffect(()=>{const G=Tu(De,At=>{var rt;w(((rt=At.data())==null?void 0:rt.likeCount)||0)}),tt=$N(J_(ne,`chapters_metadata/${t.id}_${e.id}/comments`),ZN("timestamp","asc")),Et=Tu(tt,async At=>{const rt=At.docs.map(bt=>({id:bt.id,...bt.data()}));if(r){const bt=rt.map(async ga=>{const yl=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments/${ga.id}/likes`,r),nh=await Dd(yl);return{...ga,userHasLiked:nh.exists()}}),Fe=await Promise.all(bt);x(Fe)}else x(rt)});let Rt=()=>{};if(r){const At=Ie(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);Rt=Tu(At,rt=>{I(rt.exists())})}return()=>{G(),Et(),Rt()}},[De,t.id,e.id,r]),H.useEffect(()=>{(async()=>{if($t(!0),zt(""),e.isPaid&&!be){$t(!1),zt(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const tt=Ie(ne,"chapter_content",`${t.id}-${e.id}`),Et=await Dd(tt);Et.exists()?zt(Et.data().content):zt(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(tt){console.error("Ошибка загрузки главы:",tt),zt(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{$t(!1)}})()},[t.id,e.id,be]);const Sn=H.useCallback(async(G,tt=null)=>{G.preventDefault();const Et=tt?E:O;if(!(!Et.trim()||!r))try{await Ms(De,{},{merge:!0});const Rt=J_(ne,`chapters_metadata/${t.id}_${e.id}/comments`),At={userId:r,userName:s||"Аноним",text:Et,timestamp:cf(),likeCount:0};tt&&(At.replyTo=tt),await nx(Rt,At),tt?(B(null),y("")):V("")}catch(Rt){console.error("Ошибка добавления комментария:",Rt)}},[r,s,O,E,De,t.id,e.id]),hr=H.useCallback(async G=>{if(!r)return;const tt=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G),Et=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments/${G}/likes`,r);x(Rt=>Rt.map(At=>{if(At.id===G){const rt=At.userHasLiked?(At.likeCount||1)-1:(At.likeCount||0)+1;return{...At,userHasLiked:!At.userHasLiked,likeCount:rt}}return At}));try{await sv(ne,async Rt=>{const At=await Rt.get(Et),rt=await Rt.get(tt);if(!rt.exists())return;const bt=rt.data().likeCount||0;At.exists()?(Rt.delete(Et),Rt.update(tt,{likeCount:Math.max(0,bt-1)})):(Rt.set(Et,{timestamp:cf()}),Rt.update(tt,{likeCount:bt+1}))})}catch(Rt){console.error("Ошибка при обновлении лайка комментария:",Rt)}},[r,t.id,e.id]),ma=H.useCallback(G=>{G?(T(G.id),D(G.text)):(T(null),D(""))},[]),di=H.useCallback(async G=>{if(!R.trim())return;const tt=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G);await tx(tt,{text:R}),T(null),D("")},[R,t.id,e.id]),wn=H.useCallback(async G=>{const tt=Ie(ne,`chapters_metadata/${t.id}_${e.id}/comments`,G);await ex(tt)},[t.id,e.id]),fr=H.useCallback(G=>{B(tt=>tt===G?null:G),y("")},[]),dr=async()=>{if(!r)return;const G=Ie(ne,`chapters_metadata/${t.id}_${e.id}/likes`,r);try{await sv(ne,async tt=>{var rt;const Et=await tt.get(G),At=((rt=(await tt.get(De)).data())==null?void 0:rt.likeCount)||0;Et.exists()?(tt.delete(G),tt.set(De,{likeCount:Math.max(0,At-1)},{merge:!0})):(tt.set(G,{timestamp:cf()}),tt.set(De,{likeCount:At+1},{merge:!0}))})}catch(tt){console.error("Ошибка при обновлении лайка:",tt)}},jn=G=>{G&&(!be&&G.isPaid?(yt(!1),Y(!0)):(l(G),yt(!1)))},mr=G=>{xt(G),Y(!1)},Xr=async G=>{var Et;const tt=(Et=window.Telegram)==null?void 0:Et.WebApp;tt&&r&&gt&&tt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Rt=>{if(Rt){const At=Ie(ne,"users",r);try{await Ms(At,{pendingSubscription:{...gt,method:G,date:new Date().toISOString()}},{merge:!0}),tt.openTelegramLink(`https://t.me/${d}?start=${r}`),tt.close()}catch(rt){console.error("Ошибка записи в Firebase:",rt),tt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},$=u.findIndex(G=>G.id===e.id),ht=u[$-1],Tt=u[$+1],yn=G=>window.marked?`<div class="prose">${window.marked.parse(G)}</div>`:G;return v.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[v.jsx(Br,{title:t.title,onBack:g}),v.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[v.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),v.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:ct?"<p>Загрузка...</p>":yn(pn)}}),v.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),v.jsxs("div",{className:"border-t border-border-color pt-8",children:[v.jsx("div",{className:"flex items-center gap-4 mb-8",children:v.jsxs("button",{onClick:dr,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[v.jsx(wg,{filled:C,className:C?"text-accent":""}),v.jsx("span",{className:"font-bold text-lg",children:A})]})}),v.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),v.jsx("div",{className:"space-y-4 mb-6",children:_.length>0?ID(_).map(G=>v.jsx(DA,{comment:G,onReply:fr,onLike:hr,onEdit:ma,onDelete:wn,onUpdate:di,isUserAdmin:m,currentUserId:r,editingCommentId:S,editingText:R,setEditingText:D,replyingTo:L,replyText:E,setReplyText:y,onCommentSubmit:Sn},G.id)):v.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})}),v.jsxs("form",{onSubmit:G=>Sn(G,null),className:"flex items-center gap-2",children:[v.jsx("input",{type:"text",value:O,onChange:G=>V(G.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),v.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:v.jsx(NA,{className:"w-5 h-5"})})]})]})]}),v.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[v.jsx("button",{onClick:()=>jn(ht),disabled:!ht,className:"p-2 disabled:opacity-50",children:v.jsx(IA,{})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>yt(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),v.jsx("button",{onClick:()=>q(!0),className:"p-2 rounded-lg bg-background",children:v.jsx(SD,{})})]}),v.jsx("button",{onClick:()=>jn(Tt),disabled:!Tt,className:"p-2 disabled:opacity-50",children:v.jsx(RA,{className:"opacity-100"})})]}),b&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>yt(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),v.jsx("div",{className:"overflow-y-auto",children:v.jsx("div",{className:"flex flex-col gap-2",children:u.map(G=>v.jsx("button",{onClick:()=>jn(G),className:`p-2 text-left rounded-md ${G.id===e.id?"bg-accent text-white":"bg-background"}`,children:G.title},G.id))})})]})}),me&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>q(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{children:"Размер текста"}),v.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[v.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),v.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),X&&v.jsx(Rg,{onClose:()=>Y(!1),onSelectPlan:mr}),gt&&v.jsx(Ig,{onClose:()=>xt(null),onSelectMethod:Xr,plan:gt})]})},ND=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[r,s]=H.useState(""),a=H.useMemo(()=>r?e.filter(l=>l.title.toLowerCase().includes(r.toLowerCase())):[],[e,r]);return v.jsxs("div",{children:[v.jsx(Br,{title:"Поиск"}),v.jsxs("div",{className:"p-4",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:"absolute left-3 top-1-2 -translate-y-1/2",children:v.jsx(CA,{className:"text-text-main opacity-50"})}),v.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:r,onChange:l=>s(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),v.jsx(Cg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},xD=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsxs("div",{children:[v.jsx(Br,{title:"Закладки"}),v.jsx(Cg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),DD=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i,auth:r})=>{const s=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(a=>console.error("Не удалось скопировать UID: ",a))};return v.jsxs("div",{children:[v.jsx(Br,{title:"Профиль"}),v.jsx(pD,{user:e,subscription:t,onGetSubscriptionClick:n,auth:r}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для администрирования"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для назначения прав администратора через Telegram-бота."}),v.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:v.jsx("code",{children:i||"Загрузка..."})}),v.jsx("button",{onClick:s,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})},VD=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:ED},{id:"search",label:"Поиск",icon:CA},{id:"bookmarks",label:"Закладки",icon:xA},{id:"profile",label:"Профиль",icon:TD}];return v.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:v.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[v.jsx(i.icon,{filled:e===i.id}),v.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},OD=({onReadMore:e})=>{const[t,n]=H.useState([]),[i,r]=H.useState(0);H.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const s=()=>r(u=>(u+1)%t.length),a=()=>r(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[v.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-bold text-text-main",children:l.title}),v.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),v.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:v.jsx(AD,{className:"w-5 h-5"})}),v.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-background",children:v.jsx(bD,{className:"w-5 h-5"})})]})]})})},MD=({newsItem:e,onClose:t})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:v.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),v.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),v.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function kD(){const[e,t]=H.useState(16),[n,i]=H.useState("font-sans"),[r,s]=H.useState("list"),[a,l]=H.useState("library"),[u,h]=H.useState([]),[d,g]=H.useState(null),[m,_]=H.useState(null),[x,O]=H.useState(null),[V,S]=H.useState(null),[T,R]=H.useState(null),[D,L]=H.useState(!0),[B,E]=H.useState(!1),[y,A]=H.useState([]),[w,C]=H.useState(!0),[I,b]=H.useState(null),[yt,me]=H.useState([]),[q,X]=H.useState(!1),[Y,gt]=H.useState(null),[xt,pn]=H.useState(null),zt="tenebrisverbot",ct=T==null?void 0:T.uid;H.useEffect(()=>{lD(tu).then($=>{$&&console.log("Результат перенаправления получен:",$.user)}).catch($=>{console.error("Ошибка при получении результата перенаправления:",$)})},[]);const $t=H.useCallback(async $=>{if(ct){const ht=Ie(ne,"users",ct);try{await Ms(ht,$,{merge:!0})}catch(Tt){console.error("Не удалось обновить данные пользователя:",Tt)}}},[ct]),be=H.useCallback($=>{t(ht=>{const Tt=Math.max(12,Math.min(32,ht+$));return $t({settings:{fontSize:Tt,fontClass:n}}),Tt})},[n,$t]);H.useEffect(()=>{L(!0),fetch("/tene/data/novels.json").then(Tt=>Tt.json()).then(Tt=>h(Tt.novels)).catch(Tt=>console.error("Ошибка загрузки новелл:",Tt));let $=()=>{};const ht=Gx(tu,async Tt=>{var yn,G,tt,Et;if($(),Tt){R(Tt);const Rt=await Tt.getIdTokenResult();E(!!Rt.claims.admin);const At=Ie(ne,"users",Tt.uid);$=Tu(At,bt=>{if(bt.exists()){const Fe=bt.data();S(Fe.subscription||null),b(Fe.lastRead||null),me(Fe.bookmarks||[]),Fe.settings&&(t(Fe.settings.fontSize||16),i(Fe.settings.fontClass||"font-sans"))}else S(null),b(null),me([])});const rt=(yn=window.Telegram)==null?void 0:yn.WebApp;if(rt&&!Tt.isAnonymous){const bt=(Et=(tt=(G=rt.initDataUnsafe)==null?void 0:G.user)==null?void 0:tt.id)==null?void 0:Et.toString();bt&&await Ms(At,{telegramId:bt},{merge:!0})}}else R(null),await jx(tu);L(!1)});return()=>{ht(),$()}},[]),H.useEffect(()=>{if(!d){A([]);return}(async()=>{C(!0);try{const ht=Ie(ne,"chapter_info",d.id.toString()),Tt=await Dd(ht);if(Tt.exists()){const G=Tt.data().chapters||{},tt=Object.keys(G).map(Et=>({id:parseInt(Et),title:`Глава ${Et}`,isPaid:G[Et].isPaid||!1})).sort((Et,Rt)=>Et.id-Rt.id);A(tt)}else console.log("Документ с главами не найден в chapter_info!"),A([])}catch(ht){console.error("Ошибка загрузки глав из Firebase:",ht),A([])}finally{C(!1)}})()},[d]);const De=H.useCallback(()=>{r==="reader"?s("details"):r==="details"&&(s("list"),O(null))},[r]);H.useEffect(()=>{var ht;const $=(ht=window.Telegram)==null?void 0:ht.WebApp;if($)return $.ready(),$.expand(),$.onEvent("backButtonClicked",De),r==="list"?$.BackButton.hide():$.BackButton.show(),()=>$.offEvent("backButtonClicked",De)},[r,De]),H.useEffect(()=>{var ht;const $=(ht=window.Telegram)==null?void 0:ht.WebApp;$&&($.setHeaderColor("#FFFFFF"),$.setBackgroundColor("#F5F1ED"))},[]);const Sn=H.useCallback(async $=>{if(_($),s("reader"),ct&&d){const ht={...I||{},[d.id]:{novelId:d.id,chapterId:$.id,timestamp:new Date().toISOString()}};b(ht),await $t({lastRead:ht})}},[ct,d,I,$t]),hr=$=>{g($),s("details")},ma=$=>{O($),s("list"),l("library")},di=()=>{O(null)},wn=H.useCallback(async $=>{const ht=yt.includes($)?yt.filter(Tt=>Tt!==$):[...yt,$];me(ht),await $t({bookmarks:ht})},[yt,$t]),fr=H.useMemo(()=>u.filter($=>yt.includes($.id)),[u,yt]),dr=()=>{X(!0)},jn=$=>{gt($),X(!1)},mr=async $=>{var Tt;const ht=(Tt=window.Telegram)==null?void 0:Tt.WebApp;if(!ht||!ct||!Y){console.error("Telegram Web App, userId, or selectedPlan is not available."),ht&&ht.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}ht.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async yn=>{if(!yn)return;const G=Ie(ne,"users",ct);try{await Ms(G,{pendingSubscription:{...Y,method:$,date:new Date().toISOString()}},{merge:!0}),ht.openTelegramLink(`https://t.me/${zt}?start=${ct}`),ht.close()}catch(tt){console.error("Ошибка записи в Firebase:",tt),ht.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(D)return v.jsx(wD,{});const Xr=()=>{if(r==="details")return v.jsx(RD,{novel:d,onSelectChapter:Sn,onGenreSelect:ma,subscription:V,botUsername:zt,userId:ct,chapters:y,isLoadingChapters:w,lastReadData:I,onBack:De});if(r==="reader")return v.jsx(CD,{chapter:m,novel:d,fontSize:e,onFontSizeChange:be,userId:ct,userName:(T==null?void 0:T.displayName)||"Аноним",currentFontClass:n,onSelectChapter:Sn,allChapters:y,subscription:V,botUsername:zt,onBack:De,isUserAdmin:B});switch(a){case"library":return v.jsxs(v.Fragment,{children:[v.jsx(Br,{title:"Библиотека"}),v.jsx(OD,{onReadMore:pn}),x&&v.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("span",{className:"opacity-70",children:"Жанр:"}),v.jsx("strong",{className:"ml-2",children:x})]}),v.jsx("button",{onClick:di,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),v.jsx(Cg,{novels:u.filter($=>!x||$.genres.includes(x)),onSelectNovel:hr,bookmarks:yt,onToggleBookmark:wn})]});case"search":return v.jsx(ND,{novels:u,onSelectNovel:hr,bookmarks:yt,onToggleBookmark:wn});case"bookmarks":return v.jsx(xD,{novels:fr,onSelectNovel:hr,bookmarks:yt,onToggleBookmark:wn});case"profile":return v.jsx(DD,{user:T,subscription:V,onGetSubscriptionClick:dr,userId:ct,auth:tu});default:return v.jsx(Br,{title:"Библиотека"})}};return v.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${B?"":"no-select"}`,children:[v.jsx("div",{className:"pb-20",children:Xr()}),r==="list"&&v.jsx(VD,{activeTab:a,setActiveTab:l}),q&&v.jsx(Rg,{onClose:()=>X(!1),onSelectPlan:jn}),Y&&v.jsx(Ig,{onClose:()=>gt(null),onSelectMethod:mr,plan:Y}),xt&&v.jsx(MD,{newsItem:xt,onClose:()=>pn(null)})]})}t2.createRoot(document.getElementById("root")).render(v.jsx(H.StrictMode,{children:v.jsx(kD,{})}));
