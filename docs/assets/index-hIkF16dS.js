(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function rE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aE={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw=Symbol.for("react.transitional.element"),uw=Symbol.for("react.fragment");function oE(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:lw,type:e,key:i,ref:t!==void 0?t:null,props:n}}$c.Fragment=uw;$c.jsx=oE;$c.jsxs=oE;aE.exports=$c;var h=aE.exports,lE={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=Symbol.for("react.transitional.element"),cw=Symbol.for("react.portal"),hw=Symbol.for("react.fragment"),fw=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),mw=Symbol.for("react.consumer"),pw=Symbol.for("react.context"),gw=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),_w=Symbol.for("react.memo"),uE=Symbol.for("react.lazy"),ty=Symbol.iterator;function vw(e){return e===null||typeof e!="object"?null:(e=ty&&e[ty]||e["@@iterator"],typeof e=="function"?e:null)}var cE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hE=Object.assign,fE={};function Sa(e,t,n){this.props=e,this.context=t,this.refs=fE,this.updater=n||cE}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dE(){}dE.prototype=Sa.prototype;function hm(e,t,n){this.props=e,this.context=t,this.refs=fE,this.updater=n||cE}var fm=hm.prototype=new dE;fm.constructor=hm;hE(fm,Sa.prototype);fm.isPureReactComponent=!0;var ey=Array.isArray,zt={H:null,A:null,T:null,S:null,V:null},mE=Object.prototype.hasOwnProperty;function dm(e,t,n,i,s,r){return n=r.ref,{$$typeof:cm,type:e,key:t,ref:n!==void 0?n:null,props:r}}function Ew(e,t){return dm(e.type,t,void 0,void 0,void 0,e.props)}function mm(e){return typeof e=="object"&&e!==null&&e.$$typeof===cm}function Tw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ny=/\/+/g;function $h(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tw(""+e.key):t.toString(36)}function iy(){}function bw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(iy,iy):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ar(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case cm:case cw:a=!0;break;case uE:return a=e._init,Ar(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+$h(e,0):i,ey(s)?(n="",a!=null&&(n=a.replace(ny,"$&/")+"/"),Ar(s,t,n,"",function(f){return f})):s!=null&&(mm(s)&&(s=Ew(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(ny,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(ey(e))for(var u=0;u<e.length;u++)i=e[u],r=l+$h(i,u),a+=Ar(i,t,n,r,s);else if(u=vw(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+$h(i,u++),a+=Ar(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return Ar(bw(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function lu(e,t,n){if(e==null)return e;var i=[],s=0;return Ar(e,i,"","",function(r){return t.call(n,r,s++)}),i}function Aw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sy=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Sw(){}at.Children={map:lu,forEach:function(e,t,n){lu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lu(e,function(){t++}),t},toArray:function(e){return lu(e,function(t){return t})||[]},only:function(e){if(!mm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=Sa;at.Fragment=hw;at.Profiler=dw;at.PureComponent=hm;at.StrictMode=fw;at.Suspense=yw;at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=zt;at.__COMPILER_RUNTIME={__proto__:null,c:function(e){return zt.H.useMemoCache(e)}};at.cache=function(e){return function(){return e.apply(null,arguments)}};at.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=hE({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!mE.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return dm(e.type,s,void 0,void 0,r,i)};at.createContext=function(e){return e={$$typeof:pw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:mw,_context:e},e};at.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)mE.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return dm(e,r,void 0,void 0,null,s)};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:gw,render:e}};at.isValidElement=mm;at.lazy=function(e){return{$$typeof:uE,_payload:{_status:-1,_result:e},_init:Aw}};at.memo=function(e,t){return{$$typeof:_w,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=zt.T,n={};zt.T=n;try{var i=e(),s=zt.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Sw,sy)}catch(r){sy(r)}finally{zt.T=t}};at.unstable_useCacheRefresh=function(){return zt.H.useCacheRefresh()};at.use=function(e){return zt.H.use(e)};at.useActionState=function(e,t,n){return zt.H.useActionState(e,t,n)};at.useCallback=function(e,t){return zt.H.useCallback(e,t)};at.useContext=function(e){return zt.H.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e,t){return zt.H.useDeferredValue(e,t)};at.useEffect=function(e,t,n){var i=zt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};at.useId=function(){return zt.H.useId()};at.useImperativeHandle=function(e,t,n){return zt.H.useImperativeHandle(e,t,n)};at.useInsertionEffect=function(e,t){return zt.H.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return zt.H.useLayoutEffect(e,t)};at.useMemo=function(e,t){return zt.H.useMemo(e,t)};at.useOptimistic=function(e,t){return zt.H.useOptimistic(e,t)};at.useReducer=function(e,t,n){return zt.H.useReducer(e,t,n)};at.useRef=function(e){return zt.H.useRef(e)};at.useState=function(e){return zt.H.useState(e)};at.useSyncExternalStore=function(e,t,n){return zt.H.useSyncExternalStore(e,t,n)};at.useTransition=function(){return zt.H.useTransition()};at.version="19.1.1";lE.exports=at;var U=lE.exports;const pE=rE(U);var gE={exports:{}},Xc={},yE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,$){var Y=B.length;B.push($);t:for(;0<Y;){var mt=Y-1>>>1,Mt=B[mt];if(0<s(Mt,$))B[mt]=$,B[Y]=Mt,Y=mt;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var $=B[0],Y=B.pop();if(Y!==$){B[0]=Y;t:for(var mt=0,Mt=B.length,fn=Mt>>>1;mt<fn;){var Qt=2*(mt+1)-1,At=B[Qt],ie=Qt+1,Ee=B[ie];if(0>s(At,Y))ie<Mt&&0>s(Ee,At)?(B[mt]=Ee,B[ie]=Y,mt=ie):(B[mt]=At,B[Qt]=Y,mt=Qt);else if(ie<Mt&&0>s(Ee,Y))B[mt]=Ee,B[ie]=Y,mt=ie;else break t}}return $}function s(B,$){var Y=B.sortIndex-$.sortIndex;return Y!==0?Y:B.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,p=3,_=!1,C=!1,O=!1,V=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var $=n(f);$!==null;){if($.callback===null)i(f);else if($.startTime<=B)i(f),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(f)}}function L(B){if(O=!1,D(B),!C)if(n(u)!==null)C=!0,H||(H=!0,I());else{var $=n(f);$!==null&&vt(L,$.startTime-B)}}var H=!1,T=-1,v=5,b=-1;function A(){return V?!0:!(e.unstable_now()-b<v)}function R(){if(V=!1,H){var B=e.unstable_now();b=B;var $=!0;try{t:{C=!1,O&&(O=!1,E(T),T=-1),_=!0;var Y=p;try{e:{for(D(B),g=n(u);g!==null&&!(g.expirationTime>B&&A());){var mt=g.callback;if(typeof mt=="function"){g.callback=null,p=g.priorityLevel;var Mt=mt(g.expirationTime<=B);if(B=e.unstable_now(),typeof Mt=="function"){g.callback=Mt,D(B),$=!0;break e}g===n(u)&&i(u),D(B)}else i(u);g=n(u)}if(g!==null)$=!0;else{var fn=n(f);fn!==null&&vt(L,fn.startTime-B),$=!1}}break t}finally{g=null,p=Y,_=!1}$=void 0}}finally{$?I():H=!1}}}var I;if(typeof x=="function")I=function(){x(R)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,et=w.port2;w.port1.onmessage=R,I=function(){et.postMessage(null)}}else I=function(){S(R,0)};function vt(B,$){T=S(function(){B(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var Y=p;p=$;try{return B()}finally{p=Y}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=p;p=B;try{return $()}finally{p=Y}},e.unstable_scheduleCallback=function(B,$,Y){var mt=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?mt+Y:mt):Y=mt,B){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=Y+Mt,B={id:m++,callback:$,priorityLevel:B,startTime:Y,expirationTime:Mt,sortIndex:-1},Y>mt?(B.sortIndex=Y,t(f,B),n(u)===null&&B===n(f)&&(O?(E(T),T=-1):O=!0,vt(L,Y-mt))):(B.sortIndex=Mt,t(u,B),C||_||(C=!0,H||(H=!0,I()))),B},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(B){var $=p;return function(){var Y=p;p=$;try{return B.apply(this,arguments)}finally{p=Y}}}})(_E);yE.exports=_E;var ww=yE.exports,vE={exports:{}},He={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=U;function EE(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Li(){}var Be={d:{f:Li,r:function(){throw Error(EE(522))},D:Li,C:Li,L:Li,m:Li,X:Li,S:Li,M:Li},p:0,findDOMNode:null},Rw=Symbol.for("react.portal");function Iw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var _o=xw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Zc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Be;He.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(EE(299));return Iw(e,t,null,n)};He.flushSync=function(e){var t=_o.T,n=Be.p;try{if(_o.T=null,Be.p=2,e)return e()}finally{_o.T=t,Be.p=n,Be.d.f()}};He.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Be.d.C(e,t))};He.prefetchDNS=function(e){typeof e=="string"&&Be.d.D(e)};He.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Zc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Be.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Be.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};He.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Zc(t.as,t.crossOrigin);Be.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Be.d.M(e)};He.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Zc(n,t.crossOrigin);Be.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};He.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Zc(t.as,t.crossOrigin);Be.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Be.d.m(e)};He.requestFormReset=function(e){Be.d.r(e)};He.unstable_batchedUpdates=function(e,t){return e(t)};He.useFormState=function(e,t,n){return _o.H.useFormState(e,t,n)};He.useFormStatus=function(){return _o.H.useHostTransitionStatus()};He.version="19.1.1";function TE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TE)}catch(e){console.error(e)}}TE(),vE.exports=He;var Cw=vE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=ww,bE=U,Nw=Cw;function P(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function AE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function SE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ry(e){if(dl(e)!==e)throw Error(P(188))}function Dw(e){var t=e.alternate;if(!t){if(t=dl(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return ry(s),e;if(r===i)return ry(s),t;r=r.sibling}throw Error(P(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function wE(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=wE(e),t!==null)return t;e=e.sibling}return null}var Lt=Object.assign,Ow=Symbol.for("react.element"),uu=Symbol.for("react.transitional.element"),oo=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),xE=Symbol.for("react.strict_mode"),Hf=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),RE=Symbol.for("react.consumer"),li=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),Ff=Symbol.for("react.suspense"),Gf=Symbol.for("react.suspense_list"),gm=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),Qf=Symbol.for("react.activity"),Mw=Symbol.for("react.memo_cache_sentinel"),ay=Symbol.iterator;function Ja(e){return e===null||typeof e!="object"?null:(e=ay&&e[ay]||e["@@iterator"],typeof e=="function"?e:null)}var kw=Symbol.for("react.client.reference");function Kf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===kw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dr:return"Fragment";case Hf:return"Profiler";case xE:return"StrictMode";case Ff:return"Suspense";case Gf:return"SuspenseList";case Qf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case oo:return"Portal";case li:return(e.displayName||"Context")+".Provider";case RE:return(e._context.displayName||"Context")+".Consumer";case pm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gm:return t=e.displayName||null,t!==null?t:Kf(e.type)||"Memo";case qi:t=e._payload,e=e._init;try{return Kf(e(t))}catch{}}return null}var lo=Array.isArray,tt=bE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt=Nw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Hs={pending:!1,data:null,method:null,action:null},Yf=[],Or=-1;function $n(e){return{current:e}}function ve(e){0>Or||(e.current=Yf[Or],Yf[Or]=null,Or--)}function Bt(e,t){Or++,Yf[Or]=e.current,e.current=t}var Pn=$n(null),Uo=$n(null),is=$n(null),Wu=$n(null);function Ju(e,t){switch(Bt(is,t),Bt(Uo,e),Bt(Pn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?h_(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=h_(t),e=F0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ve(Pn),Bt(Pn,e)}function sa(){ve(Pn),ve(Uo),ve(is)}function $f(e){e.memoizedState!==null&&Bt(Wu,e);var t=Pn.current,n=F0(t,e.type);t!==n&&(Bt(Uo,e),Bt(Pn,n))}function tc(e){Uo.current===e&&(ve(Pn),ve(Uo)),Wu.current===e&&(ve(Wu),$o._currentValue=Hs)}var Xf=Object.prototype.hasOwnProperty,ym=fe.unstable_scheduleCallback,Xh=fe.unstable_cancelCallback,jw=fe.unstable_shouldYield,Pw=fe.unstable_requestPaint,Ln=fe.unstable_now,Lw=fe.unstable_getCurrentPriorityLevel,IE=fe.unstable_ImmediatePriority,CE=fe.unstable_UserBlockingPriority,ec=fe.unstable_NormalPriority,Uw=fe.unstable_LowPriority,NE=fe.unstable_IdlePriority,zw=fe.log,Bw=fe.unstable_setDisableYieldValue,ml=null,an=null;function Wi(e){if(typeof zw=="function"&&Bw(e),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(ml,e)}catch{}}var on=Math.clz32?Math.clz32:Fw,qw=Math.log,Hw=Math.LN2;function Fw(e){return e>>>=0,e===0?32:31-(qw(e)/Hw|0)|0}var cu=256,hu=4194304;function Ps(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Wc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Ps(i):(a&=l,a!==0?s=Ps(a):n||(n=l&~e,n!==0&&(s=Ps(n))))):(l=i&~r,l!==0?s=Ps(l):a!==0?s=Ps(a):n||(n=i&~e,n!==0&&(s=Ps(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function pl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DE(){var e=cu;return cu<<=1,!(cu&4194048)&&(cu=256),e}function OE(){var e=hu;return hu<<=1,!(hu&62914560)&&(hu=4194304),e}function Zh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qw(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,f=e.hiddenUpdates;for(n=a&~n;0<n;){var m=31-on(n),g=1<<m;l[m]=0,u[m]=-1;var p=f[m];if(p!==null)for(f[m]=null,m=0;m<p.length;m++){var _=p[m];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&VE(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function VE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-on(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function ME(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-on(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function _m(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function vm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function kE(){var e=bt.p;return e!==0?e:(e=window.event,e===void 0?32:tb(e.type))}function Kw(e,t){var n=bt.p;try{return bt.p=e,t()}finally{bt.p=n}}var xs=Math.random().toString(36).slice(2),Me="__reactFiber$"+xs,$e="__reactProps$"+xs,wa="__reactContainer$"+xs,Zf="__reactEvents$"+xs,Yw="__reactListeners$"+xs,$w="__reactHandles$"+xs,oy="__reactResources$"+xs,yl="__reactMarker$"+xs;function Em(e){delete e[Me],delete e[$e],delete e[Zf],delete e[Yw],delete e[$w]}function Vr(e){var t=e[Me];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wa]||n[Me]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=m_(e);e!==null;){if(n=e[Me])return n;e=m_(e)}return t}e=n,n=e.parentNode}return null}function xa(e){if(e=e[Me]||e[wa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function uo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(P(33))}function Gr(e){var t=e[oy];return t||(t=e[oy]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ge(e){e[yl]=!0}var jE=new Set,PE={};function or(e,t){ra(e,t),ra(e+"Capture",t)}function ra(e,t){for(PE[e]=t,e=0;e<t.length;e++)jE.add(t[e])}var Xw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ly={},uy={};function Zw(e){return Xf.call(uy,e)?!0:Xf.call(ly,e)?!1:Xw.test(e)?uy[e]=!0:(ly[e]=!0,!1)}function Cu(e,t,n){if(Zw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function fu(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function si(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Wh,cy;function Sr(e){if(Wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wh=t&&t[1]||"",cy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wh+e+cy}var Jh=!1;function tf(e,t){if(!e||Jh)return"";Jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var p=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){p=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){p=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&p&&typeof _.stack=="string")return[_.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),f=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<f.length&&!f[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===f.length)for(i=u.length-1,s=f.length-1;1<=i&&0<=s&&u[i]!==f[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==f[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==f[s]){var m=`
`+u[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=s);break}}}finally{Jh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Sr(n):""}function Ww(e){switch(e.tag){case 26:case 27:case 5:return Sr(e.type);case 16:return Sr("Lazy");case 13:return Sr("Suspense");case 19:return Sr("SuspenseList");case 0:case 15:return tf(e.type,!1);case 11:return tf(e.type.render,!1);case 1:return tf(e.type,!0);case 31:return Sr("Activity");default:return""}}function hy(e){try{var t="";do t+=Ww(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function mn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function LE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jw(e){var t=LE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nc(e){e._valueTracker||(e._valueTracker=Jw(e))}function UE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=LE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ic(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var t1=/[\n"\\]/g;function yn(e){return e.replace(t1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Wf(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+mn(t)):e.value!==""+mn(t)&&(e.value=""+mn(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Jf(e,a,mn(t)):n!=null?Jf(e,a,mn(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+mn(l):e.removeAttribute("name")}function zE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+mn(n):"",t=t!=null?""+mn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Jf(e,t,n){t==="number"&&ic(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Qr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function BE(e,t,n){if(t!=null&&(t=""+mn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+mn(n):""}function qE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(P(92));if(lo(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=mn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function aa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var e1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fy(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||e1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function HE(e,t,n){if(t!=null&&typeof t!="object")throw Error(P(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&fy(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&fy(e,r,t[r])}function Tm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nu(e){return i1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var td=null;function bm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mr=null,Kr=null;function dy(e){var t=xa(e);if(t&&(e=t.stateNode)){var n=e[$e]||null;t:switch(e=t.stateNode,t.type){case"input":if(Wf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[$e]||null;if(!s)throw Error(P(90));Wf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&UE(i)}break t;case"textarea":BE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Qr(e,!!n.multiple,t,!1)}}}var ef=!1;function FE(e,t,n){if(ef)return e(t,n);ef=!0;try{var i=e(t);return i}finally{if(ef=!1,(Mr!==null||Kr!==null)&&(lh(),Mr&&(t=Mr,e=Kr,Kr=Mr=null,dy(t),e)))for(t=0;t<e.length;t++)dy(e[t])}}function zo(e,t){var n=e.stateNode;if(n===null)return null;var i=n[$e]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=!1;if(_i)try{var to={};Object.defineProperty(to,"passive",{get:function(){ed=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{ed=!1}var Ji=null,Am=null,Du=null;function GE(){if(Du)return Du;var e,t=Am,n=t.length,i,s="value"in Ji?Ji.value:Ji.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return Du=s.slice(e,1<i?1-i:void 0)}function Ou(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function du(){return!0}function my(){return!1}function Xe(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?du:my,this.isPropagationStopped=my,this}return Lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),t}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=Xe(lr),_l=Lt({},lr,{view:0,detail:0}),s1=Xe(_l),nf,sf,eo,th=Lt({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eo&&(eo&&e.type==="mousemove"?(nf=e.screenX-eo.screenX,sf=e.screenY-eo.screenY):sf=nf=0,eo=e),nf)},movementY:function(e){return"movementY"in e?e.movementY:sf}}),py=Xe(th),r1=Lt({},th,{dataTransfer:0}),a1=Xe(r1),o1=Lt({},_l,{relatedTarget:0}),rf=Xe(o1),l1=Lt({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=Xe(l1),c1=Lt({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h1=Xe(c1),f1=Lt({},lr,{data:0}),gy=Xe(f1),d1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=p1[e])?!!t[e]:!1}function Sm(){return g1}var y1=Lt({},_l,{key:function(e){if(e.key){var t=d1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ou(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?m1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(e){return e.type==="keypress"?Ou(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ou(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_1=Xe(y1),v1=Lt({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yy=Xe(v1),E1=Lt({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),T1=Xe(E1),b1=Lt({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A1=Xe(b1),S1=Lt({},th,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=Xe(S1),x1=Lt({},lr,{newState:0,oldState:0}),R1=Xe(x1),I1=[9,13,27,32],wm=_i&&"CompositionEvent"in window,vo=null;_i&&"documentMode"in document&&(vo=document.documentMode);var C1=_i&&"TextEvent"in window&&!vo,QE=_i&&(!wm||vo&&8<vo&&11>=vo),_y=" ",vy=!1;function KE(e,t){switch(e){case"keyup":return I1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kr=!1;function N1(e,t){switch(e){case"compositionend":return YE(t);case"keypress":return t.which!==32?null:(vy=!0,_y);case"textInput":return e=t.data,e===_y&&vy?null:e;default:return null}}function D1(e,t){if(kr)return e==="compositionend"||!wm&&KE(e,t)?(e=GE(),Du=Am=Ji=null,kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return QE&&t.locale!=="ko"?null:t.data;default:return null}}var O1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O1[e.type]:t==="textarea"}function $E(e,t,n,i){Mr?Kr?Kr.push(i):Kr=[i]:Mr=i,t=Tc(t,"onChange"),0<t.length&&(n=new Jc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Eo=null,Bo=null;function V1(e){B0(e,0)}function eh(e){var t=uo(e);if(UE(t))return e}function Ty(e,t){if(e==="change")return t}var XE=!1;if(_i){var af;if(_i){var of="oninput"in document;if(!of){var by=document.createElement("div");by.setAttribute("oninput","return;"),of=typeof by.oninput=="function"}af=of}else af=!1;XE=af&&(!document.documentMode||9<document.documentMode)}function Ay(){Eo&&(Eo.detachEvent("onpropertychange",ZE),Bo=Eo=null)}function ZE(e){if(e.propertyName==="value"&&eh(Bo)){var t=[];$E(t,Bo,e,bm(e)),FE(V1,t)}}function M1(e,t,n){e==="focusin"?(Ay(),Eo=t,Bo=n,Eo.attachEvent("onpropertychange",ZE)):e==="focusout"&&Ay()}function k1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eh(Bo)}function j1(e,t){if(e==="click")return eh(t)}function P1(e,t){if(e==="input"||e==="change")return eh(t)}function L1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:L1;function qo(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Xf.call(t,s)||!hn(e[s],t[s]))return!1}return!0}function Sy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wy(e,t){var n=Sy(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Sy(n)}}function WE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?WE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function JE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ic(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ic(e.document)}return t}function xm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var U1=_i&&"documentMode"in document&&11>=document.documentMode,jr=null,nd=null,To=null,id=!1;function xy(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;id||jr==null||jr!==ic(i)||(i=jr,"selectionStart"in i&&xm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),To&&qo(To,i)||(To=i,i=Tc(nd,"onSelect"),0<i.length&&(t=new Jc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=jr)))}function js(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},lf={},tT={};_i&&(tT=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function ur(e){if(lf[e])return lf[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tT)return lf[e]=t[n];return e}var eT=ur("animationend"),nT=ur("animationiteration"),iT=ur("animationstart"),z1=ur("transitionrun"),B1=ur("transitionstart"),q1=ur("transitioncancel"),sT=ur("transitionend"),rT=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function Dn(e,t){rT.set(e,t),or(t,[e])}var Ry=new WeakMap;function _n(e,t){if(typeof e=="object"&&e!==null){var n=Ry.get(e);return n!==void 0?n:(t={value:e,source:t,stack:hy(t)},Ry.set(e,t),t)}return{value:e,source:t,stack:hy(t)}}var dn=[],Lr=0,Rm=0;function nh(){for(var e=Lr,t=Rm=Lr=0;t<e;){var n=dn[t];dn[t++]=null;var i=dn[t];dn[t++]=null;var s=dn[t];dn[t++]=null;var r=dn[t];if(dn[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&aT(n,s,r)}}function ih(e,t,n,i){dn[Lr++]=e,dn[Lr++]=t,dn[Lr++]=n,dn[Lr++]=i,Rm|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Im(e,t,n,i){return ih(e,t,n,i),sc(e)}function Ra(e,t){return ih(e,null,null,t),sc(e)}function aT(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-on(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function sc(e){if(50<Do)throw Do=0,wd=null,Error(P(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ur={};function H1(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(e,t,n,i){return new H1(e,t,n,i)}function Cm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pi(e,t){var n=e.alternate;return n===null?(n=nn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function oT(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")Cm(e)&&(a=1);else if(typeof e=="string")a=Gx(e,n,Pn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Qf:return e=nn(31,n,t,s),e.elementType=Qf,e.lanes=r,e;case Dr:return Fs(n.children,s,r,t);case xE:a=8,s|=24;break;case Hf:return e=nn(12,n,t,s|2),e.elementType=Hf,e.lanes=r,e;case Ff:return e=nn(13,n,t,s),e.elementType=Ff,e.lanes=r,e;case Gf:return e=nn(19,n,t,s),e.elementType=Gf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vw:case li:a=10;break t;case RE:a=9;break t;case pm:a=11;break t;case gm:a=14;break t;case qi:a=16,i=null;break t}a=29,n=Error(P(130,e===null?"null":typeof e,"")),i=null}return t=nn(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function Fs(e,t,n,i){return e=nn(7,e,i,t),e.lanes=n,e}function uf(e,t,n){return e=nn(6,e,null,t),e.lanes=n,e}function cf(e,t,n){return t=nn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var zr=[],Br=0,rc=null,ac=0,pn=[],gn=0,Gs=null,ui=1,ci="";function Ls(e,t){zr[Br++]=ac,zr[Br++]=rc,rc=e,ac=t}function lT(e,t,n){pn[gn++]=ui,pn[gn++]=ci,pn[gn++]=Gs,Gs=e;var i=ui;e=ci;var s=32-on(i)-1;i&=~(1<<s),n+=1;var r=32-on(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ui=1<<32-on(t)+s|n<<s|i,ci=r+e}else ui=1<<r|n<<s|i,ci=e}function Nm(e){e.return!==null&&(Ls(e,1),lT(e,1,0))}function Dm(e){for(;e===rc;)rc=zr[--Br],zr[Br]=null,ac=zr[--Br],zr[Br]=null;for(;e===Gs;)Gs=pn[--gn],pn[gn]=null,ci=pn[--gn],pn[gn]=null,ui=pn[--gn],pn[gn]=null}var Ue=null,$t=null,Tt=!1,Qs=null,kn=!1,rd=Error(P(519));function Zs(e){var t=Error(P(418,""));throw Ho(_n(t,e)),rd}function Iy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Me]=e,t[$e]=i,n){case"dialog":ut("cancel",t),ut("close",t);break;case"iframe":case"object":case"embed":ut("load",t);break;case"video":case"audio":for(n=0;n<Qo.length;n++)ut(Qo[n],t);break;case"source":ut("error",t);break;case"img":case"image":case"link":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"input":ut("invalid",t),zE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),nc(t);break;case"select":ut("invalid",t);break;case"textarea":ut("invalid",t),qE(t,i.value,i.defaultValue,i.children),nc(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||H0(t.textContent,n)?(i.popover!=null&&(ut("beforetoggle",t),ut("toggle",t)),i.onScroll!=null&&ut("scroll",t),i.onScrollEnd!=null&&ut("scrollend",t),i.onClick!=null&&(t.onclick=hh),t=!0):t=!1,t||Zs(e)}function Cy(e){for(Ue=e.return;Ue;)switch(Ue.tag){case 5:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Ue=Ue.return}}function no(e){if(e!==Ue)return!1;if(!Tt)return Cy(e),Tt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Dd(e.type,e.memoizedProps)),n=!n),n&&$t&&Zs(e),Cy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){$t=In(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}$t=null}}else t===27?(t=$t,Rs(e.type)?(e=Md,Md=null,$t=e):$t=t):$t=Ue?In(e.stateNode.nextSibling):null;return!0}function vl(){$t=Ue=null,Tt=!1}function Ny(){var e=Qs;return e!==null&&(Ke===null?Ke=e:Ke.push.apply(Ke,e),Qs=null),e}function Ho(e){Qs===null?Qs=[e]:Qs.push(e)}var ad=$n(null),cr=null,hi=null;function Fi(e,t,n){Bt(ad,t._currentValue),t._currentValue=n}function gi(e){e._currentValue=ad.current,ve(ad)}function od(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ld(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),od(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(P(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),od(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function El(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=s.type;hn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===Wu.current){if(a=s.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push($o):e=[$o])}s=s.return}e!==null&&ld(t,e,n,i),t.flags|=262144}function oc(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ws(e){cr=e,hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ke(e){return uT(cr,e)}function mu(e,t){return cr===null&&Ws(e),uT(e,t)}function uT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},hi===null){if(e===null)throw Error(P(308));hi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hi=hi.next=t;return n}var F1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},G1=fe.unstable_scheduleCallback,Q1=fe.unstable_NormalPriority,ue={$$typeof:li,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Om(){return{controller:new F1,data:new Map,refCount:0}}function Tl(e){e.refCount--,e.refCount===0&&G1(Q1,function(){e.controller.abort()})}var bo=null,ud=0,oa=0,Yr=null;function K1(e,t){if(bo===null){var n=bo=[];ud=0,oa=ep(),Yr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return ud++,t.then(Dy,Dy),t}function Dy(){if(--ud===0&&bo!==null){Yr!==null&&(Yr.status="fulfilled");var e=bo;bo=null,oa=0,Yr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Y1(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Oy=tt.S;tt.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&K1(e,t),Oy!==null&&Oy(e,t)};var Ks=$n(null);function Vm(){var e=Ks.current;return e!==null?e:Vt.pooledCache}function Mu(e,t){t===null?Bt(Ks,Ks.current):Bt(Ks,t.pool)}function cT(){var e=Vm();return e===null?null:{parent:ue._currentValue,pool:e}}var bl=Error(P(460)),hT=Error(P(474)),sh=Error(P(542)),cd={then:function(){}};function Vy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pu(){}function fT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(pu,pu),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ky(e),e;default:if(typeof t.status=="string")t.then(pu,pu);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(P(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ky(e),e}throw Ao=t,bl}}var Ao=null;function My(){if(Ao===null)throw Error(P(459));var e=Ao;return Ao=null,e}function ky(e){if(e===bl||e===sh)throw Error(P(483))}var Hi=!1;function Mm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rs(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Rt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=sc(e),aT(e,null,n),t}return ih(e,i,t,n),sc(e)}function So(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ME(e,n)}}function hf(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var fd=!1;function wo(){if(fd){var e=Yr;if(e!==null)throw e}}function xo(e,t,n,i){fd=!1;var s=e.updateQueue;Hi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?r=f:a.next=f,a=u;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,m=f=u=null,l=r;do{var p=l.lane&-536870913,_=p!==l.lane;if(_?(gt&p)===p:(i&p)===p){p!==0&&p===oa&&(fd=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var C=e,O=l;p=t;var V=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){g=C.call(V,g,p);break t}g=C;break t;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,p=typeof C=="function"?C.call(V,g,p):C,p==null)break t;g=Lt({},g,p);break t;case 2:Hi=!0}}p=l.callback,p!==null&&(e.flags|=64,_&&(e.flags|=8192),_=s.callbacks,_===null?s.callbacks=[p]:_.push(p))}else _={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=_,u=g):m=m.next=_,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=m,r===null&&(s.shared.lanes=0),vs|=a,e.lanes=a,e.memoizedState=g}}function dT(e,t){if(typeof e!="function")throw Error(P(191,e));e.call(t)}function mT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)dT(n[e],t)}var la=$n(null),lc=$n(0);function jy(e,t){e=Ti,Bt(lc,e),Bt(la,t),Ti=e|t.baseLanes}function dd(){Bt(lc,Ti),Bt(la,la.current)}function km(){Ti=lc.current,ve(la),ve(lc)}var ys=0,lt=null,Nt=null,re=null,uc=!1,$r=!1,Js=!1,cc=0,Fo=0,Xr=null,$1=0;function Jt(){throw Error(P(321))}function jm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hn(e[n],t[n]))return!1;return!0}function Pm(e,t,n,i,s,r){return ys=r,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tt.H=e===null||e.memoizedState===null?GT:QT,Js=!1,r=n(i,s),Js=!1,$r&&(r=gT(t,n,i,s)),pT(e),r}function pT(e){tt.H=hc;var t=Nt!==null&&Nt.next!==null;if(ys=0,re=Nt=lt=null,uc=!1,Fo=0,Xr=null,t)throw Error(P(300));e===null||_e||(e=e.dependencies,e!==null&&oc(e)&&(_e=!0))}function gT(e,t,n,i){lt=e;var s=0;do{if($r&&(Xr=null),Fo=0,$r=!1,25<=s)throw Error(P(301));if(s+=1,re=Nt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}tt.H=nx,r=t(n,i)}while($r);return r}function X1(){var e=tt.H,t=e.useState()[0];return t=typeof t.then=="function"?Al(t):t,e=e.useState()[0],(Nt!==null?Nt.memoizedState:null)!==e&&(lt.flags|=1024),t}function Lm(){var e=cc!==0;return cc=0,e}function Um(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function zm(e){if(uc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}uc=!1}ys=0,re=Nt=lt=null,$r=!1,Fo=cc=0,Xr=null}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?lt.memoizedState=re=e:re=re.next=e,re}function le(){if(Nt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var t=re===null?lt.memoizedState:re.next;if(t!==null)re=t,Nt=e;else{if(e===null)throw lt.alternate===null?Error(P(467)):Error(P(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},re===null?lt.memoizedState=re=e:re=re.next=e}return re}function Bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(e){var t=Fo;return Fo+=1,Xr===null&&(Xr=[]),e=fT(Xr,e,t),t=lt,(re===null?t.memoizedState:re.next)===null&&(t=t.alternate,tt.H=t===null||t.memoizedState===null?GT:QT),e}function rh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Al(e);if(e.$$typeof===li)return ke(e)}throw Error(P(438,String(e)))}function qm(e){var t=null,n=lt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=lt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Bm(),lt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Mw;return t.index++,n}function vi(e,t){return typeof t=="function"?t(e):t}function ku(e){var t=le();return Hm(t,Nt,e)}function Hm(e,t,n){var i=e.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,f=t,m=!1;do{var g=f.lane&-536870913;if(g!==f.lane?(gt&g)===g:(ys&g)===g){var p=f.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),g===oa&&(m=!0);else if((ys&p)===p){f=f.next,p===oa&&(m=!0);continue}else g={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,lt.lanes|=p,vs|=p;g=f.action,Js&&n(r,g),r=f.hasEagerState?f.eagerState:n(r,g)}else p={lane:g,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,lt.lanes|=g,vs|=g;f=f.next}while(f!==null&&f!==t);if(u===null?a=r:u.next=l,!hn(r,e.memoizedState)&&(_e=!0,m&&(n=Yr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ff(e){var t=le(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);hn(r,t.memoizedState)||(_e=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function yT(e,t,n){var i=lt,s=le(),r=Tt;if(r){if(n===void 0)throw Error(P(407));n=n()}else n=t();var a=!hn((Nt||s).memoizedState,n);a&&(s.memoizedState=n,_e=!0),s=s.queue;var l=ET.bind(null,i,s,e);if(Sl(2048,8,l,[e]),s.getSnapshot!==t||a||re!==null&&re.memoizedState.tag&1){if(i.flags|=2048,ua(9,ah(),vT.bind(null,i,s,n,t),null),Vt===null)throw Error(P(349));r||ys&124||_T(i,t,n)}return n}function _T(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=lt.updateQueue,t===null?(t=Bm(),lt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vT(e,t,n,i){t.value=n,t.getSnapshot=i,TT(t)&&bT(e)}function ET(e,t,n){return n(function(){TT(t)&&bT(e)})}function TT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hn(e,n)}catch{return!0}}function bT(e){var t=Ra(e,2);t!==null&&un(t,e,2)}function md(e){var t=Ge();if(typeof e=="function"){var n=e;if(e=n(),Js){Wi(!0);try{n()}finally{Wi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t}function AT(e,t,n,i){return e.baseState=n,Hm(e,Nt,typeof i=="function"?i:vi)}function Z1(e,t,n,i,s){if(oh(e))throw Error(P(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};tt.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,ST(t,r)):(r.next=n.next,t.pending=n.next=r)}}function ST(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=tt.T,a={};tt.T=a;try{var l=n(s,i),u=tt.S;u!==null&&u(a,l),Py(e,t,l)}catch(f){pd(e,t,f)}finally{tt.T=r}}else try{r=n(s,i),Py(e,t,r)}catch(f){pd(e,t,f)}}function Py(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ly(e,t,i)},function(i){return pd(e,t,i)}):Ly(e,t,n)}function Ly(e,t,n){t.status="fulfilled",t.value=n,wT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ST(e,n)))}function pd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,wT(t),t=t.next;while(t!==i)}e.action=null}function wT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function xT(e,t){return t}function Uy(e,t){if(Tt){var n=Vt.formState;if(n!==null){t:{var i=lt;if(Tt){if($t){e:{for(var s=$t,r=kn;s.nodeType!==8;){if(!r){s=null;break e}if(s=In(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){$t=In(s.nextSibling),i=s.data==="F!";break t}}Zs(i)}i=!1}i&&(t=n[0])}}return n=Ge(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xT,lastRenderedState:t},n.queue=i,n=qT.bind(null,lt,i),i.dispatch=n,i=md(!1),r=Km.bind(null,lt,!1,i.queue),i=Ge(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=Z1.bind(null,lt,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function zy(e){var t=le();return RT(t,Nt,e)}function RT(e,t,n){if(t=Hm(e,t,xT)[0],e=ku(vi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Al(t)}catch(a){throw a===bl?sh:a}else i=t;t=le();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(lt.flags|=2048,ua(9,ah(),W1.bind(null,s,n),null)),[i,r,e]}function W1(e,t){e.action=t}function By(e){var t=le(),n=Nt;if(n!==null)return RT(t,n,e);le(),t=t.memoizedState,n=le();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ua(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=lt.updateQueue,t===null&&(t=Bm(),lt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ah(){return{destroy:void 0,resource:void 0}}function IT(){return le().memoizedState}function ju(e,t,n,i){var s=Ge();i=i===void 0?null:i,lt.flags|=e,s.memoizedState=ua(1|t,ah(),n,i)}function Sl(e,t,n,i){var s=le();i=i===void 0?null:i;var r=s.memoizedState.inst;Nt!==null&&i!==null&&jm(i,Nt.memoizedState.deps)?s.memoizedState=ua(t,r,n,i):(lt.flags|=e,s.memoizedState=ua(1|t,r,n,i))}function qy(e,t){ju(8390656,8,e,t)}function CT(e,t){Sl(2048,8,e,t)}function NT(e,t){return Sl(4,2,e,t)}function DT(e,t){return Sl(4,4,e,t)}function OT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function VT(e,t,n){n=n!=null?n.concat([e]):null,Sl(4,4,OT.bind(null,t,e),n)}function Fm(){}function MT(e,t){var n=le();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&jm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function kT(e,t){var n=le();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&jm(t,i[1]))return i[0];if(i=e(),Js){Wi(!0);try{e()}finally{Wi(!1)}}return n.memoizedState=[i,t],i}function Gm(e,t,n){return n===void 0||ys&1073741824?e.memoizedState=t:(e.memoizedState=n,e=w0(),lt.lanes|=e,vs|=e,n)}function jT(e,t,n,i){return hn(n,t)?n:la.current!==null?(e=Gm(e,n,i),hn(e,t)||(_e=!0),e):ys&42?(e=w0(),lt.lanes|=e,vs|=e,t):(_e=!0,e.memoizedState=n)}function PT(e,t,n,i,s){var r=bt.p;bt.p=r!==0&&8>r?r:8;var a=tt.T,l={};tt.T=l,Km(e,!1,t,n);try{var u=s(),f=tt.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=Y1(u,i);Ro(e,t,m,ln(e))}else Ro(e,t,i,ln(e))}catch(g){Ro(e,t,{then:function(){},status:"rejected",reason:g},ln())}finally{bt.p=r,tt.T=a}}function J1(){}function gd(e,t,n,i){if(e.tag!==5)throw Error(P(476));var s=LT(e).queue;PT(e,s,t,Hs,n===null?J1:function(){return UT(e),n(i)})}function LT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Hs,baseState:Hs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:Hs},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function UT(e){var t=LT(e).next.queue;Ro(e,t,{},ln())}function Qm(){return ke($o)}function zT(){return le().memoizedState}function BT(){return le().memoizedState}function tx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ln();e=ss(n);var i=rs(t,e,n);i!==null&&(un(i,t,n),So(i,t,n)),t={cache:Om()},e.payload=t;return}t=t.return}}function ex(e,t,n){var i=ln();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},oh(e)?HT(t,n):(n=Im(e,t,n,i),n!==null&&(un(n,e,i),FT(n,t,i)))}function qT(e,t,n){var i=ln();Ro(e,t,n,i)}function Ro(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(oh(e))HT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,a))return ih(e,t,s,0),Vt===null&&nh(),!1}catch{}finally{}if(n=Im(e,t,s,i),n!==null)return un(n,e,i),FT(n,t,i),!0}return!1}function Km(e,t,n,i){if(i={lane:2,revertLane:ep(),action:i,hasEagerState:!1,eagerState:null,next:null},oh(e)){if(t)throw Error(P(479))}else t=Im(e,n,i,2),t!==null&&un(t,e,2)}function oh(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function HT(e,t){$r=uc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function FT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ME(e,n)}}var hc={readContext:ke,use:rh,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},GT={readContext:ke,use:rh,useCallback:function(e,t){return Ge().memoizedState=[e,t===void 0?null:t],e},useContext:ke,useEffect:qy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ju(4194308,4,OT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ju(4194308,4,e,t)},useInsertionEffect:function(e,t){ju(4,2,e,t)},useMemo:function(e,t){var n=Ge();t=t===void 0?null:t;var i=e();if(Js){Wi(!0);try{e()}finally{Wi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ge();if(n!==void 0){var s=n(t);if(Js){Wi(!0);try{n(t)}finally{Wi(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=ex.bind(null,lt,e),[i.memoizedState,e]},useRef:function(e){var t=Ge();return e={current:e},t.memoizedState=e},useState:function(e){e=md(e);var t=e.queue,n=qT.bind(null,lt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Fm,useDeferredValue:function(e,t){var n=Ge();return Gm(n,e,t)},useTransition:function(){var e=md(!1);return e=PT.bind(null,lt,e.queue,!0,!1),Ge().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=lt,s=Ge();if(Tt){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Vt===null)throw Error(P(349));gt&124||_T(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,qy(ET.bind(null,i,r,e),[e]),i.flags|=2048,ua(9,ah(),vT.bind(null,i,r,n,t),null),n},useId:function(){var e=Ge(),t=Vt.identifierPrefix;if(Tt){var n=ci,i=ui;n=(i&~(1<<32-on(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=cc++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=$1++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Qm,useFormState:Uy,useActionState:Uy,useOptimistic:function(e){var t=Ge();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Km.bind(null,lt,!0,n),n.dispatch=t,[e,t]},useMemoCache:qm,useCacheRefresh:function(){return Ge().memoizedState=tx.bind(null,lt)}},QT={readContext:ke,use:rh,useCallback:MT,useContext:ke,useEffect:CT,useImperativeHandle:VT,useInsertionEffect:NT,useLayoutEffect:DT,useMemo:kT,useReducer:ku,useRef:IT,useState:function(){return ku(vi)},useDebugValue:Fm,useDeferredValue:function(e,t){var n=le();return jT(n,Nt.memoizedState,e,t)},useTransition:function(){var e=ku(vi)[0],t=le().memoizedState;return[typeof e=="boolean"?e:Al(e),t]},useSyncExternalStore:yT,useId:zT,useHostTransitionStatus:Qm,useFormState:zy,useActionState:zy,useOptimistic:function(e,t){var n=le();return AT(n,Nt,e,t)},useMemoCache:qm,useCacheRefresh:BT},nx={readContext:ke,use:rh,useCallback:MT,useContext:ke,useEffect:CT,useImperativeHandle:VT,useInsertionEffect:NT,useLayoutEffect:DT,useMemo:kT,useReducer:ff,useRef:IT,useState:function(){return ff(vi)},useDebugValue:Fm,useDeferredValue:function(e,t){var n=le();return Nt===null?Gm(n,e,t):jT(n,Nt.memoizedState,e,t)},useTransition:function(){var e=ff(vi)[0],t=le().memoizedState;return[typeof e=="boolean"?e:Al(e),t]},useSyncExternalStore:yT,useId:zT,useHostTransitionStatus:Qm,useFormState:By,useActionState:By,useOptimistic:function(e,t){var n=le();return Nt!==null?AT(n,Nt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qm,useCacheRefresh:BT},Zr=null,Go=0;function gu(e){var t=Go;return Go+=1,Zr===null&&(Zr=[]),fT(Zr,e,t)}function io(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yu(e,t){throw t.$$typeof===Ow?Error(P(525)):(e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Hy(e){var t=e._init;return t(e._payload)}function KT(e){function t(S,E){if(e){var x=S.deletions;x===null?(S.deletions=[E],S.flags|=16):x.push(E)}}function n(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function i(S){for(var E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function s(S,E){return S=pi(S,E),S.index=0,S.sibling=null,S}function r(S,E,x){return S.index=x,e?(x=S.alternate,x!==null?(x=x.index,x<E?(S.flags|=67108866,E):x):(S.flags|=67108866,E)):(S.flags|=1048576,E)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,E,x,D){return E===null||E.tag!==6?(E=uf(x,S.mode,D),E.return=S,E):(E=s(E,x),E.return=S,E)}function u(S,E,x,D){var L=x.type;return L===Dr?m(S,E,x.props.children,D,x.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===qi&&Hy(L)===E.type)?(E=s(E,x.props),io(E,x),E.return=S,E):(E=Vu(x.type,x.key,x.props,null,S.mode,D),io(E,x),E.return=S,E)}function f(S,E,x,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=cf(x,S.mode,D),E.return=S,E):(E=s(E,x.children||[]),E.return=S,E)}function m(S,E,x,D,L){return E===null||E.tag!==7?(E=Fs(x,S.mode,D,L),E.return=S,E):(E=s(E,x),E.return=S,E)}function g(S,E,x){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=uf(""+E,S.mode,x),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uu:return x=Vu(E.type,E.key,E.props,null,S.mode,x),io(x,E),x.return=S,x;case oo:return E=cf(E,S.mode,x),E.return=S,E;case qi:var D=E._init;return E=D(E._payload),g(S,E,x)}if(lo(E)||Ja(E))return E=Fs(E,S.mode,x,null),E.return=S,E;if(typeof E.then=="function")return g(S,gu(E),x);if(E.$$typeof===li)return g(S,mu(S,E),x);yu(S,E)}return null}function p(S,E,x,D){var L=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return L!==null?null:l(S,E,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uu:return x.key===L?u(S,E,x,D):null;case oo:return x.key===L?f(S,E,x,D):null;case qi:return L=x._init,x=L(x._payload),p(S,E,x,D)}if(lo(x)||Ja(x))return L!==null?null:m(S,E,x,D,null);if(typeof x.then=="function")return p(S,E,gu(x),D);if(x.$$typeof===li)return p(S,E,mu(S,x),D);yu(S,x)}return null}function _(S,E,x,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(x)||null,l(E,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case uu:return S=S.get(D.key===null?x:D.key)||null,u(E,S,D,L);case oo:return S=S.get(D.key===null?x:D.key)||null,f(E,S,D,L);case qi:var H=D._init;return D=H(D._payload),_(S,E,x,D,L)}if(lo(D)||Ja(D))return S=S.get(x)||null,m(E,S,D,L,null);if(typeof D.then=="function")return _(S,E,x,gu(D),L);if(D.$$typeof===li)return _(S,E,x,mu(E,D),L);yu(E,D)}return null}function C(S,E,x,D){for(var L=null,H=null,T=E,v=E=0,b=null;T!==null&&v<x.length;v++){T.index>v?(b=T,T=null):b=T.sibling;var A=p(S,T,x[v],D);if(A===null){T===null&&(T=b);break}e&&T&&A.alternate===null&&t(S,T),E=r(A,E,v),H===null?L=A:H.sibling=A,H=A,T=b}if(v===x.length)return n(S,T),Tt&&Ls(S,v),L;if(T===null){for(;v<x.length;v++)T=g(S,x[v],D),T!==null&&(E=r(T,E,v),H===null?L=T:H.sibling=T,H=T);return Tt&&Ls(S,v),L}for(T=i(T);v<x.length;v++)b=_(T,S,v,x[v],D),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?v:b.key),E=r(b,E,v),H===null?L=b:H.sibling=b,H=b);return e&&T.forEach(function(R){return t(S,R)}),Tt&&Ls(S,v),L}function O(S,E,x,D){if(x==null)throw Error(P(151));for(var L=null,H=null,T=E,v=E=0,b=null,A=x.next();T!==null&&!A.done;v++,A=x.next()){T.index>v?(b=T,T=null):b=T.sibling;var R=p(S,T,A.value,D);if(R===null){T===null&&(T=b);break}e&&T&&R.alternate===null&&t(S,T),E=r(R,E,v),H===null?L=R:H.sibling=R,H=R,T=b}if(A.done)return n(S,T),Tt&&Ls(S,v),L;if(T===null){for(;!A.done;v++,A=x.next())A=g(S,A.value,D),A!==null&&(E=r(A,E,v),H===null?L=A:H.sibling=A,H=A);return Tt&&Ls(S,v),L}for(T=i(T);!A.done;v++,A=x.next())A=_(T,S,v,A.value,D),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?v:A.key),E=r(A,E,v),H===null?L=A:H.sibling=A,H=A);return e&&T.forEach(function(I){return t(S,I)}),Tt&&Ls(S,v),L}function V(S,E,x,D){if(typeof x=="object"&&x!==null&&x.type===Dr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case uu:t:{for(var L=x.key;E!==null;){if(E.key===L){if(L=x.type,L===Dr){if(E.tag===7){n(S,E.sibling),D=s(E,x.props.children),D.return=S,S=D;break t}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===qi&&Hy(L)===E.type){n(S,E.sibling),D=s(E,x.props),io(D,x),D.return=S,S=D;break t}n(S,E);break}else t(S,E);E=E.sibling}x.type===Dr?(D=Fs(x.props.children,S.mode,D,x.key),D.return=S,S=D):(D=Vu(x.type,x.key,x.props,null,S.mode,D),io(D,x),D.return=S,S=D)}return a(S);case oo:t:{for(L=x.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(S,E.sibling),D=s(E,x.children||[]),D.return=S,S=D;break t}else{n(S,E);break}else t(S,E);E=E.sibling}D=cf(x,S.mode,D),D.return=S,S=D}return a(S);case qi:return L=x._init,x=L(x._payload),V(S,E,x,D)}if(lo(x))return C(S,E,x,D);if(Ja(x)){if(L=Ja(x),typeof L!="function")throw Error(P(150));return x=L.call(x),O(S,E,x,D)}if(typeof x.then=="function")return V(S,E,gu(x),D);if(x.$$typeof===li)return V(S,E,mu(S,x),D);yu(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,E!==null&&E.tag===6?(n(S,E.sibling),D=s(E,x),D.return=S,S=D):(n(S,E),D=uf(x,S.mode,D),D.return=S,S=D),a(S)):n(S,E)}return function(S,E,x,D){try{Go=0;var L=V(S,E,x,D);return Zr=null,L}catch(T){if(T===bl||T===sh)throw T;var H=nn(29,T,null,S.mode);return H.lanes=D,H.return=S,H}finally{}}}var ca=KT(!0),YT=KT(!1),Tn=$n(null),Un=null;function Gi(e){var t=e.alternate;Bt(ce,ce.current&1),Bt(Tn,e),Un===null&&(t===null||la.current!==null||t.memoizedState!==null)&&(Un=e)}function $T(e){if(e.tag===22){if(Bt(ce,ce.current),Bt(Tn,e),Un===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Un=e)}}else Qi()}function Qi(){Bt(ce,ce.current),Bt(Tn,Tn.current)}function fi(e){ve(Tn),Un===e&&(Un=null),ve(ce)}var ce=$n(0);function fc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Vd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function df(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Lt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ln(),s=ss(i);s.payload=t,n!=null&&(s.callback=n),t=rs(e,s,i),t!==null&&(un(t,e,i),So(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ln(),s=ss(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=rs(e,s,i),t!==null&&(un(t,e,i),So(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ln(),i=ss(n);i.tag=2,t!=null&&(i.callback=t),t=rs(e,i,n),t!==null&&(un(t,e,n),So(t,e,n))}};function Fy(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!qo(n,i)||!qo(s,r):!0}function Gy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&yd.enqueueReplaceState(t,t.state,null)}function tr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Lt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var dc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function XT(e){dc(e)}function ZT(e){console.error(e)}function WT(e){dc(e)}function mc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Qy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function _d(e,t,n){return n=ss(n),n.tag=3,n.payload={element:null},n.callback=function(){mc(e,t)},n}function JT(e){return e=ss(e),e.tag=3,e}function t0(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Qy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Qy(t,n,i),typeof s!="function"&&(as===null?as=new Set([this]):as.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function ix(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&El(t,n,s,!0),n=Tn.current,n!==null){switch(n.tag){case 13:return Un===null?xd():n.alternate===null&&Xt===0&&(Xt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===cd?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Sf(e,i,s)),!1;case 22:return n.flags|=65536,i===cd?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Sf(e,i,s)),!1}throw Error(P(435,n.tag))}return Sf(e,i,s),xd(),!1}if(Tt)return t=Tn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==rd&&(e=Error(P(422),{cause:i}),Ho(_n(e,n)))):(i!==rd&&(t=Error(P(423),{cause:i}),Ho(_n(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=_n(i,n),s=_d(e.stateNode,i,s),hf(e,s),Xt!==4&&(Xt=2)),!1;var r=Error(P(520),{cause:i});if(r=_n(r,n),No===null?No=[r]:No.push(r),Xt!==4&&(Xt=2),t===null)return!0;i=_n(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=_d(n.stateNode,i,e),hf(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=JT(s),t0(s,e,n,i),hf(n,s),!1}n=n.return}while(n!==null);return!1}var e0=Error(P(461)),_e=!1;function Ae(e,t,n,i){t.child=e===null?YT(t,null,n,i):ca(t,e.child,n,i)}function Ky(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Ws(t),i=Pm(e,t,n,a,r,s),l=Lm(),e!==null&&!_e?(Um(e,t,s),Ei(e,t,s)):(Tt&&l&&Nm(t),t.flags|=1,Ae(e,t,i,s),t.child)}function Yy(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!Cm(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,n0(e,t,r,i,s)):(e=Vu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Ym(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(a,i)&&e.ref===t.ref)return Ei(e,t,s)}return t.flags|=1,e=pi(r,i),e.ref=t.ref,e.return=t,t.child=e}function n0(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(qo(r,i)&&e.ref===t.ref)if(_e=!1,t.pendingProps=i=r,Ym(e,s))e.flags&131072&&(_e=!0);else return t.lanes=e.lanes,Ei(e,t,s)}return vd(e,t,n,i,s)}function i0(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return $y(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Mu(t,r!==null?r.cachePool:null),r!==null?jy(t,r):dd(),$T(t);else return t.lanes=t.childLanes=536870912,$y(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(Mu(t,r.cachePool),jy(t,r),Qi(),t.memoizedState=null):(e!==null&&Mu(t,null),dd(),Qi());return Ae(e,t,s,n),t.child}function $y(e,t,n,i){var s=Vm();return s=s===null?null:{parent:ue._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Mu(t,null),dd(),$T(t),e!==null&&El(e,t,i,!0),null}function Pu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function vd(e,t,n,i,s){return Ws(t),n=Pm(e,t,n,i,void 0,s),i=Lm(),e!==null&&!_e?(Um(e,t,s),Ei(e,t,s)):(Tt&&i&&Nm(t),t.flags|=1,Ae(e,t,n,s),t.child)}function Xy(e,t,n,i,s,r){return Ws(t),t.updateQueue=null,n=gT(t,i,n,s),pT(e),i=Lm(),e!==null&&!_e?(Um(e,t,r),Ei(e,t,r)):(Tt&&i&&Nm(t),t.flags|=1,Ae(e,t,n,r),t.child)}function Zy(e,t,n,i,s){if(Ws(t),t.stateNode===null){var r=Ur,a=n.contextType;typeof a=="object"&&a!==null&&(r=ke(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=yd,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},Mm(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?ke(a):Ur,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(df(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&yd.enqueueReplaceState(r,r.state,null),xo(t,i,r,s),wo(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=tr(n,l);r.props=u;var f=r.context,m=n.contextType;a=Ur,typeof m=="object"&&m!==null&&(a=ke(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||f!==a)&&Gy(t,r,i,a),Hi=!1;var p=t.memoizedState;r.state=p,xo(t,i,r,s),wo(),f=t.memoizedState,l||p!==f||Hi?(typeof g=="function"&&(df(t,n,g,i),f=t.memoizedState),(u=Hi||Fy(t,n,u,i,p,f,a))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),r.props=i,r.state=f,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,hd(e,t),a=t.memoizedProps,m=tr(n,a),r.props=m,g=t.pendingProps,p=r.context,f=n.contextType,u=Ur,typeof f=="object"&&f!==null&&(u=ke(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||p!==u)&&Gy(t,r,i,u),Hi=!1,p=t.memoizedState,r.state=p,xo(t,i,r,s),wo();var _=t.memoizedState;a!==g||p!==_||Hi||e!==null&&e.dependencies!==null&&oc(e.dependencies)?(typeof l=="function"&&(df(t,n,l,i),_=t.memoizedState),(m=Hi||Fy(t,n,m,i,p,_,u)||e!==null&&e.dependencies!==null&&oc(e.dependencies))?(f||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),r.props=i,r.state=_,r.context=u,i=m):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Pu(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=ca(t,e.child,null,s),t.child=ca(t,null,n,s)):Ae(e,t,n,s),t.memoizedState=r.state,e=t.child):e=Ei(e,t,s),e}function Wy(e,t,n,i){return vl(),t.flags|=256,Ae(e,t,n,i),t.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pf(e){return{baseLanes:e,cachePool:cT()}}function gf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=En),e}function s0(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(ce.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(Tt){if(s?Gi(t):Qi(),Tt){var l=$t,u;if(u=l){t:{for(u=l,l=kn;u.nodeType!==8;){if(!l){l=null;break t}if(u=In(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Gs!==null?{id:ui,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},u=nn(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Ue=t,$t=null,u=!0):u=!1}u||Zs(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Vd(l)?t.lanes=32:t.lanes=536870912,null;fi(t)}return l=i.children,i=i.fallback,s?(Qi(),s=t.mode,l=pc({mode:"hidden",children:l},s),i=Fs(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=pf(n),s.childLanes=gf(e,a,n),t.memoizedState=mf,i):(Gi(t),Ed(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(Gi(t),t.flags&=-257,t=yf(e,t,n)):t.memoizedState!==null?(Qi(),t.child=e.child,t.flags|=128,t=null):(Qi(),s=i.fallback,l=t.mode,i=pc({mode:"visible",children:i.children},l),s=Fs(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,ca(t,e.child,null,n),i=t.child,i.memoizedState=pf(n),i.childLanes=gf(e,a,n),t.memoizedState=mf,t=s);else if(Gi(t),Vd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var f=a.dgst;a=f,i=Error(P(419)),i.stack="",i.digest=a,Ho({value:i,source:null,stack:null}),t=yf(e,t,n)}else if(_e||El(e,t,n,!1),a=(n&e.childLanes)!==0,_e||a){if(a=Vt,a!==null&&(i=n&-n,i=i&42?1:_m(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Ra(e,i),un(a,e,i),e0;l.data==="$?"||xd(),t=yf(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,$t=In(l.nextSibling),Ue=t,Tt=!0,Qs=null,kn=!1,e!==null&&(pn[gn++]=ui,pn[gn++]=ci,pn[gn++]=Gs,ui=e.id,ci=e.overflow,Gs=t),t=Ed(t,i.children),t.flags|=4096);return t}return s?(Qi(),s=i.fallback,l=t.mode,u=e.child,f=u.sibling,i=pi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?s=pi(f,s):(s=Fs(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=pf(n):(u=l.cachePool,u!==null?(f=ue._currentValue,u=u.parent!==f?{parent:f,pool:f}:u):u=cT(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=gf(e,a,n),t.memoizedState=mf,i):(Gi(t),n=e.child,e=n.sibling,n=pi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Ed(e,t){return t=pc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function pc(e,t){return e=nn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yf(e,t,n){return ca(t,e.child,null,n),e=Ed(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),od(e.return,t,n)}function _f(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function r0(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Ae(e,t,i.children,n),i=ce.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jy(e,n,t);else if(e.tag===19)Jy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Bt(ce,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&fc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),_f(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&fc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}_f(t,!0,n,null,r);break;case"together":_f(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ei(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vs|=t.lanes,!(n&t.childLanes))if(e!==null){if(El(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=pi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ym(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&oc(e)))}function sx(e,t,n){switch(t.tag){case 3:Ju(t,t.stateNode.containerInfo),Fi(t,ue,e.memoizedState.cache),vl();break;case 27:case 5:$f(t);break;case 4:Ju(t,t.stateNode.containerInfo);break;case 10:Fi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Gi(t),t.flags|=128,null):n&t.child.childLanes?s0(e,t,n):(Gi(t),e=Ei(e,t,n),e!==null?e.sibling:null);Gi(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(El(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return r0(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bt(ce,ce.current),i)break;return null;case 22:case 23:return t.lanes=0,i0(e,t,n);case 24:Fi(t,ue,e.memoizedState.cache)}return Ei(e,t,n)}function a0(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)_e=!0;else{if(!Ym(e,n)&&!(t.flags&128))return _e=!1,sx(e,t,n);_e=!!(e.flags&131072)}else _e=!1,Tt&&t.flags&1048576&&lT(t,ac,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")Cm(i)?(e=tr(i,e),t.tag=1,t=Zy(null,t,i,e,n)):(t.tag=0,t=vd(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===pm){t.tag=11,t=Ky(null,t,i,e,n);break t}else if(s===gm){t.tag=14,t=Yy(null,t,i,e,n);break t}}throw t=Kf(i)||i,Error(P(306,t,""))}}return t;case 0:return vd(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=tr(i,t.pendingProps),Zy(e,t,i,s,n);case 3:t:{if(Ju(t,t.stateNode.containerInfo),e===null)throw Error(P(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,hd(e,t),xo(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Fi(t,ue,i),i!==r.cache&&ld(t,[ue],n,!0),wo(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Wy(e,t,i,n);break t}else if(i!==s){s=_n(Error(P(424)),t),Ho(s),t=Wy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=In(e.firstChild),Ue=t,Tt=!0,Qs=null,kn=!0,n=YT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(vl(),i===s){t=Ei(e,t,n);break t}Ae(e,t,i,n)}t=t.child}return t;case 26:return Pu(e,t),e===null?(n=g_(t.type,null,t.pendingProps,null))?t.memoizedState=n:Tt||(n=t.type,e=t.pendingProps,i=bc(is.current).createElement(n),i[Me]=t,i[$e]=e,Ie(i,n,e),ge(i),t.stateNode=i):t.memoizedState=g_(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $f(t),e===null&&Tt&&(i=t.stateNode=Q0(t.type,t.pendingProps,is.current),Ue=t,kn=!0,s=$t,Rs(t.type)?(Md=s,$t=In(i.firstChild)):$t=s),Ae(e,t,t.pendingProps.children,n),Pu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Tt&&((s=i=$t)&&(i=Ox(i,t.type,t.pendingProps,kn),i!==null?(t.stateNode=i,Ue=t,$t=In(i.firstChild),kn=!1,s=!0):s=!1),s||Zs(t)),$f(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,Dd(s,r)?i=null:a!==null&&Dd(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=Pm(e,t,X1,null,null,n),$o._currentValue=s),Pu(e,t),Ae(e,t,i,n),t.child;case 6:return e===null&&Tt&&((e=n=$t)&&(n=Vx(n,t.pendingProps,kn),n!==null?(t.stateNode=n,Ue=t,$t=null,e=!0):e=!1),e||Zs(t)),null;case 13:return s0(e,t,n);case 4:return Ju(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ca(t,null,i,n):Ae(e,t,i,n),t.child;case 11:return Ky(e,t,t.type,t.pendingProps,n);case 7:return Ae(e,t,t.pendingProps,n),t.child;case 8:return Ae(e,t,t.pendingProps.children,n),t.child;case 12:return Ae(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Fi(t,t.type,i.value),Ae(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Ws(t),s=ke(s),i=i(s),t.flags|=1,Ae(e,t,i,n),t.child;case 14:return Yy(e,t,t.type,t.pendingProps,n);case 15:return n0(e,t,t.type,t.pendingProps,n);case 19:return r0(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=pc(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=pi(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return i0(e,t,n);case 24:return Ws(t),i=ke(ue),e===null?(s=Vm(),s===null&&(s=Vt,r=Om(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},Mm(t),Fi(t,ue,s)):(e.lanes&n&&(hd(e,t),xo(t,null,null,n),wo()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Fi(t,ue,i)):(i=r.cache,Fi(t,ue,i),i!==s.cache&&ld(t,[ue],n,!0))),Ae(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(P(156,t.tag))}function ri(e){e.flags|=4}function t_(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!$0(t)){if(t=Tn.current,t!==null&&((gt&4194048)===gt?Un!==null:(gt&62914560)!==gt&&!(gt&536870912)||t!==Un))throw Ao=cd,hT;e.flags|=8192}}function _u(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?OE():536870912,e.lanes|=t,ha|=t)}function so(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function rx(e,t,n){var i=t.pendingProps;switch(Dm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return Ht(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),gi(ue),sa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(no(t)?ri(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ny())),Ht(t),null;case 26:return n=t.memoizedState,e===null?(ri(t),n!==null?(Ht(t),t_(t,n)):(Ht(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ri(t),Ht(t),t_(t,n)):(Ht(t),t.flags&=-16777217):(e.memoizedProps!==i&&ri(t),Ht(t),t.flags&=-16777217),null;case 27:tc(t),n=is.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ri(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Ht(t),null}e=Pn.current,no(t)?Iy(t):(e=Q0(s,i,n),t.stateNode=e,ri(t))}return Ht(t),null;case 5:if(tc(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ri(t);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Ht(t),null}if(e=Pn.current,no(t))Iy(t);else{switch(s=bc(is.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Me]=t,e[$e]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(Ie(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ri(t)}}return Ht(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ri(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(P(166));if(e=is.current,no(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=Ue,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Me]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||H0(e.nodeValue,n)),e||Zs(t)}else e=bc(e).createTextNode(i),e[Me]=t,t.stateNode=e}return Ht(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=no(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(P(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[Me]=t}else vl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ht(t),s=!1}else s=Ny(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(fi(t),t):(fi(t),null)}if(fi(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),_u(t,t.updateQueue),Ht(t),null;case 4:return sa(),e===null&&np(t.stateNode.containerInfo),Ht(t),null;case 10:return gi(t.type),Ht(t),null;case 19:if(ve(ce),s=t.memoizedState,s===null)return Ht(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)so(s,!1);else{if(Xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=fc(e),r!==null){for(t.flags|=128,so(s,!1),e=r.updateQueue,t.updateQueue=e,_u(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)oT(n,e),n=n.sibling;return Bt(ce,ce.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ln()>yc&&(t.flags|=128,i=!0,so(s,!1),t.lanes=4194304)}else{if(!i)if(e=fc(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,_u(t,e),so(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Tt)return Ht(t),null}else 2*Ln()-s.renderingStartTime>yc&&n!==536870912&&(t.flags|=128,i=!0,so(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ln(),t.sibling=null,e=ce.current,Bt(ce,i?e&1|2:e&1),t):(Ht(t),null);case 22:case 23:return fi(t),km(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),n=t.updateQueue,n!==null&&_u(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ve(Ks),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),gi(ue),Ht(t),null;case 25:return null;case 30:return null}throw Error(P(156,t.tag))}function ax(e,t){switch(Dm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gi(ue),sa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return tc(t),null;case 13:if(fi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));vl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(ce),null;case 4:return sa(),null;case 10:return gi(t.type),null;case 22:case 23:return fi(t),km(),e!==null&&ve(Ks),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return gi(ue),null;case 25:return null;default:return null}}function o0(e,t){switch(Dm(t),t.tag){case 3:gi(ue),sa();break;case 26:case 27:case 5:tc(t);break;case 4:sa();break;case 13:fi(t);break;case 19:ve(ce);break;case 10:gi(t.type);break;case 22:case 23:fi(t),km(),e!==null&&ve(Ks);break;case 24:gi(ue)}}function wl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Ot(t,t.return,l)}}function _s(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,f=l;try{f()}catch(m){Ot(s,u,m)}}}i=i.next}while(i!==r)}}catch(m){Ot(t,t.return,m)}}function l0(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{mT(t,n)}catch(i){Ot(e,e.return,i)}}}function u0(e,t,n){n.props=tr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ot(e,t,i)}}function Io(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){Ot(e,t,s)}}function jn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Ot(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Ot(e,t,s)}else n.current=null}function c0(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Ot(e,e.return,s)}}function vf(e,t,n){try{var i=e.stateNode;Rx(i,e.type,n,t),i[$e]=t}catch(s){Ot(e,e.return,s)}}function h0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Rs(e.type)||e.tag===4}function Ef(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||h0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Td(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hh));else if(i!==4&&(i===27&&Rs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Td(e,t,n),e=e.sibling;e!==null;)Td(e,t,n),e=e.sibling}function gc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Rs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(gc(e,t,n),e=e.sibling;e!==null;)gc(e,t,n),e=e.sibling}function f0(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ie(t,i,n),t[Me]=e,t[$e]=n}catch(r){Ot(e,e.return,r)}}var oi=!1,ee=!1,Tf=!1,e_=typeof WeakSet=="function"?WeakSet:Set,pe=null;function ox(e,t){if(e=e.containerInfo,Cd=xc,e=JE(e),xm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,f=0,m=0,g=e,p=null;e:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)p=g,g=_;for(;;){if(g===e)break e;if(p===n&&++f===s&&(l=a),p===r&&++m===i&&(u=a),(_=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nd={focusedElem:e,selectionRange:n},xc=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){switch(t=pe,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var C=tr(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(C,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(O){Ot(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Od(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(P(163))}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}}function d0(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ui(e,n),i&4&&wl(5,n);break;case 1:if(Ui(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Ot(n,n.return,a)}else{var s=tr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ot(n,n.return,a)}}i&64&&l0(n),i&512&&Io(n,n.return);break;case 3:if(Ui(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{mT(e,t)}catch(a){Ot(n,n.return,a)}}break;case 27:t===null&&i&4&&f0(n);case 26:case 5:Ui(e,n),t===null&&i&4&&c0(n),i&512&&Io(n,n.return);break;case 12:Ui(e,n);break;case 13:Ui(e,n),i&4&&g0(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=gx.bind(null,n),Mx(e,n))));break;case 22:if(i=n.memoizedState!==null||oi,!i){t=t!==null&&t.memoizedState!==null||ee,s=oi;var r=ee;oi=i,(ee=t)&&!r?Bi(e,n,(n.subtreeFlags&8772)!==0):Ui(e,n),oi=s,ee=r}break;case 30:break;default:Ui(e,n)}}function m0(e){var t=e.alternate;t!==null&&(e.alternate=null,m0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Em(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ut=null,Qe=!1;function ai(e,t,n){for(n=n.child;n!==null;)p0(e,t,n),n=n.sibling}function p0(e,t,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 26:ee||jn(n,t),ai(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ee||jn(n,t);var i=Ut,s=Qe;Rs(n.type)&&(Ut=n.stateNode,Qe=!1),ai(e,t,n),Oo(n.stateNode),Ut=i,Qe=s;break;case 5:ee||jn(n,t);case 6:if(i=Ut,s=Qe,Ut=null,ai(e,t,n),Ut=i,Qe=s,Ut!==null)if(Qe)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(n.stateNode)}catch(r){Ot(n,t,r)}else try{Ut.removeChild(n.stateNode)}catch(r){Ot(n,t,r)}break;case 18:Ut!==null&&(Qe?(e=Ut,d_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Wo(e)):d_(Ut,n.stateNode));break;case 4:i=Ut,s=Qe,Ut=n.stateNode.containerInfo,Qe=!0,ai(e,t,n),Ut=i,Qe=s;break;case 0:case 11:case 14:case 15:ee||_s(2,n,t),ee||_s(4,n,t),ai(e,t,n);break;case 1:ee||(jn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&u0(n,t,i)),ai(e,t,n);break;case 21:ai(e,t,n);break;case 22:ee=(i=ee)||n.memoizedState!==null,ai(e,t,n),ee=i;break;default:ai(e,t,n)}}function g0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wo(e)}catch(n){Ot(t,t.return,n)}}function lx(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new e_),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new e_),t;default:throw Error(P(435,e.tag))}}function bf(e,t){var n=lx(e);t.forEach(function(i){var s=yx.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Je(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(Rs(l.type)){Ut=l.stateNode,Qe=!1;break t}break;case 5:Ut=l.stateNode,Qe=!1;break t;case 3:case 4:Ut=l.stateNode.containerInfo,Qe=!0;break t}l=l.return}if(Ut===null)throw Error(P(160));p0(r,a,s),Ut=null,Qe=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)y0(t,e),t=t.sibling}var xn=null;function y0(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Je(t,e),tn(e),i&4&&(_s(3,e,e.return),wl(3,e),_s(5,e,e.return));break;case 1:Je(t,e),tn(e),i&512&&(ee||n===null||jn(n,n.return)),i&64&&oi&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=xn;if(Je(t,e),tn(e),i&512&&(ee||n===null||jn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[yl]||r[Me]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Ie(r,i,n),r[Me]=e,ge(r),i=r;break t;case"link":var a=__("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),Ie(r,i,n),s.head.appendChild(r);break;case"meta":if(a=__("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),Ie(r,i,n),s.head.appendChild(r);break;default:throw Error(P(468,i))}r[Me]=e,ge(r),i=r}e.stateNode=i}else v_(s,e.type,e.stateNode);else e.stateNode=y_(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?v_(s,e.type,e.stateNode):y_(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&vf(e,e.memoizedProps,n.memoizedProps)}break;case 27:Je(t,e),tn(e),i&512&&(ee||n===null||jn(n,n.return)),n!==null&&i&4&&vf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Je(t,e),tn(e),i&512&&(ee||n===null||jn(n,n.return)),e.flags&32){s=e.stateNode;try{aa(s,"")}catch(_){Ot(e,e.return,_)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,vf(e,s,n!==null?n.memoizedProps:s)),i&1024&&(Tf=!0);break;case 6:if(Je(t,e),tn(e),i&4){if(e.stateNode===null)throw Error(P(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Ot(e,e.return,_)}}break;case 3:if(zu=null,s=xn,xn=Ac(t.containerInfo),Je(t,e),xn=s,tn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Wo(t.containerInfo)}catch(_){Ot(e,e.return,_)}Tf&&(Tf=!1,_0(e));break;case 4:i=xn,xn=Ac(e.stateNode.containerInfo),Je(t,e),tn(e),xn=i;break;case 12:Je(t,e),tn(e);break;case 13:Je(t,e),tn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Jm=Ln()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,bf(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=oi,m=ee;if(oi=f||s,ee=m||u,Je(t,e),ee=m,oi=f,tn(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||oi||ee||Us(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,p=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(_){Ot(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){Ot(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,bf(e,n))));break;case 19:Je(t,e),tn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,bf(e,i)));break;case 30:break;case 21:break;default:Je(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(h0(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var s=n.stateNode,r=Ef(e);gc(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(aa(a,""),n.flags&=-33);var l=Ef(e);gc(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,f=Ef(e);Td(e,f,u);break;default:throw Error(P(161))}}catch(m){Ot(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ui(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)d0(e,t.alternate,t),t=t.sibling}function Us(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:_s(4,t,t.return),Us(t);break;case 1:jn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&u0(t,t.return,n),Us(t);break;case 27:Oo(t.stateNode);case 26:case 5:jn(t,t.return),Us(t);break;case 22:t.memoizedState===null&&Us(t);break;case 30:Us(t);break;default:Us(t)}e=e.sibling}}function Bi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Bi(s,r,n),wl(4,r);break;case 1:if(Bi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(f){Ot(i,i.return,f)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)dT(u[s],l)}catch(f){Ot(i,i.return,f)}}n&&a&64&&l0(r),Io(r,r.return);break;case 27:f0(r);case 26:case 5:Bi(s,r,n),n&&i===null&&a&4&&c0(r),Io(r,r.return);break;case 12:Bi(s,r,n);break;case 13:Bi(s,r,n),n&&a&4&&g0(s,r);break;case 22:r.memoizedState===null&&Bi(s,r,n),Io(r,r.return);break;case 30:break;default:Bi(s,r,n)}t=t.sibling}}function $m(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Tl(n))}function Xm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tl(e))}function Vn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)v0(e,t,n,i),t=t.sibling}function v0(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Vn(e,t,n,i),s&2048&&wl(9,t);break;case 1:Vn(e,t,n,i);break;case 3:Vn(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tl(e)));break;case 12:if(s&2048){Vn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Ot(t,t.return,u)}}else Vn(e,t,n,i);break;case 13:Vn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?Vn(e,t,n,i):Co(e,t):r._visibility&2?Vn(e,t,n,i):(r._visibility|=2,wr(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&$m(a,t);break;case 24:Vn(e,t,n,i),s&2048&&Xm(t.alternate,t);break;default:Vn(e,t,n,i)}}function wr(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,f=a.flags;switch(a.tag){case 0:case 11:case 15:wr(r,a,l,u,s),wl(8,a);break;case 23:break;case 22:var m=a.stateNode;a.memoizedState!==null?m._visibility&2?wr(r,a,l,u,s):Co(r,a):(m._visibility|=2,wr(r,a,l,u,s)),s&&f&2048&&$m(a.alternate,a);break;case 24:wr(r,a,l,u,s),s&&f&2048&&Xm(a.alternate,a);break;default:wr(r,a,l,u,s)}t=t.sibling}}function Co(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:Co(n,i),s&2048&&$m(i.alternate,i);break;case 24:Co(n,i),s&2048&&Xm(i.alternate,i);break;default:Co(n,i)}t=t.sibling}}var co=8192;function Tr(e){if(e.subtreeFlags&co)for(e=e.child;e!==null;)E0(e),e=e.sibling}function E0(e){switch(e.tag){case 26:Tr(e),e.flags&co&&e.memoizedState!==null&&Kx(xn,e.memoizedState,e.memoizedProps);break;case 5:Tr(e);break;case 3:case 4:var t=xn;xn=Ac(e.stateNode.containerInfo),Tr(e),xn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=co,co=16777216,Tr(e),co=t):Tr(e));break;default:Tr(e)}}function T0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ro(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];pe=i,A0(i,e)}T0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)b0(e),e=e.sibling}function b0(e){switch(e.tag){case 0:case 11:case 15:ro(e),e.flags&2048&&_s(9,e,e.return);break;case 3:ro(e);break;case 12:ro(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Lu(e)):ro(e);break;default:ro(e)}}function Lu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];pe=i,A0(i,e)}T0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:_s(8,t,t.return),Lu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Lu(t));break;default:Lu(t)}e=e.sibling}}function A0(e,t){for(;pe!==null;){var n=pe;switch(n.tag){case 0:case 11:case 15:_s(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Tl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,pe=i;else t:for(n=e;pe!==null;){i=pe;var s=i.sibling,r=i.return;if(m0(i),i===n){pe=null;break t}if(s!==null){s.return=r,pe=s;break t}pe=r}}}var ux={getCacheForType:function(e){var t=ke(ue),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},cx=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Vt=null,ct=null,gt=0,wt=0,en=null,ts=!1,Ia=!1,Zm=!1,Ti=0,Xt=0,vs=0,Ys=0,Wm=0,En=0,ha=0,No=null,Ke=null,bd=!1,Jm=0,yc=1/0,_c=null,as=null,we=0,os=null,fa=null,Wr=0,Ad=0,Sd=null,S0=null,Do=0,wd=null;function ln(){if(Rt&2&&gt!==0)return gt&-gt;if(tt.T!==null){var e=oa;return e!==0?e:ep()}return kE()}function w0(){En===0&&(En=!(gt&536870912)||Tt?DE():536870912);var e=Tn.current;return e!==null&&(e.flags|=32),En}function un(e,t,n){(e===Vt&&(wt===2||wt===9)||e.cancelPendingCommit!==null)&&(da(e,0),es(e,gt,En,!1)),gl(e,n),(!(Rt&2)||e!==Vt)&&(e===Vt&&(!(Rt&2)&&(Ys|=n),Xt===4&&es(e,gt,En,!1)),Xn(e))}function x0(e,t,n){if(Rt&6)throw Error(P(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||pl(e,t),s=i?dx(e,t):Af(e,t,!0),r=i;do{if(s===0){Ia&&!i&&es(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!hx(n)){s=Af(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=No;var u=l.current.memoizedState.isDehydrated;if(u&&(da(l,a).flags|=256),a=Af(l,a,!1),a!==2){if(Zm&&!u){l.errorRecoveryDisabledLanes|=r,Ys|=r,s=4;break t}r=Ke,Ke=s,r!==null&&(Ke===null?Ke=r:Ke.push.apply(Ke,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){da(e,0),es(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(P(345));case 4:if((t&4194048)!==t)break;case 6:es(i,t,En,!ts);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(P(329))}if((t&62914560)===t&&(s=Jm+300-Ln(),10<s)){if(es(i,t,En,!ts),Wc(i,0,!0)!==0)break t;i.timeoutHandle=G0(n_.bind(null,i,n,Ke,_c,bd,t,En,Ys,ha,ts,r,2,-0,0),s);break t}n_(i,n,Ke,_c,bd,t,En,Ys,ha,ts,r,0,-0,0)}}break}while(!0);Xn(e)}function n_(e,t,n,i,s,r,a,l,u,f,m,g,p,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Yo={stylesheets:null,count:0,unsuspend:Qx},E0(t),g=Yx(),g!==null)){e.cancelPendingCommit=g(s_.bind(null,e,t,r,n,i,s,a,l,u,m,1,p,_)),es(e,r,a,!f);return}s_(e,t,r,n,i,s,a,l,u)}function hx(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!hn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function es(e,t,n,i){t&=~Wm,t&=~Ys,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-on(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&VE(e,n,t)}function lh(){return Rt&6?!0:(xl(0),!1)}function tp(){if(ct!==null){if(wt===0)var e=ct.return;else e=ct,hi=cr=null,zm(e),Zr=null,Go=0,e=ct;for(;e!==null;)o0(e.alternate,e),e=e.return;ct=null}}function da(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Cx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),tp(),Vt=e,ct=n=pi(e.current,null),gt=t,wt=0,en=null,ts=!1,Ia=pl(e,t),Zm=!1,ha=En=Wm=Ys=vs=Xt=0,Ke=No=null,bd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-on(i),r=1<<s;t|=e[s],i&=~r}return Ti=t,nh(),n}function R0(e,t){lt=null,tt.H=hc,t===bl||t===sh?(t=My(),wt=3):t===hT?(t=My(),wt=4):wt=t===e0?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,en=t,ct===null&&(Xt=1,mc(e,_n(t,e.current)))}function I0(){var e=tt.H;return tt.H=hc,e===null?hc:e}function C0(){var e=tt.A;return tt.A=ux,e}function xd(){Xt=4,ts||(gt&4194048)!==gt&&Tn.current!==null||(Ia=!0),!(vs&134217727)&&!(Ys&134217727)||Vt===null||es(Vt,gt,En,!1)}function Af(e,t,n){var i=Rt;Rt|=2;var s=I0(),r=C0();(Vt!==e||gt!==t)&&(_c=null,da(e,t)),t=!1;var a=Xt;t:do try{if(wt!==0&&ct!==null){var l=ct,u=en;switch(wt){case 8:tp(),a=6;break t;case 3:case 2:case 9:case 6:Tn.current===null&&(t=!0);var f=wt;if(wt=0,en=null,qr(e,l,u,f),n&&Ia){a=0;break t}break;default:f=wt,wt=0,en=null,qr(e,l,u,f)}}fx(),a=Xt;break}catch(m){R0(e,m)}while(!0);return t&&e.shellSuspendCounter++,hi=cr=null,Rt=i,tt.H=s,tt.A=r,ct===null&&(Vt=null,gt=0,nh()),a}function fx(){for(;ct!==null;)N0(ct)}function dx(e,t){var n=Rt;Rt|=2;var i=I0(),s=C0();Vt!==e||gt!==t?(_c=null,yc=Ln()+500,da(e,t)):Ia=pl(e,t);t:do try{if(wt!==0&&ct!==null){t=ct;var r=en;e:switch(wt){case 1:wt=0,en=null,qr(e,t,r,1);break;case 2:case 9:if(Vy(r)){wt=0,en=null,i_(t);break}t=function(){wt!==2&&wt!==9||Vt!==e||(wt=7),Xn(e)},r.then(t,t);break t;case 3:wt=7;break t;case 4:wt=5;break t;case 7:Vy(r)?(wt=0,en=null,i_(t)):(wt=0,en=null,qr(e,t,r,7));break;case 5:var a=null;switch(ct.tag){case 26:a=ct.memoizedState;case 5:case 27:var l=ct;if(!a||$0(a)){wt=0,en=null;var u=l.sibling;if(u!==null)ct=u;else{var f=l.return;f!==null?(ct=f,uh(f)):ct=null}break e}}wt=0,en=null,qr(e,t,r,5);break;case 6:wt=0,en=null,qr(e,t,r,6);break;case 8:tp(),Xt=6;break t;default:throw Error(P(462))}}mx();break}catch(m){R0(e,m)}while(!0);return hi=cr=null,tt.H=i,tt.A=s,Rt=n,ct!==null?0:(Vt=null,gt=0,nh(),Xt)}function mx(){for(;ct!==null&&!jw();)N0(ct)}function N0(e){var t=a0(e.alternate,e,Ti);e.memoizedProps=e.pendingProps,t===null?uh(e):ct=t}function i_(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Xy(n,t,t.pendingProps,t.type,void 0,gt);break;case 11:t=Xy(n,t,t.pendingProps,t.type.render,t.ref,gt);break;case 5:zm(t);default:o0(n,t),t=ct=oT(t,Ti),t=a0(n,t,Ti)}e.memoizedProps=e.pendingProps,t===null?uh(e):ct=t}function qr(e,t,n,i){hi=cr=null,zm(t),Zr=null,Go=0;var s=t.return;try{if(ix(e,s,t,n,gt)){Xt=1,mc(e,_n(n,e.current)),ct=null;return}}catch(r){if(s!==null)throw ct=s,r;Xt=1,mc(e,_n(n,e.current)),ct=null;return}t.flags&32768?(Tt||i===1?e=!0:Ia||gt&536870912?e=!1:(ts=e=!0,(i===2||i===9||i===3||i===6)&&(i=Tn.current,i!==null&&i.tag===13&&(i.flags|=16384))),D0(t,e)):uh(t)}function uh(e){var t=e;do{if(t.flags&32768){D0(t,ts);return}e=t.return;var n=rx(t.alternate,t,Ti);if(n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);Xt===0&&(Xt=5)}function D0(e,t){do{var n=ax(e.alternate,e);if(n!==null){n.flags&=32767,ct=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ct=e;return}ct=e=n}while(e!==null);Xt=6,ct=null}function s_(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do ch();while(we!==0);if(Rt&6)throw Error(P(327));if(t!==null){if(t===e.current)throw Error(P(177));if(r=t.lanes|t.childLanes,r|=Rm,Qw(e,n,r,a,l,u),e===Vt&&(ct=Vt=null,gt=0),fa=t,os=e,Wr=n,Ad=r,Sd=s,S0=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,_x(ec,function(){return j0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=tt.T,tt.T=null,s=bt.p,bt.p=2,a=Rt,Rt|=4;try{ox(e,t,n)}finally{Rt=a,bt.p=s,tt.T=i}}we=1,O0(),V0(),M0()}}function O0(){if(we===1){we=0;var e=os,t=fa,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=tt.T,tt.T=null;var i=bt.p;bt.p=2;var s=Rt;Rt|=4;try{y0(t,e);var r=Nd,a=JE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&WE(l.ownerDocument.documentElement,l)){if(u!==null&&xm(l)){var f=u.start,m=u.end;if(m===void 0&&(m=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(m,l.value.length);else{var g=l.ownerDocument||document,p=g&&g.defaultView||window;if(p.getSelection){var _=p.getSelection(),C=l.textContent.length,O=Math.min(u.start,C),V=u.end===void 0?O:Math.min(u.end,C);!_.extend&&O>V&&(a=V,V=O,O=a);var S=wy(l,O),E=wy(l,V);if(S&&E&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var x=g.createRange();x.setStart(S.node,S.offset),_.removeAllRanges(),O>V?(_.addRange(x),_.extend(E.node,E.offset)):(x.setEnd(E.node,E.offset),_.addRange(x))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}xc=!!Cd,Nd=Cd=null}finally{Rt=s,bt.p=i,tt.T=n}}e.current=t,we=2}}function V0(){if(we===2){we=0;var e=os,t=fa,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=tt.T,tt.T=null;var i=bt.p;bt.p=2;var s=Rt;Rt|=4;try{d0(e,t.alternate,t)}finally{Rt=s,bt.p=i,tt.T=n}}we=3}}function M0(){if(we===4||we===3){we=0,Pw();var e=os,t=fa,n=Wr,i=S0;t.subtreeFlags&10256||t.flags&10256?we=5:(we=0,fa=os=null,k0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(as=null),vm(n),t=t.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=tt.T,s=bt.p,bt.p=2,tt.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{tt.T=t,bt.p=s}}Wr&3&&ch(),Xn(e),s=e.pendingLanes,n&4194090&&s&42?e===wd?Do++:(Do=0,wd=e):Do=0,xl(0)}}function k0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tl(t)))}function ch(e){return O0(),V0(),M0(),j0()}function j0(){if(we!==5)return!1;var e=os,t=Ad;Ad=0;var n=vm(Wr),i=tt.T,s=bt.p;try{bt.p=32>n?32:n,tt.T=null,n=Sd,Sd=null;var r=os,a=Wr;if(we=0,fa=os=null,Wr=0,Rt&6)throw Error(P(331));var l=Rt;if(Rt|=4,b0(r.current),v0(r,r.current,a,n),Rt=l,xl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(ml,r)}catch{}return!0}finally{bt.p=s,tt.T=i,k0(e,t)}}function r_(e,t,n){t=_n(n,t),t=_d(e.stateNode,t,2),e=rs(e,t,2),e!==null&&(gl(e,2),Xn(e))}function Ot(e,t,n){if(e.tag===3)r_(e,e,n);else for(;t!==null;){if(t.tag===3){r_(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(as===null||!as.has(i))){e=_n(n,e),n=JT(2),i=rs(t,n,2),i!==null&&(t0(n,i,t,e),gl(i,2),Xn(i));break}}t=t.return}}function Sf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new cx;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Zm=!0,s.add(n),e=px.bind(null,e,t,n),t.then(e,e))}function px(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(gt&n)===n&&(Xt===4||Xt===3&&(gt&62914560)===gt&&300>Ln()-Jm?!(Rt&2)&&da(e,0):Wm|=n,ha===gt&&(ha=0)),Xn(e)}function P0(e,t){t===0&&(t=OE()),e=Ra(e,t),e!==null&&(gl(e,t),Xn(e))}function gx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),P0(e,n)}function yx(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(t),P0(e,n)}function _x(e,t){return ym(e,t)}var vc=null,xr=null,Rd=!1,Ec=!1,wf=!1,$s=0;function Xn(e){e!==xr&&e.next===null&&(xr===null?vc=xr=e:xr=xr.next=e),Ec=!0,Rd||(Rd=!0,Ex())}function xl(e,t){if(!wf&&Ec){wf=!0;do for(var n=!1,i=vc;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-on(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,a_(i,r))}else r=gt,r=Wc(i,i===Vt?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||pl(i,r)||(n=!0,a_(i,r));i=i.next}while(n);wf=!1}}function vx(){L0()}function L0(){Ec=Rd=!1;var e=0;$s!==0&&(Ix()&&(e=$s),$s=0);for(var t=Ln(),n=null,i=vc;i!==null;){var s=i.next,r=U0(i,t);r===0?(i.next=null,n===null?vc=s:n.next=s,s===null&&(xr=n)):(n=i,(e!==0||r&3)&&(Ec=!0)),i=s}xl(e)}function U0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-on(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=Gw(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=Vt,n=gt,n=Wc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(wt===2||wt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Xh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||pl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Xh(i),vm(n)){case 2:case 8:n=CE;break;case 32:n=ec;break;case 268435456:n=NE;break;default:n=ec}return i=z0.bind(null,e),n=ym(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Xh(i),e.callbackPriority=2,e.callbackNode=null,2}function z0(e,t){if(we!==0&&we!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ch()&&e.callbackNode!==n)return null;var i=gt;return i=Wc(e,e===Vt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(x0(e,i,t),U0(e,Ln()),e.callbackNode!=null&&e.callbackNode===n?z0.bind(null,e):null)}function a_(e,t){if(ch())return null;x0(e,t,!0)}function Ex(){Nx(function(){Rt&6?ym(IE,vx):L0()})}function ep(){return $s===0&&($s=DE()),$s}function o_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nu(""+e)}function l_(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Tx(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=o_((s[$e]||null).action),a=i.submitter;a&&(t=(t=a[$e]||null)?o_(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Jc("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if($s!==0){var u=a?l_(s,a):new FormData(s);gd(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?l_(s,a):new FormData(s),gd(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var xf=0;xf<sd.length;xf++){var Rf=sd[xf],bx=Rf.toLowerCase(),Ax=Rf[0].toUpperCase()+Rf.slice(1);Dn(bx,"on"+Ax)}Dn(eT,"onAnimationEnd");Dn(nT,"onAnimationIteration");Dn(iT,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(z1,"onTransitionRun");Dn(B1,"onTransitionStart");Dn(q1,"onTransitionCancel");Dn(sT,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qo));function B0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=f;try{r(s)}catch(m){dc(m)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=f;try{r(s)}catch(m){dc(m)}s.currentTarget=null,r=u}}}}function ut(e,t){var n=t[Zf];n===void 0&&(n=t[Zf]=new Set);var i=e+"__bubble";n.has(i)||(q0(t,e,2,!1),n.add(i))}function If(e,t,n){var i=0;t&&(i|=4),q0(n,e,i,t)}var vu="_reactListening"+Math.random().toString(36).slice(2);function np(e){if(!e[vu]){e[vu]=!0,jE.forEach(function(n){n!=="selectionchange"&&(Sx.has(n)||If(n,!1,e),If(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vu]||(t[vu]=!0,If("selectionchange",!1,t))}}function q0(e,t,n,i){switch(tb(t)){case 2:var s=Zx;break;case 8:s=Wx;break;default:s=ap}n=s.bind(null,t,n,e),s=void 0,!ed||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Cf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=Vr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}FE(function(){var f=r,m=bm(n),g=[];t:{var p=rT.get(e);if(p!==void 0){var _=Jc,C=e;switch(e){case"keypress":if(Ou(n)===0)break t;case"keydown":case"keyup":_=_1;break;case"focusin":C="focus",_=rf;break;case"focusout":C="blur",_=rf;break;case"beforeblur":case"afterblur":_=rf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=T1;break;case eT:case nT:case iT:_=u1;break;case sT:_=A1;break;case"scroll":case"scrollend":_=s1;break;case"wheel":_=w1;break;case"copy":case"cut":case"paste":_=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=yy;break;case"toggle":case"beforetoggle":_=R1}var O=(t&4)!==0,V=!O&&(e==="scroll"||e==="scrollend"),S=O?p!==null?p+"Capture":null:p;O=[];for(var E=f,x;E!==null;){var D=E;if(x=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||x===null||S===null||(D=zo(E,S),D!=null&&O.push(Ko(E,D,x))),V)break;E=E.return}0<O.length&&(p=new _(p,C,null,n,m),g.push({event:p,listeners:O}))}}if(!(t&7)){t:{if(p=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",p&&n!==td&&(C=n.relatedTarget||n.fromElement)&&(Vr(C)||C[wa]))break t;if((_||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=f,C=C?Vr(C):null,C!==null&&(V=dl(C),O=C.tag,C!==V||O!==5&&O!==27&&O!==6)&&(C=null)):(_=null,C=f),_!==C)){if(O=py,D="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(O=yy,D="onPointerLeave",S="onPointerEnter",E="pointer"),V=_==null?p:uo(_),x=C==null?p:uo(C),p=new O(D,E+"leave",_,n,m),p.target=V,p.relatedTarget=x,D=null,Vr(m)===f&&(O=new O(S,E+"enter",C,n,m),O.target=x,O.relatedTarget=V,D=O),V=D,_&&C)e:{for(O=_,S=C,E=0,x=O;x;x=br(x))E++;for(x=0,D=S;D;D=br(D))x++;for(;0<E-x;)O=br(O),E--;for(;0<x-E;)S=br(S),x--;for(;E--;){if(O===S||S!==null&&O===S.alternate)break e;O=br(O),S=br(S)}O=null}else O=null;_!==null&&u_(g,p,_,O,!1),C!==null&&V!==null&&u_(g,V,C,O,!0)}}t:{if(p=f?uo(f):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var L=Ty;else if(Ey(p))if(XE)L=P1;else{L=k1;var H=M1}else _=p.nodeName,!_||_.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&Tm(f.elementType)&&(L=Ty):L=j1;if(L&&(L=L(e,f))){$E(g,L,n,m);break t}H&&H(e,p,f),e==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&Jf(p,"number",p.value)}switch(H=f?uo(f):window,e){case"focusin":(Ey(H)||H.contentEditable==="true")&&(jr=H,nd=f,To=null);break;case"focusout":To=nd=jr=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,xy(g,n,m);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":xy(g,n,m)}var T;if(wm)t:{switch(e){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else kr?KE(e,n)&&(v="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(QE&&n.locale!=="ko"&&(kr||v!=="onCompositionStart"?v==="onCompositionEnd"&&kr&&(T=GE()):(Ji=m,Am="value"in Ji?Ji.value:Ji.textContent,kr=!0)),H=Tc(f,v),0<H.length&&(v=new gy(v,e,null,n,m),g.push({event:v,listeners:H}),T?v.data=T:(T=YE(n),T!==null&&(v.data=T)))),(T=C1?N1(e,n):D1(e,n))&&(v=Tc(f,"onBeforeInput"),0<v.length&&(H=new gy("onBeforeInput","beforeinput",null,n,m),g.push({event:H,listeners:v}),H.data=T)),Tx(g,e,f,n,m)}B0(g,t)})}function Ko(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Tc(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=zo(e,n),s!=null&&i.unshift(Ko(e,s,r)),s=zo(e,t),s!=null&&i.push(Ko(e,s,r))),e.tag===3)return i;e=e.return}return[]}function br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function u_(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,s?(f=zo(n,r),f!=null&&a.unshift(Ko(n,f,u))):s||(f=zo(n,r),f!=null&&a.push(Ko(n,f,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var wx=/\r\n?/g,xx=/\u0000|\uFFFD/g;function c_(e){return(typeof e=="string"?e:""+e).replace(wx,`
`).replace(xx,"")}function H0(e,t){return t=c_(t),c_(e)===t}function hh(){}function Ct(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||aa(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&aa(e,""+i);break;case"className":fu(e,"class",i);break;case"tabIndex":fu(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":fu(e,n,i);break;case"style":HE(e,i,r);break;case"data":if(t!=="object"){fu(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Nu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Ct(e,t,"name",s.name,s,null),Ct(e,t,"formEncType",s.formEncType,s,null),Ct(e,t,"formMethod",s.formMethod,s,null),Ct(e,t,"formTarget",s.formTarget,s,null)):(Ct(e,t,"encType",s.encType,s,null),Ct(e,t,"method",s.method,s,null),Ct(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Nu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=hh);break;case"onScroll":i!=null&&ut("scroll",e);break;case"onScrollEnd":i!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Nu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":ut("beforetoggle",e),ut("toggle",e),Cu(e,"popover",i);break;case"xlinkActuate":si(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":si(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":si(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":si(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":si(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":si(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":si(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":si(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":si(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Cu(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=n1.get(n)||n,Cu(e,n,i))}}function Id(e,t,n,i,s,r){switch(n){case"style":HE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));e.innerHTML=n}}break;case"children":typeof i=="string"?aa(e,i):(typeof i=="number"||typeof i=="bigint")&&aa(e,""+i);break;case"onScroll":i!=null&&ut("scroll",e);break;case"onScrollEnd":i!=null&&ut("scrollend",e);break;case"onClick":i!=null&&(e.onclick=hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[$e]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Cu(e,n,i)}}}function Ie(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:Ct(e,t,r,a,n,null)}}s&&Ct(e,t,"srcSet",n.srcSet,n,null),i&&Ct(e,t,"src",n.src,n,null);return;case"input":ut("invalid",e);var l=r=a=s=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":s=m;break;case"type":a=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,t));break;default:Ct(e,t,i,m,n,null)}}zE(e,r,l,u,f,a,s,!1),nc(e);return;case"select":ut("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ct(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Qr(e,!!i,t,!1):n!=null&&Qr(e,!!i,n,!0);return;case"textarea":ut("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:Ct(e,t,a,l,n,null)}qE(e,i,s,r),nc(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ct(e,t,u,i,n,null)}return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(i=0;i<Qo.length;i++)ut(Qo[i],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,t));default:Ct(e,t,f,i,n,null)}return;default:if(Tm(t)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Id(e,t,m,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ct(e,t,l,i,n,null))}function Rx(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,f=null,m=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Ct(e,t,_,null,i,g)}}for(var p in i){var _=i[p];if(g=n[p],i.hasOwnProperty(p)&&(_!=null||g!=null))switch(p){case"type":r=_;break;case"name":s=_;break;case"checked":f=_;break;case"defaultChecked":m=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,t));break;default:_!==g&&Ct(e,t,p,_,i,g)}}Wf(e,a,l,u,f,m,r,s);return;case"select":_=a=l=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Ct(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Ct(e,t,s,r,i,u)}t=l,n=a,i=_,p!=null?Qr(e,!!n,p,!1):!!i!=!!n&&(t!=null?Qr(e,!!n,t,!0):Qr(e,!!n,n?[]:"",!1));return;case"textarea":_=p=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ct(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(P(91));break;default:s!==r&&Ct(e,t,a,s,i,r)}BE(e,p,_);return;case"option":for(var C in n)if(p=n[C],n.hasOwnProperty(C)&&p!=null&&!i.hasOwnProperty(C))switch(C){case"selected":e.selected=!1;break;default:Ct(e,t,C,null,i,p)}for(u in i)if(p=i[u],_=n[u],i.hasOwnProperty(u)&&p!==_&&(p!=null||_!=null))switch(u){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ct(e,t,u,p,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)p=n[O],n.hasOwnProperty(O)&&p!=null&&!i.hasOwnProperty(O)&&Ct(e,t,O,null,i,p);for(f in i)if(p=i[f],_=n[f],i.hasOwnProperty(f)&&p!==_&&(p!=null||_!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(P(137,t));break;default:Ct(e,t,f,p,i,_)}return;default:if(Tm(t)){for(var V in n)p=n[V],n.hasOwnProperty(V)&&p!==void 0&&!i.hasOwnProperty(V)&&Id(e,t,V,void 0,i,p);for(m in i)p=i[m],_=n[m],!i.hasOwnProperty(m)||p===_||p===void 0&&_===void 0||Id(e,t,m,p,i,_);return}}for(var S in n)p=n[S],n.hasOwnProperty(S)&&p!=null&&!i.hasOwnProperty(S)&&Ct(e,t,S,null,i,p);for(g in i)p=i[g],_=n[g],!i.hasOwnProperty(g)||p===_||p==null&&_==null||Ct(e,t,g,p,i,_)}var Cd=null,Nd=null;function bc(e){return e.nodeType===9?e:e.ownerDocument}function h_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Dd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nf=null;function Ix(){var e=window.event;return e&&e.type==="popstate"?e===Nf?!1:(Nf=e,!0):(Nf=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(e){return f_.resolve(null).then(e).catch(Dx)}:G0;function Dx(e){setTimeout(function(){throw e})}function Rs(e){return e==="head"}function d_(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&Oo(a.documentElement),n&2&&Oo(a.body),n&4)for(n=a.head,Oo(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[yl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Wo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Wo(t)}function Od(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Od(n),Em(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ox(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[yl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=In(e.nextSibling),e===null)break}return null}function Vx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=In(e.nextSibling),e===null))return null;return e}function Vd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Mx(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function In(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Md=null;function m_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Q0(e,t,n){switch(t=bc(n),e){case"html":if(e=t.documentElement,!e)throw Error(P(452));return e;case"head":if(e=t.head,!e)throw Error(P(453));return e;case"body":if(e=t.body,!e)throw Error(P(454));return e;default:throw Error(P(451))}}function Oo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Em(e)}var bn=new Map,p_=new Set;function Ac(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xi=bt.d;bt.d={f:kx,r:jx,D:Px,C:Lx,L:Ux,m:zx,X:qx,S:Bx,M:Hx};function kx(){var e=xi.f(),t=lh();return e||t}function jx(e){var t=xa(e);t!==null&&t.tag===5&&t.type==="form"?UT(t):xi.r(e)}var Ca=typeof document>"u"?null:document;function K0(e,t,n){var i=Ca;if(i&&typeof t=="string"&&t){var s=yn(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),p_.has(s)||(p_.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),Ie(t,"link",e),ge(t),i.head.appendChild(t)))}}function Px(e){xi.D(e),K0("dns-prefetch",e,null)}function Lx(e,t){xi.C(e,t),K0("preconnect",e,t)}function Ux(e,t,n){xi.L(e,t,n);var i=Ca;if(i&&e&&t){var s='link[rel="preload"][as="'+yn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+yn(n.imageSizes)+'"]')):s+='[href="'+yn(e)+'"]';var r=s;switch(t){case"style":r=ma(e);break;case"script":r=Na(e)}bn.has(r)||(e=Lt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),bn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(Rl(r))||t==="script"&&i.querySelector(Il(r))||(t=i.createElement("link"),Ie(t,"link",e),ge(t),i.head.appendChild(t)))}}function zx(e,t){xi.m(e,t);var n=Ca;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+yn(i)+'"][href="'+yn(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Na(e)}if(!bn.has(r)&&(e=Lt({rel:"modulepreload",href:e},t),bn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Il(r)))return}i=n.createElement("link"),Ie(i,"link",e),ge(i),n.head.appendChild(i)}}}function Bx(e,t,n){xi.S(e,t,n);var i=Ca;if(i&&e){var s=Gr(i).hoistableStyles,r=ma(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Rl(r)))l.loading=5;else{e=Lt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=bn.get(r))&&ip(e,n);var u=a=i.createElement("link");ge(u),Ie(u,"link",e),u._p=new Promise(function(f,m){u.onload=f,u.onerror=m}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Uu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function qx(e,t){xi.X(e,t);var n=Ca;if(n&&e){var i=Gr(n).hoistableScripts,s=Na(e),r=i.get(s);r||(r=n.querySelector(Il(s)),r||(e=Lt({src:e,async:!0},t),(t=bn.get(s))&&sp(e,t),r=n.createElement("script"),ge(r),Ie(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Hx(e,t){xi.M(e,t);var n=Ca;if(n&&e){var i=Gr(n).hoistableScripts,s=Na(e),r=i.get(s);r||(r=n.querySelector(Il(s)),r||(e=Lt({src:e,async:!0,type:"module"},t),(t=bn.get(s))&&sp(e,t),r=n.createElement("script"),ge(r),Ie(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function g_(e,t,n,i){var s=(s=is.current)?Ac(s):null;if(!s)throw Error(P(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ma(n.href),n=Gr(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ma(n.href);var r=Gr(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(Rl(e)))&&!r._p&&(a.instance=r,a.state.loading=5),bn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},bn.set(e,n),r||Fx(s,e,n,a.state))),t&&i===null)throw Error(P(528,""));return a}if(t&&i!==null)throw Error(P(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Na(n),n=Gr(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,e))}}function ma(e){return'href="'+yn(e)+'"'}function Rl(e){return'link[rel="stylesheet"]['+e+"]"}function Y0(e){return Lt({},e,{"data-precedence":e.precedence,precedence:null})}function Fx(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ie(t,"link",n),ge(t),e.head.appendChild(t))}function Na(e){return'[src="'+yn(e)+'"]'}function Il(e){return"script[async]"+e}function y_(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+yn(n.href)+'"]');if(i)return t.instance=i,ge(i),i;var s=Lt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ge(i),Ie(i,"style",s),Uu(i,n.precedence,e),t.instance=i;case"stylesheet":s=ma(n.href);var r=e.querySelector(Rl(s));if(r)return t.state.loading|=4,t.instance=r,ge(r),r;i=Y0(n),(s=bn.get(s))&&ip(i,s),r=(e.ownerDocument||e).createElement("link"),ge(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ie(r,"link",i),t.state.loading|=4,Uu(r,n.precedence,e),t.instance=r;case"script":return r=Na(n.src),(s=e.querySelector(Il(r)))?(t.instance=s,ge(s),s):(i=n,(s=bn.get(r))&&(i=Lt({},n),sp(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),ge(s),Ie(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(P(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Uu(i,n.precedence,e));return t.instance}function Uu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ip(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var zu=null;function __(e,t,n){if(zu===null){var i=new Map,s=zu=new Map;s.set(n,i)}else s=zu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[yl]||r[Me]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function v_(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Gx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function $0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Yo=null;function Qx(){}function Kx(e,t,n){if(Yo===null)throw Error(P(475));var i=Yo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=ma(n.href),r=e.querySelector(Rl(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Sc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,ge(r);return}r=e.ownerDocument||e,n=Y0(n),(s=bn.get(s))&&ip(n,s),r=r.createElement("link"),ge(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Ie(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Sc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Yx(){if(Yo===null)throw Error(P(475));var e=Yo;return e.stylesheets&&e.count===0&&kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&kd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Sc(){if(this.count--,this.count===0){if(this.stylesheets)kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wc=null;function kd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wc=new Map,t.forEach($x,e),wc=null,Sc.call(e))}function $x(e,t){if(!(t.state.loading&4)){var n=wc.get(e);if(n)var i=n.get(null);else{n=new Map,wc.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Sc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var $o={$$typeof:li,Provider:null,Consumer:null,_currentValue:Hs,_currentValue2:Hs,_threadCount:0};function Xx(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zh(0),this.hiddenUpdates=Zh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function X0(e,t,n,i,s,r,a,l,u,f,m,g){return e=new Xx(e,t,n,a,l,u,f,g),t=1,r===!0&&(t|=24),r=nn(3,null,null,t),e.current=r,r.stateNode=e,t=Om(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},Mm(r),e}function Z0(e){return e?(e=Ur,e):Ur}function W0(e,t,n,i,s,r){s=Z0(s),i.context===null?i.context=s:i.pendingContext=s,i=ss(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=rs(e,i,t),n!==null&&(un(n,e,t),So(n,e,t))}function E_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rp(e,t){E_(e,t),(e=e.alternate)&&E_(e,t)}function J0(e){if(e.tag===13){var t=Ra(e,67108864);t!==null&&un(t,e,67108864),rp(e,67108864)}}var xc=!0;function Zx(e,t,n,i){var s=tt.T;tt.T=null;var r=bt.p;try{bt.p=2,ap(e,t,n,i)}finally{bt.p=r,tt.T=s}}function Wx(e,t,n,i){var s=tt.T;tt.T=null;var r=bt.p;try{bt.p=8,ap(e,t,n,i)}finally{bt.p=r,tt.T=s}}function ap(e,t,n,i){if(xc){var s=jd(i);if(s===null)Cf(e,t,i,Rc,n),T_(e,i);else if(tR(s,e,t,n,i))i.stopPropagation();else if(T_(e,i),t&4&&-1<Jx.indexOf(e)){for(;s!==null;){var r=xa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Ps(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-on(a);l.entanglements[1]|=u,a&=~u}Xn(r),!(Rt&6)&&(yc=Ln()+500,xl(0))}}break;case 13:l=Ra(r,2),l!==null&&un(l,r,2),lh(),rp(r,2)}if(r=jd(i),r===null&&Cf(e,t,i,Rc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Cf(e,t,i,null,n)}}function jd(e){return e=bm(e),op(e)}var Rc=null;function op(e){if(Rc=null,e=Vr(e),e!==null){var t=dl(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=SE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rc=e,null}function tb(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lw()){case IE:return 2;case CE:return 8;case ec:case Uw:return 32;case NE:return 268435456;default:return 32}default:return 32}}var Pd=!1,ls=null,us=null,cs=null,Xo=new Map,Zo=new Map,Ki=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(e,t){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":Xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(t.pointerId)}}function ao(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=xa(t),t!==null&&J0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function tR(e,t,n,i,s){switch(t){case"focusin":return ls=ao(ls,e,t,n,i,s),!0;case"dragenter":return us=ao(us,e,t,n,i,s),!0;case"mouseover":return cs=ao(cs,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Xo.set(r,ao(Xo.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Zo.set(r,ao(Zo.get(r)||null,e,t,n,i,s)),!0}return!1}function eb(e){var t=Vr(e.target);if(t!==null){var n=dl(t);if(n!==null){if(t=n.tag,t===13){if(t=SE(n),t!==null){e.blockedOn=t,Kw(e.priority,function(){if(n.tag===13){var i=ln();i=_m(i);var s=Ra(n,i);s!==null&&un(s,n,i),rp(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);td=i,n.target.dispatchEvent(i),td=null}else return t=xa(n),t!==null&&J0(t),e.blockedOn=n,!1;t.shift()}return!0}function b_(e,t,n){Bu(e)&&n.delete(t)}function eR(){Pd=!1,ls!==null&&Bu(ls)&&(ls=null),us!==null&&Bu(us)&&(us=null),cs!==null&&Bu(cs)&&(cs=null),Xo.forEach(b_),Zo.forEach(b_)}function Eu(e,t){e.blockedOn===t&&(e.blockedOn=null,Pd||(Pd=!0,fe.unstable_scheduleCallback(fe.unstable_NormalPriority,eR)))}var Tu=null;function A_(e){Tu!==e&&(Tu=e,fe.unstable_scheduleCallback(fe.unstable_NormalPriority,function(){Tu===e&&(Tu=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(op(i||n)===null)continue;break}var r=xa(n);r!==null&&(e.splice(t,3),t-=3,gd(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Wo(e){function t(u){return Eu(u,e)}ls!==null&&Eu(ls,e),us!==null&&Eu(us,e),cs!==null&&Eu(cs,e),Xo.forEach(t),Zo.forEach(t);for(var n=0;n<Ki.length;n++){var i=Ki[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ki.length&&(n=Ki[0],n.blockedOn===null);)eb(n),n.blockedOn===null&&Ki.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[$e]||null;if(typeof r=="function")a||A_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[$e]||null)l=a.formAction;else if(op(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),A_(n)}}}function lp(e){this._internalRoot=e}fh.prototype.render=lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));var n=t.current,i=ln();W0(n,i,e,t,null,null)};fh.prototype.unmount=lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;W0(e.current,2,null,e,null,null),lh(),t[wa]=null}};function fh(e){this._internalRoot=e}fh.prototype.unstable_scheduleHydration=function(e){if(e){var t=kE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ki.length&&t!==0&&t<Ki[n].priority;n++);Ki.splice(n,0,e),n===0&&eb(e)}};var S_=bE.version;if(S_!=="19.1.1")throw Error(P(527,S_,"19.1.1"));bt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Dw(t),e=e!==null?wE(e):null,e=e===null?null:e.stateNode,e};var nR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{ml=bu.inject(nR),an=bu}catch{}}Xc.createRoot=function(e,t){if(!AE(e))throw Error(P(299));var n=!1,i="",s=XT,r=ZT,a=WT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=X0(e,1,!1,null,null,n,i,s,r,a,l,null),e[wa]=t.current,np(e),new lp(t)};Xc.hydrateRoot=function(e,t,n){if(!AE(e))throw Error(P(299));var i=!1,s="",r=XT,a=ZT,l=WT,u=null,f=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(f=n.formState)),t=X0(e,1,!0,t,n??null,i,s,r,a,l,u,f),t.context=Z0(null),n=t.current,i=ln(),i=_m(i),s=ss(i),s.callback=null,rs(n,s,i),n=i,t.current.lanes=n,gl(t,n),Xn(t),e[wa]=t.current,np(e),new fh(t)};Xc.version="19.1.1";function nb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nb)}catch(e){console.error(e)}}nb(),gE.exports=Xc;var iR=gE.exports;const sR=rE(iR),rR=()=>{};var w_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},aR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,m=r>>2,g=(r&3)<<4|l>>4;let p=(l&15)<<2|f>>6,_=f&63;u||(_=64,a||(p=64)),i.push(n[m],n[g],n[p],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ib(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):aR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||f==null||g==null)throw new oR;const p=r<<2|l>>4;if(i.push(p),f!==64){const _=l<<4&240|f>>2;if(i.push(_),g!==64){const C=f<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class oR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lR=function(e){const t=ib(e);return sb.encodeByteArray(t,!0)},Ic=function(e){return lR(e).replace(/\./g,"")},rb=function(e){try{return sb.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=()=>uR().__FIREBASE_DEFAULTS__,hR=()=>{if(typeof process>"u"||typeof w_>"u")return;const e=w_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},fR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rb(e[1]);return t&&JSON.parse(t)},dh=()=>{try{return rR()||cR()||hR()||fR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ab=e=>{var t,n;return(n=(t=dh())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},dR=e=>{const t=ab(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},ob=()=>{var e;return(e=dh())==null?void 0:e.config},lb=e=>{var t;return(t=dh())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ub(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Ic(JSON.stringify(n)),Ic(JSON.stringify(a)),""].join(".")}const Vo={};function gR(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vo))Vo[t]?e.emulator.push(t):e.prod.push(t);return e}function yR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let x_=!1;function cb(e,t){if(typeof window>"u"||typeof document>"u"||!Da(window.location.host)||Vo[e]===t||Vo[e]||x_)return;Vo[e]=t;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=gR().prod.length>0;function a(){const p=document.getElementById(i);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function f(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{x_=!0,a()},p}function m(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function g(){const p=yR(i),_=n("text"),C=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),m(V,O);const D=f();u(E,S),x.append(E,C,V,D),document.body.appendChild(x)}r?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function vR(){var t;const e=(t=dh())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ER(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function bR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AR(){const e=je();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function SR(){return!vR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function xR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="FirebaseError";class Ri extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=RR,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?IR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ri(s,l,i)}}function IR(e,t){return e.replace(CR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const CR=/\{\$([^}]+)}/g;function NR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function er(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(R_(r)&&R_(a)){if(!er(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function R_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ho(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function fo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function DR(e,t){const n=new OR(e,t);return n.subscribe.bind(n)}class OR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");VR(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=Df),s.error===void 0&&(s.error=Df),s.complete===void 0&&(s.complete=Df);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Df(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(e){return e&&e._delegate?e._delegate:e}class nr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new mR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jR(t))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=zs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zs){return this.instances.has(t)}getOptions(t=zs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=zs){return this.component?this.component.multipleInstances?t:zs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kR(e){return e===zs?void 0:e}function jR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new MR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ht||(ht={}));const LR={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},UR=ht.INFO,zR={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},BR=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=zR[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class up{constructor(t){this.name=t,this._logLevel=UR,this._logHandler=BR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?LR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const qR=(e,t)=>t.some(n=>e instanceof n);let I_,C_;function HR(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FR(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hb=new WeakMap,Ld=new WeakMap,fb=new WeakMap,Of=new WeakMap,cp=new WeakMap;function GR(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(hs(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&hb.set(n,e)}).catch(()=>{}),cp.set(t,e),t}function QR(e){if(Ld.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});Ld.set(e,t)}let Ud={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ld.get(e);if(t==="objectStoreNames")return e.objectStoreNames||fb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function KR(e){Ud=e(Ud)}function YR(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Vf(this),t,...n);return fb.set(i,t.sort?t.sort():[t]),hs(i)}:FR().includes(e)?function(...t){return e.apply(Vf(this),t),hs(hb.get(this))}:function(...t){return hs(e.apply(Vf(this),t))}}function $R(e){return typeof e=="function"?YR(e):(e instanceof IDBTransaction&&QR(e),qR(e,HR())?new Proxy(e,Ud):e)}function hs(e){if(e instanceof IDBRequest)return GR(e);if(Of.has(e))return Of.get(e);const t=$R(e);return t!==e&&(Of.set(e,t),cp.set(t,e)),t}const Vf=e=>cp.get(e);function XR(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=hs(a);return i&&a.addEventListener("upgradeneeded",u=>{i(hs(a.result),u.oldVersion,u.newVersion,hs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const ZR=["get","getKey","getAll","getAllKeys","count"],WR=["put","add","delete","clear"],Mf=new Map;function N_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Mf.get(t))return Mf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=WR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||ZR.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Mf.set(t,r),r}KR(e=>({...e,get:(t,n,i)=>N_(t,n)||e.get(t,n,i),has:(t,n)=>!!N_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function t2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const zd="@firebase/app",D_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new up("@firebase/app"),e2="@firebase/app-compat",n2="@firebase/analytics-compat",i2="@firebase/analytics",s2="@firebase/app-check-compat",r2="@firebase/app-check",a2="@firebase/auth",o2="@firebase/auth-compat",l2="@firebase/database",u2="@firebase/data-connect",c2="@firebase/database-compat",h2="@firebase/functions",f2="@firebase/functions-compat",d2="@firebase/installations",m2="@firebase/installations-compat",p2="@firebase/messaging",g2="@firebase/messaging-compat",y2="@firebase/performance",_2="@firebase/performance-compat",v2="@firebase/remote-config",E2="@firebase/remote-config-compat",T2="@firebase/storage",b2="@firebase/storage-compat",A2="@firebase/firestore",S2="@firebase/ai",w2="@firebase/firestore-compat",x2="firebase",R2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="[DEFAULT]",I2={[zd]:"fire-core",[e2]:"fire-core-compat",[i2]:"fire-analytics",[n2]:"fire-analytics-compat",[r2]:"fire-app-check",[s2]:"fire-app-check-compat",[a2]:"fire-auth",[o2]:"fire-auth-compat",[l2]:"fire-rtdb",[u2]:"fire-data-connect",[c2]:"fire-rtdb-compat",[h2]:"fire-fn",[f2]:"fire-fn-compat",[d2]:"fire-iid",[m2]:"fire-iid-compat",[p2]:"fire-fcm",[g2]:"fire-fcm-compat",[y2]:"fire-perf",[_2]:"fire-perf-compat",[v2]:"fire-rc",[E2]:"fire-rc-compat",[T2]:"fire-gcs",[b2]:"fire-gcs-compat",[A2]:"fire-fst",[w2]:"fire-fst-compat",[S2]:"fire-vertex","fire-js":"fire-js",[x2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,C2=new Map,qd=new Map;function O_(e,t){try{e.container.addComponent(t)}catch(n){bi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pa(e){const t=e.name;if(qd.has(t))return bi.debug(`There were multiple attempts to register component ${t}.`),!1;qd.set(t,e);for(const n of Cc.values())O_(n,e);for(const n of C2.values())O_(n,e);return!0}function hp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Cl("app","Firebase",N2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=R2;function db(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Bd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw fs.create("bad-app-name",{appName:String(s)});if(n||(n=ob()),!n)throw fs.create("no-options");const r=Cc.get(s);if(r){if(er(n,r.options)&&er(i,r.config))return r;throw fs.create("duplicate-app",{appName:s})}const a=new PR(s);for(const u of qd.values())a.addComponent(u);const l=new D2(n,i,a);return Cc.set(s,l),l}function mb(e=Bd){const t=Cc.get(e);if(!t&&e===Bd&&ob())return db();if(!t)throw fs.create("no-app",{appName:e});return t}function ds(e,t,n){let i=I2[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bi.warn(a.join(" "));return}pa(new nr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="firebase-heartbeat-database",V2=1,Jo="firebase-heartbeat-store";let kf=null;function pb(){return kf||(kf=XR(O2,V2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Jo)}catch(n){console.warn(n)}}}}).catch(e=>{throw fs.create("idb-open",{originalErrorMessage:e.message})})),kf}async function M2(e){try{const n=(await pb()).transaction(Jo),i=await n.objectStore(Jo).get(gb(e));return await n.done,i}catch(t){if(t instanceof Ri)bi.warn(t.message);else{const n=fs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});bi.warn(n.message)}}}async function V_(e,t){try{const i=(await pb()).transaction(Jo,"readwrite");await i.objectStore(Jo).put(t,gb(e)),await i.done}catch(n){if(n instanceof Ri)bi.warn(n.message);else{const i=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(i.message)}}}function gb(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=1024,j2=30;class P2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=M_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>j2){const a=z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M_(),{heartbeatsToSend:i,unsentEntries:s}=L2(this._heartbeatsCache.heartbeats),r=Ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return bi.warn(n),""}}}function M_(){return new Date().toISOString().substring(0,10)}function L2(e,t=k2){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),k_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?xR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function k_(e){return Ic(JSON.stringify({version:2,heartbeats:e})).length}function z2(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(e){pa(new nr("platform-logger",t=>new JR(t),"PRIVATE")),pa(new nr("heartbeat",t=>new P2(t),"PRIVATE")),ds(zd,D_,e),ds(zd,D_,"esm2020"),ds("fire-js","")}B2("");var j_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ms,yb;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,v){function b(){}b.prototype=v.prototype,T.D=v.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(A,R,I){for(var w=Array(arguments.length-2),et=2;et<arguments.length;et++)w[et-2]=arguments[et];return v.prototype[R].apply(A,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,b){b||(b=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(R=0;16>R;++R)A[R]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=T.g[0],b=T.g[1],R=T.g[2];var I=T.g[3],w=v+(I^b&(R^I))+A[0]+3614090360&4294967295;v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[1]+3905402710&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[2]+606105819&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[3]+3250441966&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+A[4]+4118548399&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[5]+1200080426&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[6]+2821735955&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[7]+4249261313&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+A[8]+1770035416&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[9]+2336552879&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[10]+4294925233&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[11]+2304563134&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+A[12]+1804603682&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[13]+4254626195&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[14]+2792965006&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[15]+1236535329&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(R^I&(b^R))+A[1]+4129170786&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[6]+3225465664&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[11]+643717713&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[0]+3921069994&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+A[5]+3593408605&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[10]+38016083&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[15]+3634488961&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[4]+3889429448&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+A[9]+568446438&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[14]+3275163606&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[3]+4107603335&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[8]+1163531501&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+A[13]+2850285829&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[2]+4243563512&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[7]+1735328473&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[12]+2368359562&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(b^R^I)+A[5]+4294588738&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[8]+2272392833&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[11]+1839030562&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[14]+4259657740&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+A[1]+2763975236&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[4]+1272893353&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[7]+4139469664&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[10]+3200236656&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+A[13]+681279174&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[0]+3936430074&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[3]+3572445317&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[6]+76029189&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+A[9]+3654602809&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[12]+3873151461&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[15]+530742520&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[2]+3299628645&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(R^(b|~I))+A[0]+4096336452&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[7]+1126891415&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[14]+2878612391&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[5]+4237533241&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+A[12]+1700485571&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[3]+2399980690&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[10]+4293915773&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[1]+2240044497&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+A[8]+1873313359&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[15]+4264355552&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[6]+2734768916&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[13]+1309151649&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+A[4]+4149444226&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[11]+3174756917&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[2]+718787259&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var b=v-this.blockSize,A=this.B,R=this.h,I=0;I<v;){if(R==0)for(;I<=b;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<v;)if(A[R++]=T.charCodeAt(I++),R==this.blockSize){s(this,A),R=0;break}}else for(;I<v;)if(A[R++]=T[I++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=v},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var b=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=b&255,b/=256;for(this.u(T),T=Array(16),v=b=0;4>v;++v)for(var A=0;32>A;A+=8)T[b++]=this.g[v]>>>A&255;return T};function r(T,v){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=v(T)}function a(T,v){this.h=v;for(var b=[],A=!0,R=T.length-1;0<=R;R--){var I=T[R]|0;A&&I==v||(b[R]=I,A=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?r(T,function(v){return new a([v|0],0>v?-1:0)}):new a([T|0],0>T?-1:0)}function f(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return V(f(-T));for(var v=[],b=1,A=0;T>=b;A++)v[A]=T/b|0,b*=4294967296;return new a(v,0)}function m(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return V(m(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=f(Math.pow(v,8)),A=g,R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R),w=parseInt(T.substring(R,R+I),v);8>I?(I=f(Math.pow(v,I)),A=A.j(I).add(f(w))):(A=A.j(b),A=A.add(f(w)))}return A}var g=u(0),p=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(O(this))return-V(this).m();for(var T=0,v=1,b=0;b<this.g.length;b++){var A=this.i(b);T+=(0<=A?A:4294967296+A)*v,v*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(O(this))return"-"+V(this).toString(T);for(var v=f(Math.pow(T,6)),b=this,A="";;){var R=D(b,v).g;b=S(b,R.j(v));var I=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=R,C(b))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}e.l=function(T){return T=S(this,T),O(T)?-1:C(T)?0:1};function V(T){for(var v=T.g.length,b=[],A=0;A<v;A++)b[A]=~T.g[A];return new a(b,~T.h).add(p)}e.abs=function(){return O(this)?V(this):this},e.add=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0,R=0;R<=v;R++){var I=A+(this.i(R)&65535)+(T.i(R)&65535),w=(I>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);A=w>>>16,I&=65535,w&=65535,b[R]=w<<16|I}return new a(b,b[b.length-1]&-2147483648?-1:0)};function S(T,v){return T.add(V(v))}e.j=function(T){if(C(this)||C(T))return g;if(O(this))return O(T)?V(this).j(V(T)):V(V(this).j(T));if(O(T))return V(this.j(V(T)));if(0>this.l(_)&&0>T.l(_))return f(this.m()*T.m());for(var v=this.g.length+T.g.length,b=[],A=0;A<2*v;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<T.g.length;R++){var I=this.i(A)>>>16,w=this.i(A)&65535,et=T.i(R)>>>16,vt=T.i(R)&65535;b[2*A+2*R]+=w*vt,E(b,2*A+2*R),b[2*A+2*R+1]+=I*vt,E(b,2*A+2*R+1),b[2*A+2*R+1]+=w*et,E(b,2*A+2*R+1),b[2*A+2*R+2]+=I*et,E(b,2*A+2*R+2)}for(A=0;A<v;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=v;A<2*v;A++)b[A]=0;return new a(b,0)};function E(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function x(T,v){this.g=T,this.h=v}function D(T,v){if(C(v))throw Error("division by zero");if(C(T))return new x(g,g);if(O(T))return v=D(V(T),v),new x(V(v.g),V(v.h));if(O(v))return v=D(T,V(v)),new x(V(v.g),v.h);if(30<T.g.length){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=v;0>=A.l(T);)b=L(b),A=L(A);var R=H(b,1),I=H(A,1);for(A=H(A,2),b=H(b,2);!C(A);){var w=I.add(A);0>=w.l(T)&&(R=R.add(b),I=w),A=H(A,1),b=H(b,1)}return v=S(T,R.j(v)),new x(R,v)}for(R=g;0<=T.l(v);){for(b=Math.max(1,Math.floor(T.m()/v.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=f(b),w=I.j(v);O(w)||0<w.l(T);)b-=A,I=f(b),w=I.j(v);C(I)&&(I=p),R=R.add(I),T=S(T,w)}return new x(R,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0;A<v;A++)b[A]=this.i(A)&T.i(A);return new a(b,this.h&T.h)},e.or=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0;A<v;A++)b[A]=this.i(A)|T.i(A);return new a(b,this.h|T.h)},e.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0;A<v;A++)b[A]=this.i(A)^T.i(A);return new a(b,this.h^T.h)};function L(T){for(var v=T.g.length+1,b=[],A=0;A<v;A++)b[A]=T.i(A)<<1|T.i(A-1)>>>31;return new a(b,T.h)}function H(T,v){var b=v>>5;v%=32;for(var A=T.g.length-b,R=[],I=0;I<A;I++)R[I]=0<v?T.i(I+b)>>>v|T.i(I+b+1)<<32-v:T.i(I+b);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yb=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ms=a}).apply(typeof j_<"u"?j_:typeof self<"u"?self:typeof window<"u"?window:{});var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _b,mo,vb,qu,Hd,Eb,Tb,bb;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var d=i;o=o.split(".");for(var y=0;y<o.length-1;y++){var N=o[y];if(!(N in d))break t;d=d[N]}o=o[o.length-1],y=d[o],c=c(y),c!=y&&c!=null&&t(d,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var d=0,y=!1,N={next:function(){if(!y&&d<o.length){var M=d++;return{value:c(M,o[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function m(o,c,d){return o.call.apply(o.bind,arguments)}function g(o,c,d){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function p(o,c,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,p.apply(null,arguments)}function _(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function C(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(y,N,M){for(var q=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)q[Dt-2]=arguments[Dt];return c.prototype[N].apply(y,q)}}function O(o){const c=o.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=o[y];return d}return[]}function V(o,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const N=o.length||0,M=y.length||0;o.length=N+M;for(let q=0;q<M;q++)o[N+q]=y[q]}else o.push(y)}}class S{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function x(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(o,c,d){for(const y in o)c.call(d,o[y],y,o)}function T(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function v(o){const c={};for(const d in o)c[d]=o[d];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,c){let d,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(d in y)o[d]=y[d];for(let M=0;M<b.length;M++)d=b[M],Object.prototype.hasOwnProperty.call(y,d)&&(o[d]=y[d])}}function R(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function I(o){l.setTimeout(()=>{throw o},0)}function w(){var o=mt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class et{constructor(){this.h=this.g=null}add(c,d){const y=vt.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var vt=new S(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let $,Y=!1,mt=new et,Mt=()=>{const o=l.Promise.resolve(void 0);$=()=>{o.then(fn)}};var fn=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){I(d)}var c=vt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function Qt(){this.s=this.s,this.C=this.C}Qt.prototype.s=!1,Qt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function Ee(o,c){if(At.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Wn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ee.aa.h.call(this)}}C(Ee,At);var Wn={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),Jn=0;function Pe(o,c,d,y,N){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=N,this.key=++Jn,this.da=this.fa=!1}function Ci(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Fe(o){this.src=o,this.g={},this.h=0}Fe.prototype.add=function(o,c,d,y,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var q=An(o,c,y,N);return-1<q?(c=o[q],d||(c.fa=!1)):(c=new Pe(c,this.src,M,!!y,N),c.fa=d,o.push(c)),c};function Ni(o,c){var d=c.type;if(d in o.g){var y=o.g[d],N=Array.prototype.indexOf.call(y,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(y,N,1),M&&(Ci(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function An(o,c,d,y){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==y)return N}return-1}var On="closure_lm_"+(1e6*Math.random()|0),Di={};function Oi(o,c,d,y,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)Oi(o,c[M],d,y,N);return null}return d=kt(d),o&&o[Zt]?o.K(c,d,f(y)?!!y.capture:!1,N):ti(o,c,d,!1,y,N)}function ti(o,c,d,y,N,M){if(!c)throw Error("Invalid event type");var q=f(N)?!!N.capture:!!N,Dt=Wt(o);if(Dt||(o[On]=Dt=new Fe(o)),d=Dt.add(c,d,y,q,M),d.proxy)return d;if(y=Ua(),d.proxy=y,y.src=o,y.listener=d,o.addEventListener)ie||(N=q),N===void 0&&(N=!1),o.addEventListener(c.toString(),y,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ua(){function o(d){return c.call(o.src,o.listener,d)}const c=it;return o}function Vi(o,c,d,y,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)Vi(o,c[M],d,y,N);else y=f(y)?!!y.capture:!!y,d=kt(d),o&&o[Zt]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],d=An(M,d,y,N),-1<d&&(Ci(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Wt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=An(c,d,y,N)),(d=-1<o?c[o]:null)&&ei(d))}function ei(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Zt])Ni(c.i,o);else{var d=o.type,y=o.proxy;c.removeEventListener?c.removeEventListener(d,y,o.capture):c.detachEvent?c.detachEvent(G(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=Wt(c))?(Ni(d,o),d.h==0&&(d.src=null,c[On]=null)):Ci(o)}}}function G(o){return o in Di?Di[o]:Di[o]="on"+o}function it(o,c){if(o.da)o=!0;else{c=new Ee(c,this);var d=o.listener,y=o.ha||o.src;o.fa&&ei(o),o=d.call(y,c)}return o}function Wt(o){return o=o[On],o instanceof Fe?o:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(o){return typeof o=="function"?o:(o[Te]||(o[Te]=function(c){return o.handleEvent(c)}),o[Te])}function St(){Qt.call(this),this.i=new Fe(this),this.M=this,this.F=null}C(St,Qt),St.prototype[Zt]=!0,St.prototype.removeEventListener=function(o,c,d,y){Vi(this,o,c,d,y)};function It(o,c){var d,y=o.F;if(y)for(d=[];y;y=y.F)d.push(y);if(o=o.M,y=c.type||c,typeof c=="string")c=new At(c,o);else if(c instanceof At)c.target=c.target||o;else{var N=c;c=new At(y,o),A(c,N)}if(N=!0,d)for(var M=d.length-1;0<=M;M--){var q=c.g=d[M];N=Sn(q,y,!0,c)&&N}if(q=c.g=o,N=Sn(q,y,!0,c)&&N,N=Sn(q,y,!1,c)&&N,d)for(M=0;M<d.length;M++)q=c.g=d[M],N=Sn(q,y,!1,c)&&N}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],y=0;y<d.length;y++)Ci(d[y]);delete o.g[c],o.h--}}this.F=null},St.prototype.K=function(o,c,d,y){return this.i.add(String(o),c,!1,d,y)},St.prototype.L=function(o,c,d,y){return this.i.add(String(o),c,!0,d,y)};function Sn(o,c,d,y){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var q=c[M];if(q&&!q.da&&q.capture==d){var Dt=q.listener,be=q.ha||q.src;q.fa&&Ni(o.i,q),N=Dt.call(be,y)!==!1&&N}}return N&&!y.defaultPrevented}function pr(o,c,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Ze(o){o.g=pr(()=>{o.g=null,o.i&&(o.i=!1,Ze(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class za extends Qt{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ze(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(o){Qt.call(this),this.h=o,this.g={}}C(Ds,Qt);var Gl=[];function Ba(o){H(o.g,function(c,d){this.g.hasOwnProperty(d)&&ei(c)},o),o.g={}}Ds.prototype.N=function(){Ds.aa.N.call(this),Ba(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gr=l.JSON.stringify,Ql=l.JSON.parse,jh=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function qa(){}qa.prototype.h=null;function Kl(o){return o.h||(o.h=o.i())}function Q(){}var Z={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rt(){At.call(this,"d")}C(rt,At);function st(){At.call(this,"c")}C(st,At);var _t={},ot=null;function Kt(){return ot=ot||new St}_t.La="serverreachability";function Mi(o){At.call(this,_t.La,o)}C(Mi,At);function Os(o){const c=Kt();It(c,new Mi(c))}_t.STAT_EVENT="statevent";function dg(o,c){At.call(this,_t.STAT_EVENT,o),this.stat=c}C(dg,At);function Le(o){const c=Kt();It(c,new dg(c,o))}_t.Ma="timingevent";function mg(o,c){At.call(this,_t.Ma,o),this.size=c}C(mg,At);function Ha(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Fa(){this.g=!0}Fa.prototype.xa=function(){this.g=!1};function US(o,c,d,y,N,M){o.info(function(){if(o.g)if(M)for(var q="",Dt=M.split("&"),be=0;be<Dt.length;be++){var Et=Dt[be].split("=");if(1<Et.length){var Ne=Et[0];Et=Et[1];var De=Ne.split("_");q=2<=De.length&&De[1]=="type"?q+(Ne+"="+Et+"&"):q+(Ne+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+c+`
`+d+`
`+q})}function zS(o,c,d,y,N,M,q){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+c+`
`+d+`
`+M+" "+q})}function yr(o,c,d,y){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+qS(o,d)+(y?" "+y:"")})}function BS(o,c){o.info(function(){return"TIMEOUT: "+c})}Fa.prototype.info=function(){};function qS(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var y=d[o];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return gr(d)}catch{return c}}var Yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ph;function $l(){}C($l,qa),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},Ph=new $l;function ki(o,c,d,y){this.j=o,this.i=c,this.l=d,this.R=y||1,this.U=new Ds(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}var yg={},Lh={};function Uh(o,c,d){o.L=1,o.v=Jl(ni(c)),o.m=d,o.P=!0,_g(o,null)}function _g(o,c){o.F=Date.now(),Xl(o),o.A=ni(o.v);var d=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),Og(d.i,"t",y),o.C=0,d=o.j.J,o.h=new gg,o.g=Xg(o.j,d?c:null,!o.m),0<o.O&&(o.M=new za(p(o.Y,o,o.g),o.O)),c=o.U,d=o.g,y=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Gl[0]=N.toString()),N=Gl);for(var M=0;M<N.length;M++){var q=Oi(d,N[M],y||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Os(),US(o.i,o.u,o.A,o.l,o.R,o.m)}ki.prototype.ca=function(o){o=o.target;const c=this.M;c&&ii(o)==3?c.j():this.Y(o)},ki.prototype.Y=function(o){try{if(o==this.g)t:{const De=ii(this.g);var c=this.g.Ba();const Er=this.g.Z();if(!(3>De)&&(De!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||De!=4||c==7||(c==8||0>=Er?Os(3):Os(2)),zh(this);var d=this.g.Z();this.X=d;e:if(vg(this)){var y=Ug(this.g);o="";var N=y.length,M=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vs(this),Ga(this);var q="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(y[c],{stream:!(M&&c==N-1)});y.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=d==200,zS(this.i,this.u,this.A,this.l,this.R,De,d),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,be=this.g;if((Dt=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Dt)){var Et=Dt;break e}}Et=null}if(d=Et)yr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bh(this,d);else{this.o=!1,this.s=3,Le(12),Vs(this),Ga(this);break t}}if(this.P){d=!0;let wn;for(;!this.J&&this.C<q.length;)if(wn=HS(this,q),wn==Lh){De==4&&(this.s=4,Le(14),d=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==yg){this.s=4,Le(15),yr(this.i,this.l,q,"[Invalid Chunk]"),d=!1;break}else yr(this.i,this.l,wn,null),Bh(this,wn);if(vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||q.length!=0||this.h.h||(this.s=1,Le(16),d=!1),this.o=this.o&&d,!d)yr(this.i,this.l,q,"[Invalid Chunked Response]"),Vs(this),Ga(this);else if(0<q.length&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.ba&&!Ne.M&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Kh(Ne),Ne.M=!0,Le(11))}}else yr(this.i,this.l,q,null),Bh(this,q);De==4&&Vs(this),this.o&&!this.J&&(De==4?Qg(this.j,this):(this.o=!1,Xl(this)))}else aw(this.g),d==400&&0<q.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Vs(this),Ga(this)}}}catch{}finally{}};function vg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function HS(o,c){var d=o.C,y=c.indexOf(`
`,d);return y==-1?Lh:(d=Number(c.substring(d,y)),isNaN(d)?yg:(y+=1,y+d>c.length?Lh:(c=c.slice(y,y+d),o.C=y+d,c)))}ki.prototype.cancel=function(){this.J=!0,Vs(this)};function Xl(o){o.S=Date.now()+o.I,Eg(o,o.I)}function Eg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ha(p(o.ba,o),c)}function zh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ki.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(BS(this.i,this.A),this.L!=2&&(Os(),Le(17)),Vs(this),this.s=2,Ga(this)):Eg(this,this.S-o)};function Ga(o){o.j.G==0||o.J||Qg(o.j,o)}function Vs(o){zh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ba(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Bh(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||qh(d.h,o))){if(!o.K&&qh(d.h,o)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)ru(d),iu(d);else break t;Qh(d),Le(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ha(p(d.Za,d),6e3));if(1>=Ag(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ks(d,11)}else if((o.K||d.g==o)&&ru(d),!E(c))for(N=d.Da.g.parse(c),c=0;c<N.length;c++){let Et=N[c];if(d.T=Et[0],Et=Et[1],d.G==2)if(Et[0]=="c"){d.K=Et[1],d.ia=Et[2];const Ne=Et[3];Ne!=null&&(d.la=Ne,d.j.info("VER="+d.la));const De=Et[4];De!=null&&(d.Aa=De,d.j.info("SVER="+d.Aa));const Er=Et[5];Er!=null&&typeof Er=="number"&&0<Er&&(y=1.5*Er,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const wn=o.g;if(wn){const ou=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ou){var M=y.h;M.g||ou.indexOf("spdy")==-1&&ou.indexOf("quic")==-1&&ou.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Hh(M,M.h),M.h=null))}if(y.D){const Yh=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yh&&(y.ya=Yh,jt(y.I,y.D,Yh))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var q=o;if(y.qa=$g(y,y.J?y.ia:null,y.W),q.K){Sg(y.h,q);var Dt=q,be=y.L;be&&(Dt.I=be),Dt.B&&(zh(Dt),Xl(Dt)),y.g=q}else Fg(y);0<d.i.length&&su(d)}else Et[0]!="stop"&&Et[0]!="close"||ks(d,7);else d.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?ks(d,7):Gh(d):Et[0]!="noop"&&d.l&&d.l.ta(Et),d.v=0)}}Os(4)}catch{}}var FS=class{constructor(o,c){this.g=o,this.map=c}};function Tg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ag(o){return o.h?1:o.g?o.g.size:0}function qh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Hh(o,c){o.g?o.g.add(c):o.h=c}function Sg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Tg.prototype.cancel=function(){if(this.i=wg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function wg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return O(o.i)}function GS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,y=0;y<d;y++)c.push(o[y]);return c}c=[],d=0;for(y in o)c[d++]=o[y];return c}function QS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const y in o)c[d++]=y;return c}}}function xg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=QS(o),y=GS(o),N=y.length,M=0;M<N;M++)c.call(void 0,y[M],d&&d[M],o)}var Rg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KS(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var y=o[d].indexOf("="),N=null;if(0<=y){var M=o[d].substring(0,y);N=o[d].substring(y+1)}else M=o[d];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ms(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ms){this.h=o.h,Zl(this,o.j),this.o=o.o,this.g=o.g,Wl(this,o.s),this.l=o.l;var c=o.i,d=new Ya;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Ig(this,d),this.m=o.m}else o&&(c=String(o).match(Rg))?(this.h=!1,Zl(this,c[1]||"",!0),this.o=Qa(c[2]||""),this.g=Qa(c[3]||"",!0),Wl(this,c[4]),this.l=Qa(c[5]||"",!0),Ig(this,c[6]||"",!0),this.m=Qa(c[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}Ms.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ka(c,Cg,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ka(c,Cg,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ka(d,d.charAt(0)=="/"?XS:$S,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ka(d,WS)),o.join("")};function ni(o){return new Ms(o)}function Zl(o,c,d){o.j=d?Qa(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Wl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Ig(o,c,d){c instanceof Ya?(o.i=c,JS(o.i,o.h)):(d||(c=Ka(c,ZS)),o.i=new Ya(c,o.h))}function jt(o,c,d){o.i.set(c,d)}function Jl(o){return jt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Qa(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ka(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,YS),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function YS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Cg=/[#\/\?@]/g,$S=/[#\?:]/g,XS=/[#\?]/g,ZS=/[#\?@]/g,WS=/#/g;function Ya(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ji(o){o.g||(o.g=new Map,o.h=0,o.i&&KS(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}e=Ya.prototype,e.add=function(o,c){ji(this),this.i=null,o=_r(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Ng(o,c){ji(o),c=_r(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Dg(o,c){return ji(o),c=_r(o,c),o.g.has(c)}e.forEach=function(o,c){ji(this),this.g.forEach(function(d,y){d.forEach(function(N){o.call(c,N,y,this)},this)},this)},e.na=function(){ji(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const N=o[y];for(let M=0;M<N.length;M++)d.push(c[y])}return d},e.V=function(o){ji(this);let c=[];if(typeof o=="string")Dg(this,o)&&(c=c.concat(this.g.get(_r(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},e.set=function(o,c){return ji(this),this.i=null,o=_r(this,o),Dg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Og(o,c,d){Ng(o,c),0<d.length&&(o.i=null,o.g.set(_r(o,c),O(d)),o.h+=d.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const M=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var N=M;q[y]!==""&&(N+="="+encodeURIComponent(String(q[y]))),o.push(N)}}return this.i=o.join("&")};function _r(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function JS(o,c){c&&!o.j&&(ji(o),o.i=null,o.g.forEach(function(d,y){var N=y.toLowerCase();y!=N&&(Ng(this,y),Og(this,N,d))},o)),o.j=c}function tw(o,c){const d=new Fa;if(l.Image){const y=new Image;y.onload=_(Pi,d,"TestLoadImage: loaded",!0,c,y),y.onerror=_(Pi,d,"TestLoadImage: error",!1,c,y),y.onabort=_(Pi,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=_(Pi,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else c(!1)}function ew(o,c){const d=new Fa,y=new AbortController,N=setTimeout(()=>{y.abort(),Pi(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:y.signal}).then(M=>{clearTimeout(N),M.ok?Pi(d,"TestPingServer: ok",!0,c):Pi(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Pi(d,"TestPingServer: error",!1,c)})}function Pi(o,c,d,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(d)}catch{}}function nw(){this.g=new jh}function iw(o,c,d){const y=d||"";try{xg(o,function(N,M){let q=N;f(N)&&(q=gr(N)),c.push(y+M+"="+encodeURIComponent(q))})}catch(N){throw c.push(y+"type="+encodeURIComponent("_badmap")),N}}function tu(o){this.l=o.Ub||null,this.j=o.eb||!1}C(tu,qa),tu.prototype.g=function(){return new eu(this.l,this.j)},tu.prototype.i=function(o){return function(){return o}}({});function eu(o,c){St.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(eu,St),e=eu.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Xa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?$a(this):Xa(this),this.readyState==3&&Vg(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,$a(this))},e.Qa=function(o){this.g&&(this.response=o,$a(this))},e.ga=function(){this.g&&$a(this)};function $a(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Xa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Xa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(eu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Mg(o){let c="";return H(o,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function Fh(o,c,d){t:{for(y in d){var y=!1;break t}y=!0}y||(d=Mg(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):jt(o,c,d))}function Yt(o){St.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Yt,St);var sw=/^https?$/i,rw=["POST","PUT"];e=Yt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ph.g(),this.v=this.o?Kl(this.o):Kl(Ph),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){kg(this,M);return}if(o=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)d.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())d.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(rw,c,void 0))||y||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of d)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){kg(this,M)}};function kg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,jg(o),nu(o)}function jg(o){o.A||(o.A=!0,It(o,"complete"),It(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,It(this,"complete"),It(this,"abort"),nu(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nu(this,!0)),Yt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Pg(this):this.bb())},e.bb=function(){Pg(this)};function Pg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ii(o)!=4||o.Z()!=2)){if(o.u&&ii(o)==4)pr(o.Ea,0,o);else if(It(o,"readystatechange"),ii(o)==4){o.h=!1;try{const q=o.Z();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var d;if(!(d=c)){var y;if(y=q===0){var N=String(o.D).match(Rg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!sw.test(N?N.toLowerCase():"")}d=y}if(d)It(o,"complete"),It(o,"success");else{o.m=6;try{var M=2<ii(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",jg(o)}}finally{nu(o)}}}}function nu(o,c){if(o.g){Lg(o);const d=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||It(o,"ready");try{d.onreadystatechange=y}catch{}}}function Lg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function ii(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Ql(c)}};function Ug(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function aw(o){const c={};o=(o.g&&2<=ii(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(E(o[y]))continue;var d=R(o[y]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[N]||[];c[N]=M,M.push(d)}T(c,function(y){return y.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Za(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function zg(o){this.Aa=0,this.i=[],this.j=new Fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Za("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Za("baseRetryDelayMs",5e3,o),this.cb=Za("retryDelaySeedMs",1e4,o),this.Wa=Za("forwardChannelMaxRetries",2,o),this.wa=Za("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(o&&o.concurrentRequestLimit),this.Da=new nw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=zg.prototype,e.la=8,e.G=1,e.connect=function(o,c,d,y){Le(0),this.W=o,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=$g(this,null,this.W),su(this)};function Gh(o){if(Bg(o),o.G==3){var c=o.U++,d=ni(o.I);if(jt(d,"SID",o.K),jt(d,"RID",c),jt(d,"TYPE","terminate"),Wa(o,d),c=new ki(o,o.j,c),c.L=2,c.v=Jl(ni(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Xg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Xl(c)}Yg(o)}function iu(o){o.g&&(Kh(o),o.g.cancel(),o.g=null)}function Bg(o){iu(o),o.u&&(l.clearTimeout(o.u),o.u=null),ru(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function su(o){if(!bg(o.h)&&!o.s){o.s=!0;var c=o.Ga;$||Mt(),Y||($(),Y=!0),mt.add(c,o),o.B=0}}function ow(o,c){return Ag(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ha(p(o.Ga,o,c),Kg(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new ki(this,this.j,o);let M=this.o;if(this.S&&(M?(M=v(M),A(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,d=0;d<this.i.length;d++){e:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break t}if(c===4096||d===this.i.length-1){c=d+1;break t}}c=1e3}else c=1e3;c=Hg(this,N,c),d=ni(this.I),jt(d,"RID",o),jt(d,"CVER",22),this.D&&jt(d,"X-HTTP-Session-Id",this.D),Wa(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(Mg(M)))+"&"+c:this.m&&Fh(d,this.m,M)),Hh(this.h,N),this.Ua&&jt(d,"TYPE","init"),this.P?(jt(d,"$req",c),jt(d,"SID","null"),N.T=!0,Uh(N,d,null)):Uh(N,d,c),this.G=2}}else this.G==3&&(o?qg(this,o):this.i.length==0||bg(this.h)||qg(this))};function qg(o,c){var d;c?d=c.l:d=o.U++;const y=ni(o.I);jt(y,"SID",o.K),jt(y,"RID",d),jt(y,"AID",o.T),Wa(o,y),o.m&&o.o&&Fh(y,o.m,o.o),d=new ki(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Hg(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Hh(o.h,d),Uh(d,y,c)}function Wa(o,c){o.H&&H(o.H,function(d,y){jt(c,y,d)}),o.l&&xg({},function(d,y){jt(c,y,d)})}function Hg(o,c,d){d=Math.min(o.i.length,d);var y=o.l?p(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const q=["count="+d];M==-1?0<d?(M=N[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Dt=!0;for(let be=0;be<d;be++){let Et=N[be].g;const Ne=N[be].map;if(Et-=M,0>Et)M=Math.max(0,N[be].g-100),Dt=!1;else try{iw(Ne,q,"req"+Et+"_")}catch{y&&y(Ne)}}if(Dt){y=q.join("&");break t}}}return o=o.i.splice(0,d),c.D=o,y}function Fg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;$||Mt(),Y||($(),Y=!0),mt.add(c,o),o.v=0}}function Qh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ha(p(o.Fa,o),Kg(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ha(p(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),iu(this),Gg(this))};function Kh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Gg(o){o.g=new ki(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ni(o.qa);jt(c,"RID","rpc"),jt(c,"SID",o.K),jt(c,"AID",o.T),jt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&jt(c,"TO",o.ja),jt(c,"TYPE","xmlhttp"),Wa(o,c),o.m&&o.o&&Fh(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Jl(ni(c)),d.m=null,d.P=!0,_g(d,o)}e.Za=function(){this.C!=null&&(this.C=null,iu(this),Qh(this),Le(19))};function ru(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Qg(o,c){var d=null;if(o.g==c){ru(o),Kh(o),o.g=null;var y=2}else if(qh(o.h,c))d=c.D,Sg(o.h,c),y=1;else return;if(o.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;y=Kt(),It(y,new mg(y,d)),su(o)}else Fg(o);else if(N=c.s,N==3||N==0&&0<c.X||!(y==1&&ow(o,c)||y==2&&Qh(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),N){case 1:ks(o,5);break;case 4:ks(o,10);break;case 3:ks(o,6);break;default:ks(o,2)}}}function Kg(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function ks(o,c){if(o.j.info("Error code "+c),c==2){var d=p(o.fb,o),y=o.Xa;const N=!y;y=new Ms(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Zl(y,"https"),Jl(y),N?tw(y.toString(),d):ew(y.toString(),d)}else Le(2);o.G=0,o.l&&o.l.sa(c),Yg(o),Bg(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Yg(o){if(o.G=0,o.ka=[],o.l){const c=wg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function $g(o,c,d){var y=d instanceof Ms?ni(d):new Ms(d);if(y.g!="")c&&(y.g=c+"."+y.g),Wl(y,y.s);else{var N=l.location;y=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new Ms(null);y&&Zl(M,y),c&&(M.g=c),N&&Wl(M,N),d&&(M.l=d),y=M}return d=o.D,c=o.ya,d&&c&&jt(y,d,c),jt(y,"VER",o.la),Wa(o,y),y}function Xg(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Yt(new tu({eb:d})):new Yt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}e=Zg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function au(){}au.prototype.g=function(o,c){return new We(o,c)};function We(o,c){St.call(this),this.g=new zg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new vr(this)}C(We,St),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Gh(this.g)},We.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=gr(o),o=d);c.i.push(new FS(c.Ya++,o)),c.G==3&&su(c)},We.prototype.N=function(){this.g.l=null,delete this.j,Gh(this.g),delete this.g,We.aa.N.call(this)};function Wg(o){rt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const d in c){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(Wg,rt);function Jg(){st.call(this),this.status=1}C(Jg,st);function vr(o){this.g=o}C(vr,Zg),vr.prototype.ua=function(){It(this.g,"a")},vr.prototype.ta=function(o){It(this.g,new Wg(o))},vr.prototype.sa=function(o){It(this.g,new Jg)},vr.prototype.ra=function(){It(this.g,"b")},au.prototype.createWebChannel=au.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,bb=function(){return new au},Tb=function(){return Kt()},Eb=_t,Hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,qu=Yl,pg.COMPLETE="complete",vb=pg,Q.EventType=Z,Z.OPEN="a",Z.CLOSE="b",Z.ERROR="c",Z.MESSAGE="d",St.prototype.listen=St.prototype.K,mo=Q,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,_b=Yt}).apply(typeof Au<"u"?Au:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore",L_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new up("@firebase/firestore");function Rr(){return ir.logLevel}function F(e,...t){if(ir.logLevel<=ht.DEBUG){const n=t.map(fp);ir.debug(`Firestore (${Va}): ${e}`,...n)}}function Ai(e,...t){if(ir.logLevel<=ht.ERROR){const n=t.map(fp);ir.error(`Firestore (${Va}): ${e}`,...n)}}function ga(e,...t){if(ir.logLevel<=ht.WARN){const n=t.map(fp);ir.warn(`Firestore (${Va}): ${e}`,...n)}}function fp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,Ab(e,i,n)}function Ab(e,t,n){let i=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ai(i),new Error(i)}function yt(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||Ab(t,s,i)}function nt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class q2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}}class H2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class F2{constructor(t){this.t=t,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new zn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new zn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string",31837,{l:i}),new Sb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new Ve(t)}}class G2{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q2{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new G2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Y2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ft(e,t){return e<t?-1:e>t?1:0}function Fd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return jf(s)===jf(r)?ft(s,r):jf(s)?1:-1}return ft(e.length,t.length)}const $2=55296,X2=57343;function jf(e){const t=e.charCodeAt(0);return t>=$2&&t<=X2}function ya(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class Mn{constructor(t,n,i){n===void 0?n=0:n>t.length&&X(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&X(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Mn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Mn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Mn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ft(t.length,n.length)}static compareSegments(t,n){const i=Mn.isNumericId(t),s=Mn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Mn.extractNumericId(t).compare(Mn.extractNumericId(n)):Fd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ms.fromString(t.substring(4,t.length-2))}}class xt extends Mn{construct(t,n,i){return new xt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const Z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xe extends Mn{construct(t,n,i){return new xe(t,n,i)}static isValidIdentifier(t){return Z2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new xe([z_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xe(n)}static emptyPath(){return new xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.path=t}static fromPath(t){return new K(xt.fromString(t))}static fromName(t){return new K(xt.fromString(t).popFirst(5))}static empty(){return new K(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new K(new xt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function W2(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function B_(e){if(!K.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function q_(e){if(K.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function xb(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function mh(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":X(12329,{type:typeof e})}function qe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mh(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e,t){const n={typeString:e};return t&&(n.value=t),n}function Dl(e,t){if(!xb(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-62135596800,F_=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(t){return Pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*F_);return new Pt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<H_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F_}_compareTo(t){return this.seconds===t.seconds?ft(this.nanoseconds,t.nanoseconds):ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Dl(t,Pt._jsonSchema))return new Pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-H_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:oe("string",Pt._jsonSchemaVersion),seconds:oe("number"),nanoseconds:oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{static fromTimestamp(t){return new W(t)}static min(){return new W(new Pt(0,0))}static max(){return new W(new Pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=-1;function J2(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=W.fromTimestamp(i===1e9?new Pt(n+1,0):new Pt(n,i));return new Es(s,K.empty(),t)}function tI(e){return new Es(e.readTime,e.key,tl)}class Es{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Es(W.min(),K.empty(),tl)}static max(){return new Es(W.max(),K.empty(),tl)}}function eI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=K.comparator(e.documentKey,t.documentKey),n!==0?n:ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==nI)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new j((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):j.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):j.reject(n)}static resolve(t){return new j((n,i)=>{n(t)})}static reject(t){return new j((n,i)=>{i(t)})}static waitFor(t){return new j((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=j.resolve(!1);for(const i of t)n=n.next(s=>s?j.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new j((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const f=u;n(t[f]).next(m=>{a[f]=m,++l,l===r&&i(a)},m=>s(m))}})}static doWhile(t,n){return new j((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function sI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ka(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ph.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-1;function Ol(e){return e==null}function Nc(e){return e===0&&1/e==-1/0}function rI(e){return typeof e=="number"&&Number.isInteger(e)&&!Nc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="";function aI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=G_(t)),t=oI(e.get(n),t);return G_(t)}function oI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case Rb:n+="";break;default:n+=r}}return n}function G_(e){return e+Rb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Is(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ib(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t,n){this.comparator=t,this.root=n||Se.EMPTY}insert(t,n){return new Gt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(t){return new Gt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Se.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Su(this.root,t,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Su(this.root,t,this.comparator,!0)}}class Su{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Se{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??Se.RED,this.left=s??Se.EMPTY,this.right=r??Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new Se(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Se.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw X(27949);return t+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1;Se.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new Se(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.comparator=t,this.data=new Gt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(t){return new K_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof he)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new he(this.comparator);return n.data=t,n}}class K_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.fields=t,t.sort(xe.comparator)}static empty(){return new rn([])}unionWith(t){let n=new he(xe.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new rn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ya(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Cb("Invalid base64 string: "+r):r}}(t);return new Ce(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new Ce(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ce.EMPTY_BYTE_STRING=new Ce("");const lI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=lI.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ne(e.seconds),nanos:ne(e.nanos)}}function ne(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function bs(e){return typeof e=="string"?Ce.fromBase64String(e):Ce.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="server_timestamp",Db="__type__",Ob="__previous_value__",Vb="__local_write_time__";function gh(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Db])==null?void 0:i.stringValue)===Nb}function yh(e){const t=e.mapValue.fields[Ob];return gh(t)?yh(t):t}function el(e){const t=Ts(e.mapValue.fields[Vb].timestampValue);return new Pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,n,i,s,r,a,l,u,f,m){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}}const Dc="(default)";class nl{constructor(t,n){this.projectId=t,this.database=n||Dc}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(t){return t instanceof nl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="__type__",cI="__max__",wu={mapValue:{}},kb="__vector__",Oc="value";function As(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gh(e)?4:fI(e)?9007199254740991:hI(e)?10:11:X(28295,{value:e})}function Qn(e,t){if(e===t)return!0;const n=As(e);if(n!==As(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return el(e).isEqual(el(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Ts(s.timestampValue),l=Ts(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return bs(s.bytesValue).isEqual(bs(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return ne(s.geoPointValue.latitude)===ne(r.geoPointValue.latitude)&&ne(s.geoPointValue.longitude)===ne(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return ne(s.integerValue)===ne(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=ne(s.doubleValue),l=ne(r.doubleValue);return a===l?Nc(a)===Nc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ya(e.arrayValue.values||[],t.arrayValue.values||[],Qn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(Q_(a)!==Q_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qn(a[u],l[u])))return!1;return!0}(e,t);default:return X(52216,{left:e})}}function il(e,t){return(e.values||[]).find(n=>Qn(n,t))!==void 0}function _a(e,t){if(e===t)return 0;const n=As(e),i=As(t);if(n!==i)return ft(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ft(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=ne(r.integerValue||r.doubleValue),u=ne(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Y_(e.timestampValue,t.timestampValue);case 4:return Y_(el(e),el(t));case 5:return Fd(e.stringValue,t.stringValue);case 6:return function(r,a){const l=bs(r),u=bs(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const m=ft(l[f],u[f]);if(m!==0)return m}return ft(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=ft(ne(r.latitude),ne(a.latitude));return l!==0?l:ft(ne(r.longitude),ne(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return $_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var p,_,C,O;const l=r.fields||{},u=a.fields||{},f=(p=l[Oc])==null?void 0:p.arrayValue,m=(_=u[Oc])==null?void 0:_.arrayValue,g=ft(((C=f==null?void 0:f.values)==null?void 0:C.length)||0,((O=m==null?void 0:m.values)==null?void 0:O.length)||0);return g!==0?g:$_(f,m)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===wu.mapValue&&a===wu.mapValue)return 0;if(r===wu.mapValue)return 1;if(a===wu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const p=Fd(u[g],m[g]);if(p!==0)return p;const _=_a(l[u[g]],f[m[g]]);if(_!==0)return _}return ft(u.length,m.length)}(e.mapValue,t.mapValue);default:throw X(23264,{he:n})}}function Y_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ft(e,t);const n=Ts(e),i=Ts(t),s=ft(n.seconds,i.seconds);return s!==0?s:ft(n.nanos,i.nanos)}function $_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=_a(n[s],i[s]);if(r)return r}return ft(n.length,i.length)}function va(e){return Gd(e)}function Gd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Ts(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return bs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return K.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Gd(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Gd(n.fields[a])}`;return s+"}"}(e.mapValue):X(61005,{value:e})}function Hu(e){switch(As(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yh(e);return t?16+Hu(t):16;case 5:return 2*e.stringValue.length;case 6:return bs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Hu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Is(i.fields,(r,a)=>{s+=r.length+Hu(a)}),s}(e.mapValue);default:throw X(13486,{value:e})}}function Vc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qd(e){return!!e&&"integerValue"in e}function pp(e){return!!e&&"arrayValue"in e}function X_(e){return!!e&&"nullValue"in e}function Z_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fu(e){return!!e&&"mapValue"in e}function hI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Mb])==null?void 0:i.stringValue)===kb}function Mo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Is(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Mo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Mo(e.arrayValue.values[n]);return t}return{...e}}function fI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===cI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.value=t}static empty(){return new ze({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Fu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mo(n)}setAll(t){let n=xe.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=Mo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Qn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Fu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Is(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new ze(Mo(this.value))}}function jb(e){const t=[];return Is(e.fields,(n,i)=>{const s=new xe([n]);if(Fu(i)){const r=jb(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new rn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ye(t,0,W.min(),W.min(),W.min(),ze.empty(),0)}static newFoundDocument(t,n,i,s){return new ye(t,1,n,W.min(),i,s,0)}static newNoDocument(t,n){return new ye(t,2,n,W.min(),W.min(),ze.empty(),0)}static newUnknownDocument(t,n){return new ye(t,3,n,W.min(),W.min(),ze.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ze.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ye&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,n){this.position=t,this.inclusive=n}}function W_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=_a(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function J_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n="asc"){this.field=t,this.dir=n}}function dI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{}class ae extends Pb{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new pI(t,n,i):n==="array-contains"?new _I(t,i):n==="in"?new vI(t,i):n==="not-in"?new EI(t,i):n==="array-contains-any"?new TI(t,i):new ae(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new gI(t,i):new yI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_a(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(_a(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends Pb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Cn(t,n)}matches(t){return Lb(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lb(e){return e.op==="and"}function Ub(e){return mI(e)&&Lb(e)}function mI(e){for(const t of e.filters)if(t instanceof Cn)return!1;return!0}function Kd(e){if(e instanceof ae)return e.field.canonicalString()+e.op.toString()+va(e.value);if(Ub(e))return e.filters.map(t=>Kd(t)).join(",");{const t=e.filters.map(n=>Kd(n)).join(",");return`${e.op}(${t})`}}function zb(e,t){return e instanceof ae?function(i,s){return s instanceof ae&&i.op===s.op&&i.field.isEqual(s.field)&&Qn(i.value,s.value)}(e,t):e instanceof Cn?function(i,s){return s instanceof Cn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&zb(a,s.filters[l]),!0):!1}(e,t):void X(19439)}function Bb(e){return e instanceof ae?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(e):e instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(Bb).join(" ,")+"}"}(e):"Filter"}class pI extends ae{constructor(t,n,i){super(t,n,i),this.key=K.fromName(i.referenceValue)}matches(t){const n=K.comparator(t.key,this.key);return this.matchesComparison(n)}}class gI extends ae{constructor(t,n){super(t,"in",n),this.keys=qb("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class yI extends ae{constructor(t,n){super(t,"not-in",n),this.keys=qb("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function qb(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class _I extends ae{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return pp(n)&&il(n.arrayValue,this.value)}}class vI extends ae{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class EI extends ae{constructor(t,n){super(t,"not-in",n)}matches(t){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!il(this.value.arrayValue,n)}}class TI extends ae{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function tv(e,t=null,n=[],i=[],s=null,r=null,a=null){return new bI(e,t,n,i,s,r,a)}function gp(e){const t=nt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Kd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Ol(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>va(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>va(i)).join(",")),t.Te=n}return t.Te}function yp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!zb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!J_(e.startAt,t.startAt)&&J_(e.endAt,t.endAt)}function Yd(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AI(e,t,n,i,s,r,a,l){return new hr(e,t,n,i,s,r,a,l)}function _h(e){return new hr(e)}function ev(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function _p(e){return e.collectionGroup!==null}function Jr(e){const t=nt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new he(xe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new sl(r,i))}),n.has(xe.keyField().canonicalString())||t.Ie.push(new sl(xe.keyField(),i))}return t.Ie}function Bn(e){const t=nt(e);return t.Ee||(t.Ee=SI(t,Jr(e))),t.Ee}function SI(e,t){if(e.limitType==="F")return tv(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new sl(s.field,r)});const n=e.endAt?new Ea(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ea(e.startAt.position,e.startAt.inclusive):null;return tv(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function $d(e,t){const n=e.filters.concat([t]);return new hr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Mc(e,t,n){return new hr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vh(e,t){return yp(Bn(e),Bn(t))&&e.limitType===t.limitType}function Hb(e){return`${gp(Bn(e))}|lt:${e.limitType}`}function Ir(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Bb(s)).join(", ")}]`),Ol(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>va(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>va(s)).join(",")),`Target(${i})`}(Bn(e))}; limitType=${e.limitType})`}function Eh(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):K.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of Jr(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const f=W_(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,Jr(i),s)||i.endAt&&!function(a,l,u){const f=W_(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,Jr(i),s))}(e,t)}function wI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fb(e){return(t,n)=>{let i=!1;for(const s of Jr(e)){const r=xI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function xI(e,t,n){const i=e.field.isKeyField()?K.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),f=l.data.field(r);return u!==null&&f!==null?_a(u,f):X(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Is(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return Ib(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Gt(K.comparator);function Si(){return RI}const Gb=new Gt(K.comparator);function po(...e){let t=Gb;for(const n of e)t=t.insert(n.key,n);return t}function Qb(e){let t=Gb;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function qs(){return ko()}function Kb(){return ko()}function ko(){return new fr(e=>e.toString(),(e,t)=>e.isEqual(t))}const II=new Gt(K.comparator),CI=new he(K.comparator);function dt(...e){let t=CI;for(const n of e)t=t.add(n);return t}const NI=new he(ft);function DI(){return NI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(t)?"-0":t}}function Yb(e){return{integerValue:""+e}}function $b(e,t){return rI(t)?Yb(t):vp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this._=void 0}}function OI(e,t,n){return e instanceof rl?function(s,r){const a={fields:{[Db]:{stringValue:Nb},[Vb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&gh(r)&&(r=yh(r)),r&&(a.fields[Ob]=r),{mapValue:a}}(n,t):e instanceof al?Zb(e,t):e instanceof ol?Wb(e,t):function(s,r){const a=Xb(s,r),l=nv(a)+nv(s.Ae);return Qd(a)&&Qd(s.Ae)?Yb(l):vp(s.serializer,l)}(e,t)}function VI(e,t,n){return e instanceof al?Zb(e,t):e instanceof ol?Wb(e,t):n}function Xb(e,t){return e instanceof ll?function(i){return Qd(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class rl extends Th{}class al extends Th{constructor(t){super(),this.elements=t}}function Zb(e,t){const n=Jb(t);for(const i of e.elements)n.some(s=>Qn(s,i))||n.push(i);return{arrayValue:{values:n}}}class ol extends Th{constructor(t){super(),this.elements=t}}function Wb(e,t){let n=Jb(t);for(const i of e.elements)n=n.filter(s=>!Qn(s,i));return{arrayValue:{values:n}}}class ll extends Th{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function nv(e){return ne(e.integerValue||e.doubleValue)}function Jb(e){return pp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t,n){this.field=t,this.transform=n}}function MI(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof al&&s instanceof al||i instanceof ol&&s instanceof ol?ya(i.elements,s.elements,Qn):i instanceof ll&&s instanceof ll?Qn(i.Ae,s.Ae):i instanceof rl&&s instanceof rl}(e.transform,t.transform)}class kI{constructor(t,n){this.version=t,this.transformResults=n}}class Re{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Re}static exists(t){return new Re(void 0,t)}static updateTime(t){return new Re(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class bh{}function eA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ah(e.key,Re.none()):new Vl(e.key,e.data,Re.none());{const n=e.data,i=ze.empty();let s=new he(xe.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Cs(e.key,i,new rn(s.toArray()),Re.none())}}function jI(e,t,n){e instanceof Vl?function(s,r,a){const l=s.value.clone(),u=sv(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Cs?function(s,r,a){if(!Gu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=sv(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(nA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function jo(e,t,n,i){return e instanceof Vl?function(r,a,l,u){if(!Gu(r.precondition,a))return l;const f=r.value.clone(),m=rv(r.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,i):e instanceof Cs?function(r,a,l,u){if(!Gu(r.precondition,a))return l;const f=rv(r.fieldTransforms,u,a),m=a.data;return m.setAll(nA(r)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return Gu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function PI(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=Xb(i.transform,s||null);r!=null&&(n===null&&(n=ze.empty()),n.set(i.field,r))}return n||null}function iv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ya(i,s,(r,a)=>MI(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vl extends bh{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cs extends bh{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function nA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function sv(e,t,n){const i=new Map;yt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,VI(a,l,n[s]))}return i}function rv(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,OI(r,a,t))}return i}class Ah extends bh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iA extends bh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&jI(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=jo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=jo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Kb();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=eA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),dt())}isEqual(t){return this.batchId===t.batchId&&ya(this.mutations,t.mutations,(n,i)=>iv(n,i))&&ya(this.baseMutations,t.baseMutations,(n,i)=>iv(n,i))}}class Ep{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){yt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return II}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Ep(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se,pt;function sA(e){switch(e){case k.OK:return X(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return X(15467,{code:e})}}function rA(e){if(e===void 0)return Ai("GRPC error has no .code"),k.UNKNOWN;switch(e){case se.OK:return k.OK;case se.CANCELLED:return k.CANCELLED;case se.UNKNOWN:return k.UNKNOWN;case se.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case se.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case se.INTERNAL:return k.INTERNAL;case se.UNAVAILABLE:return k.UNAVAILABLE;case se.UNAUTHENTICATED:return k.UNAUTHENTICATED;case se.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case se.NOT_FOUND:return k.NOT_FOUND;case se.ALREADY_EXISTS:return k.ALREADY_EXISTS;case se.PERMISSION_DENIED:return k.PERMISSION_DENIED;case se.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case se.ABORTED:return k.ABORTED;case se.OUT_OF_RANGE:return k.OUT_OF_RANGE;case se.UNIMPLEMENTED:return k.UNIMPLEMENTED;case se.DATA_LOSS:return k.DATA_LOSS;default:return X(39323,{code:e})}}(pt=se||(se={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new ms([4294967295,4294967295],0);function av(e){const t=BI().encode(e),n=new yb;return n.update(t),new Uint8Array(n.digest())}function ov(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ms([n,i],0),new ms([s,r],0)]}class Tp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(i<0)throw new go(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ms.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(ms.fromNumber(i)));return s.compare(qI)===1&&(s=new ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=av(t),[i,s]=ov(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Tp(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=av(t),[i,s]=ov(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Ml.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Sh(W.min(),s,new Gt(ft),Si(),dt())}}class Ml{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Ml(i,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class aA{constructor(t,n){this.targetId=t,this.Ce=n}}class oA{constructor(t,n,i=Ce.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class lv{constructor(){this.ve=0,this.Fe=uv(),this.Me=Ce.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=dt(),n=dt(),i=dt();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:X(38017,{changeType:r})}}),new Ml(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=uv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Si(),this.Je=xu(),this.He=xu(),this.Ye=new Gt(ft)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:X(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Yd(r))if(i===0){const a=new K(r.path);this.et(n,a,ye.newNoDocument(a,W.min()))}else yt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=bs(i).toUint8Array()}catch(u){if(u instanceof Cb)return ga("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tp(a,s,r)}catch(u){return ga(u instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Yd(l.target)){const u=new K(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ye.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=dt();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new Sh(t,n,this.Ye,this.je,i);return this.je=Si(),this.Je=xu(),this.He=xu(),this.Ye=new Gt(ft),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new lv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new he(ft),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new he(ft),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new lv),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function xu(){return new Gt(K.comparator)}function uv(){return new Gt(K.comparator)}const FI={asc:"ASCENDING",desc:"DESCENDING"},GI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QI={and:"AND",or:"OR"};class KI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Xd(e,t){return e.useProto3Json||Ol(t)?t:{value:t}}function kc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function YI(e,t){return kc(e,t.toTimestamp())}function cn(e){return yt(!!e,49232),W.fromTimestamp(function(n){const i=Ts(n);return new Pt(i.seconds,i.nanos)}(e))}function bp(e,t){return Zd(e,t).canonicalString()}function Zd(e,t){const n=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function uA(e){const t=xt.fromString(e);return yt(pA(t),10190,{key:t.toString()}),t}function jc(e,t){return bp(e.databaseId,t.path)}function Po(e,t){const n=uA(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(hA(n))}function cA(e,t){return bp(e.databaseId,t)}function $I(e){const t=uA(e);return t.length===4?xt.emptyPath():hA(t)}function Wd(e){return new xt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hA(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function cv(e,t,n){return{name:jc(e,t),fields:n.value.mapValue.fields}}function XI(e,t){return"found"in t?function(i,s){yt(!!s.found,43571),s.found.name,s.found.updateTime;const r=Po(i,s.found.name),a=cn(s.found.updateTime),l=s.found.createTime?cn(s.found.createTime):W.min(),u=new ze({mapValue:{fields:s.found.fields}});return ye.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){yt(!!s.missing,3894),yt(!!s.readTime,22933);const r=Po(i,s.missing),a=cn(s.readTime);return ye.newNoDocument(r,a)}(e,t):X(7234,{result:t})}function ZI(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(f,m){return f.useProto3Json?(yt(m===void 0||typeof m=="string",58123),Ce.fromBase64String(m||"")):(yt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ce.fromUint8Array(m||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const m=f.code===void 0?k.UNKNOWN:rA(f.code);return new z(m,f.message||"")}(a);n=new oA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Po(e,i.document.name),r=cn(i.document.updateTime),a=i.document.createTime?cn(i.document.createTime):W.min(),l=new ze({mapValue:{fields:i.document.fields}}),u=ye.newFoundDocument(s,r,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Qu(f,m,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Po(e,i.document),r=i.readTime?cn(i.readTime):W.min(),a=ye.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Qu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Po(e,i.document),r=i.removedTargetIds||[];n=new Qu([],r,s,null)}else{if(!("filter"in t))return X(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new zI(s,r),l=i.targetId;n=new aA(l,a)}}return n}function fA(e,t){let n;if(t instanceof Vl)n={update:cv(e,t.key,t.value)};else if(t instanceof Ah)n={delete:jc(e,t.key)};else if(t instanceof Cs)n={update:cv(e,t.key,t.data),updateMask:aC(t.fieldMask)};else{if(!(t instanceof iA))return X(16599,{Vt:t.type});n={verify:jc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof rl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof al)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ol)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ll)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:YI(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:X(27497)}(e,t.precondition)),n}function WI(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?cn(s.updateTime):cn(r);return a.isEqual(W.min())&&(a=cn(r)),new kI(a,s.transformResults||[])}(n,t))):[]}function JI(e,t){return{documents:[cA(e,t.path)]}}function tC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=cA(e,s);const r=function(f){if(f.length!==0)return mA(Cn.create(f,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(f){if(f.length!==0)return f.map(m=>function(p){return{field:Cr(p.field),direction:iC(p.dir)}}(m))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Xd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ft:n,parent:s}}function eC(e){let t=$I(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){yt(i===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:t=t.child(m.collectionId)}let r=[];n.where&&(r=function(g){const p=dA(g);return p instanceof Cn&&Ub(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(C){return new sl(Nr(C.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,Ol(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,_=g.values||[];return new Ea(_,p)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const p=!g.before,_=g.values||[];return new Ea(_,p)}(n.endAt)),AI(t,s,a,r,l,"F",u,f)}function nC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function dA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Nr(n.unaryFilter.field);return ae.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Nr(n.unaryFilter.field);return ae.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nr(n.unaryFilter.field);return ae.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nr(n.unaryFilter.field);return ae.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(e):e.fieldFilter!==void 0?function(n){return ae.create(Nr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(i=>dA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(e):X(30097,{filter:e})}function iC(e){return FI[e]}function sC(e){return GI[e]}function rC(e){return QI[e]}function Cr(e){return{fieldPath:e.canonicalString()}}function Nr(e){return xe.fromServerFormat(e.fieldPath)}function mA(e){return e instanceof ae?function(n){if(n.op==="=="){if(Z_(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z_(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cr(n.field),op:sC(n.op),value:n.value}}}(e):e instanceof Cn?function(n){const i=n.getFilters().map(s=>mA(s));return i.length===1?i[0]:{compositeFilter:{op:rC(n.op),filters:i}}}(e):X(54877,{filter:e})}function aC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function pA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t,n,i,s,r=W.min(),a=W.min(),l=Ce.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new ns(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.yt=t}}function lC(e){const t=eC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Mc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.Cn=new cC}addToCollectionParentIndex(t,n){return this.Cn.add(n),j.resolve()}getCollectionParents(t,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return j.resolve()}deleteFieldIndex(t,n){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,n){return j.resolve()}getDocumentsMatchingTarget(t,n){return j.resolve(null)}getIndexType(t,n){return j.resolve(0)}getFieldIndexes(t,n){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,n){return j.resolve(Es.min())}getMinOffsetFromCollectionGroup(t,n){return j.resolve(Es.min())}updateCollectionGroup(t,n,i){return j.resolve()}updateIndexEntries(t,n){return j.resolve()}}class cC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new he(xt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new he(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gA=41943040;class Ye{static withCacheSize(t){return new Ye(t,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ye.DEFAULT_COLLECTION_PERCENTILE=10,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ye.DEFAULT=new Ye(gA,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ye.DISABLED=new Ye(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ta(0)}static cr(){return new Ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="LruGarbageCollector",hC=1048576;function dv([e,t],[n,i]){const s=ft(e,n);return s===0?ft(t,i):s}class fC{constructor(t){this.Ir=t,this.buffer=new he(dv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();dv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(fv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ka(n)?F(fv,"Ignoring IndexedDB error during garbage collection: ",n):await Ma(n)}await this.Vr(3e5)})}}class mC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return j.resolve(ph.ce);const i=new fC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(hv)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,f;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(f=Date.now(),Rr()<=ht.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function pC(e,t){return new mC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.changes=new fr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ye.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&jo(i.mutation,s,rn.empty(),Pt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,dt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=dt()){const s=qs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=po();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=qs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,dt()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=Si();const a=ko(),l=function(){return ko()}();return n.forEach((u,f)=>{const m=i.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Cs)?r=r.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),jo(m.mutation,f,m.mutation.getFieldMask(),Pt.now())):a.set(f.key,rn.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>l.set(f,new yC(m,a.get(f)??null))),l))}recalculateAndSaveOverlays(t,n){const i=ko();let s=new Gt((a,l)=>a-l),r=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let m=i.get(u)||rn.empty();m=l.applyToLocalView(f,m),i.set(u,m);const g=(s.get(l.batchId)||dt()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,m=u.value,g=Kb();m.forEach(p=>{if(!r.has(p)){const _=eA(n.get(p),i.get(p));_!==null&&g.set(p,_),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,g))}return j.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):_p(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):j.resolve(qs());let l=tl,u=r;return a.next(f=>j.forEach(f,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(m)?j.resolve():this.remoteDocumentCache.getEntry(t,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(t,f,r)).next(()=>this.computeViews(t,u,f,dt())).next(m=>({batchId:l,changes:Qb(m)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new K(n)).next(i=>{let s=po();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=po();return this.indexManager.getCollectionParents(t,r).next(l=>j.forEach(l,u=>{const f=function(g,p){return new hr(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,f,i,s).next(m=>{m.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,ye.newInvalidDocument(m)))});let l=po();return a.forEach((u,f)=>{const m=r.get(u);m!==void 0&&jo(m.mutation,f,rn.empty(),Pt.now()),Eh(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:cn(s.createTime)}}(n)),j.resolve()}getNamedQuery(t,n){return j.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:lC(s.bundledQuery),readTime:cn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.overlays=new Gt(K.comparator),this.qr=new Map}getOverlay(t,n){return j.resolve(this.overlays.get(n))}getOverlays(t,n){const i=qs();return j.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),j.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(t,n,i){const s=qs(),r=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Gt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=r.get(f.largestBatchId);m===null&&(m=qs(),r=r.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const l=qs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=s)););return j.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new UI(n,i));let r=this.qr.get(n);r===void 0&&(r=dt(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.sessionToken=Ce.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this.Qr=new he(me.$r),this.Ur=new he(me.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new me(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new me(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new K(new xt([])),i=new me(n,t),s=new me(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new K(new xt([])),i=new me(n,t),s=new me(n,t+1);let r=dt();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new me(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class me{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return K.comparator(t.key,n.key)||ft(t.Yr,n.Yr)}static Kr(t,n){return ft(t.Yr,n.Yr)||K.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new he(me.$r)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new LI(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new me(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return j.resolve(a)}lookupMutationBatch(t,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return j.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?mp:this.tr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new me(n,0),s=new me(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),j.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new he(ft);return n.forEach(s=>{const r=new me(s,0),a=new me(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;K.isDocumentKey(r)||(r=r.child(""));const a=new me(new K(r),0);let l=new he(ft);return this.Zr.forEachWhile(u=>{const f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)},a),j.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(n.mutations,s=>{const r=new me(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new me(n,0),s=this.Zr.firstAfterOrEqual(i);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t){this.ri=t,this.docs=function(){return new Gt(K.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():ye.newInvalidDocument(n))}getEntries(t,n){let i=Si();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ye.newInvalidDocument(s))}),j.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=Si();const a=n.path,l=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||eI(tI(m),i)<=0||(s.has(m.key)||Eh(n,m))&&(r=r.insert(m.key,m.mutableCopy()))}return j.resolve(r)}getAllFromCollectionGroup(t,n,i,s){X(9500)}ii(t,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new SC(this)}getSize(t){return j.resolve(this.size)}}class SC extends gC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),j.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(t){this.persistence=t,this.si=new fr(n=>gp(n),yp),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new Ap,this.targetCount=0,this.ai=Ta.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),j.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ta(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(t,n){return this.Pr(n),j.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),j.waitFor(r).next(()=>s)}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return j.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),j.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),j.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return j.resolve(i)}containsKey(t,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(t,n){this.ui={},this.overlays={},this.ci=new ph(0),this.li=!1,this.li=!0,this.hi=new TC,this.referenceDelegate=t(this),this.Pi=new wC(this),this.indexManager=new uC,this.remoteDocumentCache=function(s){return new AC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new oC(n),this.Ii=new vC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new EC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new bC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const s=new xC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return j.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class xC extends iI{constructor(t){super(),this.currentSequenceNumber=t}}class Sp{constructor(t){this.persistence=t,this.Ri=new Ap,this.Vi=null}static mi(t){return new Sp(t)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),j.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,i=>{const s=K.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,W.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Pc{constructor(t,n){this.persistence=t,this.pi=new fr(i=>aI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=pC(this,n)}static mi(t,n){return new Pc(t,n)}Ei(){}di(t){return j.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return j.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?j.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,W.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),j.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Hu(t.data.value)),n}br(t,n,i){return j.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=dt(),s=dt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new wp(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return SR()?8:sI(je())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new RC;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(Rr()<=ht.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ir(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Rr()<=ht.DEBUG&&F("QueryEngine","Query:",Ir(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Rr()<=ht.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ir(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bn(n))):j.resolve())}ys(t,n){if(ev(n))return j.resolve(null);let i=Bn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mc(n,null,"F"),i=Bn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=dt(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(t,Mc(n,null,"F")):this.vs(t,f,n,u)}))})))}ws(t,n,i,s){return ev(n)||s.isEqual(W.min())?j.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?j.resolve(null):(Rr()<=ht.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ir(n)),this.vs(t,a,n,J2(s,tl)).next(l=>l))})}Ds(t,n){let i=new he(Fb(t));return n.forEach((s,r)=>{Eh(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return Rr()<=ht.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ir(n)),this.ps.getDocumentsMatchingQuery(t,n,Es.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="LocalStore",CC=3e8;class NC{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Gt(ft),this.xs=new fr(r=>gp(r),yp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _C(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function DC(e,t,n,i){return new NC(e,t,n,i)}async function _A(e,t){const n=nt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=dt();for(const f of s){a.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}for(const f of r){l.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:l}))})})}function OC(e,t){const n=nt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){const g=f.batch,p=g.keys();let _=j.resolve();return p.forEach(C=>{_=_.next(()=>m.getEntry(u,C)).next(O=>{const V=f.docVersions.get(C);yt(V!==null,48541),O.version.compareTo(V)<0&&(g.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),m.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=dt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function vA(e){const t=nt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function VC(e,t){const n=nt(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((m,g)=>{const p=s.get(g);if(!p)return;l.push(n.Pi.removeMatchingKeys(r,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,m.addedDocuments,g)));let _=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Ce.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,i)),s=s.insert(g,_),function(O,V,S){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=CC?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,_,m)&&l.push(n.Pi.updateTargetData(r,_))});let u=Si(),f=dt();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,m))}),l.push(MC(r,a,t.documentUpdates).next(m=>{u=m.ks,f=m.qs})),!i.isEqual(W.min())){const m=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(m)}return j.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,f)).next(()=>u)}).then(r=>(n.Ms=s,r))}function MC(e,t,n){let i=dt(),s=dt();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=Si();return n.forEach((l,u)=>{const f=r.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(W.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(xp,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{ks:a,qs:s}})}function kC(e,t){const n=nt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=mp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function jC(e,t){const n=nt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,j.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new ns(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Jd(e,t,n){const i=nt(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ka(a))throw a;F(xp,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function mv(e,t,n){const i=nt(e);let s=W.min(),r=dt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){const g=nt(u),p=g.xs.get(m);return p!==void 0?j.resolve(g.Ms.get(p)):g.Pi.getTargetData(f,m)}(i,a,Bn(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:W.min(),n?r:dt())).next(l=>(PC(i,wI(t),l),{documents:l,Qs:r})))}function PC(e,t,n){let i=e.Os.get(t)||W.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class pv{constructor(){this.activeTargetIds=DI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class LC{constructor(){this.Mo=new pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new pv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="ConnectivityMonitor";class yv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(gv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(gv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function tm(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="RestConnection",zC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Dc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=tm(),l=this.zo(t,n.toUriEncodedString());F(Pf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:f}=new URL(l),m=Da(f);return this.Jo(t,l,u,i,m).then(g=>(F(Pf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw ga(Pf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=zC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe="WebChannelConnection";class HC extends BC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=tm();return new Promise((l,u)=>{const f=new _b;f.setWithCredentials(!0),f.listenOnce(vb.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case qu.NO_ERROR:const g=f.getResponseJson();F(Oe,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case qu.TIMEOUT:F(Oe,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const p=f.getStatus();if(F(Oe,`RPC '${t}' ${a} failed with status:`,p,"response text:",f.getResponseText()),p>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const O=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(C.status);u(new z(O,C.message))}else u(new z(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{F(Oe,`RPC '${t}' ${a} completed.`)}});const m=JSON.stringify(s);F(Oe,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",m,i,15)})}T_(t,n,i){const s=tm(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=bb(),l=Tb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=r.join("");F(Oe,`Creating RPC '${t}' stream ${s}: ${m}`,u);const g=a.createWebChannel(m,u);this.I_(g);let p=!1,_=!1;const C=new qC({Yo:V=>{_?F(Oe,`Not sending because RPC '${t}' stream ${s} is closed:`,V):(p||(F(Oe,`Opening RPC '${t}' stream ${s} transport.`),g.open(),p=!0),F(Oe,`RPC '${t}' stream ${s} sending:`,V),g.send(V))},Zo:()=>g.close()}),O=(V,S,E)=>{V.listen(S,x=>{try{E(x)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,mo.EventType.OPEN,()=>{_||(F(Oe,`RPC '${t}' stream ${s} transport opened.`),C.o_())}),O(g,mo.EventType.CLOSE,()=>{_||(_=!0,F(Oe,`RPC '${t}' stream ${s} transport closed`),C.a_(),this.E_(g))}),O(g,mo.EventType.ERROR,V=>{_||(_=!0,ga(Oe,`RPC '${t}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),C.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,mo.EventType.MESSAGE,V=>{var S;if(!_){const E=V.data[0];yt(!!E,16349);const x=E,D=(x==null?void 0:x.error)||((S=x[0])==null?void 0:S.error);if(D){F(Oe,`RPC '${t}' stream ${s} received error:`,D);const L=D.status;let H=function(b){const A=se[b];if(A!==void 0)return rA(A)}(L),T=D.message;H===void 0&&(H=k.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,C.a_(new z(H,T)),g.close()}else F(Oe,`RPC '${t}' stream ${s} received:`,E),C.u_(E)}}),O(l,Eb.STAT_EVENT,V=>{V.stat===Hd.PROXY?F(Oe,`RPC '${t}' stream ${s} detected buffering proxy`):V.stat===Hd.NOPROXY&&F(Oe,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(e){return new KI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="PersistentStream";class EA{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(_v,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(_v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FC extends EA{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=ZI(this.serializer,t),i=function(r){if(!("targetChange"in r))return W.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?W.min():a.readTime?cn(a.readTime):W.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Wd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Yd(u)?{documents:JI(r,u)}:{query:tC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=lA(r,a.resumeToken);const f=Xd(r,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(W.min())>0){l.readTime=kc(r,a.snapshotVersion.toTimestamp());const f=Xd(r,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const i=nC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Wd(this.serializer),n.removeTarget=t,this.q_(n)}}class GC extends EA{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=WI(t.writeResults,t.commitTime),i=cn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Wd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>fA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{}class KC extends QC{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,Zd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(k.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Zd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class YC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="RemoteStore";class $C{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{dr(this)&&(F(sr,"Restarting streams for network reachability change."),await async function(u){const f=nt(u);f.Ea.add(4),await kl(f),f.Ra.set("Unknown"),f.Ea.delete(4),await xh(f)}(this))})}),this.Ra=new YC(i,s)}}async function xh(e){if(dr(e))for(const t of e.da)await t(!0)}async function kl(e){for(const t of e.da)await t(!1)}function TA(e,t){const n=nt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Dp(n)?Np(n):ja(n).O_()&&Cp(n,t))}function Ip(e,t){const n=nt(e),i=ja(n);n.Ia.delete(t),i.O_()&&bA(n,t),n.Ia.size===0&&(i.O_()?i.L_():dr(n)&&n.Ra.set("Unknown"))}function Cp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(W.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ja(e).Y_(t)}function bA(e,t){e.Va.Ue(t),ja(e).Z_(t)}function Np(e){e.Va=new HI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ja(e).start(),e.Ra.ua()}function Dp(e){return dr(e)&&!ja(e).x_()&&e.Ia.size>0}function dr(e){return nt(e).Ea.size===0}function AA(e){e.Va=void 0}async function XC(e){e.Ra.set("Online")}async function ZC(e){e.Ia.forEach((t,n)=>{Cp(e,t)})}async function WC(e,t){AA(e),Dp(e)?(e.Ra.ha(t),Np(e)):e.Ra.set("Unknown")}async function JC(e,t,n){if(e.Ra.set("Online"),t instanceof oA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){F(sr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Lc(e,i)}else if(t instanceof Qu?e.Va.Ze(t):t instanceof aA?e.Va.st(t):e.Va.tt(t),!n.isEqual(W.min()))try{const i=await vA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const m=r.Ia.get(f);m&&r.Ia.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{const m=r.Ia.get(u);if(!m)return;r.Ia.set(u,m.withResumeToken(Ce.EMPTY_BYTE_STRING,m.snapshotVersion)),bA(r,u);const g=new ns(m.target,u,f,m.sequenceNumber);Cp(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(sr,"Failed to raise snapshot:",i),await Lc(e,i)}}async function Lc(e,t,n){if(!ka(t))throw t;e.Ea.add(1),await kl(e),e.Ra.set("Offline"),n||(n=()=>vA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(sr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await xh(e)})}function SA(e,t){return t().catch(n=>Lc(e,n,t))}async function Rh(e){const t=nt(e),n=Ss(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:mp;for(;tN(t);)try{const s=await kC(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,eN(t,s)}catch(s){await Lc(t,s)}wA(t)&&xA(t)}function tN(e){return dr(e)&&e.Ta.length<10}function eN(e,t){e.Ta.push(t);const n=Ss(e);n.O_()&&n.X_&&n.ea(t.mutations)}function wA(e){return dr(e)&&!Ss(e).x_()&&e.Ta.length>0}function xA(e){Ss(e).start()}async function nN(e){Ss(e).ra()}async function iN(e){const t=Ss(e);for(const n of e.Ta)t.ea(n.mutations)}async function sN(e,t,n){const i=e.Ta.shift(),s=Ep.from(i,t,n);await SA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Rh(e)}async function rN(e,t){t&&Ss(e).X_&&await async function(i,s){if(function(a){return sA(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();Ss(i).B_(),await SA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Rh(i)}}(e,t),wA(e)&&xA(e)}async function vv(e,t){const n=nt(e);n.asyncQueue.verifyOperationInProgress(),F(sr,"RemoteStore received new credentials");const i=dr(n);n.Ea.add(3),await kl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await xh(n)}async function aN(e,t){const n=nt(e);t?(n.Ea.delete(2),await xh(n)):t||(n.Ea.add(2),await kl(n),n.Ra.set("Unknown"))}function ja(e){return e.ma||(e.ma=function(n,i,s){const r=nt(n);return r.sa(),new FC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:XC.bind(null,e),t_:ZC.bind(null,e),r_:WC.bind(null,e),H_:JC.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Dp(e)?Np(e):e.Ra.set("Unknown")):(await e.ma.stop(),AA(e))})),e.ma}function Ss(e){return e.fa||(e.fa=function(n,i,s){const r=nt(n);return r.sa(),new GC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:nN.bind(null,e),r_:rN.bind(null,e),ta:iN.bind(null,e),na:sN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Rh(e)):(await e.fa.stop(),e.Ta.length>0&&(F(sr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new Op(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(e,t){if(Ai("AsyncQueue",`${t}: ${e}`),ka(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(t){return new ta(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=po(),this.sortedSet=new Gt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ta)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new ta;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ga=new Gt(K.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):X(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ba{constructor(t,n,i,s,r,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ba(t,n,ta.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class lN{constructor(){this.queries=Tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=nt(n),r=s.queries;s.queries=Tv(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function Tv(){return new fr(e=>Hb(e),vh)}async function Mp(e,t){const n=nt(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new oN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Vp(a,`Initialization of query '${Ir(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&jp(n)}async function kp(e,t){const n=nt(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function uN(e,t){const n=nt(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&jp(n)}function cN(e,t,n){const i=nt(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function jp(e){e.Ca.forEach(t=>{t.next()})}var em,bv;(bv=em||(em={})).Ma="default",bv.Cache="cache";class Pp{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new ba(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ba.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(t){this.key=t}}class IA{constructor(t){this.key=t}}class hN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=Fb(t),this.tu=new ta(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new Ev,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((m,g)=>{const p=s.get(m),_=Eh(this.query,g)?g:null,C=!!p&&this.mutatedKeys.has(p.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;p&&_?p.data.isEqual(_.data)?C!==O&&(i.track({type:3,doc:_}),V=!0):this.su(p,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||f&&this.eu(_,f)<0)&&(l=!0)):!p&&_?(i.track({type:0,doc:_}),V=!0):p&&!_&&(i.track({type:1,doc:p}),V=!0,(u||f)&&(l=!0)),V&&(_?(a=a.add(_),r=O?r.add(m):r.delete(m)):(a=a.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((m,g)=>function(_,C){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:V})}};return O(_)-O(C)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new ba(this.query,t.tu,r,a,t.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=dt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new IA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new RA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=dt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ba.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lp="SyncEngine";class fN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class dN{constructor(t){this.key=t,this.hu=!1}}class mN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new fr(l=>Hb(l),vh),this.Iu=new Map,this.Eu=new Set,this.du=new Gt(K.comparator),this.Au=new Map,this.Ru=new Ap,this.Vu={},this.mu=new Map,this.fu=Ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pN(e,t,n=!0){const i=MA(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await CA(i,t,n,!0),s}async function gN(e,t){const n=MA(e);await CA(n,t,!0,!1)}async function CA(e,t,n,i){const s=await jC(e.localStore,Bn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await yN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&TA(e.remoteStore,s),l}async function yN(e,t,n,i,s){e.pu=(g,p,_)=>async function(O,V,S,E){let x=V.view.ru(S);x.Cs&&(x=await mv(O.localStore,V.query,!1).then(({documents:T})=>V.view.ru(T,x)));const D=E&&E.targetChanges.get(V.targetId),L=E&&E.targetMismatches.get(V.targetId)!=null,H=V.view.applyChanges(x,O.isPrimaryClient,D,L);return Sv(O,V.targetId,H.au),H.snapshot}(e,g,p,_);const r=await mv(e.localStore,t,!0),a=new hN(t,r.Qs),l=a.ru(r.documents),u=Ml.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);Sv(e,n,f.au);const m=new fN(t,n,a);return e.Tu.set(t,m),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function _N(e,t,n){const i=nt(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!vh(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Jd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ip(i.remoteStore,s.targetId),nm(i,s.targetId)}).catch(Ma)):(nm(i,s.targetId),await Jd(i.localStore,s.targetId,!0))}async function vN(e,t){const n=nt(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(n.remoteStore,i.targetId))}async function EN(e,t,n){const i=RN(e);try{const s=await function(a,l){const u=nt(a),f=Pt.now(),m=l.reduce((_,C)=>_.add(C.key),dt());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=Si(),O=dt();return u.Ns.getEntries(_,m).next(V=>{C=V,C.forEach((S,E)=>{E.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,C)).next(V=>{g=V;const S=[];for(const E of l){const x=PI(E,g.get(E.key).overlayedDocument);x!=null&&S.push(new Cs(E.key,x,jb(x.value.mapValue),Re.exists(!0)))}return u.mutationQueue.addMutationBatch(_,f,S,l)}).next(V=>{p=V;const S=V.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,S)})}).then(()=>({batchId:p.batchId,changes:Qb(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Gt(ft)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f}(i,s.batchId,n),await jl(i,s.changes),await Rh(i.remoteStore)}catch(s){const r=Vp(s,"Failed to persist write");n.reject(r)}}async function NA(e,t){const n=nt(e);try{const i=await VC(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?yt(a.hu,14607):s.removedDocuments.size>0&&(yt(a.hu,42227),a.hu=!1))}),await jl(n,i,t)}catch(i){await Ma(i)}}function Av(e,t,n){const i=nt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=nt(a);u.onlineState=l;let f=!1;u.queries.forEach((m,g)=>{for(const p of g.Sa)p.va(l)&&(f=!0)}),f&&jp(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function TN(e,t,n){const i=nt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Gt(K.comparator);a=a.insert(r,ye.newNoDocument(r,W.min()));const l=dt().add(r),u=new Sh(W.min(),new Map,new Gt(ft),a,l);await NA(i,u),i.du=i.du.remove(r),i.Au.delete(t),Up(i)}else await Jd(i.localStore,t,!1).then(()=>nm(i,t,n)).catch(Ma)}async function bN(e,t){const n=nt(e),i=t.batch.batchId;try{const s=await OC(n.localStore,t);OA(n,i,null),DA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jl(n,s)}catch(s){await Ma(s)}}async function AN(e,t,n){const i=nt(e);try{const s=await function(a,l){const u=nt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(g=>(yt(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(f,g))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,t);OA(i,t,n),DA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await jl(i,s)}catch(s){await Ma(s)}}function DA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function OA(e,t,n){const i=nt(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function nm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||VA(e,i)})}function VA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ip(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Up(e))}function Sv(e,t,n){for(const i of n)i instanceof RA?(e.Ru.addReference(i.key,t),SN(e,i)):i instanceof IA?(F(Lp,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||VA(e,i.key)):X(19791,{wu:i})}function SN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(Lp,"New document in limbo: "+n),e.Eu.add(i),Up(e))}function Up(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new K(xt.fromString(t)),i=e.fu.next();e.Au.set(i,new dN(n)),e.du=e.du.insert(n,i),TA(e.remoteStore,new ns(Bn(_h(n.path)),i,"TargetPurposeLimboResolution",ph.ce))}}async function jl(e,t,n){const i=nt(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(f){s.push(f);const g=wp.As(u.targetId,f);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,f){const m=nt(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(f,p=>j.forEach(p.Es,_=>m.persistence.referenceDelegate.addReference(g,p.targetId,_)).next(()=>j.forEach(p.ds,_=>m.persistence.referenceDelegate.removeReference(g,p.targetId,_)))))}catch(g){if(!ka(g))throw g;F(xp,"Failed to update sequence numbers: "+g)}for(const g of f){const p=g.targetId;if(!g.fromCache){const _=m.Ms.get(p),C=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(p,O)}}}(i.localStore,r))}async function wN(e,t){const n=nt(e);if(!n.currentUser.isEqual(t)){F(Lp,"User change. New user:",t.toKey());const i=await _A(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await jl(n,i.Ls)}}function xN(e,t){const n=nt(e),i=n.Au.get(t);if(i&&i.hu)return dt().add(i.key);{let s=dt();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function MA(e){const t=nt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=NA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TN.bind(null,t),t.Pu.H_=uN.bind(null,t.eventManager),t.Pu.yu=cN.bind(null,t.eventManager),t}function RN(e){const t=nt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AN.bind(null,t),t}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return DC(this.persistence,new IC,t.initialUser,this.serializer)}Cu(t){return new yA(Sp.mi,this.serializer)}Du(t){return new LC}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class IN extends Uc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){yt(this.persistence.referenceDelegate instanceof Pc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ye.withCacheSize(this.cacheSizeBytes):Ye.DEFAULT;return new yA(i=>Pc.mi(i,n),this.serializer)}}class im{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=wN.bind(null,this.syncEngine),await aN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new lN}()}createDatastore(t){const n=wh(t.databaseInfo.databaseId),i=function(r){return new HC(r)}(t.databaseInfo);return function(r,a,l,u){return new KC(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new $C(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return yv.v()?new yv:new UC}())}createSyncEngine(t,n){return function(s,r,a,l,u,f,m){const g=new mN(s,r,a,l,u,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=nt(s);F(sr,"RemoteStore shutting down."),r.Ea.add(5),await kl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}im.provider={build:()=>new im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ai("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=nt(s),l={documents:r.map(g=>jc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,xt.emptyPath(),l,r.length),f=new Map;u.forEach(g=>{const p=XI(a.serializer,g);f.set(p.key.toString(),p)});const m=[];return r.forEach(g=>{const p=f.get(g.toString());yt(!!p,55234,{key:g}),m.push(p)}),m}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ah(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=K.fromPath(i);this.mutations.push(new iA(s,this.precondition(s)))}),await async function(i,s){const r=nt(i),a={writes:s.map(l=>fA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,xt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw X(50498,{Gu:t.constructor.name});n=W.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(W.min())?Re.exists(!1):Re.updateTime(n):Re.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(W.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Re.updateTime(n)}return Re.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Rp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new CN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!Ol(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class DN{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ve.UNAUTHENTICATED,this.clientId=dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{F(ws,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(ws,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Vp(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Uf(e,t){e.asyncQueue.verifyOperationInProgress(),F(ws,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await _A(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ON(e);F(ws,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>vv(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>vv(t.remoteStore,s)),e._onlineComponents=t}async function ON(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(ws,"Using user provided OfflineComponentProvider");try{await Uf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ga("Error using user provided cache. Falling back to memory cache: "+n),await Uf(e,new Uc)}}else F(ws,"Using default OfflineComponentProvider"),await Uf(e,new IN(void 0));return e._offlineComponents}async function Bp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(ws,"Using user provided OnlineComponentProvider"),await wv(e,e._uninitializedComponentsProvider._online)):(F(ws,"Using default OnlineComponentProvider"),await wv(e,new im))),e._onlineComponents}function VN(e){return Bp(e).then(t=>t.syncEngine)}function MN(e){return Bp(e).then(t=>t.datastore)}async function zc(e){const t=await Bp(e),n=t.eventManager;return n.onListen=pN.bind(null,t.syncEngine),n.onUnlisten=_N.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=vN.bind(null,t.syncEngine),n}function kN(e,t,n={}){const i=new zn;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new zp({next:p=>{m.Nu(),a.enqueueAndForget(()=>kp(r,g));const _=p.docs.has(l);!_&&p.fromCache?f.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?f.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Pp(_h(l.path),m,{includeMetadataChanges:!0,qa:!0});return Mp(r,g)}(await zc(e),e.asyncQueue,t,n,i)),i.promise}function jN(e,t,n={}){const i=new zn;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new zp({next:p=>{m.Nu(),a.enqueueAndForget(()=>kp(r,g)),p.fromCache&&u.source==="server"?f.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Pp(l,m,{includeMetadataChanges:!0,qa:!0});return Mp(r,g)}(await zc(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firestore.googleapis.com",Rv=!0;class Iv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jA,this.ssl=Rv}else this.host=t.host,this.ssl=t.ssl??Rv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=gA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<hC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}W2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ih{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new q2;switch(i.type){case"firstParty":return new Q2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=xv.get(n);i&&(F("ComponentProvider","Removing Datastore"),xv.delete(n),i.terminate())}(this),Promise.resolve()}}function PN(e,t,n,i={}){var f;e=qe(e,Ih);const s=Da(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(ub(`https://${l}`),cb("Firestore",!0)),r.host!==jA&&r.host!==l&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!er(u,a)&&(e._setSettings(u),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ve.MOCK_USER;else{m=pR(i.mockUserToken,(f=e._app)==null?void 0:f.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ve(p)}e._authCredentials=new H2(new Sb(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Zn(this.firestore,t,this._query)}}class Ft{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ft(this.firestore,t,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Dl(n,Ft._jsonSchema))return new Ft(t,i||null,new K(xt.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:oe("string",Ft._jsonSchemaVersion),referencePath:oe("string")};class ps extends Zn{constructor(t,n,i){super(t,n,_h(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ft(this.firestore,null,new K(t))}withConverter(t){return new ps(this.firestore,t,this._path)}}function sm(e,t,...n){if(e=qt(e),wb("collection","path",t),e instanceof Ih){const i=xt.fromString(t,...n);return q_(i),new ps(e,null,i)}{if(!(e instanceof Ft||e instanceof ps))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xt.fromString(t,...n));return q_(i),new ps(e.firestore,null,i)}}function de(e,t,...n){if(e=qt(e),arguments.length===1&&(t=dp.newId()),wb("doc","path",t),e instanceof Ih){const i=xt.fromString(t,...n);return B_(i),new Ft(e,null,new K(i))}{if(!(e instanceof Ft||e instanceof ps))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xt.fromString(t,...n));return B_(i),new Ft(e.firestore,e instanceof ps?e.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class Nv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rp(this,"async_queue_retry"),this._c=()=>{const i=Lf();i&&F(Cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Lf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Lf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ka(t))throw t;F(Cv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",Dv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=Op.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Dv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class Kn extends Ih{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new Nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Nv(t),this._firestoreClient=void 0,await t}}}function LN(e,t){const n=typeof e=="object"?e:mb(),i=typeof e=="string"?e:Dc,s=hp(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=dR("firestore");r&&PN(s,...r)}return s}function Pl(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||UN(e),e._firestoreClient}function UN(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,f,m){return new uI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,kA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new DN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new sn(Ce.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new sn(Ce.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Dl(t,sn._jsonSchema))return sn.fromBase64String(t.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:oe("string",sn._jsonSchemaVersion),bytes:oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ft(this._lat,t._lat)||ft(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(t){if(Dl(t,qn._jsonSchema))return new qn(t.latitude,t.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:oe("string",qn._jsonSchemaVersion),latitude:oe("number"),longitude:oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Dl(t,Hn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Hn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hn._jsonSchemaVersion="firestore/vectorValue/1.0",Hn._jsonSchema={type:oe("string",Hn._jsonSchemaVersion),vectorValues:oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=/^__.*__$/;class BN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Cs(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(t,this.data,n,this.fieldTransforms)}}class PA{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Cs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function LA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:e})}}class qp{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new qp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Bc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(LA(this.Ac)&&zN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class qN{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||wh(t)}Cc(t,n,i,s=!1){return new qp({Ac:t,methodName:n,Dc:i,path:xe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pa(e){const t=e._freezeSettings(),n=wh(e._databaseId);return new qN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hp(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);Qp("Data must be an object, but it was:",a,i);const l=qA(i,a);let u,f;if(r.merge)u=new rn(a.fieldMask),f=a.fieldTransforms;else if(r.mergeFields){const m=[];for(const g of r.mergeFields){const p=rm(t,g,n);if(!a.contains(p))throw new z(k.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FA(m,p)||m.push(p)}u=new rn(m),f=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,f=a.fieldTransforms;return new BN(new ze(l),u,f)}class Ch extends Ul{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ch}}class Fp extends Ul{_toFieldTransform(t){return new tA(t.path,new rl)}isEqual(t){return t instanceof Fp}}class Gp extends Ul{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new ll(t.serializer,$b(t.serializer,this.Fc));return new tA(t.path,n)}isEqual(t){return t instanceof Gp&&this.Fc===t.Fc}}function UA(e,t,n,i){const s=e.Cc(1,t,n);Qp("Data must be an object, but it was:",s,i);const r=[],a=ze.empty();Is(i,(u,f)=>{const m=Kp(t,u,n);f=qt(f);const g=s.yc(m);if(f instanceof Ch)r.push(m);else{const p=zl(f,g);p!=null&&(r.push(m),a.set(m,p))}});const l=new rn(r);return new PA(a,l,s.fieldTransforms)}function zA(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[rm(t,i,n)],u=[s];if(r.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(rm(t,r[p])),u.push(r[p+1]);const f=[],m=ze.empty();for(let p=l.length-1;p>=0;--p)if(!FA(f,l[p])){const _=l[p];let C=u[p];C=qt(C);const O=a.yc(_);if(C instanceof Ch)f.push(_);else{const V=zl(C,O);V!=null&&(f.push(_),m.set(_,V))}}const g=new rn(f);return new PA(m,g,a.fieldTransforms)}function BA(e,t,n,i=!1){return zl(n,e.Cc(i?4:3,t))}function zl(e,t){if(HA(e=qt(e)))return Qp("Unsupported field value:",t,e),qA(e,t);if(e instanceof Ul)return function(i,s){if(!LA(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=zl(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $b(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Pt.fromDate(i);return{timestampValue:kc(s.serializer,r)}}if(i instanceof Pt){const r=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kc(s.serializer,r)}}if(i instanceof qn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sn)return{bytesValue:lA(s.serializer,i._byteString)};if(i instanceof Ft){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:bp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Hn)return function(a,l){return{mapValue:{fields:{[Mb]:{stringValue:kb},[Oc]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return vp(l.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${mh(i)}`)}(e,t)}function qA(e,t){const n={};return Ib(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Is(e,(i,s)=>{const r=zl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function HA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pt||e instanceof qn||e instanceof sn||e instanceof Ft||e instanceof Ul||e instanceof Hn)}function Qp(e,t,n){if(!HA(n)||!xb(n)){const i=mh(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function rm(e,t,n){if((t=qt(t))instanceof Ll)return t._internalPath;if(typeof t=="string")return Kp(e,t);throw Bc("Field path arguments must be of type string or ",e,!1,void 0,n)}const HN=new RegExp("[~\\*/\\[\\]]");function Kp(e,t,n){if(t.search(HN)>=0)throw Bc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ll(...t.split("."))._internalPath}catch{throw Bc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Bc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function FA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new FN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FN extends ul{data(){return super.data()}}function Yp(e,t){return typeof t=="string"?Kp(e,t):t instanceof Ll?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $p{}class Nh extends $p{}function Vv(e,t,...n){let i=[];t instanceof $p&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Zp).length,l=r.filter(u=>u instanceof Xp).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Xp extends Nh{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Xp(t,n,i)}_apply(t){const n=this._parse(t);return QA(t._query,n),new Zn(t.firestore,t.converter,$d(t._query,n))}_parse(t){const n=Pa(t.firestore);return function(r,a,l,u,f,m,g){let p;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Pv(g,m);const C=[];for(const O of g)C.push(jv(u,r,O));p={arrayValue:{values:C}}}else p=jv(u,r,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Pv(g,m),p=BA(l,a,g,m==="in"||m==="not-in");return ae.create(f,m,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Zp extends $p{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Zp(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)QA(a,u),a=$d(a,u)}(t._query,n),new Zn(t.firestore,t.converter,$d(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wp extends Nh{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Wp(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sl(r,a)}(t._query,this._field,this._direction);return new Zn(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new hr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function Mv(e,t="asc"){const n=t,i=Yp("orderBy",e);return Wp._create(i,n)}class Jp extends Nh{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new Jp(t,n,i)}_apply(t){return new Zn(t.firestore,t.converter,Mc(t._query,this._limit,this._limitType))}}function kv(e){return Jp._create("limit",e,"F")}class tg extends Nh{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new tg(t,n,i)}_apply(t){const n=QN(t,this.type,this._docOrFields,this._inclusive);return new Zn(t.firestore,t.converter,function(s,r){return new hr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)}(t._query,n))}}function GN(...e){return tg._create("startAfter",e,!1)}function QN(e,t,n,i){if(n[0]=qt(n[0]),n[0]instanceof ul)return function(r,a,l,u,f){if(!u)throw new z(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of Jr(r))if(g.field.isKeyField())m.push(Vc(a,u.key));else{const p=u.data.field(g.field);if(gh(p))throw new z(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=g.field.canonicalString();throw new z(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}m.push(p)}return new Ea(m,f)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const s=Pa(e.firestore);return function(a,l,u,f,m,g){const p=a.explicitOrderBy;if(m.length>p.length)throw new z(k.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let C=0;C<m.length;C++){const O=m[C];if(p[C].field.isKeyField()){if(typeof O!="string")throw new z(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof O}`);if(!_p(a)&&O.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${O}' contains a slash.`);const V=a.path.child(xt.fromString(O));if(!K.isDocumentKey(V))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const S=new K(V);_.push(Vc(l,S))}else{const V=BA(u,f,O);_.push(V)}}return new Ea(_,g)}(e._query,e.firestore._databaseId,s,t,n,i)}}function jv(e,t,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_p(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(xt.fromString(n));if(!K.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vc(e,new K(i))}if(n instanceof Ft)return Vc(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mh(n)}.`)}function Pv(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function QA(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class KA{convertValue(t,n="none"){switch(As(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ne(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw X(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Is(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[Oc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>ne(a.doubleValue));return new Hn(n)}convertGeoPoint(t){return new qn(ne(t.latitude),ne(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=yh(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(el(t));default:return null}}convertTimestamp(t){const n=Ts(t);return new Pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=xt.fromString(t);yt(pA(i),9688,{name:t});const s=new nl(i.get(1),i.get(3)),r=new K(i.popFirst(5));return s.isEqual(n)||Ai(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class KN extends KA{constructor(t){super(),this.firestore=t}convertBytes(t){return new sn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}class Hr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gs extends ul{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Yp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:oe("string",gs._jsonSchemaVersion),bundleSource:oe("string","DocumentSnapshot"),bundleName:oe("string"),bundle:oe("string")};class Ku extends gs{data(t={}){return super.data(t)}}class Xs{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Ku(this._firestore,this._userDataWriter,i.key,i,new Hr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ku(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Hr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Ku(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Hr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:YN(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function YN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){e=qe(e,Ft);const t=qe(e.firestore,Kn);return kN(Pl(t),e._key).then(n=>YA(t,e,n))}Xs._jsonSchemaVersion="firestore/querySnapshot/1.0",Xs._jsonSchema={type:oe("string",Xs._jsonSchemaVersion),bundleSource:oe("string","QuerySnapshot"),bundleName:oe("string"),bundle:oe("string")};class Dh extends KA{constructor(t){super(),this.firestore=t}convertBytes(t){return new sn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function qc(e){e=qe(e,Zn);const t=qe(e.firestore,Kn),n=Pl(t),i=new Dh(t);return GA(e._query),jN(n,e._query).then(s=>new Xs(t,i,e,s))}function cl(e,t,n){e=qe(e,Ft);const i=qe(e.firestore,Kn),s=eg(e.converter,t,n);return Oh(i,[Hp(Pa(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Re.none())])}function $N(e,t,n,...i){e=qe(e,Ft);const s=qe(e.firestore,Kn),r=Pa(s);let a;return a=typeof(t=qt(t))=="string"||t instanceof Ll?zA(r,"updateDoc",e._key,t,n,i):UA(r,"updateDoc",e._key,t),Oh(s,[a.toMutation(e._key,Re.exists(!0))])}function XN(e){return Oh(qe(e.firestore,Kn),[new Ah(e._key,Re.none())])}function ZN(e,t){const n=qe(e.firestore,Kn),i=de(e),s=eg(e.converter,t);return Oh(n,[Hp(Pa(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,Re.exists(!1))]).then(()=>i)}function WN(e,...t){var u,f,m;e=qt(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||Ov(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ov(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(f=g.error)==null?void 0:f.bind(g),t[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let r,a,l;if(e instanceof Ft)a=qe(e.firestore,Kn),l=_h(e._key.path),r={next:g=>{t[i]&&t[i](YA(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=qe(e,Zn);a=qe(g.firestore,Kn),l=g._query;const p=new Dh(a);r={next:_=>{t[i]&&t[i](new Xs(a,p,g,_))},error:t[i+1],complete:t[i+2]},GA(e._query)}return function(p,_,C,O){const V=new zp(O),S=new Pp(_,V,C);return p.asyncQueue.enqueueAndForget(async()=>Mp(await zc(p),S)),()=>{V.Nu(),p.asyncQueue.enqueueAndForget(async()=>kp(await zc(p),S))}}(Pl(a),l,s,r)}function Oh(e,t){return function(i,s){const r=new zn;return i.asyncQueue.enqueueAndForget(async()=>EN(await VN(i),s,r)),r.promise}(Pl(e),t)}function YA(e,t,n){const i=n.docs.get(t._key),s=new Dh(e);return new gs(e,s,t._key,i,new Hr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={maxAttempts:5};function yo(e,t){if((e=qt(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Pa(t)}get(t){const n=yo(t,this._firestore),i=new KN(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return X(24041);const r=s[0];if(r.isFoundDocument())return new ul(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new ul(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:r})})}set(t,n,i){const s=yo(t,this._firestore),r=eg(s.converter,n,i),a=Hp(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=yo(t,this._firestore);let a;return a=typeof(n=qt(n))=="string"||n instanceof Ll?zA(this._dataReader,"Transaction.update",r._key,n,i,s):UA(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=yo(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD extends tD{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=yo(t,this._firestore),i=new Dh(this._firestore);return super.get(t).then(s=>new gs(this._firestore,i,n._key,s._document,new Hr(!1,!1),n.converter))}}function Lv(e,t,n){e=qe(e,Kn);const i={...JN,...n};return function(r){if(r.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new zn;return r.asyncQueue.enqueueAndForget(async()=>{const f=await MN(r);new NN(r.asyncQueue,f,l,a,u).ju()}),u.promise}(Pl(e),s=>t(new eD(e,s)),i)}function zf(){return new Fp("serverTimestamp")}function nD(e){return new Gp("increment",e)}(function(t,n=!0){(function(s){Va=s})(Oa),pa(new nr("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Kn(new F2(i.getProvider("auth-internal")),new K2(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(f.options.projectId,m)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),ds(P_,L_,t),ds(P_,L_,"esm2020")})();var iD="firebase",sD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(iD,sD,"app");function $A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rD=$A,XA=new Cl("auth","Firebase",$A());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new up("@firebase/auth");function aD(e,...t){Hc.logLevel<=ht.WARN&&Hc.warn(`Auth (${Oa}): ${e}`,...t)}function Yu(e,...t){Hc.logLevel<=ht.ERROR&&Hc.error(`Auth (${Oa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e,...t){throw ng(e,...t)}function Fn(e,...t){return ng(e,...t)}function ZA(e,t,n){const i={...rD(),[t]:n};return new Cl("auth","Firebase",i).create(t,{appName:e.name})}function yi(e){return ZA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return XA.create(e,...t)}function J(e,t,...n){if(!e)throw ng(t,...n)}function di(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yu(t),new Error(t)}function wi(e,t){e||di(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function oD(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oD()||TR()||"connection"in navigator)?navigator.onLine:!0}function uD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t,n){this.shortDelay=t,this.longDelay=n,wi(n>t,"Short delay should be less than long delay!"),this.isMobile=_R()||bR()}get(){return lD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(e,t){wi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fD=new Bl(3e4,6e4);function Ns(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ii(e,t,n,i,s={}){return JA(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=Nl({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const f={method:t,headers:u,...r};return ER()||(f.referrerPolicy="no-referrer"),e.emulatorConfig&&Da(e.emulatorConfig.host)&&(f.credentials="include"),WA.fetch()(await tS(e,e.config.apiHost,n,l),f)})}async function JA(e,t,n){e._canInitEmulator=!1;const i={...cD,...t};try{const s=new mD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Iu(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Iu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Iu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Iu(e,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ZA(e,m,f);Nn(e,m)}}catch(s){if(s instanceof Ri)throw s;Nn(e,"network-request-failed",{message:String(s)})}}async function ql(e,t,n,i,s={}){const r=await Ii(e,t,n,i,s);return"mfaPendingCredential"in r&&Nn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function tS(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?ig(e.config,s):`${e.config.apiScheme}://${s}`;return hD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function dD(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),fD.get())})}}function Iu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Fn(e,t,i);return s.customData._tokenResponse=n,s}function zv(e){return e!==void 0&&e.enterprise!==void 0}class pD{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return dD(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gD(e,t){return Ii(e,"GET","/v2/recaptchaConfig",Ns(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(e,t){return Ii(e,"POST","/v1/accounts:delete",t)}async function Fc(e,t){return Ii(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function _D(e,t=!1){const n=qt(e),i=await n.getIdToken(t),s=sg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Lo(Bf(s.auth_time)),issuedAtTime:Lo(Bf(s.iat)),expirationTime:Lo(Bf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Bf(e){return Number(e)*1e3}function sg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=rb(n);return s?JSON.parse(s):(Yu("Failed to decode base64 JWT payload"),null)}catch(s){return Yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bv(e){const t=sg(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ri&&vD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function vD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lo(this.lastLoginAt),this.creationTime=Lo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Aa(e,Fc(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?eS(s.providerUserInfo):[],a=bD(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new om(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,m)}async function TD(e){const t=qt(e);await Gc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function bD(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function eS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(e,t){const n=await JA(e,{},async()=>{const i=Nl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await tS(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&Da(e.emulatorConfig.host)&&(u.credentials="include"),WA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SD(e,t){return Ii(e,"POST","/v2/accounts:revokeToken",Ns(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Bv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=Bv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await AD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new ea;return i&&(J(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Rn{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new ED(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new om(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Aa(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return _D(this,t)}reload(){return TD(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Rn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(yi(this.auth));const t=await this.getIdToken();return await Aa(this,yD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:p,isAnonymous:_,providerData:C,stsTokenManager:O}=n;J(g&&O,t,"internal-error");const V=ea.fromJSON(this.name,O);J(typeof g=="string",t,"internal-error"),zi(i,t.name),zi(s,t.name),J(typeof p=="boolean",t,"internal-error"),J(typeof _=="boolean",t,"internal-error"),zi(r,t.name),zi(a,t.name),zi(l,t.name),zi(u,t.name),zi(f,t.name),zi(m,t.name);const S=new Rn({uid:g,auth:t,email:s,emailVerified:p,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:V,createdAt:f,lastLoginAt:m});return C&&Array.isArray(C)&&(S.providerData=C.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const s=new ea;s.updateFromServerResponse(n);const r=new Rn({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Gc(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?eS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new ea;l.updateFromIdToken(i);const u=new Rn({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new om(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function mi(e){wi(e instanceof Function,"Expected a class definition");let t=qv.get(e);return t?(wi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}nS.type="NONE";const Hv=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(e,t,n){return`firebase:${e}:${t}:${n}`}class na{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=$u(this.userKey,s.apiKey,r),this.fullPersistenceKey=$u("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Fc(this.auth,{idToken:t}).catch(()=>{});return n?Rn._fromGetAccountInfoResponse(this.auth,n,t):null}return Rn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new na(mi(Hv),t,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let r=s[0]||mi(Hv);const a=$u(i,t.config.apiKey,t.name);let l=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const p=await Fc(t,{idToken:m}).catch(()=>{});if(!p)break;g=await Rn._fromGetAccountInfoResponse(t,p,m)}else g=Rn._fromJSON(t,m);f!==r&&(l=g),r=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new na(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==r)try{await f._remove(a)}catch{}})),new na(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(lS(t))return"Blackberry";if(uS(t))return"Webos";if(sS(t))return"Safari";if((t.includes("chrome/")||rS(t))&&!t.includes("edge/"))return"Chrome";if(oS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function iS(e=je()){return/firefox\//i.test(e)}function sS(e=je()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rS(e=je()){return/crios\//i.test(e)}function aS(e=je()){return/iemobile/i.test(e)}function oS(e=je()){return/android/i.test(e)}function lS(e=je()){return/blackberry/i.test(e)}function uS(e=je()){return/webos/i.test(e)}function rg(e=je()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wD(e=je()){var t;return rg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function xD(){return AR()&&document.documentMode===10}function cS(e=je()){return rg(e)||oS(e)||uS(e)||lS(e)||/windows phone/i.test(e)||aS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(e,t=[]){let n;switch(e){case"Browser":n=Fv(je());break;case"Worker":n=`${Fv(je())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(e,t={}){return Ii(e,"GET","/v2/passwordPolicy",Ns(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=6;class ND{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??CD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new RD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=mi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await na.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Fc(this,{idToken:t}),i=await Rn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Gc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=uD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vn(this.app))return Promise.reject(yi(this));const n=t?qt(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ID(this),n=new ND(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Cl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await SD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&mi(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await na.create(this,[mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&aD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function mr(e){return qt(e)}class Gv{constructor(t){this.auth=t,this.observer=null,this.addObserver=DR(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OD(e){Vh=e}function fS(e){return Vh.loadJS(e)}function VD(){return Vh.recaptchaEnterpriseScript}function MD(){return Vh.gapiScript}function kD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class jD{constructor(){this.enterprise=new PD}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class PD{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const LD="recaptcha-enterprise",dS="NO_RECAPTCHA";class UD{constructor(t){this.type=LD,this.auth=mr(t)}async verify(t="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{gD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new pD(u);return r.tenantId==null?r._agentRecaptchaConfig=f:r._tenantRecaptchaConfigs[r.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;zv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:t}).then(f=>{a(f)}).catch(()=>{a(dS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jD().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&zv(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=VD();u.length!==0&&(u+=l),fS(u).then(()=>{s(l,r,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})}}async function Qv(e,t,n,i=!1,s=!1){const r=new UD(e);let a;if(s)a=dS;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lm(e,t,n,i,s){var r;if((r=e._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qv(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qv(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(e,t){const n=hp(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(er(r,t??{}))return s;Nn(s,"already-initialized")}return n.initialize({options:t})}function BD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(mi);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function qD(e,t,n){const i=mr(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=mS(t),{host:a,port:l}=HD(t),u=l===null?"":`:${l}`,f={url:`${r}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(er(f,i.config.emulator)&&er(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Da(a)?(ub(`${r}//${a}${u}`),cb("Auth",!0)):FD()}function mS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function HD(e){const t=mS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Kv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Kv(a)}}}function Kv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function FD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(t){return di("not implemented")}_linkToIdToken(t,n){return di("not implemented")}_getReauthenticationResolver(t){return di("not implemented")}}async function GD(e,t){return Ii(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(e,t){return ql(e,"POST","/v1/accounts:signInWithPassword",Ns(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(e,t){return ql(e,"POST","/v1/accounts:signInWithEmailLink",Ns(e,t))}async function YD(e,t){return ql(e,"POST","/v1/accounts:signInWithEmailLink",Ns(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends ag{constructor(t,n,i,s=null){super("password",i),this._email=t,this._password=n,this._tenantId=s}static _fromEmailAndPassword(t,n){return new hl(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new hl(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(t,n,"signInWithPassword",QD);case"emailLink":return KD(t,{email:this._email,oobCode:this._password});default:Nn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(t,i,"signUpPassword",GD);case"emailLink":return YD(t,{idToken:n,email:this._email,oobCode:this._password});default:Nn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(e,t){return ql(e,"POST","/v1/accounts:signInWithIdp",Ns(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="http://localhost";class rr extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new rr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new rr(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return ia(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,ia(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,ia(t,n)}buildRequest(){const t={requestUri:$D,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Nl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZD(e){const t=ho(fo(e)).link,n=t?ho(fo(t)).deep_link_id:null,i=ho(fo(e)).deep_link_id;return(i?ho(fo(i)).link:null)||i||n||t||e}class og{constructor(t){const n=ho(fo(t)),i=n.apiKey??null,s=n.oobCode??null,r=XD(n.mode??null);J(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=ZD(t);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(t,n){return hl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=og.parseLink(n);return J(i,"argument-error"),hl._fromEmailAndCode(t,i.code,i.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends pS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Hl{constructor(){super("facebook.com")}static credential(t){return rr._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yi.credentialFromTaggedObject(t)}static credentialFromError(t){return Yi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Yi.credential(t.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return rr._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return $i.credentialFromTaggedObject(t)}static credentialFromError(t){return $i.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return $i.credential(n,i)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Hl{constructor(){super("github.com")}static credential(t){return rr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xi.credentialFromTaggedObject(t)}static credentialFromError(t){return Xi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xi.credential(t.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Hl{constructor(){super("twitter.com")}static credential(t,n){return rr._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Zi.credentialFromTaggedObject(t)}static credentialFromError(t){return Zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Zi.credential(n,i)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(e,t){return ql(e,"POST","/v1/accounts:signUp",Ns(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await Rn._fromIdTokenResponse(t,i,s),a=Yv(i);return new ar({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=Yv(i);return new ar({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function Yv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends Ri{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Qc(t,n,i,s)}}function gS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(e,r,t,i):r})}async function JD(e,t,n=!1){const i=await Aa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ar._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(e,t,n=!1){const{auth:i}=e;if(vn(i.app))return Promise.reject(yi(i));const s="reauthenticate";try{const r=await Aa(e,gS(i,s,t,e),n);J(r.idToken,i,"internal-error");const a=sg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(e.uid===l,i,"user-mismatch"),ar._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Nn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(e,t,n=!1){if(vn(e.app))return Promise.reject(yi(e));const i="signIn",s=await gS(e,i,t),r=await ar._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function e4(e,t){return yS(mr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(e){const t=mr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function n4(e,t,n){if(vn(e.app))return Promise.reject(yi(e));const i=mr(e),a=await lm(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_S(e),u}),l=await ar._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function i4(e,t,n){return vn(e.app)?Promise.reject(yi(e)):e4(qt(e),La.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_S(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(e,t){return Ii(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=qt(e),r={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await Aa(i,s4(i.auth,r));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(e,t){return qt(e).setPersistence(t)}function o4(e,t,n,i){return qt(e).onIdTokenChanged(t,n,i)}function l4(e,t,n){return qt(e).beforeAuthStateChanged(t,n)}function u4(e,t,n,i){return qt(e).onAuthStateChanged(t,n,i)}function c4(e){return qt(e).signOut()}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=1e3,f4=10;class ES extends vS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);xD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,f4):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ES.type="LOCAL";const TS=ES;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends vS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}bS.type="SESSION";const AS=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new Mh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async f=>f(n.origin,r)),u=await d4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const f=lg("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(p.data.response);break;default:clearTimeout(m),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:f,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function p4(e){Gn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function g4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function _4(){return SS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",v4=1,Yc="firebaseLocalStorage",xS="fbase_key";class Fl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(e,t){return e.transaction([Yc],t?"readwrite":"readonly").objectStore(Yc)}function E4(){const e=indexedDB.deleteDatabase(wS);return new Fl(e).toPromise()}function um(){const e=indexedDB.open(wS,v4);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Yc,{keyPath:xS})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Yc)?t(i):(i.close(),await E4(),t(await um()))})})}async function $v(e,t,n){const i=kh(e,!0).put({[xS]:t,value:n});return new Fl(i).toPromise()}async function T4(e,t){const n=kh(e,!1).get(t),i=await new Fl(n).toPromise();return i===void 0?null:i.value}function Xv(e,t){const n=kh(e,!0).delete(t);return new Fl(n).toPromise()}const b4=800,A4=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>A4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(_4()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await g4(),!this.activeServiceWorker)return;this.sender=new m4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||y4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await um();return await $v(t,Kc,"1"),await Xv(t,Kc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>$v(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>T4(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=kh(s,!1).getAll();return new Fl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const S4=RS;new Bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(e,t){return t?mi(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends ag{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ia(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ia(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ia(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function x4(e){return yS(e.auth,new ug(e),e.bypassAuthState)}function R4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),t4(n,new ug(e),e.bypassAuthState)}async function I4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),JD(n,new ug(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return x4;case"linkViaPopup":case"linkViaRedirect":return I4;case"reauthViaPopup":case"reauthViaRedirect":return R4;default:Nn(this.auth,"internal-error")}}resolve(t){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new Bl(2e3,1e4);class Fr extends IS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const t=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,C4.get())};t()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="pendingRedirect",Xu=new Map;class D4 extends IS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Xu.get(this.auth._key());if(!t){try{const i=await O4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Xu.set(this.auth._key(),t)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O4(e,t){const n=k4(t),i=M4(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function V4(e,t){Xu.set(e._key(),t)}function M4(e){return mi(e._redirectPersistence)}function k4(e){return $u(N4,e.config.apiKey,e.name)}async function j4(e,t,n=!1){if(vn(e.app))return Promise.reject(yi(e));const i=mr(e),s=w4(i,t),a=await new D4(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=10*60*1e3;class L4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!U4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!CS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=P4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zv(t))}saveEventToCache(t){this.cachedEventUids.add(Zv(t)),this.lastProcessedEventTime=Date.now()}}function Zv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function CS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function U4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(e,t={}){return Ii(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q4=/^https?/;async function H4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await z4(e);for(const n of t)try{if(F4(n))return}catch{}Nn(e,"unauthorized-domain")}function F4(e){const t=am(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!q4.test(n))return!1;if(B4.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Bl(3e4,6e4);function Wv(){const e=Gn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Q4(e){return new Promise((t,n)=>{var s,r,a;function i(){Wv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wv(),n(Fn(e,"network-request-failed"))},timeout:G4.get()})}if((r=(s=Gn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Gn().gapi)!=null&&a.load)i();else{const l=kD("iframefcb");return Gn()[l]=()=>{gapi.load?i():n(Fn(e,"network-request-failed"))},fS(`${MD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Zu=null,t})}let Zu=null;function K4(e){return Zu=Zu||Q4(e),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new Bl(5e3,15e3),$4="__/auth/iframe",X4="emulator/auth/iframe",Z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ig(t,X4):`https://${e.config.authDomain}/${$4}`,i={apiKey:t.apiKey,appName:e.name,v:Oa},s=W4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Nl(i).slice(1)}`}async function tO(e){const t=await K4(e),n=Gn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:J4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Fn(e,"network-request-failed"),l=Gn().setTimeout(()=>{r(a)},Y4.get());function u(){Gn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nO=500,iO=600,sO="_blank",rO="http://localhost";class Jv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aO(e,t,n,i=nO,s=iO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...eO,width:i.toString(),height:s.toString(),top:r,left:a},f=je().toLowerCase();n&&(l=rS(f)?sO:n),iS(f)&&(t=t||rO,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[_,C])=>`${p}${_}=${C},`,"");if(wD(f)&&l!=="_self")return oO(t||"",l),new Jv(null);const g=window.open(t||"",l,m);J(g,e,"popup-blocked");try{g.focus()}catch{}return new Jv(g)}function oO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="__/auth/handler",uO="emulator/auth/handler",cO=encodeURIComponent("fac");async function tE(e,t,n,i,s,r){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Oa,eventId:s};if(t instanceof pS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",NR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(t instanceof Hl){const m=t.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await e._getAppCheckToken(),f=u?`#${cO}=${encodeURIComponent(u)}`:"";return`${hO(e)}?${Nl(l).slice(1)}${f}`}function hO({config:e}){return e.emulator?ig(e,uO):`https://${e.authDomain}/${lO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="webStorageSupport";class fO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=j4,this._overrideRedirectResult=V4}async _openPopup(t,n,i,s){var a;wi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await tE(t,n,i,am(),s);return aO(t,r,lg())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await tE(t,n,i,am(),s);return p4(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(wi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await tO(t),i=new L4(t);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(qf,{type:qf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[qf];r!==void 0&&n(!!r),Nn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=H4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return cS()||sS()||rg()}}const dO=fO;var eE="@firebase/auth",nE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gO(e){pa(new nr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(e)},f=new DD(i,s,r,u);return BD(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),pa(new nr("auth-internal",t=>{const n=mr(t.getProvider("auth").getImmediate());return(i=>new mO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(eE,nE,pO(e)),ds(eE,nE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=5*60,_O=lb("authIdTokenMaxAge")||yO;let iE=null;const vO=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>_O)return;const s=n==null?void 0:n.token;iE!==s&&(iE=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function EO(e=mb()){const t=hp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=zD(e,{popupRedirectResolver:dO,persistence:[S4,TS,AS]}),i=lb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=vO(r.toString());l4(n,a,()=>a(n.currentUser)),o4(n,l=>a(l))}}const s=ab("auth");return s&&qD(n,`http://${s}`),n}function TO(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}OD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Fn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",TO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gO("Browser");const bO={apiKey:"AIzaSyAhMZTS-LgXURFr19kmDvVG3mc_j68PkNI",authDomain:"tene-9f8c9.firebaseapp.com",projectId:"tene-9f8c9",storageBucket:"tene-9f8c9.firebasestorage.app",messagingSenderId:"1096524923335",appId:"1:1096524923335:web:a2662d6197b49fe3bbd9e2"},NS=db(bO),te=LN(NS),fl=EO(NS);a4(fl,TS).catch(e=>{console.error("Firebase Persistence Error:",e)});const DS=U.createContext(),AO=({children:e})=>{const[t,n]=U.useState(null),[i,s]=U.useState(!0);U.useEffect(()=>{const a=u4(fl,l=>{n(l),s(!1)});return()=>a()},[]);const r={user:t,loading:i};return h.jsx(DS.Provider,{value:r,children:!i&&e})},OS=()=>U.useContext(DS),SO=({onRegisterClick:e})=>{const[t,n]=U.useState(!1),[i,s]=U.useState(""),[r,a]=U.useState(""),[l,u]=U.useState(""),[f,m]=U.useState(""),g=async _=>{if(_.preventDefault(),m(""),t){if(!l.trim()){m("Пожалуйста, введите имя.");return}try{const C=await n4(fl,i,r);await r4(C.user,{displayName:l})}catch(C){m(p(C.code))}}else try{await i4(fl,i,r)}catch(C){m(p(C.code))}},p=_=>{switch(_){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t&&h.jsx("input",{type:"text",value:l,onChange:_=>u(_.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"email",value:i,onChange:_=>s(_.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"password",value:r,onChange:_=>a(_.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),f&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:f}),h.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:t?"Зарегистрироваться":"Войти"})]}),h.jsx("div",{className:"flex items-center justify-center",children:h.jsx("button",{onClick:()=>{!t&&e&&e(),n(!t),m("")},className:"text-sm text-accent hover:underline",children:t?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},wO=({auth:e,onRegisterClick:t})=>h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:h.jsxs("div",{className:"w-full max-w-sm text-center",children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),h.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),h.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:h.jsx(SO,{onRegisterClick:t})})]})}),xO=({className:e=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:h.jsx("path",{d:"m9 18 6-6-6-6"})}),VS=({className:e=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M19 12H5"}),h.jsx("polyline",{points:"12 19 5 12 12 5"})]}),MS=({className:e="",filled:t=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),RO=({className:e=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:h.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),kS=({className:e="",filled:t=!1})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:h.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),jS=({className:e=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),h.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),PS=({className:e="",filled:t=!1})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:h.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),IO=({className:e="",filled:t=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CO=({className:e="",filled:t=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M4 22h16"}),h.jsx("path",{d:"M7 22V2h10v20"}),h.jsx("path",{d:"M7 12h4"})]}),NO=({className:e=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:h.jsx("path",{d:"m15 18-6-6 6-6"})}),DO=({className:e=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:h.jsx("path",{d:"m9 18 6-6-6-6"})}),OO=({className:e=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),VO=({className:e=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),MO=({className:e=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[h.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),cg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>h.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((s,r)=>h.jsx("div",{onClick:()=>t(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:h.jsxs("div",{className:"relative transition-all duration-300",children:[h.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:h.jsx(PS,{filled:n.includes(s.id),width:"20",height:"20"})}),h.jsx("img",{src:`/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),h.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("h2",{className:"font-semibold text-xs truncate text-text-main",children:s.title})}),s.views>0&&h.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[h.jsx(MO,{className:"w-4 h-4"}),h.jsx("span",{children:s.views})]})]})]})},s.id)):h.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),kO=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},LS=pE.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[h.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[h.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),h.jsx("span",{children:O(e.timestamp)})]}),u===e.id?h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("input",{type:"text",value:f,autoFocus:!0,onChange:V=>m(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),h.jsx("button",{onClick:()=>r(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),h.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):h.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),h.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[h.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[h.jsx(kS,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),h.jsx("span",{children:e.likeCount||0})]}),h.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),h.jsx("button",{onClick:()=>s(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===e.id&&h.jsxs("form",{onSubmit:V=>C(V,e.id),className:"flex items-center gap-2 mt-2",children:[h.jsx("input",{type:"text",value:p,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),h.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:h.jsx(jS,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&h.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(V=>h.jsx(LS,{comment:V,onReply:t,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C},V.id))})]})}),jO=`
  @keyframes page-turn {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(-180deg); }
  }

  .book-page {
    transform-origin: left center;
    animation: page-turn 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes dot-fade {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 1; }
  }

  .dot-1 { animation: dot-fade 1.5s infinite; animation-delay: 0s; }
  .dot-2 { animation: dot-fade 1.5s infinite; animation-delay: 0.2s; }
  .dot-3 { animation: dot-fade 1.5s infinite; animation-delay: 0.4s; }
`,PO=()=>h.jsxs(h.Fragment,{children:[h.jsx("style",{children:jO}),h.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-background text-text-main",children:[h.jsxs("div",{className:"relative w-20 h-16 mb-6",children:[h.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-r-md left-1/2"}),h.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-l-md right-1/2"}),h.jsx("div",{className:"book-page absolute w-10 h-16 bg-accent rounded-r-md left-1/2"})]}),h.jsxs("p",{className:"text-lg font-semibold text-text-main flex items-center",children:["Загрузка новелл",h.jsx("span",{className:"dot-1",children:"."}),h.jsx("span",{className:"dot-2",children:"."}),h.jsx("span",{className:"dot-3",children:"."})]})]})]}),hg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[h.jsx(RO,{className:"mx-auto mb-4 text-accent"}),h.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),h.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),h.jsx("div",{className:"space-y-3",children:n.map(i=>h.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:i.name}),h.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),h.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},fg=({onClose:e,onSelectMethod:t,plan:n})=>h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[h.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),h.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),h.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),h.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),h.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),h.jsxs("button",{onClick:()=>t("boosty"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"🧡 Оплатить через Boosty"}),h.jsx("p",{className:"text-sm opacity-70",children:"Автоматическая активация через Telegram"})]}),h.jsx("div",{className:"text-center pt-2",children:h.jsx("button",{onClick:()=>t("boosty"),className:"text-sm text-accent hover:underline",children:"Уже есть подписка Boosty? Синхронизировать аккаунт"})})]}),h.jsx("button",{onClick:e,className:"w-full py-3 mt-6 rounded-lg border border-border-color hover:bg-white/5 transition-colors",children:"Назад"})]})}),LO=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:CO},{id:"search",label:"Поиск",icon:MS},{id:"bookmarks",label:"Закладки",icon:PS},{id:"profile",label:"Профиль",icon:IO}];return h.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:h.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>h.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[h.jsx(i.icon,{filled:e===i.id}),h.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},UO=({onReadMore:e})=>{const[t,n]=U.useState([]),[i,s]=U.useState(0);U.useEffect(()=>{fetch("/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%t.length),a=()=>s(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[h.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-bold text-text-main",children:l.title}),h.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),h.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:h.jsx(NO,{className:"w-5 h-5"})}),h.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:h.jsx(DO,{className:"w-5 h-5"})})]})]})})},zO=({newsItem:e,onClose:t})=>h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:h.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main flex flex-col",onClick:n=>n.stopPropagation(),children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 break-words",children:e.title}),h.jsx("div",{className:"prose prose-sm max-w-none text-text-main opacity-80 overflow-y-auto max-h-[60vh] ",dangerouslySetInnerHTML:{__html:e.fullText}}),h.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),Yn=({title:e,onBack:t})=>h.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&h.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:h.jsx(VS,{})}),h.jsx("h1",{className:"text-xl font-bold",children:e})]}),BO=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Что такое Tenebris Verbum?"}),h.jsx("p",{className:"opacity-80",children:"Tenebris Verbum — это веб-приложение, созданное для комфортного чтения новелл. Оно представляет собой цифровую библиотеку, доступную через Telegram, и оптимизировано для мобильных устройств."}),h.jsxs("div",{className:"mt-4 space-y-2 opacity-80",children:[h.jsx("p",{className:"font-semibold",children:"Ключевые возможности приложения:"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Библиотека новелл:"})," Главный экран, где вы можете просматривать доступные новеллы, их обложки и названия."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Подробная информация о новелле:"})," Нажав на новеллу, вы увидите детальную страницу с её описанием, автором, жанрами и списком глав."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Удобная читалка:"})," Приложение предлагает продуманный интерфейс для чтения глав с возможностью настройки размера шрифта."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Система закладок:"})," Вы можете добавлять понравившиеся новеллы в закладки для быстрого доступа."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Поиск и фильтрация:"})," Есть функция поиска по названию новеллы и возможность фильтрации по жанрам прямо из карточки новеллы."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Интерактивность:"})," Пользователи могут оставлять комментарии к главам, отвечать на комментарии других, ставить лайки главам и комментариям."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Персонализация:"})," В профиле можно переключаться между светлой и тёмной темами оформления."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Система подписок:"})," Для доступа к эксклюзивным (платным) главам в приложении реализована система подписок."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Руководство пользователя и правила"}),h.jsxs("div",{className:"space-y-4 opacity-80",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"1. Вход и Регистрация:"}),h.jsx("p",{children:"При первом входе в приложение вас встретит экран авторизации. Вы можете создать новый аккаунт, указав ваше имя, email и пароль, либо войти в уже существующий. Это необходимо для сохранения вашего прогресса, закладок и статуса подписки."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"2. Навигация:"}),h.jsx("p",{children:"В нижней части экрана расположена панель навигации с четырьмя основными разделами:"}),h.jsxs("ul",{className:"list-disc list-inside ml-4",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Библиотека:"})," Ваш основной экран с каталогом всех новелл."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Поиск:"})," Раздел для поиска новелл по названию."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Закладки:"})," Здесь хранятся все новеллы, которые вы отметили."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Профиль:"})," Управление вашим аккаунтом и подпиской."]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"3. Чтение:"}),h.jsx("p",{children:"На странице новеллы выберите нужную главу из списка. Некоторые главы могут быть отмечены иконкой замка (🔒) — это платный контент, доступный по подписке. В режиме чтения вы можете:"}),h.jsxs("ul",{className:"list-disc list-inside ml-4",children:[h.jsx("li",{children:"Переключаться между главами с помощью стрелок внизу экрана."}),h.jsx("li",{children:"Открыть оглавление, чтобы быстро перейти к другой главе."}),h.jsx("li",{children:'Зайти в настройки (иконка шестерёнки) и изменить размер текста кнопками "+" и "-".'})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"4. Профиль:"}),h.jsxs("p",{children:["В этом разделе вы можете видеть ваш email и имя. Здесь находится кнопка для выхода из аккаунта. Тут же можно включить или выключить тёмную тему. ",h.jsx("b",{children:"Ваш ID для привязки:"})," Это уникальный идентификатор вашего аккаунта. Он понадобится для активации подписки через Telegram-бота. Его можно скопировать одним нажатием."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Активация подписок"}),h.jsx("p",{className:"opacity-80 mb-3",children:"Подписка открывает доступ ко всем платным главам во всех новеллах. Процесс оформления разделён на несколько шагов."}),h.jsxs("div",{className:"space-y-4 opacity-80",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"Шаг 1: Выбор тарифа"}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["Зайдите в раздел ",h.jsx("b",{children:'"Профиль"'}),"."]}),h.jsxs("li",{children:["Нажмите кнопку ",h.jsx("b",{children:'"Оформить подписку"'}),"."]}),h.jsxs("li",{children:["Во всплывающем окне выберите один из доступных тарифов:",h.jsxs("ul",{className:"list-disc list-inside ml-6",children:[h.jsxs("li",{children:[h.jsx("b",{children:"1 месяц"})," за 199 ₽"]}),h.jsxs("li",{children:[h.jsx("b",{children:"3 месяца"})," за 539 ₽"]}),h.jsxs("li",{children:[h.jsx("b",{children:"1 год"})," за 1899 ₽"]})]})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"Шаг 2: Выбор способа оплаты"}),h.jsxs("p",{className:"mb-2",children:["После выбора тарифа вам будет предложено три способа оплаты. Каждый из них требует взаимодействия с Telegram-ботом ",h.jsx("b",{children:"tenebrisverbot"}),"."]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h5",{className:"font-semibold",children:"Способ 1: Boosty (Автоматическая активация)"}),h.jsx("p",{children:"Это самый быстрый и рекомендуемый способ."}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["В приложении, после выбора тарифа, нажмите ",h.jsx("b",{children:'"Оплатить через Boosty"'}),"."]}),h.jsx("li",{children:"Вас автоматически перенаправит в Telegram-бот, который привяжет ваш Telegram-аккаунт к вашему профилю в приложении."}),h.jsx("li",{children:"Бот пришлет вам ссылку на Boosty и дальнейшие инструкции."}),h.jsx("li",{children:"Перейдите по ссылке, оформите подписку на Boosty и вступите в приватную Telegram-группу (ссылку предоставит Boosty после оплаты)."}),h.jsx("li",{children:"Как только вы вступите в группу, вернитесь в бот и отправьте ему команду /check ВАШ_ID (скопируйте ID из профиля в приложении)."}),h.jsxs("li",{children:["Бот проверит ваше членство в группе и ",h.jsx("b",{children:"автоматически активирует подписку на 1 месяц"}),"."]})]}),h.jsx("h5",{className:"font-semibold pt-2",children:"Способы 2 и 3: Банковская карта или Донат через Tribut (Ручная проверка)"}),h.jsx("p",{children:"Эти способы требуют ручного подтверждения администратором."}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["В приложении выберите тариф, а затем — ",h.jsx("b",{children:'"Банковской картой"'})," или ",h.jsx("b",{children:'"Донат через tribut"'}),"."]}),h.jsx("li",{children:"Вас перенаправит в Telegram-бот."}),h.jsxs("li",{children:["Бот сгенерирует для вас ",h.jsx("b",{children:"уникальный код платежа"})," (например, SUB12345-6789) и пришлет реквизиты."]}),h.jsxs("li",{children:[h.jsx("b",{children:"ЭТО ВАЖНО:"})," Совершите перевод/донат, и в поле ",h.jsx("b",{children:'"комментарий"'})," или ",h.jsx("b",{children:'"сообщение к донату" ОБЯЗАТЕЛЬНО'})," укажите тот самый уникальный код, который прислал бот. Без этого кода администратор не сможет найти ваш платеж."]}),h.jsx("li",{children:"После получения оплаты администратор воспользуется специальной командой, чтобы активировать вашу подписку."}),h.jsx("li",{children:"Бот пришлет вам уведомление об успешной активации."})]})]})]})]})]})]}),qO=()=>h.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),h.jsx("p",{children:"Настоящее Пользовательское соглашение (далее – «Соглашение») регулирует отношения между Администрацией приложения Tenebris Verbum (далее – «Администрация», «Сервис») и пользователем сети Интернет (далее – «Пользователь»), возникающие при использовании Сервиса."}),h.jsx("p",{children:"Перед началом использования Сервиса, пожалуйста, внимательно ознакомьтесь с его условиями. Начало использования Сервиса означает ваше полное и безоговорочное принятие (Акцепт) настоящего Соглашения. Если вы не согласны с какими-либо из его положений, вы должны немедленно прекратить использование Сервиса."}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Основные термины"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Сервис:"})," Веб-приложение Tenebris Verbum, предоставляющее доступ к художественным текстам (контенту) в режиме онлайн-чтения."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Пользователь:"})," Любое физическое лицо, достигшее 18 лет (или обладающее полной дееспособностью), которое осуществляет доступ к Сервису и принимает условия данного Соглашения."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Акцепт:"})," Полное и безоговорочное принятие Пользователем условий настоящего Соглашения, которое совершается путем продолжения использования Сервиса."]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Предмет Соглашения"}),h.jsx("p",{children:"2.1. Администрация предоставляет Пользователю неисключительное, безвозмездное право на доступ к контенту, размещенному в Сервисе, исключительно для личного некоммерческого ознакомления путем чтения."}),h.jsx("p",{children:"2.2. Сервис не предоставляет технической возможности для скачивания, сохранения или любого другого способа копирования контента."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Интеллектуальная собственность и правила использования контента"}),h.jsxs("p",{children:["3.1. ",h.jsx("b",{children:"Авторские права:"})," Все тексты, изображения и другие материалы, размещенные в Сервисе, являются объектами авторского права и защищены законодательством."]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["3.2. ",h.jsx("b",{children:"Запрещенные действия:"})," Пользователю категорически запрещается:"]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Копировать, распространять, публично воспроизводить или иным образом использовать контент Сервиса в коммерческих или неличных целях."}),h.jsx("li",{children:"Использовать скрипты, боты или любые другие автоматизированные средства для сбора данных, массового скачивания или взаимодействия с Сервисом."}),h.jsx("li",{children:"Предпринимать попытки обойти технические ограничения, установленные Администрацией."})]})]}),h.jsxs("p",{className:"mt-2",children:["3.3. ",h.jsx("b",{children:"Процедура для правообладателей:"})," Если вы являетесь правообладателем и считаете, что ваши права нарушены, просим вас связаться с Администрацией через доступные каналы связи. Администрация обязуется рассмотреть ваше обращение и, в случае подтверждения нарушения, незамедлительно удалить соответствующий контент."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Правовой статус Сервиса и ограничение ответственности"}),h.jsxs("p",{children:["4.1. ",h.jsx("b",{children:"Информационный посредник:"})," В соответствии со ст. 1253.1 ГК РФ, Сервис является информационным посредником. Администрация предоставляет платформу для размещения материалов и не является инициатором их создания, не изменяет их содержание и не несет ответственности за него до момента получения обоснованного уведомления о нарушении."]}),h.jsxs("p",{children:["4.2. ",h.jsx("b",{children:"Ответственность за контент:"})," Ответственность за правомерность использования контента несут независимые подрядчики, предоставляющие материалы для размещения и гарантирующие наличие у них всех необходимых прав. Администрация не несет ответственности за недобросовестные действия таких подрядчиков."]}),h.jsxs("p",{children:["4.3. ",h.jsx("b",{children:"Соблюдение законодательства:"})," Администрация принимает меры для соблюдения законодательства РФ, включая добавление обязательной маркировки, установку возрастной маркировки («18+») и незамедлительное удаление запрещенных материалов."]}),h.jsxs("p",{children:["4.4. ",h.jsx("b",{children:"Ограничение ответственности:"})," Администрация не несет ответственности за технические сбои, содержание произведений и любой косвенный ущерб, который может быть причинен Пользователю."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Права и обязанности сторон"}),h.jsxs("div",{children:[h.jsxs("p",{children:["5.1. ",h.jsx("b",{children:"Администрация вправе:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"В любое время изменять или удалять любой контент, изменять дизайн и функционал Сервиса."}),h.jsx("li",{children:"Применять технические средства защиты от вредоносных действий (например, блокировать IP-адреса, с которых исходит чрезмерное количество запросов или иная подозрительная активность)."}),h.jsx("li",{children:"Вносить изменения в настоящее Соглашение в одностороннем порядке. Новая редакция вступает в силу с момента ее публикации."})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["5.2. ",h.jsx("b",{children:"Пользователь обязан:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Соблюдать условия настоящего Соглашения."}),h.jsx("li",{children:"Не использовать Сервис для распространения любой запрещенной информации."}),h.jsx("li",{children:"Соблюдать установленные возрастные ограничения."})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"6. Разрешение споров"}),h.jsx("p",{children:"6.1. Все споры и разногласия подлежат разрешению в соответствии с действующим законодательством Российской Федерации."}),h.jsx("p",{children:"6.2. Местом разрешения споров в судебном порядке является суд по месту нахождения Администрации."})]})]}),HO=()=>h.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),h.jsx("p",{children:"Настоящая Политика конфиденциальности (далее – «Политика») является неотъемлемой частью Пользовательского соглашения и объясняет, какие данные мы собираем и для каких целей. Используя Сервис, вы выражаете безоговорочное согласие с настоящей Политикой."}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Собираемая информация"}),h.jsxs("div",{children:[h.jsxs("p",{children:["1.1. ",h.jsx("b",{children:"Данные, предоставляемые Пользователем:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"При регистрации:"})," Ваше имя, адрес электронной почты (email) и пароль (хранится в зашифрованном виде)."]}),h.jsxs("li",{children:[h.jsx("b",{children:"При взаимодействии:"})," Комментарии, лайки, закладки."]}),h.jsxs("li",{children:[h.jsx("b",{children:"При оплате:"})," Ваш Telegram ID для привязки к аккаунту и проверки статуса подписки."]})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["1.2. ",h.jsx("b",{children:"Технические данные, собираемые автоматически:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"IP-адрес:"})," Для обеспечения безопасности и предотвращения злоупотреблений."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Информация о браузере, ОС и типе устройства:"})," Для корректной и адаптивной работы Сервиса."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Данные о взаимодействии с Сервисом:"})," Время доступа и информация о посещенных страницах внутри Сервиса для ведения внутренней аналитики."]})]})]}),h.jsxs("p",{className:"mt-2",children:["1.3. ",h.jsx("b",{children:"Что мы НЕ собираем:"})," Сервис целенаправленно ",h.jsx("b",{children:"не собирает"})," и не обрабатывает ваши точные данные геолокации, историю просмотров вне нашего Сервиса и другие персональные данные, не указанные выше."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Цели обработки данных"}),h.jsxs("p",{children:["2.1. ",h.jsx("b",{children:"Обеспечение работы Сервиса:"})," Собранные данные необходимы для управления вашей учетной записью, предоставления доступа к функциям, обработки подписок и защиты от мошеннических действий."]}),h.jsxs("p",{children:["2.2. ",h.jsx("b",{children:"Аналитика и улучшение:"})," Обезличенные технические данные используются для анализа работы Сервиса, выявления проблем и его дальнейшего совершенствования."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Передача и хранение данных"}),h.jsxs("p",{children:["3.1. ",h.jsx("b",{children:"Хранение:"})," Данные хранятся на защищенных серверах в течение срока, необходимого для выполнения целей их обработки."]}),h.jsxs("div",{children:[h.jsxs("p",{children:["3.2. ",h.jsx("b",{children:"Передача третьим лицам:"})," Мы не продаем ваши данные. Передача возможна только:"]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Техническим подрядчикам (например, хостинг-провайдерам), которые обеспечивают работу Сервиса."}),h.jsx("li",{children:"Государственным органам по законному и обоснованному запросу."})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Защита информации"}),h.jsx("p",{children:"Администрация принимает все необходимые и достаточные технические и организационные меры для защиты вашей информации от несанкционированного доступа, изменения или раскрытия."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Изменение Политики"}),h.jsx("p",{children:"Администрация оставляет за собой право вносить изменения в настоящую Политику. Новая редакция вступает в силу с момента ее размещения в Сервисе. Продолжение использования Сервиса после внесения изменений означает ваше согласие с новой редакцией."})]})]}),sE=({onBack:e,onAccept:t})=>{const[n,i]=U.useState("guide"),s=[{id:"guide",title:"Руководство"},{id:"terms",title:"Соглашение"},{id:"privacy",title:"Политика"}];return h.jsxs("div",{className:"bg-background min-h-screen text-text-main pb-24",children:[" ",h.jsx(Yn,{title:"Справка и информация",onBack:t?void 0:e}),h.jsx("div",{className:"px-4 pt-4",children:h.jsx("div",{className:"flex space-x-1 rounded-lg bg-component-bg p-1 border border-border-color",children:s.map(r=>h.jsx("button",{onClick:()=>i(r.id),className:`w-full rounded-md py-2.5 text-sm font-medium transition-colors
                                ${n===r.id?"bg-accent text-white shadow":"text-text-main/70 hover:bg-background"}`,children:r.title},r.id))})}),h.jsxs("div",{className:"p-4",children:[n==="guide"&&h.jsx(BO,{}),n==="terms"&&h.jsx(qO,{}),n==="privacy"&&h.jsx(HO,{})]}),t&&h.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t border-border-color shadow-lg",children:h.jsx("button",{onClick:t,className:"w-full bg-accent text-white font-bold py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors",children:"Принять и продолжить"})})]})},FO=e=>e?typeof e.toDate=="function"?e.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit"}):(console.warn("Получен неожиданный формат даты:",e),""):"",GO=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:f})=>{const{user:m}=OS();if(!e)return h.jsxs("div",{children:[h.jsx(Yn,{title:"Загрузка...",onBack:f}),h.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});U.useEffect(()=>{if(m&&e&&e.id){const et=`viewed-${e.id}`;if(!sessionStorage.getItem(et)){sessionStorage.setItem(et,"true");const vt=de(te,"novel_stats",e.id.toString());cl(vt,{views:nD(1)},{merge:!0}).catch(B=>console.error("Ошибка обновления счетчика просмотров:",B))}}},[e,m]);const[g,p]=U.useState(!1),[_,C]=U.useState(null),[O,V]=U.useState("newest"),[S,E]=U.useState(!1),x=U.useRef(null),[D,L]=U.useState(!1),H=Array.isArray(e.genres)?e.genres:[],T=i&&i.expires_at&&typeof i.expires_at.toDate=="function"&&i.expires_at.toDate()>new Date,v=U.useMemo(()=>u&&e&&u[e.id]?u[e.id].chapterId:null,[u,e]);U.useEffect(()=>{x.current&&setTimeout(()=>{x.current&&L(x.current.scrollHeight>x.current.clientHeight)},100)},[e.description]);const b=U.useMemo(()=>{if(!Array.isArray(a))return[];const et=[...a];return O==="newest"?et.reverse():a},[a,O]),A=et=>{!T&&et.isPaid?p(!0):t(et)},R=()=>{if(v){const et=a.find(vt=>vt.id===v);et&&t(et)}},I=et=>C(et),w=async et=>{var B;const vt=(B=window.Telegram)==null?void 0:B.WebApp;if(!vt||!r||!_){console.error("Telegram Web App, userId, or selectedPlan is not available."),vt&&vt.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}vt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async $=>{if(!$)return;const Y=de(te,"users",r);try{await cl(Y,{pendingSubscription:{..._,method:et,date:new Date().toISOString()}},{merge:!0}),vt.openTelegramLink(`https://t.me/${s}?start=${r}`),vt.close()}catch(mt){console.error("Ошибка записи в Firebase:",mt),vt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return console.log("Содержимое глав:",b),h.jsxs("div",{className:"text-text-main",children:[h.jsx(Yn,{title:e.title,onBack:f}),h.jsxs("div",{className:"relative h-64",children:[h.jsx("img",{src:`/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),h.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[h.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),h.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:H.map(et=>{const B=`
            text-xs font-semibold px-3 py-1 rounded-full transition-colors 
            duration-200 bg-component-bg border hover:bg-border-color
            ${et==="16+"||et==="18+"?"border-genre-highlight-border text-genre-highlight-text":"border-border-color text-text-main"}
        `;return h.jsx("button",{onClick:()=>n(et),className:B,children:et},et)})}),h.jsx("div",{ref:x,className:`relative overflow-hidden transition-all duration-500 ${S?"max-h-full":"max-h-24"}`,children:h.jsx("div",{className:"text-sm mb-2 opacity-80 font-body prose",dangerouslySetInnerHTML:{__html:e.description}})}),D&&h.jsx("div",{className:"text-right mt-2",children:h.jsx("button",{onClick:()=>E(!S),className:"text-sm font-semibold text-accent mb-4",children:S?"Скрыть":"Читать полностью..."})}),v&&h.jsxs("button",{onClick:R,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",v,")"]}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),h.jsx("button",{onClick:()=>V(et=>et==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:O==="newest"?"Сначала новые":"Сначала старые"})]}),T&&h.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",i.expires_at.toDate().toLocaleDateString()]}),l?h.jsx("p",{children:"Загрузка глав..."}):h.jsx("div",{className:"flex flex-col gap-3",children:b.map((et,vt)=>{const B=!T&&et.isPaid,$=v===et.id,Y=O==="newest"?b.length-vt:vt+1;return h.jsxs("div",{onClick:()=>A(et),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${B?"opacity-70":""}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[$&&h.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),h.jsx("p",{className:"font-semibold",children:et.title})]}),h.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[h.jsx("div",{className:"bg-accent rounded-full w-8 h-8 flex items-center justify-center ml-auto",children:h.jsx("span",{className:"text-white font-bold text-sm",children:Y})}),h.jsx("p",{className:"text-text-main opacity-70 text-xs mt-1",children:FO(et.published_at)})]})]},et.id)})}),g&&h.jsx(hg,{onClose:()=>p(!1),onSelectPlan:I}),_&&h.jsx(fg,{onClose:()=>C(null),onSelectMethod:w,plan:_})]})]})},QO=({chapter:e,novel:t,userId:n,userName:i,subscription:s,botUsername:r,onBack:a,isUserAdmin:l,allChapters:u,onSelectChapter:f,fontSize:m,onFontSizeChange:g,fontFamily:p,onFontFamilyChange:_,lineHeight:C,onLineHeightChange:O,textAlign:V,onTextAlignChange:S,textIndent:E,onTextIndentChange:x,paragraphSpacing:D,onParagraphSpacingChange:L})=>{if(!t||!e)return h.jsxs("div",{children:[h.jsx(Yn,{title:"Загрузка...",onBack:a}),h.jsx("div",{className:"p-4 text-center",children:"Подготовка главы..."})]});const[H,T]=U.useState([]),[v,b]=U.useState(null),[A,R]=U.useState(!0),[I,w]=U.useState(!1),[et,vt]=U.useState(""),[B,$]=U.useState(null),[Y,mt]=U.useState(""),[Mt,fn]=U.useState(null),[Qt,At]=U.useState(""),[ie,Ee]=U.useState(0),[Wn,Zt]=U.useState(!1),[Jn,Pe]=U.useState(!1),[Ci,Fe]=U.useState(!1),[Ni,An]=U.useState(!1),[On,Di]=U.useState(null),[Oi,ti]=U.useState(""),[Ua,Vi]=U.useState(!0),ei=s&&s.expires_at&&typeof s.expires_at.toDate=="function"&&s.expires_at.toDate()>new Date,G=U.useMemo(()=>de(te,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]),it=U.useMemo(()=>sm(te,`chapters_metadata/${t.id}_${e.id}/comments`),[t.id,e.id]),Wt=U.useCallback(async()=>{if(!(I||!A)){w(!0);try{const Q=Vv(it,Mv("timestamp","desc"),GN(v),kv(20)),Z=await qc(Q),rt=Z.docs.map(ot=>({id:ot.id,...ot.data()}));let st=rt;n&&rt.length>0&&(st=await Promise.all(rt.map(async ot=>{const Kt=de(te,`chapters_metadata/${t.id}_${e.id}/comments/${ot.id}/likes`,n),Mi=await Bs(Kt);return{...ot,userHasLiked:Mi.exists()}}))),T(ot=>[...ot,...st]);const _t=Z.docs[Z.docs.length-1];b(_t),Z.docs.length<20&&R(!1)}catch(Q){console.error("Ошибка подгрузки комментариев: ",Q)}finally{w(!1)}}},[I,A,v,it,n,t.id,e.id]);U.useEffect(()=>{(async()=>{w(!0);try{const Z=await Bs(G);if(Ee(Z.exists()&&Z.data().likeCount||0),n){const Kt=de(te,`chapters_metadata/${t.id}_${e.id}/likes`,n),Mi=await Bs(Kt);Zt(Mi.exists())}else Zt(!1);const rt=Vv(it,Mv("timestamp","desc"),kv(20)),st=await qc(rt),_t=st.docs.map(Kt=>({id:Kt.id,...Kt.data()}));let ot=_t;n&&_t.length>0&&(ot=await Promise.all(_t.map(async Kt=>{const Mi=de(te,`chapters_metadata/${t.id}_${e.id}/comments/${Kt.id}/likes`,n),Os=await Bs(Mi);return{...Kt,userHasLiked:Os.exists()}}))),T(ot),b(st.docs[st.docs.length-1]),R(st.docs.length>=20)}catch(Z){console.error("Ошибка загрузки данных главы:",Z),T([])}finally{w(!1)}})()},[G,n,t.id,e.id,it]),U.useEffect(()=>{(async()=>{if(Vi(!0),ti(""),e.isPaid&&!ei){Vi(!1),ti(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const Z=de(te,"chapter_content",`${t.id}-${e.id}`),rt=await Bs(Z);rt.exists()?ti(rt.data().content):ti(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(Z){console.error("Ошибка загрузки главы:",Z),ti(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Vi(!1)}})()},[t.id,e.id,e.isPaid,ei]);const Te=U.useCallback(async(Q,Z=null)=>{Q.preventDefault();const rt=Z?Qt:et;if(!(!rt.trim()||!n))try{await cl(G,{},{merge:!0});const st={userId:n,userName:i||"Аноним",text:rt,timestamp:zf(),likeCount:0,novelTitle:t.title,chapterTitle:e.title,isNotified:!1};if(Z){st.replyTo=Z;const ot=await Bs(de(it,Z));ot.exists()&&(st.parentUserId=ot.data().userId)}const _t=await ZN(it,st);T(ot=>[{...st,id:_t.id,userHasLiked:!1,timestamp:new Date},...ot]),Z?(fn(null),At("")):vt("")}catch(st){console.error("Ошибка добавления комментария:",st)}},[n,i,et,Qt,G,t.id,e.id,t.title,e.title,it]),kt=U.useCallback(async Q=>{if(!n)return;const Z=de(te,`chapters_metadata/${t.id}_${e.id}/comments`,Q),rt=de(te,`chapters_metadata/${t.id}_${e.id}/comments/${Q}/likes`,n);T(st=>st.map(_t=>{if(_t.id===Q){const ot=_t.userHasLiked?(_t.likeCount||1)-1:(_t.likeCount||0)+1;return{..._t,userHasLiked:!_t.userHasLiked,likeCount:ot}}return _t}));try{await Lv(te,async st=>{const _t=await st.get(rt),ot=await st.get(Z);if(!ot.exists())return;const Kt=ot.data().likeCount||0;_t.exists()?(st.delete(rt),st.update(Z,{likeCount:Math.max(0,Kt-1)})):(st.set(rt,{timestamp:zf()}),st.update(Z,{likeCount:Kt+1}))})}catch(st){console.error("Ошибка при обновлении лайка комментария:",st),T(_t=>_t.map(ot=>{if(ot.id===Q){const Kt=ot.userHasLiked?(ot.likeCount||0)+1:(ot.likeCount||1)-1;return{...ot,userHasLiked:!ot.userHasLiked,likeCount:Kt}}return ot}))}},[n,t.id,e.id]),St=U.useCallback(Q=>{Q?($(Q.id),mt(Q.text)):($(null),mt(""))},[]),It=U.useCallback(async Q=>{if(!Y.trim())return;const Z=de(te,`chapters_metadata/${t.id}_${e.id}/comments`,Q);await $N(Z,{text:Y}),T(rt=>rt.map(st=>st.id===Q?{...st,text:Y}:st)),$(null),mt("")},[Y,t.id,e.id]),Sn=U.useCallback(async Q=>{const Z=de(te,`chapters_metadata/${t.id}_${e.id}/comments`,Q);await XN(Z),T(rt=>rt.filter(st=>st.id!==Q))},[t.id,e.id]),pr=U.useCallback(Q=>{fn(Z=>Z===Q?null:Q),At("")},[]),Ze=async()=>{if(!n)return;const Q=Wn;Zt(!Q),Ee(rt=>Q?rt-1:rt+1);const Z=de(te,`chapters_metadata/${t.id}_${e.id}/likes`,n);try{await Lv(te,async rt=>{var Kt;const st=await rt.get(Z),ot=((Kt=(await rt.get(G)).data())==null?void 0:Kt.likeCount)||0;st.exists()?(rt.delete(Z),rt.set(G,{likeCount:Math.max(0,ot-1)},{merge:!0})):(rt.set(Z,{timestamp:zf()}),rt.set(G,{likeCount:ot+1},{merge:!0}))})}catch(rt){console.error("Ошибка при обновлении лайка:",rt),Zt(Q),Ee(st=>Q?st+1:st-1)}},za=Q=>{Q&&(!ei&&Q.isPaid?(Pe(!1),An(!0)):(f(Q),Pe(!1)))},Ds=Q=>{Di(Q),An(!1)},Gl=async Q=>{var rt;const Z=(rt=window.Telegram)==null?void 0:rt.WebApp;Z&&n&&On&&Z.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async st=>{if(st){const _t=de(te,"users",n);try{await cl(_t,{pendingSubscription:{...On,method:Q,date:new Date().toISOString()}},{merge:!0}),Z.openTelegramLink(`https://t.me/${r}?start=${n}`),Z.close()}catch(ot){console.error("Ошибка записи в Firebase:",ot),Z.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},Ba=u.findIndex(Q=>Q.id===e.id),gr=u[Ba-1],Ql=u[Ba+1],jh=Q=>window.marked?`<div class="prose max-w-none">${window.marked.parse(Q)}</div>`:Q,qa=U.useMemo(()=>[...H].sort((Q,Z)=>{var _t,ot;const rt=(_t=Q.timestamp)!=null&&_t.toDate?Q.timestamp.toDate().getTime():0,st=(ot=Z.timestamp)!=null&&ot.toDate?Z.timestamp.toDate().getTime():0;return rt-st}),[H]),Kl={fontSize:`${m}px`,fontFamily:p,lineHeight:C,textAlign:V};return h.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[h.jsx("style",{children:`
            .chapter-content p {
              text-indent: ${E}em;
              margin-bottom: ${D}em;
            }
          `}),h.jsx(Yn,{title:t.title,onBack:a}),h.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[h.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),h.jsx("div",{className:"whitespace-normal chapter-content",style:Kl,dangerouslySetInnerHTML:{__html:Ua?'<p class="text-center">Загрузка текста главы...</p>':jh(Oi)}}),h.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),h.jsxs("div",{className:"border-t border-border-color pt-8",children:[h.jsx("div",{className:"flex items-center gap-4 mb-8",children:h.jsxs("button",{onClick:Ze,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[h.jsx(kS,{filled:Wn,className:Wn?"text-accent":""}),h.jsx("span",{className:"font-bold text-lg",children:ie})]})}),h.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),h.jsxs("div",{className:"space-y-4 mb-6",children:[H.length>0?kO(qa).map(Q=>h.jsx(LS,{comment:Q,onReply:pr,onLike:kt,onEdit:St,onDelete:Sn,onUpdate:It,isUserAdmin:l,currentUserId:n,editingCommentId:B,editingText:Y,setEditingText:mt,replyingTo:Mt,replyText:Qt,setReplyText:At,onCommentSubmit:Te},Q.id)):!I&&h.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"}),I&&H.length===0&&h.jsx("p",{className:"text-center opacity-70",children:"Загрузка комментариев..."}),A&&!I&&H.length>0&&h.jsx("div",{className:"text-center pt-4",children:h.jsx("button",{onClick:Wt,disabled:I,className:"text-accent hover:underline font-semibold px-4 py-2 rounded-lg disabled:opacity-50",children:I?"Загрузка...":"Загрузить ещё"})})]}),h.jsxs("form",{onSubmit:Q=>Te(Q,null),className:"flex items-center gap-2",children:[h.jsx("input",{type:"text",value:et,onChange:Q=>vt(Q.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),h.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:h.jsx(jS,{className:"w-5 h-5"})})]})]})]}),h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[h.jsx("button",{onClick:()=>za(gr),disabled:!gr,className:"p-2 disabled:opacity-50",children:h.jsx(VS,{})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Pe(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),h.jsx("button",{onClick:()=>Fe(!0),className:"p-2 rounded-lg bg-background",children:h.jsx(OO,{})})]}),h.jsx("button",{onClick:()=>za(Ql),disabled:!Ql,className:"p-2 disabled:opacity-50",children:h.jsx(xO,{className:"opacity-100"})})]}),Jn&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>Pe(!1),children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:Q=>Q.stopPropagation(),children:[h.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),h.jsx("div",{className:"overflow-y-auto",children:h.jsx("div",{className:"flex flex-col gap-2",children:u.map(Q=>h.jsx("button",{onClick:()=>za(Q),className:`p-2 text-left rounded-md ${Q.id===e.id?"bg-accent text-white":"bg-background"}`,children:Q.title},Q.id))})})]})}),Ci&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>Fe(!1),children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:Q=>Q.stopPropagation(),children:[h.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Размер текста"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>g(-1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:m}),h.jsx("button",{onClick:()=>g(1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Шрифт"}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsx("button",{onClick:()=>_("'JetBrains Mono', monospace"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("JetBrains Mono")?"bg-accent text-white":"bg-background"}`,children:"Стандарт"}),h.jsx("button",{onClick:()=>_("'Montserrat', sans-serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Montserrat")?"bg-accent text-white":"bg-background"}`,children:"Montserrat"}),h.jsx("button",{onClick:()=>_("'Lora', serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Lora")?"bg-accent text-white":"bg-background"}`,children:"Lora"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Интервал"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>O(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:C.toFixed(1)}),h.jsx("button",{onClick:()=>O(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Выравнивание"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>S("left"),className:`px-3 py-1 rounded-md ${V==="left"?"bg-accent text-white":"bg-background"}`,children:"По левому"}),h.jsx("button",{onClick:()=>S("justify"),className:`px-3 py-1 rounded-md ${V==="justify"?"bg-accent text-white":"bg-background"}`,children:"По ширине"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Красная строка"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>x(0),className:`px-3 py-1 rounded-md ${E===0?"bg-accent text-white":"bg-background"}`,children:"Нет"}),h.jsx("button",{onClick:()=>x(1.5),className:`px-3 py-1 rounded-md ${E===1.5?"bg-accent text-white":"bg-background"}`,children:"Да"}),h.jsx("button",{onClick:()=>x(3),className:`px-3 py-1 rounded-md ${E===3?"bg-accent text-white":"bg-background"}`,children:"Большая"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Отступ абзаца"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>L(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:D.toFixed(1)}),h.jsx("button",{onClick:()=>L(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]})]})]})}),Ni&&h.jsx(hg,{onClose:()=>An(!1),onSelectPlan:Ds}),On&&h.jsx(fg,{onClose:()=>Di(null),onSelectMethod:Gl,plan:On})]})},KO=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>h.jsxs("div",{children:[h.jsx(Yn,{title:"Закладки"}),h.jsx(cg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),YO=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i,auth:s,onThemeToggle:r,currentTheme:a,onShowHelp:l})=>{const u=()=>{c4(s).catch(_=>{console.error("Ошибка выхода:",_)})},f=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(_=>console.error("Не удалось скопировать UID: ",_))},g=t&&t.expires_at&&typeof t.expires_at.toDate=="function"?t.expires_at.toDate():null,p=g&&g>new Date;return h.jsxs("div",{children:[h.jsx(Yn,{title:"Профиль"}),h.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-lg",children:(e==null?void 0:e.displayName)||"Аноним"}),h.jsx("p",{className:"text-sm text-text-main/70",children:e==null?void 0:e.email})]}),h.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-background transition-colors",children:h.jsx(VO,{})})]})}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Тёмная тема"}),h.jsx("button",{onClick:r,className:"w-14 h-7 rounded-full bg-background flex items-center transition-colors p-1",children:h.jsx("div",{className:`w-5 h-5 rounded-full bg-accent shadow-md transform transition-transform ${a==="dark"?"translate-x-7":""}`})})]})]}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),p?h.jsxs("div",{children:[h.jsx("p",{className:"text-green-500",children:"Активна"}),h.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",g.toLocaleDateString()]})]}):h.jsxs("div",{children:[h.jsx("p",{className:"text-red-500",children:"Неактивна"}),h.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),h.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для привязки"}),h.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для связи вашего аккаунта с Telegram-ботом. Например, после подписки на Boosty."}),h.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:h.jsx("code",{children:i||"Загрузка..."})}),h.jsx("button",{onClick:f,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]}),h.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:h.jsx("button",{onClick:l,className:"w-full text-left text-sm text-accent hover:underline",children:"Справка и правовая информация"})})]})},$O=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=U.useState(""),a=U.useMemo(()=>e.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())),[e,s]);return h.jsxs("div",{children:[h.jsx(Yn,{title:"Поиск"}),h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:h.jsx(MS,{className:"text-text-main opacity-50"})}),h.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"})]})}),s&&a.length===0?h.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Ничего не найдено"}):h.jsx(cg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})};function XO(){const{user:e,loading:t}=OS(),[n,i]=U.useState(localStorage.getItem("theme")||"light"),[s,r]=U.useState("list"),[a,l]=U.useState("library"),[u,f]=U.useState([]),[m,g]=U.useState(null),[p,_]=U.useState(null),[C,O]=U.useState(null),[V,S]=U.useState(null),[E,x]=U.useState(!1),[D,L]=U.useState([]),[H,T]=U.useState(!0),[v,b]=U.useState({}),[A,R]=U.useState([]),[I,w]=U.useState(!0),[et,vt]=U.useState(!1),[B,$]=U.useState(null),[Y,mt]=U.useState(null),[Mt,fn]=U.useState(!1),[Qt,At]=U.useState(!1),[ie,Ee]=U.useState(()=>{const G=localStorage.getItem("readingSettings"),it={fontSize:16,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.6,textAlign:"left",textIndent:1.5,paragraphSpacing:1};return G?{...it,...JSON.parse(G)}:it}),Wn="tenebrisverbot",Zt=e==null?void 0:e.uid;U.useEffect(()=>{window.document.documentElement.classList.toggle("dark",n==="dark"),localStorage.setItem("theme",n)},[n]),U.useEffect(()=>{localStorage.setItem("readingSettings",JSON.stringify(ie))},[ie]),U.useEffect(()=>{if(t)return;if(!e){w(!1),f([]),S(null),R([]),b({}),At(!1);return}w(!0);const G=async()=>{try{const St=(await qc(sm(te,"novels"))).docs.map(Ze=>({...Ze.data(),id:Ze.id})),It=await qc(sm(te,"novel_stats")),Sn=new Map;It.forEach(Ze=>Sn.set(Ze.id,Ze.data().views));const pr=St.map(Ze=>({...Ze,views:Sn.get(Ze.id)||0}));f(pr)}catch(kt){console.error("Ошибка загрузки новелл или статистики:",kt),f([])}},it=async()=>{try{const kt=await e.getIdTokenResult();x(!!kt.claims.admin)}catch(kt){console.error("Ошибка проверки статуса администратора:",kt),x(!1)}};Promise.all([G(),it()]).finally(()=>{w(!1)});const Wt=de(te,"users",e.uid),Te=WN(Wt,kt=>{if(kt.exists()){const St=kt.data();S(St.subscription||null),b(St.lastRead||{}),R(St.bookmarks||[]),St.settings&&Ee(It=>({...It,...St.settings})),St.policyAccepted?At(!1):At(!0)}else At(!0)},kt=>{console.error("Ошибка подписки на данные пользователя:",kt)});return()=>Te()},[e,t]),U.useEffect(()=>{if(!m){L([]);return}T(!0),(async()=>{try{const it=de(te,"chapter_info",m.id),Wt=await Bs(it);if(Wt.exists()&&Wt.data()){const kt=Wt.data().chapters||{},St=Object.keys(kt).map(It=>({id:parseInt(It),title:`Глава ${It}`,isPaid:kt[It].isPaid||!1,published_at:kt[It].published_at||null})).sort((It,Sn)=>It.id-Sn.id);L(St)}else L([])}catch(it){console.error("Ошибка загрузки глав:",it),L([])}finally{T(!1)}})()},[m]);const Jn=U.useCallback(()=>{s==="reader"?(_(null),r("details")):s==="details"&&(g(null),O(null),r("list"))},[s]);U.useEffect(()=>{var it;const G=(it=window.Telegram)==null?void 0:it.WebApp;if(G)return G.ready(),G.expand(),G.onEvent("backButtonClicked",Jn),s==="list"||Qt?G.BackButton.hide():G.BackButton.show(),()=>G.offEvent("backButtonClicked",Jn)},[s,Jn,Qt]);const Pe=U.useCallback(async G=>{Zt&&await cl(de(te,"users",Zt),G,{merge:!0})},[Zt]),Ci=()=>i(G=>G==="light"?"dark":"light"),Fe=U.useCallback((G,it)=>{Ee(Wt=>{const Te=typeof it=="function"?it(Wt[G]):it;if(G==="fontSize"&&(Te<12||Te>28)||(G==="lineHeight"||G==="paragraphSpacing")&&(Te<1||Te>2.5))return Wt;const kt={...Wt,[G]:Te};return Pe({settings:kt}),kt})},[Pe]),Ni=U.useCallback(async G=>{if(_(G),r("reader"),Zt&&m){const it={...v,[m.id]:{novelId:m.id,chapterId:G.id,timestamp:new Date().toISOString()}};b(it),await Pe({lastRead:it})}},[Zt,m,v,Pe]),An=G=>{g(G),r("details")},On=G=>{O(G),r("list"),l("library")},Di=()=>O(null),Oi=U.useCallback(async G=>{const it=A.includes(G)?A.filter(Wt=>Wt!==G):[...A,G];R(it),await Pe({bookmarks:it})},[A,Pe]),ti=G=>{$(G),vt(!1)},Ua=async G=>{var Wt;const it=(Wt=window.Telegram)==null?void 0:Wt.WebApp;if(!it||!Zt||!B){it&&it.showAlert("Произошла ошибка.");return}it.showConfirm("Вы будете перенаправлены в бот для завершения оплаты...",async Te=>{if(Te)try{await Pe({pendingSubscription:{...B,method:G,date:new Date().toISOString()}}),it.openTelegramLink(`https://t.me/${Wn}?start=${Zt}`),it.close()}catch(kt){console.error("Ошибка записи в Firebase:",kt),it.showAlert("Не удалось сохранить ваш выбор.")}})},Vi=async()=>{Zt&&(await Pe({policyAccepted:!0}),At(!1))};if(t||I&&!Qt)return h.jsx(PO,{});if(e&&Qt)return h.jsx(sE,{onAccept:Vi});if(Mt)return h.jsx(sE,{onBack:()=>fn(!1)});if(!e)return h.jsx(wO,{});const ei=()=>{if(s==="details")return h.jsx(GO,{novel:m,onSelectChapter:Ni,onGenreSelect:On,subscription:V,botUsername:Wn,userId:Zt,chapters:D,isLoadingChapters:H,lastReadData:v,onBack:Jn});if(s==="reader")return h.jsx(QO,{chapter:p,novel:m,userId:Zt,userName:(e==null?void 0:e.displayName)||"Аноним",allChapters:D,subscription:V,botUsername:Wn,onBack:Jn,isUserAdmin:E,onSelectChapter:Ni,fontSize:ie.fontSize,onFontSizeChange:G=>Fe("fontSize",it=>it+G),fontFamily:ie.fontFamily,onFontFamilyChange:G=>Fe("fontFamily",G),lineHeight:ie.lineHeight,onLineHeightChange:G=>Fe("lineHeight",it=>it+G),textAlign:ie.textAlign,onTextAlignChange:G=>Fe("textAlign",G),textIndent:ie.textIndent,onTextIndentChange:G=>Fe("textIndent",G),paragraphSpacing:ie.paragraphSpacing,onParagraphSpacingChange:G=>Fe("paragraphSpacing",it=>it+G)});switch(a){case"library":return h.jsxs(h.Fragment,{children:[h.jsx(Yn,{title:"Библиотека"}),h.jsx(UO,{onReadMore:mt}),C&&h.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"opacity-70",children:"Жанр:"}),h.jsx("strong",{className:"ml-2",children:C})]}),h.jsx("button",{onClick:Di,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),h.jsx(cg,{novels:u.filter(G=>!C||G.genres&&G.genres.includes(C)),onSelectNovel:An,bookmarks:A,onToggleBookmark:Oi})]});case"search":return h.jsx($O,{novels:u,onSelectNovel:An,bookmarks:A,onToggleBookmark:Oi});case"bookmarks":return h.jsx(KO,{novels:u.filter(G=>A.includes(G.id)),onSelectNovel:An,bookmarks:A,onToggleBookmark:Oi});case"profile":return h.jsx(YO,{user:e,subscription:V,onGetSubscriptionClick:()=>vt(!0),userId:Zt,auth:fl,onThemeToggle:Ci,currentTheme:n,onShowHelp:()=>fn(!0)});default:return h.jsx(Yn,{title:"Библиотека"})}};return h.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${E?"":"no-select"}`,children:[h.jsx("div",{className:"pb-20",children:ei()}),s==="list"&&h.jsx(LO,{activeTab:a,setActiveTab:l}),et&&h.jsx(hg,{onClose:()=>vt(!1),onSelectPlan:ti}),B&&h.jsx(fg,{onClose:()=>$(null),onSelectMethod:Ua,plan:B}),Y&&h.jsx(zO,{newsItem:Y,onClose:()=>mt(null)})]})}sR.createRoot(document.getElementById("root")).render(h.jsx(pE.StrictMode,{children:h.jsx(AO,{children:h.jsx(XO,{})})}));
