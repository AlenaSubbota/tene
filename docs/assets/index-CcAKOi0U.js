(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Dv={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb=Symbol.for("react.transitional.element"),kb=Symbol.for("react.fragment");function xv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:Mb,type:e,key:i,ref:t!==void 0?t:null,props:n}}Sc.Fragment=kb;Sc.jsx=xv;Sc.jsxs=xv;Dv.exports=Sc;var w=Dv.exports,Ov={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=Symbol.for("react.transitional.element"),Pb=Symbol.for("react.portal"),Ub=Symbol.for("react.fragment"),Lb=Symbol.for("react.strict_mode"),jb=Symbol.for("react.profiler"),zb=Symbol.for("react.consumer"),Bb=Symbol.for("react.context"),qb=Symbol.for("react.forward_ref"),Hb=Symbol.for("react.suspense"),Fb=Symbol.for("react.memo"),Vv=Symbol.for("react.lazy"),Np=Symbol.iterator;function Gb(e){return e===null||typeof e!="object"?null:(e=Np&&e[Np]||e["@@iterator"],typeof e=="function"?e:null)}var Mv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kv=Object.assign,Pv={};function sa(e,t,n){this.props=e,this.context=t,this.refs=Pv,this.updater=n||Mv}sa.prototype.isReactComponent={};sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uv(){}Uv.prototype=sa.prototype;function Bd(e,t,n){this.props=e,this.context=t,this.refs=Pv,this.updater=n||Mv}var qd=Bd.prototype=new Uv;qd.constructor=Bd;kv(qd,sa.prototype);qd.isPureReactComponent=!0;var Dp=Array.isArray,Vt={H:null,A:null,T:null,S:null,V:null},Lv=Object.prototype.hasOwnProperty;function Hd(e,t,n,i,s,r){return n=r.ref,{$$typeof:zd,type:e,key:t,ref:n!==void 0?n:null,props:r}}function Qb(e,t){return Hd(e.type,t,void 0,void 0,void 0,e.props)}function Fd(e){return typeof e=="object"&&e!==null&&e.$$typeof===zd}function Yb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xp=/\/+/g;function Rh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yb(""+e.key):t.toString(36)}function Op(){}function Kb(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Op,Op):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function rr(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case zd:case Pb:a=!0;break;case Vv:return a=e._init,rr(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+Rh(e,0):i,Dp(s)?(n="",a!=null&&(n=a.replace(xp,"$&/")+"/"),rr(s,t,n,"",function(h){return h})):s!=null&&(Fd(s)&&(s=Qb(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(xp,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(Dp(e))for(var u=0;u<e.length;u++)i=e[u],r=l+Rh(i,u),a+=rr(i,t,n,r,s);else if(u=Gb(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+Rh(i,u++),a+=rr(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return rr(Kb(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Ul(e,t,n){if(e==null)return e;var i=[],s=0;return rr(e,i,"","",function(r){return t.call(n,r,s++)}),i}function Xb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function $b(){}nt.Children={map:Ul,forEach:function(e,t,n){Ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ul(e,function(){t++}),t},toArray:function(e){return Ul(e,function(t){return t})||[]},only:function(e){if(!Fd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=sa;nt.Fragment=Ub;nt.Profiler=jb;nt.PureComponent=Bd;nt.StrictMode=Lb;nt.Suspense=Hb;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Vt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Vt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=kv({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!Lv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Hd(e.type,s,void 0,void 0,r,i)};nt.createContext=function(e){return e={$$typeof:Bb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:zb,_context:e},e};nt.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)Lv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Hd(e,r,void 0,void 0,null,s)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:qb,render:e}};nt.isValidElement=Fd;nt.lazy=function(e){return{$$typeof:Vv,_payload:{_status:-1,_result:e},_init:Xb}};nt.memo=function(e,t){return{$$typeof:Fb,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Vt.T,n={};Vt.T=n;try{var i=e(),s=Vt.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then($b,Vp)}catch(r){Vp(r)}finally{Vt.T=t}};nt.unstable_useCacheRefresh=function(){return Vt.H.useCacheRefresh()};nt.use=function(e){return Vt.H.use(e)};nt.useActionState=function(e,t,n){return Vt.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Vt.H.useCallback(e,t)};nt.useContext=function(e){return Vt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Vt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Vt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Vt.H.useId()};nt.useImperativeHandle=function(e,t,n){return Vt.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Vt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Vt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Vt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Vt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Vt.H.useReducer(e,t,n)};nt.useRef=function(e){return Vt.H.useRef(e)};nt.useState=function(e){return Vt.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Vt.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Vt.H.useTransition()};nt.version="19.1.1";Ov.exports=nt;var F=Ov.exports,jv={exports:{}},bc={},zv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,G){var X=j.length;j.push(G);t:for(;0<X;){var ot=X-1>>>1,yt=j[ot];if(0<s(yt,G))j[ot]=G,j[X]=yt,X=ot;else break t}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var G=j[0],X=j.pop();if(X!==G){j[0]=X;t:for(var ot=0,yt=j.length,ie=yt>>>1;ot<ie;){var Bt=2*(ot+1)-1,gt=j[Bt],Qt=Bt+1,se=j[Qt];if(0>s(gt,X))Qt<yt&&0>s(se,gt)?(j[ot]=se,j[Qt]=X,ot=Qt):(j[ot]=gt,j[Bt]=X,ot=Bt);else if(Qt<yt&&0>s(se,X))j[ot]=se,j[Qt]=X,ot=Qt;else break t}}return G}function s(j,G){var X=j.sortIndex-G.sortIndex;return X!==0?X:j.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,D=!1,V=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function x(j){for(var G=n(h);G!==null;){if(G.callback===null)i(h);else if(G.startTime<=j)i(h),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(h)}}function L(j){if(V=!1,x(j),!D)if(n(u)!==null)D=!0,q||(q=!0,I());else{var G=n(h);G!==null&&Gt(L,G.startTime-j)}}var q=!1,T=-1,y=5,E=-1;function b(){return M?!0:!(e.unstable_now()-E<y)}function C(){if(M=!1,q){var j=e.unstable_now();E=j;var G=!0;try{t:{D=!1,V&&(V=!1,v(T),T=-1),_=!0;var X=m;try{e:{for(x(j),g=n(u);g!==null&&!(g.expirationTime>j&&b());){var ot=g.callback;if(typeof ot=="function"){g.callback=null,m=g.priorityLevel;var yt=ot(g.expirationTime<=j);if(j=e.unstable_now(),typeof yt=="function"){g.callback=yt,x(j),G=!0;break e}g===n(u)&&i(u),x(j)}else i(u);g=n(u)}if(g!==null)G=!0;else{var ie=n(h);ie!==null&&Gt(L,ie.startTime-j),G=!1}}break t}finally{g=null,m=X,_=!1}G=void 0}}finally{G?I():q=!1}}}var I;if(typeof R=="function")I=function(){R(C)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,ht=A.port2;A.port1.onmessage=C,I=function(){ht.postMessage(null)}}else I=function(){S(C,0)};function Gt(j,G){T=S(function(){j(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var X=m;m=G;try{return j()}finally{m=X}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=m;m=j;try{return G()}finally{m=X}},e.unstable_scheduleCallback=function(j,G,X){var ot=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ot+X:ot):X=ot,j){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=X+yt,j={id:d++,callback:G,priorityLevel:j,startTime:X,expirationTime:yt,sortIndex:-1},X>ot?(j.sortIndex=X,t(h,j),n(u)===null&&j===n(h)&&(V?(v(T),T=-1):V=!0,Gt(L,X-ot))):(j.sortIndex=yt,t(u,j),D||_||(D=!0,q||(q=!0,I()))),j},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(j){var G=m;return function(){var X=m;m=G;try{return j.apply(this,arguments)}finally{m=X}}}})(Bv);zv.exports=Bv;var Zb=zv.exports,qv={exports:{}},Ve={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb=F;function Hv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ti(){}var Oe={d:{f:Ti,r:function(){throw Error(Hv(522))},D:Ti,C:Ti,L:Ti,m:Ti,X:Ti,S:Ti,M:Ti},p:0,findDOMNode:null},Jb=Symbol.for("react.portal");function t1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jb,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Za=Wb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function wc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ve.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Oe;Ve.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Hv(299));return t1(e,t,null,n)};Ve.flushSync=function(e){var t=Za.T,n=Oe.p;try{if(Za.T=null,Oe.p=2,e)return e()}finally{Za.T=t,Oe.p=n,Oe.d.f()}};Ve.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Oe.d.C(e,t))};Ve.prefetchDNS=function(e){typeof e=="string"&&Oe.d.D(e)};Ve.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=wc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Oe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Oe.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ve.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=wc(t.as,t.crossOrigin);Oe.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Oe.d.M(e)};Ve.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=wc(n,t.crossOrigin);Oe.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ve.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=wc(t.as,t.crossOrigin);Oe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Oe.d.m(e)};Ve.requestFormReset=function(e){Oe.d.r(e)};Ve.unstable_batchedUpdates=function(e,t){return e(t)};Ve.useFormState=function(e,t,n){return Za.H.useFormState(e,t,n)};Ve.useFormStatus=function(){return Za.H.useHostTransitionStatus()};Ve.version="19.1.1";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(e){console.error(e)}}Fv(),qv.exports=Ve;var e1=qv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=Zb,Gv=F,n1=e1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mp(e){if(Qo(e)!==e)throw Error(U(188))}function i1(e){var t=e.alternate;if(!t){if(t=Qo(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Mp(s),e;if(r===i)return Mp(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Kv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Kv(e),t!==null)return t;e=e.sibling}return null}var xt=Object.assign,s1=Symbol.for("react.element"),Ll=Symbol.for("react.transitional.element"),Ha=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),Xv=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),r1=Symbol.for("react.provider"),$v=Symbol.for("react.consumer"),Kn=Symbol.for("react.context"),Gd=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),Qd=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),Af=Symbol.for("react.activity"),a1=Symbol.for("react.memo_cache_sentinel"),kp=Symbol.iterator;function ka(e){return e===null||typeof e!="object"?null:(e=kp&&e[kp]||e["@@iterator"],typeof e=="function"?e:null)}var o1=Symbol.for("react.client.reference");function Sf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===o1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dr:return"Fragment";case vf:return"Profiler";case Xv:return"StrictMode";case Ef:return"Suspense";case Tf:return"SuspenseList";case Af:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ha:return"Portal";case Kn:return(e.displayName||"Context")+".Provider";case $v:return(e._context.displayName||"Context")+".Consumer";case Gd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qd:return t=e.displayName||null,t!==null?t:Sf(e.type)||"Memo";case wi:t=e._payload,e=e._init;try{return Sf(e(t))}catch{}}return null}var Fa=Array.isArray,Z=Gv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=n1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Is={pending:!1,data:null,method:null,action:null},bf=[],mr=-1;function Ln(e){return{current:e}}function ce(e){0>mr||(e.current=bf[mr],bf[mr]=null,mr--)}function Mt(e,t){mr++,bf[mr]=e.current,e.current=t}var Nn=Ln(null),To=Ln(null),zi=Ln(null),Iu=Ln(null);function Cu(e,t){switch(Mt(zi,t),Mt(To,e),Mt(Nn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zy(t),e=d0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ce(Nn),Mt(Nn,e)}function zr(){ce(Nn),ce(To),ce(zi)}function wf(e){e.memoizedState!==null&&Mt(Iu,e);var t=Nn.current,n=d0(t,e.type);t!==n&&(Mt(To,e),Mt(Nn,n))}function Nu(e){To.current===e&&(ce(Nn),ce(To)),Iu.current===e&&(ce(Iu),xo._currentValue=Is)}var Rf=Object.prototype.hasOwnProperty,Yd=ne.unstable_scheduleCallback,Ih=ne.unstable_cancelCallback,l1=ne.unstable_shouldYield,u1=ne.unstable_requestPaint,Dn=ne.unstable_now,c1=ne.unstable_getCurrentPriorityLevel,Zv=ne.unstable_ImmediatePriority,Wv=ne.unstable_UserBlockingPriority,Du=ne.unstable_NormalPriority,h1=ne.unstable_LowPriority,Jv=ne.unstable_IdlePriority,f1=ne.log,d1=ne.unstable_setDisableYieldValue,Yo=null,$e=null;function ki(e){if(typeof f1=="function"&&d1(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Yo,e)}catch{}}var Ze=Math.clz32?Math.clz32:p1,m1=Math.log,g1=Math.LN2;function p1(e){return e>>>=0,e===0?32:31-(m1(e)/g1|0)|0}var jl=256,zl=4194304;function As(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=As(i):(a&=l,a!==0?s=As(a):n||(n=l&~e,n!==0&&(s=As(n))))):(l=i&~r,l!==0?s=As(l):a!==0?s=As(a):n||(n=i&~e,n!==0&&(s=As(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function Ko(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function y1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tE(){var e=jl;return jl<<=1,!(jl&4194048)&&(jl=256),e}function eE(){var e=zl;return zl<<=1,!(zl&62914560)&&(zl=4194304),e}function Ch(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _1(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Ze(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&nE(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function nE(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ze(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function iE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ze(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Kd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function sE(){var e=vt.p;return e!==0?e:(e=window.event,e===void 0?32:S0(e.type))}function v1(e,t){var n=vt.p;try{return vt.p=e,t()}finally{vt.p=n}}var hs=Math.random().toString(36).slice(2),Re="__reactFiber$"+hs,ze="__reactProps$"+hs,ra="__reactContainer$"+hs,If="__reactEvents$"+hs,E1="__reactListeners$"+hs,T1="__reactHandles$"+hs,Pp="__reactResources$"+hs,$o="__reactMarker$"+hs;function $d(e){delete e[Re],delete e[ze],delete e[If],delete e[E1],delete e[T1]}function gr(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ra]||n[Re]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hy(e);e!==null;){if(n=e[Re])return n;e=Hy(e)}return t}e=n,n=e.parentNode}return null}function aa(e){if(e=e[Re]||e[ra]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Ir(e){var t=e[Pp];return t||(t=e[Pp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function oe(e){e[$o]=!0}var rE=new Set,aE={};function Fs(e,t){Br(e,t),Br(e+"Capture",t)}function Br(e,t){for(aE[e]=t,e=0;e<t.length;e++)rE.add(t[e])}var A1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Up={},Lp={};function S1(e){return Rf.call(Lp,e)?!0:Rf.call(Up,e)?!1:A1.test(e)?Lp[e]=!0:(Up[e]=!0,!1)}function su(e,t,n){if(S1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Bl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Fn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Nh,jp;function ar(e){if(Nh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Nh=t&&t[1]||"",jp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nh+e+jp}var Dh=!1;function xh(e,t){if(!e||Dh)return"";Dh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{Dh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ar(n):""}function b1(e){switch(e.tag){case 26:case 27:case 5:return ar(e.type);case 16:return ar("Lazy");case 13:return ar("Suspense");case 19:return ar("SuspenseList");case 0:case 15:return xh(e.type,!1);case 11:return xh(e.type.render,!1);case 1:return xh(e.type,!0);case 31:return ar("Activity");default:return""}}function zp(e){try{var t="";do t+=b1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function w1(e){var t=oE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xu(e){e._valueTracker||(e._valueTracker=w1(e))}function lE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=oE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ou(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var R1=/[\n"\\]/g;function hn(e){return e.replace(R1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Cf(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ln(t)):e.value!==""+ln(t)&&(e.value=""+ln(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Nf(e,a,ln(t)):n!=null?Nf(e,a,ln(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+ln(l):e.removeAttribute("name")}function uE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+ln(n):"",t=t!=null?""+ln(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Nf(e,t,n){t==="number"&&Ou(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Cr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ln(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function cE(e,t,n){if(t!=null&&(t=""+ln(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ln(n):""}function hE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Fa(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ln(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function qr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var I1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||I1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function fE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&Bp(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&Bp(e,r,t[r])}function Zd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),N1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(e){return N1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Df=null;function Wd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pr=null,Nr=null;function qp(e){var t=aa(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;t:switch(e=t.stateNode,t.type){case"input":if(Cf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[ze]||null;if(!s)throw Error(U(90));Cf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&lE(i)}break t;case"textarea":cE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}}}var Oh=!1;function dE(e,t,n){if(Oh)return e(t,n);Oh=!0;try{var i=e(t);return i}finally{if(Oh=!1,(pr!==null||Nr!==null)&&(Pc(),pr&&(t=pr,e=Nr,Nr=pr=null,qp(t),e)))for(t=0;t<e.length;t++)qp(e[t])}}function Ao(e,t){var n=e.stateNode;if(n===null)return null;var i=n[ze]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xf=!1;if(si)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){xf=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{xf=!1}var Pi=null,Jd=null,au=null;function mE(){if(au)return au;var e,t=Jd,n=t.length,i,s="value"in Pi?Pi.value:Pi.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return au=s.slice(e,1<i?1-i:void 0)}function ou(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ql(){return!0}function Hp(){return!1}function Be(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ql:Hp,this.isPropagationStopped=Hp,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=Be(Gs),Zo=xt({},Gs,{view:0,detail:0}),D1=Be(Zo),Vh,Mh,Ua,Cc=xt({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ua&&(Ua&&e.type==="mousemove"?(Vh=e.screenX-Ua.screenX,Mh=e.screenY-Ua.screenY):Mh=Vh=0,Ua=e),Vh)},movementY:function(e){return"movementY"in e?e.movementY:Mh}}),Fp=Be(Cc),x1=xt({},Cc,{dataTransfer:0}),O1=Be(x1),V1=xt({},Zo,{relatedTarget:0}),kh=Be(V1),M1=xt({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),k1=Be(M1),P1=xt({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U1=Be(P1),L1=xt({},Gs,{data:0}),Gp=Be(L1),j1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B1[e])?!!t[e]:!1}function tm(){return q1}var H1=xt({},Zo,{key:function(e){if(e.key){var t=j1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ou(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?z1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(e){return e.type==="keypress"?ou(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ou(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F1=Be(H1),G1=xt({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qp=Be(G1),Q1=xt({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),Y1=Be(Q1),K1=xt({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),X1=Be(K1),$1=xt({},Cc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Z1=Be($1),W1=xt({},Gs,{newState:0,oldState:0}),J1=Be(W1),tw=[9,13,27,32],em=si&&"CompositionEvent"in window,Wa=null;si&&"documentMode"in document&&(Wa=document.documentMode);var ew=si&&"TextEvent"in window&&!Wa,gE=si&&(!em||Wa&&8<Wa&&11>=Wa),Yp=" ",Kp=!1;function pE(e,t){switch(e){case"keyup":return tw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function nw(e,t){switch(e){case"compositionend":return yE(t);case"keypress":return t.which!==32?null:(Kp=!0,Yp);case"textInput":return e=t.data,e===Yp&&Kp?null:e;default:return null}}function iw(e,t){if(yr)return e==="compositionend"||!em&&pE(e,t)?(e=mE(),au=Jd=Pi=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gE&&t.locale!=="ko"?null:t.data;default:return null}}var sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sw[e.type]:t==="textarea"}function _E(e,t,n,i){pr?Nr?Nr.push(i):Nr=[i]:pr=i,t=$u(t,"onChange"),0<t.length&&(n=new Ic("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ja=null,So=null;function rw(e){c0(e,0)}function Nc(e){var t=Ga(e);if(lE(t))return e}function $p(e,t){if(e==="change")return t}var vE=!1;if(si){var Ph;if(si){var Uh="oninput"in document;if(!Uh){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),Uh=typeof Zp.oninput=="function"}Ph=Uh}else Ph=!1;vE=Ph&&(!document.documentMode||9<document.documentMode)}function Wp(){Ja&&(Ja.detachEvent("onpropertychange",EE),So=Ja=null)}function EE(e){if(e.propertyName==="value"&&Nc(So)){var t=[];_E(t,So,e,Wd(e)),dE(rw,t)}}function aw(e,t,n){e==="focusin"?(Wp(),Ja=t,So=n,Ja.attachEvent("onpropertychange",EE)):e==="focusout"&&Wp()}function ow(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nc(So)}function lw(e,t){if(e==="click")return Nc(t)}function uw(e,t){if(e==="input"||e==="change")return Nc(t)}function cw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:cw;function bo(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Rf.call(t,s)||!nn(e[s],t[s]))return!1}return!0}function Jp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ty(e,t){var n=Jp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Jp(n)}}function TE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?TE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ou(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ou(e.document)}return t}function nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hw=si&&"documentMode"in document&&11>=document.documentMode,_r=null,Of=null,to=null,Vf=!1;function ey(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vf||_r==null||_r!==Ou(i)||(i=_r,"selectionStart"in i&&nm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),to&&bo(to,i)||(to=i,i=$u(Of,"onSelect"),0<i.length&&(t=new Ic("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=_r)))}function Ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},Lh={},SE={};si&&(SE=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Qs(e){if(Lh[e])return Lh[e];if(!vr[e])return e;var t=vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in SE)return Lh[e]=t[n];return e}var bE=Qs("animationend"),wE=Qs("animationiteration"),RE=Qs("animationstart"),fw=Qs("transitionrun"),dw=Qs("transitionstart"),mw=Qs("transitioncancel"),IE=Qs("transitionend"),CE=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function Sn(e,t){CE.set(e,t),Fs(t,[e])}var ny=new WeakMap;function fn(e,t){if(typeof e=="object"&&e!==null){var n=ny.get(e);return n!==void 0?n:(t={value:e,source:t,stack:zp(t)},ny.set(e,t),t)}return{value:e,source:t,stack:zp(t)}}var on=[],Er=0,im=0;function Dc(){for(var e=Er,t=im=Er=0;t<e;){var n=on[t];on[t++]=null;var i=on[t];on[t++]=null;var s=on[t];on[t++]=null;var r=on[t];if(on[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&NE(n,s,r)}}function xc(e,t,n,i){on[Er++]=e,on[Er++]=t,on[Er++]=n,on[Er++]=i,im|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function sm(e,t,n,i){return xc(e,t,n,i),Vu(e)}function oa(e,t){return xc(e,null,null,t),Vu(e)}function NE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-Ze(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function Vu(e){if(50<co)throw co=0,ed=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tr={};function gw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,n,i){return new gw(e,t,n,i)}function rm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ei(e,t){var n=e.alternate;return n===null?(n=Ye(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function DE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function lu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")rm(e)&&(a=1);else if(typeof e=="string")a=yR(e,n,Nn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Af:return e=Ye(31,n,t,s),e.elementType=Af,e.lanes=r,e;case dr:return Cs(n.children,s,r,t);case Xv:a=8,s|=24;break;case vf:return e=Ye(12,n,t,s|2),e.elementType=vf,e.lanes=r,e;case Ef:return e=Ye(13,n,t,s),e.elementType=Ef,e.lanes=r,e;case Tf:return e=Ye(19,n,t,s),e.elementType=Tf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r1:case Kn:a=10;break t;case $v:a=9;break t;case Gd:a=11;break t;case Qd:a=14;break t;case wi:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Ye(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function Cs(e,t,n,i){return e=Ye(7,e,i,t),e.lanes=n,e}function jh(e,t,n){return e=Ye(6,e,null,t),e.lanes=n,e}function zh(e,t,n){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ar=[],Sr=0,Mu=null,ku=0,un=[],cn=0,Ns=null,Xn=1,$n="";function Ss(e,t){Ar[Sr++]=ku,Ar[Sr++]=Mu,Mu=e,ku=t}function xE(e,t,n){un[cn++]=Xn,un[cn++]=$n,un[cn++]=Ns,Ns=e;var i=Xn;e=$n;var s=32-Ze(i)-1;i&=~(1<<s),n+=1;var r=32-Ze(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Xn=1<<32-Ze(t)+s|n<<s|i,$n=r+e}else Xn=1<<r|n<<s|i,$n=e}function am(e){e.return!==null&&(Ss(e,1),xE(e,1,0))}function om(e){for(;e===Mu;)Mu=Ar[--Sr],Ar[Sr]=null,ku=Ar[--Sr],Ar[Sr]=null;for(;e===Ns;)Ns=un[--cn],un[cn]=null,$n=un[--cn],un[cn]=null,Xn=un[--cn],un[cn]=null}var De=null,jt=null,_t=!1,Ds=null,In=!1,kf=Error(U(519));function Ms(e){var t=Error(U(418,""));throw wo(fn(t,e)),kf}function iy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Re]=e,t[ze]=i,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<Co.length;n++)rt(Co[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),uE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),xu(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),hE(t,i.value,i.defaultValue,i.children),xu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||f0(t.textContent,n)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=jc),t=!0):t=!1,t||Ms(e)}function sy(e){for(De=e.return;De;)switch(De.tag){case 5:case 13:In=!1;return;case 27:case 3:In=!0;return;default:De=De.return}}function La(e){if(e!==De)return!1;if(!_t)return sy(e),_t=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||od(e.type,e.memoizedProps)),n=!n),n&&jt&&Ms(e),sy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){jt=Tn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}jt=null}}else t===27?(t=jt,fs(e.type)?(e=cd,cd=null,jt=e):jt=t):jt=De?Tn(e.stateNode.nextSibling):null;return!0}function Wo(){jt=De=null,_t=!1}function ry(){var e=Ds;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),Ds=null),e}function wo(e){Ds===null?Ds=[e]:Ds.push(e)}var Pf=Ln(null),Ys=null,Zn=null;function Ii(e,t,n){Mt(Pf,t._currentValue),t._currentValue=n}function ni(e){e._currentValue=Pf.current,ce(Pf)}function Uf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Lf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Uf(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Uf(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Jo(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;nn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===Iu.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(xo):e=[xo])}s=s.return}e!==null&&Lf(t,e,n,i),t.flags|=262144}function Pu(e){for(e=e.firstContext;e!==null;){if(!nn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ks(e){Ys=e,Zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ie(e){return OE(Ys,e)}function Hl(e,t){return Ys===null&&ks(e),OE(e,t)}function OE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Zn===null){if(e===null)throw Error(U(308));Zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zn=Zn.next=t;return n}var pw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},yw=ne.unstable_scheduleCallback,_w=ne.unstable_NormalPriority,Jt={$$typeof:Kn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new pw,data:new Map,refCount:0}}function tl(e){e.refCount--,e.refCount===0&&yw(_w,function(){e.controller.abort()})}var eo=null,jf=0,Hr=0,Dr=null;function vw(e,t){if(eo===null){var n=eo=[];jf=0,Hr=xm(),Dr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return jf++,t.then(ay,ay),t}function ay(){if(--jf===0&&eo!==null){Dr!==null&&(Dr.status="fulfilled");var e=eo;eo=null,Hr=0,Dr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ew(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var oy=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&vw(e,t),oy!==null&&oy(e,t)};var xs=Ln(null);function um(){var e=xs.current;return e!==null?e:Ct.pooledCache}function uu(e,t){t===null?Mt(xs,xs.current):Mt(xs,t.pool)}function VE(){var e=um();return e===null?null:{parent:Jt._currentValue,pool:e}}var el=Error(U(460)),ME=Error(U(474)),Oc=Error(U(542)),zf={then:function(){}};function ly(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fl(){}function kE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Fl,Fl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cy(e),e;default:if(typeof t.status=="string")t.then(Fl,Fl);else{if(e=Ct,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cy(e),e}throw no=t,el}}var no=null;function uy(){if(no===null)throw Error(U(459));var e=no;return no=null,e}function cy(e){if(e===el||e===Oc)throw Error(U(483))}var Ri=!1;function cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Vu(e),NE(e,null,n),t}return xc(e,i,t,n),Vu(e)}function io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,iE(e,n)}}function Bh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var qf=!1;function so(){if(qf){var e=Dr;if(e!==null)throw e}}function ro(e,t,n,i){qf=!1;var s=e.updateQueue;Ri=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(dt&m)===m:(i&m)===m){m!==0&&m===Hr&&(qf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var D=e,V=l;m=t;var M=n;switch(V.tag){case 1:if(D=V.payload,typeof D=="function"){g=D.call(M,g,m);break t}g=D;break t;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,m=typeof D=="function"?D.call(M,g,m):D,m==null)break t;g=xt({},g,m);break t;case 2:Ri=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=s.callbacks,_===null?s.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),is|=a,e.lanes=a,e.memoizedState=g}}function PE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function UE(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)PE(n[e],t)}var Fr=Ln(null),Uu=Ln(0);function hy(e,t){e=oi,Mt(Uu,e),Mt(Fr,t),oi=e|t.baseLanes}function Hf(){Mt(Uu,oi),Mt(Fr,Fr.current)}function hm(){oi=Uu.current,ce(Fr),ce(Uu)}var es=0,it=null,bt=null,Kt=null,Lu=!1,xr=!1,Ps=!1,ju=0,Ro=0,Or=null,Tw=0;function qt(){throw Error(U(321))}function fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function dm(e,t,n,i,s,r){return es=r,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?mT:gT,Ps=!1,r=n(i,s),Ps=!1,xr&&(r=jE(t,n,i,s)),LE(e),r}function LE(e){Z.H=zu;var t=bt!==null&&bt.next!==null;if(es=0,Kt=bt=it=null,Lu=!1,Ro=0,Or=null,t)throw Error(U(300));e===null||ue||(e=e.dependencies,e!==null&&Pu(e)&&(ue=!0))}function jE(e,t,n,i){it=e;var s=0;do{if(xr&&(Or=null),Ro=0,xr=!1,25<=s)throw Error(U(301));if(s+=1,Kt=bt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Z.H=Cw,r=t(n,i)}while(xr);return r}function Aw(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?nl(t):t,e=e.useState()[0],(bt!==null?bt.memoizedState:null)!==e&&(it.flags|=1024),t}function mm(){var e=ju!==0;return ju=0,e}function gm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function pm(e){if(Lu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Lu=!1}es=0,Kt=bt=it=null,xr=!1,Ro=ju=0,Or=null}function ke(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?it.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function Zt(){if(bt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Kt===null?it.memoizedState:Kt.next;if(t!==null)Kt=t,bt=e;else{if(e===null)throw it.alternate===null?Error(U(467)):Error(U(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Kt===null?it.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(e){var t=Ro;return Ro+=1,Or===null&&(Or=[]),e=kE(Or,e,t),t=it,(Kt===null?t.memoizedState:Kt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?mT:gT),e}function Vc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return nl(e);if(e.$$typeof===Kn)return Ie(e)}throw Error(U(438,String(e)))}function _m(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ym(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=a1;return t.index++,n}function ri(e,t){return typeof t=="function"?t(e):t}function cu(e){var t=Zt();return vm(t,bt,e)}function vm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(dt&g)===g:(es&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Hr&&(d=!0);else if((es&m)===m){h=h.next,m===Hr&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,it.lanes|=m,is|=m;g=h.action,Ps&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,it.lanes|=g,is|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!nn(r,e.memoizedState)&&(ue=!0,d&&(n=Dr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function qh(e){var t=Zt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);nn(r,t.memoizedState)||(ue=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function zE(e,t,n){var i=it,s=Zt(),r=_t;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!nn((bt||s).memoizedState,n);a&&(s.memoizedState=n,ue=!0),s=s.queue;var l=HE.bind(null,i,s,e);if(il(2048,8,l,[e]),s.getSnapshot!==t||a||Kt!==null&&Kt.memoizedState.tag&1){if(i.flags|=2048,Gr(9,Mc(),qE.bind(null,i,s,n,t),null),Ct===null)throw Error(U(349));r||es&124||BE(i,t,n)}return n}function BE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=ym(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qE(e,t,n,i){t.value=n,t.getSnapshot=i,FE(t)&&GE(e)}function HE(e,t,n){return n(function(){FE(t)&&GE(e)})}function FE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch{return!0}}function GE(e){var t=oa(e,2);t!==null&&Je(t,e,2)}function Ff(e){var t=ke();if(typeof e=="function"){var n=e;if(e=n(),Ps){ki(!0);try{n()}finally{ki(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:e},t}function QE(e,t,n,i){return e.baseState=n,vm(e,bt,typeof i=="function"?i:ri)}function Sw(e,t,n,i,s){if(kc(e))throw Error(U(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};Z.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,YE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function YE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=Z.T,a={};Z.T=a;try{var l=n(s,i),u=Z.S;u!==null&&u(a,l),fy(e,t,l)}catch(h){Gf(e,t,h)}finally{Z.T=r}}else try{r=n(s,i),fy(e,t,r)}catch(h){Gf(e,t,h)}}function fy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){dy(e,t,i)},function(i){return Gf(e,t,i)}):dy(e,t,n)}function dy(e,t,n){t.status="fulfilled",t.value=n,KE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,YE(e,n)))}function Gf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,KE(t),t=t.next;while(t!==i)}e.action=null}function KE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function XE(e,t){return t}function my(e,t){if(_t){var n=Ct.formState;if(n!==null){t:{var i=it;if(_t){if(jt){e:{for(var s=jt,r=In;s.nodeType!==8;){if(!r){s=null;break e}if(s=Tn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){jt=Tn(s.nextSibling),i=s.data==="F!";break t}}Ms(i)}i=!1}i&&(t=n[0])}}return n=ke(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XE,lastRenderedState:t},n.queue=i,n=hT.bind(null,it,i),i.dispatch=n,i=Ff(!1),r=Sm.bind(null,it,!1,i.queue),i=ke(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=Sw.bind(null,it,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function gy(e){var t=Zt();return $E(t,bt,e)}function $E(e,t,n){if(t=vm(e,t,XE)[0],e=cu(ri)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=nl(t)}catch(a){throw a===el?Oc:a}else i=t;t=Zt();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Gr(9,Mc(),bw.bind(null,s,n),null)),[i,r,e]}function bw(e,t){e.action=t}function py(e){var t=Zt(),n=bt;if(n!==null)return $E(t,n,e);Zt(),t=t.memoizedState,n=Zt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Gr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=ym(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Mc(){return{destroy:void 0,resource:void 0}}function ZE(){return Zt().memoizedState}function hu(e,t,n,i){var s=ke();i=i===void 0?null:i,it.flags|=e,s.memoizedState=Gr(1|t,Mc(),n,i)}function il(e,t,n,i){var s=Zt();i=i===void 0?null:i;var r=s.memoizedState.inst;bt!==null&&i!==null&&fm(i,bt.memoizedState.deps)?s.memoizedState=Gr(t,r,n,i):(it.flags|=e,s.memoizedState=Gr(1|t,r,n,i))}function yy(e,t){hu(8390656,8,e,t)}function WE(e,t){il(2048,8,e,t)}function JE(e,t){return il(4,2,e,t)}function tT(e,t){return il(4,4,e,t)}function eT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nT(e,t,n){n=n!=null?n.concat([e]):null,il(4,4,eT.bind(null,t,e),n)}function Em(){}function iT(e,t){var n=Zt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&fm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function sT(e,t){var n=Zt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&fm(t,i[1]))return i[0];if(i=e(),Ps){ki(!0);try{e()}finally{ki(!1)}}return n.memoizedState=[i,t],i}function Tm(e,t,n){return n===void 0||es&1073741824?e.memoizedState=t:(e.memoizedState=n,e=KT(),it.lanes|=e,is|=e,n)}function rT(e,t,n,i){return nn(n,t)?n:Fr.current!==null?(e=Tm(e,n,i),nn(e,t)||(ue=!0),e):es&42?(e=KT(),it.lanes|=e,is|=e,t):(ue=!0,e.memoizedState=n)}function aT(e,t,n,i,s){var r=vt.p;vt.p=r!==0&&8>r?r:8;var a=Z.T,l={};Z.T=l,Sm(e,!1,t,n);try{var u=s(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=Ew(u,i);ao(e,t,d,We(e))}else ao(e,t,i,We(e))}catch(g){ao(e,t,{then:function(){},status:"rejected",reason:g},We())}finally{vt.p=r,Z.T=a}}function ww(){}function Qf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var s=oT(e).queue;aT(e,s,t,Is,n===null?ww:function(){return lT(e),n(i)})}function oT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Is,baseState:Is,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:Is},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lT(e){var t=oT(e).next.queue;ao(e,t,{},We())}function Am(){return Ie(xo)}function uT(){return Zt().memoizedState}function cT(){return Zt().memoizedState}function Rw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=We();e=Bi(n);var i=qi(t,e,n);i!==null&&(Je(i,t,n),io(i,t,n)),t={cache:lm()},e.payload=t;return}t=t.return}}function Iw(e,t,n){var i=We();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},kc(e)?fT(t,n):(n=sm(e,t,n,i),n!==null&&(Je(n,e,i),dT(n,t,i)))}function hT(e,t,n){var i=We();ao(e,t,n,i)}function ao(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(kc(e))fT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,nn(l,a))return xc(e,t,s,0),Ct===null&&Dc(),!1}catch{}finally{}if(n=sm(e,t,s,i),n!==null)return Je(n,e,i),dT(n,t,i),!0}return!1}function Sm(e,t,n,i){if(i={lane:2,revertLane:xm(),action:i,hasEagerState:!1,eagerState:null,next:null},kc(e)){if(t)throw Error(U(479))}else t=sm(e,n,i,2),t!==null&&Je(t,e,2)}function kc(e){var t=e.alternate;return e===it||t!==null&&t===it}function fT(e,t){xr=Lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,iE(e,n)}}var zu={readContext:Ie,use:Vc,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},mT={readContext:Ie,use:Vc,useCallback:function(e,t){return ke().memoizedState=[e,t===void 0?null:t],e},useContext:Ie,useEffect:yy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,hu(4194308,4,eT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hu(4194308,4,e,t)},useInsertionEffect:function(e,t){hu(4,2,e,t)},useMemo:function(e,t){var n=ke();t=t===void 0?null:t;var i=e();if(Ps){ki(!0);try{e()}finally{ki(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ke();if(n!==void 0){var s=n(t);if(Ps){ki(!0);try{n(t)}finally{ki(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=Iw.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=ke();return e={current:e},t.memoizedState=e},useState:function(e){e=Ff(e);var t=e.queue,n=hT.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Em,useDeferredValue:function(e,t){var n=ke();return Tm(n,e,t)},useTransition:function(){var e=Ff(!1);return e=aT.bind(null,it,e.queue,!0,!1),ke().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,s=ke();if(_t){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Ct===null)throw Error(U(349));dt&124||BE(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,yy(HE.bind(null,i,r,e),[e]),i.flags|=2048,Gr(9,Mc(),qE.bind(null,i,r,n,t),null),n},useId:function(){var e=ke(),t=Ct.identifierPrefix;if(_t){var n=$n,i=Xn;n=(i&~(1<<32-Ze(i)-1)).toString(32)+n,t=""+t+"R"+n,n=ju++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=Tw++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Am,useFormState:my,useActionState:my,useOptimistic:function(e){var t=ke();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Sm.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:_m,useCacheRefresh:function(){return ke().memoizedState=Rw.bind(null,it)}},gT={readContext:Ie,use:Vc,useCallback:iT,useContext:Ie,useEffect:WE,useImperativeHandle:nT,useInsertionEffect:JE,useLayoutEffect:tT,useMemo:sT,useReducer:cu,useRef:ZE,useState:function(){return cu(ri)},useDebugValue:Em,useDeferredValue:function(e,t){var n=Zt();return rT(n,bt.memoizedState,e,t)},useTransition:function(){var e=cu(ri)[0],t=Zt().memoizedState;return[typeof e=="boolean"?e:nl(e),t]},useSyncExternalStore:zE,useId:uT,useHostTransitionStatus:Am,useFormState:gy,useActionState:gy,useOptimistic:function(e,t){var n=Zt();return QE(n,bt,e,t)},useMemoCache:_m,useCacheRefresh:cT},Cw={readContext:Ie,use:Vc,useCallback:iT,useContext:Ie,useEffect:WE,useImperativeHandle:nT,useInsertionEffect:JE,useLayoutEffect:tT,useMemo:sT,useReducer:qh,useRef:ZE,useState:function(){return qh(ri)},useDebugValue:Em,useDeferredValue:function(e,t){var n=Zt();return bt===null?Tm(n,e,t):rT(n,bt.memoizedState,e,t)},useTransition:function(){var e=qh(ri)[0],t=Zt().memoizedState;return[typeof e=="boolean"?e:nl(e),t]},useSyncExternalStore:zE,useId:uT,useHostTransitionStatus:Am,useFormState:py,useActionState:py,useOptimistic:function(e,t){var n=Zt();return bt!==null?QE(n,bt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:_m,useCacheRefresh:cT},Vr=null,Io=0;function Gl(e){var t=Io;return Io+=1,Vr===null&&(Vr=[]),kE(Vr,e,t)}function ja(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ql(e,t){throw t.$$typeof===s1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _y(e){var t=e._init;return t(e._payload)}function pT(e){function t(S,v){if(e){var R=S.deletions;R===null?(S.deletions=[v],S.flags|=16):R.push(v)}}function n(S,v){if(!e)return null;for(;v!==null;)t(S,v),v=v.sibling;return null}function i(S){for(var v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function s(S,v){return S=ei(S,v),S.index=0,S.sibling=null,S}function r(S,v,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<v?(S.flags|=67108866,v):R):(S.flags|=67108866,v)):(S.flags|=1048576,v)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,v,R,x){return v===null||v.tag!==6?(v=jh(R,S.mode,x),v.return=S,v):(v=s(v,R),v.return=S,v)}function u(S,v,R,x){var L=R.type;return L===dr?d(S,v,R.props.children,x,R.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wi&&_y(L)===v.type)?(v=s(v,R.props),ja(v,R),v.return=S,v):(v=lu(R.type,R.key,R.props,null,S.mode,x),ja(v,R),v.return=S,v)}function h(S,v,R,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=zh(R,S.mode,x),v.return=S,v):(v=s(v,R.children||[]),v.return=S,v)}function d(S,v,R,x,L){return v===null||v.tag!==7?(v=Cs(R,S.mode,x,L),v.return=S,v):(v=s(v,R),v.return=S,v)}function g(S,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=jh(""+v,S.mode,R),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ll:return R=lu(v.type,v.key,v.props,null,S.mode,R),ja(R,v),R.return=S,R;case Ha:return v=zh(v,S.mode,R),v.return=S,v;case wi:var x=v._init;return v=x(v._payload),g(S,v,R)}if(Fa(v)||ka(v))return v=Cs(v,S.mode,R,null),v.return=S,v;if(typeof v.then=="function")return g(S,Gl(v),R);if(v.$$typeof===Kn)return g(S,Hl(S,v),R);Ql(S,v)}return null}function m(S,v,R,x){var L=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(S,v,""+R,x);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ll:return R.key===L?u(S,v,R,x):null;case Ha:return R.key===L?h(S,v,R,x):null;case wi:return L=R._init,R=L(R._payload),m(S,v,R,x)}if(Fa(R)||ka(R))return L!==null?null:d(S,v,R,x,null);if(typeof R.then=="function")return m(S,v,Gl(R),x);if(R.$$typeof===Kn)return m(S,v,Hl(S,R),x);Ql(S,R)}return null}function _(S,v,R,x,L){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return S=S.get(R)||null,l(v,S,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ll:return S=S.get(x.key===null?R:x.key)||null,u(v,S,x,L);case Ha:return S=S.get(x.key===null?R:x.key)||null,h(v,S,x,L);case wi:var q=x._init;return x=q(x._payload),_(S,v,R,x,L)}if(Fa(x)||ka(x))return S=S.get(R)||null,d(v,S,x,L,null);if(typeof x.then=="function")return _(S,v,R,Gl(x),L);if(x.$$typeof===Kn)return _(S,v,R,Hl(v,x),L);Ql(v,x)}return null}function D(S,v,R,x){for(var L=null,q=null,T=v,y=v=0,E=null;T!==null&&y<R.length;y++){T.index>y?(E=T,T=null):E=T.sibling;var b=m(S,T,R[y],x);if(b===null){T===null&&(T=E);break}e&&T&&b.alternate===null&&t(S,T),v=r(b,v,y),q===null?L=b:q.sibling=b,q=b,T=E}if(y===R.length)return n(S,T),_t&&Ss(S,y),L;if(T===null){for(;y<R.length;y++)T=g(S,R[y],x),T!==null&&(v=r(T,v,y),q===null?L=T:q.sibling=T,q=T);return _t&&Ss(S,y),L}for(T=i(T);y<R.length;y++)E=_(T,S,y,R[y],x),E!==null&&(e&&E.alternate!==null&&T.delete(E.key===null?y:E.key),v=r(E,v,y),q===null?L=E:q.sibling=E,q=E);return e&&T.forEach(function(C){return t(S,C)}),_t&&Ss(S,y),L}function V(S,v,R,x){if(R==null)throw Error(U(151));for(var L=null,q=null,T=v,y=v=0,E=null,b=R.next();T!==null&&!b.done;y++,b=R.next()){T.index>y?(E=T,T=null):E=T.sibling;var C=m(S,T,b.value,x);if(C===null){T===null&&(T=E);break}e&&T&&C.alternate===null&&t(S,T),v=r(C,v,y),q===null?L=C:q.sibling=C,q=C,T=E}if(b.done)return n(S,T),_t&&Ss(S,y),L;if(T===null){for(;!b.done;y++,b=R.next())b=g(S,b.value,x),b!==null&&(v=r(b,v,y),q===null?L=b:q.sibling=b,q=b);return _t&&Ss(S,y),L}for(T=i(T);!b.done;y++,b=R.next())b=_(T,S,y,b.value,x),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?y:b.key),v=r(b,v,y),q===null?L=b:q.sibling=b,q=b);return e&&T.forEach(function(I){return t(S,I)}),_t&&Ss(S,y),L}function M(S,v,R,x){if(typeof R=="object"&&R!==null&&R.type===dr&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ll:t:{for(var L=R.key;v!==null;){if(v.key===L){if(L=R.type,L===dr){if(v.tag===7){n(S,v.sibling),x=s(v,R.props.children),x.return=S,S=x;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wi&&_y(L)===v.type){n(S,v.sibling),x=s(v,R.props),ja(x,R),x.return=S,S=x;break t}n(S,v);break}else t(S,v);v=v.sibling}R.type===dr?(x=Cs(R.props.children,S.mode,x,R.key),x.return=S,S=x):(x=lu(R.type,R.key,R.props,null,S.mode,x),ja(x,R),x.return=S,S=x)}return a(S);case Ha:t:{for(L=R.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(S,v.sibling),x=s(v,R.children||[]),x.return=S,S=x;break t}else{n(S,v);break}else t(S,v);v=v.sibling}x=zh(R,S.mode,x),x.return=S,S=x}return a(S);case wi:return L=R._init,R=L(R._payload),M(S,v,R,x)}if(Fa(R))return D(S,v,R,x);if(ka(R)){if(L=ka(R),typeof L!="function")throw Error(U(150));return R=L.call(R),V(S,v,R,x)}if(typeof R.then=="function")return M(S,v,Gl(R),x);if(R.$$typeof===Kn)return M(S,v,Hl(S,R),x);Ql(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(S,v.sibling),x=s(v,R),x.return=S,S=x):(n(S,v),x=jh(R,S.mode,x),x.return=S,S=x),a(S)):n(S,v)}return function(S,v,R,x){try{Io=0;var L=M(S,v,R,x);return Vr=null,L}catch(T){if(T===el||T===Oc)throw T;var q=Ye(29,T,null,S.mode);return q.lanes=x,q.return=S,q}finally{}}}var Qr=pT(!0),yT=pT(!1),mn=Ln(null),xn=null;function Ci(e){var t=e.alternate;Mt(te,te.current&1),Mt(mn,e),xn===null&&(t===null||Fr.current!==null||t.memoizedState!==null)&&(xn=e)}function _T(e){if(e.tag===22){if(Mt(te,te.current),Mt(mn,e),xn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(xn=e)}}else Ni()}function Ni(){Mt(te,te.current),Mt(mn,mn.current)}function Wn(e){ce(mn),xn===e&&(xn=null),ce(te)}var te=Ln(0);function Bu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ud(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Hh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:xt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=We(),s=Bi(i);s.payload=t,n!=null&&(s.callback=n),t=qi(e,s,i),t!==null&&(Je(t,e,i),io(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=We(),s=Bi(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=qi(e,s,i),t!==null&&(Je(t,e,i),io(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),i=Bi(n);i.tag=2,t!=null&&(i.callback=t),t=qi(e,i,n),t!==null&&(Je(t,e,n),io(t,e,n))}};function vy(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!bo(n,i)||!bo(s,r):!0}function Ey(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Yf.enqueueReplaceState(t,t.state,null)}function Us(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=xt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var qu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function vT(e){qu(e)}function ET(e){console.error(e)}function TT(e){qu(e)}function Hu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ty(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Kf(e,t,n){return n=Bi(n),n.tag=3,n.payload={element:null},n.callback=function(){Hu(e,t)},n}function AT(e){return e=Bi(e),e.tag=3,e}function ST(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Ty(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Ty(t,n,i),typeof s!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Nw(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Jo(t,n,s,!0),n=mn.current,n!==null){switch(n.tag){case 13:return xn===null?nd():n.alternate===null&&zt===0&&(zt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===zf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),tf(e,i,s)),!1;case 22:return n.flags|=65536,i===zf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),tf(e,i,s)),!1}throw Error(U(435,n.tag))}return tf(e,i,s),nd(),!1}if(_t)return t=mn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==kf&&(e=Error(U(422),{cause:i}),wo(fn(e,n)))):(i!==kf&&(t=Error(U(423),{cause:i}),wo(fn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=fn(i,n),s=Kf(e.stateNode,i,s),Bh(e,s),zt!==4&&(zt=2)),!1;var r=Error(U(520),{cause:i});if(r=fn(r,n),uo===null?uo=[r]:uo.push(r),zt!==4&&(zt=2),t===null)return!0;i=fn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Kf(n.stateNode,i,e),Bh(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Hi===null||!Hi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=AT(s),ST(s,e,n,i),Bh(n,s),!1}n=n.return}while(n!==null);return!1}var bT=Error(U(461)),ue=!1;function me(e,t,n,i){t.child=e===null?yT(t,null,n,i):Qr(t,e.child,n,i)}function Ay(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return ks(t),i=dm(e,t,n,a,r,s),l=mm(),e!==null&&!ue?(gm(e,t,s),ai(e,t,s)):(_t&&l&&am(t),t.flags|=1,me(e,t,i,s),t.child)}function Sy(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!rm(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,wT(e,t,r,i,s)):(e=lu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!bm(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(a,i)&&e.ref===t.ref)return ai(e,t,s)}return t.flags|=1,e=ei(r,i),e.ref=t.ref,e.return=t,t.child=e}function wT(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(bo(r,i)&&e.ref===t.ref)if(ue=!1,t.pendingProps=i=r,bm(e,s))e.flags&131072&&(ue=!0);else return t.lanes=e.lanes,ai(e,t,s)}return Xf(e,t,n,i,s)}function RT(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return by(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&uu(t,r!==null?r.cachePool:null),r!==null?hy(t,r):Hf(),_T(t);else return t.lanes=t.childLanes=536870912,by(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(uu(t,r.cachePool),hy(t,r),Ni(),t.memoizedState=null):(e!==null&&uu(t,null),Hf(),Ni());return me(e,t,s,n),t.child}function by(e,t,n,i){var s=um();return s=s===null?null:{parent:Jt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&uu(t,null),Hf(),_T(t),e!==null&&Jo(e,t,i,!0),null}function fu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Xf(e,t,n,i,s){return ks(t),n=dm(e,t,n,i,void 0,s),i=mm(),e!==null&&!ue?(gm(e,t,s),ai(e,t,s)):(_t&&i&&am(t),t.flags|=1,me(e,t,n,s),t.child)}function wy(e,t,n,i,s,r){return ks(t),t.updateQueue=null,n=jE(t,i,n,s),LE(e),i=mm(),e!==null&&!ue?(gm(e,t,r),ai(e,t,r)):(_t&&i&&am(t),t.flags|=1,me(e,t,n,r),t.child)}function Ry(e,t,n,i,s){if(ks(t),t.stateNode===null){var r=Tr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Ie(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Yf,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},cm(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?Ie(a):Tr,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Hh(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Yf.enqueueReplaceState(r,r.state,null),ro(t,i,r,s),so(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=Us(n,l);r.props=u;var h=r.context,d=n.contextType;a=Tr,typeof d=="object"&&d!==null&&(a=Ie(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&Ey(t,r,i,a),Ri=!1;var m=t.memoizedState;r.state=m,ro(t,i,r,s),so(),h=t.memoizedState,l||m!==h||Ri?(typeof g=="function"&&(Hh(t,n,g,i),h=t.memoizedState),(u=Ri||vy(t,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Bf(e,t),a=t.memoizedProps,d=Us(n,a),r.props=d,g=t.pendingProps,m=r.context,h=n.contextType,u=Tr,typeof h=="object"&&h!==null&&(u=Ie(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Ey(t,r,i,u),Ri=!1,m=t.memoizedState,r.state=m,ro(t,i,r,s),so();var _=t.memoizedState;a!==g||m!==_||Ri||e!==null&&e.dependencies!==null&&Pu(e.dependencies)?(typeof l=="function"&&(Hh(t,n,l,i),_=t.memoizedState),(d=Ri||vy(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Pu(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),r.props=i,r.state=_,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,fu(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Qr(t,e.child,null,s),t.child=Qr(t,null,n,s)):me(e,t,n,s),t.memoizedState=r.state,e=t.child):e=ai(e,t,s),e}function Iy(e,t,n,i){return Wo(),t.flags|=256,me(e,t,n,i),t.child}var Fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(e){return{baseLanes:e,cachePool:VE()}}function Qh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=dn),e}function IT(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(te.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(_t){if(s?Ci(t):Ni(),_t){var l=jt,u;if(u=l){t:{for(u=l,l=In;u.nodeType!==8;){if(!l){l=null;break t}if(u=Tn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ns!==null?{id:Xn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},u=Ye(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,De=t,jt=null,u=!0):u=!1}u||Ms(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ud(l)?t.lanes=32:t.lanes=536870912,null;Wn(t)}return l=i.children,i=i.fallback,s?(Ni(),s=t.mode,l=Fu({mode:"hidden",children:l},s),i=Cs(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=Gh(n),s.childLanes=Qh(e,a,n),t.memoizedState=Fh,i):(Ci(t),$f(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(Ci(t),t.flags&=-257,t=Yh(e,t,n)):t.memoizedState!==null?(Ni(),t.child=e.child,t.flags|=128,t=null):(Ni(),s=i.fallback,l=t.mode,i=Fu({mode:"visible",children:i.children},l),s=Cs(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Qr(t,e.child,null,n),i=t.child,i.memoizedState=Gh(n),i.childLanes=Qh(e,a,n),t.memoizedState=Fh,t=s);else if(Ci(t),ud(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,wo({value:i,source:null,stack:null}),t=Yh(e,t,n)}else if(ue||Jo(e,t,n,!1),a=(n&e.childLanes)!==0,ue||a){if(a=Ct,a!==null&&(i=n&-n,i=i&42?1:Kd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,oa(e,i),Je(a,e,i),bT;l.data==="$?"||nd(),t=Yh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,jt=Tn(l.nextSibling),De=t,_t=!0,Ds=null,In=!1,e!==null&&(un[cn++]=Xn,un[cn++]=$n,un[cn++]=Ns,Xn=e.id,$n=e.overflow,Ns=t),t=$f(t,i.children),t.flags|=4096);return t}return s?(Ni(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ei(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=ei(h,s):(s=Cs(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=Gh(n):(u=l.cachePool,u!==null?(h=Jt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=VE(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Qh(e,a,n),t.memoizedState=Fh,i):(Ci(t),n=e.child,e=n.sibling,n=ei(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function $f(e,t){return t=Fu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Fu(e,t){return e=Ye(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Yh(e,t,n){return Qr(t,e.child,null,n),e=$f(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Uf(e.return,t,n)}function Kh(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function CT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(me(e,t,i.children,n),i=te.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cy(e,n,t);else if(e.tag===19)Cy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Mt(te,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Bu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Kh(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Bu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Kh(t,!0,n,null,r);break;case"together":Kh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,!(n&t.childLanes))if(e!==null){if(Jo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=ei(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ei(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Pu(e)))}function Dw(e,t,n){switch(t.tag){case 3:Cu(t,t.stateNode.containerInfo),Ii(t,Jt,e.memoizedState.cache),Wo();break;case 27:case 5:wf(t);break;case 4:Cu(t,t.stateNode.containerInfo);break;case 10:Ii(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ci(t),t.flags|=128,null):n&t.child.childLanes?IT(e,t,n):(Ci(t),e=ai(e,t,n),e!==null?e.sibling:null);Ci(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Jo(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return CT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(te,te.current),i)break;return null;case 22:case 23:return t.lanes=0,RT(e,t,n);case 24:Ii(t,Jt,e.memoizedState.cache)}return ai(e,t,n)}function NT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ue=!0;else{if(!bm(e,n)&&!(t.flags&128))return ue=!1,Dw(e,t,n);ue=!!(e.flags&131072)}else ue=!1,_t&&t.flags&1048576&&xE(t,ku,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")rm(i)?(e=Us(i,e),t.tag=1,t=Ry(null,t,i,e,n)):(t.tag=0,t=Xf(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Gd){t.tag=11,t=Ay(null,t,i,e,n);break t}else if(s===Qd){t.tag=14,t=Sy(null,t,i,e,n);break t}}throw t=Sf(i)||i,Error(U(306,t,""))}}return t;case 0:return Xf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=Us(i,t.pendingProps),Ry(e,t,i,s,n);case 3:t:{if(Cu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,Bf(e,t),ro(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ii(t,Jt,i),i!==r.cache&&Lf(t,[Jt],n,!0),so(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Iy(e,t,i,n);break t}else if(i!==s){s=fn(Error(U(424)),t),wo(s),t=Iy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jt=Tn(e.firstChild),De=t,_t=!0,Ds=null,In=!0,n=yT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Wo(),i===s){t=ai(e,t,n);break t}me(e,t,i,n)}t=t.child}return t;case 26:return fu(e,t),e===null?(n=Gy(t.type,null,t.pendingProps,null))?t.memoizedState=n:_t||(n=t.type,e=t.pendingProps,i=Zu(zi.current).createElement(n),i[Re]=t,i[ze]=e,ve(i,n,e),oe(i),t.stateNode=i):t.memoizedState=Gy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return wf(t),e===null&&_t&&(i=t.stateNode=g0(t.type,t.pendingProps,zi.current),De=t,In=!0,s=jt,fs(t.type)?(cd=s,jt=Tn(i.firstChild)):jt=s),me(e,t,t.pendingProps.children,n),fu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_t&&((s=i=jt)&&(i=sR(i,t.type,t.pendingProps,In),i!==null?(t.stateNode=i,De=t,jt=Tn(i.firstChild),In=!1,s=!0):s=!1),s||Ms(t)),wf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,od(s,r)?i=null:a!==null&&od(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=dm(e,t,Aw,null,null,n),xo._currentValue=s),fu(e,t),me(e,t,i,n),t.child;case 6:return e===null&&_t&&((e=n=jt)&&(n=rR(n,t.pendingProps,In),n!==null?(t.stateNode=n,De=t,jt=null,e=!0):e=!1),e||Ms(t)),null;case 13:return IT(e,t,n);case 4:return Cu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qr(t,null,i,n):me(e,t,i,n),t.child;case 11:return Ay(e,t,t.type,t.pendingProps,n);case 7:return me(e,t,t.pendingProps,n),t.child;case 8:return me(e,t,t.pendingProps.children,n),t.child;case 12:return me(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ii(t,t.type,i.value),me(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,ks(t),s=Ie(s),i=i(s),t.flags|=1,me(e,t,i,n),t.child;case 14:return Sy(e,t,t.type,t.pendingProps,n);case 15:return wT(e,t,t.type,t.pendingProps,n);case 19:return CT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Fu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ei(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return RT(e,t,n);case 24:return ks(t),i=Ie(Jt),e===null?(s=um(),s===null&&(s=Ct,r=lm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},cm(t),Ii(t,Jt,s)):(e.lanes&n&&(Bf(e,t),ro(t,null,null,n),so()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ii(t,Jt,i)):(i=r.cache,Ii(t,Jt,i),i!==s.cache&&Lf(t,[Jt],n,!0))),me(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Gn(e){e.flags|=4}function Ny(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!_0(t)){if(t=mn.current,t!==null&&((dt&4194048)===dt?xn!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==xn))throw no=zf,ME;e.flags|=8192}}function Yl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?eE():536870912,e.lanes|=t,Yr|=t)}function za(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function xw(e,t,n){var i=t.pendingProps;switch(om(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ni(Jt),zr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(La(t)?Gn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ry())),kt(t),null;case 26:return n=t.memoizedState,e===null?(Gn(t),n!==null?(kt(t),Ny(t,n)):(kt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Gn(t),kt(t),Ny(t,n)):(kt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Gn(t),kt(t),t.flags&=-16777217),null;case 27:Nu(t),n=zi.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}e=Nn.current,La(t)?iy(t):(e=g0(s,i,n),t.stateNode=e,Gn(t))}return kt(t),null;case 5:if(Nu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return kt(t),null}if(e=Nn.current,La(t))iy(t);else{switch(s=Zu(zi.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Re]=t,e[ze]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(ve(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Gn(t)}}return kt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Gn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=zi.current,La(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=De,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Re]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||f0(e.nodeValue,n)),e||Ms(t)}else e=Zu(e).createTextNode(i),e[Re]=t,t.stateNode=e}return kt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=La(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Re]=t}else Wo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),s=!1}else s=ry(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Wn(t),t):(Wn(t),null)}if(Wn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Yl(t,t.updateQueue),kt(t),null;case 4:return zr(),e===null&&Om(t.stateNode.containerInfo),kt(t),null;case 10:return ni(t.type),kt(t),null;case 19:if(ce(te),s=t.memoizedState,s===null)return kt(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)za(s,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Bu(e),r!==null){for(t.flags|=128,za(s,!1),e=r.updateQueue,t.updateQueue=e,Yl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)DE(n,e),n=n.sibling;return Mt(te,te.current&1|2),t.child}e=e.sibling}s.tail!==null&&Dn()>Qu&&(t.flags|=128,i=!0,za(s,!1),t.lanes=4194304)}else{if(!i)if(e=Bu(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Yl(t,e),za(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!_t)return kt(t),null}else 2*Dn()-s.renderingStartTime>Qu&&n!==536870912&&(t.flags|=128,i=!0,za(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Dn(),t.sibling=null,e=te.current,Mt(te,i?e&1|2:e&1),t):(kt(t),null);case 22:case 23:return Wn(t),hm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),n=t.updateQueue,n!==null&&Yl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ce(xs),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ni(Jt),kt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function Ow(e,t){switch(om(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ni(Jt),zr(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nu(t),null;case 13:if(Wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Wo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(te),null;case 4:return zr(),null;case 10:return ni(t.type),null;case 22:case 23:return Wn(t),hm(),e!==null&&ce(xs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ni(Jt),null;case 25:return null;default:return null}}function DT(e,t){switch(om(t),t.tag){case 3:ni(Jt),zr();break;case 26:case 27:case 5:Nu(t);break;case 4:zr();break;case 13:Wn(t);break;case 19:ce(te);break;case 10:ni(t.type);break;case 22:case 23:Wn(t),hm(),e!==null&&ce(xs);break;case 24:ni(Jt)}}function sl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){It(t,t.return,l)}}function ns(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(d){It(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){It(t,t.return,d)}}function xT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{UE(t,n)}catch(i){It(e,e.return,i)}}}function OT(e,t,n){n.props=Us(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){It(e,t,i)}}function oo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){It(e,t,s)}}function Cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){It(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){It(e,t,s)}else n.current=null}function VT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){It(e,e.return,s)}}function Xh(e,t,n){try{var i=e.stateNode;Jw(i,e.type,n,t),i[ze]=t}catch(s){It(e,e.return,s)}}function MT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fs(e.type)||e.tag===4}function $h(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||MT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jc));else if(i!==4&&(i===27&&fs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Zf(e,t,n),e=e.sibling;e!==null;)Zf(e,t,n),e=e.sibling}function Gu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&fs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Gu(e,t,n),e=e.sibling;e!==null;)Gu(e,t,n),e=e.sibling}function kT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ve(t,i,n),t[Re]=e,t[ze]=n}catch(r){It(e,e.return,r)}}var Yn=!1,Ht=!1,Zh=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Vw(e,t){if(e=e.containerInfo,rd=ec,e=AE(e),nm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ad={focusedElem:e,selectionRange:n},ec=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){switch(t=ae,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var D=Us(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(D,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){It(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ld(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}}function PT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ai(e,n),i&4&&sl(5,n);break;case 1:if(Ai(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){It(n,n.return,a)}else{var s=Us(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){It(n,n.return,a)}}i&64&&xT(n),i&512&&oo(n,n.return);break;case 3:if(Ai(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{UE(e,t)}catch(a){It(n,n.return,a)}}break;case 27:t===null&&i&4&&kT(n);case 26:case 5:Ai(e,n),t===null&&i&4&&VT(n),i&512&&oo(n,n.return);break;case 12:Ai(e,n);break;case 13:Ai(e,n),i&4&&jT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=qw.bind(null,n),aR(e,n))));break;case 22:if(i=n.memoizedState!==null||Yn,!i){t=t!==null&&t.memoizedState!==null||Ht,s=Yn;var r=Ht;Yn=i,(Ht=t)&&!r?bi(e,n,(n.subtreeFlags&8772)!==0):Ai(e,n),Yn=s,Ht=r}break;case 30:break;default:Ai(e,n)}}function UT(e){var t=e.alternate;t!==null&&(e.alternate=null,UT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$d(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ot=null,Pe=!1;function Qn(e,t,n){for(n=n.child;n!==null;)LT(e,t,n),n=n.sibling}function LT(e,t,n){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Yo,n)}catch{}switch(n.tag){case 26:Ht||Cn(n,t),Qn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ht||Cn(n,t);var i=Ot,s=Pe;fs(n.type)&&(Ot=n.stateNode,Pe=!1),Qn(e,t,n),ho(n.stateNode),Ot=i,Pe=s;break;case 5:Ht||Cn(n,t);case 6:if(i=Ot,s=Pe,Ot=null,Qn(e,t,n),Ot=i,Pe=s,Ot!==null)if(Pe)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(n.stateNode)}catch(r){It(n,t,r)}else try{Ot.removeChild(n.stateNode)}catch(r){It(n,t,r)}break;case 18:Ot!==null&&(Pe?(e=Ot,qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Mo(e)):qy(Ot,n.stateNode));break;case 4:i=Ot,s=Pe,Ot=n.stateNode.containerInfo,Pe=!0,Qn(e,t,n),Ot=i,Pe=s;break;case 0:case 11:case 14:case 15:Ht||ns(2,n,t),Ht||ns(4,n,t),Qn(e,t,n);break;case 1:Ht||(Cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&OT(n,t,i)),Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:Ht=(i=Ht)||n.memoizedState!==null,Qn(e,t,n),Ht=i;break;default:Qn(e,t,n)}}function jT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Mo(e)}catch(n){It(t,t.return,n)}}function Mw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dy),t;default:throw Error(U(435,e.tag))}}function Wh(e,t){var n=Mw(e);t.forEach(function(i){var s=Hw.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Fe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(fs(l.type)){Ot=l.stateNode,Pe=!1;break t}break;case 5:Ot=l.stateNode,Pe=!1;break t;case 3:case 4:Ot=l.stateNode.containerInfo,Pe=!0;break t}l=l.return}if(Ot===null)throw Error(U(160));LT(r,a,s),Ot=null,Pe=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)zT(t,e),t=t.sibling}var _n=null;function zT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Fe(t,e),Ge(e),i&4&&(ns(3,e,e.return),sl(3,e),ns(5,e,e.return));break;case 1:Fe(t,e),Ge(e),i&512&&(Ht||n===null||Cn(n,n.return)),i&64&&Yn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=_n;if(Fe(t,e),Ge(e),i&512&&(Ht||n===null||Cn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[$o]||r[Re]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),ve(r,i,n),r[Re]=e,oe(r),i=r;break t;case"link":var a=Yy("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),ve(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Yy("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),ve(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[Re]=e,oe(r),i=r}e.stateNode=i}else Ky(s,e.type,e.stateNode);else e.stateNode=Qy(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Ky(s,e.type,e.stateNode):Qy(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Xh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Fe(t,e),Ge(e),i&512&&(Ht||n===null||Cn(n,n.return)),n!==null&&i&4&&Xh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Fe(t,e),Ge(e),i&512&&(Ht||n===null||Cn(n,n.return)),e.flags&32){s=e.stateNode;try{qr(s,"")}catch(_){It(e,e.return,_)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Xh(e,s,n!==null?n.memoizedProps:s)),i&1024&&(Zh=!0);break;case 6:if(Fe(t,e),Ge(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){It(e,e.return,_)}}break;case 3:if(gu=null,s=_n,_n=Wu(t.containerInfo),Fe(t,e),_n=s,Ge(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(t.containerInfo)}catch(_){It(e,e.return,_)}Zh&&(Zh=!1,BT(e));break;case 4:i=_n,_n=Wu(e.stateNode.containerInfo),Fe(t,e),Ge(e),_n=i;break;case 12:Fe(t,e),Ge(e);break;case 13:Fe(t,e),Ge(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Nm=Dn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Wh(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Yn,d=Ht;if(Yn=h||s,Ht=d||u,Fe(t,e),Ht=d,Yn=h,Ge(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Yn||Ht||bs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){It(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){It(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Wh(e,n))));break;case 19:Fe(t,e),Ge(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Wh(e,i)));break;case 30:break;case 21:break;default:Fe(t,e),Ge(e)}}function Ge(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(MT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=$h(e);Gu(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(qr(a,""),n.flags&=-33);var l=$h(e);Gu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=$h(e);Zf(e,h,u);break;default:throw Error(U(161))}}catch(d){It(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;BT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ai(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)PT(e,t.alternate,t),t=t.sibling}function bs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ns(4,t,t.return),bs(t);break;case 1:Cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&OT(t,t.return,n),bs(t);break;case 27:ho(t.stateNode);case 26:case 5:Cn(t,t.return),bs(t);break;case 22:t.memoizedState===null&&bs(t);break;case 30:bs(t);break;default:bs(t)}e=e.sibling}}function bi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:bi(s,r,n),sl(4,r);break;case 1:if(bi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){It(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)PE(u[s],l)}catch(h){It(i,i.return,h)}}n&&a&64&&xT(r),oo(r,r.return);break;case 27:kT(r);case 26:case 5:bi(s,r,n),n&&i===null&&a&4&&VT(r),oo(r,r.return);break;case 12:bi(s,r,n);break;case 13:bi(s,r,n),n&&a&4&&jT(s,r);break;case 22:r.memoizedState===null&&bi(s,r,n),oo(r,r.return);break;case 30:break;default:bi(s,r,n)}t=t.sibling}}function wm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&tl(n))}function Rm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&tl(e))}function wn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)qT(e,t,n,i),t=t.sibling}function qT(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:wn(e,t,n,i),s&2048&&sl(9,t);break;case 1:wn(e,t,n,i);break;case 3:wn(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&tl(e)));break;case 12:if(s&2048){wn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){It(t,t.return,u)}}else wn(e,t,n,i);break;case 13:wn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?wn(e,t,n,i):lo(e,t):r._visibility&2?wn(e,t,n,i):(r._visibility|=2,or(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&wm(a,t);break;case 24:wn(e,t,n,i),s&2048&&Rm(t.alternate,t);break;default:wn(e,t,n,i)}}function or(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:or(r,a,l,u,s),sl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?or(r,a,l,u,s):lo(r,a):(d._visibility|=2,or(r,a,l,u,s)),s&&h&2048&&wm(a.alternate,a);break;case 24:or(r,a,l,u,s),s&&h&2048&&Rm(a.alternate,a);break;default:or(r,a,l,u,s)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:lo(n,i),s&2048&&wm(i.alternate,i);break;case 24:lo(n,i),s&2048&&Rm(i.alternate,i);break;default:lo(n,i)}t=t.sibling}}var Qa=8192;function ir(e){if(e.subtreeFlags&Qa)for(e=e.child;e!==null;)HT(e),e=e.sibling}function HT(e){switch(e.tag){case 26:ir(e),e.flags&Qa&&e.memoizedState!==null&&vR(_n,e.memoizedState,e.memoizedProps);break;case 5:ir(e);break;case 3:case 4:var t=_n;_n=Wu(e.stateNode.containerInfo),ir(e),_n=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Qa,Qa=16777216,ir(e),Qa=t):ir(e));break;default:ir(e)}}function FT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ba(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ae=i,QT(i,e)}FT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)GT(e),e=e.sibling}function GT(e){switch(e.tag){case 0:case 11:case 15:Ba(e),e.flags&2048&&ns(9,e,e.return);break;case 3:Ba(e);break;case 12:Ba(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,du(e)):Ba(e);break;default:Ba(e)}}function du(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ae=i,QT(i,e)}FT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ns(8,t,t.return),du(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,du(t));break;default:du(t)}e=e.sibling}}function QT(e,t){for(;ae!==null;){var n=ae;switch(n.tag){case 0:case 11:case 15:ns(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:tl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ae=i;else t:for(n=e;ae!==null;){i=ae;var s=i.sibling,r=i.return;if(UT(i),i===n){ae=null;break t}if(s!==null){s.return=r,ae=s;break t}ae=r}}}var kw={getCacheForType:function(e){var t=Ie(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Pw=typeof WeakMap=="function"?WeakMap:Map,At=0,Ct=null,at=null,dt=0,Tt=0,Qe=null,Ui=!1,la=!1,Im=!1,oi=0,zt=0,is=0,Os=0,Cm=0,dn=0,Yr=0,uo=null,Ue=null,Wf=!1,Nm=0,Qu=1/0,Yu=null,Hi=null,pe=0,Fi=null,Kr=null,Mr=0,Jf=0,td=null,YT=null,co=0,ed=null;function We(){if(At&2&&dt!==0)return dt&-dt;if(Z.T!==null){var e=Hr;return e!==0?e:xm()}return sE()}function KT(){dn===0&&(dn=!(dt&536870912)||_t?tE():536870912);var e=mn.current;return e!==null&&(e.flags|=32),dn}function Je(e,t,n){(e===Ct&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(Xr(e,0),Li(e,dt,dn,!1)),Xo(e,n),(!(At&2)||e!==Ct)&&(e===Ct&&(!(At&2)&&(Os|=n),zt===4&&Li(e,dt,dn,!1)),jn(e))}function XT(e,t,n){if(At&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Ko(e,t),s=i?jw(e,t):Jh(e,t,!0),r=i;do{if(s===0){la&&!i&&Li(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Uw(n)){s=Jh(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=uo;var u=l.current.memoizedState.isDehydrated;if(u&&(Xr(l,a).flags|=256),a=Jh(l,a,!1),a!==2){if(Im&&!u){l.errorRecoveryDisabledLanes|=r,Os|=r,s=4;break t}r=Ue,Ue=s,r!==null&&(Ue===null?Ue=r:Ue.push.apply(Ue,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Xr(e,0),Li(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Li(i,t,dn,!Ui);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(s=Nm+300-Dn(),10<s)){if(Li(i,t,dn,!Ui),Rc(i,0,!0)!==0)break t;i.timeoutHandle=m0(xy.bind(null,i,n,Ue,Yu,Wf,t,dn,Os,Yr,Ui,r,2,-0,0),s);break t}xy(i,n,Ue,Yu,Wf,t,dn,Os,Yr,Ui,r,0,-0,0)}}break}while(!0);jn(e)}function xy(e,t,n,i,s,r,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Do={stylesheets:null,count:0,unsuspend:_R},HT(t),g=ER(),g!==null)){e.cancelPendingCommit=g(Vy.bind(null,e,t,r,n,i,s,a,l,u,d,1,m,_)),Li(e,r,a,!h);return}Vy(e,t,r,n,i,s,a,l,u)}function Uw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!nn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Li(e,t,n,i){t&=~Cm,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-Ze(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&nE(e,n,t)}function Pc(){return At&6?!0:(rl(0),!1)}function Dm(){if(at!==null){if(Tt===0)var e=at.return;else e=at,Zn=Ys=null,pm(e),Vr=null,Io=0,e=at;for(;e!==null;)DT(e.alternate,e),e=e.return;at=null}}function Xr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,eR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Dm(),Ct=e,at=n=ei(e.current,null),dt=t,Tt=0,Qe=null,Ui=!1,la=Ko(e,t),Im=!1,Yr=dn=Cm=Os=is=zt=0,Ue=uo=null,Wf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-Ze(i),r=1<<s;t|=e[s],i&=~r}return oi=t,Dc(),n}function $T(e,t){it=null,Z.H=zu,t===el||t===Oc?(t=uy(),Tt=3):t===ME?(t=uy(),Tt=4):Tt=t===bT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Qe=t,at===null&&(zt=1,Hu(e,fn(t,e.current)))}function ZT(){var e=Z.H;return Z.H=zu,e===null?zu:e}function WT(){var e=Z.A;return Z.A=kw,e}function nd(){zt=4,Ui||(dt&4194048)!==dt&&mn.current!==null||(la=!0),!(is&134217727)&&!(Os&134217727)||Ct===null||Li(Ct,dt,dn,!1)}function Jh(e,t,n){var i=At;At|=2;var s=ZT(),r=WT();(Ct!==e||dt!==t)&&(Yu=null,Xr(e,t)),t=!1;var a=zt;t:do try{if(Tt!==0&&at!==null){var l=at,u=Qe;switch(Tt){case 8:Dm(),a=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(t=!0);var h=Tt;if(Tt=0,Qe=null,br(e,l,u,h),n&&la){a=0;break t}break;default:h=Tt,Tt=0,Qe=null,br(e,l,u,h)}}Lw(),a=zt;break}catch(d){$T(e,d)}while(!0);return t&&e.shellSuspendCounter++,Zn=Ys=null,At=i,Z.H=s,Z.A=r,at===null&&(Ct=null,dt=0,Dc()),a}function Lw(){for(;at!==null;)JT(at)}function jw(e,t){var n=At;At|=2;var i=ZT(),s=WT();Ct!==e||dt!==t?(Yu=null,Qu=Dn()+500,Xr(e,t)):la=Ko(e,t);t:do try{if(Tt!==0&&at!==null){t=at;var r=Qe;e:switch(Tt){case 1:Tt=0,Qe=null,br(e,t,r,1);break;case 2:case 9:if(ly(r)){Tt=0,Qe=null,Oy(t);break}t=function(){Tt!==2&&Tt!==9||Ct!==e||(Tt=7),jn(e)},r.then(t,t);break t;case 3:Tt=7;break t;case 4:Tt=5;break t;case 7:ly(r)?(Tt=0,Qe=null,Oy(t)):(Tt=0,Qe=null,br(e,t,r,7));break;case 5:var a=null;switch(at.tag){case 26:a=at.memoizedState;case 5:case 27:var l=at;if(!a||_0(a)){Tt=0,Qe=null;var u=l.sibling;if(u!==null)at=u;else{var h=l.return;h!==null?(at=h,Uc(h)):at=null}break e}}Tt=0,Qe=null,br(e,t,r,5);break;case 6:Tt=0,Qe=null,br(e,t,r,6);break;case 8:Dm(),zt=6;break t;default:throw Error(U(462))}}zw();break}catch(d){$T(e,d)}while(!0);return Zn=Ys=null,Z.H=i,Z.A=s,At=n,at!==null?0:(Ct=null,dt=0,Dc(),zt)}function zw(){for(;at!==null&&!l1();)JT(at)}function JT(e){var t=NT(e.alternate,e,oi);e.memoizedProps=e.pendingProps,t===null?Uc(e):at=t}function Oy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=wy(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=wy(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:pm(t);default:DT(n,t),t=at=DE(t,oi),t=NT(n,t,oi)}e.memoizedProps=e.pendingProps,t===null?Uc(e):at=t}function br(e,t,n,i){Zn=Ys=null,pm(t),Vr=null,Io=0;var s=t.return;try{if(Nw(e,s,t,n,dt)){zt=1,Hu(e,fn(n,e.current)),at=null;return}}catch(r){if(s!==null)throw at=s,r;zt=1,Hu(e,fn(n,e.current)),at=null;return}t.flags&32768?(_t||i===1?e=!0:la||dt&536870912?e=!1:(Ui=e=!0,(i===2||i===9||i===3||i===6)&&(i=mn.current,i!==null&&i.tag===13&&(i.flags|=16384))),t0(t,e)):Uc(t)}function Uc(e){var t=e;do{if(t.flags&32768){t0(t,Ui);return}e=t.return;var n=xw(t.alternate,t,oi);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);zt===0&&(zt=5)}function t0(e,t){do{var n=Ow(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);zt=6,at=null}function Vy(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do Lc();while(pe!==0);if(At&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(r=t.lanes|t.childLanes,r|=im,_1(e,n,r,a,l,u),e===Ct&&(at=Ct=null,dt=0),Kr=t,Fi=e,Mr=n,Jf=r,td=s,YT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Fw(Du,function(){return r0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,s=vt.p,vt.p=2,a=At,At|=4;try{Vw(e,t,n)}finally{At=a,vt.p=s,Z.T=i}}pe=1,e0(),n0(),i0()}}function e0(){if(pe===1){pe=0;var e=Fi,t=Kr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=vt.p;vt.p=2;var s=At;At|=4;try{zT(t,e);var r=ad,a=AE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&TE(l.ownerDocument.documentElement,l)){if(u!==null&&nm(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),D=l.textContent.length,V=Math.min(u.start,D),M=u.end===void 0?V:Math.min(u.end,D);!_.extend&&V>M&&(a=M,M=V,V=a);var S=ty(l,V),v=ty(l,M);if(S&&v&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var R=g.createRange();R.setStart(S.node,S.offset),_.removeAllRanges(),V>M?(_.addRange(R),_.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var x=g[l];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}ec=!!rd,ad=rd=null}finally{At=s,vt.p=i,Z.T=n}}e.current=t,pe=2}}function n0(){if(pe===2){pe=0;var e=Fi,t=Kr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=vt.p;vt.p=2;var s=At;At|=4;try{PT(e,t.alternate,t)}finally{At=s,vt.p=i,Z.T=n}}pe=3}}function i0(){if(pe===4||pe===3){pe=0,u1();var e=Fi,t=Kr,n=Mr,i=YT;t.subtreeFlags&10256||t.flags&10256?pe=5:(pe=0,Kr=Fi=null,s0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Hi=null),Xd(n),t=t.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Yo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,s=vt.p,vt.p=2,Z.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{Z.T=t,vt.p=s}}Mr&3&&Lc(),jn(e),s=e.pendingLanes,n&4194090&&s&42?e===ed?co++:(co=0,ed=e):co=0,rl(0)}}function s0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,tl(t)))}function Lc(e){return e0(),n0(),i0(),r0()}function r0(){if(pe!==5)return!1;var e=Fi,t=Jf;Jf=0;var n=Xd(Mr),i=Z.T,s=vt.p;try{vt.p=32>n?32:n,Z.T=null,n=td,td=null;var r=Fi,a=Mr;if(pe=0,Kr=Fi=null,Mr=0,At&6)throw Error(U(331));var l=At;if(At|=4,GT(r.current),qT(r,r.current,a,n),At=l,rl(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Yo,r)}catch{}return!0}finally{vt.p=s,Z.T=i,s0(e,t)}}function My(e,t,n){t=fn(n,t),t=Kf(e.stateNode,t,2),e=qi(e,t,2),e!==null&&(Xo(e,2),jn(e))}function It(e,t,n){if(e.tag===3)My(e,e,n);else for(;t!==null;){if(t.tag===3){My(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hi===null||!Hi.has(i))){e=fn(n,e),n=AT(2),i=qi(t,n,2),i!==null&&(ST(n,i,t,e),Xo(i,2),jn(i));break}}t=t.return}}function tf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Pw;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Im=!0,s.add(n),e=Bw.bind(null,e,t,n),t.then(e,e))}function Bw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ct===e&&(dt&n)===n&&(zt===4||zt===3&&(dt&62914560)===dt&&300>Dn()-Nm?!(At&2)&&Xr(e,0):Cm|=n,Yr===dt&&(Yr=0)),jn(e)}function a0(e,t){t===0&&(t=eE()),e=oa(e,t),e!==null&&(Xo(e,t),jn(e))}function qw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),a0(e,n)}function Hw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),a0(e,n)}function Fw(e,t){return Yd(e,t)}var Ku=null,lr=null,id=!1,Xu=!1,ef=!1,Vs=0;function jn(e){e!==lr&&e.next===null&&(lr===null?Ku=lr=e:lr=lr.next=e),Xu=!0,id||(id=!0,Qw())}function rl(e,t){if(!ef&&Xu){ef=!0;do for(var n=!1,i=Ku;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Ze(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,ky(i,r))}else r=dt,r=Rc(i,i===Ct?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Ko(i,r)||(n=!0,ky(i,r));i=i.next}while(n);ef=!1}}function Gw(){o0()}function o0(){Xu=id=!1;var e=0;Vs!==0&&(tR()&&(e=Vs),Vs=0);for(var t=Dn(),n=null,i=Ku;i!==null;){var s=i.next,r=l0(i,t);r===0?(i.next=null,n===null?Ku=s:n.next=s,s===null&&(lr=n)):(n=i,(e!==0||r&3)&&(Xu=!0)),i=s}rl(e)}function l0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-Ze(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=y1(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=Ct,n=dt,n=Rc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Ih(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ko(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Ih(i),Xd(n)){case 2:case 8:n=Wv;break;case 32:n=Du;break;case 268435456:n=Jv;break;default:n=Du}return i=u0.bind(null,e),n=Yd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Ih(i),e.callbackPriority=2,e.callbackNode=null,2}function u0(e,t){if(pe!==0&&pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Lc()&&e.callbackNode!==n)return null;var i=dt;return i=Rc(e,e===Ct?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(XT(e,i,t),l0(e,Dn()),e.callbackNode!=null&&e.callbackNode===n?u0.bind(null,e):null)}function ky(e,t){if(Lc())return null;XT(e,t,!0)}function Qw(){nR(function(){At&6?Yd(Zv,Gw):o0()})}function xm(){return Vs===0&&(Vs=tE()),Vs}function Py(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ru(""+e)}function Uy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Yw(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Py((s[ze]||null).action),a=i.submitter;a&&(t=(t=a[ze]||null)?Py(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Ic("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Vs!==0){var u=a?Uy(s,a):new FormData(s);Qf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Uy(s,a):new FormData(s),Qf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var nf=0;nf<Mf.length;nf++){var sf=Mf[nf],Kw=sf.toLowerCase(),Xw=sf[0].toUpperCase()+sf.slice(1);Sn(Kw,"on"+Xw)}Sn(bE,"onAnimationEnd");Sn(wE,"onAnimationIteration");Sn(RE,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(fw,"onTransitionRun");Sn(dw,"onTransitionStart");Sn(mw,"onTransitionCancel");Sn(IE,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$w=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Co));function c0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){qu(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){qu(d)}s.currentTarget=null,r=u}}}}function rt(e,t){var n=t[If];n===void 0&&(n=t[If]=new Set);var i=e+"__bubble";n.has(i)||(h0(t,e,2,!1),n.add(i))}function rf(e,t,n){var i=0;t&&(i|=4),h0(n,e,i,t)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Om(e){if(!e[Kl]){e[Kl]=!0,rE.forEach(function(n){n!=="selectionchange"&&($w.has(n)||rf(n,!1,e),rf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kl]||(t[Kl]=!0,rf("selectionchange",!1,t))}}function h0(e,t,n,i){switch(S0(t)){case 2:var s=SR;break;case 8:s=bR;break;default:s=Pm}n=s.bind(null,t,n,e),s=void 0,!xf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function af(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=gr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}dE(function(){var h=r,d=Wd(n),g=[];t:{var m=CE.get(e);if(m!==void 0){var _=Ic,D=e;switch(e){case"keypress":if(ou(n)===0)break t;case"keydown":case"keyup":_=F1;break;case"focusin":D="focus",_=kh;break;case"focusout":D="blur",_=kh;break;case"beforeblur":case"afterblur":_=kh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=O1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Y1;break;case bE:case wE:case RE:_=k1;break;case IE:_=X1;break;case"scroll":case"scrollend":_=D1;break;case"wheel":_=Z1;break;case"copy":case"cut":case"paste":_=U1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Qp;break;case"toggle":case"beforetoggle":_=J1}var V=(t&4)!==0,M=!V&&(e==="scroll"||e==="scrollend"),S=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,R;v!==null;){var x=v;if(R=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||R===null||S===null||(x=Ao(v,S),x!=null&&V.push(No(v,x,R))),M)break;v=v.return}0<V.length&&(m=new _(m,D,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Df&&(D=n.relatedTarget||n.fromElement)&&(gr(D)||D[ra]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(D=n.relatedTarget||n.toElement,_=h,D=D?gr(D):null,D!==null&&(M=Qo(D),V=D.tag,D!==M||V!==5&&V!==27&&V!==6)&&(D=null)):(_=null,D=h),_!==D)){if(V=Fp,x="onMouseLeave",S="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=Qp,x="onPointerLeave",S="onPointerEnter",v="pointer"),M=_==null?m:Ga(_),R=D==null?m:Ga(D),m=new V(x,v+"leave",_,n,d),m.target=M,m.relatedTarget=R,x=null,gr(d)===h&&(V=new V(S,v+"enter",D,n,d),V.target=R,V.relatedTarget=M,x=V),M=x,_&&D)e:{for(V=_,S=D,v=0,R=V;R;R=sr(R))v++;for(R=0,x=S;x;x=sr(x))R++;for(;0<v-R;)V=sr(V),v--;for(;0<R-v;)S=sr(S),R--;for(;v--;){if(V===S||S!==null&&V===S.alternate)break e;V=sr(V),S=sr(S)}V=null}else V=null;_!==null&&Ly(g,m,_,V,!1),D!==null&&M!==null&&Ly(g,M,D,V,!0)}}t:{if(m=h?Ga(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=$p;else if(Xp(m))if(vE)L=uw;else{L=ow;var q=aw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Zd(h.elementType)&&(L=$p):L=lw;if(L&&(L=L(e,h))){_E(g,L,n,d);break t}q&&q(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Nf(m,"number",m.value)}switch(q=h?Ga(h):window,e){case"focusin":(Xp(q)||q.contentEditable==="true")&&(_r=q,Of=h,to=null);break;case"focusout":to=Of=_r=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,ey(g,n,d);break;case"selectionchange":if(hw)break;case"keydown":case"keyup":ey(g,n,d)}var T;if(em)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else yr?pE(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(gE&&n.locale!=="ko"&&(yr||y!=="onCompositionStart"?y==="onCompositionEnd"&&yr&&(T=mE()):(Pi=d,Jd="value"in Pi?Pi.value:Pi.textContent,yr=!0)),q=$u(h,y),0<q.length&&(y=new Gp(y,e,null,n,d),g.push({event:y,listeners:q}),T?y.data=T:(T=yE(n),T!==null&&(y.data=T)))),(T=ew?nw(e,n):iw(e,n))&&(y=$u(h,"onBeforeInput"),0<y.length&&(q=new Gp("onBeforeInput","beforeinput",null,n,d),g.push({event:q,listeners:y}),q.data=T)),Yw(g,e,h,n,d)}c0(g,t)})}function No(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $u(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Ao(e,n),s!=null&&i.unshift(No(e,s,r)),s=Ao(e,t),s!=null&&i.push(No(e,s,r))),e.tag===3)return i;e=e.return}return[]}function sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ly(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=Ao(n,r),h!=null&&a.unshift(No(n,h,u))):s||(h=Ao(n,r),h!=null&&a.push(No(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Zw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function jy(e){return(typeof e=="string"?e:""+e).replace(Zw,`
`).replace(Ww,"")}function f0(e,t){return t=jy(t),jy(e)===t}function jc(){}function St(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||qr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&qr(e,""+i);break;case"className":Bl(e,"class",i);break;case"tabIndex":Bl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Bl(e,n,i);break;case"style":fE(e,i,r);break;case"data":if(t!=="object"){Bl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ru(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&St(e,t,"name",s.name,s,null),St(e,t,"formEncType",s.formEncType,s,null),St(e,t,"formMethod",s.formMethod,s,null),St(e,t,"formTarget",s.formTarget,s,null)):(St(e,t,"encType",s.encType,s,null),St(e,t,"method",s.method,s,null),St(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ru(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=jc);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=ru(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),su(e,"popover",i);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":su(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=C1.get(n)||n,su(e,n,i))}}function sd(e,t,n,i,s,r){switch(n){case"style":fE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?qr(e,i):(typeof i=="number"||typeof i=="bigint")&&qr(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!aE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[ze]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):su(e,n,i)}}}function ve(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:St(e,t,r,a,n,null)}}s&&St(e,t,"srcSet",n.srcSet,n,null),i&&St(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:St(e,t,i,d,n,null)}}uE(e,r,l,u,h,a,s,!1),xu(e);return;case"select":rt("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:St(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Cr(e,!!i,t,!1):n!=null&&Cr(e,!!i,n,!0);return;case"textarea":rt("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:St(e,t,a,l,n,null)}hE(e,i,s,r),xu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:St(e,t,u,i,n,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<Co.length;i++)rt(Co[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:St(e,t,h,i,n,null)}return;default:if(Zd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&sd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&St(e,t,l,i,n,null))}function Jw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||St(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":r=_;break;case"name":s=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&St(e,t,m,_,i,g)}}Cf(e,a,l,u,h,d,r,s);return;case"select":_=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||St(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&St(e,t,s,r,i,u)}t=l,n=a,i=_,m!=null?Cr(e,!!n,m,!1):!!i!=!!n&&(t!=null?Cr(e,!!n,t,!0):Cr(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:St(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&St(e,t,a,s,i,r)}cE(e,m,_);return;case"option":for(var D in n)if(m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D))switch(D){case"selected":e.selected=!1;break;default:St(e,t,D,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:St(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&St(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:St(e,t,h,m,i,_)}return;default:if(Zd(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&sd(e,t,M,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||sd(e,t,d,m,i,_);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&St(e,t,S,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||St(e,t,g,m,i,_)}var rd=null,ad=null;function Zu(e){return e.nodeType===9?e:e.ownerDocument}function zy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function od(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var of=null;function tR(){var e=window.event;return e&&e.type==="popstate"?e===of?!1:(of=e,!0):(of=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,eR=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(e){return By.resolve(null).then(e).catch(iR)}:m0;function iR(e){setTimeout(function(){throw e})}function fs(e){return e==="head"}function qy(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ho(a.documentElement),n&2&&ho(a.body),n&4)for(n=a.head,ho(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[$o]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Mo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Mo(t)}function ld(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ld(n),$d(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function sR(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[$o])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Tn(e.nextSibling),e===null)break}return null}function rR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Tn(e.nextSibling),e===null))return null;return e}function ud(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function aR(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var cd=null;function Hy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function g0(e,t,n){switch(t=Zu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function ho(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$d(e)}var gn=new Map,Fy=new Set;function Wu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mi=vt.d;vt.d={f:oR,r:lR,D:uR,C:cR,L:hR,m:fR,X:mR,S:dR,M:gR};function oR(){var e=mi.f(),t=Pc();return e||t}function lR(e){var t=aa(e);t!==null&&t.tag===5&&t.type==="form"?lT(t):mi.r(e)}var ua=typeof document>"u"?null:document;function p0(e,t,n){var i=ua;if(i&&typeof t=="string"&&t){var s=hn(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Fy.has(s)||(Fy.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),ve(t,"link",e),oe(t),i.head.appendChild(t)))}}function uR(e){mi.D(e),p0("dns-prefetch",e,null)}function cR(e,t){mi.C(e,t),p0("preconnect",e,t)}function hR(e,t,n){mi.L(e,t,n);var i=ua;if(i&&e&&t){var s='link[rel="preload"][as="'+hn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+hn(n.imageSizes)+'"]')):s+='[href="'+hn(e)+'"]';var r=s;switch(t){case"style":r=$r(e);break;case"script":r=ca(e)}gn.has(r)||(e=xt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),gn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(al(r))||t==="script"&&i.querySelector(ol(r))||(t=i.createElement("link"),ve(t,"link",e),oe(t),i.head.appendChild(t)))}}function fR(e,t){mi.m(e,t);var n=ua;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ca(e)}if(!gn.has(r)&&(e=xt({rel:"modulepreload",href:e},t),gn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ol(r)))return}i=n.createElement("link"),ve(i,"link",e),oe(i),n.head.appendChild(i)}}}function dR(e,t,n){mi.S(e,t,n);var i=ua;if(i&&e){var s=Ir(i).hoistableStyles,r=$r(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(al(r)))l.loading=5;else{e=xt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=gn.get(r))&&Vm(e,n);var u=a=i.createElement("link");oe(u),ve(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,mu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function mR(e,t){mi.X(e,t);var n=ua;if(n&&e){var i=Ir(n).hoistableScripts,s=ca(e),r=i.get(s);r||(r=n.querySelector(ol(s)),r||(e=xt({src:e,async:!0},t),(t=gn.get(s))&&Mm(e,t),r=n.createElement("script"),oe(r),ve(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function gR(e,t){mi.M(e,t);var n=ua;if(n&&e){var i=Ir(n).hoistableScripts,s=ca(e),r=i.get(s);r||(r=n.querySelector(ol(s)),r||(e=xt({src:e,async:!0,type:"module"},t),(t=gn.get(s))&&Mm(e,t),r=n.createElement("script"),oe(r),ve(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Gy(e,t,n,i){var s=(s=zi.current)?Wu(s):null;if(!s)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=$r(n.href),n=Ir(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=$r(n.href);var r=Ir(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(al(e)))&&!r._p&&(a.instance=r,a.state.loading=5),gn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gn.set(e,n),r||pR(s,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ca(n),n=Ir(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function $r(e){return'href="'+hn(e)+'"'}function al(e){return'link[rel="stylesheet"]['+e+"]"}function y0(e){return xt({},e,{"data-precedence":e.precedence,precedence:null})}function pR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ve(t,"link",n),oe(t),e.head.appendChild(t))}function ca(e){return'[src="'+hn(e)+'"]'}function ol(e){return"script[async]"+e}function Qy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return t.instance=i,oe(i),i;var s=xt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),oe(i),ve(i,"style",s),mu(i,n.precedence,e),t.instance=i;case"stylesheet":s=$r(n.href);var r=e.querySelector(al(s));if(r)return t.state.loading|=4,t.instance=r,oe(r),r;i=y0(n),(s=gn.get(s))&&Vm(i,s),r=(e.ownerDocument||e).createElement("link"),oe(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ve(r,"link",i),t.state.loading|=4,mu(r,n.precedence,e),t.instance=r;case"script":return r=ca(n.src),(s=e.querySelector(ol(r)))?(t.instance=s,oe(s),s):(i=n,(s=gn.get(r))&&(i=xt({},n),Mm(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),oe(s),ve(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,mu(i,n.precedence,e));return t.instance}function mu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Vm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var gu=null;function Yy(e,t,n){if(gu===null){var i=new Map,s=gu=new Map;s.set(n,i)}else s=gu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[$o]||r[Re]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function Ky(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function yR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function _0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Do=null;function _R(){}function vR(e,t,n){if(Do===null)throw Error(U(475));var i=Do;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=$r(n.href),r=e.querySelector(al(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Ju.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,oe(r);return}r=e.ownerDocument||e,n=y0(n),(s=gn.get(s))&&Vm(n,s),r=r.createElement("link"),oe(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ve(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Ju.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function ER(){if(Do===null)throw Error(U(475));var e=Do;return e.stylesheets&&e.count===0&&hd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&hd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tc=null;function hd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tc=new Map,t.forEach(TR,e),tc=null,Ju.call(e))}function TR(e,t){if(!(t.state.loading&4)){var n=tc.get(e);if(n)var i=n.get(null);else{n=new Map,tc.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Ju.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var xo={$$typeof:Kn,Provider:null,Consumer:null,_currentValue:Is,_currentValue2:Is,_threadCount:0};function AR(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ch(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.hiddenUpdates=Ch(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function v0(e,t,n,i,s,r,a,l,u,h,d,g){return e=new AR(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=Ye(3,null,null,t),e.current=r,r.stateNode=e,t=lm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},cm(r),e}function E0(e){return e?(e=Tr,e):Tr}function T0(e,t,n,i,s,r){s=E0(s),i.context===null?i.context=s:i.pendingContext=s,i=Bi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=qi(e,i,t),n!==null&&(Je(n,e,t),io(n,e,t))}function Xy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function km(e,t){Xy(e,t),(e=e.alternate)&&Xy(e,t)}function A0(e){if(e.tag===13){var t=oa(e,67108864);t!==null&&Je(t,e,67108864),km(e,67108864)}}var ec=!0;function SR(e,t,n,i){var s=Z.T;Z.T=null;var r=vt.p;try{vt.p=2,Pm(e,t,n,i)}finally{vt.p=r,Z.T=s}}function bR(e,t,n,i){var s=Z.T;Z.T=null;var r=vt.p;try{vt.p=8,Pm(e,t,n,i)}finally{vt.p=r,Z.T=s}}function Pm(e,t,n,i){if(ec){var s=fd(i);if(s===null)af(e,t,i,nc,n),$y(e,i);else if(RR(s,e,t,n,i))i.stopPropagation();else if($y(e,i),t&4&&-1<wR.indexOf(e)){for(;s!==null;){var r=aa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=As(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Ze(a);l.entanglements[1]|=u,a&=~u}jn(r),!(At&6)&&(Qu=Dn()+500,rl(0))}}break;case 13:l=oa(r,2),l!==null&&Je(l,r,2),Pc(),km(r,2)}if(r=fd(i),r===null&&af(e,t,i,nc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else af(e,t,i,null,n)}}function fd(e){return e=Wd(e),Um(e)}var nc=null;function Um(e){if(nc=null,e=gr(e),e!==null){var t=Qo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Yv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nc=e,null}function S0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(c1()){case Zv:return 2;case Wv:return 8;case Du:case h1:return 32;case Jv:return 268435456;default:return 32}default:return 32}}var dd=!1,Gi=null,Qi=null,Yi=null,Oo=new Map,Vo=new Map,Di=[],wR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(e,t){switch(e){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Oo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(t.pointerId)}}function qa(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=aa(t),t!==null&&A0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function RR(e,t,n,i,s){switch(t){case"focusin":return Gi=qa(Gi,e,t,n,i,s),!0;case"dragenter":return Qi=qa(Qi,e,t,n,i,s),!0;case"mouseover":return Yi=qa(Yi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Oo.set(r,qa(Oo.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Vo.set(r,qa(Vo.get(r)||null,e,t,n,i,s)),!0}return!1}function b0(e){var t=gr(e.target);if(t!==null){var n=Qo(t);if(n!==null){if(t=n.tag,t===13){if(t=Yv(n),t!==null){e.blockedOn=t,v1(e.priority,function(){if(n.tag===13){var i=We();i=Kd(i);var s=oa(n,i);s!==null&&Je(s,n,i),km(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Df=i,n.target.dispatchEvent(i),Df=null}else return t=aa(n),t!==null&&A0(t),e.blockedOn=n,!1;t.shift()}return!0}function Zy(e,t,n){pu(e)&&n.delete(t)}function IR(){dd=!1,Gi!==null&&pu(Gi)&&(Gi=null),Qi!==null&&pu(Qi)&&(Qi=null),Yi!==null&&pu(Yi)&&(Yi=null),Oo.forEach(Zy),Vo.forEach(Zy)}function Xl(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,IR)))}var $l=null;function Wy(e){$l!==e&&($l=e,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,function(){$l===e&&($l=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(Um(i||n)===null)continue;break}var r=aa(n);r!==null&&(e.splice(t,3),t-=3,Qf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Mo(e){function t(u){return Xl(u,e)}Gi!==null&&Xl(Gi,e),Qi!==null&&Xl(Qi,e),Yi!==null&&Xl(Yi,e),Oo.forEach(t),Vo.forEach(t);for(var n=0;n<Di.length;n++){var i=Di[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Di.length&&(n=Di[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&Di.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[ze]||null;if(typeof r=="function")a||Wy(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[ze]||null)l=a.formAction;else if(Um(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Wy(n)}}}function Lm(e){this._internalRoot=e}zc.prototype.render=Lm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=We();T0(n,i,e,t,null,null)};zc.prototype.unmount=Lm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;T0(e.current,2,null,e,null,null),Pc(),t[ra]=null}};function zc(e){this._internalRoot=e}zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=sE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Di.length&&t!==0&&t<Di[n].priority;n++);Di.splice(n,0,e),n===0&&b0(e)}};var Jy=Gv.version;if(Jy!=="19.1.1")throw Error(U(527,Jy,"19.1.1"));vt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=i1(t),e=e!==null?Kv(e):null,e=e===null?null:e.stateNode,e};var CR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{Yo=Zl.inject(CR),$e=Zl}catch{}}bc.createRoot=function(e,t){if(!Qv(e))throw Error(U(299));var n=!1,i="",s=vT,r=ET,a=TT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=v0(e,1,!1,null,null,n,i,s,r,a,l,null),e[ra]=t.current,Om(e),new Lm(t)};bc.hydrateRoot=function(e,t,n){if(!Qv(e))throw Error(U(299));var i=!1,s="",r=vT,a=ET,l=TT,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=v0(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=E0(null),n=t.current,i=We(),i=Kd(i),s=Bi(i),s.callback=null,qi(n,s,i),n=i,t.current.lanes=n,Xo(t,n),jn(t),e[ra]=t.current,Om(e),new zc(t)};bc.version="19.1.1";function w0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w0)}catch(e){console.error(e)}}w0(),jv.exports=bc;var NR=jv.exports;const DR=()=>{};var t_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},xR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},I0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,d=r>>2,g=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new OR;const m=r<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class OR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VR=function(e){const t=R0(e);return I0.encodeByteArray(t,!0)},ic=function(e){return VR(e).replace(/\./g,"")},C0=function(e){try{return I0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=()=>MR().__FIREBASE_DEFAULTS__,PR=()=>{if(typeof process>"u"||typeof t_>"u")return;const e=t_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},UR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&C0(e[1]);return t&&JSON.parse(t)},Bc=()=>{try{return DR()||kR()||PR()||UR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},N0=e=>{var t,n;return(n=(t=Bc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},LR=e=>{const t=N0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},D0=()=>{var e;return(e=Bc())==null?void 0:e.config},x0=e=>{var t;return(t=Bc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ic(JSON.stringify(n)),ic(JSON.stringify(a)),""].join(".")}const fo={};function BR(){const e={prod:[],emulator:[]};for(const t of Object.keys(fo))fo[t]?e.emulator.push(t):e.prod.push(t);return e}function qR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let e_=!1;function V0(e,t){if(typeof window>"u"||typeof document>"u"||!ha(window.location.host)||fo[e]===t||fo[e]||e_)return;fo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=BR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{e_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=qR(i),_=n("text"),D=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),S=n("preprendIcon"),v=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(M,V);const x=h();u(v,S),R.append(v,D,M,x),document.body.appendChild(R)}r?(D.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function FR(){var t;const e=(t=Bc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function YR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KR(){const e=Ce();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function XR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $R(){try{return typeof indexedDB=="object"}catch{return!1}}function ZR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="FirebaseError";class gi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=WR,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll.prototype.create)}}class ll{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?JR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new gi(s,l,i)}}function JR(e,t){return e.replace(t2,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const t2=/\{\$([^}]+)}/g;function e2(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ls(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(n_(r)&&n_(a)){if(!Ls(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function n_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function n2(e,t){const n=new i2(e,t);return n.subscribe.bind(n)}class i2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");s2(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=lf),s.error===void 0&&(s.error=lf),s.complete===void 0&&(s.complete=lf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function lf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(e){return e&&e._delegate?e._delegate:e}class js{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new jR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(o2(t))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=ws){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ws){return this.instances.has(t)}getOptions(t=ws){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:a2(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ws){return this.component?this.component.multipleInstances?t:ws:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a2(e){return e===ws?void 0:e}function o2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new r2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(lt||(lt={}));const u2={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},c2=lt.INFO,h2={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},f2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=h2[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jm{constructor(t){this.name=t,this._logLevel=c2,this._logHandler=f2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?u2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...t),this._logHandler(this,lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...t),this._logHandler(this,lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...t),this._logHandler(this,lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...t),this._logHandler(this,lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...t),this._logHandler(this,lt.ERROR,...t)}}const d2=(e,t)=>t.some(n=>e instanceof n);let i_,s_;function m2(){return i_||(i_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g2(){return s_||(s_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M0=new WeakMap,md=new WeakMap,k0=new WeakMap,uf=new WeakMap,zm=new WeakMap;function p2(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Ki(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&M0.set(n,e)}).catch(()=>{}),zm.set(t,e),t}function y2(e){if(md.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});md.set(e,t)}let gd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return md.get(e);if(t==="objectStoreNames")return e.objectStoreNames||k0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function _2(e){gd=e(gd)}function v2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(cf(this),t,...n);return k0.set(i,t.sort?t.sort():[t]),Ki(i)}:g2().includes(e)?function(...t){return e.apply(cf(this),t),Ki(M0.get(this))}:function(...t){return Ki(e.apply(cf(this),t))}}function E2(e){return typeof e=="function"?v2(e):(e instanceof IDBTransaction&&y2(e),d2(e,m2())?new Proxy(e,gd):e)}function Ki(e){if(e instanceof IDBRequest)return p2(e);if(uf.has(e))return uf.get(e);const t=E2(e);return t!==e&&(uf.set(e,t),zm.set(t,e)),t}const cf=e=>zm.get(e);function T2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=Ki(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ki(a.result),u.oldVersion,u.newVersion,Ki(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const A2=["get","getKey","getAll","getAllKeys","count"],S2=["put","add","delete","clear"],hf=new Map;function r_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(hf.get(t))return hf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=S2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||A2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return hf.set(t,r),r}_2(e=>({...e,get:(t,n,i)=>r_(t,n)||e.get(t,n,i),has:(t,n)=>!!r_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function w2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const pd="@firebase/app",a_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new jm("@firebase/app"),R2="@firebase/app-compat",I2="@firebase/analytics-compat",C2="@firebase/analytics",N2="@firebase/app-check-compat",D2="@firebase/app-check",x2="@firebase/auth",O2="@firebase/auth-compat",V2="@firebase/database",M2="@firebase/data-connect",k2="@firebase/database-compat",P2="@firebase/functions",U2="@firebase/functions-compat",L2="@firebase/installations",j2="@firebase/installations-compat",z2="@firebase/messaging",B2="@firebase/messaging-compat",q2="@firebase/performance",H2="@firebase/performance-compat",F2="@firebase/remote-config",G2="@firebase/remote-config-compat",Q2="@firebase/storage",Y2="@firebase/storage-compat",K2="@firebase/firestore",X2="@firebase/ai",$2="@firebase/firestore-compat",Z2="firebase",W2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]",J2={[pd]:"fire-core",[R2]:"fire-core-compat",[C2]:"fire-analytics",[I2]:"fire-analytics-compat",[D2]:"fire-app-check",[N2]:"fire-app-check-compat",[x2]:"fire-auth",[O2]:"fire-auth-compat",[V2]:"fire-rtdb",[M2]:"fire-data-connect",[k2]:"fire-rtdb-compat",[P2]:"fire-fn",[U2]:"fire-fn-compat",[L2]:"fire-iid",[j2]:"fire-iid-compat",[z2]:"fire-fcm",[B2]:"fire-fcm-compat",[q2]:"fire-perf",[H2]:"fire-perf-compat",[F2]:"fire-rc",[G2]:"fire-rc-compat",[Q2]:"fire-gcs",[Y2]:"fire-gcs-compat",[K2]:"fire-fst",[$2]:"fire-fst-compat",[X2]:"fire-vertex","fire-js":"fire-js",[Z2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,tI=new Map,_d=new Map;function o_(e,t){try{e.container.addComponent(t)}catch(n){li.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Zr(e){const t=e.name;if(_d.has(t))return li.debug(`There were multiple attempts to register component ${t}.`),!1;_d.set(t,e);for(const n of sc.values())o_(n,e);for(const n of tI.values())o_(n,e);return!0}function Bm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new ll("app","Firebase",eI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=W2;function P0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:yd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Xi.create("bad-app-name",{appName:String(s)});if(n||(n=D0()),!n)throw Xi.create("no-options");const r=sc.get(s);if(r){if(Ls(n,r.options)&&Ls(i,r.config))return r;throw Xi.create("duplicate-app",{appName:s})}const a=new l2(s);for(const u of _d.values())a.addComponent(u);const l=new nI(n,i,a);return sc.set(s,l),l}function U0(e=yd){const t=sc.get(e);if(!t&&e===yd&&D0())return P0();if(!t)throw Xi.create("no-app",{appName:e});return t}function $i(e,t,n){let i=J2[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),li.warn(a.join(" "));return}Zr(new js(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="firebase-heartbeat-database",sI=1,ko="firebase-heartbeat-store";let ff=null;function L0(){return ff||(ff=T2(iI,sI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ko)}catch(n){console.warn(n)}}}}).catch(e=>{throw Xi.create("idb-open",{originalErrorMessage:e.message})})),ff}async function rI(e){try{const n=(await L0()).transaction(ko),i=await n.objectStore(ko).get(j0(e));return await n.done,i}catch(t){if(t instanceof gi)li.warn(t.message);else{const n=Xi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});li.warn(n.message)}}}async function l_(e,t){try{const i=(await L0()).transaction(ko,"readwrite");await i.objectStore(ko).put(t,j0(e)),await i.done}catch(n){if(n instanceof gi)li.warn(n.message);else{const i=Xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(i.message)}}}function j0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=1024,oI=30;class lI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=u_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>oI){const a=hI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){li.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u_(),{heartbeatsToSend:i,unsentEntries:s}=uI(this._heartbeatsCache.heartbeats),r=ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return li.warn(n),""}}}function u_(){return new Date().toISOString().substring(0,10)}function uI(e,t=aI){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),c_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),c_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $R()?ZR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return l_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return l_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function c_(e){return ic(JSON.stringify({version:2,heartbeats:e})).length}function hI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(e){Zr(new js("platform-logger",t=>new b2(t),"PRIVATE")),Zr(new js("heartbeat",t=>new lI(t),"PRIVATE")),$i(pd,a_,e),$i(pd,a_,"esm2020"),$i("fire-js","")}fI("");var dI="firebase",mI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(dI,mI,"app");var h_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,z0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function E(){}E.prototype=y.prototype,T.D=y.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(b,C,I){for(var A=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)A[ht-2]=arguments[ht];return y.prototype[C].apply(b,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,E){E||(E=0);var b=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)b[C]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(C=0;16>C;++C)b[C]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=T.g[0],E=T.g[1],C=T.g[2];var I=T.g[3],A=y+(I^E&(C^I))+b[0]+3614090360&4294967295;y=E+(A<<7&4294967295|A>>>25),A=I+(C^y&(E^C))+b[1]+3905402710&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(E^I&(y^E))+b[2]+606105819&4294967295,C=I+(A<<17&4294967295|A>>>15),A=E+(y^C&(I^y))+b[3]+3250441966&4294967295,E=C+(A<<22&4294967295|A>>>10),A=y+(I^E&(C^I))+b[4]+4118548399&4294967295,y=E+(A<<7&4294967295|A>>>25),A=I+(C^y&(E^C))+b[5]+1200080426&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(E^I&(y^E))+b[6]+2821735955&4294967295,C=I+(A<<17&4294967295|A>>>15),A=E+(y^C&(I^y))+b[7]+4249261313&4294967295,E=C+(A<<22&4294967295|A>>>10),A=y+(I^E&(C^I))+b[8]+1770035416&4294967295,y=E+(A<<7&4294967295|A>>>25),A=I+(C^y&(E^C))+b[9]+2336552879&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(E^I&(y^E))+b[10]+4294925233&4294967295,C=I+(A<<17&4294967295|A>>>15),A=E+(y^C&(I^y))+b[11]+2304563134&4294967295,E=C+(A<<22&4294967295|A>>>10),A=y+(I^E&(C^I))+b[12]+1804603682&4294967295,y=E+(A<<7&4294967295|A>>>25),A=I+(C^y&(E^C))+b[13]+4254626195&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(E^I&(y^E))+b[14]+2792965006&4294967295,C=I+(A<<17&4294967295|A>>>15),A=E+(y^C&(I^y))+b[15]+1236535329&4294967295,E=C+(A<<22&4294967295|A>>>10),A=y+(C^I&(E^C))+b[1]+4129170786&4294967295,y=E+(A<<5&4294967295|A>>>27),A=I+(E^C&(y^E))+b[6]+3225465664&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^E&(I^y))+b[11]+643717713&4294967295,C=I+(A<<14&4294967295|A>>>18),A=E+(I^y&(C^I))+b[0]+3921069994&4294967295,E=C+(A<<20&4294967295|A>>>12),A=y+(C^I&(E^C))+b[5]+3593408605&4294967295,y=E+(A<<5&4294967295|A>>>27),A=I+(E^C&(y^E))+b[10]+38016083&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^E&(I^y))+b[15]+3634488961&4294967295,C=I+(A<<14&4294967295|A>>>18),A=E+(I^y&(C^I))+b[4]+3889429448&4294967295,E=C+(A<<20&4294967295|A>>>12),A=y+(C^I&(E^C))+b[9]+568446438&4294967295,y=E+(A<<5&4294967295|A>>>27),A=I+(E^C&(y^E))+b[14]+3275163606&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^E&(I^y))+b[3]+4107603335&4294967295,C=I+(A<<14&4294967295|A>>>18),A=E+(I^y&(C^I))+b[8]+1163531501&4294967295,E=C+(A<<20&4294967295|A>>>12),A=y+(C^I&(E^C))+b[13]+2850285829&4294967295,y=E+(A<<5&4294967295|A>>>27),A=I+(E^C&(y^E))+b[2]+4243563512&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^E&(I^y))+b[7]+1735328473&4294967295,C=I+(A<<14&4294967295|A>>>18),A=E+(I^y&(C^I))+b[12]+2368359562&4294967295,E=C+(A<<20&4294967295|A>>>12),A=y+(E^C^I)+b[5]+4294588738&4294967295,y=E+(A<<4&4294967295|A>>>28),A=I+(y^E^C)+b[8]+2272392833&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^E)+b[11]+1839030562&4294967295,C=I+(A<<16&4294967295|A>>>16),A=E+(C^I^y)+b[14]+4259657740&4294967295,E=C+(A<<23&4294967295|A>>>9),A=y+(E^C^I)+b[1]+2763975236&4294967295,y=E+(A<<4&4294967295|A>>>28),A=I+(y^E^C)+b[4]+1272893353&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^E)+b[7]+4139469664&4294967295,C=I+(A<<16&4294967295|A>>>16),A=E+(C^I^y)+b[10]+3200236656&4294967295,E=C+(A<<23&4294967295|A>>>9),A=y+(E^C^I)+b[13]+681279174&4294967295,y=E+(A<<4&4294967295|A>>>28),A=I+(y^E^C)+b[0]+3936430074&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^E)+b[3]+3572445317&4294967295,C=I+(A<<16&4294967295|A>>>16),A=E+(C^I^y)+b[6]+76029189&4294967295,E=C+(A<<23&4294967295|A>>>9),A=y+(E^C^I)+b[9]+3654602809&4294967295,y=E+(A<<4&4294967295|A>>>28),A=I+(y^E^C)+b[12]+3873151461&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^E)+b[15]+530742520&4294967295,C=I+(A<<16&4294967295|A>>>16),A=E+(C^I^y)+b[2]+3299628645&4294967295,E=C+(A<<23&4294967295|A>>>9),A=y+(C^(E|~I))+b[0]+4096336452&4294967295,y=E+(A<<6&4294967295|A>>>26),A=I+(E^(y|~C))+b[7]+1126891415&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~E))+b[14]+2878612391&4294967295,C=I+(A<<15&4294967295|A>>>17),A=E+(I^(C|~y))+b[5]+4237533241&4294967295,E=C+(A<<21&4294967295|A>>>11),A=y+(C^(E|~I))+b[12]+1700485571&4294967295,y=E+(A<<6&4294967295|A>>>26),A=I+(E^(y|~C))+b[3]+2399980690&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~E))+b[10]+4293915773&4294967295,C=I+(A<<15&4294967295|A>>>17),A=E+(I^(C|~y))+b[1]+2240044497&4294967295,E=C+(A<<21&4294967295|A>>>11),A=y+(C^(E|~I))+b[8]+1873313359&4294967295,y=E+(A<<6&4294967295|A>>>26),A=I+(E^(y|~C))+b[15]+4264355552&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~E))+b[6]+2734768916&4294967295,C=I+(A<<15&4294967295|A>>>17),A=E+(I^(C|~y))+b[13]+1309151649&4294967295,E=C+(A<<21&4294967295|A>>>11),A=y+(C^(E|~I))+b[4]+4149444226&4294967295,y=E+(A<<6&4294967295|A>>>26),A=I+(E^(y|~C))+b[11]+3174756917&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~E))+b[2]+718787259&4294967295,C=I+(A<<15&4294967295|A>>>17),A=E+(I^(C|~y))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var E=y-this.blockSize,b=this.B,C=this.h,I=0;I<y;){if(C==0)for(;I<=E;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(b[C++]=T.charCodeAt(I++),C==this.blockSize){s(this,b),C=0;break}}else for(;I<y;)if(b[C++]=T[I++],C==this.blockSize){s(this,b),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var E=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=E&255,E/=256;for(this.u(T),T=Array(16),y=E=0;4>y;++y)for(var b=0;32>b;b+=8)T[E++]=this.g[y]>>>b&255;return T};function r(T,y){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=y(T)}function a(T,y){this.h=y;for(var E=[],b=!0,C=T.length-1;0<=C;C--){var I=T[C]|0;b&&I==y||(E[C]=I,b=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?r(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(h(-T));for(var y=[],E=1,b=0;T>=E;b++)y[b]=T/E|0,E*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return M(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(y,8)),b=g,C=0;C<T.length;C+=8){var I=Math.min(8,T.length-C),A=parseInt(T.substring(C,C+I),y);8>I?(I=h(Math.pow(y,I)),b=b.j(I).add(h(A))):(b=b.j(E),b=b.add(h(A)))}return b}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-M(this).m();for(var T=0,y=1,E=0;E<this.g.length;E++){var b=this.i(E);T+=(0<=b?b:4294967296+b)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(V(this))return"-"+M(this).toString(T);for(var y=h(Math.pow(T,6)),E=this,b="";;){var C=x(E,y).g;E=S(E,C.j(y));var I=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=C,D(E))return I+b;for(;6>I.length;)I="0"+I;b=I+b}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=S(this,T),V(T)?-1:D(T)?0:1};function M(T){for(var y=T.g.length,E=[],b=0;b<y;b++)E[b]=~T.g[b];return new a(E,~T.h).add(m)}e.abs=function(){return V(this)?M(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0,C=0;C<=y;C++){var I=b+(this.i(C)&65535)+(T.i(C)&65535),A=(I>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);b=A>>>16,I&=65535,A&=65535,E[C]=A<<16|I}return new a(E,E[E.length-1]&-2147483648?-1:0)};function S(T,y){return T.add(M(y))}e.j=function(T){if(D(this)||D(T))return g;if(V(this))return V(T)?M(this).j(M(T)):M(M(this).j(T));if(V(T))return M(this.j(M(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,E=[],b=0;b<2*y;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<T.g.length;C++){var I=this.i(b)>>>16,A=this.i(b)&65535,ht=T.i(C)>>>16,Gt=T.i(C)&65535;E[2*b+2*C]+=A*Gt,v(E,2*b+2*C),E[2*b+2*C+1]+=I*Gt,v(E,2*b+2*C+1),E[2*b+2*C+1]+=A*ht,v(E,2*b+2*C+1),E[2*b+2*C+2]+=I*ht,v(E,2*b+2*C+2)}for(b=0;b<y;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=y;b<2*y;b++)E[b]=0;return new a(E,0)};function v(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function R(T,y){this.g=T,this.h=y}function x(T,y){if(D(y))throw Error("division by zero");if(D(T))return new R(g,g);if(V(T))return y=x(M(T),y),new R(M(y.g),M(y.h));if(V(y))return y=x(T,M(y)),new R(M(y.g),y.h);if(30<T.g.length){if(V(T)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var E=m,b=y;0>=b.l(T);)E=L(E),b=L(b);var C=q(E,1),I=q(b,1);for(b=q(b,2),E=q(E,2);!D(b);){var A=I.add(b);0>=A.l(T)&&(C=C.add(E),I=A),b=q(b,1),E=q(E,1)}return y=S(T,C.j(y)),new R(C,y)}for(C=g;0<=T.l(y);){for(E=Math.max(1,Math.floor(T.m()/y.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),I=h(E),A=I.j(y);V(A)||0<A.l(T);)E-=b,I=h(E),A=I.j(y);D(I)&&(I=m),C=C.add(I),T=S(T,A)}return new R(C,T)}e.A=function(T){return x(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)&T.i(b);return new a(E,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)|T.i(b);return new a(E,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)^T.i(b);return new a(E,this.h^T.h)};function L(T){for(var y=T.g.length+1,E=[],b=0;b<y;b++)E[b]=T.i(b)<<1|T.i(b-1)>>>31;return new a(E,T.h)}function q(T,y){var E=y>>5;y%=32;for(var b=T.g.length-E,C=[],I=0;I<b;I++)C[I]=0<y?T.i(I+E)>>>y|T.i(I+E+1)<<32-y:T.i(I+E);return new a(C,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,z0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Zi=a}).apply(typeof h_<"u"?h_:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,Ya,q0,yu,vd,H0,F0,G0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var O=f++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,O){for(var z=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)z[Rt-2]=arguments[Rt];return c.prototype[N].apply(p,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,O=p.length||0;o.length=N+O;for(let z=0;z<O;z++)o[N+z]=p[z]}else o.push(p)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function q(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let O=0;O<E.length;O++)f=E[O],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function C(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function A(){var o=ot;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ht{constructor(){this.h=this.g=null}add(c,f){const p=Gt.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Gt=new S(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let G,X=!1,ot=new ht,yt=()=>{const o=l.Promise.resolve(void 0);G=()=>{o.then(ie)}};var ie=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(f){I(f)}var c=Gt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function Bt(){this.s=this.s,this.C=this.C}Bt.prototype.s=!1,Bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var Qt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function se(o,c){if(gt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{x(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Zs[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&se.aa.h.call(this)}}D(se,gt);var Zs={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),va=0;function Ea(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++va,this.da=this.fa=!1}function pn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function zn(o){this.src=o,this.g={},this.h=0}zn.prototype.add=function(o,c,f,p,N){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var z=gs(o,c,p,N);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new Ea(c,this.src,O,!!p,N),c.fa=f,o.push(c)),c};function pi(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(p,N,1),O&&(pn(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function gs(o,c,f,p){for(var N=0;N<o.length;++N){var O=o[N];if(!O.da&&O.listener==c&&O.capture==!!f&&O.ha==p)return N}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),st={};function Me(o,c,f,p,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Me(o,c[O],f,p,N);return null}return f=ps(f),o&&o[sn]?o.K(c,f,h(p)?!!p.capture:!1,N):et(o,c,f,!1,p,N)}function et(o,c,f,p,N,O){if(!c)throw Error("Invalid event type");var z=h(N)?!!N.capture:!!N,Rt=an(o);if(Rt||(o[Y]=Rt=new zn(o)),f=Rt.add(c,f,p,z,O),f.proxy)return f;if(p=tt(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Qt||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(bn(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function tt(){function o(f){return c.call(o.src,o.listener,f)}const c=yi;return o}function Et(o,c,f,p,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)Et(o,c[O],f,p,N);else p=h(p)?!!p.capture:!!p,f=ps(f),o&&o[sn]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],f=gs(O,f,p,N),-1<f&&(pn(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=an(o))&&(c=o.g[c.toString()],o=-1,c&&(o=gs(c,f,p,N)),(f=-1<o?c[o]:null)&&rn(f))}function rn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[sn])pi(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(bn(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=an(c))?(pi(f,o),f.h==0&&(f.src=null,c[Y]=null)):pn(o)}}}function bn(o){return o in st?st[o]:st[o]="on"+o}function yi(o,c){if(o.da)o=!0;else{c=new se(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&rn(o),o=f.call(p,c)}return o}function an(o){return o=o[Y],o instanceof zn?o:null}var qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ps(o){return typeof o=="function"?o:(o[qe]||(o[qe]=function(c){return o.handleEvent(c)}),o[qe])}function Wt(){Bt.call(this),this.i=new zn(this),this.M=this,this.F=null}D(Wt,Bt),Wt.prototype[sn]=!0,Wt.prototype.removeEventListener=function(o,c,f,p){Et(this,o,c,f,p)};function fe(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new gt(c,o);else if(c instanceof gt)c.target=c.target||o;else{var N=c;c=new gt(p,o),b(c,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var z=c.g=f[O];N=Ws(z,p,!0,c)&&N}if(z=c.g=o,N=Ws(z,p,!0,c)&&N,N=Ws(z,p,!1,c)&&N,f)for(O=0;O<f.length;O++)z=c.g=f[O],N=Ws(z,p,!1,c)&&N}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)pn(f[p]);delete o.g[c],o.h--}}this.F=null},Wt.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},Wt.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Ws(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var z=c[O];if(z&&!z.da&&z.capture==f){var Rt=z.listener,de=z.ha||z.src;z.fa&&pi(o.i,z),N=Rt.call(de,p)!==!1&&N}}return N&&!p.defaultPrevented}function Ta(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Bn(o){o.g=Ta(()=>{o.g=null,o.i&&(o.i=!1,Bn(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class lb extends Bt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Bn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(o){Bt.call(this),this.h=o,this.g={}}D(Aa,Bt);var Pg=[];function Ug(o){q(o.g,function(c,f){this.g.hasOwnProperty(f)&&rn(c)},o),o.g={}}Aa.prototype.N=function(){Aa.aa.N.call(this),Ug(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ch=l.JSON.stringify,ub=l.JSON.parse,cb=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function hh(){}hh.prototype.h=null;function Lg(o){return o.h||(o.h=o.i())}function jg(){}var Sa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fh(){gt.call(this,"d")}D(fh,gt);function dh(){gt.call(this,"c")}D(dh,gt);var ys={},zg=null;function Al(){return zg=zg||new Wt}ys.La="serverreachability";function Bg(o){gt.call(this,ys.La,o)}D(Bg,gt);function ba(o){const c=Al();fe(c,new Bg(c))}ys.STAT_EVENT="statevent";function qg(o,c){gt.call(this,ys.STAT_EVENT,o),this.stat=c}D(qg,gt);function Ne(o){const c=Al();fe(c,new qg(c,o))}ys.Ma="timingevent";function Hg(o,c){gt.call(this,ys.Ma,o),this.size=c}D(Hg,gt);function wa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ra(){this.g=!0}Ra.prototype.xa=function(){this.g=!1};function hb(o,c,f,p,N,O){o.info(function(){if(o.g)if(O)for(var z="",Rt=O.split("&"),de=0;de<Rt.length;de++){var pt=Rt[de].split("=");if(1<pt.length){var Te=pt[0];pt=pt[1];var Ae=Te.split("_");z=2<=Ae.length&&Ae[1]=="type"?z+(Te+"="+pt+"&"):z+(Te+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function fb(o,c,f,p,N,O,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+O+" "+z})}function Js(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+mb(o,f)+(p?" "+p:"")})}function db(o,c){o.info(function(){return"TIMEOUT: "+c})}Ra.prototype.info=function(){};function mb(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return ch(f)}catch{return c}}var Sl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mh;function bl(){}D(bl,hh),bl.prototype.g=function(){return new XMLHttpRequest},bl.prototype.i=function(){return{}},mh=new bl;function _i(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gg}function Gg(){this.i=null,this.g="",this.h=!1}var Qg={},gh={};function ph(o,c,f){o.L=1,o.v=Cl(qn(c)),o.m=f,o.P=!0,Yg(o,null)}function Yg(o,c){o.F=Date.now(),wl(o),o.A=qn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),op(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Gg,o.g=wp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new lb(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Pg[0]=N.toString()),N=Pg);for(var O=0;O<N.length;O++){var z=Me(f,N[O],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ba(),hb(o.i,o.u,o.A,o.l,o.R,o.m)}_i.prototype.ca=function(o){o=o.target;const c=this.M;c&&Hn(o)==3?c.j():this.Y(o)},_i.prototype.Y=function(o){try{if(o==this.g)t:{const Ae=Hn(this.g);var c=this.g.Ba();const nr=this.g.Z();if(!(3>Ae)&&(Ae!=3||this.g&&(this.h.h||this.g.oa()||mp(this.g)))){this.J||Ae!=4||c==7||(c==8||0>=nr?ba(3):ba(2)),yh(this);var f=this.g.Z();this.X=f;e:if(Kg(this)){var p=mp(this.g);o="";var N=p.length,O=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_s(this),Ia(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,fb(this.i,this.u,this.A,this.l,this.R,Ae,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Rt,de=this.g;if((Rt=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Rt)){var pt=Rt;break e}}pt=null}if(f=pt)Js(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_h(this,f);else{this.o=!1,this.s=3,Ne(12),_s(this),Ia(this);break t}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<z.length;)if(yn=gb(this,z),yn==gh){Ae==4&&(this.s=4,Ne(14),f=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Qg){this.s=4,Ne(15),Js(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Js(this.i,this.l,yn,null),_h(this,yn);if(Kg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||z.length!=0||this.h.h||(this.s=1,Ne(16),f=!1),this.o=this.o&&f,!f)Js(this.i,this.l,z,"[Invalid Chunked Response]"),_s(this),Ia(this);else if(0<z.length&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.ba&&!Te.M&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),bh(Te),Te.M=!0,Ne(11))}}else Js(this.i,this.l,z,null),_h(this,z);Ae==4&&_s(this),this.o&&!this.J&&(Ae==4?Tp(this.j,this):(this.o=!1,wl(this)))}else Ob(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),_s(this),Ia(this)}}}catch{}finally{}};function Kg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function gb(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?gh:(f=Number(c.substring(f,p)),isNaN(f)?Qg:(p+=1,p+f>c.length?gh:(c=c.slice(p,p+f),o.C=p+f,c)))}_i.prototype.cancel=function(){this.J=!0,_s(this)};function wl(o){o.S=Date.now()+o.I,Xg(o,o.I)}function Xg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=wa(m(o.ba,o),c)}function yh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}_i.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(db(this.i,this.A),this.L!=2&&(ba(),Ne(17)),_s(this),this.s=2,Ia(this)):Xg(this,this.S-o)};function Ia(o){o.j.G==0||o.J||Tp(o.j,o)}function _s(o){yh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ug(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function _h(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||vh(f.h,o))){if(!o.K&&vh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ml(f),Ol(f);else break t;Sh(f),Ne(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=wa(m(f.Za,f),6e3));if(1>=Wg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Es(f,11)}else if((o.K||f.g==o)&&Ml(f),!v(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let pt=N[c];if(f.T=pt[0],pt=pt[1],f.G==2)if(pt[0]=="c"){f.K=pt[1],f.ia=pt[2];const Te=pt[3];Te!=null&&(f.la=Te,f.j.info("VER="+f.la));const Ae=pt[4];Ae!=null&&(f.Aa=Ae,f.j.info("SVER="+f.Aa));const nr=pt[5];nr!=null&&typeof nr=="number"&&0<nr&&(p=1.5*nr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const yn=o.g;if(yn){const Pl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pl){var O=p.h;O.g||Pl.indexOf("spdy")==-1&&Pl.indexOf("quic")==-1&&Pl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Eh(O,O.h),O.h=null))}if(p.D){const wh=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;wh&&(p.ya=wh,Nt(p.I,p.D,wh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=bp(p,p.J?p.ia:null,p.W),z.K){Jg(p.h,z);var Rt=z,de=p.L;de&&(Rt.I=de),Rt.B&&(yh(Rt),wl(Rt)),p.g=z}else vp(p);0<f.i.length&&Vl(f)}else pt[0]!="stop"&&pt[0]!="close"||Es(f,7);else f.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Es(f,7):Ah(f):pt[0]!="noop"&&f.l&&f.l.ta(pt),f.v=0)}}ba(4)}catch{}}var pb=class{constructor(o,c){this.g=o,this.map=c}};function $g(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Wg(o){return o.h?1:o.g?o.g.size:0}function vh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Eh(o,c){o.g?o.g.add(c):o.h=c}function Jg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}$g.prototype.cancel=function(){if(this.i=tp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function tp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function yb(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function _b(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function ep(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=_b(o),p=yb(o),N=p.length,O=0;O<N;O++)c.call(void 0,p[O],f&&f[O],o)}var np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vb(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var O=o[f].substring(0,p);N=o[f].substring(p+1)}else O=o[f];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function vs(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof vs){this.h=o.h,Rl(this,o.j),this.o=o.o,this.g=o.g,Il(this,o.s),this.l=o.l;var c=o.i,f=new Da;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),ip(this,f),this.m=o.m}else o&&(c=String(o).match(np))?(this.h=!1,Rl(this,c[1]||"",!0),this.o=Ca(c[2]||""),this.g=Ca(c[3]||"",!0),Il(this,c[4]),this.l=Ca(c[5]||"",!0),ip(this,c[6]||"",!0),this.m=Ca(c[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}vs.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Na(c,sp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Na(c,sp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Na(f,f.charAt(0)=="/"?Ab:Tb,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Na(f,bb)),o.join("")};function qn(o){return new vs(o)}function Rl(o,c,f){o.j=f?Ca(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Il(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function ip(o,c,f){c instanceof Da?(o.i=c,wb(o.i,o.h)):(f||(c=Na(c,Sb)),o.i=new Da(c,o.h))}function Nt(o,c,f){o.i.set(c,f)}function Cl(o){return Nt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ca(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Na(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Eb),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Eb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var sp=/[#\/\?@]/g,Tb=/[#\?:]/g,Ab=/[#\?]/g,Sb=/[#\?@]/g,bb=/#/g;function Da(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function vi(o){o.g||(o.g=new Map,o.h=0,o.i&&vb(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Da.prototype,e.add=function(o,c){vi(this),this.i=null,o=tr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function rp(o,c){vi(o),c=tr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function ap(o,c){return vi(o),c=tr(o,c),o.g.has(c)}e.forEach=function(o,c){vi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){vi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let O=0;O<N.length;O++)f.push(c[p])}return f},e.V=function(o){vi(this);let c=[];if(typeof o=="string")ap(this,o)&&(c=c.concat(this.g.get(tr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return vi(this),this.i=null,o=tr(this,o),ap(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function op(o,c,f){rp(o,c),0<f.length&&(o.i=null,o.g.set(tr(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const O=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var N=O;z[p]!==""&&(N+="="+encodeURIComponent(String(z[p]))),o.push(N)}}return this.i=o.join("&")};function tr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function wb(o,c){c&&!o.j&&(vi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(rp(this,p),op(this,N,f))},o)),o.j=c}function Rb(o,c){const f=new Ra;if(l.Image){const p=new Image;p.onload=_(Ei,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(Ei,f,"TestLoadImage: error",!1,c,p),p.onabort=_(Ei,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(Ei,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function Ib(o,c){const f=new Ra,p=new AbortController,N=setTimeout(()=>{p.abort(),Ei(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(N),O.ok?Ei(f,"TestPingServer: ok",!0,c):Ei(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Ei(f,"TestPingServer: error",!1,c)})}function Ei(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function Cb(){this.g=new cb}function Nb(o,c,f){const p=f||"";try{ep(o,function(N,O){let z=N;h(N)&&(z=ch(N)),c.push(p+O+"="+encodeURIComponent(z))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Nl(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Nl,hh),Nl.prototype.g=function(){return new Dl(this.l,this.j)},Nl.prototype.i=function(o){return function(){return o}}({});function Dl(o,c){Wt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Dl,Wt),e=Dl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Oa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function lp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?xa(this):Oa(this),this.readyState==3&&lp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,xa(this))},e.Qa=function(o){this.g&&(this.response=o,xa(this))},e.ga=function(){this.g&&xa(this)};function xa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Oa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Oa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function up(o){let c="";return q(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Th(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=up(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Nt(o,c,f))}function Lt(o){Wt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Lt,Wt);var Db=/^https?$/i,xb=["POST","PUT"];e=Lt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mh.g(),this.v=this.o?Lg(this.o):Lg(mh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){cp(this,O);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())f.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xb,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of f)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){cp(this,O)}};function cp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,hp(o),xl(o)}function hp(o){o.A||(o.A=!0,fe(o,"complete"),fe(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,fe(this,"complete"),fe(this,"abort"),xl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xl(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?fp(this):this.bb())},e.bb=function(){fp(this)};function fp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Hn(o)!=4||o.Z()!=2)){if(o.u&&Hn(o)==4)Ta(o.Ea,0,o);else if(fe(o,"readystatechange"),Hn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var N=String(o.D).match(np)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!Db.test(N?N.toLowerCase():"")}f=p}if(f)fe(o,"complete"),fe(o,"success");else{o.m=6;try{var O=2<Hn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",hp(o)}}finally{xl(o)}}}}function xl(o,c){if(o.g){dp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||fe(o,"ready");try{f.onreadystatechange=p}catch{}}}function dp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Hn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),ub(c)}};function mp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ob(o){const c={};o=(o.g&&2<=Hn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=C(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=c[N]||[];c[N]=O,O.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function gp(o){this.Aa=0,this.i=[],this.j=new Ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,o),this.cb=Va("retryDelaySeedMs",1e4,o),this.Wa=Va("forwardChannelMaxRetries",2,o),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new $g(o&&o.concurrentRequestLimit),this.Da=new Cb,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=gp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ne(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=bp(this,null,this.W),Vl(this)};function Ah(o){if(pp(o),o.G==3){var c=o.U++,f=qn(o.I);if(Nt(f,"SID",o.K),Nt(f,"RID",c),Nt(f,"TYPE","terminate"),Ma(o,f),c=new _i(o,o.j,c),c.L=2,c.v=Cl(qn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=wp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),wl(c)}Sp(o)}function Ol(o){o.g&&(bh(o),o.g.cancel(),o.g=null)}function pp(o){Ol(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ml(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Vl(o){if(!Zg(o.h)&&!o.s){o.s=!0;var c=o.Ga;G||yt(),X||(G(),X=!0),ot.add(c,o),o.B=0}}function Vb(o,c){return Wg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=wa(m(o.Ga,o,c),Ap(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new _i(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=_p(this,N,c),f=qn(this.I),Nt(f,"RID",o),Nt(f,"CVER",22),this.D&&Nt(f,"X-HTTP-Session-Id",this.D),Ma(this,f),O&&(this.O?c="headers="+encodeURIComponent(String(up(O)))+"&"+c:this.m&&Th(f,this.m,O)),Eh(this.h,N),this.Ua&&Nt(f,"TYPE","init"),this.P?(Nt(f,"$req",c),Nt(f,"SID","null"),N.T=!0,ph(N,f,null)):ph(N,f,c),this.G=2}}else this.G==3&&(o?yp(this,o):this.i.length==0||Zg(this.h)||yp(this))};function yp(o,c){var f;c?f=c.l:f=o.U++;const p=qn(o.I);Nt(p,"SID",o.K),Nt(p,"RID",f),Nt(p,"AID",o.T),Ma(o,p),o.m&&o.o&&Th(p,o.m,o.o),f=new _i(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=_p(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Eh(o.h,f),ph(f,p,c)}function Ma(o,c){o.H&&q(o.H,function(f,p){Nt(c,p,f)}),o.l&&ep({},function(f,p){Nt(c,p,f)})}function _p(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let O=-1;for(;;){const z=["count="+f];O==-1?0<f?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let Rt=!0;for(let de=0;de<f;de++){let pt=N[de].g;const Te=N[de].map;if(pt-=O,0>pt)O=Math.max(0,N[de].g-100),Rt=!1;else try{Nb(Te,z,"req"+pt+"_")}catch{p&&p(Te)}}if(Rt){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function vp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;G||yt(),X||(G(),X=!0),ot.add(c,o),o.v=0}}function Sh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=wa(m(o.Fa,o),Ap(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Ep(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=wa(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Ol(this),Ep(this))};function bh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Ep(o){o.g=new _i(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=qn(o.qa);Nt(c,"RID","rpc"),Nt(c,"SID",o.K),Nt(c,"AID",o.T),Nt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Nt(c,"TO",o.ja),Nt(c,"TYPE","xmlhttp"),Ma(o,c),o.m&&o.o&&Th(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Cl(qn(c)),f.m=null,f.P=!0,Yg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Ol(this),Sh(this),Ne(19))};function Ml(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Tp(o,c){var f=null;if(o.g==c){Ml(o),bh(o),o.g=null;var p=2}else if(vh(o.h,c))f=c.D,Jg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=Al(),fe(p,new Hg(p,f)),Vl(o)}else vp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&Vb(o,c)||p==2&&Sh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:Es(o,5);break;case 4:Es(o,10);break;case 3:Es(o,6);break;default:Es(o,2)}}}function Ap(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Es(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new vs(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Rl(p,"https"),Cl(p),N?Rb(p.toString(),f):Ib(p.toString(),f)}else Ne(2);o.G=0,o.l&&o.l.sa(c),Sp(o),pp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function Sp(o){if(o.G=0,o.ka=[],o.l){const c=tp(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function bp(o,c,f){var p=f instanceof vs?qn(f):new vs(f);if(p.g!="")c&&(p.g=c+"."+p.g),Il(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new vs(null);p&&Rl(O,p),c&&(O.g=c),N&&Il(O,N),f&&(O.l=f),p=O}return f=o.D,c=o.ya,f&&c&&Nt(p,f,c),Nt(p,"VER",o.la),Ma(o,p),p}function wp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Lt(new Nl({eb:f})):new Lt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rp(){}e=Rp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function kl(){}kl.prototype.g=function(o,c){return new He(o,c)};function He(o,c){Wt.call(this),this.g=new gp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new er(this)}D(He,Wt),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Ah(this.g)},He.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ch(o),o=f);c.i.push(new pb(c.Ya++,o)),c.G==3&&Vl(c)},He.prototype.N=function(){this.g.l=null,delete this.j,Ah(this.g),delete this.g,He.aa.N.call(this)};function Ip(o){fh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(Ip,fh);function Cp(){dh.call(this),this.status=1}D(Cp,dh);function er(o){this.g=o}D(er,Rp),er.prototype.ua=function(){fe(this.g,"a")},er.prototype.ta=function(o){fe(this.g,new Ip(o))},er.prototype.sa=function(o){fe(this.g,new Cp)},er.prototype.ra=function(){fe(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,G0=function(){return new kl},F0=function(){return Al()},H0=ys,vd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sl.NO_ERROR=0,Sl.TIMEOUT=8,Sl.HTTP_ERROR=6,yu=Sl,Fg.COMPLETE="complete",q0=Fg,jg.EventType=Sa,Sa.OPEN="a",Sa.CLOSE="b",Sa.ERROR="c",Sa.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,Ya=jg,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,B0=Lt}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const f_="@firebase/firestore",d_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}we.UNAUTHENTICATED=new we(null),we.GOOGLE_CREDENTIALS=new we("google-credentials-uid"),we.FIRST_PARTY=new we("first-party-uid"),we.MOCK_USER=new we("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new jm("@firebase/firestore");function ur(){return zs.logLevel}function H(e,...t){if(zs.logLevel<=lt.DEBUG){const n=t.map(qm);zs.debug(`Firestore (${da}): ${e}`,...n)}}function ui(e,...t){if(zs.logLevel<=lt.ERROR){const n=t.map(qm);zs.error(`Firestore (${da}): ${e}`,...n)}}function Wr(e,...t){if(zs.logLevel<=lt.WARN){const n=t.map(qm);zs.warn(`Firestore (${da}): ${e}`,...n)}}function qm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,Q0(e,i,n)}function Q0(e,t,n){let i=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ui(i),new Error(i)}function mt(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||Q0(t,s,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends gi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(we.UNAUTHENTICATED))}shutdown(){}}class pI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yI{constructor(t){this.t=t,this.currentUser=we.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ii,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ii)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new Y0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new we(t)}}class _I{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=we.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new _I(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(we.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const i=r=>{r.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new m_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=TI(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ut(e,t){return e<t?-1:e>t?1:0}function Ed(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return df(s)===df(r)?ut(s,r):df(s)?1:-1}return ut(e.length,t.length)}const AI=55296,SI=57343;function df(e){const t=e.charCodeAt(0);return t>=AI&&t<=SI}function Jr(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__name__";class Rn{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Rn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Rn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Rn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ut(t.length,n.length)}static compareSegments(t,n){const i=Rn.isNumericId(t),s=Rn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Rn.extractNumericId(t).compare(Rn.extractNumericId(n)):Ed(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Zi.fromString(t.substring(4,t.length-2))}}class wt extends Rn{construct(t,n,i){return new wt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ye extends Rn{construct(t,n,i){return new ye(t,n,i)}static isValidIdentifier(t){return bI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ye.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===g_}static keyField(){return new ye([g_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ye(n)}static emptyPath(){return new ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(wt.fromString(t))}static fromName(t){return new Q(wt.fromString(t).popFirst(5))}static empty(){return new Q(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new wt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(e,t,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function wI(e,t,n,i){if(t===!0&&i===!0)throw new B(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function p_(e){if(!Q.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function y_(e){if(Q.isDocumentKey(e))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function X0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function qc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function tn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qc(e);throw new B(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e,t){const n={typeString:e};return t&&(n.value=t),n}function cl(e,t){if(!X0(e))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=-62135596800,v_=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(t){return Dt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*v_);return new Dt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<__)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v_}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(cl(t,Dt._jsonSchema))return new Dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-__;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:$t("string",Dt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new Dt(0,0))}static max(){return new $(new Dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=-1;function RI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=$.fromTimestamp(i===1e9?new Dt(n+1,0):new Dt(n,i));return new ss(s,Q.empty(),t)}function II(e){return new ss(e.readTime,e.key,Po)}class ss{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ss($.min(),Q.empty(),Po)}static max(){return new ss($.max(),Q.empty(),Po)}}function CI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==NI)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function xI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Hc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function hl(e){return e==null}function rc(e){return e===0&&1/e==-1/0}function OI(e){return typeof e=="number"&&Number.isInteger(e)&&!rc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="";function VI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=E_(t)),t=MI(e.get(n),t);return E_(t)}function MI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case $0:n+="";break;default:n+=r}}return n}function E_(e){return e+$0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ds(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Z0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t,n){this.comparator=t,this.root=n||ge.EMPTY}insert(t,n){return new Ut(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ge.BLACK,null,null))}remove(t){return new Ut(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ge.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jl(this.root,t,this.comparator,!0)}}class Jl{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ge{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??ge.RED,this.left=s??ge.EMPTY,this.right=r??ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new ge(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ge.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return ge.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}ge.EMPTY=null,ge.RED=!0,ge.BLACK=!1;ge.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new ge(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.comparator=t,this.data=new Ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(t){return new A_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ee)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ee(this.comparator);return n.data=t,n}}class A_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.fields=t,t.sort(ye.comparator)}static empty(){return new Xe([])}unionWith(t){let n=new ee(ye.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Jr(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new W0("Invalid base64 string: "+r):r}}(t);return new Ee(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new Ee(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ee.EMPTY_BYTE_STRING=new Ee("");const kI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=kI.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ft(e.seconds),nanos:Ft(e.nanos)}}function Ft(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function as(e){return typeof e=="string"?Ee.fromBase64String(e):Ee.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="server_timestamp",tA="__type__",eA="__previous_value__",nA="__local_write_time__";function Gm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[tA])==null?void 0:i.stringValue)===J0}function Fc(e){const t=e.mapValue.fields[eA];return Gm(t)?Fc(t):t}function Uo(e){const t=rs(e.mapValue.fields[nA].timestampValue);return new Dt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t,n,i,s,r,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const ac="(default)";class Lo{constructor(t,n){this.projectId=t,this.database=n||ac}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database===ac}isEqual(t){return t instanceof Lo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__type__",UI="__max__",tu={mapValue:{}},sA="__vector__",oc="value";function os(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gm(e)?4:jI(e)?9007199254740991:LI(e)?10:11:K(28295,{value:e})}function Un(e,t){if(e===t)return!0;const n=os(e);if(n!==os(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Uo(e).isEqual(Uo(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=rs(s.timestampValue),l=rs(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return as(s.bytesValue).isEqual(as(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Ft(s.geoPointValue.latitude)===Ft(r.geoPointValue.latitude)&&Ft(s.geoPointValue.longitude)===Ft(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ft(s.integerValue)===Ft(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Ft(s.doubleValue),l=Ft(r.doubleValue);return a===l?rc(a)===rc(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Jr(e.arrayValue.values||[],t.arrayValue.values||[],Un);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(T_(a)!==T_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function jo(e,t){return(e.values||[]).find(n=>Un(n,t))!==void 0}function ta(e,t){if(e===t)return 0;const n=os(e),i=os(t);if(n!==i)return ut(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=Ft(r.integerValue||r.doubleValue),u=Ft(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return S_(e.timestampValue,t.timestampValue);case 4:return S_(Uo(e),Uo(t));case 5:return Ed(e.stringValue,t.stringValue);case 6:return function(r,a){const l=as(r),u=as(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ut(l[h],u[h]);if(d!==0)return d}return ut(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=ut(Ft(r.latitude),Ft(a.latitude));return l!==0?l:ut(Ft(r.longitude),Ft(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return b_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var m,_,D,V;const l=r.fields||{},u=a.fields||{},h=(m=l[oc])==null?void 0:m.arrayValue,d=(_=u[oc])==null?void 0:_.arrayValue,g=ut(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:b_(h,d)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===tu.mapValue&&a===tu.mapValue)return 0;if(r===tu.mapValue)return 1;if(a===tu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Ed(u[g],d[g]);if(m!==0)return m;const _=ta(l[u[g]],h[d[g]]);if(_!==0)return _}return ut(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function S_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=rs(e),i=rs(t),s=ut(n.seconds,i.seconds);return s!==0?s:ut(n.nanos,i.nanos)}function b_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ta(n[s],i[s]);if(r)return r}return ut(n.length,i.length)}function ea(e){return Td(e)}function Td(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return as(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Td(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Td(n.fields[a])}`;return s+"}"}(e.mapValue):K(61005,{value:e})}function _u(e){switch(os(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fc(e);return t?16+_u(t):16;case 5:return 2*e.stringValue.length;case 6:return as(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+_u(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return ds(i.fields,(r,a)=>{s+=r.length+_u(a)}),s}(e.mapValue);default:throw K(13486,{value:e})}}function w_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ad(e){return!!e&&"integerValue"in e}function Qm(e){return!!e&&"arrayValue"in e}function R_(e){return!!e&&"nullValue"in e}function I_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vu(e){return!!e&&"mapValue"in e}function LI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[iA])==null?void 0:i.stringValue)===sA}function mo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ds(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=mo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mo(e.arrayValue.values[n]);return t}return{...e}}function jI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===UI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.value=t}static empty(){return new xe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!vu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=mo(n)}setAll(t){let n=ye.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=mo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Un(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];vu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){ds(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new xe(mo(this.value))}}function rA(e){const t=[];return ds(e.fields,(n,i)=>{const s=new ye([n]);if(vu(i)){const r=rA(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new Xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new le(t,0,$.min(),$.min(),$.min(),xe.empty(),0)}static newFoundDocument(t,n,i,s){return new le(t,1,n,$.min(),i,s,0)}static newNoDocument(t,n){return new le(t,2,n,$.min(),$.min(),xe.empty(),0)}static newUnknownDocument(t,n){return new le(t,3,n,$.min(),$.min(),xe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof le&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n){this.position=t,this.inclusive=n}}function C_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=ta(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function N_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Un(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,n="asc"){this.field=t,this.dir=n}}function zI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class Xt extends aA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new qI(t,n,i):n==="array-contains"?new GI(t,i):n==="in"?new QI(t,i):n==="not-in"?new YI(t,i):n==="array-contains-any"?new KI(t,i):new Xt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new HI(t,i):new FI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ta(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends aA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return oA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oA(e){return e.op==="and"}function lA(e){return BI(e)&&oA(e)}function BI(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function Sd(e){if(e instanceof Xt)return e.field.canonicalString()+e.op.toString()+ea(e.value);if(lA(e))return e.filters.map(t=>Sd(t)).join(",");{const t=e.filters.map(n=>Sd(n)).join(",");return`${e.op}(${t})`}}function uA(e,t){return e instanceof Xt?function(i,s){return s instanceof Xt&&i.op===s.op&&i.field.isEqual(s.field)&&Un(i.value,s.value)}(e,t):e instanceof An?function(i,s){return s instanceof An&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&uA(a,s.filters[l]),!0):!1}(e,t):void K(19439)}function cA(e){return e instanceof Xt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(cA).join(" ,")+"}"}(e):"Filter"}class qI extends Xt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class HI extends Xt{constructor(t,n){super(t,"in",n),this.keys=hA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class FI extends Xt{constructor(t,n){super(t,"not-in",n),this.keys=hA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function hA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class GI extends Xt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Qm(n)&&jo(n.arrayValue,this.value)}}class QI extends Xt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class YI extends Xt{constructor(t,n){super(t,"not-in",n)}matches(t){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jo(this.value.arrayValue,n)}}class KI extends Xt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>jo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function D_(e,t=null,n=[],i=[],s=null,r=null,a=null){return new XI(e,t,n,i,s,r,a)}function Ym(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Sd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),hl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ea(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ea(i)).join(",")),t.Te=n}return t.Te}function Km(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!uA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!N_(e.startAt,t.startAt)&&N_(e.endAt,t.endAt)}function bd(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $I(e,t,n,i,s,r,a,l){return new pa(e,t,n,i,s,r,a,l)}function Gc(e){return new pa(e)}function x_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function fA(e){return e.collectionGroup!==null}function go(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ee(ye.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new zo(r,i))}),n.has(ye.keyField().canonicalString())||t.Ie.push(new zo(ye.keyField(),i))}return t.Ie}function On(e){const t=J(e);return t.Ee||(t.Ee=ZI(t,go(e))),t.Ee}function ZI(e,t){if(e.limitType==="F")return D_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new zo(s.field,r)});const n=e.endAt?new lc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lc(e.startAt.position,e.startAt.inclusive):null;return D_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function wd(e,t){const n=e.filters.concat([t]);return new pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Rd(e,t,n){return new pa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qc(e,t){return Km(On(e),On(t))&&e.limitType===t.limitType}function dA(e){return`${Ym(On(e))}|lt:${e.limitType}`}function cr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>cA(s)).join(", ")}]`),hl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${i})`}(On(e))}; limitType=${e.limitType})`}function Yc(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Q.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of go(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=C_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,go(i),s)||i.endAt&&!function(a,l,u){const h=C_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,go(i),s))}(e,t)}function WI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mA(e){return(t,n)=>{let i=!1;for(const s of go(e)){const r=JI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function JI(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?ta(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ds(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return Z0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Ut(Q.comparator);function ci(){return tC}const gA=new Ut(Q.comparator);function Ka(...e){let t=gA;for(const n of e)t=t.insert(n.key,n);return t}function pA(e){let t=gA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Rs(){return po()}function yA(){return po()}function po(){return new Ks(e=>e.toString(),(e,t)=>e.isEqual(t))}const eC=new Ut(Q.comparator),nC=new ee(Q.comparator);function ct(...e){let t=nC;for(const n of e)t=t.add(n);return t}const iC=new ee(ut);function sC(){return iC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(t)?"-0":t}}function _A(e){return{integerValue:""+e}}function rC(e,t){return OI(t)?_A(t):Xm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function aC(e,t,n){return e instanceof Bo?function(s,r){const a={fields:{[tA]:{stringValue:J0},[nA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Gm(r)&&(r=Fc(r)),r&&(a.fields[eA]=r),{mapValue:a}}(n,t):e instanceof qo?EA(e,t):e instanceof Ho?TA(e,t):function(s,r){const a=vA(s,r),l=O_(a)+O_(s.Ae);return Ad(a)&&Ad(s.Ae)?_A(l):Xm(s.serializer,l)}(e,t)}function oC(e,t,n){return e instanceof qo?EA(e,t):e instanceof Ho?TA(e,t):n}function vA(e,t){return e instanceof uc?function(i){return Ad(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class Bo extends Kc{}class qo extends Kc{constructor(t){super(),this.elements=t}}function EA(e,t){const n=AA(t);for(const i of e.elements)n.some(s=>Un(s,i))||n.push(i);return{arrayValue:{values:n}}}class Ho extends Kc{constructor(t){super(),this.elements=t}}function TA(e,t){let n=AA(t);for(const i of e.elements)n=n.filter(s=>!Un(s,i));return{arrayValue:{values:n}}}class uc extends Kc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function O_(e){return Ft(e.integerValue||e.doubleValue)}function AA(e){return Qm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t,n){this.field=t,this.transform=n}}function uC(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof qo&&s instanceof qo||i instanceof Ho&&s instanceof Ho?Jr(i.elements,s.elements,Un):i instanceof uc&&s instanceof uc?Un(i.Ae,s.Ae):i instanceof Bo&&s instanceof Bo}(e.transform,t.transform)}class cC{constructor(t,n){this.version=t,this.transformResults=n}}class _e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new _e}static exists(t){return new _e(void 0,t)}static updateTime(t){return new _e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Eu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xc{}function SA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new $c(e.key,_e.none()):new fl(e.key,e.data,_e.none());{const n=e.data,i=xe.empty();let s=new ee(ye.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new ms(e.key,i,new Xe(s.toArray()),_e.none())}}function hC(e,t,n){e instanceof fl?function(s,r,a){const l=s.value.clone(),u=M_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof ms?function(s,r,a){if(!Eu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=M_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(bA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function yo(e,t,n,i){return e instanceof fl?function(r,a,l,u){if(!Eu(r.precondition,a))return l;const h=r.value.clone(),d=k_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof ms?function(r,a,l,u){if(!Eu(r.precondition,a))return l;const h=k_(r.fieldTransforms,u,a),d=a.data;return d.setAll(bA(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return Eu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function fC(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=vA(i.transform,s||null);r!=null&&(n===null&&(n=xe.empty()),n.set(i.field,r))}return n||null}function V_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Jr(i,s,(r,a)=>uC(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fl extends Xc{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ms extends Xc{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function bA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function M_(e,t,n){const i=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,oC(a,l,n[s]))}return i}function k_(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,aC(r,a,t))}return i}class $c extends Xc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Xc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&hC(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=yA();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=SA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ct())}isEqual(t){return this.batchId===t.batchId&&Jr(this.mutations,t.mutations,(n,i)=>V_(n,i))&&Jr(this.baseMutations,t.baseMutations,(n,i)=>V_(n,i))}}class $m{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){mt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return eC}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new $m(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,ft;function RA(e){switch(e){case k.OK:return K(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function IA(e){if(e===void 0)return ui("GRPC error has no .code"),k.UNKNOWN;switch(e){case Yt.OK:return k.OK;case Yt.CANCELLED:return k.CANCELLED;case Yt.UNKNOWN:return k.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return k.INTERNAL;case Yt.UNAVAILABLE:return k.UNAVAILABLE;case Yt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Yt.NOT_FOUND:return k.NOT_FOUND;case Yt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Yt.ABORTED:return k.ABORTED;case Yt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Yt.DATA_LOSS:return k.DATA_LOSS;default:return K(39323,{code:e})}}(ft=Yt||(Yt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Zi([4294967295,4294967295],0);function P_(e){const t=pC().encode(e),n=new z0;return n.update(t),new Uint8Array(n.digest())}function U_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Zi([n,i],0),new Zi([s,r],0)]}class Zm{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(i<0)throw new Xa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Zi.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(Zi.fromNumber(i)));return s.compare(yC)===1&&(s=new Zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=P_(t),[i,s]=U_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Zm(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=P_(t),[i,s]=U_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,dl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Zc($.min(),s,new Ut(ut),ci(),ct())}}class dl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new dl(i,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class CA{constructor(t,n){this.targetId=t,this.Ce=n}}class NA{constructor(t,n,i=Ee.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class L_{constructor(){this.ve=0,this.Fe=j_(),this.Me=Ee.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ct(),n=ct(),i=ct();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:K(38017,{changeType:r})}}),new dl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=j_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _C{constructor(t){this.Ge=t,this.ze=new Map,this.je=ci(),this.Je=eu(),this.He=eu(),this.Ye=new Ut(ut)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(bd(r))if(i===0){const a=new Q(r.path);this.et(n,a,le.newNoDocument(a,$.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=as(i).toUint8Array()}catch(u){if(u instanceof W0)return Wr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zm(a,s,r)}catch(u){return Wr(u instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&bd(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,le.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=ct();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new Zc(t,n,this.Ye,this.je,i);return this.je=ci(),this.Je=eu(),this.He=eu(),this.Ye=new Ut(ut),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new L_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ee(ut),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ee(ut),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new L_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function eu(){return new Ut(Q.comparator)}function j_(){return new Ut(Q.comparator)}const vC={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TC={and:"AND",or:"OR"};class AC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Id(e,t){return e.useProto3Json||hl(t)?t:{value:t}}function cc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function SC(e,t){return cc(e,t.toTimestamp())}function en(e){return mt(!!e,49232),$.fromTimestamp(function(n){const i=rs(n);return new Dt(i.seconds,i.nanos)}(e))}function Wm(e,t){return Cd(e,t).canonicalString()}function Cd(e,t){const n=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function xA(e){const t=wt.fromString(e);return mt(UA(t),10190,{key:t.toString()}),t}function hc(e,t){return Wm(e.databaseId,t.path)}function _o(e,t){const n=xA(t);if(n.get(1)!==e.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(VA(n))}function OA(e,t){return Wm(e.databaseId,t)}function bC(e){const t=xA(e);return t.length===4?wt.emptyPath():VA(t)}function Nd(e){return new wt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function VA(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function z_(e,t,n){return{name:hc(e,t),fields:n.value.mapValue.fields}}function wC(e,t){return"found"in t?function(i,s){mt(!!s.found,43571),s.found.name,s.found.updateTime;const r=_o(i,s.found.name),a=en(s.found.updateTime),l=s.found.createTime?en(s.found.createTime):$.min(),u=new xe({mapValue:{fields:s.found.fields}});return le.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){mt(!!s.missing,3894),mt(!!s.readTime,22933);const r=_o(i,s.missing),a=en(s.readTime);return le.newNoDocument(r,a)}(e,t):K(7234,{result:t})}function RC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(mt(d===void 0||typeof d=="string",58123),Ee.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ee.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:IA(h.code);return new B(d,h.message||"")}(a);n=new NA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=_o(e,i.document.name),r=en(i.document.updateTime),a=i.document.createTime?en(i.document.createTime):$.min(),l=new xe({mapValue:{fields:i.document.fields}}),u=le.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Tu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=_o(e,i.document),r=i.readTime?en(i.readTime):$.min(),a=le.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Tu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=_o(e,i.document),r=i.removedTargetIds||[];n=new Tu([],r,s,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new gC(s,r),l=i.targetId;n=new CA(l,a)}}return n}function MA(e,t){let n;if(t instanceof fl)n={update:z_(e,t.key,t.value)};else if(t instanceof $c)n={delete:hc(e,t.key)};else if(t instanceof ms)n={update:z_(e,t.key,t.data),updateMask:kC(t.fieldMask)};else{if(!(t instanceof wA))return K(16599,{Vt:t.type});n={verify:hc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof Bo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ho)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:SC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:K(27497)}(e,t.precondition)),n}function IC(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?en(s.updateTime):en(r);return a.isEqual($.min())&&(a=en(r)),new cC(a,s.transformResults||[])}(n,t))):[]}function CC(e,t){return{documents:[OA(e,t.path)]}}function NC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=OA(e,s);const r=function(h){if(h.length!==0)return PA(An.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:hr(m.field),direction:OC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Id(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function DC(e){let t=bC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){mt(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(g){const m=kA(g);return m instanceof An&&lA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(D){return new zo(fr(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,hl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new lc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new lc(_,m)}(n.endAt)),$I(t,s,a,r,l,"F",u,h)}function xC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function kA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fr(n.unaryFilter.field);return Xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=fr(n.unaryFilter.field);return Xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fr(n.unaryFilter.field);return Xt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fr(n.unaryFilter.field);return Xt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return Xt.create(fr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>kA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function OC(e){return vC[e]}function VC(e){return EC[e]}function MC(e){return TC[e]}function hr(e){return{fieldPath:e.canonicalString()}}function fr(e){return ye.fromServerFormat(e.fieldPath)}function PA(e){return e instanceof Xt?function(n){if(n.op==="=="){if(I_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NAN"}};if(R_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NAN"}};if(R_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hr(n.field),op:VC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(s=>PA(s));return i.length===1?i[0]:{compositeFilter:{op:MC(n.op),filters:i}}}(e):K(54877,{filter:e})}function kC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function UA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n,i,s,r=$.min(),a=$.min(),l=Ee.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new ji(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(t){this.yt=t}}function UC(e){const t=DC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Rd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.Cn=new jC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ss.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ss.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class jC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new ee(wt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new ee(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LA=41943040;class Le{static withCacheSize(t){return new Le(t,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(LA,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="LruGarbageCollector",zC=1048576;function H_([e,t],[n,i]){const s=ut(e,n);return s===0?ut(t,i):s}class BC{constructor(t){this.Ir=t,this.buffer=new ee(H_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();H_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(q_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ga(n)?H(q_,"Ignoring IndexedDB error during garbage collection: ",n):await ma(n)}await this.Vr(3e5)})}}class HC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Hc.ce);const i=new BC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(B_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),ur()<=lt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function FC(e,t){return new HC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new Ks(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,le.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&yo(i.mutation,s,Xe.empty(),Dt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ct()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ct()){const s=Rs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=Ka();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Rs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ct()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=ci();const a=po(),l=function(){return po()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof ms)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),yo(d.mutation,h,d.mutation.getFieldMask(),Dt.now())):a.set(h.key,Xe.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new QC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=po();let s=new Ut((a,l)=>a-l),r=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Xe.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(s.get(l.batchId)||ct()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=yA();d.forEach(m=>{if(!r.has(m)){const _=SA(n.get(m),i.get(m));_!==null&&g.set(m,_),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):fA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(Rs());let l=Po,u=r;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,ct())).next(d=>({batchId:l,changes:pA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=Ka();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,m){return new pa(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,le.newInvalidDocument(d)))});let l=Ka();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&yo(d.mutation,h,Xe.empty(),Dt.now()),Yc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:en(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:UC(s.bundledQuery),readTime:en(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.overlays=new Ut(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Rs();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=Rs(),r=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Ut((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=Rs(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Rs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new mC(n,i));let r=this.qr.get(n);r===void 0&&(r=ct(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.sessionToken=Ee.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Qr=new ee(re.$r),this.Ur=new ee(re.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new re(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new re(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new wt([])),i=new re(n,t),s=new re(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new wt([])),i=new re(n,t),s=new re(n,t+1);let r=ct();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new re(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class re{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||ut(t.Yr,n.Yr)}static Kr(t,n){return ut(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ee(re.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new re(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Fm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new re(n,0),s=new re(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ee(ut);return n.forEach(s=>{const r=new re(s,0),a=new re(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;Q.isDocumentKey(r)||(r=r.child(""));const a=new re(new Q(r),0);let l=new ee(ut);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new re(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new re(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.ri=t,this.docs=function(){return new Ut(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():le.newInvalidDocument(n))}getEntries(t,n){let i=ci();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():le.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=ci();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||CI(II(d),i)<=0||(s.has(d.key)||Yc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){K(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new JC(this)}getSize(t){return P.resolve(this.size)}}class JC extends GC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t){this.persistence=t,this.si=new Ks(n=>Ym(n),Km),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new Jm,this.targetCount=0,this.ai=na.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Hc(0),this.li=!1,this.li=!0,this.hi=new $C,this.referenceDelegate=t(this),this.Pi=new tN(this),this.indexManager=new LC,this.remoteDocumentCache=function(s){return new WC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new PC(n),this.Ii=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new XC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new ZC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const s=new eN(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class eN extends DI{constructor(t){super(),this.currentSequenceNumber=t}}class tg{constructor(t){this.persistence=t,this.Ri=new Jm,this.Vi=null}static mi(t){return new tg(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=Q.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class fc{constructor(t,n){this.persistence=t,this.pi=new Ks(i=>VI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=FC(this,n)}static mi(t,n){return new fc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,$.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=_u(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=ct(),s=ct();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new eg(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return XR()?8:xI(Ce())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new nN;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(ur()<=lt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",cr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ur()<=lt.DEBUG&&H("QueryEngine","Query:",cr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(ur()<=lt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",cr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,On(n))):P.resolve())}ys(t,n){if(x_(n))return P.resolve(null);let i=On(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rd(n,null,"F"),i=On(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=ct(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Rd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return x_(n)||s.isEqual($.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(ur()<=lt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cr(n)),this.vs(t,a,n,RI(s,Po)).next(l=>l))})}Ds(t,n){let i=new ee(mA(t));return n.forEach((s,r)=>{Yc(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return ur()<=lt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",cr(n)),this.ps.getDocumentsMatchingQuery(t,n,ss.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="LocalStore",sN=3e8;class rN{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Ut(ut),this.xs=new Ks(r=>Ym(r),Km),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new YC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function aN(e,t,n,i){return new rN(e,t,n,i)}async function zA(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=ct();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function oN(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(D=>{_=_.next(()=>d.getEntry(u,D)).next(V=>{const M=h.docVersions.get(D);mt(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ct();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function BA(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function lN(e,t){const n=J(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=s.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,d.addedDocuments,g)));let _=m.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Ee.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(g,_),function(V,M,S){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=sN?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(r,_))});let u=ci(),h=ct();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(uN(r,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function uN(e,t,n){let i=ct(),s=ct();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=ci();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(ng,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function cN(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Fm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function hN(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new ji(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Dd(e,t,n){const i=J(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ga(a))throw a;H(ng,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function F_(e,t,n){const i=J(e);let s=$.min(),r=ct();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,On(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:$.min(),n?r:ct())).next(l=>(fN(i,WI(t),l),{documents:l,Qs:r})))}function fN(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class G_{constructor(){this.activeTargetIds=sC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dN{constructor(){this.Mo=new G_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new G_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="ConnectivityMonitor";class Y_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Q_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(Q_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu=null;function xd(){return nu===null?nu=function(){return 268435456+Math.round(2147483648*Math.random())}():nu++,"0x"+nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="RestConnection",gN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===ac?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=xd(),l=this.zo(t,n.toUriEncodedString());H(mf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),d=ha(h);return this.Jo(t,l,u,i,d).then(g=>(H(mf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Wr(mf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=gN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se="WebChannelConnection";class _N extends pN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=xd();return new Promise((l,u)=>{const h=new B0;h.setWithCredentials(!0),h.listenOnce(q0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case yu.NO_ERROR:const g=h.getResponseJson();H(Se,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case yu.TIMEOUT:H(Se,`RPC '${t}' ${a} timed out`),u(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:const m=h.getStatus();if(H(Se,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const D=_==null?void 0:_.error;if(D&&D.status&&D.message){const V=function(S){const v=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(v)>=0?v:k.UNKNOWN}(D.status);u(new B(V,D.message))}else u(new B(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(k.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Se,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);H(Se,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,i,15)})}T_(t,n,i){const s=xd(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=G0(),l=F0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");H(Se,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const D=new yN({Yo:M=>{_?H(Se,`Not sending because RPC '${t}' stream ${s} is closed:`,M):(m||(H(Se,`Opening RPC '${t}' stream ${s} transport.`),g.open(),m=!0),H(Se,`RPC '${t}' stream ${s} sending:`,M),g.send(M))},Zo:()=>g.close()}),V=(M,S,v)=>{M.listen(S,R=>{try{v(R)}catch(x){setTimeout(()=>{throw x},0)}})};return V(g,Ya.EventType.OPEN,()=>{_||(H(Se,`RPC '${t}' stream ${s} transport opened.`),D.o_())}),V(g,Ya.EventType.CLOSE,()=>{_||(_=!0,H(Se,`RPC '${t}' stream ${s} transport closed`),D.a_(),this.E_(g))}),V(g,Ya.EventType.ERROR,M=>{_||(_=!0,Wr(Se,`RPC '${t}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new B(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,Ya.EventType.MESSAGE,M=>{var S;if(!_){const v=M.data[0];mt(!!v,16349);const R=v,x=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(x){H(Se,`RPC '${t}' stream ${s} received error:`,x);const L=x.status;let q=function(E){const b=Yt[E];if(b!==void 0)return IA(b)}(L),T=x.message;q===void 0&&(q=k.INTERNAL,T="Unknown error status: "+L+" with message "+x.message),_=!0,D.a_(new B(q,T)),g.close()}else H(Se,`RPC '${t}' stream ${s} received:`,v),D.u_(v)}}),V(l,H0.STAT_EVENT,M=>{M.stat===vd.PROXY?H(Se,`RPC '${t}' stream ${s} detected buffering proxy`):M.stat===vd.NOPROXY&&H(Se,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(e){return new AC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class qA{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ig(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new B(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(K_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vN extends qA{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=RC(this.serializer,t),i=function(r){if(!("targetChange"in r))return $.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?en(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Nd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=bd(u)?{documents:CC(r,u)}:{query:NC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=DA(r,a.resumeToken);const h=Id(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=cc(r,a.snapshotVersion.toTimestamp());const h=Id(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=xC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Nd(this.serializer),n.removeTarget=t,this.q_(n)}}class EN extends qA{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=IC(t.writeResults,t.commitTime),i=en(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Nd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>MA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{}class AN extends TN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,Cd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(k.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Cd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class SN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ui(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class bN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Xs(this)&&(H(Bs,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await ml(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Jc(h)}(this))})}),this.Ra=new SN(i,s)}}async function Jc(e){if(Xs(e))for(const t of e.da)await t(!0)}async function ml(e){for(const t of e.da)await t(!1)}function HA(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),og(n)?ag(n):ya(n).O_()&&rg(n,t))}function sg(e,t){const n=J(e),i=ya(n);n.Ia.delete(t),i.O_()&&FA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Xs(n)&&n.Ra.set("Unknown"))}function rg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ya(e).Y_(t)}function FA(e,t){e.Va.Ue(t),ya(e).Z_(t)}function ag(e){e.Va=new _C({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ya(e).start(),e.Ra.ua()}function og(e){return Xs(e)&&!ya(e).x_()&&e.Ia.size>0}function Xs(e){return J(e).Ea.size===0}function GA(e){e.Va=void 0}async function wN(e){e.Ra.set("Online")}async function RN(e){e.Ia.forEach((t,n)=>{rg(e,t)})}async function IN(e,t){GA(e),og(e)?(e.Ra.ha(t),ag(e)):e.Ra.set("Unknown")}async function CN(e,t,n){if(e.Ra.set("Online"),t instanceof NA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){H(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await dc(e,i)}else if(t instanceof Tu?e.Va.Ze(t):t instanceof CA?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await BA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(h);d&&r.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(Ee.EMPTY_BYTE_STRING,d.snapshotVersion)),FA(r,u);const g=new ji(d.target,u,h,d.sequenceNumber);rg(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Bs,"Failed to raise snapshot:",i),await dc(e,i)}}async function dc(e,t,n){if(!ga(t))throw t;e.Ea.add(1),await ml(e),e.Ra.set("Offline"),n||(n=()=>BA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Bs,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Jc(e)})}function QA(e,t){return t().catch(n=>dc(e,n,t))}async function th(e){const t=J(e),n=ls(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Fm;for(;NN(t);)try{const s=await cN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,DN(t,s)}catch(s){await dc(t,s)}YA(t)&&KA(t)}function NN(e){return Xs(e)&&e.Ta.length<10}function DN(e,t){e.Ta.push(t);const n=ls(e);n.O_()&&n.X_&&n.ea(t.mutations)}function YA(e){return Xs(e)&&!ls(e).x_()&&e.Ta.length>0}function KA(e){ls(e).start()}async function xN(e){ls(e).ra()}async function ON(e){const t=ls(e);for(const n of e.Ta)t.ea(n.mutations)}async function VN(e,t,n){const i=e.Ta.shift(),s=$m.from(i,t,n);await QA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await th(e)}async function MN(e,t){t&&ls(e).X_&&await async function(i,s){if(function(a){return RA(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();ls(i).B_(),await QA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await th(i)}}(e,t),YA(e)&&KA(e)}async function X_(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),H(Bs,"RemoteStore received new credentials");const i=Xs(n);n.Ea.add(3),await ml(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Jc(n)}async function kN(e,t){const n=J(e);t?(n.Ea.delete(2),await Jc(n)):t||(n.Ea.add(2),await ml(n),n.Ra.set("Unknown"))}function ya(e){return e.ma||(e.ma=function(n,i,s){const r=J(n);return r.sa(),new vN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:wN.bind(null,e),t_:RN.bind(null,e),r_:IN.bind(null,e),H_:CN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),og(e)?ag(e):e.Ra.set("Unknown")):(await e.ma.stop(),GA(e))})),e.ma}function ls(e){return e.fa||(e.fa=function(n,i,s){const r=J(n);return r.sa(),new EN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:xN.bind(null,e),r_:MN.bind(null,e),ta:ON.bind(null,e),na:VN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await th(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Bs,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new lg(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(e,t){if(ui("AsyncQueue",`${t}: ${e}`),ga(e))return new B(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{static emptySet(t){return new kr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Ut(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof kr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new kr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.ga=new Ut(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class ia{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ia(t,n,kr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class UN{constructor(){this.queries=Z_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=J(n),r=s.queries;s.queries=Z_(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new B(k.ABORTED,"Firestore shutting down"))}}function Z_(){return new Ks(e=>dA(e),Qc)}async function XA(e,t){const n=J(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new PN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ug(a,`Initialization of query '${cr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&cg(n)}async function $A(e,t){const n=J(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function LN(e,t){const n=J(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&cg(n)}function jN(e,t,n){const i=J(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function cg(e){e.Ca.forEach(t=>{t.next()})}var Od,W_;(W_=Od||(Od={})).Ma="default",W_.Cache="cache";class ZA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new ia(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ia.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t){this.key=t}}class JA{constructor(t){this.key=t}}class zN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=mA(t),this.tu=new kr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new $_,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,g)=>{const m=s.get(d),_=Yc(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?D!==V&&(i.track({type:3,doc:_}),M=!0):this.su(m,_)||(i.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(_?(a=a.add(_),r=V?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:M})}};return V(_)-V(D)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new ia(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ct(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new JA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new WA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ct();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hg="SyncEngine";class BN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class qN{constructor(t){this.key=t,this.hu=!1}}class HN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ks(l=>dA(l),Qc),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Q.comparator),this.Au=new Map,this.Ru=new Jm,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FN(e,t,n=!0){const i=rS(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await tS(i,t,n,!0),s}async function GN(e,t){const n=rS(e);await tS(n,t,!0,!1)}async function tS(e,t,n,i){const s=await hN(e.localStore,On(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await QN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&HA(e.remoteStore,s),l}async function QN(e,t,n,i,s){e.pu=(g,m,_)=>async function(V,M,S,v){let R=M.view.ru(S);R.Cs&&(R=await F_(V.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,R)));const x=v&&v.targetChanges.get(M.targetId),L=v&&v.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(R,V.isPrimaryClient,x,L);return tv(V,M.targetId,q.au),q.snapshot}(e,g,m,_);const r=await F_(e.localStore,t,!0),a=new zN(t,r.Qs),l=a.ru(r.documents),u=dl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);tv(e,n,h.au);const d=new BN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function YN(e,t,n){const i=J(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!Qc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Dd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&sg(i.remoteStore,s.targetId),Vd(i,s.targetId)}).catch(ma)):(Vd(i,s.targetId),await Dd(i.localStore,s.targetId,!0))}async function KN(e,t){const n=J(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sg(n.remoteStore,i.targetId))}async function XN(e,t,n){const i=nD(e);try{const s=await function(a,l){const u=J(a),h=Dt.now(),d=l.reduce((_,D)=>_.add(D.key),ct());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=ci(),V=ct();return u.Ns.getEntries(_,d).next(M=>{D=M,D.forEach((S,v)=>{v.isValidDocument()||(V=V.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,D)).next(M=>{g=M;const S=[];for(const v of l){const R=fC(v,g.get(v.key).overlayedDocument);R!=null&&S.push(new ms(v.key,R,rA(R.value.mapValue),_e.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(M=>{m=M;const S=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,M.batchId,S)})}).then(()=>({batchId:m.batchId,changes:pA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ut(ut)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await gl(i,s.changes),await th(i.remoteStore)}catch(s){const r=ug(s,"Failed to persist write");n.reject(r)}}async function eS(e,t){const n=J(e);try{const i=await lN(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?mt(a.hu,14607):s.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await gl(n,i,t)}catch(i){await ma(i)}}function J_(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&cg(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function $N(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Ut(Q.comparator);a=a.insert(r,le.newNoDocument(r,$.min()));const l=ct().add(r),u=new Zc($.min(),new Map,new Ut(ut),a,l);await eS(i,u),i.du=i.du.remove(r),i.Au.delete(t),fg(i)}else await Dd(i.localStore,t,!1).then(()=>Vd(i,t,n)).catch(ma)}async function ZN(e,t){const n=J(e),i=t.batch.batchId;try{const s=await oN(n.localStore,t);iS(n,i,null),nS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await gl(n,s)}catch(s){await ma(s)}}async function WN(e,t,n){const i=J(e);try{const s=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(mt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);iS(i,t,n),nS(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await gl(i,s)}catch(s){await ma(s)}}function nS(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function iS(e,t,n){const i=J(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Vd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||sS(e,i)})}function sS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(sg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),fg(e))}function tv(e,t,n){for(const i of n)i instanceof WA?(e.Ru.addReference(i.key,t),JN(e,i)):i instanceof JA?(H(hg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||sS(e,i.key)):K(19791,{wu:i})}function JN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(hg,"New document in limbo: "+n),e.Eu.add(i),fg(e))}function fg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(wt.fromString(t)),i=e.fu.next();e.Au.set(i,new qN(n)),e.du=e.du.insert(n,i),HA(e.remoteStore,new ji(On(Gc(n.path)),i,"TargetPurposeLimboResolution",Hc.ce))}}async function gl(e,t,n){const i=J(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=eg.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!ga(g))throw g;H(ng,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),D=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,r))}async function tD(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){H(hg,"User change. New user:",t.toKey());const i=await zA(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await gl(n,i.Ls)}}function eD(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return ct().add(i.key);{let s=ct();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function rS(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=eS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$N.bind(null,t),t.Pu.H_=LN.bind(null,t.eventManager),t.Pu.yu=jN.bind(null,t.eventManager),t}function nD(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WN.bind(null,t),t}class mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return aN(this.persistence,new iN,t.initialUser,this.serializer)}Cu(t){return new jA(tg.mi,this.serializer)}Du(t){return new dN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mc.provider={build:()=>new mc};class iD extends mc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof fc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new jA(i=>fc.mi(i,n),this.serializer)}}class Md{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>J_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,this.syncEngine),await kN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new UN}()}createDatastore(t){const n=Wc(t.databaseInfo.databaseId),i=function(r){return new _N(r)}(t.databaseInfo);return function(r,a,l,u){return new AN(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new bN(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>J_(this.syncEngine,n,0),function(){return Y_.v()?new Y_:new mN}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,d){const g=new HN(s,r,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=J(s);H(Bs,"RemoteStore shutting down."),r.Ea.add(5),await ml(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Md.provider={build:()=>new Md};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ui("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=J(s),l={documents:r.map(g=>hc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,wt.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const m=wC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return r.forEach(g=>{const m=h.get(g.toString());mt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new $c(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=Q.fromPath(i);this.mutations.push(new wA(s,this.precondition(s)))}),await async function(i,s){const r=J(i),a={writes:s.map(l=>MA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,wt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K(50498,{Gu:t.constructor.name});n=$.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new B(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual($.min())?_e.exists(!1):_e.updateTime(n):_e.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual($.min()))throw new B(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _e.updateTime(n)}return _e.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new ig(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new sD(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!hl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!RA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class aD{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=we.UNAUTHENTICATED,this.clientId=Hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{H(us,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(us,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=ug(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function pf(e,t){e.asyncQueue.verifyOperationInProgress(),H(us,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await zA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ev(e,t){e.asyncQueue.verifyOperationInProgress();const n=await oD(e);H(us,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>X_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>X_(t.remoteStore,s)),e._onlineComponents=t}async function oD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(us,"Using user provided OfflineComponentProvider");try{await pf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wr("Error using user provided cache. Falling back to memory cache: "+n),await pf(e,new mc)}}else H(us,"Using default OfflineComponentProvider"),await pf(e,new iD(void 0));return e._offlineComponents}async function dg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(us,"Using user provided OnlineComponentProvider"),await ev(e,e._uninitializedComponentsProvider._online)):(H(us,"Using default OnlineComponentProvider"),await ev(e,new Md))),e._onlineComponents}function lD(e){return dg(e).then(t=>t.syncEngine)}function uD(e){return dg(e).then(t=>t.datastore)}async function kd(e){const t=await dg(e),n=t.eventManager;return n.onListen=FN.bind(null,t.syncEngine),n.onUnlisten=YN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=GN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=KN.bind(null,t.syncEngine),n}function cD(e,t,n={}){const i=new ii;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new aS({next:m=>{d.Nu(),a.enqueueAndForget(()=>$A(r,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new ZA(Gc(l.path),d,{includeMetadataChanges:!0,qa:!0});return XA(r,g)}(await kd(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firestore.googleapis.com",iv=!0;class sv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lS,this.ssl=iv}else this.host=t.host,this.ssl=t.ssl??iv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=LA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<zC)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class eh{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gI;switch(i.type){case"firstParty":return new vI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=nv.get(n);i&&(H("ComponentProvider","Removing Datastore"),nv.delete(n),i.terminate())}(this),Promise.resolve()}}function hD(e,t,n,i={}){var h;e=tn(e,eh);const s=ha(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(O0(`https://${l}`),V0("Firestore",!0)),r.host!==lS&&r.host!==l&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Ls(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=we.MOCK_USER;else{d=zR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new we(m)}e._authCredentials=new pI(new Y0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new $s(this.firestore,t,this._query)}}class Pt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pt(this.firestore,t,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(cl(n,Pt._jsonSchema))return new Pt(t,i||null,new Q(wt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:$t("string",Pt._jsonSchemaVersion),referencePath:$t("string")};class Wi extends $s{constructor(t,n,i){super(t,n,Gc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pt(this.firestore,null,new Q(t))}withConverter(t){return new Wi(this.firestore,t,this._path)}}function rv(e,t,...n){if(e=he(e),K0("collection","path",t),e instanceof eh){const i=wt.fromString(t,...n);return y_(i),new Wi(e,null,i)}{if(!(e instanceof Pt||e instanceof Wi))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(wt.fromString(t,...n));return y_(i),new Wi(e.firestore,null,i)}}function je(e,t,...n){if(e=he(e),arguments.length===1&&(t=Hm.newId()),K0("doc","path",t),e instanceof eh){const i=wt.fromString(t,...n);return p_(i),new Pt(e,null,new Q(i))}{if(!(e instanceof Pt||e instanceof Wi))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(wt.fromString(t,...n));return p_(i),new Pt(e.firestore,e instanceof Wi?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="AsyncQueue";class ov{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ig(this,"async_queue_retry"),this._c=()=>{const i=gf();i&&H(av,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ii;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ga(t))throw t;H(av,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,ui("INTERNAL UNHANDLED ERROR: ",lv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=lg.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&K(47125,{Pc:lv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function lv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class hi extends eh{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new ov,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ov(t),this._firestoreClient=void 0,await t}}}function fD(e,t){const n=typeof e=="object"?e:U0(),i=typeof e=="string"?e:ac,s=Bm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=LR("firestore");r&&hD(s,...r)}return s}function nh(e){if(e._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dD(e),e._firestoreClient}function dD(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,d){return new PI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,oS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new aD(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ke(Ee.fromBase64String(t))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ke(Ee.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ke._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(cl(t,Ke._jsonSchema))return Ke.fromBase64String(t.bytes)}}Ke._jsonSchemaVersion="firestore/bytes/1.0",Ke._jsonSchema={type:$t("string",Ke._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(t){if(cl(t,Vn._jsonSchema))return new Vn(t.latitude,t.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:$t("string",Vn._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(cl(t,Mn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Mn(t.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:$t("string",Mn._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=/^__.*__$/;class gD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ms(t,this.data,this.fieldMask,n,this.fieldTransforms):new fl(t,this.data,n,this.fieldTransforms)}}class uS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ms(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function cS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class mg{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new mg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return gc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(cS(this.Ac)&&mD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class pD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Wc(t)}Cc(t,n,i,s=!1){return new mg({Ac:t,methodName:n,Dc:i,path:ye.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yl(e){const t=e._freezeSettings(),n=Wc(e._databaseId);return new pD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gg(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);yg("Data must be an object, but it was:",a,i);const l=dS(i,a);let u,h;if(r.merge)u=new Xe(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const m=Pd(t,g,n);if(!a.contains(m))throw new B(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gS(d,m)||d.push(m)}u=new Xe(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new gD(new xe(l),u,h)}class sh extends ih{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sh}}class pg extends ih{_toFieldTransform(t){return new lC(t.path,new Bo)}isEqual(t){return t instanceof pg}}function hS(e,t,n,i){const s=e.Cc(1,t,n);yg("Data must be an object, but it was:",s,i);const r=[],a=xe.empty();ds(i,(u,h)=>{const d=_g(t,u,n);h=he(h);const g=s.yc(d);if(h instanceof sh)r.push(d);else{const m=_l(h,g);m!=null&&(r.push(d),a.set(d,m))}});const l=new Xe(r);return new uS(a,l,s.fieldTransforms)}function fS(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[Pd(t,i,n)],u=[s];if(r.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(Pd(t,r[m])),u.push(r[m+1]);const h=[],d=xe.empty();for(let m=l.length-1;m>=0;--m)if(!gS(h,l[m])){const _=l[m];let D=u[m];D=he(D);const V=a.yc(_);if(D instanceof sh)h.push(_);else{const M=_l(D,V);M!=null&&(h.push(_),d.set(_,M))}}const g=new Xe(h);return new uS(d,g,a.fieldTransforms)}function yD(e,t,n,i=!1){return _l(n,e.Cc(i?4:3,t))}function _l(e,t){if(mS(e=he(e)))return yg("Unsupported field value:",t,e),dS(e,t);if(e instanceof ih)return function(i,s){if(!cS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=_l(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=he(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Dt.fromDate(i);return{timestampValue:cc(s.serializer,r)}}if(i instanceof Dt){const r=new Dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cc(s.serializer,r)}}if(i instanceof Vn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ke)return{bytesValue:DA(s.serializer,i._byteString)};if(i instanceof Pt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Wm(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Mn)return function(a,l){return{mapValue:{fields:{[iA]:{stringValue:sA},[oc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Xm(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${qc(i)}`)}(e,t)}function dS(e,t){const n={};return Z0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ds(e,(i,s)=>{const r=_l(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function mS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Dt||e instanceof Vn||e instanceof Ke||e instanceof Pt||e instanceof ih||e instanceof Mn)}function yg(e,t,n){if(!mS(n)||!X0(n)){const i=qc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Pd(e,t,n){if((t=he(t))instanceof pl)return t._internalPath;if(typeof t=="string")return _g(e,t);throw gc("Field path arguments must be of type string or ",e,!1,void 0,n)}const _D=new RegExp("[~\\*/\\[\\]]");function _g(e,t,n){if(t.search(_D)>=0)throw gc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new pl(...t.split("."))._internalPath}catch{throw gc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function gc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new B(k.INVALID_ARGUMENT,l+e+u)}function gS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new vD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vD extends pc{data(){return super.data()}}function vg(e,t){return typeof t=="string"?_g(e,t):t instanceof pl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class pS extends Eg{}function TD(e,t,...n){let i=[];t instanceof Eg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Ag).length,l=r.filter(u=>u instanceof Tg).length;if(a>1||a>0&&l>0)throw new B(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Tg extends pS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Tg(t,n,i)}_apply(t){const n=this._parse(t);return yS(t._query,n),new $s(t.firestore,t.converter,wd(t._query,n))}_parse(t){const n=yl(t.firestore);return function(r,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hv(g,d);const D=[];for(const V of g)D.push(cv(u,r,V));m={arrayValue:{values:D}}}else m=cv(u,r,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hv(g,d),m=yD(l,a,g,d==="in"||d==="not-in");return Xt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Ag extends Eg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ag(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)yS(a,u),a=wd(a,u)}(t._query,n),new $s(t.firestore,t.converter,wd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sg extends pS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Sg(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zo(r,a)}(t._query,this._field,this._direction);return new $s(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new pa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function AD(e,t="asc"){const n=t,i=vg("orderBy",e);return Sg._create(i,n)}function cv(e,t,n){if(typeof(n=he(n))=="string"){if(n==="")throw new B(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fA(t)&&n.indexOf("/")!==-1)throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(wt.fromString(n));if(!Q.isDocumentKey(i))throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return w_(e,new Q(i))}if(n instanceof Pt)return w_(e,n._key);throw new B(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qc(n)}.`)}function hv(e,t){if(!Array.isArray(e)||e.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yS(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class _S{convertValue(t,n="none"){switch(os(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ft(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(as(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ds(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[oc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>Ft(a.doubleValue));return new Mn(n)}convertGeoPoint(t){return new Vn(Ft(t.latitude),Ft(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Fc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Uo(t));default:return null}}convertTimestamp(t){const n=rs(t);return new Dt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=wt.fromString(t);mt(UA(i),9688,{name:t});const s=new Lo(i.get(1),i.get(3)),r=new Q(i.popFirst(5));return s.isEqual(n)||ui(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class SD extends _S{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ke(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}class wr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ji extends pc{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(vg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ji._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:$t("string",Ji._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Au extends Ji{data(t={}){return super.data(t)}}class Pr{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new wr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Au(this._firestore,this._userDataWriter,i.key,i,new wr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Au(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Au(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:bD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function bD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(e){e=tn(e,Pt);const t=tn(e.firestore,hi);return cD(nh(t),e._key).then(n=>ES(t,e,n))}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:$t("string",Pr._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class wg extends _S{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ke(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function Fo(e,t,n){e=tn(e,Pt);const i=tn(e.firestore,hi),s=bg(e.converter,t,n);return rh(i,[gg(yl(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,_e.none())])}function wD(e,t,n,...i){e=tn(e,Pt);const s=tn(e.firestore,hi),r=yl(s);let a;return a=typeof(t=he(t))=="string"||t instanceof pl?fS(r,"updateDoc",e._key,t,n,i):hS(r,"updateDoc",e._key,t),rh(s,[a.toMutation(e._key,_e.exists(!0))])}function RD(e){return rh(tn(e.firestore,hi),[new $c(e._key,_e.none())])}function ID(e,t){const n=tn(e.firestore,hi),i=je(e),s=bg(e.converter,t);return rh(n,[gg(yl(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,_e.exists(!1))]).then(()=>i)}function vo(e,...t){var u,h,d;e=he(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||uv(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(uv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let r,a,l;if(e instanceof Pt)a=tn(e.firestore,hi),l=Gc(e._key.path),r={next:g=>{t[i]&&t[i](ES(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=tn(e,$s);a=tn(g.firestore,hi),l=g._query;const m=new wg(a);r={next:_=>{t[i]&&t[i](new Pr(a,m,g,_))},error:t[i+1],complete:t[i+2]},ED(e._query)}return function(m,_,D,V){const M=new aS(V),S=new ZA(_,M,D);return m.asyncQueue.enqueueAndForget(async()=>XA(await kd(m),S)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>$A(await kd(m),S))}}(nh(a),l,s,r)}function rh(e,t){return function(i,s){const r=new ii;return i.asyncQueue.enqueueAndForget(async()=>XN(await lD(i),s,r)),r.promise}(nh(e),t)}function ES(e,t,n){const i=n.docs.get(t._key),s=new wg(e);return new Ji(e,s,t._key,i,new wr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={maxAttempts:5};function $a(e,t){if((e=he(e)).firestore!==t)throw new B(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=yl(t)}get(t){const n=$a(t,this._firestore),i=new SD(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return K(24041);const r=s[0];if(r.isFoundDocument())return new pc(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new pc(this._firestore,i,n._key,null,n.converter);throw K(18433,{doc:r})})}set(t,n,i){const s=$a(t,this._firestore),r=bg(s.converter,n,i),a=gg(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=$a(t,this._firestore);let a;return a=typeof(n=he(n))=="string"||n instanceof pl?fS(this._dataReader,"Transaction.update",r._key,n,i,s):hS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=$a(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends ND{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=$a(t,this._firestore),i=new wg(this._firestore);return super.get(t).then(s=>new Ji(this._firestore,i,n._key,s._document,new wr(!1,!1),n.converter))}}function xD(e,t,n){e=tn(e,hi);const i={...CD,...n};return function(r){if(r.maxAttempts<1)throw new B(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new ii;return r.asyncQueue.enqueueAndForget(async()=>{const h=await uD(r);new rD(r.asyncQueue,h,l,a,u).ju()}),u.promise}(nh(e),s=>t(new DD(e,s)),i)}function fv(){return new pg("serverTimestamp")}(function(t,n=!0){(function(s){da=s})(fa),Zr(new js("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new hi(new yI(i.getProvider("auth-internal")),new EI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(h.options.projectId,d)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),$i(f_,d_,t),$i(f_,d_,"esm2020")})();function TS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OD=TS,AS=new ll("auth","Firebase",TS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new jm("@firebase/auth");function VD(e,...t){yc.logLevel<=lt.WARN&&yc.warn(`Auth (${fa}): ${e}`,...t)}function Su(e,...t){yc.logLevel<=lt.ERROR&&yc.error(`Auth (${fa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,...t){throw Rg(e,...t)}function kn(e,...t){return Rg(e,...t)}function SS(e,t,n){const i={...OD(),[t]:n};return new ll("auth","Firebase",i).create(t,{appName:e.name})}function ts(e){return SS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return AS.create(e,...t)}function W(e,t,...n){if(!e)throw Rg(t,...n)}function Jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Su(t),new Error(t)}function di(e,t){e||Jn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function MD(){return dv()==="http:"||dv()==="https:"}function dv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MD()||QR()||"connection"in navigator)?navigator.onLine:!0}function PD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,n){this.shortDelay=t,this.longDelay=n,di(n>t,"Short delay should be less than long delay!"),this.isMobile=HR()||YR()}get(){return kD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(e,t){di(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jD=new vl(3e4,6e4);function ah(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function _a(e,t,n,i,s={}){return wS(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=ul({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return GR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&ha(e.emulatorConfig.host)&&(h.credentials="include"),bS.fetch()(await IS(e,e.config.apiHost,n,l),h)})}async function wS(e,t,n){e._canInitEmulator=!1;const i={...UD,...t};try{const s=new zD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw iu(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw iu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw iu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw iu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw SS(e,d,h);fi(e,d)}}catch(s){if(s instanceof gi)throw s;fi(e,"network-request-failed",{message:String(s)})}}async function RS(e,t,n,i,s={}){const r=await _a(e,t,n,i,s);return"mfaPendingCredential"in r&&fi(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function IS(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Ig(e.config,s):`${e.config.apiScheme}://${s}`;return LD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class zD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(kn(this.auth,"network-request-failed")),jD.get())})}}function iu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=kn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(e,t){return _a(e,"POST","/v1/accounts:delete",t)}async function _c(e,t){return _a(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function qD(e,t=!1){const n=he(e),i=await n.getIdToken(t),s=Cg(i);W(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Eo(yf(s.auth_time)),issuedAtTime:Eo(yf(s.iat)),expirationTime:Eo(yf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function yf(e){return Number(e)*1e3}function Cg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{const s=C0(n);return s?JSON.parse(s):(Su("Failed to decode base64 JWT payload"),null)}catch(s){return Su("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mv(e){const t=Cg(e);return W(t,"internal-error"),W(typeof t.exp<"u","internal-error"),W(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof gi&&HD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function HD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eo(this.lastLoginAt),this.creationTime=Eo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Go(e,_c(t,{idToken:n}));W(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?CS(s.providerUserInfo):[],a=QD(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ld(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function GD(e){const t=he(e);await vc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function QD(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function CS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(e,t){const n=await wS(e,{},async()=>{const i=ul({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await IS(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&ha(e.emulatorConfig.host)&&(u.credentials="include"),bS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KD(e,t){return _a(e,"POST","/v2/accounts:revokeToken",ah(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){W(t.idToken,"internal-error"),W(typeof t.idToken<"u","internal-error"),W(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){W(t.length!==0,"internal-error");const n=mv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await YD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Ur;return i&&(W(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(W(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(W(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ur,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(e,t){W(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class En{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new FD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ld(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Go(this,this.stsTokenManager.getToken(this.auth,t));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return qD(this,t)}reload(){return GD(this)}_assign(t){this!==t&&(W(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new En({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await vc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(ts(this.auth));const t=await this.getIdToken();return await Go(this,BD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:D,stsTokenManager:V}=n;W(g&&V,t,"internal-error");const M=Ur.fromJSON(this.name,V);W(typeof g=="string",t,"internal-error"),Si(i,t.name),Si(s,t.name),W(typeof m=="boolean",t,"internal-error"),W(typeof _=="boolean",t,"internal-error"),Si(r,t.name),Si(a,t.name),Si(l,t.name),Si(u,t.name),Si(h,t.name),Si(d,t.name);const S=new En({uid:g,auth:t,email:s,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return D&&Array.isArray(D)&&(S.providerData=D.map(v=>({...v}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const s=new Ur;s.updateFromServerResponse(n);const r=new En({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await vc(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];W(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?CS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Ur;l.updateFromIdToken(i);const u=new En({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Ld(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function ti(e){di(e instanceof Function,"Expected a class definition");let t=gv.get(e);return t?(di(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}NS.type="NONE";const pv=NS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e,t,n){return`firebase:${e}:${t}:${n}`}class Lr{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=bu(this.userKey,s.apiKey,r),this.fullPersistenceKey=bu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await _c(this.auth,{idToken:t}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,t):null}return En._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Lr(ti(pv),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||ti(pv);const a=bu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await _c(t,{idToken:d}).catch(()=>{});if(!m)break;g=await En._fromGetAccountInfoResponse(t,m,d)}else g=En._fromJSON(t,d);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Lr(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Lr(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(DS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kS(t))return"Blackberry";if(PS(t))return"Webos";if(xS(t))return"Safari";if((t.includes("chrome/")||OS(t))&&!t.includes("edge/"))return"Chrome";if(MS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function DS(e=Ce()){return/firefox\//i.test(e)}function xS(e=Ce()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OS(e=Ce()){return/crios\//i.test(e)}function VS(e=Ce()){return/iemobile/i.test(e)}function MS(e=Ce()){return/android/i.test(e)}function kS(e=Ce()){return/blackberry/i.test(e)}function PS(e=Ce()){return/webos/i.test(e)}function Ng(e=Ce()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function XD(e=Ce()){var t;return Ng(e)&&!!((t=window.navigator)!=null&&t.standalone)}function $D(){return KR()&&document.documentMode===10}function US(e=Ce()){return Ng(e)||MS(e)||PS(e)||kS(e)||/windows phone/i.test(e)||VS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(e,t=[]){let n;switch(e){case"Browser":n=yv(Ce());break;case"Worker":n=`${yv(Ce())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${fa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(e,t={}){return _a(e,"GET","/v2/passwordPolicy",ah(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=6;class tx{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??JD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new ZD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ti(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Lr.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await _c(this,{idToken:t}),i=await En._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await vc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=PD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vn(this.app))return Promise.reject(ts(this));const n=t?he(t):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&W(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vn(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await WD(this),n=new tx(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ll("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await KD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ti(t)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Lr.create(this,[ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=LS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&VD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function oh(e){return he(e)}class _v{constructor(t){this.auth=t,this.observer=null,this.addObserver=n2(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nx(e){Dg=e}function ix(e){return Dg.loadJS(e)}function sx(){return Dg.gapiScript}function rx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(e,t){const n=Bm(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Ls(r,t??{}))return s;fi(s,"already-initialized")}return n.initialize({options:t})}function ox(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ti);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function lx(e,t,n){const i=oh(e);W(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=jS(t),{host:a,port:l}=ux(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(Ls(h,i.config.emulator)&&Ls(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ha(a)?(O0(`${r}//${a}${u}`),V0("Auth",!0)):cx()}function jS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ux(e){const t=jS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:vv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:vv(a)}}}function vv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function cx(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(t){return Jn("not implemented")}_linkToIdToken(t,n){return Jn("not implemented")}_getReauthenticationResolver(t){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(e,t){return RS(e,"POST","/v1/accounts:signInWithIdp",ah(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="http://localhost";class qs extends zS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new qs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return jr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,jr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jr(t,n)}buildRequest(){const t={requestUri:hx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ul(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends BS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends El{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xi.credentialFromTaggedObject(t)}static credentialFromError(t){return xi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xi.credential(t.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qs._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Oi.credentialFromTaggedObject(t)}static credentialFromError(t){return Oi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Oi.credential(n,i)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends El{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vi.credential(t.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends El{constructor(){super("twitter.com")}static credential(t,n){return qs._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(e,t){return RS(e,"POST","/v1/accounts:signUp",ah(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await En._fromIdTokenResponse(t,i,s),a=Ev(i);return new cs({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=Ev(i);return new cs({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function Ev(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(e){var s;if(vn(e.app))return Promise.reject(ts(e));const t=oh(e);if(await t._initializationPromise,(s=t.currentUser)!=null&&s.isAnonymous)return new cs({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await fx(t,{returnSecureToken:!0}),i=await cs._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends gi{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Ec(t,n,i,s)}}function HS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(e,r,t,i):r})}async function dx(e,t,n=!1){const i=await Go(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cs._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(e,t,n=!1){const{auth:i}=e;if(vn(i.app))return Promise.reject(ts(i));const s="reauthenticate";try{const r=await Go(e,HS(i,s,t,e),n);W(r.idToken,i,"internal-error");const a=Cg(r.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(e.uid===l,i,"user-mismatch"),cs._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&fi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(e,t,n=!1){if(vn(e.app))return Promise.reject(ts(e));const i="signIn",s=await HS(e,i,t),r=await cs._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function px(e,t,n,i){return he(e).onIdTokenChanged(t,n,i)}function yx(e,t,n){return he(e).beforeAuthStateChanged(t,n)}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=1e3,vx=10;class GS extends FS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=US(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);$D()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,vx):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},_x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}GS.type="LOCAL";const Ex=GS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends FS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}QS.type="SESSION";const YS=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new lh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await Tx(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=xg("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function Sx(e){Pn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function bx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Rx(){return KS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firebaseLocalStorageDb",Ix=1,Ac="firebaseLocalStorage",$S="fbase_key";class Tl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uh(e,t){return e.transaction([Ac],t?"readwrite":"readonly").objectStore(Ac)}function Cx(){const e=indexedDB.deleteDatabase(XS);return new Tl(e).toPromise()}function jd(){const e=indexedDB.open(XS,Ix);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Ac,{keyPath:$S})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Ac)?t(i):(i.close(),await Cx(),t(await jd()))})})}async function Tv(e,t,n){const i=uh(e,!0).put({[$S]:t,value:n});return new Tl(i).toPromise()}async function Nx(e,t){const n=uh(e,!1).get(t),i=await new Tl(n).toPromise();return i===void 0?null:i.value}function Av(e,t){const n=uh(e,!0).delete(t);return new Tl(n).toPromise()}const Dx=800,xx=3;class ZS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>xx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(Rx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await bx(),!this.activeServiceWorker)return;this.sender=new Ax(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||wx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await jd();return await Tv(t,Tc,"1"),await Av(t,Tc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Tv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Nx(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Av(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=uh(s,!1).getAll();return new Tl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZS.type="LOCAL";const Ox=ZS;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(e,t){return t?ti(t):(W(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends zS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Mx(e){return gx(e.auth,new Og(e),e.bypassAuthState)}function kx(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),mx(n,new Og(e),e.bypassAuthState)}async function Px(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),dx(n,new Og(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Mx;case"linkViaPopup":case"linkViaRedirect":return Px;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:fi(this.auth,"internal-error")}}resolve(t){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new vl(2e3,1e4);class Rr extends WS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Rr.currentPopupAction&&Rr.currentPopupAction.cancel(),Rr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return W(t,this.auth,"internal-error"),t}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const t=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ux.get())};t()}}Rr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="pendingRedirect",wu=new Map;class jx extends WS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=wu.get(this.auth._key());if(!t){try{const i=await zx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}wu.set(this.auth._key(),t)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zx(e,t){const n=Hx(t),i=qx(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Bx(e,t){wu.set(e._key(),t)}function qx(e){return ti(e._redirectPersistence)}function Hx(e){return bu(Lx,e.config.apiKey,e.name)}async function Fx(e,t,n=!1){if(vn(e.app))return Promise.reject(ts(e));const i=oh(e),s=Vx(i,t),a=await new jx(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=10*60*1e3;class Qx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Yx(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!JS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Gx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(t))}saveEventToCache(t){this.cachedEventUids.add(Sv(t)),this.lastProcessedEventTime=Date.now()}}function Sv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function JS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Yx(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(e,t={}){return _a(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$x=/^https?/;async function Zx(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Kx(e);for(const n of t)try{if(Wx(n))return}catch{}fi(e,"unauthorized-domain")}function Wx(e){const t=Ud(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!$x.test(n))return!1;if(Xx.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new vl(3e4,6e4);function bv(){const e=Pn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function t4(e){return new Promise((t,n)=>{var s,r,a;function i(){bv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bv(),n(kn(e,"network-request-failed"))},timeout:Jx.get()})}if((r=(s=Pn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Pn().gapi)!=null&&a.load)i();else{const l=rx("iframefcb");return Pn()[l]=()=>{gapi.load?i():n(kn(e,"network-request-failed"))},ix(`${sx()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Ru=null,t})}let Ru=null;function e4(e){return Ru=Ru||t4(e),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new vl(5e3,15e3),i4="__/auth/iframe",s4="emulator/auth/iframe",r4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o4(e){const t=e.config;W(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ig(t,s4):`https://${e.config.authDomain}/${i4}`,i={apiKey:t.apiKey,appName:e.name,v:fa},s=a4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ul(i).slice(1)}`}async function l4(e){const t=await e4(e),n=Pn().gapi;return W(n,e,"internal-error"),t.open({where:document.body,url:o4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=kn(e,"network-request-failed"),l=Pn().setTimeout(()=>{r(a)},n4.get());function u(){Pn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c4=500,h4=600,f4="_blank",d4="http://localhost";class wv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m4(e,t,n,i=c4,s=h4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...u4,width:i.toString(),height:s.toString(),top:r,left:a},h=Ce().toLowerCase();n&&(l=OS(h)?f4:n),DS(h)&&(t=t||d4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,D])=>`${m}${_}=${D},`,"");if(XD(h)&&l!=="_self")return g4(t||"",l),new wv(null);const g=window.open(t||"",l,d);W(g,e,"popup-blocked");try{g.focus()}catch{}return new wv(g)}function g4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="__/auth/handler",y4="emulator/auth/handler",_4=encodeURIComponent("fac");async function Rv(e,t,n,i,s,r){W(e.config.authDomain,e,"auth-domain-config-required"),W(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:fa,eventId:s};if(t instanceof BS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",e2(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof El){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${_4}=${encodeURIComponent(u)}`:"";return`${v4(e)}?${ul(l).slice(1)}${h}`}function v4({config:e}){return e.emulator?Ig(e,y4):`https://${e.authDomain}/${p4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class E4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YS,this._completeRedirectFn=Fx,this._overrideRedirectResult=Bx}async _openPopup(t,n,i,s){var a;di((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Rv(t,n,i,Ud(),s);return m4(t,r,xg())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Rv(t,n,i,Ud(),s);return Sx(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(di(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await l4(t),i=new Qx(t);return n.register("authEvent",s=>(W(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_f,{type:_f},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[_f];r!==void 0&&n(!!r),fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zx(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return US()||xS()||Ng()}}const T4=E4;var Iv="@firebase/auth",Cv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b4(e){Zr(new js("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LS(e)},h=new ex(i,s,r,u);return ox(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Zr(new js("auth-internal",t=>{const n=oh(t.getProvider("auth").getImmediate());return(i=>new A4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(Iv,Cv,S4(e)),$i(Iv,Cv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=5*60,R4=x0("authIdTokenMaxAge")||w4;let Nv=null;const I4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>R4)return;const s=n==null?void 0:n.token;Nv!==s&&(Nv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function C4(e=U0()){const t=Bm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=ax(e,{popupRedirectResolver:T4,persistence:[Ox,Ex,YS]}),i=x0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=I4(r.toString());yx(n,a,()=>a(n.currentUser)),px(n,l=>a(l))}}const s=N0("auth");return s&&lx(n,`http://${s}`),n}function N4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}nx({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=kn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",N4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b4("Browser");const D4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},tb=P0(D4),be=fD(tb),eb=C4(tb),nb="417641827",ib=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:w.jsx("path",{d:"m9 18 6-6-6-6"})}),sb=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M19 12H5"}),w.jsx("polyline",{points:"12 19 5 12 12 5"})]}),rb=({className:e="",filled:t=!1})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("circle",{cx:"11",cy:"11",r:"8"}),w.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),x4=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[w.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),w.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),O4=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),ab=({className:e="",filled:t=!1})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),V4=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),w.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),ob=({className:e="",filled:t=!1})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),M4=({className:e="",filled:t=!1})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),w.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),k4=({className:e="",filled:t=!1})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M4 22h16"}),w.jsx("path",{d:"M7 22V2h10v20"}),w.jsx("path",{d:"M7 12h4"})]}),P4=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m15 18-6-6 6-6"})}),U4=({className:e=""})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:w.jsx("path",{d:"m9 18 6-6-6-6"})}),L4=({className:e=""})=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[w.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),w.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),j4=()=>w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[w.jsx(ab,{className:"animate-pulse-heart text-accent",filled:!0}),w.jsx("p",{className:"mt-4 text-lg opacity-70",children:" ..."})]}),Vg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 ",price:199},{duration:3,name:"3 ",price:539,popular:!0},{duration:12,name:"1 ",price:1899}];return w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[w.jsx(O4,{className:"mx-auto mb-4 text-accent"}),w.jsx("h3",{className:"text-xl text-center font-bold",children:"    "}),w.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"   :"}),w.jsx("div",{className:"space-y-3",children:n.map(i=>w.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[w.jsx("p",{className:"font-bold",children:i.name}),w.jsxs("p",{className:"text-sm",children:[i.price," "]})]},i.duration))}),w.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:" "})]})})},Mg=({onClose:e,onSelectMethod:t,plan:n})=>w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[w.jsx("h3",{className:"text-xl text-center font-bold",children:"  "}),w.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:[": ",n.name," (",n.price," )"]}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[w.jsx("p",{className:"font-bold",children:"  "}),w.jsx("p",{className:"text-sm opacity-70",children:"  ( 24 )"})]}),w.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[w.jsx("p",{className:"font-bold",children:"   tribut"}),w.jsx("p",{className:"text-sm opacity-70",children:"  "})]})]}),w.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:""})]})}),Hs=({title:e,onBack:t})=>w.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&w.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:w.jsx(sb,{})}),w.jsx("h1",{className:"text-xl font-bold",children:e})]}),kg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>w.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((s,r)=>w.jsx("div",{onClick:()=>t(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:w.jsxs("div",{className:"relative transition-all duration-300",children:[w.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:w.jsx(ob,{filled:n.includes(s.id),width:"20",height:"20"})}),w.jsx("img",{src:`/tene/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),w.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:s.title})]})},s.id)):w.jsx("p",{className:"col-span-3 text-center opacity-70",children:"  ."})}),z4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=F.useState(!1),[m,_]=F.useState(null),[D,V]=F.useState("newest"),[M,S]=F.useState(!1),v=F.useRef(null),[R,x]=F.useState(!1),L=i&&new Date(i.expires_at)>new Date,q=F.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);F.useEffect(()=>{(async()=>{var A,ht,Gt;try{const j=(A=window.Telegram)==null?void 0:A.WebApp;let G="";j&&(j.ready(),j.expand(),G=((Gt=(ht=j.initDataUnsafe)==null?void 0:ht.user)==null?void 0:Gt.first_name)||""),setUserName(G);const ot=(await qS(eb)).user.uid;if(setUserId(ot),ot){const Bt=je(be,"users",ot);vo(Bt,gt=>{if(gt.exists()){const Qt=gt.data();setSubscription(Qt.subscription||null),setLastReadData(Qt.lastRead||null),setBookmarks(Qt.bookmarks||[]),Qt.settings&&(setFontSize(Qt.settings.fontSize||16),setFontClass(Qt.settings.fontClass||"font-sans"))}})}const yt=await fetch("/tene/data/novels.json");if(!yt.ok)throw new Error("Failed to fetch novels");const ie=await yt.json();setNovels(ie.novels)}catch(j){console.error(" :",j)}finally{setIsLoading(!1)}})()},[]);const T=F.useMemo(()=>{const I=[...a];return D==="newest"?I.reverse():a},[a,D]),y=I=>{!L&&I.isPaid?g(!0):t(I)},E=()=>{if(q){const I=a.find(A=>A.id===q);I&&t(I)}},b=I=>_(I),C=async I=>{var ht;const A=(ht=window.Telegram)==null?void 0:ht.WebApp;if(!A||!r||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),A&&A.showAlert(" . ,   .");return}A.showConfirm("       .      ,    ,  !    /start  .",async Gt=>{if(!Gt)return;const j=je(be,"users",r);try{await Fo(j,{pendingSubscription:{...m,method:I,date:new Date().toISOString()}},{merge:!0}),A.openTelegramLink(`https://t.me/${s}?start=true`),A.close()}catch(G){console.error("   Firebase:",G),A.showAlert("    .  .")}})};return w.jsxs("div",{className:"text-text-main",children:[w.jsx(Hs,{title:e.title,onBack:h}),w.jsxs("div",{className:"relative h-64",children:[w.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),w.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[w.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),w.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),w.jsxs("div",{className:"p-4",children:[w.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(I=>w.jsx("button",{onClick:()=>n(I),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:I},I))}),w.jsx("div",{ref:v,className:`relative overflow-hidden transition-all duration-500 ${M?"max-h-full":"max-h-24"}`,children:w.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&w.jsx("div",{className:"text-right",children:w.jsx("button",{onClick:()=>S(!M),className:"text-sm font-semibold text-accent mb-4",children:M?"":" ..."})}),q&&w.jsxs("button",{onClick:E,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["  ( ",q,")"]}),w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h2",{className:"text-xl font-bold",children:""}),w.jsx("button",{onClick:()=>V(I=>I==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:D==="newest"?" ":" "})]}),L&&w.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["  ",new Date(i.expires_at).toLocaleDateString()]}),l?w.jsx("p",{children:" ..."}):w.jsx("div",{className:"flex flex-col gap-3",children:T.map(I=>{const A=!L&&I.isPaid,ht=q===I.id;return w.jsxs("div",{onClick:()=>y(I),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${A?"opacity-70":""}`,children:[w.jsxs("div",{className:"flex items-center gap-3",children:[ht&&w.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),w.jsx("p",{className:"font-semibold",children:I.title})]}),A?w.jsx(x4,{}):w.jsx(ib,{})]},I.id)})}),d&&w.jsx(Vg,{onClose:()=>g(!1),onSelectPlan:b}),m&&w.jsx(Mg,{onClose:()=>_(null),onSelectMethod:C,plan:m})]})]})},B4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:s,userName:r,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g})=>{const[m,_]=F.useState([]),[D,V]=F.useState(""),[M,S]=F.useState(null),[v,R]=F.useState(""),[x,L]=F.useState(0),[q,T]=F.useState(!1),[y,E]=F.useState(!1),[b,C]=F.useState(!1),[I,A]=F.useState(!1),[ht,Gt]=F.useState(null),[j,G]=F.useState(""),[X,ot]=F.useState(!0),yt=h&&new Date(h.expires_at)>new Date,ie=F.useMemo(()=>je(be,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);F.useEffect(()=>{const Y=vo(ie,tt=>{var Et;L(((Et=tt.data())==null?void 0:Et.likeCount)||0)}),st=TD(rv(be,`chapters_metadata/${t.id}_${e.id}/comments`),AD("timestamp","asc")),Me=vo(st,tt=>{const Et=tt.docs.map(rn=>({id:rn.id,...rn.data()}));_(Et)});let et=()=>{};if(s&&s!=="guest_user"){const tt=je(be,`chapters_metadata/${t.id}_${e.id}/likes`,s);et=vo(tt,Et=>{T(Et.exists())})}return()=>{Y(),Me(),et()}},[ie,t.id,e.id,s]),F.useEffect(()=>{(async()=>{if(ot(!0),G(""),e.isPaid&&!yt){ot(!1),G(`###        .

,     "",   .`);return}try{const st=je(be,"chapter_content",`${t.id}-${e.id}`),Me=await vS(st);Me.exists()?G(Me.data().content):G(`## 

    . ,  .`)}catch(st){console.error("  :",st),G(`## 

   .   -.`)}finally{ot(!1)}})()},[t.id,e.id,yt]);const Bt=async Y=>{if(Y.preventDefault(),!(!D.trim()||!s||s==="guest_user"))try{await Fo(ie,{},{merge:!0});const st=rv(be,`chapters_metadata/${t.id}_${e.id}/comments`);await ID(st,{userId:s,userName:r||"",text:D,timestamp:fv()}),V("")}catch(st){console.error("  :",st)}},gt=Y=>{S(Y.id),R(Y.text)},Qt=async Y=>{if(!v.trim())return;const st=je(be,`chapters_metadata/${t.id}_${e.id}/comments`,Y);await wD(st,{text:v}),S(null),R("")},se=async Y=>{const st=je(be,`chapters_metadata/${t.id}_${e.id}/comments`,Y);await RD(st)},Zs=async()=>{if(!s||s==="guest_user")return;const Y=je(be,`chapters_metadata/${t.id}_${e.id}/likes`,s);try{await xD(be,async st=>{var Et;const Me=await st.get(Y),tt=((Et=(await st.get(ie)).data())==null?void 0:Et.likeCount)||0;Me.exists()?(st.delete(Y),st.set(ie,{likeCount:Math.max(0,tt-1)},{merge:!0})):(st.set(Y,{timestamp:fv()}),st.set(ie,{likeCount:tt+1},{merge:!0}))})}catch(st){console.error("   :",st)}},sn=Y=>{Y&&(!yt&&Y.isPaid?(E(!1),A(!0)):(l(Y),E(!1)))},va=Y=>{Gt(Y),A(!1)},Ea=async Y=>{var Me;const st=(Me=window.Telegram)==null?void 0:Me.WebApp;st&&s&&ht&&st.showConfirm("       .    ,   /start.",async et=>{if(et){const tt=je(be,"users",s);try{await Fo(tt,{pendingSubscription:{...ht,method:Y,date:new Date().toISOString()}},{merge:!0}),st.openTelegramLink(`https://t.me/${d}?start=true`),st.close()}catch(Et){console.error("   Firebase:",Et),st.showAlert("    .  .")}}})},pn=u.findIndex(Y=>Y.id===e.id),zn=u[pn-1],pi=u[pn+1],gs=Y=>window.marked?`<div class="prose">${window.marked.parse(Y)}</div>`:Y;return w.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[w.jsx(Hs,{title:t.title,onBack:g}),w.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[w.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),w.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:X?"<p>...</p>":gs(j)}}),w.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"    "}),w.jsxs("div",{className:"border-t border-border-color pt-8",children:[w.jsx("div",{className:"flex items-center gap-4 mb-8",children:w.jsxs("button",{onClick:Zs,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[w.jsx(ab,{filled:q,className:q?"text-accent":""}),w.jsx("span",{className:"font-bold text-lg",children:x})]})}),w.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),w.jsxs("div",{className:"space-y-4 mb-6",children:[m.map(Y=>w.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[w.jsx("p",{className:"font-bold text-sm",children:Y.userName}),M===Y.id?w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("input",{type:"text",value:v,onChange:st=>R(st.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),w.jsx("button",{onClick:()=>Qt(Y.id),className:"p-1 rounded-full bg-green-500 text-white",children:""}),w.jsx("button",{onClick:()=>S(null),className:"p-1 rounded-full bg-gray-500 text-white",children:""})]}):w.jsx("p",{className:"text-sm mt-1 opacity-90",children:Y.text}),(s===Y.userId||s===nb)&&w.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[w.jsx("button",{onClick:()=>gt(Y),className:"text-xs text-gray-500",children:""}),w.jsx("button",{onClick:()=>se(Y.id),className:"text-xs text-red-500",children:""})]})]},Y.id)),m.length===0&&w.jsx("p",{className:"opacity-70 text-sm",children:"  .  !"})]}),w.jsxs("form",{onSubmit:Bt,className:"flex items-center gap-2",children:[w.jsx("input",{type:"text",value:D,onChange:Y=>V(Y.target.value),placeholder:" ...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),w.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:w.jsx(V4,{className:"w-5 h-5"})})]})]})]}),w.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[w.jsx("button",{onClick:()=>sn(zn),disabled:!zn,className:"p-2 disabled:opacity-50",children:w.jsx(sb,{})}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>E(!0),className:"px-4 py-2 rounded-lg bg-background",children:""}),w.jsx("button",{onClick:()=>C(!0),className:"p-2 rounded-lg bg-background",children:w.jsx(L4,{})})]}),w.jsx("button",{onClick:()=>sn(pi),disabled:!pi,className:"p-2 disabled:opacity-50",children:w.jsx(ib,{className:"opacity-100"})})]}),y&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>E(!1),children:w.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:Y=>Y.stopPropagation(),children:[w.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:""}),w.jsx("div",{className:"overflow-y-auto",children:w.jsx("div",{className:"flex flex-col gap-2",children:u.map(Y=>w.jsx("button",{onClick:()=>sn(Y),className:`p-2 text-left rounded-md ${Y.id===e.id?"bg-accent text-white":"bg-background"}`,children:Y.title},Y.id))})})]})}),b&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>C(!1),children:w.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:Y=>Y.stopPropagation(),children:[w.jsx("h3",{className:"font-bold text-lg mb-4",children:" "}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{children:" "}),w.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[w.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),w.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),I&&w.jsx(Vg,{onClose:()=>A(!1),onSelectPlan:va}),ht&&w.jsx(Mg,{onClose:()=>Gt(null),onSelectMethod:Ea,plan:ht})]})},q4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=F.useState(""),a=F.useMemo(()=>s?e.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())):[],[e,s]);return w.jsxs("div",{children:[w.jsx(Hs,{title:""}),w.jsxs("div",{className:"p-4",children:[w.jsxs("div",{className:"relative mb-6",children:[w.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:w.jsx(rb,{className:"text-text-main opacity-50"})}),w.jsx("input",{type:"text",placeholder:"  ...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),w.jsx(kg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},H4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>w.jsxs("div",{children:[w.jsx(Hs,{title:""}),w.jsx(kg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),F4=({subscription:e,onGetSubscriptionClick:t})=>{const n=e&&new Date(e.expires_at)>new Date;return w.jsxs("div",{children:[w.jsx(Hs,{title:""}),w.jsx("div",{className:"p-4 space-y-4",children:w.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[w.jsx("h3",{className:"font-bold mb-2",children:""}),n?w.jsxs("div",{children:[w.jsx("p",{className:"text-green-500",children:""}),w.jsxs("p",{className:"text-sm opacity-70",children:[": ",new Date(e.expires_at).toLocaleDateString()]})]}):w.jsxs("div",{children:[w.jsx("p",{className:"text-red-500",children:""}),w.jsx("p",{className:"text-sm opacity-70 mb-3",children:" ,       ."}),w.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:" "})]})]})})]})},G4=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"",icon:k4},{id:"search",label:"",icon:rb},{id:"bookmarks",label:"",icon:ob},{id:"profile",label:"",icon:M4}];return w.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:w.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>w.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[w.jsx(i.icon,{filled:e===i.id}),w.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},Q4=({onReadMore:e})=>{const[t,n]=F.useState([]),[i,s]=F.useState(0);F.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%t.length),a=()=>s(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return w.jsx("div",{className:"p-4",children:w.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[w.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"font-bold text-text-main",children:l.title}),w.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),w.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:" "})]}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:w.jsx(P4,{className:"w-5 h-5"})}),w.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:w.jsx(U4,{className:"w-5 h-5"})})]})]})})},Y4=({newsItem:e,onClose:t})=>w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:w.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[w.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),w.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),w.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:""})]})});function K4(){const[e,t]=F.useState(16),[n,i]=F.useState("font-sans"),[s,r]=F.useState("list"),[a,l]=F.useState("library"),[u,h]=F.useState([]),[d,g]=F.useState(null),[m,_]=F.useState(null),[D,V]=F.useState(null),[M,S]=F.useState(null),[v,R]=F.useState(null),[x,L]=F.useState(null),[q,T]=F.useState(!0),[y,E]=F.useState([]),[b,C]=F.useState(!0),[I,A]=F.useState(null),[ht,Gt]=F.useState([]),[j,G]=F.useState(!1),[X,ot]=F.useState(null),[yt,ie]=F.useState(null),Bt="tenebrisverbot",gt=F.useCallback(async et=>{if(v&&v!=="guest_user"){const tt=je(be,"users",v);try{await Fo(tt,et,{merge:!0})}catch(Et){console.error("    :",Et)}}},[v]),Qt=F.useCallback(et=>{t(tt=>{const Et=Math.max(12,Math.min(32,tt+et));return gt({settings:{fontSize:Et,fontClass:n}}),Et})},[n,gt]);F.useEffect(()=>{(async()=>{var tt,Et,rn,bn,yi,an;try{const qe=(tt=window.Telegram)==null?void 0:tt.WebApp;let ps="guest_user";if(qe&&(qe.ready(),qe.expand(),ps=((bn=(rn=(Et=qe.initDataUnsafe)==null?void 0:Et.user)==null?void 0:rn.id)==null?void 0:bn.toString())||"guest_user",L(((an=(yi=qe.initDataUnsafe)==null?void 0:yi.user)==null?void 0:an.first_name)||null)),R(ps),await qS(eb),ps!=="guest_user"){const Ws=je(be,"users",ps);vo(Ws,Ta=>{if(Ta.exists()){const Bn=Ta.data();S(Bn.subscription||null),A(Bn.lastRead||null),Gt(Bn.bookmarks||[]),Bn.settings&&(t(Bn.settings.fontSize||16),i(Bn.settings.fontClass||"font-sans"))}})}const Wt=await fetch("/tene/data/novels.json");if(!Wt.ok)throw new Error("Failed to fetch novels");const fe=await Wt.json();h(fe.novels)}catch(qe){console.error(" :",qe)}finally{T(!1)}})()},[]),F.useEffect(()=>{if(!d){E([]);return}(async()=>{C(!0);try{const tt=je(be,"chapter_info",d.id.toString()),Et=await vS(tt);if(Et.exists()){const bn=Et.data().chapters||{},yi=Object.keys(bn).map(an=>({id:parseInt(an),title:` ${an}`,isPaid:bn[an].isPaid||!1})).sort((an,qe)=>an.id-qe.id);E(yi)}else console.log("      chapter_info!"),E([])}catch(tt){console.error("    Firebase:",tt),E([])}finally{C(!1)}})()},[d]);const se=F.useCallback(()=>{s==="reader"?r("details"):s==="details"&&(r("list"),V(null))},[s]);F.useEffect(()=>{var tt;const et=(tt=window.Telegram)==null?void 0:tt.WebApp;if(et)return et.onEvent("backButtonClicked",se),s==="list"?et.BackButton.hide():et.BackButton.show(),()=>et.offEvent("backButtonClicked",se)},[s,se]),F.useEffect(()=>{var tt;const et=(tt=window.Telegram)==null?void 0:tt.WebApp;et&&(et.setHeaderColor("#FFFFFF"),et.setBackgroundColor("#F5F1ED"))},[]);const Zs=F.useCallback(async et=>{if(_(et),r("reader"),v&&v!=="guest_user"&&d){const tt={...I||{},[d.id]:{novelId:d.id,chapterId:et.id,timestamp:new Date().toISOString()}};A(tt),await gt({lastRead:tt})}},[v,d,I,gt]),sn=et=>{g(et),r("details")},va=et=>{V(et),r("list"),l("library")},Ea=()=>{V(null)},pn=F.useCallback(async et=>{const tt=ht.includes(et)?ht.filter(Et=>Et!==et):[...ht,et];Gt(tt),await gt({bookmarks:tt})},[ht,gt]),zn=F.useMemo(()=>u.filter(et=>ht.includes(et.id)),[u,ht]),pi=()=>{G(!0)},gs=et=>{ot(et),G(!1)},Y=async et=>{var Et;const tt=(Et=window.Telegram)==null?void 0:Et.WebApp;if(!tt||!v||!X){console.error("Telegram Web App, userId, or selectedPlan is not available."),tt&&tt.showAlert(" . ,   .");return}tt.showConfirm("       .      ,    ,  !    /start  .",async rn=>{if(!rn)return;const bn=je(be,"users",v);try{await Fo(bn,{pendingSubscription:{...X,method:et,date:new Date().toISOString()}},{merge:!0}),tt.openTelegramLink(`https://t.me/${Bt}?start=true`),tt.close()}catch(yi){console.error("   Firebase:",yi),tt.showAlert("    .  .")}})};if(q)return w.jsx(j4,{});const st=v===nb,Me=()=>{if(s==="details")return w.jsx(z4,{novel:d,onSelectChapter:Zs,onGenreSelect:va,subscription:M,botUsername:Bt,userId:v,chapters:y,isLoadingChapters:b,lastReadData:I,onBack:se});if(s==="reader")return w.jsx(B4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:Qt,userId:v,userName:x,currentFontClass:n,onSelectChapter:Zs,allChapters:y,subscription:M,botUsername:Bt,onBack:se});switch(a){case"library":return w.jsxs(w.Fragment,{children:[w.jsx(Hs,{title:""}),w.jsx(Q4,{onReadMore:ie}),D&&w.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[w.jsxs("p",{className:"text-sm",children:[w.jsx("span",{className:"opacity-70",children:":"}),w.jsx("strong",{className:"ml-2",children:D})]}),w.jsx("button",{onClick:Ea,className:"text-xs font-bold text-accent hover:underline",children:""})]}),w.jsx(kg,{novels:u.filter(et=>!D||et.genres.includes(D)),onSelectNovel:sn,bookmarks:ht,onToggleBookmark:pn})]});case"search":return w.jsx(q4,{novels:u,onSelectNovel:sn,bookmarks:ht,onToggleBookmark:pn});case"bookmarks":return w.jsx(H4,{novels:zn,onSelectNovel:sn,bookmarks:ht,onToggleBookmark:pn});case"profile":return w.jsx(F4,{subscription:M,onGetSubscriptionClick:pi});default:return w.jsx(Hs,{title:""})}};return w.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${st?"":"no-select"}`,children:[w.jsx("div",{className:"pb-20",children:Me()}),s==="list"&&w.jsx(G4,{activeTab:a,setActiveTab:l}),j&&w.jsx(Vg,{onClose:()=>G(!1),onSelectPlan:gs}),X&&w.jsx(Mg,{onClose:()=>ot(null),onSelectMethod:Y,plan:X}),yt&&w.jsx(Y4,{newsItem:yt,onClose:()=>ie(null)})]})}NR.createRoot(document.getElementById("root")).render(w.jsx(F.StrictMode,{children:w.jsx(K4,{})}));
