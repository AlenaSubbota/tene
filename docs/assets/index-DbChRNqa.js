(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Iv={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=Symbol.for("react.transitional.element"),C1=Symbol.for("react.fragment");function Cv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:I1,type:e,key:i,ref:t!==void 0?t:null,props:n}}pc.Fragment=C1;pc.jsx=Cv;pc.jsxs=Cv;Iv.exports=pc;var N=Iv.exports,Nv={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.transitional.element"),N1=Symbol.for("react.portal"),D1=Symbol.for("react.fragment"),O1=Symbol.for("react.strict_mode"),V1=Symbol.for("react.profiler"),x1=Symbol.for("react.consumer"),M1=Symbol.for("react.context"),k1=Symbol.for("react.forward_ref"),P1=Symbol.for("react.suspense"),U1=Symbol.for("react.memo"),Dv=Symbol.for("react.lazy"),bp=Symbol.iterator;function L1(e){return e===null||typeof e!="object"?null:(e=bp&&e[bp]||e["@@iterator"],typeof e=="function"?e:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vv=Object.assign,xv={};function $r(e,t,n){this.props=e,this.context=t,this.refs=xv,this.updater=n||Ov}$r.prototype.isReactComponent={};$r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mv(){}Mv.prototype=$r.prototype;function Ud(e,t,n){this.props=e,this.context=t,this.refs=xv,this.updater=n||Ov}var Ld=Ud.prototype=new Mv;Ld.constructor=Ud;Vv(Ld,$r.prototype);Ld.isPureReactComponent=!0;var wp=Array.isArray,It={H:null,A:null,T:null,S:null,V:null},kv=Object.prototype.hasOwnProperty;function zd(e,t,n,i,s,r){return n=r.ref,{$$typeof:Pd,type:e,key:t,ref:n!==void 0?n:null,props:r}}function z1(e,t){return zd(e.type,t,void 0,void 0,void 0,e.props)}function jd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pd}function j1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Rp=/\/+/g;function Ah(e,t){return typeof e=="object"&&e!==null&&e.key!=null?j1(""+e.key):t.toString(36)}function Ip(){}function B1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Ip,Ip):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Xs(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Pd:case N1:a=!0;break;case Dv:return a=e._init,Xs(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+Ah(e,0):i,wp(s)?(n="",a!=null&&(n=a.replace(Rp,"$&/")+"/"),Xs(s,t,n,"",function(h){return h})):s!=null&&(jd(s)&&(s=z1(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Rp,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(wp(e))for(var u=0;u<e.length;u++)i=e[u],r=l+Ah(i,u),a+=Xs(i,t,n,r,s);else if(u=L1(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+Ah(i,u++),a+=Xs(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return Xs(B1(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Dl(e,t,n){if(e==null)return e;var i=[],s=0;return Xs(e,i,"","",function(r){return t.call(n,r,s++)}),i}function q1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function H1(){}tt.Children={map:Dl,forEach:function(e,t,n){Dl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Dl(e,function(){t++}),t},toArray:function(e){return Dl(e,function(t){return t})||[]},only:function(e){if(!jd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=$r;tt.Fragment=D1;tt.Profiler=V1;tt.PureComponent=Ud;tt.StrictMode=O1;tt.Suspense=P1;tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=It;tt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return It.H.useMemoCache(e)}};tt.cache=function(e){return function(){return e.apply(null,arguments)}};tt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Vv({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!kv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return zd(e.type,s,void 0,void 0,r,i)};tt.createContext=function(e){return e={$$typeof:M1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:x1,_context:e},e};tt.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)kv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return zd(e,r,void 0,void 0,null,s)};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:k1,render:e}};tt.isValidElement=jd;tt.lazy=function(e){return{$$typeof:Dv,_payload:{_status:-1,_result:e},_init:q1}};tt.memo=function(e,t){return{$$typeof:U1,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=It.T,n={};It.T=n;try{var i=e(),s=It.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(H1,Cp)}catch(r){Cp(r)}finally{It.T=t}};tt.unstable_useCacheRefresh=function(){return It.H.useCacheRefresh()};tt.use=function(e){return It.H.use(e)};tt.useActionState=function(e,t,n){return It.H.useActionState(e,t,n)};tt.useCallback=function(e,t){return It.H.useCallback(e,t)};tt.useContext=function(e){return It.H.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e,t){return It.H.useDeferredValue(e,t)};tt.useEffect=function(e,t,n){var i=It.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};tt.useId=function(){return It.H.useId()};tt.useImperativeHandle=function(e,t,n){return It.H.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return It.H.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return It.H.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return It.H.useMemo(e,t)};tt.useOptimistic=function(e,t){return It.H.useOptimistic(e,t)};tt.useReducer=function(e,t,n){return It.H.useReducer(e,t,n)};tt.useRef=function(e){return It.H.useRef(e)};tt.useState=function(e){return It.H.useState(e)};tt.useSyncExternalStore=function(e,t,n){return It.H.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return It.H.useTransition()};tt.version="19.1.1";Nv.exports=tt;var Q=Nv.exports,Pv={exports:{}},yc={},Uv={exports:{}},Lv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,F){var Z=q.length;q.push(F);t:for(;0<Z;){var vt=Z-1>>>1,Dt=q[vt];if(0<s(Dt,F))q[vt]=F,q[Z]=Dt,Z=vt;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var F=q[0],Z=q.pop();if(Z!==F){q[0]=Z;t:for(var vt=0,Dt=q.length,rn=Dt>>>1;vt<rn;){var Ee=2*(vt+1)-1,Mt=q[Ee],an=Ee+1,Ke=q[an];if(0>s(Mt,Z))an<Dt&&0>s(Ke,Mt)?(q[vt]=Ke,q[an]=Z,vt=an):(q[vt]=Mt,q[Ee]=Z,vt=Ee);else if(an<Dt&&0>s(Ke,Z))q[vt]=Ke,q[an]=Z,vt=an;else break t}}return F}function s(q,F){var Z=q.sortIndex-F.sortIndex;return Z!==0?Z:q.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,y=!1,O=!1,V=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(q){for(var F=n(h);F!==null;){if(F.callback===null)i(h);else if(F.startTime<=q)i(h),F.sortIndex=F.expirationTime,t(u,F);else break;F=n(h)}}function L(q){if(V=!1,D(q),!O)if(n(u)!==null)O=!0,B||(B=!0,I());else{var F=n(h);F!==null&&Qt(L,F.startTime-q)}}var B=!1,T=-1,_=5,A=-1;function E(){return k?!0:!(e.unstable_now()-A<_)}function S(){if(k=!1,B){var q=e.unstable_now();A=q;var F=!0;try{t:{O=!1,V&&(V=!1,v(T),T=-1),y=!0;var Z=m;try{e:{for(D(q),g=n(u);g!==null&&!(g.expirationTime>q&&E());){var vt=g.callback;if(typeof vt=="function"){g.callback=null,m=g.priorityLevel;var Dt=vt(g.expirationTime<=q);if(q=e.unstable_now(),typeof Dt=="function"){g.callback=Dt,D(q),F=!0;break e}g===n(u)&&i(u),D(q)}else i(u);g=n(u)}if(g!==null)F=!0;else{var rn=n(h);rn!==null&&Qt(L,rn.startTime-q),F=!1}}break t}finally{g=null,m=Z,y=!1}F=void 0}}finally{F?I():B=!1}}}var I;if(typeof R=="function")I=function(){R(S)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Nt=b.port2;b.port1.onmessage=S,I=function(){Nt.postMessage(null)}}else I=function(){w(S,0)};function Qt(q,F){T=w(function(){q(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var Z=m;m=F;try{return q()}finally{m=Z}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(q,F){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=m;m=q;try{return F()}finally{m=Z}},e.unstable_scheduleCallback=function(q,F,Z){var vt=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?vt+Z:vt):Z=vt,q){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=Z+Dt,q={id:d++,callback:F,priorityLevel:q,startTime:Z,expirationTime:Dt,sortIndex:-1},Z>vt?(q.sortIndex=Z,t(h,q),n(u)===null&&q===n(h)&&(V?(v(T),T=-1):V=!0,Qt(L,Z-vt))):(q.sortIndex=Dt,t(u,q),O||y||(O=!0,B||(B=!0,I()))),q},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(q){var F=m;return function(){var Z=m;m=F;try{return q.apply(this,arguments)}finally{m=Z}}}})(Lv);Uv.exports=Lv;var G1=Uv.exports,zv={exports:{}},Ie={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=Q;function jv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hi(){}var Re={d:{f:hi,r:function(){throw Error(jv(522))},D:hi,C:hi,L:hi,m:hi,X:hi,S:hi,M:hi},p:0,findDOMNode:null},Q1=Symbol.for("react.portal");function Y1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var qa=F1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _c(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ie.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Re;Ie.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(jv(299));return Y1(e,t,null,n)};Ie.flushSync=function(e){var t=qa.T,n=Re.p;try{if(qa.T=null,Re.p=2,e)return e()}finally{qa.T=t,Re.p=n,Re.d.f()}};Ie.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Re.d.C(e,t))};Ie.prefetchDNS=function(e){typeof e=="string"&&Re.d.D(e)};Ie.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=_c(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Re.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Re.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ie.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=_c(t.as,t.crossOrigin);Re.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Re.d.M(e)};Ie.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=_c(n,t.crossOrigin);Re.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ie.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=_c(t.as,t.crossOrigin);Re.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Re.d.m(e)};Ie.requestFormReset=function(e){Re.d.r(e)};Ie.unstable_batchedUpdates=function(e,t){return e(t)};Ie.useFormState=function(e,t,n){return qa.H.useFormState(e,t,n)};Ie.useFormStatus=function(){return qa.H.useHostTransitionStatus()};Ie.version="19.1.1";function Bv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bv)}catch(e){console.error(e)}}Bv(),zv.exports=Ie;var K1=zv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt=G1,qv=Q,$1=K1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Hv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Np(e){if(ko(e)!==e)throw Error(U(188))}function X1(e){var t=e.alternate;if(!t){if(t=ko(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Np(s),e;if(r===i)return Np(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Fv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Fv(e),t!==null)return t;e=e.sibling}return null}var wt=Object.assign,Z1=Symbol.for("react.element"),Ol=Symbol.for("react.transitional.element"),Ma=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),Qv=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),Yv=Symbol.for("react.consumer"),Ln=Symbol.for("react.context"),Bd=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),yf=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),_f=Symbol.for("react.activity"),W1=Symbol.for("react.memo_cache_sentinel"),Dp=Symbol.iterator;function Ra(e){return e===null||typeof e!="object"?null:(e=Dp&&e[Dp]||e["@@iterator"],typeof e=="function"?e:null)}var tb=Symbol.for("react.client.reference");function vf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===tb?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sr:return"Fragment";case gf:return"Profiler";case Qv:return"StrictMode";case pf:return"Suspense";case yf:return"SuspenseList";case _f:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ma:return"Portal";case Ln:return(e.displayName||"Context")+".Provider";case Yv:return(e._context.displayName||"Context")+".Consumer";case Bd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qd:return t=e.displayName||null,t!==null?t:vf(e.type)||"Memo";case gi:t=e._payload,e=e._init;try{return vf(e(t))}catch{}}return null}var ka=Array.isArray,X=qv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft=$1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ys={pending:!1,data:null,method:null,action:null},Ef=[],rr=-1;function Dn(e){return{current:e}}function ne(e){0>rr||(e.current=Ef[rr],Ef[rr]=null,rr--)}function Ct(e,t){rr++,Ef[rr]=e.current,e.current=t}var Tn=Dn(null),co=Dn(null),Oi=Dn(null),Eu=Dn(null);function Tu(e,t){switch(Ct(Oi,t),Ct(co,e),Ct(Tn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ky(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ky(t),e=c0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(Tn),Ct(Tn,e)}function Or(){ne(Tn),ne(co),ne(Oi)}function Tf(e){e.memoizedState!==null&&Ct(Eu,e);var t=Tn.current,n=c0(t,e.type);t!==n&&(Ct(co,e),Ct(Tn,n))}function Au(e){co.current===e&&(ne(Tn),ne(co)),Eu.current===e&&(ne(Eu),To._currentValue=ys)}var Af=Object.prototype.hasOwnProperty,Hd=Xt.unstable_scheduleCallback,Sh=Xt.unstable_cancelCallback,eb=Xt.unstable_shouldYield,nb=Xt.unstable_requestPaint,An=Xt.unstable_now,ib=Xt.unstable_getCurrentPriorityLevel,Kv=Xt.unstable_ImmediatePriority,$v=Xt.unstable_UserBlockingPriority,Su=Xt.unstable_NormalPriority,sb=Xt.unstable_LowPriority,Xv=Xt.unstable_IdlePriority,rb=Xt.log,ab=Xt.unstable_setDisableYieldValue,Po=null,Be=null;function Ri(e){if(typeof rb=="function"&&ab(e),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Po,e)}catch{}}var qe=Math.clz32?Math.clz32:ub,ob=Math.log,lb=Math.LN2;function ub(e){return e>>>=0,e===0?32:31-(ob(e)/lb|0)|0}var Vl=256,xl=4194304;function fs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=fs(i):(a&=l,a!==0?s=fs(a):n||(n=l&~e,n!==0&&(s=fs(n))))):(l=i&~r,l!==0?s=fs(l):a!==0?s=fs(a):n||(n=i&~e,n!==0&&(s=fs(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function Uo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function cb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zv(){var e=Vl;return Vl<<=1,!(Vl&4194048)&&(Vl=256),e}function Jv(){var e=xl;return xl<<=1,!(xl&62914560)&&(xl=4194304),e}function bh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Lo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hb(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-qe(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var y=m[d];y!==null&&(y.lane&=-536870913)}n&=~g}i!==0&&Wv(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function Wv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-qe(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function tE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-qe(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Gd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function eE(){var e=ft.p;return e!==0?e:(e=window.event,e===void 0?32:E0(e.type))}function fb(e,t){var n=ft.p;try{return ft.p=e,t()}finally{ft.p=n}}var is=Math.random().toString(36).slice(2),ye="__reactFiber$"+is,Ve="__reactProps$"+is,Xr="__reactContainer$"+is,Sf="__reactEvents$"+is,db="__reactListeners$"+is,mb="__reactHandles$"+is,Op="__reactResources$"+is,zo="__reactMarker$"+is;function Qd(e){delete e[ye],delete e[Ve],delete e[Sf],delete e[db],delete e[mb]}function ar(e){var t=e[ye];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xr]||n[ye]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ly(e);e!==null;){if(n=e[ye])return n;e=Ly(e)}return t}e=n,n=e.parentNode}return null}function Zr(e){if(e=e[ye]||e[Xr]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Pa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function _r(e){var t=e[Op];return t||(t=e[Op]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Wt(e){e[zo]=!0}var nE=new Set,iE={};function xs(e,t){Vr(e,t),Vr(e+"Capture",t)}function Vr(e,t){for(iE[e]=t,e=0;e<t.length;e++)nE.add(t[e])}var gb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vp={},xp={};function pb(e){return Af.call(xp,e)?!0:Af.call(Vp,e)?!1:gb.test(e)?xp[e]=!0:(Vp[e]=!0,!1)}function Zl(e,t,n){if(pb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ml(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Mn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var wh,Mp;function Zs(e){if(wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wh=t&&t[1]||"",Mp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wh+e+Mp}var Rh=!1;function Ih(e,t){if(!e||Rh)return"";Rh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(y){var m=y}Reflect.construct(e,[],g)}else{try{g.call()}catch(y){m=y}e.call(g.prototype)}}else{try{throw Error()}catch(y){m=y}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{Rh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Zs(n):""}function yb(e){switch(e.tag){case 26:case 27:case 5:return Zs(e.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 15:return Ih(e.type,!1);case 11:return Ih(e.type.render,!1);case 1:return Ih(e.type,!0);case 31:return Zs("Activity");default:return""}}function kp(e){try{var t="";do t+=yb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Xe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _b(e){var t=sE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bu(e){e._valueTracker||(e._valueTracker=_b(e))}function rE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=sE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vb=/[\n"\\]/g;function We(e){return e.replace(vb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function bf(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xe(t)):e.value!==""+Xe(t)&&(e.value=""+Xe(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?wf(e,a,Xe(t)):n!=null?wf(e,a,Xe(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Xe(l):e.removeAttribute("name")}function aE(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+Xe(n):"",t=t!=null?""+Xe(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function wf(e,t,n){t==="number"&&wu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function vr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Xe(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function oE(e,t,n){if(t!=null&&(t=""+Xe(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Xe(n):""}function lE(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(ka(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Xe(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function xr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Eb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Eb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function uE(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&Pp(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&Pp(e,r,t[r])}function Yd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ab=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jl(e){return Ab.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rf=null;function Kd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var or=null,Er=null;function Up(e){var t=Zr(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;t:switch(e=t.stateNode,t.type){case"input":if(bf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+We(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Ve]||null;if(!s)throw Error(U(90));bf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&rE(i)}break t;case"textarea":oE(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&vr(e,!!n.multiple,t,!1)}}}var Ch=!1;function cE(e,t,n){if(Ch)return e(t,n);Ch=!0;try{var i=e(t);return i}finally{if(Ch=!1,(or!==null||Er!==null)&&(Nc(),or&&(t=or,e=Er,Er=or=null,Up(t),e)))for(t=0;t<e.length;t++)Up(e[t])}}function ho(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ve]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),If=!1;if(Kn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){If=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{If=!1}var Ii=null,$d=null,Wl=null;function hE(){if(Wl)return Wl;var e,t=$d,n=t.length,i,s="value"in Ii?Ii.value:Ii.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return Wl=s.slice(e,1<i?1-i:void 0)}function tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kl(){return!0}function Lp(){return!1}function xe(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?kl:Lp,this.isPropagationStopped=Lp,this}return wt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),t}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=xe(Ms),jo=wt({},Ms,{view:0,detail:0}),Sb=xe(jo),Nh,Dh,Ca,Tc=wt({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ca&&(Ca&&e.type==="mousemove"?(Nh=e.screenX-Ca.screenX,Dh=e.screenY-Ca.screenY):Dh=Nh=0,Ca=e),Nh)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),zp=xe(Tc),bb=wt({},Tc,{dataTransfer:0}),wb=xe(bb),Rb=wt({},jo,{relatedTarget:0}),Oh=xe(Rb),Ib=wt({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Cb=xe(Ib),Nb=wt({},Ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Db=xe(Nb),Ob=wt({},Ms,{data:0}),jp=xe(Ob),Vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mb[e])?!!t[e]:!1}function Xd(){return kb}var Pb=wt({},jo,{key:function(e){if(e.key){var t=Vb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ub=xe(Pb),Lb=wt({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bp=xe(Lb),zb=wt({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),jb=xe(zb),Bb=wt({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),qb=xe(Bb),Hb=wt({},Tc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gb=xe(Hb),Fb=wt({},Ms,{newState:0,oldState:0}),Qb=xe(Fb),Yb=[9,13,27,32],Zd=Kn&&"CompositionEvent"in window,Ha=null;Kn&&"documentMode"in document&&(Ha=document.documentMode);var Kb=Kn&&"TextEvent"in window&&!Ha,fE=Kn&&(!Zd||Ha&&8<Ha&&11>=Ha),qp=" ",Hp=!1;function dE(e,t){switch(e){case"keyup":return Yb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lr=!1;function $b(e,t){switch(e){case"compositionend":return mE(t);case"keypress":return t.which!==32?null:(Hp=!0,qp);case"textInput":return e=t.data,e===qp&&Hp?null:e;default:return null}}function Xb(e,t){if(lr)return e==="compositionend"||!Zd&&dE(e,t)?(e=hE(),Wl=$d=Ii=null,lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fE&&t.locale!=="ko"?null:t.data;default:return null}}var Zb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zb[e.type]:t==="textarea"}function gE(e,t,n,i){or?Er?Er.push(i):Er=[i]:or=i,t=Hu(t,"onChange"),0<t.length&&(n=new Ec("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ga=null,fo=null;function Jb(e){o0(e,0)}function Ac(e){var t=Pa(e);if(rE(t))return e}function Fp(e,t){if(e==="change")return t}var pE=!1;if(Kn){var Vh;if(Kn){var xh="oninput"in document;if(!xh){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),xh=typeof Qp.oninput=="function"}Vh=xh}else Vh=!1;pE=Vh&&(!document.documentMode||9<document.documentMode)}function Yp(){Ga&&(Ga.detachEvent("onpropertychange",yE),fo=Ga=null)}function yE(e){if(e.propertyName==="value"&&Ac(fo)){var t=[];gE(t,fo,e,Kd(e)),cE(Jb,t)}}function Wb(e,t,n){e==="focusin"?(Yp(),Ga=t,fo=n,Ga.attachEvent("onpropertychange",yE)):e==="focusout"&&Yp()}function tw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ac(fo)}function ew(e,t){if(e==="click")return Ac(t)}function nw(e,t){if(e==="input"||e==="change")return Ac(t)}function iw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ye=typeof Object.is=="function"?Object.is:iw;function mo(e,t){if(Ye(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Af.call(t,s)||!Ye(e[s],t[s]))return!1}return!0}function Kp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $p(e,t){var n=Kp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Kp(n)}}function _E(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_E(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vE(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=wu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wu(e.document)}return t}function Jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sw=Kn&&"documentMode"in document&&11>=document.documentMode,ur=null,Cf=null,Fa=null,Nf=!1;function Xp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nf||ur==null||ur!==wu(i)||(i=ur,"selectionStart"in i&&Jd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fa&&mo(Fa,i)||(Fa=i,i=Hu(Cf,"onSelect"),0<i.length&&(t=new Ec("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ur)))}function hs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionrun:hs("Transition","TransitionRun"),transitionstart:hs("Transition","TransitionStart"),transitioncancel:hs("Transition","TransitionCancel"),transitionend:hs("Transition","TransitionEnd")},Mh={},EE={};Kn&&(EE=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function ks(e){if(Mh[e])return Mh[e];if(!cr[e])return e;var t=cr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in EE)return Mh[e]=t[n];return e}var TE=ks("animationend"),AE=ks("animationiteration"),SE=ks("animationstart"),rw=ks("transitionrun"),aw=ks("transitionstart"),ow=ks("transitioncancel"),bE=ks("transitionend"),wE=new Map,Df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Df.push("scrollEnd");function dn(e,t){wE.set(e,t),xs(t,[e])}var Zp=new WeakMap;function tn(e,t){if(typeof e=="object"&&e!==null){var n=Zp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:kp(t)},Zp.set(e,t),t)}return{value:e,source:t,stack:kp(t)}}var $e=[],hr=0,Wd=0;function Sc(){for(var e=hr,t=Wd=hr=0;t<e;){var n=$e[t];$e[t++]=null;var i=$e[t];$e[t++]=null;var s=$e[t];$e[t++]=null;var r=$e[t];if($e[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&RE(n,s,r)}}function bc(e,t,n,i){$e[hr++]=e,$e[hr++]=t,$e[hr++]=n,$e[hr++]=i,Wd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function tm(e,t,n,i){return bc(e,t,n,i),Ru(e)}function Jr(e,t){return bc(e,null,null,t),Ru(e)}function RE(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-qe(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function Ru(e){if(50<eo)throw eo=0,Zf=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var fr={};function lw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Le(e,t,n,i){return new lw(e,t,n,i)}function em(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fn(e,t){var n=e.alternate;return n===null?(n=Le(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function IE(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function eu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")em(e)&&(a=1);else if(typeof e=="string")a=cR(e,n,Tn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case _f:return e=Le(31,n,t,s),e.elementType=_f,e.lanes=r,e;case sr:return _s(n.children,s,r,t);case Qv:a=8,s|=24;break;case gf:return e=Le(12,n,t,s|2),e.elementType=gf,e.lanes=r,e;case pf:return e=Le(13,n,t,s),e.elementType=pf,e.lanes=r,e;case yf:return e=Le(19,n,t,s),e.elementType=yf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J1:case Ln:a=10;break t;case Yv:a=9;break t;case Bd:a=11;break t;case qd:a=14;break t;case gi:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Le(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function _s(e,t,n,i){return e=Le(7,e,i,t),e.lanes=n,e}function kh(e,t,n){return e=Le(6,e,null,t),e.lanes=n,e}function Ph(e,t,n){return t=Le(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var dr=[],mr=0,Iu=null,Cu=0,Ze=[],Je=0,vs=null,zn=1,jn="";function ds(e,t){dr[mr++]=Cu,dr[mr++]=Iu,Iu=e,Cu=t}function CE(e,t,n){Ze[Je++]=zn,Ze[Je++]=jn,Ze[Je++]=vs,vs=e;var i=zn;e=jn;var s=32-qe(i)-1;i&=~(1<<s),n+=1;var r=32-qe(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,zn=1<<32-qe(t)+s|n<<s|i,jn=r+e}else zn=1<<r|n<<s|i,jn=e}function nm(e){e.return!==null&&(ds(e,1),CE(e,1,0))}function im(e){for(;e===Iu;)Iu=dr[--mr],dr[mr]=null,Cu=dr[--mr],dr[mr]=null;for(;e===vs;)vs=Ze[--Je],Ze[Je]=null,jn=Ze[--Je],Ze[Je]=null,zn=Ze[--Je],Ze[Je]=null}var be=null,Pt=null,ht=!1,Es=null,vn=!1,Of=Error(U(519));function bs(e){var t=Error(U(418,""));throw go(tn(t,e)),Of}function Jp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[ye]=e,t[Ve]=i,n){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(n=0;n<_o.length;n++)nt(_o[n],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),aE(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),bu(t);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),lE(t,i.value,i.defaultValue,i.children),bu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||u0(t.textContent,n)?(i.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),i.onScroll!=null&&nt("scroll",t),i.onScrollEnd!=null&&nt("scrollend",t),i.onClick!=null&&(t.onclick=Vc),t=!0):t=!1,t||bs(e)}function Wp(e){for(be=e.return;be;)switch(be.tag){case 5:case 13:vn=!1;return;case 27:case 3:vn=!0;return;default:be=be.return}}function Na(e){if(e!==be)return!1;if(!ht)return Wp(e),ht=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||id(e.type,e.memoizedProps)),n=!n),n&&Pt&&bs(e),Wp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Pt=hn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Pt=null}}else t===27?(t=Pt,ss(e.type)?(e=ad,ad=null,Pt=e):Pt=t):Pt=be?hn(e.stateNode.nextSibling):null;return!0}function Bo(){Pt=be=null,ht=!1}function ty(){var e=Es;return e!==null&&(De===null?De=e:De.push.apply(De,e),Es=null),e}function go(e){Es===null?Es=[e]:Es.push(e)}var Vf=Dn(null),Ps=null,Bn=null;function yi(e,t,n){Ct(Vf,t._currentValue),t._currentValue=n}function Qn(e){e._currentValue=Vf.current,ne(Vf)}function xf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Mf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),xf(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),xf(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function qo(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;Ye(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===Eu.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(To):e=[To])}s=s.return}e!==null&&Mf(t,e,n,i),t.flags|=262144}function Nu(e){for(e=e.firstContext;e!==null;){if(!Ye(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ws(e){Ps=e,Bn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _e(e){return NE(Ps,e)}function Pl(e,t){return Ps===null&&ws(e),NE(e,t)}function NE(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Bn===null){if(e===null)throw Error(U(308));Bn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Bn=Bn.next=t;return n}var uw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},cw=Xt.unstable_scheduleCallback,hw=Xt.unstable_NormalPriority,Yt={$$typeof:Ln,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sm(){return{controller:new uw,data:new Map,refCount:0}}function Ho(e){e.refCount--,e.refCount===0&&cw(hw,function(){e.controller.abort()})}var Qa=null,kf=0,Mr=0,Tr=null;function fw(e,t){if(Qa===null){var n=Qa=[];kf=0,Mr=Im(),Tr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return kf++,t.then(ey,ey),t}function ey(){if(--kf===0&&Qa!==null){Tr!==null&&(Tr.status="fulfilled");var e=Qa;Qa=null,Mr=0,Tr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function dw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var ny=X.S;X.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&fw(e,t),ny!==null&&ny(e,t)};var Ts=Dn(null);function rm(){var e=Ts.current;return e!==null?e:At.pooledCache}function nu(e,t){t===null?Ct(Ts,Ts.current):Ct(Ts,t.pool)}function DE(){var e=rm();return e===null?null:{parent:Yt._currentValue,pool:e}}var Go=Error(U(460)),OE=Error(U(474)),wc=Error(U(542)),Pf={then:function(){}};function iy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ul(){}function VE(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ul,Ul),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ry(e),e;default:if(typeof t.status=="string")t.then(Ul,Ul);else{if(e=At,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ry(e),e}throw Ya=t,Go}}var Ya=null;function sy(){if(Ya===null)throw Error(U(459));var e=Ya;return Ya=null,e}function ry(e){if(e===Go||e===wc)throw Error(U(483))}var pi=!1;function am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Ru(e),RE(e,null,n),t}return bc(e,i,t,n),Ru(e)}function Ka(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,tE(e,n)}}function Uh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Lf=!1;function $a(){if(Lf){var e=Tr;if(e!==null)throw e}}function Xa(e,t,n,i){Lf=!1;var s=e.updateQueue;pi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,y=m!==l.lane;if(y?(lt&m)===m:(i&m)===m){m!==0&&m===Mr&&(Lf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var O=e,V=l;m=t;var k=n;switch(V.tag){case 1:if(O=V.payload,typeof O=="function"){g=O.call(k,g,m);break t}g=O;break t;case 3:O.flags=O.flags&-65537|128;case 0:if(O=V.payload,m=typeof O=="function"?O.call(k,g,m):O,m==null)break t;g=wt({},g,m);break t;case 2:pi=!0}}m=l.callback,m!==null&&(e.flags|=64,y&&(e.flags|=8192),y=s.callbacks,y===null?s.callbacks=[m]:y.push(m))}else y={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=y,u=g):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),$i|=a,e.lanes=a,e.memoizedState=g}}function xE(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function ME(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xE(n[e],t)}var kr=Dn(null),Du=Dn(0);function ay(e,t){e=Zn,Ct(Du,e),Ct(kr,t),Zn=e|t.baseLanes}function zf(){Ct(Du,Zn),Ct(kr,kr.current)}function om(){Zn=Du.current,ne(kr),ne(Du)}var Yi=0,et=null,yt=null,qt=null,Ou=!1,Ar=!1,Rs=!1,Vu=0,po=0,Sr=null,mw=0;function Lt(){throw Error(U(321))}function lm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ye(e[n],t[n]))return!1;return!0}function um(e,t,n,i,s,r){return Yi=r,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X.H=e===null||e.memoizedState===null?hT:fT,Rs=!1,r=n(i,s),Rs=!1,Ar&&(r=PE(t,n,i,s)),kE(e),r}function kE(e){X.H=xu;var t=yt!==null&&yt.next!==null;if(Yi=0,qt=yt=et=null,Ou=!1,po=0,Sr=null,t)throw Error(U(300));e===null||ee||(e=e.dependencies,e!==null&&Nu(e)&&(ee=!0))}function PE(e,t,n,i){et=e;var s=0;do{if(Ar&&(Sr=null),po=0,Ar=!1,25<=s)throw Error(U(301));if(s+=1,qt=yt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}X.H=Tw,r=t(n,i)}while(Ar);return r}function gw(){var e=X.H,t=e.useState()[0];return t=typeof t.then=="function"?Fo(t):t,e=e.useState()[0],(yt!==null?yt.memoizedState:null)!==e&&(et.flags|=1024),t}function cm(){var e=Vu!==0;return Vu=0,e}function hm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function fm(e){if(Ou){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ou=!1}Yi=0,qt=yt=et=null,Ar=!1,po=Vu=0,Sr=null}function Ce(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?et.memoizedState=qt=e:qt=qt.next=e,qt}function Ft(){if(yt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=qt===null?et.memoizedState:qt.next;if(t!==null)qt=t,yt=e;else{if(e===null)throw et.alternate===null?Error(U(467)):Error(U(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},qt===null?et.memoizedState=qt=e:qt=qt.next=e}return qt}function dm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(e){var t=po;return po+=1,Sr===null&&(Sr=[]),e=VE(Sr,e,t),t=et,(qt===null?t.memoizedState:qt.next)===null&&(t=t.alternate,X.H=t===null||t.memoizedState===null?hT:fT),e}function Rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fo(e);if(e.$$typeof===Ln)return _e(e)}throw Error(U(438,String(e)))}function mm(e){var t=null,n=et.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=et.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=dm(),et.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=W1;return t.index++,n}function $n(e,t){return typeof t=="function"?t(e):t}function iu(e){var t=Ft();return gm(t,yt,e)}function gm(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(lt&g)===g:(Yi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Mr&&(d=!0);else if((Yi&m)===m){h=h.next,m===Mr&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,et.lanes|=m,$i|=m;g=h.action,Rs&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,et.lanes|=g,$i|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!Ye(r,e.memoizedState)&&(ee=!0,d&&(n=Tr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Lh(e){var t=Ft(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);Ye(r,t.memoizedState)||(ee=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function UE(e,t,n){var i=et,s=Ft(),r=ht;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!Ye((yt||s).memoizedState,n);a&&(s.memoizedState=n,ee=!0),s=s.queue;var l=jE.bind(null,i,s,e);if(Qo(2048,8,l,[e]),s.getSnapshot!==t||a||qt!==null&&qt.memoizedState.tag&1){if(i.flags|=2048,Pr(9,Ic(),zE.bind(null,i,s,n,t),null),At===null)throw Error(U(349));r||Yi&124||LE(i,t,n)}return n}function LE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=et.updateQueue,t===null?(t=dm(),et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zE(e,t,n,i){t.value=n,t.getSnapshot=i,BE(t)&&qE(e)}function jE(e,t,n){return n(function(){BE(t)&&qE(e)})}function BE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ye(e,n)}catch{return!0}}function qE(e){var t=Jr(e,2);t!==null&&Ge(t,e,2)}function jf(e){var t=Ce();if(typeof e=="function"){var n=e;if(e=n(),Rs){Ri(!0);try{n()}finally{Ri(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:e},t}function HE(e,t,n,i){return e.baseState=n,gm(e,yt,typeof i=="function"?i:$n)}function pw(e,t,n,i,s){if(Cc(e))throw Error(U(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};X.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,GE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function GE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=X.T,a={};X.T=a;try{var l=n(s,i),u=X.S;u!==null&&u(a,l),oy(e,t,l)}catch(h){Bf(e,t,h)}finally{X.T=r}}else try{r=n(s,i),oy(e,t,r)}catch(h){Bf(e,t,h)}}function oy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ly(e,t,i)},function(i){return Bf(e,t,i)}):ly(e,t,n)}function ly(e,t,n){t.status="fulfilled",t.value=n,FE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,GE(e,n)))}function Bf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,FE(t),t=t.next;while(t!==i)}e.action=null}function FE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function QE(e,t){return t}function uy(e,t){if(ht){var n=At.formState;if(n!==null){t:{var i=et;if(ht){if(Pt){e:{for(var s=Pt,r=vn;s.nodeType!==8;){if(!r){s=null;break e}if(s=hn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Pt=hn(s.nextSibling),i=s.data==="F!";break t}}bs(i)}i=!1}i&&(t=n[0])}}return n=Ce(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QE,lastRenderedState:t},n.queue=i,n=lT.bind(null,et,i),i.dispatch=n,i=jf(!1),r=vm.bind(null,et,!1,i.queue),i=Ce(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=pw.bind(null,et,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function cy(e){var t=Ft();return YE(t,yt,e)}function YE(e,t,n){if(t=gm(e,t,QE)[0],e=iu($n)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Fo(t)}catch(a){throw a===Go?wc:a}else i=t;t=Ft();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(et.flags|=2048,Pr(9,Ic(),yw.bind(null,s,n),null)),[i,r,e]}function yw(e,t){e.action=t}function hy(e){var t=Ft(),n=yt;if(n!==null)return YE(t,n,e);Ft(),t=t.memoizedState,n=Ft();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Pr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=et.updateQueue,t===null&&(t=dm(),et.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ic(){return{destroy:void 0,resource:void 0}}function KE(){return Ft().memoizedState}function su(e,t,n,i){var s=Ce();i=i===void 0?null:i,et.flags|=e,s.memoizedState=Pr(1|t,Ic(),n,i)}function Qo(e,t,n,i){var s=Ft();i=i===void 0?null:i;var r=s.memoizedState.inst;yt!==null&&i!==null&&lm(i,yt.memoizedState.deps)?s.memoizedState=Pr(t,r,n,i):(et.flags|=e,s.memoizedState=Pr(1|t,r,n,i))}function fy(e,t){su(8390656,8,e,t)}function $E(e,t){Qo(2048,8,e,t)}function XE(e,t){return Qo(4,2,e,t)}function ZE(e,t){return Qo(4,4,e,t)}function JE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WE(e,t,n){n=n!=null?n.concat([e]):null,Qo(4,4,JE.bind(null,t,e),n)}function pm(){}function tT(e,t){var n=Ft();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&lm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function eT(e,t){var n=Ft();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&lm(t,i[1]))return i[0];if(i=e(),Rs){Ri(!0);try{e()}finally{Ri(!1)}}return n.memoizedState=[i,t],i}function ym(e,t,n){return n===void 0||Yi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=FT(),et.lanes|=e,$i|=e,n)}function nT(e,t,n,i){return Ye(n,t)?n:kr.current!==null?(e=ym(e,n,i),Ye(e,t)||(ee=!0),e):Yi&42?(e=FT(),et.lanes|=e,$i|=e,t):(ee=!0,e.memoizedState=n)}function iT(e,t,n,i,s){var r=ft.p;ft.p=r!==0&&8>r?r:8;var a=X.T,l={};X.T=l,vm(e,!1,t,n);try{var u=s(),h=X.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=dw(u,i);Za(e,t,d,He(e))}else Za(e,t,i,He(e))}catch(g){Za(e,t,{then:function(){},status:"rejected",reason:g},He())}finally{ft.p=r,X.T=a}}function _w(){}function qf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var s=sT(e).queue;iT(e,s,t,ys,n===null?_w:function(){return rT(e),n(i)})}function sT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ys,baseState:ys,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:ys},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function rT(e){var t=sT(e).next.queue;Za(e,t,{},He())}function _m(){return _e(To)}function aT(){return Ft().memoizedState}function oT(){return Ft().memoizedState}function vw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=He();e=Vi(n);var i=xi(t,e,n);i!==null&&(Ge(i,t,n),Ka(i,t,n)),t={cache:sm()},e.payload=t;return}t=t.return}}function Ew(e,t,n){var i=He();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Cc(e)?uT(t,n):(n=tm(e,t,n,i),n!==null&&(Ge(n,e,i),cT(n,t,i)))}function lT(e,t,n){var i=He();Za(e,t,n,i)}function Za(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))uT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ye(l,a))return bc(e,t,s,0),At===null&&Sc(),!1}catch{}finally{}if(n=tm(e,t,s,i),n!==null)return Ge(n,e,i),cT(n,t,i),!0}return!1}function vm(e,t,n,i){if(i={lane:2,revertLane:Im(),action:i,hasEagerState:!1,eagerState:null,next:null},Cc(e)){if(t)throw Error(U(479))}else t=tm(e,n,i,2),t!==null&&Ge(t,e,2)}function Cc(e){var t=e.alternate;return e===et||t!==null&&t===et}function uT(e,t){Ar=Ou=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cT(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,tE(e,n)}}var xu={readContext:_e,use:Rc,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},hT={readContext:_e,use:Rc,useCallback:function(e,t){return Ce().memoizedState=[e,t===void 0?null:t],e},useContext:_e,useEffect:fy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,su(4194308,4,JE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return su(4194308,4,e,t)},useInsertionEffect:function(e,t){su(4,2,e,t)},useMemo:function(e,t){var n=Ce();t=t===void 0?null:t;var i=e();if(Rs){Ri(!0);try{e()}finally{Ri(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ce();if(n!==void 0){var s=n(t);if(Rs){Ri(!0);try{n(t)}finally{Ri(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=Ew.bind(null,et,e),[i.memoizedState,e]},useRef:function(e){var t=Ce();return e={current:e},t.memoizedState=e},useState:function(e){e=jf(e);var t=e.queue,n=lT.bind(null,et,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:pm,useDeferredValue:function(e,t){var n=Ce();return ym(n,e,t)},useTransition:function(){var e=jf(!1);return e=iT.bind(null,et,e.queue,!0,!1),Ce().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=et,s=Ce();if(ht){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),At===null)throw Error(U(349));lt&124||LE(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,fy(jE.bind(null,i,r,e),[e]),i.flags|=2048,Pr(9,Ic(),zE.bind(null,i,r,n,t),null),n},useId:function(){var e=Ce(),t=At.identifierPrefix;if(ht){var n=jn,i=zn;n=(i&~(1<<32-qe(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Vu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=mw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:_m,useFormState:uy,useActionState:uy,useOptimistic:function(e){var t=Ce();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=vm.bind(null,et,!0,n),n.dispatch=t,[e,t]},useMemoCache:mm,useCacheRefresh:function(){return Ce().memoizedState=vw.bind(null,et)}},fT={readContext:_e,use:Rc,useCallback:tT,useContext:_e,useEffect:$E,useImperativeHandle:WE,useInsertionEffect:XE,useLayoutEffect:ZE,useMemo:eT,useReducer:iu,useRef:KE,useState:function(){return iu($n)},useDebugValue:pm,useDeferredValue:function(e,t){var n=Ft();return nT(n,yt.memoizedState,e,t)},useTransition:function(){var e=iu($n)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:Fo(e),t]},useSyncExternalStore:UE,useId:aT,useHostTransitionStatus:_m,useFormState:cy,useActionState:cy,useOptimistic:function(e,t){var n=Ft();return HE(n,yt,e,t)},useMemoCache:mm,useCacheRefresh:oT},Tw={readContext:_e,use:Rc,useCallback:tT,useContext:_e,useEffect:$E,useImperativeHandle:WE,useInsertionEffect:XE,useLayoutEffect:ZE,useMemo:eT,useReducer:Lh,useRef:KE,useState:function(){return Lh($n)},useDebugValue:pm,useDeferredValue:function(e,t){var n=Ft();return yt===null?ym(n,e,t):nT(n,yt.memoizedState,e,t)},useTransition:function(){var e=Lh($n)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:Fo(e),t]},useSyncExternalStore:UE,useId:aT,useHostTransitionStatus:_m,useFormState:hy,useActionState:hy,useOptimistic:function(e,t){var n=Ft();return yt!==null?HE(n,yt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mm,useCacheRefresh:oT},br=null,yo=0;function Ll(e){var t=yo;return yo+=1,br===null&&(br=[]),VE(br,e,t)}function Da(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zl(e,t){throw t.$$typeof===Z1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dy(e){var t=e._init;return t(e._payload)}function dT(e){function t(w,v){if(e){var R=w.deletions;R===null?(w.deletions=[v],w.flags|=16):R.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function i(w){for(var v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(w,v){return w=Fn(w,v),w.index=0,w.sibling=null,w}function r(w,v,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<v?(w.flags|=67108866,v):R):(w.flags|=67108866,v)):(w.flags|=1048576,v)}function a(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function l(w,v,R,D){return v===null||v.tag!==6?(v=kh(R,w.mode,D),v.return=w,v):(v=s(v,R),v.return=w,v)}function u(w,v,R,D){var L=R.type;return L===sr?d(w,v,R.props.children,D,R.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===gi&&dy(L)===v.type)?(v=s(v,R.props),Da(v,R),v.return=w,v):(v=eu(R.type,R.key,R.props,null,w.mode,D),Da(v,R),v.return=w,v)}function h(w,v,R,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Ph(R,w.mode,D),v.return=w,v):(v=s(v,R.children||[]),v.return=w,v)}function d(w,v,R,D,L){return v===null||v.tag!==7?(v=_s(R,w.mode,D,L),v.return=w,v):(v=s(v,R),v.return=w,v)}function g(w,v,R){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=kh(""+v,w.mode,R),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:return R=eu(v.type,v.key,v.props,null,w.mode,R),Da(R,v),R.return=w,R;case Ma:return v=Ph(v,w.mode,R),v.return=w,v;case gi:var D=v._init;return v=D(v._payload),g(w,v,R)}if(ka(v)||Ra(v))return v=_s(v,w.mode,R,null),v.return=w,v;if(typeof v.then=="function")return g(w,Ll(v),R);if(v.$$typeof===Ln)return g(w,Pl(w,v),R);zl(w,v)}return null}function m(w,v,R,D){var L=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(w,v,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ol:return R.key===L?u(w,v,R,D):null;case Ma:return R.key===L?h(w,v,R,D):null;case gi:return L=R._init,R=L(R._payload),m(w,v,R,D)}if(ka(R)||Ra(R))return L!==null?null:d(w,v,R,D,null);if(typeof R.then=="function")return m(w,v,Ll(R),D);if(R.$$typeof===Ln)return m(w,v,Pl(w,R),D);zl(w,R)}return null}function y(w,v,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return w=w.get(R)||null,l(v,w,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ol:return w=w.get(D.key===null?R:D.key)||null,u(v,w,D,L);case Ma:return w=w.get(D.key===null?R:D.key)||null,h(v,w,D,L);case gi:var B=D._init;return D=B(D._payload),y(w,v,R,D,L)}if(ka(D)||Ra(D))return w=w.get(R)||null,d(v,w,D,L,null);if(typeof D.then=="function")return y(w,v,R,Ll(D),L);if(D.$$typeof===Ln)return y(w,v,R,Pl(v,D),L);zl(v,D)}return null}function O(w,v,R,D){for(var L=null,B=null,T=v,_=v=0,A=null;T!==null&&_<R.length;_++){T.index>_?(A=T,T=null):A=T.sibling;var E=m(w,T,R[_],D);if(E===null){T===null&&(T=A);break}e&&T&&E.alternate===null&&t(w,T),v=r(E,v,_),B===null?L=E:B.sibling=E,B=E,T=A}if(_===R.length)return n(w,T),ht&&ds(w,_),L;if(T===null){for(;_<R.length;_++)T=g(w,R[_],D),T!==null&&(v=r(T,v,_),B===null?L=T:B.sibling=T,B=T);return ht&&ds(w,_),L}for(T=i(T);_<R.length;_++)A=y(T,w,_,R[_],D),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?_:A.key),v=r(A,v,_),B===null?L=A:B.sibling=A,B=A);return e&&T.forEach(function(S){return t(w,S)}),ht&&ds(w,_),L}function V(w,v,R,D){if(R==null)throw Error(U(151));for(var L=null,B=null,T=v,_=v=0,A=null,E=R.next();T!==null&&!E.done;_++,E=R.next()){T.index>_?(A=T,T=null):A=T.sibling;var S=m(w,T,E.value,D);if(S===null){T===null&&(T=A);break}e&&T&&S.alternate===null&&t(w,T),v=r(S,v,_),B===null?L=S:B.sibling=S,B=S,T=A}if(E.done)return n(w,T),ht&&ds(w,_),L;if(T===null){for(;!E.done;_++,E=R.next())E=g(w,E.value,D),E!==null&&(v=r(E,v,_),B===null?L=E:B.sibling=E,B=E);return ht&&ds(w,_),L}for(T=i(T);!E.done;_++,E=R.next())E=y(T,w,_,E.value,D),E!==null&&(e&&E.alternate!==null&&T.delete(E.key===null?_:E.key),v=r(E,v,_),B===null?L=E:B.sibling=E,B=E);return e&&T.forEach(function(I){return t(w,I)}),ht&&ds(w,_),L}function k(w,v,R,D){if(typeof R=="object"&&R!==null&&R.type===sr&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ol:t:{for(var L=R.key;v!==null;){if(v.key===L){if(L=R.type,L===sr){if(v.tag===7){n(w,v.sibling),D=s(v,R.props.children),D.return=w,w=D;break t}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===gi&&dy(L)===v.type){n(w,v.sibling),D=s(v,R.props),Da(D,R),D.return=w,w=D;break t}n(w,v);break}else t(w,v);v=v.sibling}R.type===sr?(D=_s(R.props.children,w.mode,D,R.key),D.return=w,w=D):(D=eu(R.type,R.key,R.props,null,w.mode,D),Da(D,R),D.return=w,w=D)}return a(w);case Ma:t:{for(L=R.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(w,v.sibling),D=s(v,R.children||[]),D.return=w,w=D;break t}else{n(w,v);break}else t(w,v);v=v.sibling}D=Ph(R,w.mode,D),D.return=w,w=D}return a(w);case gi:return L=R._init,R=L(R._payload),k(w,v,R,D)}if(ka(R))return O(w,v,R,D);if(Ra(R)){if(L=Ra(R),typeof L!="function")throw Error(U(150));return R=L.call(R),V(w,v,R,D)}if(typeof R.then=="function")return k(w,v,Ll(R),D);if(R.$$typeof===Ln)return k(w,v,Pl(w,R),D);zl(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,v!==null&&v.tag===6?(n(w,v.sibling),D=s(v,R),D.return=w,w=D):(n(w,v),D=kh(R,w.mode,D),D.return=w,w=D),a(w)):n(w,v)}return function(w,v,R,D){try{yo=0;var L=k(w,v,R,D);return br=null,L}catch(T){if(T===Go||T===wc)throw T;var B=Le(29,T,null,w.mode);return B.lanes=D,B.return=w,B}finally{}}}var Ur=dT(!0),mT=dT(!1),nn=Dn(null),Sn=null;function _i(e){var t=e.alternate;Ct(Kt,Kt.current&1),Ct(nn,e),Sn===null&&(t===null||kr.current!==null||t.memoizedState!==null)&&(Sn=e)}function gT(e){if(e.tag===22){if(Ct(Kt,Kt.current),Ct(nn,e),Sn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Sn=e)}}else vi()}function vi(){Ct(Kt,Kt.current),Ct(nn,nn.current)}function qn(e){ne(nn),Sn===e&&(Sn=null),ne(Kt)}var Kt=Dn(0);function Mu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||rd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:wt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hf={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=He(),s=Vi(i);s.payload=t,n!=null&&(s.callback=n),t=xi(e,s,i),t!==null&&(Ge(t,e,i),Ka(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=He(),s=Vi(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=xi(e,s,i),t!==null&&(Ge(t,e,i),Ka(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),i=Vi(n);i.tag=2,t!=null&&(i.callback=t),t=xi(e,i,n),t!==null&&(Ge(t,e,n),Ka(t,e,n))}};function my(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!mo(n,i)||!mo(s,r):!0}function gy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Hf.enqueueReplaceState(t,t.state,null)}function Is(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=wt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var ku=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function pT(e){ku(e)}function yT(e){console.error(e)}function _T(e){ku(e)}function Pu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function py(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Gf(e,t,n){return n=Vi(n),n.tag=3,n.payload={element:null},n.callback=function(){Pu(e,t)},n}function vT(e){return e=Vi(e),e.tag=3,e}function ET(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){py(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){py(t,n,i),typeof s!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Aw(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&qo(t,n,s,!0),n=nn.current,n!==null){switch(n.tag){case 13:return Sn===null?Jf():n.alternate===null&&Ut===0&&(Ut=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Pf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Xh(e,i,s)),!1;case 22:return n.flags|=65536,i===Pf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Xh(e,i,s)),!1}throw Error(U(435,n.tag))}return Xh(e,i,s),Jf(),!1}if(ht)return t=nn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Of&&(e=Error(U(422),{cause:i}),go(tn(e,n)))):(i!==Of&&(t=Error(U(423),{cause:i}),go(tn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=tn(i,n),s=Gf(e.stateNode,i,s),Uh(e,s),Ut!==4&&(Ut=2)),!1;var r=Error(U(520),{cause:i});if(r=tn(r,n),to===null?to=[r]:to.push(r),Ut!==4&&(Ut=2),t===null)return!0;i=tn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Gf(n.stateNode,i,e),Uh(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Mi===null||!Mi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=vT(s),ET(s,e,n,i),Uh(n,s),!1}n=n.return}while(n!==null);return!1}var TT=Error(U(461)),ee=!1;function re(e,t,n,i){t.child=e===null?mT(t,null,n,i):Ur(t,e.child,n,i)}function yy(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return ws(t),i=um(e,t,n,a,r,s),l=cm(),e!==null&&!ee?(hm(e,t,s),Xn(e,t,s)):(ht&&l&&nm(t),t.flags|=1,re(e,t,i,s),t.child)}function _y(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!em(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,AT(e,t,r,i,s)):(e=eu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Em(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(a,i)&&e.ref===t.ref)return Xn(e,t,s)}return t.flags|=1,e=Fn(r,i),e.ref=t.ref,e.return=t,t.child=e}function AT(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(mo(r,i)&&e.ref===t.ref)if(ee=!1,t.pendingProps=i=r,Em(e,s))e.flags&131072&&(ee=!0);else return t.lanes=e.lanes,Xn(e,t,s)}return Ff(e,t,n,i,s)}function ST(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return vy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nu(t,r!==null?r.cachePool:null),r!==null?ay(t,r):zf(),gT(t);else return t.lanes=t.childLanes=536870912,vy(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(nu(t,r.cachePool),ay(t,r),vi(),t.memoizedState=null):(e!==null&&nu(t,null),zf(),vi());return re(e,t,s,n),t.child}function vy(e,t,n,i){var s=rm();return s=s===null?null:{parent:Yt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&nu(t,null),zf(),gT(t),e!==null&&qo(e,t,i,!0),null}function ru(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ff(e,t,n,i,s){return ws(t),n=um(e,t,n,i,void 0,s),i=cm(),e!==null&&!ee?(hm(e,t,s),Xn(e,t,s)):(ht&&i&&nm(t),t.flags|=1,re(e,t,n,s),t.child)}function Ey(e,t,n,i,s,r){return ws(t),t.updateQueue=null,n=PE(t,i,n,s),kE(e),i=cm(),e!==null&&!ee?(hm(e,t,r),Xn(e,t,r)):(ht&&i&&nm(t),t.flags|=1,re(e,t,n,r),t.child)}function Ty(e,t,n,i,s){if(ws(t),t.stateNode===null){var r=fr,a=n.contextType;typeof a=="object"&&a!==null&&(r=_e(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Hf,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},am(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?_e(a):fr,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(zh(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Hf.enqueueReplaceState(r,r.state,null),Xa(t,i,r,s),$a(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=Is(n,l);r.props=u;var h=r.context,d=n.contextType;a=fr,typeof d=="object"&&d!==null&&(a=_e(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&gy(t,r,i,a),pi=!1;var m=t.memoizedState;r.state=m,Xa(t,i,r,s),$a(),h=t.memoizedState,l||m!==h||pi?(typeof g=="function"&&(zh(t,n,g,i),h=t.memoizedState),(u=pi||my(t,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Uf(e,t),a=t.memoizedProps,d=Is(n,a),r.props=d,g=t.pendingProps,m=r.context,h=n.contextType,u=fr,typeof h=="object"&&h!==null&&(u=_e(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||m!==u)&&gy(t,r,i,u),pi=!1,m=t.memoizedState,r.state=m,Xa(t,i,r,s),$a();var y=t.memoizedState;a!==g||m!==y||pi||e!==null&&e.dependencies!==null&&Nu(e.dependencies)?(typeof l=="function"&&(zh(t,n,l,i),y=t.memoizedState),(d=pi||my(t,n,d,i,m,y,u)||e!==null&&e.dependencies!==null&&Nu(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,y,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,y,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),r.props=i,r.state=y,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,ru(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Ur(t,e.child,null,s),t.child=Ur(t,null,n,s)):re(e,t,n,s),t.memoizedState=r.state,e=t.child):e=Xn(e,t,s),e}function Ay(e,t,n,i){return Bo(),t.flags|=256,re(e,t,n,i),t.child}var jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bh(e){return{baseLanes:e,cachePool:DE()}}function qh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=en),e}function bT(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(Kt.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(s?_i(t):vi(),ht){var l=Pt,u;if(u=l){t:{for(u=l,l=vn;u.nodeType!==8;){if(!l){l=null;break t}if(u=hn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:vs!==null?{id:zn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},u=Le(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,be=t,Pt=null,u=!0):u=!1}u||bs(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return rd(l)?t.lanes=32:t.lanes=536870912,null;qn(t)}return l=i.children,i=i.fallback,s?(vi(),s=t.mode,l=Uu({mode:"hidden",children:l},s),i=_s(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=Bh(n),s.childLanes=qh(e,a,n),t.memoizedState=jh,i):(_i(t),Qf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(_i(t),t.flags&=-257,t=Hh(e,t,n)):t.memoizedState!==null?(vi(),t.child=e.child,t.flags|=128,t=null):(vi(),s=i.fallback,l=t.mode,i=Uu({mode:"visible",children:i.children},l),s=_s(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Ur(t,e.child,null,n),i=t.child,i.memoizedState=Bh(n),i.childLanes=qh(e,a,n),t.memoizedState=jh,t=s);else if(_i(t),rd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,go({value:i,source:null,stack:null}),t=Hh(e,t,n)}else if(ee||qo(e,t,n,!1),a=(n&e.childLanes)!==0,ee||a){if(a=At,a!==null&&(i=n&-n,i=i&42?1:Gd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Jr(e,i),Ge(a,e,i),TT;l.data==="$?"||Jf(),t=Hh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Pt=hn(l.nextSibling),be=t,ht=!0,Es=null,vn=!1,e!==null&&(Ze[Je++]=zn,Ze[Je++]=jn,Ze[Je++]=vs,zn=e.id,jn=e.overflow,vs=t),t=Qf(t,i.children),t.flags|=4096);return t}return s?(vi(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=Fn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=Fn(h,s):(s=_s(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=Bh(n):(u=l.cachePool,u!==null?(h=Yt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=DE(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=qh(e,a,n),t.memoizedState=jh,i):(_i(t),n=e.child,e=n.sibling,n=Fn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Qf(e,t){return t=Uu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Uu(e,t){return e=Le(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hh(e,t,n){return Ur(t,e.child,null,n),e=Qf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),xf(e.return,t,n)}function Gh(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function wT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(re(e,t,i.children,n),i=Kt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sy(e,n,t);else if(e.tag===19)Sy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Ct(Kt,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Mu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Gh(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Mu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Gh(t,!0,n,null,r);break;case"together":Gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$i|=t.lanes,!(n&t.childLanes))if(e!==null){if(qo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Fn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Em(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Nu(e)))}function Sw(e,t,n){switch(t.tag){case 3:Tu(t,t.stateNode.containerInfo),yi(t,Yt,e.memoizedState.cache),Bo();break;case 27:case 5:Tf(t);break;case 4:Tu(t,t.stateNode.containerInfo);break;case 10:yi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(_i(t),t.flags|=128,null):n&t.child.childLanes?bT(e,t,n):(_i(t),e=Xn(e,t,n),e!==null?e.sibling:null);_i(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(qo(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return wT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ct(Kt,Kt.current),i)break;return null;case 22:case 23:return t.lanes=0,ST(e,t,n);case 24:yi(t,Yt,e.memoizedState.cache)}return Xn(e,t,n)}function RT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ee=!0;else{if(!Em(e,n)&&!(t.flags&128))return ee=!1,Sw(e,t,n);ee=!!(e.flags&131072)}else ee=!1,ht&&t.flags&1048576&&CE(t,Cu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")em(i)?(e=Is(i,e),t.tag=1,t=Ty(null,t,i,e,n)):(t.tag=0,t=Ff(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Bd){t.tag=11,t=yy(null,t,i,e,n);break t}else if(s===qd){t.tag=14,t=_y(null,t,i,e,n);break t}}throw t=vf(i)||i,Error(U(306,t,""))}}return t;case 0:return Ff(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=Is(i,t.pendingProps),Ty(e,t,i,s,n);case 3:t:{if(Tu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,Uf(e,t),Xa(t,i,null,n);var a=t.memoizedState;if(i=a.cache,yi(t,Yt,i),i!==r.cache&&Mf(t,[Yt],n,!0),$a(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Ay(e,t,i,n);break t}else if(i!==s){s=tn(Error(U(424)),t),go(s),t=Ay(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Pt=hn(e.firstChild),be=t,ht=!0,Es=null,vn=!0,n=mT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Bo(),i===s){t=Xn(e,t,n);break t}re(e,t,i,n)}t=t.child}return t;case 26:return ru(e,t),e===null?(n=jy(t.type,null,t.pendingProps,null))?t.memoizedState=n:ht||(n=t.type,e=t.pendingProps,i=Gu(Oi.current).createElement(n),i[ye]=t,i[Ve]=e,ce(i,n,e),Wt(i),t.stateNode=i):t.memoizedState=jy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tf(t),e===null&&ht&&(i=t.stateNode=f0(t.type,t.pendingProps,Oi.current),be=t,vn=!0,s=Pt,ss(t.type)?(ad=s,Pt=hn(i.firstChild)):Pt=s),re(e,t,t.pendingProps.children,n),ru(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((s=i=Pt)&&(i=Zw(i,t.type,t.pendingProps,vn),i!==null?(t.stateNode=i,be=t,Pt=hn(i.firstChild),vn=!1,s=!0):s=!1),s||bs(t)),Tf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,id(s,r)?i=null:a!==null&&id(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=um(e,t,gw,null,null,n),To._currentValue=s),ru(e,t),re(e,t,i,n),t.child;case 6:return e===null&&ht&&((e=n=Pt)&&(n=Jw(n,t.pendingProps,vn),n!==null?(t.stateNode=n,be=t,Pt=null,e=!0):e=!1),e||bs(t)),null;case 13:return bT(e,t,n);case 4:return Tu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ur(t,null,i,n):re(e,t,i,n),t.child;case 11:return yy(e,t,t.type,t.pendingProps,n);case 7:return re(e,t,t.pendingProps,n),t.child;case 8:return re(e,t,t.pendingProps.children,n),t.child;case 12:return re(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,yi(t,t.type,i.value),re(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,ws(t),s=_e(s),i=i(s),t.flags|=1,re(e,t,i,n),t.child;case 14:return _y(e,t,t.type,t.pendingProps,n);case 15:return AT(e,t,t.type,t.pendingProps,n);case 19:return wT(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Uu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Fn(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ST(e,t,n);case 24:return ws(t),i=_e(Yt),e===null?(s=rm(),s===null&&(s=At,r=sm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},am(t),yi(t,Yt,s)):(e.lanes&n&&(Uf(e,t),Xa(t,null,null,n),$a()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),yi(t,Yt,i)):(i=r.cache,yi(t,Yt,i),i!==s.cache&&Mf(t,[Yt],n,!0))),re(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function kn(e){e.flags|=4}function by(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!g0(t)){if(t=nn.current,t!==null&&((lt&4194048)===lt?Sn!==null:(lt&62914560)!==lt&&!(lt&536870912)||t!==Sn))throw Ya=Pf,OE;e.flags|=8192}}function jl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Jv():536870912,e.lanes|=t,Lr|=t)}function Oa(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function bw(e,t,n){var i=t.pendingProps;switch(im(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Ot(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Qn(Yt),Or(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Na(t)?kn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ty())),Ot(t),null;case 26:return n=t.memoizedState,e===null?(kn(t),n!==null?(Ot(t),by(t,n)):(Ot(t),t.flags&=-16777217)):n?n!==e.memoizedState?(kn(t),Ot(t),by(t,n)):(Ot(t),t.flags&=-16777217):(e.memoizedProps!==i&&kn(t),Ot(t),t.flags&=-16777217),null;case 27:Au(t),n=Oi.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&kn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ot(t),null}e=Tn.current,Na(t)?Jp(t):(e=f0(s,i,n),t.stateNode=e,kn(t))}return Ot(t),null;case 5:if(Au(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&kn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Ot(t),null}if(e=Tn.current,Na(t))Jp(t);else{switch(s=Gu(Oi.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[ye]=t,e[Ve]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(ce(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&kn(t)}}return Ot(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&kn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=Oi.current,Na(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=be,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[ye]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||u0(e.nodeValue,n)),e||bs(t)}else e=Gu(e).createTextNode(i),e[ye]=t,t.stateNode=e}return Ot(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Na(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[ye]=t}else Bo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ot(t),s=!1}else s=ty(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(qn(t),t):(qn(t),null)}if(qn(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),jl(t,t.updateQueue),Ot(t),null;case 4:return Or(),e===null&&Cm(t.stateNode.containerInfo),Ot(t),null;case 10:return Qn(t.type),Ot(t),null;case 19:if(ne(Kt),s=t.memoizedState,s===null)return Ot(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)Oa(s,!1);else{if(Ut!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Mu(e),r!==null){for(t.flags|=128,Oa(s,!1),e=r.updateQueue,t.updateQueue=e,jl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)IE(n,e),n=n.sibling;return Ct(Kt,Kt.current&1|2),t.child}e=e.sibling}s.tail!==null&&An()>zu&&(t.flags|=128,i=!0,Oa(s,!1),t.lanes=4194304)}else{if(!i)if(e=Mu(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,jl(t,e),Oa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!ht)return Ot(t),null}else 2*An()-s.renderingStartTime>zu&&n!==536870912&&(t.flags|=128,i=!0,Oa(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=An(),t.sibling=null,e=Kt.current,Ct(Kt,i?e&1|2:e&1),t):(Ot(t),null);case 22:case 23:return qn(t),om(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),n=t.updateQueue,n!==null&&jl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ne(Ts),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Qn(Yt),Ot(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function ww(e,t){switch(im(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qn(Yt),Or(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Au(t),null;case 13:if(qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Bo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(Kt),null;case 4:return Or(),null;case 10:return Qn(t.type),null;case 22:case 23:return qn(t),om(),e!==null&&ne(Ts),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qn(Yt),null;case 25:return null;default:return null}}function IT(e,t){switch(im(t),t.tag){case 3:Qn(Yt),Or();break;case 26:case 27:case 5:Au(t);break;case 4:Or();break;case 13:qn(t);break;case 19:ne(Kt);break;case 10:Qn(t.type);break;case 22:case 23:qn(t),om(),e!==null&&ne(Ts);break;case 24:Qn(Yt)}}function Yo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Tt(t,t.return,l)}}function Ki(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(d){Tt(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){Tt(t,t.return,d)}}function CT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ME(t,n)}catch(i){Tt(e,e.return,i)}}}function NT(e,t,n){n.props=Is(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Tt(e,t,i)}}function Ja(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){Tt(e,t,s)}}function En(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Tt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Tt(e,t,s)}else n.current=null}function DT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Tt(e,e.return,s)}}function Fh(e,t,n){try{var i=e.stateNode;Qw(i,e.type,n,t),i[Ve]=t}catch(s){Tt(e,e.return,s)}}function OT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ss(e.type)||e.tag===4}function Qh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||OT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ss(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vc));else if(i!==4&&(i===27&&ss(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yf(e,t,n),e=e.sibling;e!==null;)Yf(e,t,n),e=e.sibling}function Lu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&ss(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Lu(e,t,n),e=e.sibling;e!==null;)Lu(e,t,n),e=e.sibling}function VT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ce(t,i,n),t[ye]=e,t[Ve]=n}catch(r){Tt(e,e.return,r)}}var Un=!1,zt=!1,Yh=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function Rw(e,t){if(e=e.containerInfo,ed=Ku,e=vE(e),Jd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var y;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(y=g.firstChild)!==null;)m=g,g=y;for(;;){if(g===e)break e;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(y=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},Ku=!1,Jt=t;Jt!==null;)if(t=Jt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Jt=e;else for(;Jt!==null;){switch(t=Jt,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var O=Is(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(O,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Tt(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)sd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,Jt=e;break}Jt=t.return}}function xT(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:fi(e,n),i&4&&Yo(5,n);break;case 1:if(fi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Tt(n,n.return,a)}else{var s=Is(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Tt(n,n.return,a)}}i&64&&CT(n),i&512&&Ja(n,n.return);break;case 3:if(fi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ME(e,t)}catch(a){Tt(n,n.return,a)}}break;case 27:t===null&&i&4&&VT(n);case 26:case 5:fi(e,n),t===null&&i&4&&DT(n),i&512&&Ja(n,n.return);break;case 12:fi(e,n);break;case 13:fi(e,n),i&4&&PT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=kw.bind(null,n),Ww(e,n))));break;case 22:if(i=n.memoizedState!==null||Un,!i){t=t!==null&&t.memoizedState!==null||zt,s=Un;var r=zt;Un=i,(zt=t)&&!r?mi(e,n,(n.subtreeFlags&8772)!==0):fi(e,n),Un=s,zt=r}break;case 30:break;default:fi(e,n)}}function MT(e){var t=e.alternate;t!==null&&(e.alternate=null,MT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rt=null,Ne=!1;function Pn(e,t,n){for(n=n.child;n!==null;)kT(e,t,n),n=n.sibling}function kT(e,t,n){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Po,n)}catch{}switch(n.tag){case 26:zt||En(n,t),Pn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:zt||En(n,t);var i=Rt,s=Ne;ss(n.type)&&(Rt=n.stateNode,Ne=!1),Pn(e,t,n),no(n.stateNode),Rt=i,Ne=s;break;case 5:zt||En(n,t);case 6:if(i=Rt,s=Ne,Rt=null,Pn(e,t,n),Rt=i,Ne=s,Rt!==null)if(Ne)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(n.stateNode)}catch(r){Tt(n,t,r)}else try{Rt.removeChild(n.stateNode)}catch(r){Tt(n,t,r)}break;case 18:Rt!==null&&(Ne?(e=Rt,Uy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),bo(e)):Uy(Rt,n.stateNode));break;case 4:i=Rt,s=Ne,Rt=n.stateNode.containerInfo,Ne=!0,Pn(e,t,n),Rt=i,Ne=s;break;case 0:case 11:case 14:case 15:zt||Ki(2,n,t),zt||Ki(4,n,t),Pn(e,t,n);break;case 1:zt||(En(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&NT(n,t,i)),Pn(e,t,n);break;case 21:Pn(e,t,n);break;case 22:zt=(i=zt)||n.memoizedState!==null,Pn(e,t,n),zt=i;break;default:Pn(e,t,n)}}function PT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{bo(e)}catch(n){Tt(t,t.return,n)}}function Iw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wy),t;default:throw Error(U(435,e.tag))}}function Kh(e,t){var n=Iw(e);t.forEach(function(i){var s=Pw.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function ke(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(ss(l.type)){Rt=l.stateNode,Ne=!1;break t}break;case 5:Rt=l.stateNode,Ne=!1;break t;case 3:case 4:Rt=l.stateNode.containerInfo,Ne=!0;break t}l=l.return}if(Rt===null)throw Error(U(160));kT(r,a,s),Rt=null,Ne=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)UT(t,e),t=t.sibling}var ln=null;function UT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ke(t,e),Pe(e),i&4&&(Ki(3,e,e.return),Yo(3,e),Ki(5,e,e.return));break;case 1:ke(t,e),Pe(e),i&512&&(zt||n===null||En(n,n.return)),i&64&&Un&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=ln;if(ke(t,e),Pe(e),i&512&&(zt||n===null||En(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[zo]||r[ye]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),ce(r,i,n),r[ye]=e,Wt(r),i=r;break t;case"link":var a=qy("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),ce(r,i,n),s.head.appendChild(r);break;case"meta":if(a=qy("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),ce(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[ye]=e,Wt(r),i=r}e.stateNode=i}else Hy(s,e.type,e.stateNode);else e.stateNode=By(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Hy(s,e.type,e.stateNode):By(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Fh(e,e.memoizedProps,n.memoizedProps)}break;case 27:ke(t,e),Pe(e),i&512&&(zt||n===null||En(n,n.return)),n!==null&&i&4&&Fh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ke(t,e),Pe(e),i&512&&(zt||n===null||En(n,n.return)),e.flags&32){s=e.stateNode;try{xr(s,"")}catch(y){Tt(e,e.return,y)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Fh(e,s,n!==null?n.memoizedProps:s)),i&1024&&(Yh=!0);break;case 6:if(ke(t,e),Pe(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(y){Tt(e,e.return,y)}}break;case 3:if(lu=null,s=ln,ln=Fu(t.containerInfo),ke(t,e),ln=s,Pe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(t.containerInfo)}catch(y){Tt(e,e.return,y)}Yh&&(Yh=!1,LT(e));break;case 4:i=ln,ln=Fu(e.stateNode.containerInfo),ke(t,e),Pe(e),ln=i;break;case 12:ke(t,e),Pe(e);break;case 13:ke(t,e),Pe(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wm=An()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Kh(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Un,d=zt;if(Un=h||s,zt=d||u,ke(t,e),zt=d,Un=h,Pe(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Un||zt||ms(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){Tt(u,u.return,y)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(y){Tt(u,u.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Kh(e,n))));break;case 19:ke(t,e),Pe(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Kh(e,i)));break;case 30:break;case 21:break;default:ke(t,e),Pe(e)}}function Pe(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(OT(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=Qh(e);Lu(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(xr(a,""),n.flags&=-33);var l=Qh(e);Lu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Qh(e);Yf(e,h,u);break;default:throw Error(U(161))}}catch(d){Tt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function LT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;LT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xT(e,t.alternate,t),t=t.sibling}function ms(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ki(4,t,t.return),ms(t);break;case 1:En(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&NT(t,t.return,n),ms(t);break;case 27:no(t.stateNode);case 26:case 5:En(t,t.return),ms(t);break;case 22:t.memoizedState===null&&ms(t);break;case 30:ms(t);break;default:ms(t)}e=e.sibling}}function mi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:mi(s,r,n),Yo(4,r);break;case 1:if(mi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){Tt(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)xE(u[s],l)}catch(h){Tt(i,i.return,h)}}n&&a&64&&CT(r),Ja(r,r.return);break;case 27:VT(r);case 26:case 5:mi(s,r,n),n&&i===null&&a&4&&DT(r),Ja(r,r.return);break;case 12:mi(s,r,n);break;case 13:mi(s,r,n),n&&a&4&&PT(s,r);break;case 22:r.memoizedState===null&&mi(s,r,n),Ja(r,r.return);break;case 30:break;default:mi(s,r,n)}t=t.sibling}}function Tm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ho(n))}function Am(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ho(e))}function pn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zT(e,t,n,i),t=t.sibling}function zT(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:pn(e,t,n,i),s&2048&&Yo(9,t);break;case 1:pn(e,t,n,i);break;case 3:pn(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ho(e)));break;case 12:if(s&2048){pn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Tt(t,t.return,u)}}else pn(e,t,n,i);break;case 13:pn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?pn(e,t,n,i):Wa(e,t):r._visibility&2?pn(e,t,n,i):(r._visibility|=2,Js(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&Tm(a,t);break;case 24:pn(e,t,n,i),s&2048&&Am(t.alternate,t);break;default:pn(e,t,n,i)}}function Js(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Js(r,a,l,u,s),Yo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Js(r,a,l,u,s):Wa(r,a):(d._visibility|=2,Js(r,a,l,u,s)),s&&h&2048&&Tm(a.alternate,a);break;case 24:Js(r,a,l,u,s),s&&h&2048&&Am(a.alternate,a);break;default:Js(r,a,l,u,s)}t=t.sibling}}function Wa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:Wa(n,i),s&2048&&Tm(i.alternate,i);break;case 24:Wa(n,i),s&2048&&Am(i.alternate,i);break;default:Wa(n,i)}t=t.sibling}}var Ua=8192;function Ks(e){if(e.subtreeFlags&Ua)for(e=e.child;e!==null;)jT(e),e=e.sibling}function jT(e){switch(e.tag){case 26:Ks(e),e.flags&Ua&&e.memoizedState!==null&&fR(ln,e.memoizedState,e.memoizedProps);break;case 5:Ks(e);break;case 3:case 4:var t=ln;ln=Fu(e.stateNode.containerInfo),Ks(e),ln=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ua,Ua=16777216,Ks(e),Ua=t):Ks(e));break;default:Ks(e)}}function BT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Va(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Jt=i,HT(i,e)}BT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qT(e),e=e.sibling}function qT(e){switch(e.tag){case 0:case 11:case 15:Va(e),e.flags&2048&&Ki(9,e,e.return);break;case 3:Va(e);break;case 12:Va(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,au(e)):Va(e);break;default:Va(e)}}function au(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Jt=i,HT(i,e)}BT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ki(8,t,t.return),au(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,au(t));break;default:au(t)}e=e.sibling}}function HT(e,t){for(;Jt!==null;){var n=Jt;switch(n.tag){case 0:case 11:case 15:Ki(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ho(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Jt=i;else t:for(n=e;Jt!==null;){i=Jt;var s=i.sibling,r=i.return;if(MT(i),i===n){Jt=null;break t}if(s!==null){s.return=r,Jt=s;break t}Jt=r}}}var Cw={getCacheForType:function(e){var t=_e(Yt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Nw=typeof WeakMap=="function"?WeakMap:Map,mt=0,At=null,it=null,lt=0,dt=0,Ue=null,Ci=!1,Wr=!1,Sm=!1,Zn=0,Ut=0,$i=0,As=0,bm=0,en=0,Lr=0,to=null,De=null,Kf=!1,wm=0,zu=1/0,ju=null,Mi=null,oe=0,ki=null,zr=null,wr=0,$f=0,Xf=null,GT=null,eo=0,Zf=null;function He(){if(mt&2&&lt!==0)return lt&-lt;if(X.T!==null){var e=Mr;return e!==0?e:Im()}return eE()}function FT(){en===0&&(en=!(lt&536870912)||ht?Zv():536870912);var e=nn.current;return e!==null&&(e.flags|=32),en}function Ge(e,t,n){(e===At&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(jr(e,0),Ni(e,lt,en,!1)),Lo(e,n),(!(mt&2)||e!==At)&&(e===At&&(!(mt&2)&&(As|=n),Ut===4&&Ni(e,lt,en,!1)),On(e))}function QT(e,t,n){if(mt&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Uo(e,t),s=i?Vw(e,t):$h(e,t,!0),r=i;do{if(s===0){Wr&&!i&&Ni(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Dw(n)){s=$h(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=to;var u=l.current.memoizedState.isDehydrated;if(u&&(jr(l,a).flags|=256),a=$h(l,a,!1),a!==2){if(Sm&&!u){l.errorRecoveryDisabledLanes|=r,As|=r,s=4;break t}r=De,De=s,r!==null&&(De===null?De=r:De.push.apply(De,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){jr(e,0),Ni(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Ni(i,t,en,!Ci);break t;case 2:De=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(s=wm+300-An(),10<s)){if(Ni(i,t,en,!Ci),vc(i,0,!0)!==0)break t;i.timeoutHandle=h0(Ry.bind(null,i,n,De,ju,Kf,t,en,As,Lr,Ci,r,2,-0,0),s);break t}Ry(i,n,De,ju,Kf,t,en,As,Lr,Ci,r,0,-0,0)}}break}while(!0);On(e)}function Ry(e,t,n,i,s,r,a,l,u,h,d,g,m,y){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Eo={stylesheets:null,count:0,unsuspend:hR},jT(t),g=dR(),g!==null)){e.cancelPendingCommit=g(Cy.bind(null,e,t,r,n,i,s,a,l,u,d,1,m,y)),Ni(e,r,a,!h);return}Cy(e,t,r,n,i,s,a,l,u)}function Dw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Ye(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ni(e,t,n,i){t&=~bm,t&=~As,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-qe(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&Wv(e,n,t)}function Nc(){return mt&6?!0:(Ko(0),!1)}function Rm(){if(it!==null){if(dt===0)var e=it.return;else e=it,Bn=Ps=null,fm(e),br=null,yo=0,e=it;for(;e!==null;)IT(e.alternate,e),e=e.return;it=null}}function jr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Kw(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Rm(),At=e,it=n=Fn(e.current,null),lt=t,dt=0,Ue=null,Ci=!1,Wr=Uo(e,t),Sm=!1,Lr=en=bm=As=$i=Ut=0,De=to=null,Kf=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-qe(i),r=1<<s;t|=e[s],i&=~r}return Zn=t,Sc(),n}function YT(e,t){et=null,X.H=xu,t===Go||t===wc?(t=sy(),dt=3):t===OE?(t=sy(),dt=4):dt=t===TT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ue=t,it===null&&(Ut=1,Pu(e,tn(t,e.current)))}function KT(){var e=X.H;return X.H=xu,e===null?xu:e}function $T(){var e=X.A;return X.A=Cw,e}function Jf(){Ut=4,Ci||(lt&4194048)!==lt&&nn.current!==null||(Wr=!0),!($i&134217727)&&!(As&134217727)||At===null||Ni(At,lt,en,!1)}function $h(e,t,n){var i=mt;mt|=2;var s=KT(),r=$T();(At!==e||lt!==t)&&(ju=null,jr(e,t)),t=!1;var a=Ut;t:do try{if(dt!==0&&it!==null){var l=it,u=Ue;switch(dt){case 8:Rm(),a=6;break t;case 3:case 2:case 9:case 6:nn.current===null&&(t=!0);var h=dt;if(dt=0,Ue=null,gr(e,l,u,h),n&&Wr){a=0;break t}break;default:h=dt,dt=0,Ue=null,gr(e,l,u,h)}}Ow(),a=Ut;break}catch(d){YT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Bn=Ps=null,mt=i,X.H=s,X.A=r,it===null&&(At=null,lt=0,Sc()),a}function Ow(){for(;it!==null;)XT(it)}function Vw(e,t){var n=mt;mt|=2;var i=KT(),s=$T();At!==e||lt!==t?(ju=null,zu=An()+500,jr(e,t)):Wr=Uo(e,t);t:do try{if(dt!==0&&it!==null){t=it;var r=Ue;e:switch(dt){case 1:dt=0,Ue=null,gr(e,t,r,1);break;case 2:case 9:if(iy(r)){dt=0,Ue=null,Iy(t);break}t=function(){dt!==2&&dt!==9||At!==e||(dt=7),On(e)},r.then(t,t);break t;case 3:dt=7;break t;case 4:dt=5;break t;case 7:iy(r)?(dt=0,Ue=null,Iy(t)):(dt=0,Ue=null,gr(e,t,r,7));break;case 5:var a=null;switch(it.tag){case 26:a=it.memoizedState;case 5:case 27:var l=it;if(!a||g0(a)){dt=0,Ue=null;var u=l.sibling;if(u!==null)it=u;else{var h=l.return;h!==null?(it=h,Dc(h)):it=null}break e}}dt=0,Ue=null,gr(e,t,r,5);break;case 6:dt=0,Ue=null,gr(e,t,r,6);break;case 8:Rm(),Ut=6;break t;default:throw Error(U(462))}}xw();break}catch(d){YT(e,d)}while(!0);return Bn=Ps=null,X.H=i,X.A=s,mt=n,it!==null?0:(At=null,lt=0,Sc(),Ut)}function xw(){for(;it!==null&&!eb();)XT(it)}function XT(e){var t=RT(e.alternate,e,Zn);e.memoizedProps=e.pendingProps,t===null?Dc(e):it=t}function Iy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ey(n,t,t.pendingProps,t.type,void 0,lt);break;case 11:t=Ey(n,t,t.pendingProps,t.type.render,t.ref,lt);break;case 5:fm(t);default:IT(n,t),t=it=IE(t,Zn),t=RT(n,t,Zn)}e.memoizedProps=e.pendingProps,t===null?Dc(e):it=t}function gr(e,t,n,i){Bn=Ps=null,fm(t),br=null,yo=0;var s=t.return;try{if(Aw(e,s,t,n,lt)){Ut=1,Pu(e,tn(n,e.current)),it=null;return}}catch(r){if(s!==null)throw it=s,r;Ut=1,Pu(e,tn(n,e.current)),it=null;return}t.flags&32768?(ht||i===1?e=!0:Wr||lt&536870912?e=!1:(Ci=e=!0,(i===2||i===9||i===3||i===6)&&(i=nn.current,i!==null&&i.tag===13&&(i.flags|=16384))),ZT(t,e)):Dc(t)}function Dc(e){var t=e;do{if(t.flags&32768){ZT(t,Ci);return}e=t.return;var n=bw(t.alternate,t,Zn);if(n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Ut===0&&(Ut=5)}function ZT(e,t){do{var n=ww(e.alternate,e);if(n!==null){n.flags&=32767,it=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=n}while(e!==null);Ut=6,it=null}function Cy(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do Oc();while(oe!==0);if(mt&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(r=t.lanes|t.childLanes,r|=Wd,hb(e,n,r,a,l,u),e===At&&(it=At=null,lt=0),zr=t,ki=e,wr=n,$f=r,Xf=s,GT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Uw(Su,function(){return n0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=X.T,X.T=null,s=ft.p,ft.p=2,a=mt,mt|=4;try{Rw(e,t,n)}finally{mt=a,ft.p=s,X.T=i}}oe=1,JT(),WT(),t0()}}function JT(){if(oe===1){oe=0;var e=ki,t=zr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=X.T,X.T=null;var i=ft.p;ft.p=2;var s=mt;mt|=4;try{UT(t,e);var r=nd,a=vE(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&_E(l.ownerDocument.documentElement,l)){if(u!==null&&Jd(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var y=m.getSelection(),O=l.textContent.length,V=Math.min(u.start,O),k=u.end===void 0?V:Math.min(u.end,O);!y.extend&&V>k&&(a=k,k=V,V=a);var w=$p(l,V),v=$p(l,k);if(w&&v&&(y.rangeCount!==1||y.anchorNode!==w.node||y.anchorOffset!==w.offset||y.focusNode!==v.node||y.focusOffset!==v.offset)){var R=g.createRange();R.setStart(w.node,w.offset),y.removeAllRanges(),V>k?(y.addRange(R),y.extend(v.node,v.offset)):(R.setEnd(v.node,v.offset),y.addRange(R))}}}}for(g=[],y=l;y=y.parentNode;)y.nodeType===1&&g.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Ku=!!ed,nd=ed=null}finally{mt=s,ft.p=i,X.T=n}}e.current=t,oe=2}}function WT(){if(oe===2){oe=0;var e=ki,t=zr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=X.T,X.T=null;var i=ft.p;ft.p=2;var s=mt;mt|=4;try{xT(e,t.alternate,t)}finally{mt=s,ft.p=i,X.T=n}}oe=3}}function t0(){if(oe===4||oe===3){oe=0,nb();var e=ki,t=zr,n=wr,i=GT;t.subtreeFlags&10256||t.flags&10256?oe=5:(oe=0,zr=ki=null,e0(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Mi=null),Fd(n),t=t.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Po,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=X.T,s=ft.p,ft.p=2,X.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{X.T=t,ft.p=s}}wr&3&&Oc(),On(e),s=e.pendingLanes,n&4194090&&s&42?e===Zf?eo++:(eo=0,Zf=e):eo=0,Ko(0)}}function e0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ho(t)))}function Oc(e){return JT(),WT(),t0(),n0()}function n0(){if(oe!==5)return!1;var e=ki,t=$f;$f=0;var n=Fd(wr),i=X.T,s=ft.p;try{ft.p=32>n?32:n,X.T=null,n=Xf,Xf=null;var r=ki,a=wr;if(oe=0,zr=ki=null,wr=0,mt&6)throw Error(U(331));var l=mt;if(mt|=4,qT(r.current),zT(r,r.current,a,n),mt=l,Ko(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Po,r)}catch{}return!0}finally{ft.p=s,X.T=i,e0(e,t)}}function Ny(e,t,n){t=tn(n,t),t=Gf(e.stateNode,t,2),e=xi(e,t,2),e!==null&&(Lo(e,2),On(e))}function Tt(e,t,n){if(e.tag===3)Ny(e,e,n);else for(;t!==null;){if(t.tag===3){Ny(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Mi===null||!Mi.has(i))){e=tn(n,e),n=vT(2),i=xi(t,n,2),i!==null&&(ET(n,i,t,e),Lo(i,2),On(i));break}}t=t.return}}function Xh(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Nw;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Sm=!0,s.add(n),e=Mw.bind(null,e,t,n),t.then(e,e))}function Mw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,At===e&&(lt&n)===n&&(Ut===4||Ut===3&&(lt&62914560)===lt&&300>An()-wm?!(mt&2)&&jr(e,0):bm|=n,Lr===lt&&(Lr=0)),On(e)}function i0(e,t){t===0&&(t=Jv()),e=Jr(e,t),e!==null&&(Lo(e,t),On(e))}function kw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),i0(e,n)}function Pw(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),i0(e,n)}function Uw(e,t){return Hd(e,t)}var Bu=null,Ws=null,Wf=!1,qu=!1,Zh=!1,Ss=0;function On(e){e!==Ws&&e.next===null&&(Ws===null?Bu=Ws=e:Ws=Ws.next=e),qu=!0,Wf||(Wf=!0,zw())}function Ko(e,t){if(!Zh&&qu){Zh=!0;do for(var n=!1,i=Bu;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-qe(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Dy(i,r))}else r=lt,r=vc(i,i===At?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Uo(i,r)||(n=!0,Dy(i,r));i=i.next}while(n);Zh=!1}}function Lw(){s0()}function s0(){qu=Wf=!1;var e=0;Ss!==0&&(Yw()&&(e=Ss),Ss=0);for(var t=An(),n=null,i=Bu;i!==null;){var s=i.next,r=r0(i,t);r===0?(i.next=null,n===null?Bu=s:n.next=s,s===null&&(Ws=n)):(n=i,(e!==0||r&3)&&(qu=!0)),i=s}Ko(e)}function r0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-qe(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=cb(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=At,n=lt,n=vc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Sh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Uo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Sh(i),Fd(n)){case 2:case 8:n=$v;break;case 32:n=Su;break;case 268435456:n=Xv;break;default:n=Su}return i=a0.bind(null,e),n=Hd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Sh(i),e.callbackPriority=2,e.callbackNode=null,2}function a0(e,t){if(oe!==0&&oe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Oc()&&e.callbackNode!==n)return null;var i=lt;return i=vc(e,e===At?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(QT(e,i,t),r0(e,An()),e.callbackNode!=null&&e.callbackNode===n?a0.bind(null,e):null)}function Dy(e,t){if(Oc())return null;QT(e,t,!0)}function zw(){$w(function(){mt&6?Hd(Kv,Lw):s0()})}function Im(){return Ss===0&&(Ss=Zv()),Ss}function Oy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jl(""+e)}function Vy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function jw(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Oy((s[Ve]||null).action),a=i.submitter;a&&(t=(t=a[Ve]||null)?Oy(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Ec("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ss!==0){var u=a?Vy(s,a):new FormData(s);qf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Vy(s,a):new FormData(s),qf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Jh=0;Jh<Df.length;Jh++){var Wh=Df[Jh],Bw=Wh.toLowerCase(),qw=Wh[0].toUpperCase()+Wh.slice(1);dn(Bw,"on"+qw)}dn(TE,"onAnimationEnd");dn(AE,"onAnimationIteration");dn(SE,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(rw,"onTransitionRun");dn(aw,"onTransitionStart");dn(ow,"onTransitionCancel");dn(bE,"onTransitionEnd");Vr("onMouseEnter",["mouseout","mouseover"]);Vr("onMouseLeave",["mouseout","mouseover"]);Vr("onPointerEnter",["pointerout","pointerover"]);Vr("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function o0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){ku(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){ku(d)}s.currentTarget=null,r=u}}}}function nt(e,t){var n=t[Sf];n===void 0&&(n=t[Sf]=new Set);var i=e+"__bubble";n.has(i)||(l0(t,e,2,!1),n.add(i))}function tf(e,t,n){var i=0;t&&(i|=4),l0(n,e,i,t)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function Cm(e){if(!e[Bl]){e[Bl]=!0,nE.forEach(function(n){n!=="selectionchange"&&(Hw.has(n)||tf(n,!1,e),tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bl]||(t[Bl]=!0,tf("selectionchange",!1,t))}}function l0(e,t,n,i){switch(E0(t)){case 2:var s=pR;break;case 8:s=yR;break;default:s=Vm}n=s.bind(null,t,n,e),s=void 0,!If||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ef(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=ar(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}cE(function(){var h=r,d=Kd(n),g=[];t:{var m=wE.get(e);if(m!==void 0){var y=Ec,O=e;switch(e){case"keypress":if(tu(n)===0)break t;case"keydown":case"keyup":y=Ub;break;case"focusin":O="focus",y=Oh;break;case"focusout":O="blur",y=Oh;break;case"beforeblur":case"afterblur":y=Oh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=wb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=jb;break;case TE:case AE:case SE:y=Cb;break;case bE:y=qb;break;case"scroll":case"scrollend":y=Sb;break;case"wheel":y=Gb;break;case"copy":case"cut":case"paste":y=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Bp;break;case"toggle":case"beforetoggle":y=Qb}var V=(t&4)!==0,k=!V&&(e==="scroll"||e==="scrollend"),w=V?m!==null?m+"Capture":null:m;V=[];for(var v=h,R;v!==null;){var D=v;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||w===null||(D=ho(v,w),D!=null&&V.push(vo(v,D,R))),k)break;v=v.return}0<V.length&&(m=new y(m,O,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==Rf&&(O=n.relatedTarget||n.fromElement)&&(ar(O)||O[Xr]))break t;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(O=n.relatedTarget||n.toElement,y=h,O=O?ar(O):null,O!==null&&(k=ko(O),V=O.tag,O!==k||V!==5&&V!==27&&V!==6)&&(O=null)):(y=null,O=h),y!==O)){if(V=zp,D="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(V=Bp,D="onPointerLeave",w="onPointerEnter",v="pointer"),k=y==null?m:Pa(y),R=O==null?m:Pa(O),m=new V(D,v+"leave",y,n,d),m.target=k,m.relatedTarget=R,D=null,ar(d)===h&&(V=new V(w,v+"enter",O,n,d),V.target=R,V.relatedTarget=k,D=V),k=D,y&&O)e:{for(V=y,w=O,v=0,R=V;R;R=$s(R))v++;for(R=0,D=w;D;D=$s(D))R++;for(;0<v-R;)V=$s(V),v--;for(;0<R-v;)w=$s(w),R--;for(;v--;){if(V===w||w!==null&&V===w.alternate)break e;V=$s(V),w=$s(w)}V=null}else V=null;y!==null&&xy(g,m,y,V,!1),O!==null&&k!==null&&xy(g,k,O,V,!0)}}t:{if(m=h?Pa(h):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var L=Fp;else if(Gp(m))if(pE)L=nw;else{L=tw;var B=Wb}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Yd(h.elementType)&&(L=Fp):L=ew;if(L&&(L=L(e,h))){gE(g,L,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&wf(m,"number",m.value)}switch(B=h?Pa(h):window,e){case"focusin":(Gp(B)||B.contentEditable==="true")&&(ur=B,Cf=h,Fa=null);break;case"focusout":Fa=Cf=ur=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Xp(g,n,d);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":Xp(g,n,d)}var T;if(Zd)t:{switch(e){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else lr?dE(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(fE&&n.locale!=="ko"&&(lr||_!=="onCompositionStart"?_==="onCompositionEnd"&&lr&&(T=hE()):(Ii=d,$d="value"in Ii?Ii.value:Ii.textContent,lr=!0)),B=Hu(h,_),0<B.length&&(_=new jp(_,e,null,n,d),g.push({event:_,listeners:B}),T?_.data=T:(T=mE(n),T!==null&&(_.data=T)))),(T=Kb?$b(e,n):Xb(e,n))&&(_=Hu(h,"onBeforeInput"),0<_.length&&(B=new jp("onBeforeInput","beforeinput",null,n,d),g.push({event:B,listeners:_}),B.data=T)),jw(g,e,h,n,d)}o0(g,t)})}function vo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=ho(e,n),s!=null&&i.unshift(vo(e,s,r)),s=ho(e,t),s!=null&&i.push(vo(e,s,r))),e.tag===3)return i;e=e.return}return[]}function $s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xy(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=ho(n,r),h!=null&&a.unshift(vo(n,h,u))):s||(h=ho(n,r),h!=null&&a.push(vo(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Gw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function My(e){return(typeof e=="string"?e:""+e).replace(Gw,`
`).replace(Fw,"")}function u0(e,t){return t=My(t),My(e)===t}function Vc(){}function pt(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||xr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&xr(e,""+i);break;case"className":Ml(e,"class",i);break;case"tabIndex":Ml(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ml(e,n,i);break;case"style":uE(e,i,r);break;case"data":if(t!=="object"){Ml(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Jl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&pt(e,t,"name",s.name,s,null),pt(e,t,"formEncType",s.formEncType,s,null),pt(e,t,"formMethod",s.formMethod,s,null),pt(e,t,"formTarget",s.formTarget,s,null)):(pt(e,t,"encType",s.encType,s,null),pt(e,t,"method",s.method,s,null),pt(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Jl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Vc);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Jl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":nt("beforetoggle",e),nt("toggle",e),Zl(e,"popover",i);break;case"xlinkActuate":Mn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Mn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Mn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Mn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Mn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Mn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Mn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Mn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Mn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Zl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Tb.get(n)||n,Zl(e,n,i))}}function td(e,t,n,i,s,r){switch(n){case"style":uE(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?xr(e,i):(typeof i=="number"||typeof i=="bigint")&&xr(e,""+i);break;case"onScroll":i!=null&&nt("scroll",e);break;case"onScrollEnd":i!=null&&nt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Vc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iE.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[Ve]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Zl(e,n,i)}}}function ce(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:pt(e,t,r,a,n,null)}}s&&pt(e,t,"srcSet",n.srcSet,n,null),i&&pt(e,t,"src",n.src,n,null);return;case"input":nt("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:pt(e,t,i,d,n,null)}}aE(e,r,l,u,h,a,s,!1),bu(e);return;case"select":nt("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:pt(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?vr(e,!!i,t,!1):n!=null&&vr(e,!!i,n,!0);return;case"textarea":nt("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:pt(e,t,a,l,n,null)}lE(e,i,s,r),bu(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:pt(e,t,u,i,n,null)}return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(i=0;i<_o.length;i++)nt(_o[i],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:pt(e,t,h,i,n,null)}return;default:if(Yd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&td(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&pt(e,t,l,i,n,null))}function Qw(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(y in n){var g=n[y];if(n.hasOwnProperty(y)&&g!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(y)||pt(e,t,y,null,i,g)}}for(var m in i){var y=i[m];if(g=n[m],i.hasOwnProperty(m)&&(y!=null||g!=null))switch(m){case"type":r=y;break;case"name":s=y;break;case"checked":h=y;break;case"defaultChecked":d=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(U(137,t));break;default:y!==g&&pt(e,t,m,y,i,g)}}bf(e,a,l,u,h,d,r,s);return;case"select":y=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":y=u;default:i.hasOwnProperty(r)||pt(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&pt(e,t,s,r,i,u)}t=l,n=a,i=y,m!=null?vr(e,!!n,m,!1):!!i!=!!n&&(t!=null?vr(e,!!n,t,!0):vr(e,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:pt(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":y=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&pt(e,t,a,s,i,r)}oE(e,m,y);return;case"option":for(var O in n)if(m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O))switch(O){case"selected":e.selected=!1;break;default:pt(e,t,O,null,i,m)}for(u in i)if(m=i[u],y=n[u],i.hasOwnProperty(u)&&m!==y&&(m!=null||y!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pt(e,t,u,m,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&pt(e,t,V,null,i,m);for(h in i)if(m=i[h],y=n[h],i.hasOwnProperty(h)&&m!==y&&(m!=null||y!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:pt(e,t,h,m,i,y)}return;default:if(Yd(t)){for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!==void 0&&!i.hasOwnProperty(k)&&td(e,t,k,void 0,i,m);for(d in i)m=i[d],y=n[d],!i.hasOwnProperty(d)||m===y||m===void 0&&y===void 0||td(e,t,d,m,i,y);return}}for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w)&&pt(e,t,w,null,i,m);for(g in i)m=i[g],y=n[g],!i.hasOwnProperty(g)||m===y||m==null&&y==null||pt(e,t,g,m,i,y)}var ed=null,nd=null;function Gu(e){return e.nodeType===9?e:e.ownerDocument}function ky(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nf=null;function Yw(){var e=window.event;return e&&e.type==="popstate"?e===nf?!1:(nf=e,!0):(nf=null,!1)}var h0=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,$w=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(e){return Py.resolve(null).then(e).catch(Xw)}:h0;function Xw(e){setTimeout(function(){throw e})}function ss(e){return e==="head"}function Uy(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&no(a.documentElement),n&2&&no(a.body),n&4)for(n=a.head,no(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[zo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),bo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);bo(t)}function sd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sd(n),Qd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Zw(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[zo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=hn(e.nextSibling),e===null)break}return null}function Jw(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=hn(e.nextSibling),e===null))return null;return e}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ww(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ad=null;function Ly(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function f0(e,t,n){switch(t=Gu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function no(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qd(e)}var sn=new Map,zy=new Set;function Fu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var si=ft.d;ft.d={f:tR,r:eR,D:nR,C:iR,L:sR,m:rR,X:oR,S:aR,M:lR};function tR(){var e=si.f(),t=Nc();return e||t}function eR(e){var t=Zr(e);t!==null&&t.tag===5&&t.type==="form"?rT(t):si.r(e)}var ta=typeof document>"u"?null:document;function d0(e,t,n){var i=ta;if(i&&typeof t=="string"&&t){var s=We(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),zy.has(s)||(zy.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),ce(t,"link",e),Wt(t),i.head.appendChild(t)))}}function nR(e){si.D(e),d0("dns-prefetch",e,null)}function iR(e,t){si.C(e,t),d0("preconnect",e,t)}function sR(e,t,n){si.L(e,t,n);var i=ta;if(i&&e&&t){var s='link[rel="preload"][as="'+We(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+We(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+We(n.imageSizes)+'"]')):s+='[href="'+We(e)+'"]';var r=s;switch(t){case"style":r=Br(e);break;case"script":r=ea(e)}sn.has(r)||(e=wt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),sn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector($o(r))||t==="script"&&i.querySelector(Xo(r))||(t=i.createElement("link"),ce(t,"link",e),Wt(t),i.head.appendChild(t)))}}function rR(e,t){si.m(e,t);var n=ta;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+We(i)+'"][href="'+We(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ea(e)}if(!sn.has(r)&&(e=wt({rel:"modulepreload",href:e},t),sn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xo(r)))return}i=n.createElement("link"),ce(i,"link",e),Wt(i),n.head.appendChild(i)}}}function aR(e,t,n){si.S(e,t,n);var i=ta;if(i&&e){var s=_r(i).hoistableStyles,r=Br(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector($o(r)))l.loading=5;else{e=wt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=sn.get(r))&&Nm(e,n);var u=a=i.createElement("link");Wt(u),ce(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,ou(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function oR(e,t){si.X(e,t);var n=ta;if(n&&e){var i=_r(n).hoistableScripts,s=ea(e),r=i.get(s);r||(r=n.querySelector(Xo(s)),r||(e=wt({src:e,async:!0},t),(t=sn.get(s))&&Dm(e,t),r=n.createElement("script"),Wt(r),ce(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function lR(e,t){si.M(e,t);var n=ta;if(n&&e){var i=_r(n).hoistableScripts,s=ea(e),r=i.get(s);r||(r=n.querySelector(Xo(s)),r||(e=wt({src:e,async:!0,type:"module"},t),(t=sn.get(s))&&Dm(e,t),r=n.createElement("script"),Wt(r),ce(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function jy(e,t,n,i){var s=(s=Oi.current)?Fu(s):null;if(!s)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Br(n.href),n=_r(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Br(n.href);var r=_r(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector($o(e)))&&!r._p&&(a.instance=r,a.state.loading=5),sn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},sn.set(e,n),r||uR(s,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ea(n),n=_r(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Br(e){return'href="'+We(e)+'"'}function $o(e){return'link[rel="stylesheet"]['+e+"]"}function m0(e){return wt({},e,{"data-precedence":e.precedence,precedence:null})}function uR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ce(t,"link",n),Wt(t),e.head.appendChild(t))}function ea(e){return'[src="'+We(e)+'"]'}function Xo(e){return"script[async]"+e}function By(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+We(n.href)+'"]');if(i)return t.instance=i,Wt(i),i;var s=wt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Wt(i),ce(i,"style",s),ou(i,n.precedence,e),t.instance=i;case"stylesheet":s=Br(n.href);var r=e.querySelector($o(s));if(r)return t.state.loading|=4,t.instance=r,Wt(r),r;i=m0(n),(s=sn.get(s))&&Nm(i,s),r=(e.ownerDocument||e).createElement("link"),Wt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ce(r,"link",i),t.state.loading|=4,ou(r,n.precedence,e),t.instance=r;case"script":return r=ea(n.src),(s=e.querySelector(Xo(r)))?(t.instance=s,Wt(s),s):(i=n,(s=sn.get(r))&&(i=wt({},n),Dm(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),Wt(s),ce(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,ou(i,n.precedence,e));return t.instance}function ou(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Nm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Dm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lu=null;function qy(e,t,n){if(lu===null){var i=new Map,s=lu=new Map;s.set(n,i)}else s=lu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[zo]||r[ye]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function Hy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function cR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function g0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Eo=null;function hR(){}function fR(e,t,n){if(Eo===null)throw Error(U(475));var i=Eo;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=Br(n.href),r=e.querySelector($o(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Qu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,Wt(r);return}r=e.ownerDocument||e,n=m0(n),(s=sn.get(s))&&Nm(n,s),r=r.createElement("link"),Wt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ce(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Qu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function dR(){if(Eo===null)throw Error(U(475));var e=Eo;return e.stylesheets&&e.count===0&&od(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&od(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yu=null;function od(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yu=new Map,t.forEach(mR,e),Yu=null,Qu.call(e))}function mR(e,t){if(!(t.state.loading&4)){var n=Yu.get(e);if(n)var i=n.get(null);else{n=new Map,Yu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Qu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var To={$$typeof:Ln,Provider:null,Consumer:null,_currentValue:ys,_currentValue2:ys,_threadCount:0};function gR(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.hiddenUpdates=bh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function p0(e,t,n,i,s,r,a,l,u,h,d,g){return e=new gR(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=Le(3,null,null,t),e.current=r,r.stateNode=e,t=sm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},am(r),e}function y0(e){return e?(e=fr,e):fr}function _0(e,t,n,i,s,r){s=y0(s),i.context===null?i.context=s:i.pendingContext=s,i=Vi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=xi(e,i,t),n!==null&&(Ge(n,e,t),Ka(n,e,t))}function Gy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Om(e,t){Gy(e,t),(e=e.alternate)&&Gy(e,t)}function v0(e){if(e.tag===13){var t=Jr(e,67108864);t!==null&&Ge(t,e,67108864),Om(e,67108864)}}var Ku=!0;function pR(e,t,n,i){var s=X.T;X.T=null;var r=ft.p;try{ft.p=2,Vm(e,t,n,i)}finally{ft.p=r,X.T=s}}function yR(e,t,n,i){var s=X.T;X.T=null;var r=ft.p;try{ft.p=8,Vm(e,t,n,i)}finally{ft.p=r,X.T=s}}function Vm(e,t,n,i){if(Ku){var s=ld(i);if(s===null)ef(e,t,i,$u,n),Fy(e,i);else if(vR(s,e,t,n,i))i.stopPropagation();else if(Fy(e,i),t&4&&-1<_R.indexOf(e)){for(;s!==null;){var r=Zr(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=fs(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-qe(a);l.entanglements[1]|=u,a&=~u}On(r),!(mt&6)&&(zu=An()+500,Ko(0))}}break;case 13:l=Jr(r,2),l!==null&&Ge(l,r,2),Nc(),Om(r,2)}if(r=ld(i),r===null&&ef(e,t,i,$u,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else ef(e,t,i,null,n)}}function ld(e){return e=Kd(e),xm(e)}var $u=null;function xm(e){if($u=null,e=ar(e),e!==null){var t=ko(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Gv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $u=e,null}function E0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ib()){case Kv:return 2;case $v:return 8;case Su:case sb:return 32;case Xv:return 268435456;default:return 32}default:return 32}}var ud=!1,Pi=null,Ui=null,Li=null,Ao=new Map,So=new Map,Ei=[],_R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fy(e,t){switch(e){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Ao.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(t.pointerId)}}function xa(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Zr(t),t!==null&&v0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vR(e,t,n,i,s){switch(t){case"focusin":return Pi=xa(Pi,e,t,n,i,s),!0;case"dragenter":return Ui=xa(Ui,e,t,n,i,s),!0;case"mouseover":return Li=xa(Li,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Ao.set(r,xa(Ao.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,So.set(r,xa(So.get(r)||null,e,t,n,i,s)),!0}return!1}function T0(e){var t=ar(e.target);if(t!==null){var n=ko(t);if(n!==null){if(t=n.tag,t===13){if(t=Gv(n),t!==null){e.blockedOn=t,fb(e.priority,function(){if(n.tag===13){var i=He();i=Gd(i);var s=Jr(n,i);s!==null&&Ge(s,n,i),Om(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ld(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Rf=i,n.target.dispatchEvent(i),Rf=null}else return t=Zr(n),t!==null&&v0(t),e.blockedOn=n,!1;t.shift()}return!0}function Qy(e,t,n){uu(e)&&n.delete(t)}function ER(){ud=!1,Pi!==null&&uu(Pi)&&(Pi=null),Ui!==null&&uu(Ui)&&(Ui=null),Li!==null&&uu(Li)&&(Li=null),Ao.forEach(Qy),So.forEach(Qy)}function ql(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,ER)))}var Hl=null;function Yy(e){Hl!==e&&(Hl=e,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,function(){Hl===e&&(Hl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(xm(i||n)===null)continue;break}var r=Zr(n);r!==null&&(e.splice(t,3),t-=3,qf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function bo(e){function t(u){return ql(u,e)}Pi!==null&&ql(Pi,e),Ui!==null&&ql(Ui,e),Li!==null&&ql(Li,e),Ao.forEach(t),So.forEach(t);for(var n=0;n<Ei.length;n++){var i=Ei[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ei.length&&(n=Ei[0],n.blockedOn===null);)T0(n),n.blockedOn===null&&Ei.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Ve]||null;if(typeof r=="function")a||Yy(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Ve]||null)l=a.formAction;else if(xm(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Yy(n)}}}function Mm(e){this._internalRoot=e}xc.prototype.render=Mm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=He();_0(n,i,e,t,null,null)};xc.prototype.unmount=Mm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_0(e.current,2,null,e,null,null),Nc(),t[Xr]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=eE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ei.length&&t!==0&&t<Ei[n].priority;n++);Ei.splice(n,0,e),n===0&&T0(e)}};var Ky=qv.version;if(Ky!=="19.1.1")throw Error(U(527,Ky,"19.1.1"));ft.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=X1(t),e=e!==null?Fv(e):null,e=e===null?null:e.stateNode,e};var TR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Po=Gl.inject(TR),Be=Gl}catch{}}yc.createRoot=function(e,t){if(!Hv(e))throw Error(U(299));var n=!1,i="",s=pT,r=yT,a=_T,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=p0(e,1,!1,null,null,n,i,s,r,a,l,null),e[Xr]=t.current,Cm(e),new Mm(t)};yc.hydrateRoot=function(e,t,n){if(!Hv(e))throw Error(U(299));var i=!1,s="",r=pT,a=yT,l=_T,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=p0(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=y0(null),n=t.current,i=He(),i=Gd(i),s=Vi(i),s.callback=null,xi(n,s,i),n=i,t.current.lanes=n,Lo(t,n),On(t),e[Xr]=t.current,Cm(e),new xc(t)};yc.version="19.1.1";function A0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A0)}catch(e){console.error(e)}}A0(),Pv.exports=yc;var AR=Pv.exports;const SR=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},bR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},b0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,d=r>>2,g=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,y=h&63;u||(y=64,a||(m=64)),i.push(n[d],n[g],n[m],n[y])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(S0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):bR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new wR;const m=r<<2|l>>4;if(i.push(m),h!==64){const y=l<<4&240|h>>2;if(i.push(y),g!==64){const O=h<<6&192|g;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class wR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RR=function(e){const t=S0(e);return b0.encodeByteArray(t,!0)},Xu=function(e){return RR(e).replace(/\./g,"")},w0=function(e){try{return b0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=()=>IR().__FIREBASE_DEFAULTS__,NR=()=>{if(typeof process>"u"||typeof $y>"u")return;const e=$y.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},DR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&w0(e[1]);return t&&JSON.parse(t)},Mc=()=>{try{return SR()||CR()||NR()||DR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},R0=e=>{var t,n;return(n=(t=Mc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},OR=e=>{const t=R0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},I0=()=>{var e;return(e=Mc())==null?void 0:e.config},C0=e=>{var t;return(t=Mc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Xu(JSON.stringify(n)),Xu(JSON.stringify(a)),""].join(".")}const io={};function MR(){const e={prod:[],emulator:[]};for(const t of Object.keys(io))io[t]?e.emulator.push(t):e.prod.push(t);return e}function kR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Xy=!1;function D0(e,t){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||io[e]===t||io[e]||Xy)return;io[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=MR().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Xy=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=kR(i),y=n("text"),O=document.getElementById(y)||document.createElement("span"),V=n("learnmore"),k=document.getElementById(V)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(k,V);const D=h();u(v,w),R.append(v,O,k,D),document.body.appendChild(R)}r?(O.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ve())}function UR(){var t;const e=(t=Mc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function jR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BR(){const e=ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function qR(){return!UR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HR(){try{return typeof indexedDB=="object"}catch{return!1}}function GR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="FirebaseError";class ri extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=FR,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zo.prototype.create)}}class Zo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?QR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new ri(s,l,i)}}function QR(e,t){return e.replace(YR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const YR=/\{\$([^}]+)}/g;function KR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Cs(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(Zy(r)&&Zy(a)){if(!Cs(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Zy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function $R(e,t){const n=new XR(e,t);return n.subscribe.bind(n)}class XR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");ZR(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=sf),s.error===void 0&&(s.error=sf),s.complete===void 0&&(s.complete=sf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(e){return e&&e._delegate?e._delegate:e}class Ns{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new VR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(t2(t))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=gs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gs){return this.instances.has(t)}getOptions(t=gs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=gs){return this.component?this.component.multipleInstances?t:gs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WR(e){return e===gs?void 0:e}function t2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new JR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(st||(st={}));const n2={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},i2=st.INFO,s2={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},r2=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=s2[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class km{constructor(t){this.name=t,this._logLevel=i2,this._logHandler=r2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in st))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?n2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}const a2=(e,t)=>t.some(n=>e instanceof n);let Jy,Wy;function o2(){return Jy||(Jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l2(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O0=new WeakMap,cd=new WeakMap,V0=new WeakMap,rf=new WeakMap,Pm=new WeakMap;function u2(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(zi(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&O0.set(n,e)}).catch(()=>{}),Pm.set(t,e),t}function c2(e){if(cd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});cd.set(e,t)}let hd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||V0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function h2(e){hd=e(hd)}function f2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(af(this),t,...n);return V0.set(i,t.sort?t.sort():[t]),zi(i)}:l2().includes(e)?function(...t){return e.apply(af(this),t),zi(O0.get(this))}:function(...t){return zi(e.apply(af(this),t))}}function d2(e){return typeof e=="function"?f2(e):(e instanceof IDBTransaction&&c2(e),a2(e,o2())?new Proxy(e,hd):e)}function zi(e){if(e instanceof IDBRequest)return u2(e);if(rf.has(e))return rf.get(e);const t=d2(e);return t!==e&&(rf.set(e,t),Pm.set(t,e)),t}const af=e=>Pm.get(e);function m2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=zi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(zi(a.result),u.oldVersion,u.newVersion,zi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const g2=["get","getKey","getAll","getAllKeys","count"],p2=["put","add","delete","clear"],of=new Map;function t_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(of.get(t))return of.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=p2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||g2.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return of.set(t,r),r}h2(e=>({...e,get:(t,n,i)=>t_(t,n)||e.get(t,n,i),has:(t,n)=>!!t_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function _2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const fd="@firebase/app",e_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new km("@firebase/app"),v2="@firebase/app-compat",E2="@firebase/analytics-compat",T2="@firebase/analytics",A2="@firebase/app-check-compat",S2="@firebase/app-check",b2="@firebase/auth",w2="@firebase/auth-compat",R2="@firebase/database",I2="@firebase/data-connect",C2="@firebase/database-compat",N2="@firebase/functions",D2="@firebase/functions-compat",O2="@firebase/installations",V2="@firebase/installations-compat",x2="@firebase/messaging",M2="@firebase/messaging-compat",k2="@firebase/performance",P2="@firebase/performance-compat",U2="@firebase/remote-config",L2="@firebase/remote-config-compat",z2="@firebase/storage",j2="@firebase/storage-compat",B2="@firebase/firestore",q2="@firebase/ai",H2="@firebase/firestore-compat",G2="firebase",F2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="[DEFAULT]",Q2={[fd]:"fire-core",[v2]:"fire-core-compat",[T2]:"fire-analytics",[E2]:"fire-analytics-compat",[S2]:"fire-app-check",[A2]:"fire-app-check-compat",[b2]:"fire-auth",[w2]:"fire-auth-compat",[R2]:"fire-rtdb",[I2]:"fire-data-connect",[C2]:"fire-rtdb-compat",[N2]:"fire-fn",[D2]:"fire-fn-compat",[O2]:"fire-iid",[V2]:"fire-iid-compat",[x2]:"fire-fcm",[M2]:"fire-fcm-compat",[k2]:"fire-perf",[P2]:"fire-perf-compat",[U2]:"fire-rc",[L2]:"fire-rc-compat",[z2]:"fire-gcs",[j2]:"fire-gcs-compat",[B2]:"fire-fst",[H2]:"fire-fst-compat",[q2]:"fire-vertex","fire-js":"fire-js",[G2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,Y2=new Map,md=new Map;function n_(e,t){try{e.container.addComponent(t)}catch(n){Jn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function qr(e){const t=e.name;if(md.has(t))return Jn.debug(`There were multiple attempts to register component ${t}.`),!1;md.set(t,e);for(const n of Zu.values())n_(n,e);for(const n of Y2.values())n_(n,e);return!0}function Um(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function un(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new Zo("app","Firebase",K2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=F2;function x0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:dd,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw ji.create("bad-app-name",{appName:String(s)});if(n||(n=I0()),!n)throw ji.create("no-options");const r=Zu.get(s);if(r){if(Cs(n,r.options)&&Cs(i,r.config))return r;throw ji.create("duplicate-app",{appName:s})}const a=new e2(s);for(const u of md.values())a.addComponent(u);const l=new $2(n,i,a);return Zu.set(s,l),l}function M0(e=dd){const t=Zu.get(e);if(!t&&e===dd&&I0())return x0();if(!t)throw ji.create("no-app",{appName:e});return t}function Bi(e,t,n){let i=Q2[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}qr(new Ns(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="firebase-heartbeat-database",Z2=1,wo="firebase-heartbeat-store";let lf=null;function k0(){return lf||(lf=m2(X2,Z2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(wo)}catch(n){console.warn(n)}}}}).catch(e=>{throw ji.create("idb-open",{originalErrorMessage:e.message})})),lf}async function J2(e){try{const n=(await k0()).transaction(wo),i=await n.objectStore(wo).get(P0(e));return await n.done,i}catch(t){if(t instanceof ri)Jn.warn(t.message);else{const n=ji.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Jn.warn(n.message)}}}async function i_(e,t){try{const i=(await k0()).transaction(wo,"readwrite");await i.objectStore(wo).put(t,P0(e)),await i.done}catch(n){if(n instanceof ri)Jn.warn(n.message);else{const i=ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jn.warn(i.message)}}}function P0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=1024,tI=30;class eI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=s_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>tI){const a=sI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Jn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=s_(),{heartbeatsToSend:i,unsentEntries:s}=nI(this._heartbeatsCache.heartbeats),r=Xu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Jn.warn(n),""}}}function s_(){return new Date().toISOString().substring(0,10)}function nI(e,t=W2){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),r_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),r_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class iI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HR()?GR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return i_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return i_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function r_(e){return Xu(JSON.stringify({version:2,heartbeats:e})).length}function sI(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(e){qr(new Ns("platform-logger",t=>new y2(t),"PRIVATE")),qr(new Ns("heartbeat",t=>new eI(t),"PRIVATE")),Bi(fd,e_,e),Bi(fd,e_,"esm2020"),Bi("fire-js","")}rI("");var aI="firebase",oI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(aI,oI,"app");var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,U0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function A(){}A.prototype=_.prototype,T.D=_.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(E,S,I){for(var b=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)b[Nt-2]=arguments[Nt];return _.prototype[S].apply(E,b)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,A){A||(A=0);var E=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)E[S]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(S=0;16>S;++S)E[S]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=T.g[0],A=T.g[1],S=T.g[2];var I=T.g[3],b=_+(I^A&(S^I))+E[0]+3614090360&4294967295;_=A+(b<<7&4294967295|b>>>25),b=I+(S^_&(A^S))+E[1]+3905402710&4294967295,I=_+(b<<12&4294967295|b>>>20),b=S+(A^I&(_^A))+E[2]+606105819&4294967295,S=I+(b<<17&4294967295|b>>>15),b=A+(_^S&(I^_))+E[3]+3250441966&4294967295,A=S+(b<<22&4294967295|b>>>10),b=_+(I^A&(S^I))+E[4]+4118548399&4294967295,_=A+(b<<7&4294967295|b>>>25),b=I+(S^_&(A^S))+E[5]+1200080426&4294967295,I=_+(b<<12&4294967295|b>>>20),b=S+(A^I&(_^A))+E[6]+2821735955&4294967295,S=I+(b<<17&4294967295|b>>>15),b=A+(_^S&(I^_))+E[7]+4249261313&4294967295,A=S+(b<<22&4294967295|b>>>10),b=_+(I^A&(S^I))+E[8]+1770035416&4294967295,_=A+(b<<7&4294967295|b>>>25),b=I+(S^_&(A^S))+E[9]+2336552879&4294967295,I=_+(b<<12&4294967295|b>>>20),b=S+(A^I&(_^A))+E[10]+4294925233&4294967295,S=I+(b<<17&4294967295|b>>>15),b=A+(_^S&(I^_))+E[11]+2304563134&4294967295,A=S+(b<<22&4294967295|b>>>10),b=_+(I^A&(S^I))+E[12]+1804603682&4294967295,_=A+(b<<7&4294967295|b>>>25),b=I+(S^_&(A^S))+E[13]+4254626195&4294967295,I=_+(b<<12&4294967295|b>>>20),b=S+(A^I&(_^A))+E[14]+2792965006&4294967295,S=I+(b<<17&4294967295|b>>>15),b=A+(_^S&(I^_))+E[15]+1236535329&4294967295,A=S+(b<<22&4294967295|b>>>10),b=_+(S^I&(A^S))+E[1]+4129170786&4294967295,_=A+(b<<5&4294967295|b>>>27),b=I+(A^S&(_^A))+E[6]+3225465664&4294967295,I=_+(b<<9&4294967295|b>>>23),b=S+(_^A&(I^_))+E[11]+643717713&4294967295,S=I+(b<<14&4294967295|b>>>18),b=A+(I^_&(S^I))+E[0]+3921069994&4294967295,A=S+(b<<20&4294967295|b>>>12),b=_+(S^I&(A^S))+E[5]+3593408605&4294967295,_=A+(b<<5&4294967295|b>>>27),b=I+(A^S&(_^A))+E[10]+38016083&4294967295,I=_+(b<<9&4294967295|b>>>23),b=S+(_^A&(I^_))+E[15]+3634488961&4294967295,S=I+(b<<14&4294967295|b>>>18),b=A+(I^_&(S^I))+E[4]+3889429448&4294967295,A=S+(b<<20&4294967295|b>>>12),b=_+(S^I&(A^S))+E[9]+568446438&4294967295,_=A+(b<<5&4294967295|b>>>27),b=I+(A^S&(_^A))+E[14]+3275163606&4294967295,I=_+(b<<9&4294967295|b>>>23),b=S+(_^A&(I^_))+E[3]+4107603335&4294967295,S=I+(b<<14&4294967295|b>>>18),b=A+(I^_&(S^I))+E[8]+1163531501&4294967295,A=S+(b<<20&4294967295|b>>>12),b=_+(S^I&(A^S))+E[13]+2850285829&4294967295,_=A+(b<<5&4294967295|b>>>27),b=I+(A^S&(_^A))+E[2]+4243563512&4294967295,I=_+(b<<9&4294967295|b>>>23),b=S+(_^A&(I^_))+E[7]+1735328473&4294967295,S=I+(b<<14&4294967295|b>>>18),b=A+(I^_&(S^I))+E[12]+2368359562&4294967295,A=S+(b<<20&4294967295|b>>>12),b=_+(A^S^I)+E[5]+4294588738&4294967295,_=A+(b<<4&4294967295|b>>>28),b=I+(_^A^S)+E[8]+2272392833&4294967295,I=_+(b<<11&4294967295|b>>>21),b=S+(I^_^A)+E[11]+1839030562&4294967295,S=I+(b<<16&4294967295|b>>>16),b=A+(S^I^_)+E[14]+4259657740&4294967295,A=S+(b<<23&4294967295|b>>>9),b=_+(A^S^I)+E[1]+2763975236&4294967295,_=A+(b<<4&4294967295|b>>>28),b=I+(_^A^S)+E[4]+1272893353&4294967295,I=_+(b<<11&4294967295|b>>>21),b=S+(I^_^A)+E[7]+4139469664&4294967295,S=I+(b<<16&4294967295|b>>>16),b=A+(S^I^_)+E[10]+3200236656&4294967295,A=S+(b<<23&4294967295|b>>>9),b=_+(A^S^I)+E[13]+681279174&4294967295,_=A+(b<<4&4294967295|b>>>28),b=I+(_^A^S)+E[0]+3936430074&4294967295,I=_+(b<<11&4294967295|b>>>21),b=S+(I^_^A)+E[3]+3572445317&4294967295,S=I+(b<<16&4294967295|b>>>16),b=A+(S^I^_)+E[6]+76029189&4294967295,A=S+(b<<23&4294967295|b>>>9),b=_+(A^S^I)+E[9]+3654602809&4294967295,_=A+(b<<4&4294967295|b>>>28),b=I+(_^A^S)+E[12]+3873151461&4294967295,I=_+(b<<11&4294967295|b>>>21),b=S+(I^_^A)+E[15]+530742520&4294967295,S=I+(b<<16&4294967295|b>>>16),b=A+(S^I^_)+E[2]+3299628645&4294967295,A=S+(b<<23&4294967295|b>>>9),b=_+(S^(A|~I))+E[0]+4096336452&4294967295,_=A+(b<<6&4294967295|b>>>26),b=I+(A^(_|~S))+E[7]+1126891415&4294967295,I=_+(b<<10&4294967295|b>>>22),b=S+(_^(I|~A))+E[14]+2878612391&4294967295,S=I+(b<<15&4294967295|b>>>17),b=A+(I^(S|~_))+E[5]+4237533241&4294967295,A=S+(b<<21&4294967295|b>>>11),b=_+(S^(A|~I))+E[12]+1700485571&4294967295,_=A+(b<<6&4294967295|b>>>26),b=I+(A^(_|~S))+E[3]+2399980690&4294967295,I=_+(b<<10&4294967295|b>>>22),b=S+(_^(I|~A))+E[10]+4293915773&4294967295,S=I+(b<<15&4294967295|b>>>17),b=A+(I^(S|~_))+E[1]+2240044497&4294967295,A=S+(b<<21&4294967295|b>>>11),b=_+(S^(A|~I))+E[8]+1873313359&4294967295,_=A+(b<<6&4294967295|b>>>26),b=I+(A^(_|~S))+E[15]+4264355552&4294967295,I=_+(b<<10&4294967295|b>>>22),b=S+(_^(I|~A))+E[6]+2734768916&4294967295,S=I+(b<<15&4294967295|b>>>17),b=A+(I^(S|~_))+E[13]+1309151649&4294967295,A=S+(b<<21&4294967295|b>>>11),b=_+(S^(A|~I))+E[4]+4149444226&4294967295,_=A+(b<<6&4294967295|b>>>26),b=I+(A^(_|~S))+E[11]+3174756917&4294967295,I=_+(b<<10&4294967295|b>>>22),b=S+(_^(I|~A))+E[2]+718787259&4294967295,S=I+(b<<15&4294967295|b>>>17),b=A+(I^(S|~_))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var A=_-this.blockSize,E=this.B,S=this.h,I=0;I<_;){if(S==0)for(;I<=A;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<_;)if(E[S++]=T.charCodeAt(I++),S==this.blockSize){s(this,E),S=0;break}}else for(;I<_;)if(E[S++]=T[I++],S==this.blockSize){s(this,E),S=0;break}}this.h=S,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var A=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=A&255,A/=256;for(this.u(T),T=Array(16),_=A=0;4>_;++_)for(var E=0;32>E;E+=8)T[A++]=this.g[_]>>>E&255;return T};function r(T,_){var A=l;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=_(T)}function a(T,_){this.h=_;for(var A=[],E=!0,S=T.length-1;0<=S;S--){var I=T[S]|0;E&&I==_||(A[S]=I,E=!1)}this.g=A}var l={};function u(T){return-128<=T&&128>T?r(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return k(h(-T));for(var _=[],A=1,E=0;T>=A;E++)_[E]=T/A|0,A*=4294967296;return new a(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return k(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(_,8)),E=g,S=0;S<T.length;S+=8){var I=Math.min(8,T.length-S),b=parseInt(T.substring(S,S+I),_);8>I?(I=h(Math.pow(_,I)),E=E.j(I).add(h(b))):(E=E.j(A),E=E.add(h(b)))}return E}var g=u(0),m=u(1),y=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-k(this).m();for(var T=0,_=1,A=0;A<this.g.length;A++){var E=this.i(A);T+=(0<=E?E:4294967296+E)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O(this))return"0";if(V(this))return"-"+k(this).toString(T);for(var _=h(Math.pow(T,6)),A=this,E="";;){var S=D(A,_).g;A=w(A,S.j(_));var I=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=S,O(A))return I+E;for(;6>I.length;)I="0"+I;E=I+E}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function O(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=w(this,T),V(T)?-1:O(T)?0:1};function k(T){for(var _=T.g.length,A=[],E=0;E<_;E++)A[E]=~T.g[E];return new a(A,~T.h).add(m)}e.abs=function(){return V(this)?k(this):this},e.add=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],E=0,S=0;S<=_;S++){var I=E+(this.i(S)&65535)+(T.i(S)&65535),b=(I>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);E=b>>>16,I&=65535,b&=65535,A[S]=b<<16|I}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(T,_){return T.add(k(_))}e.j=function(T){if(O(this)||O(T))return g;if(V(this))return V(T)?k(this).j(k(T)):k(k(this).j(T));if(V(T))return k(this.j(k(T)));if(0>this.l(y)&&0>T.l(y))return h(this.m()*T.m());for(var _=this.g.length+T.g.length,A=[],E=0;E<2*_;E++)A[E]=0;for(E=0;E<this.g.length;E++)for(var S=0;S<T.g.length;S++){var I=this.i(E)>>>16,b=this.i(E)&65535,Nt=T.i(S)>>>16,Qt=T.i(S)&65535;A[2*E+2*S]+=b*Qt,v(A,2*E+2*S),A[2*E+2*S+1]+=I*Qt,v(A,2*E+2*S+1),A[2*E+2*S+1]+=b*Nt,v(A,2*E+2*S+1),A[2*E+2*S+2]+=I*Nt,v(A,2*E+2*S+2)}for(E=0;E<_;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=_;E<2*_;E++)A[E]=0;return new a(A,0)};function v(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function R(T,_){this.g=T,this.h=_}function D(T,_){if(O(_))throw Error("division by zero");if(O(T))return new R(g,g);if(V(T))return _=D(k(T),_),new R(k(_.g),k(_.h));if(V(_))return _=D(T,k(_)),new R(k(_.g),_.h);if(30<T.g.length){if(V(T)||V(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,E=_;0>=E.l(T);)A=L(A),E=L(E);var S=B(A,1),I=B(E,1);for(E=B(E,2),A=B(A,2);!O(E);){var b=I.add(E);0>=b.l(T)&&(S=S.add(A),I=b),E=B(E,1),A=B(A,1)}return _=w(T,S.j(_)),new R(S,_)}for(S=g;0<=T.l(_);){for(A=Math.max(1,Math.floor(T.m()/_.m())),E=Math.ceil(Math.log(A)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),I=h(A),b=I.j(_);V(b)||0<b.l(T);)A-=E,I=h(A),b=I.j(_);O(I)&&(I=m),S=S.add(I),T=w(T,b)}return new R(S,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],E=0;E<_;E++)A[E]=this.i(E)&T.i(E);return new a(A,this.h&T.h)},e.or=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],E=0;E<_;E++)A[E]=this.i(E)|T.i(E);return new a(A,this.h|T.h)},e.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),A=[],E=0;E<_;E++)A[E]=this.i(E)^T.i(E);return new a(A,this.h^T.h)};function L(T){for(var _=T.g.length+1,A=[],E=0;E<_;E++)A[E]=T.i(E)<<1|T.i(E-1)>>>31;return new a(A,T.h)}function B(T,_){var A=_>>5;_%=32;for(var E=T.g.length-A,S=[],I=0;I<E;I++)S[I]=0<_?T.i(I+A)>>>_|T.i(I+A+1)<<32-_:T.i(I+A);return new a(S,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,U0=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,qi=a}).apply(typeof a_<"u"?a_:typeof self<"u"?self:typeof window<"u"?window:{});var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L0,La,z0,cu,gd,j0,B0,q0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var x=f++;return{value:c(x,o[x]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(c,C)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function y(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function O(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,x){for(var z=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)z[Et-2]=arguments[Et];return c.prototype[C].apply(p,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function k(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const C=o.length||0,x=p.length||0;o.length=C+x;for(let z=0;z<x;z++)o[C+z]=p[z]}else o.push(p)}}class w{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function _(o){const c={};for(const f in o)c[f]=o[f];return c}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,c){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let x=0;x<A.length;x++)f=A[x],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function S(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function b(){var o=vt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Nt{constructor(){this.h=this.g=null}add(c,f){const p=Qt.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Qt=new w(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,Z=!1,vt=new Nt,Dt=()=>{const o=l.Promise.resolve(void 0);F=()=>{o.then(rn)}};var rn=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){I(f)}var c=Qt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Z=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var an=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Ke(o,c){if(Mt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var C=!0;break t}catch{}C=!1}C||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ih[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ke.aa.h.call(this)}}O(Ke,Mt);var ih={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var js="closure_listenable_"+(1e6*Math.random()|0),hl=0;function sh(o,c,f,p,C){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=C,this.key=++hl,this.da=this.fa=!1}function ai(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Bs(o){this.src=o,this.g={},this.h=0}Bs.prototype.add=function(o,c,f,p,C){var x=o.toString();o=this.g[x],o||(o=this.g[x]=[],this.h++);var z=gt(o,c,p,C);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new sh(c,this.src,x,!!p,C),c.fa=f,o.push(c)),c};function $(o,c){var f=c.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,c,void 0),x;(x=0<=C)&&Array.prototype.splice.call(p,C,1),x&&(ai(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function gt(o,c,f,p){for(var C=0;C<o.length;++C){var x=o[C];if(!x.da&&x.listener==c&&x.capture==!!f&&x.ha==p)return C}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),qs={};function ca(o,c,f,p,C){if(Array.isArray(c)){for(var x=0;x<c.length;x++)ca(o,c[x],f,p,C);return null}return f=gn(f),o&&o[js]?o.K(c,f,h(p)?!!p.capture:!1,C):fl(o,c,f,!1,p,C)}function fl(o,c,f,p,C,x){if(!c)throw Error("Invalid event type");var z=h(C)?!!C.capture:!!C,Et=fa(o);if(Et||(o[Te]=Et=new Bs(o)),f=Et.add(c,f,p,z,x),f.proxy)return f;if(p=dl(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)an||(C=z),C===void 0&&(C=!1),o.addEventListener(c.toString(),p,C);else if(o.attachEvent)o.attachEvent(ha(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dl(){function o(f){return c.call(o.src,o.listener,f)}const c=rh;return o}function mn(o,c,f,p,C){if(Array.isArray(c))for(var x=0;x<c.length;x++)mn(o,c[x],f,p,C);else p=h(p)?!!p.capture:!!p,f=gn(f),o&&o[js]?(o=o.i,c=String(c).toString(),c in o.g&&(x=o.g[c],f=gt(x,f,p,C),-1<f&&(ai(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete o.g[c],o.h--)))):o&&(o=fa(o))&&(c=o.g[c.toString()],o=-1,c&&(o=gt(c,f,p,C)),(f=-1<o?c[o]:null)&&oi(f))}function oi(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[js])$(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(ha(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=fa(c))?($(f,o),f.h==0&&(f.src=null,c[Te]=null)):ai(o)}}}function ha(o){return o in qs?qs[o]:qs[o]="on"+o}function rh(o,c){if(o.da)o=!0;else{c=new Ke(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&oi(o),o=f.call(p,c)}return o}function fa(o){return o=o[Te],o instanceof Bs?o:null}var Hs="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(o){return typeof o=="function"?o:(o[Hs]||(o[Hs]=function(c){return o.handleEvent(c)}),o[Hs])}function fe(){Ee.call(this),this.i=new Bs(this),this.M=this,this.F=null}O(fe,Ee),fe.prototype[js]=!0,fe.prototype.removeEventListener=function(o,c,f,p){mn(this,o,c,f,p)};function Ae(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Mt(c,o);else if(c instanceof Mt)c.target=c.target||o;else{var C=c;c=new Mt(p,o),E(c,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var z=c.g=f[x];C=ml(z,p,!0,c)&&C}if(z=c.g=o,C=ml(z,p,!0,c)&&C,C=ml(z,p,!1,c)&&C,f)for(x=0;x<f.length;x++)z=c.g=f[x],C=ml(z,p,!1,c)&&C}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)ai(f[p]);delete o.g[c],o.h--}}this.F=null},fe.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},fe.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function ml(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,x=0;x<c.length;++x){var z=c[x];if(z&&!z.da&&z.capture==f){var Et=z.listener,se=z.ha||z.src;z.fa&&$(o.i,z),C=Et.call(se,p)!==!1&&C}}return C&&!p.defaultPrevented}function Ng(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Dg(o){o.g=Ng(()=>{o.g=null,o.i&&(o.i=!1,Dg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class e1 extends Ee{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Dg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function da(o){Ee.call(this),this.h=o,this.g={}}O(da,Ee);var Og=[];function Vg(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&oi(c)},o),o.g={}}da.prototype.N=function(){da.aa.N.call(this),Vg(this)},da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ah=l.JSON.stringify,n1=l.JSON.parse,i1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function oh(){}oh.prototype.h=null;function xg(o){return o.h||(o.h=o.i())}function Mg(){}var ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lh(){Mt.call(this,"d")}O(lh,Mt);function uh(){Mt.call(this,"c")}O(uh,Mt);var os={},kg=null;function gl(){return kg=kg||new fe}os.La="serverreachability";function Pg(o){Mt.call(this,os.La,o)}O(Pg,Mt);function ga(o){const c=gl();Ae(c,new Pg(c))}os.STAT_EVENT="statevent";function Ug(o,c){Mt.call(this,os.STAT_EVENT,o),this.stat=c}O(Ug,Mt);function Se(o){const c=gl();Ae(c,new Ug(c,o))}os.Ma="timingevent";function Lg(o,c){Mt.call(this,os.Ma,o),this.size=c}O(Lg,Mt);function pa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function ya(){this.g=!0}ya.prototype.xa=function(){this.g=!1};function s1(o,c,f,p,C,x){o.info(function(){if(o.g)if(x)for(var z="",Et=x.split("&"),se=0;se<Et.length;se++){var ct=Et[se].split("=");if(1<ct.length){var de=ct[0];ct=ct[1];var me=de.split("_");z=2<=me.length&&me[1]=="type"?z+(de+"="+ct+"&"):z+(de+"=redacted&")}}else z=null;else z=x;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+c+`
`+f+`
`+z})}function r1(o,c,f,p,C,x,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+c+`
`+f+`
`+x+" "+z})}function Gs(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+o1(o,f)+(p?" "+p:"")})}function a1(o,c){o.info(function(){return"TIMEOUT: "+c})}ya.prototype.info=function(){};function o1(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return ah(f)}catch{return c}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ch;function yl(){}O(yl,oh),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},ch=new yl;function li(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jg}function jg(){this.i=null,this.g="",this.h=!1}var Bg={},hh={};function fh(o,c,f){o.L=1,o.v=Tl(Vn(c)),o.m=f,o.P=!0,qg(o,null)}function qg(o,c){o.F=Date.now(),_l(o),o.A=Vn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),np(f.i,"t",p),o.C=0,f=o.j.J,o.h=new jg,o.g=Ep(o.j,f?c:null,!o.m),0<o.O&&(o.M=new e1(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Og[0]=C.toString()),C=Og);for(var x=0;x<C.length;x++){var z=ca(f,C[x],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ga(),s1(o.i,o.u,o.A,o.l,o.R,o.m)}li.prototype.ca=function(o){o=o.target;const c=this.M;c&&xn(o)==3?c.j():this.Y(o)},li.prototype.Y=function(o){try{if(o==this.g)t:{const me=xn(this.g);var c=this.g.Ba();const Ys=this.g.Z();if(!(3>me)&&(me!=3||this.g&&(this.h.h||this.g.oa()||up(this.g)))){this.J||me!=4||c==7||(c==8||0>=Ys?ga(3):ga(2)),dh(this);var f=this.g.Z();this.X=f;e:if(Hg(this)){var p=up(this.g);o="";var C=p.length,x=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),_a(this);var z="";break e}this.h.i=new l.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(x&&c==C-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,r1(this.i,this.u,this.A,this.l,this.R,me,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Et,se=this.g;if((Et=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Et)){var ct=Et;break e}}ct=null}if(f=ct)Gs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mh(this,f);else{this.o=!1,this.s=3,Se(12),ls(this),_a(this);break t}}if(this.P){f=!0;let on;for(;!this.J&&this.C<z.length;)if(on=l1(this,z),on==hh){me==4&&(this.s=4,Se(14),f=!1),Gs(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Bg){this.s=4,Se(15),Gs(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Gs(this.i,this.l,on,null),mh(this,on);if(Hg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||z.length!=0||this.h.h||(this.s=1,Se(16),f=!1),this.o=this.o&&f,!f)Gs(this.i,this.l,z,"[Invalid Chunked Response]"),ls(this),_a(this);else if(0<z.length&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.ba&&!de.M&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Eh(de),de.M=!0,Se(11))}}else Gs(this.i,this.l,z,null),mh(this,z);me==4&&ls(this),this.o&&!this.J&&(me==4?pp(this.j,this):(this.o=!1,_l(this)))}else w1(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),ls(this),_a(this)}}}catch{}finally{}};function Hg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function l1(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?hh:(f=Number(c.substring(f,p)),isNaN(f)?Bg:(p+=1,p+f>c.length?hh:(c=c.slice(p,p+f),o.C=p+f,c)))}li.prototype.cancel=function(){this.J=!0,ls(this)};function _l(o){o.S=Date.now()+o.I,Gg(o,o.I)}function Gg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=pa(m(o.ba,o),c)}function dh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}li.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(a1(this.i,this.A),this.L!=2&&(ga(),Se(17)),ls(this),this.s=2,_a(this)):Gg(this,this.S-o)};function _a(o){o.j.G==0||o.J||pp(o.j,o)}function ls(o){dh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Vg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function mh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||gh(f.h,o))){if(!o.K&&gh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Il(f),wl(f);else break t;vh(f),Se(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=pa(m(f.Za,f),6e3));if(1>=Yg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else cs(f,11)}else if((o.K||f.g==o)&&Il(f),!v(c))for(C=f.Da.g.parse(c),c=0;c<C.length;c++){let ct=C[c];if(f.T=ct[0],ct=ct[1],f.G==2)if(ct[0]=="c"){f.K=ct[1],f.ia=ct[2];const de=ct[3];de!=null&&(f.la=de,f.j.info("VER="+f.la));const me=ct[4];me!=null&&(f.Aa=me,f.j.info("SVER="+f.Aa));const Ys=ct[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(p=1.5*Ys,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const on=o.g;if(on){const Nl=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var x=p.h;x.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(ph(x,x.h),x.h=null))}if(p.D){const Th=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Th&&(p.ya=Th,St(p.I,p.D,Th))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=vp(p,p.J?p.ia:null,p.W),z.K){Kg(p.h,z);var Et=z,se=p.L;se&&(Et.I=se),Et.B&&(dh(Et),_l(Et)),p.g=z}else mp(p);0<f.i.length&&Rl(f)}else ct[0]!="stop"&&ct[0]!="close"||cs(f,7);else f.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?cs(f,7):_h(f):ct[0]!="noop"&&f.l&&f.l.ta(ct),f.v=0)}}ga(4)}catch{}}var u1=class{constructor(o,c){this.g=o,this.map=c}};function Fg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Yg(o){return o.h?1:o.g?o.g.size:0}function gh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ph(o,c){o.g?o.g.add(c):o.h=c}function Kg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Fg.prototype.cancel=function(){if(this.i=$g(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function $g(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function c1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function h1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Xg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=h1(o),p=c1(o),C=p.length,x=0;x<C;x++)c.call(void 0,p[x],f&&f[x],o)}var Zg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f1(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var x=o[f].substring(0,p);C=o[f].substring(p+1)}else x=o[f];c(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function us(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof us){this.h=o.h,vl(this,o.j),this.o=o.o,this.g=o.g,El(this,o.s),this.l=o.l;var c=o.i,f=new Ta;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Jg(this,f),this.m=o.m}else o&&(c=String(o).match(Zg))?(this.h=!1,vl(this,c[1]||"",!0),this.o=va(c[2]||""),this.g=va(c[3]||"",!0),El(this,c[4]),this.l=va(c[5]||"",!0),Jg(this,c[6]||"",!0),this.m=va(c[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}us.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ea(c,Wg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ea(c,Wg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ea(f,f.charAt(0)=="/"?g1:m1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ea(f,y1)),o.join("")};function Vn(o){return new us(o)}function vl(o,c,f){o.j=f?va(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function El(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Jg(o,c,f){c instanceof Ta?(o.i=c,_1(o.i,o.h)):(f||(c=Ea(c,p1)),o.i=new Ta(c,o.h))}function St(o,c,f){o.i.set(c,f)}function Tl(o){return St(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function va(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ea(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,d1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function d1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Wg=/[#\/\?@]/g,m1=/[#\?:]/g,g1=/[#\?]/g,p1=/[#\?@]/g,y1=/#/g;function Ta(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ui(o){o.g||(o.g=new Map,o.h=0,o.i&&f1(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=Ta.prototype,e.add=function(o,c){ui(this),this.i=null,o=Fs(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function tp(o,c){ui(o),c=Fs(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function ep(o,c){return ui(o),c=Fs(o,c),o.g.has(c)}e.forEach=function(o,c){ui(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(c,C,p,this)},this)},this)},e.na=function(){ui(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const C=o[p];for(let x=0;x<C.length;x++)f.push(c[p])}return f},e.V=function(o){ui(this);let c=[];if(typeof o=="string")ep(this,o)&&(c=c.concat(this.g.get(Fs(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return ui(this),this.i=null,o=Fs(this,o),ep(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function np(o,c,f){tp(o,c),0<f.length&&(o.i=null,o.g.set(Fs(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const x=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var C=x;z[p]!==""&&(C+="="+encodeURIComponent(String(z[p]))),o.push(C)}}return this.i=o.join("&")};function Fs(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function _1(o,c){c&&!o.j&&(ui(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(tp(this,p),np(this,C,f))},o)),o.j=c}function v1(o,c){const f=new ya;if(l.Image){const p=new Image;p.onload=y(ci,f,"TestLoadImage: loaded",!0,c,p),p.onerror=y(ci,f,"TestLoadImage: error",!1,c,p),p.onabort=y(ci,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=y(ci,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function E1(o,c){const f=new ya,p=new AbortController,C=setTimeout(()=>{p.abort(),ci(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(x=>{clearTimeout(C),x.ok?ci(f,"TestPingServer: ok",!0,c):ci(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),ci(f,"TestPingServer: error",!1,c)})}function ci(o,c,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function T1(){this.g=new i1}function A1(o,c,f){const p=f||"";try{Xg(o,function(C,x){let z=C;h(C)&&(z=ah(C)),c.push(p+x+"="+encodeURIComponent(z))})}catch(C){throw c.push(p+"type="+encodeURIComponent("_badmap")),C}}function Al(o){this.l=o.Ub||null,this.j=o.eb||!1}O(Al,oh),Al.prototype.g=function(){return new Sl(this.l,this.j)},Al.prototype.i=function(o){return function(){return o}}({});function Sl(o,c){fe.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Sl,fe),e=Sl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Sa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Aa(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Sa(this)),this.g&&(this.readyState=3,Sa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ip(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ip(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Aa(this):Sa(this),this.readyState==3&&ip(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Aa(this))},e.Qa=function(o){this.g&&(this.response=o,Aa(this))},e.ga=function(){this.g&&Aa(this)};function Aa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Sa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Sa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function sp(o){let c="";return B(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function yh(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=sp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):St(o,c,f))}function kt(o){fe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(kt,fe);var S1=/^https?$/i,b1=["POST","PUT"];e=kt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ch.g(),this.v=this.o?xg(this.o):xg(ch),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(x){rp(this,x);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const x of p.keys())f.set(x,p.get(x));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(b1,c,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,z]of f)this.g.setRequestHeader(x,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lp(this),this.u=!0,this.g.send(o),this.u=!1}catch(x){rp(this,x)}};function rp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,ap(o),bl(o)}function ap(o){o.A||(o.A=!0,Ae(o,"complete"),Ae(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ae(this,"complete"),Ae(this,"abort"),bl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bl(this,!0)),kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?op(this):this.bb())},e.bb=function(){op(this)};function op(o){if(o.h&&typeof a<"u"&&(!o.v[1]||xn(o)!=4||o.Z()!=2)){if(o.u&&xn(o)==4)Ng(o.Ea,0,o);else if(Ae(o,"readystatechange"),xn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var C=String(o.D).match(Zg)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!S1.test(C?C.toLowerCase():"")}f=p}if(f)Ae(o,"complete"),Ae(o,"success");else{o.m=6;try{var x=2<xn(o)?o.g.statusText:""}catch{x=""}o.l=x+" ["+o.Z()+"]",ap(o)}}finally{bl(o)}}}}function bl(o,c){if(o.g){lp(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ae(o,"ready");try{f.onreadystatechange=p}catch{}}}function lp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function xn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),n1(c)}};function up(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function w1(o){const c={};o=(o.g&&2<=xn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var f=S(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const x=c[C]||[];c[C]=x,x.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function cp(o){this.Aa=0,this.i=[],this.j=new ya,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,o),this.cb=ba("retryDelaySeedMs",1e4,o),this.Wa=ba("forwardChannelMaxRetries",2,o),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Fg(o&&o.concurrentRequestLimit),this.Da=new T1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=cp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Se(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=vp(this,null,this.W),Rl(this)};function _h(o){if(hp(o),o.G==3){var c=o.U++,f=Vn(o.I);if(St(f,"SID",o.K),St(f,"RID",c),St(f,"TYPE","terminate"),wa(o,f),c=new li(o,o.j,c),c.L=2,c.v=Tl(Vn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Ep(c.j,null),c.g.ea(c.v)),c.F=Date.now(),_l(c)}_p(o)}function wl(o){o.g&&(Eh(o),o.g.cancel(),o.g=null)}function hp(o){wl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Il(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Rl(o){if(!Qg(o.h)&&!o.s){o.s=!0;var c=o.Ga;F||Dt(),Z||(F(),Z=!0),vt.add(c,o),o.B=0}}function R1(o,c){return Yg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=pa(m(o.Ga,o,c),yp(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new li(this,this.j,o);let x=this.o;if(this.S&&(x?(x=_(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=dp(this,C,c),f=Vn(this.I),St(f,"RID",o),St(f,"CVER",22),this.D&&St(f,"X-HTTP-Session-Id",this.D),wa(this,f),x&&(this.O?c="headers="+encodeURIComponent(String(sp(x)))+"&"+c:this.m&&yh(f,this.m,x)),ph(this.h,C),this.Ua&&St(f,"TYPE","init"),this.P?(St(f,"$req",c),St(f,"SID","null"),C.T=!0,fh(C,f,null)):fh(C,f,c),this.G=2}}else this.G==3&&(o?fp(this,o):this.i.length==0||Qg(this.h)||fp(this))};function fp(o,c){var f;c?f=c.l:f=o.U++;const p=Vn(o.I);St(p,"SID",o.K),St(p,"RID",f),St(p,"AID",o.T),wa(o,p),o.m&&o.o&&yh(p,o.m,o.o),f=new li(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=dp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ph(o.h,f),fh(f,p,c)}function wa(o,c){o.H&&B(o.H,function(f,p){St(c,p,f)}),o.l&&Xg({},function(f,p){St(c,p,f)})}function dp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let x=-1;for(;;){const z=["count="+f];x==-1?0<f?(x=C[0].g,z.push("ofs="+x)):x=0:z.push("ofs="+x);let Et=!0;for(let se=0;se<f;se++){let ct=C[se].g;const de=C[se].map;if(ct-=x,0>ct)x=Math.max(0,C[se].g-100),Et=!1;else try{A1(de,z,"req"+ct+"_")}catch{p&&p(de)}}if(Et){p=z.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function mp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;F||Dt(),Z||(F(),Z=!0),vt.add(c,o),o.v=0}}function vh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=pa(m(o.Fa,o),yp(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,gp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=pa(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),wl(this),gp(this))};function Eh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function gp(o){o.g=new li(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Vn(o.qa);St(c,"RID","rpc"),St(c,"SID",o.K),St(c,"AID",o.T),St(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&St(c,"TO",o.ja),St(c,"TYPE","xmlhttp"),wa(o,c),o.m&&o.o&&yh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Tl(Vn(c)),f.m=null,f.P=!0,qg(f,o)}e.Za=function(){this.C!=null&&(this.C=null,wl(this),vh(this),Se(19))};function Il(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function pp(o,c){var f=null;if(o.g==c){Il(o),Eh(o),o.g=null;var p=2}else if(gh(o.h,c))f=c.D,Kg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var C=o.B;p=gl(),Ae(p,new Lg(p,f)),Rl(o)}else mp(o);else if(C=c.s,C==3||C==0&&0<c.X||!(p==1&&R1(o,c)||p==2&&vh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),C){case 1:cs(o,5);break;case 4:cs(o,10);break;case 3:cs(o,6);break;default:cs(o,2)}}}function yp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function cs(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const C=!p;p=new us(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vl(p,"https"),Tl(p),C?v1(p.toString(),f):E1(p.toString(),f)}else Se(2);o.G=0,o.l&&o.l.sa(c),_p(o),hp(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function _p(o){if(o.G=0,o.ka=[],o.l){const c=$g(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function vp(o,c,f){var p=f instanceof us?Vn(f):new us(f);if(p.g!="")c&&(p.g=c+"."+p.g),El(p,p.s);else{var C=l.location;p=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var x=new us(null);p&&vl(x,p),c&&(x.g=c),C&&El(x,C),f&&(x.l=f),p=x}return f=o.D,c=o.ya,f&&c&&St(p,f,c),St(p,"VER",o.la),wa(o,p),p}function Ep(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new kt(new Al({eb:f})):new kt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tp(){}e=Tp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Cl(){}Cl.prototype.g=function(o,c){return new Me(o,c)};function Me(o,c){fe.call(this),this.g=new cp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Qs(this)}O(Me,fe),Me.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Me.prototype.close=function(){_h(this.g)},Me.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ah(o),o=f);c.i.push(new u1(c.Ya++,o)),c.G==3&&Rl(c)},Me.prototype.N=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,Me.aa.N.call(this)};function Ap(o){lh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}O(Ap,lh);function Sp(){uh.call(this),this.status=1}O(Sp,uh);function Qs(o){this.g=o}O(Qs,Tp),Qs.prototype.ua=function(){Ae(this.g,"a")},Qs.prototype.ta=function(o){Ae(this.g,new Ap(o))},Qs.prototype.sa=function(o){Ae(this.g,new Sp)},Qs.prototype.ra=function(){Ae(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Me.prototype.send=Me.prototype.o,Me.prototype.open=Me.prototype.m,Me.prototype.close=Me.prototype.close,q0=function(){return new Cl},B0=function(){return gl()},j0=os,gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,cu=pl,zg.COMPLETE="complete",z0=zg,Mg.EventType=ma,ma.OPEN="a",ma.CLOSE="b",ma.ERROR="c",ma.MESSAGE="d",fe.prototype.listen=fe.prototype.K,La=Mg,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,L0=kt}).apply(typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{});const o_="@firebase/firestore",l_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new km("@firebase/firestore");function tr(){return Ds.logLevel}function H(e,...t){if(Ds.logLevel<=st.DEBUG){const n=t.map(Lm);Ds.debug(`Firestore (${sa}): ${e}`,...n)}}function Wn(e,...t){if(Ds.logLevel<=st.ERROR){const n=t.map(Lm);Ds.error(`Firestore (${sa}): ${e}`,...n)}}function Hr(e,...t){if(Ds.logLevel<=st.WARN){const n=t.map(Lm);Ds.warn(`Firestore (${sa}): ${e}`,...n)}}function Lm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,H0(e,i,n)}function H0(e,t,n){let i=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Wn(i),new Error(i)}function ut(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||H0(t,s,i)}function W(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class lI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pe.UNAUTHENTICATED))}shutdown(){}}class uI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cI{constructor(t){this.t=t,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ut(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Yn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Yn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ut(typeof i.accessToken=="string",31837,{l:i}),new G0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ut(t===null||typeof t=="string",2055,{h:t}),new pe(t)}}class hI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new hI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ut(this.o===void 0,3512);const i=r=>{r.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new u_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=mI(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function rt(e,t){return e<t?-1:e>t?1:0}function pd(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return uf(s)===uf(r)?rt(s,r):uf(s)?1:-1}return rt(e.length,t.length)}const gI=55296,pI=57343;function uf(e){const t=e.charCodeAt(0);return t>=gI&&t<=pI}function Gr(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="__name__";class _n{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return _n.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof _n?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=_n.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return rt(t.length,n.length)}static compareSegments(t,n){const i=_n.isNumericId(t),s=_n.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?_n.extractNumericId(t).compare(_n.extractNumericId(n)):pd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return qi.fromString(t.substring(4,t.length-2))}}class _t extends _n{construct(t,n,i){return new _t(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new j(M.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const yI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends _n{construct(t,n,i){return new le(t,n,i)}static isValidIdentifier(t){return yI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c_}static keyField(){return new le([c_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new j(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new j(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new le(n)}static emptyPath(){return new le([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(_t.fromString(t))}static fromName(t){return new G(_t.fromString(t).popFirst(5))}static empty(){return new G(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _t.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new _t(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(e,t,n){if(!n)throw new j(M.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function _I(e,t,n,i){if(t===!0&&i===!0)throw new j(M.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function h_(e){if(!G.isDocumentKey(e))throw new j(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function f_(e){if(G.isDocumentKey(e))throw new j(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Q0(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function kc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function Fe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new j(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kc(e);throw new j(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Wo(e,t){if(!Q0(e))throw new j(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new j(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=-62135596800,m_=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(t){return bt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*m_);return new bt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<d_)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m_}_compareTo(t){return this.seconds===t.seconds?rt(this.nanoseconds,t.nanoseconds):rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Wo(t,bt._jsonSchema))return new bt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-d_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Gt("string",bt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static fromTimestamp(t){return new K(t)}static min(){return new K(new bt(0,0))}static max(){return new K(new bt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=-1;function vI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=K.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new Xi(s,G.empty(),t)}function EI(e){return new Xi(e.readTime,e.key,Ro)}class Xi{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Xi(K.min(),G.empty(),Ro)}static max(){return new Xi(K.max(),G.empty(),Ro)}}function TI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==AI)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function bI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function tl(e){return e==null}function Ju(e){return e===0&&1/e==-1/0}function wI(e){return typeof e=="number"&&Number.isInteger(e)&&!Ju(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="";function RI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=g_(t)),t=II(e.get(n),t);return g_(t)}function II(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case Y0:n+="";break;default:n+=r}}return n}function g_(e){return e+Y0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function K0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n){this.comparator=t,this.root=n||ae.EMPTY}insert(t,n){return new xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ae.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ae.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ql(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ql(this.root,t,this.comparator,!0)}}class Ql{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ae{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??ae.RED,this.left=s??ae.EMPTY,this.right=r??ae.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new ae(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ae.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return ae.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}ae.EMPTY=null,ae.RED=!0,ae.BLACK=!1;ae.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new ae(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new y_(this.data.getIterator())}getIteratorFrom(t){return new y_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $t(this.comparator);return n.data=t,n}}class y_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this.fields=t,t.sort(le.comparator)}static empty(){return new je([])}unionWith(t){let n=new $t(le.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new je(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Gr(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new $0("Invalid base64 string: "+r):r}}(t);return new he(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new he(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}he.EMPTY_BYTE_STRING=new he("");const CI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(e){if(ut(!!e,39018),typeof e=="string"){let t=0;const n=CI.exec(e);if(ut(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jt(e.seconds),nanos:jt(e.nanos)}}function jt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ji(e){return typeof e=="string"?he.fromBase64String(e):he.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="server_timestamp",Z0="__type__",J0="__previous_value__",W0="__local_write_time__";function Bm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[Z0])==null?void 0:i.stringValue)===X0}function Uc(e){const t=e.mapValue.fields[J0];return Bm(t)?Uc(t):t}function Io(e){const t=Zi(e.mapValue.fields[W0].timestampValue);return new bt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,n,i,s,r,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Wu="(default)";class Co{constructor(t,n){this.projectId=t,this.database=n||Wu}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===Wu}isEqual(t){return t instanceof Co&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="__type__",DI="__max__",Yl={mapValue:{}},eA="__vector__",tc="value";function Wi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bm(e)?4:VI(e)?9007199254740991:OI(e)?10:11:Y(28295,{value:e})}function Nn(e,t){if(e===t)return!0;const n=Wi(e);if(n!==Wi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Io(e).isEqual(Io(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Zi(s.timestampValue),l=Zi(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return Ji(s.bytesValue).isEqual(Ji(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return jt(s.geoPointValue.latitude)===jt(r.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return jt(s.integerValue)===jt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=jt(s.doubleValue),l=jt(r.doubleValue);return a===l?Ju(a)===Ju(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Gr(e.arrayValue.values||[],t.arrayValue.values||[],Nn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(p_(a)!==p_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Nn(a[u],l[u])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function No(e,t){return(e.values||[]).find(n=>Nn(n,t))!==void 0}function Fr(e,t){if(e===t)return 0;const n=Wi(e),i=Wi(t);if(n!==i)return rt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=jt(r.integerValue||r.doubleValue),u=jt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return __(e.timestampValue,t.timestampValue);case 4:return __(Io(e),Io(t));case 5:return pd(e.stringValue,t.stringValue);case 6:return function(r,a){const l=Ji(r),u=Ji(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=rt(l[h],u[h]);if(d!==0)return d}return rt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=rt(jt(r.latitude),jt(a.latitude));return l!==0?l:rt(jt(r.longitude),jt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return v_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var m,y,O,V;const l=r.fields||{},u=a.fields||{},h=(m=l[tc])==null?void 0:m.arrayValue,d=(y=u[tc])==null?void 0:y.arrayValue,g=rt(((O=h==null?void 0:h.values)==null?void 0:O.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:v_(h,d)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===Yl.mapValue&&a===Yl.mapValue)return 0;if(r===Yl.mapValue)return 1;if(a===Yl.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=pd(u[g],d[g]);if(m!==0)return m;const y=Fr(l[u[g]],h[d[g]]);if(y!==0)return y}return rt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function __(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return rt(e,t);const n=Zi(e),i=Zi(t),s=rt(n.seconds,i.seconds);return s!==0?s:rt(n.nanos,i.nanos)}function v_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Fr(n[s],i[s]);if(r)return r}return rt(n.length,i.length)}function Qr(e){return yd(e)}function yd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Zi(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ji(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=yd(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${yd(n.fields[a])}`;return s+"}"}(e.mapValue):Y(61005,{value:e})}function hu(e){switch(Wi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Uc(e);return t?16+hu(t):16;case 5:return 2*e.stringValue.length;case 6:return Ji(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+hu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return rs(i.fields,(r,a)=>{s+=r.length+hu(a)}),s}(e.mapValue);default:throw Y(13486,{value:e})}}function E_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _d(e){return!!e&&"integerValue"in e}function qm(e){return!!e&&"arrayValue"in e}function T_(e){return!!e&&"nullValue"in e}function A_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fu(e){return!!e&&"mapValue"in e}function OI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[tA])==null?void 0:i.stringValue)===eA}function so(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return rs(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=so(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=so(e.arrayValue.values[n]);return t}return{...e}}function VI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===DI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this.value=t}static empty(){return new we({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!fu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=so(n)}setAll(t){let n=le.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=so(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Nn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];fu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){rs(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new we(so(this.value))}}function nA(e){const t=[];return rs(e.fields,(n,i)=>{const s=new le([n]);if(fu(i)){const r=nA(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new je(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new te(t,0,K.min(),K.min(),K.min(),we.empty(),0)}static newFoundDocument(t,n,i,s){return new te(t,1,n,K.min(),i,s,0)}static newNoDocument(t,n){return new te(t,2,n,K.min(),K.min(),we.empty(),0)}static newUnknownDocument(t,n){return new te(t,3,n,K.min(),K.min(),we.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=we.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=we.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof te&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new te(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,n){this.position=t,this.inclusive=n}}function S_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=Fr(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function b_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n="asc"){this.field=t,this.dir=n}}function xI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{}class Ht extends iA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new kI(t,n,i):n==="array-contains"?new LI(t,i):n==="in"?new zI(t,i):n==="not-in"?new jI(t,i):n==="array-contains-any"?new BI(t,i):new Ht(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new PI(t,i):new UI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fr(n,this.value)):n!==null&&Wi(this.value)===Wi(n)&&this.matchesComparison(Fr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends iA{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new fn(t,n)}matches(t){return sA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sA(e){return e.op==="and"}function rA(e){return MI(e)&&sA(e)}function MI(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function vd(e){if(e instanceof Ht)return e.field.canonicalString()+e.op.toString()+Qr(e.value);if(rA(e))return e.filters.map(t=>vd(t)).join(",");{const t=e.filters.map(n=>vd(n)).join(",");return`${e.op}(${t})`}}function aA(e,t){return e instanceof Ht?function(i,s){return s instanceof Ht&&i.op===s.op&&i.field.isEqual(s.field)&&Nn(i.value,s.value)}(e,t):e instanceof fn?function(i,s){return s instanceof fn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&aA(a,s.filters[l]),!0):!1}(e,t):void Y(19439)}function oA(e){return e instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Qr(n.value)}`}(e):e instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(oA).join(" ,")+"}"}(e):"Filter"}class kI extends Ht{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class PI extends Ht{constructor(t,n){super(t,"in",n),this.keys=lA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class UI extends Ht{constructor(t,n){super(t,"not-in",n),this.keys=lA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function lA(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class LI extends Ht{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return qm(n)&&No(n.arrayValue,this.value)}}class zI extends Ht{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&No(this.value.arrayValue,n)}}class jI extends Ht{constructor(t,n){super(t,"not-in",n)}matches(t){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!No(this.value.arrayValue,n)}}class BI extends Ht{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>No(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function w_(e,t=null,n=[],i=[],s=null,r=null,a=null){return new qI(e,t,n,i,s,r,a)}function Hm(e){const t=W(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>vd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),tl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Qr(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Qr(i)).join(",")),t.Te=n}return t.Te}function Gm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!aA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!b_(e.startAt,t.startAt)&&b_(e.endAt,t.endAt)}function Ed(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HI(e,t,n,i,s,r,a,l){return new oa(e,t,n,i,s,r,a,l)}function Lc(e){return new oa(e)}function R_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function uA(e){return e.collectionGroup!==null}function ro(e){const t=W(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $t(le.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Do(r,i))}),n.has(le.keyField().canonicalString())||t.Ie.push(new Do(le.keyField(),i))}return t.Ie}function bn(e){const t=W(e);return t.Ee||(t.Ee=GI(t,ro(e))),t.Ee}function GI(e,t){if(e.limitType==="F")return w_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Do(s.field,r)});const n=e.endAt?new ec(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ec(e.startAt.position,e.startAt.inclusive):null;return w_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Td(e,t){const n=e.filters.concat([t]);return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ad(e,t,n){return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zc(e,t){return Gm(bn(e),bn(t))&&e.limitType===t.limitType}function cA(e){return`${Hm(bn(e))}|lt:${e.limitType}`}function er(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>oA(s)).join(", ")}]`),tl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Qr(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Qr(s)).join(",")),`Target(${i})`}(bn(e))}; limitType=${e.limitType})`}function jc(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):G.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of ro(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=S_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,ro(i),s)||i.endAt&&!function(a,l,u){const h=S_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,ro(i),s))}(e,t)}function FI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hA(e){return(t,n)=>{let i=!1;for(const s of ro(e)){const r=QI(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function QI(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?Fr(u,h):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){rs(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return K0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new xt(G.comparator);function ti(){return YI}const fA=new xt(G.comparator);function za(...e){let t=fA;for(const n of e)t=t.insert(n.key,n);return t}function dA(e){let t=fA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function ps(){return ao()}function mA(){return ao()}function ao(){return new Us(e=>e.toString(),(e,t)=>e.isEqual(t))}const KI=new xt(G.comparator),$I=new $t(G.comparator);function at(...e){let t=$I;for(const n of e)t=t.add(n);return t}const XI=new $t(rt);function ZI(){return XI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(t)?"-0":t}}function gA(e){return{integerValue:""+e}}function JI(e,t){return wI(t)?gA(t):Fm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function WI(e,t,n){return e instanceof Oo?function(s,r){const a={fields:{[Z0]:{stringValue:X0},[W0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Bm(r)&&(r=Uc(r)),r&&(a.fields[J0]=r),{mapValue:a}}(n,t):e instanceof Vo?yA(e,t):e instanceof xo?_A(e,t):function(s,r){const a=pA(s,r),l=I_(a)+I_(s.Ae);return _d(a)&&_d(s.Ae)?gA(l):Fm(s.serializer,l)}(e,t)}function tC(e,t,n){return e instanceof Vo?yA(e,t):e instanceof xo?_A(e,t):n}function pA(e,t){return e instanceof nc?function(i){return _d(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class Oo extends Bc{}class Vo extends Bc{constructor(t){super(),this.elements=t}}function yA(e,t){const n=vA(t);for(const i of e.elements)n.some(s=>Nn(s,i))||n.push(i);return{arrayValue:{values:n}}}class xo extends Bc{constructor(t){super(),this.elements=t}}function _A(e,t){let n=vA(t);for(const i of e.elements)n=n.filter(s=>!Nn(s,i));return{arrayValue:{values:n}}}class nc extends Bc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function I_(e){return jt(e.integerValue||e.doubleValue)}function vA(e){return qm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t,n){this.field=t,this.transform=n}}function nC(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Vo&&s instanceof Vo||i instanceof xo&&s instanceof xo?Gr(i.elements,s.elements,Nn):i instanceof nc&&s instanceof nc?Nn(i.Ae,s.Ae):i instanceof Oo&&s instanceof Oo}(e.transform,t.transform)}class iC{constructor(t,n){this.version=t,this.transformResults=n}}class ue{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ue}static exists(t){return new ue(void 0,t)}static updateTime(t){return new ue(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function du(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class qc{}function EA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Hc(e.key,ue.none()):new el(e.key,e.data,ue.none());{const n=e.data,i=we.empty();let s=new $t(le.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new as(e.key,i,new je(s.toArray()),ue.none())}}function sC(e,t,n){e instanceof el?function(s,r,a){const l=s.value.clone(),u=N_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof as?function(s,r,a){if(!du(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=N_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(TA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function oo(e,t,n,i){return e instanceof el?function(r,a,l,u){if(!du(r.precondition,a))return l;const h=r.value.clone(),d=D_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof as?function(r,a,l,u){if(!du(r.precondition,a))return l;const h=D_(r.fieldTransforms,u,a),d=a.data;return d.setAll(TA(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return du(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function rC(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=pA(i.transform,s||null);r!=null&&(n===null&&(n=we.empty()),n.set(i.field,r))}return n||null}function C_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Gr(i,s,(r,a)=>nC(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class el extends qc{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class as extends qc{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function TA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function N_(e,t,n){const i=new Map;ut(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,tC(a,l,n[s]))}return i}function D_(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,WI(r,a,t))}return i}class Hc extends qc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AA extends qc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&sC(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=oo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=oo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=mA();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=EA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(K.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),at())}isEqual(t){return this.batchId===t.batchId&&Gr(this.mutations,t.mutations,(n,i)=>C_(n,i))&&Gr(this.baseMutations,t.baseMutations,(n,i)=>C_(n,i))}}class Qm{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){ut(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return KI}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Qm(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,ot;function SA(e){switch(e){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function bA(e){if(e===void 0)return Wn("GRPC error has no .code"),M.UNKNOWN;switch(e){case Bt.OK:return M.OK;case Bt.CANCELLED:return M.CANCELLED;case Bt.UNKNOWN:return M.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return M.INTERNAL;case Bt.UNAVAILABLE:return M.UNAVAILABLE;case Bt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Bt.NOT_FOUND:return M.NOT_FOUND;case Bt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Bt.ABORTED:return M.ABORTED;case Bt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Bt.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:e})}}(ot=Bt||(Bt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new qi([4294967295,4294967295],0);function O_(e){const t=uC().encode(e),n=new U0;return n.update(t),new Uint8Array(n.digest())}function V_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new qi([n,i],0),new qi([s,r],0)]}class Ym{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ja(`Invalid padding: ${n}`);if(i<0)throw new ja(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ja(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new ja(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=qi.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(qi.fromNumber(i)));return s.compare(cC)===1&&(s=new qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=O_(t),[i,s]=V_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Ym(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=O_(t),[i,s]=V_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,nl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Gc(K.min(),s,new xt(rt),ti(),at())}}class nl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new nl(i,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class wA{constructor(t,n){this.targetId=t,this.Ce=n}}class RA{constructor(t,n,i=he.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class x_{constructor(){this.ve=0,this.Fe=M_(),this.Me=he.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=at(),n=at(),i=at();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Y(38017,{changeType:r})}}),new nl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=M_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hC{constructor(t){this.Ge=t,this.ze=new Map,this.je=ti(),this.Je=Kl(),this.He=Kl(),this.Ye=new xt(rt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Ed(r))if(i===0){const a=new G(r.path);this.et(n,a,te.newNoDocument(a,K.min()))}else ut(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=Ji(i).toUint8Array()}catch(u){if(u instanceof $0)return Hr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ym(a,s,r)}catch(u){return Hr(u instanceof ja?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Ed(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,te.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=at();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new Gc(t,n,this.Ye,this.je,i);return this.je=ti(),this.Je=Kl(),this.He=Kl(),this.Ye=new xt(rt),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new x_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new $t(rt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new $t(rt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new x_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Kl(){return new xt(G.comparator)}function M_(){return new xt(G.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},dC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mC={and:"AND",or:"OR"};class gC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sd(e,t){return e.useProto3Json||tl(t)?t:{value:t}}function ic(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function IA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pC(e,t){return ic(e,t.toTimestamp())}function Qe(e){return ut(!!e,49232),K.fromTimestamp(function(n){const i=Zi(n);return new bt(i.seconds,i.nanos)}(e))}function Km(e,t){return bd(e,t).canonicalString()}function bd(e,t){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function CA(e){const t=_t.fromString(e);return ut(MA(t),10190,{key:t.toString()}),t}function sc(e,t){return Km(e.databaseId,t.path)}function lo(e,t){const n=CA(t);if(n.get(1)!==e.databaseId.projectId)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(DA(n))}function NA(e,t){return Km(e.databaseId,t)}function yC(e){const t=CA(e);return t.length===4?_t.emptyPath():DA(t)}function wd(e){return new _t(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function DA(e){return ut(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function k_(e,t,n){return{name:sc(e,t),fields:n.value.mapValue.fields}}function _C(e,t){return"found"in t?function(i,s){ut(!!s.found,43571),s.found.name,s.found.updateTime;const r=lo(i,s.found.name),a=Qe(s.found.updateTime),l=s.found.createTime?Qe(s.found.createTime):K.min(),u=new we({mapValue:{fields:s.found.fields}});return te.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){ut(!!s.missing,3894),ut(!!s.readTime,22933);const r=lo(i,s.missing),a=Qe(s.readTime);return te.newNoDocument(r,a)}(e,t):Y(7234,{result:t})}function vC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(ut(d===void 0||typeof d=="string",58123),he.fromBase64String(d||"")):(ut(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),he.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?M.UNKNOWN:bA(h.code);return new j(d,h.message||"")}(a);n=new RA(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=lo(e,i.document.name),r=Qe(i.document.updateTime),a=i.document.createTime?Qe(i.document.createTime):K.min(),l=new we({mapValue:{fields:i.document.fields}}),u=te.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new mu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=lo(e,i.document),r=i.readTime?Qe(i.readTime):K.min(),a=te.newNoDocument(s,r),l=i.removedTargetIds||[];n=new mu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=lo(e,i.document),r=i.removedTargetIds||[];n=new mu([],r,s,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new lC(s,r),l=i.targetId;n=new wA(l,a)}}return n}function OA(e,t){let n;if(t instanceof el)n={update:k_(e,t.key,t.value)};else if(t instanceof Hc)n={delete:sc(e,t.key)};else if(t instanceof as)n={update:k_(e,t.key,t.data),updateMask:CC(t.fieldMask)};else{if(!(t instanceof AA))return Y(16599,{Vt:t.type});n={verify:sc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof Oo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:pC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)}(e,t.precondition)),n}function EC(e,t){return e&&e.length>0?(ut(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?Qe(s.updateTime):Qe(r);return a.isEqual(K.min())&&(a=Qe(r)),new iC(a,s.transformResults||[])}(n,t))):[]}function TC(e,t){return{documents:[NA(e,t.path)]}}function AC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=NA(e,s);const r=function(h){if(h.length!==0)return xA(fn.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:nr(m.field),direction:wC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Sd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function SC(e){let t=yC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ut(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(g){const m=VA(g);return m instanceof fn&&rA(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(O){return new Do(ir(O.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,tl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,y=g.values||[];return new ec(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,y=g.values||[];return new ec(y,m)}(n.endAt)),HI(t,s,a,r,l,"F",u,h)}function bC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function VA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ir(n.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ir(n.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ir(n.unaryFilter.field);return Ht.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ir(n.unaryFilter.field);return Ht.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ht.create(ir(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(i=>VA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function wC(e){return fC[e]}function RC(e){return dC[e]}function IC(e){return mC[e]}function nr(e){return{fieldPath:e.canonicalString()}}function ir(e){return le.fromServerFormat(e.fieldPath)}function xA(e){return e instanceof Ht?function(n){if(n.op==="=="){if(A_(n.value))return{unaryFilter:{field:nr(n.field),op:"IS_NAN"}};if(T_(n.value))return{unaryFilter:{field:nr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A_(n.value))return{unaryFilter:{field:nr(n.field),op:"IS_NOT_NAN"}};if(T_(n.value))return{unaryFilter:{field:nr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nr(n.field),op:RC(n.op),value:n.value}}}(e):e instanceof fn?function(n){const i=n.getFilters().map(s=>xA(s));return i.length===1?i[0]:{compositeFilter:{op:IC(n.op),filters:i}}}(e):Y(54877,{filter:e})}function CC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function MA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n,i,s,r=K.min(),a=K.min(),l=he.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Di(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t){this.yt=t}}function DC(e){const t=SC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ad(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.Cn=new VC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(Xi.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(Xi.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class VC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new $t(_t.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new $t(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kA=41943040;class Oe{static withCacheSize(t){return new Oe(t,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oe.DEFAULT_COLLECTION_PERCENTILE=10,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oe.DEFAULT=new Oe(kA,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oe.DISABLED=new Oe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Yr(0)}static cr(){return new Yr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="LruGarbageCollector",xC=1048576;function L_([e,t],[n,i]){const s=rt(e,n);return s===0?rt(t,i):s}class MC{constructor(t){this.Ir=t,this.buffer=new $t(L_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();L_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(U_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?H(U_,"Ignoring IndexedDB error during garbage collection: ",n):await ra(n)}await this.Vr(3e5)})}}class PC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Pc.ce);const i=new MC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(P_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),tr()<=st.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function UC(e,t){return new PC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.changes=new Us(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,te.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&oo(i.mutation,s,je.empty(),bt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,at()).next(()=>i))}getLocalViewOfDocuments(t,n,i=at()){const s=ps();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=za();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=ps();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,at()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=ti();const a=ao(),l=function(){return ao()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof as)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),oo(d.mutation,h,d.mutation.getFieldMask(),bt.now())):a.set(h.key,je.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new zC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=ao();let s=new xt((a,l)=>a-l),r=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||je.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(s.get(l.batchId)||at()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=mA();d.forEach(m=>{if(!r.has(m)){const y=EA(n.get(m),i.get(m));y!==null&&g.set(m,y),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):uA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(ps());let l=Ro,u=r;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,at())).next(d=>({batchId:l,changes:dA(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let s=za();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=za();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,m){return new oa(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,te.newInvalidDocument(d)))});let l=za();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&oo(d.mutation,h,je.empty(),bt.now()),jc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Qe(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:DC(s.bundledQuery),readTime:Qe(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.overlays=new xt(G.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=ps();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=ps(),r=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new xt((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=ps(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=ps(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new oC(n,i));let r=this.qr.get(n);r===void 0&&(r=at(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.sessionToken=he.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Qr=new $t(Zt.$r),this.Ur=new $t(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Zt(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new Zt(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new _t([])),i=new Zt(n,t),s=new Zt(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new _t([])),i=new Zt(n,t),s=new Zt(n,t+1);let r=at();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new Zt(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Zt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||rt(t.Yr,n.Yr)}static Kr(t,n){return rt(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new $t(Zt.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new aC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Zt(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?jm:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Zt(n,0),s=new Zt(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new $t(rt);return n.forEach(s=>{const r=new Zt(s,0),a=new Zt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;G.isDocumentKey(r)||(r=r.child(""));const a=new Zt(new G(r),0);let l=new $t(rt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ut(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new Zt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new Zt(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t){this.ri=t,this.docs=function(){return new xt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():te.newInvalidDocument(n))}getEntries(t,n){let i=ti();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():te.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=ti();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||TI(EI(d),i)<=0||(s.has(d.key)||jc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Y(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new QC(this)}getSize(t){return P.resolve(this.size)}}class QC extends LC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t){this.persistence=t,this.si=new Us(n=>Hm(n),Gm),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new $m,this.targetCount=0,this.ai=Yr.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Yr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Pc(0),this.li=!1,this.li=!0,this.hi=new HC,this.referenceDelegate=t(this),this.Pi=new YC(this),this.indexManager=new OC,this.remoteDocumentCache=function(s){return new FC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new NC(n),this.Ii=new BC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new qC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new GC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){H("MemoryPersistence","Starting transaction:",t);const s=new KC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class KC extends SI{constructor(t){super(),this.currentSequenceNumber=t}}class Xm{constructor(t){this.persistence=t,this.Ri=new $m,this.Vi=null}static mi(t){return new Xm(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=G.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,K.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class rc{constructor(t,n){this.persistence=t,this.pi=new Us(i=>RI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=UC(this,n)}static mi(t,n){return new rc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,K.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=hu(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=at(),s=at();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Zm(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qR()?8:bI(ve())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new $C;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(tr()<=st.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",er(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(tr()<=st.DEBUG&&H("QueryEngine","Query:",er(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(tr()<=st.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",er(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,bn(n))):P.resolve())}ys(t,n){if(R_(n))return P.resolve(null);let i=bn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ad(n,null,"F"),i=bn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=at(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Ad(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return R_(n)||s.isEqual(K.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(tr()<=st.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),er(n)),this.vs(t,a,n,vI(s,Ro)).next(l=>l))})}Ds(t,n){let i=new $t(hA(t));return n.forEach((s,r)=>{jc(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return tr()<=st.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",er(n)),this.ps.getDocumentsMatchingQuery(t,n,Xi.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",ZC=3e8;class JC{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new xt(rt),this.xs=new Us(r=>Hm(r),Gm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function WC(e,t,n,i){return new JC(e,t,n,i)}async function UA(e,t){const n=W(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=at();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function tN(e,t){const n=W(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let y=P.resolve();return m.forEach(O=>{y=y.next(()=>d.getEntry(u,O)).next(V=>{const k=h.docVersions.get(O);ut(k!==null,48541),V.version.compareTo(k)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=at();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function LA(e){const t=W(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function eN(e,t){const n=W(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=s.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,d.addedDocuments,g)));let y=m.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?y=y.withResumeToken(he.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),s=s.insert(g,y),function(V,k,w){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=ZC?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,y,d)&&l.push(n.Pi.updateTargetData(r,y))});let u=ti(),h=at();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(nN(r,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual(K.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function nN(e,t,n){let i=at(),s=at();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=ti();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Jm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function iN(e,t){const n=W(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=jm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function sN(e,t){const n=W(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new Di(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Rd(e,t,n){const i=W(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!aa(a))throw a;H(Jm,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function z_(e,t,n){const i=W(e);let s=K.min(),r=at();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=W(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,bn(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:K.min(),n?r:at())).next(l=>(rN(i,FI(t),l),{documents:l,Qs:r})))}function rN(e,t,n){let i=e.Os.get(t)||K.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class j_{constructor(){this.activeTargetIds=ZI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class aN{constructor(){this.Mo=new j_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new j_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="ConnectivityMonitor";class q_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(B_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(B_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function Id(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="RestConnection",lN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Wu?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=Id(),l=this.zo(t,n.toUriEncodedString());H(cf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),d=na(h);return this.Jo(t,l,u,i,d).then(g=>(H(cf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Hr(cf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=lN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge="WebChannelConnection";class hN extends uN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=Id();return new Promise((l,u)=>{const h=new L0;h.setWithCredentials(!0),h.listenOnce(z0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case cu.NO_ERROR:const g=h.getResponseJson();H(ge,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case cu.TIMEOUT:H(ge,`RPC '${t}' ${a} timed out`),u(new j(M.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:const m=h.getStatus();if(H(ge,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const O=y==null?void 0:y.error;if(O&&O.status&&O.message){const V=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(O.status);u(new j(V,O.message))}else u(new j(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new j(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(ge,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);H(ge,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,i,15)})}T_(t,n,i){const s=Id(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=q0(),l=B0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");H(ge,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,y=!1;const O=new cN({Yo:k=>{y?H(ge,`Not sending because RPC '${t}' stream ${s} is closed:`,k):(m||(H(ge,`Opening RPC '${t}' stream ${s} transport.`),g.open(),m=!0),H(ge,`RPC '${t}' stream ${s} sending:`,k),g.send(k))},Zo:()=>g.close()}),V=(k,w,v)=>{k.listen(w,R=>{try{v(R)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,La.EventType.OPEN,()=>{y||(H(ge,`RPC '${t}' stream ${s} transport opened.`),O.o_())}),V(g,La.EventType.CLOSE,()=>{y||(y=!0,H(ge,`RPC '${t}' stream ${s} transport closed`),O.a_(),this.E_(g))}),V(g,La.EventType.ERROR,k=>{y||(y=!0,Hr(ge,`RPC '${t}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),O.a_(new j(M.UNAVAILABLE,"The operation could not be completed")))}),V(g,La.EventType.MESSAGE,k=>{var w;if(!y){const v=k.data[0];ut(!!v,16349);const R=v,D=(R==null?void 0:R.error)||((w=R[0])==null?void 0:w.error);if(D){H(ge,`RPC '${t}' stream ${s} received error:`,D);const L=D.status;let B=function(A){const E=Bt[A];if(E!==void 0)return bA(E)}(L),T=D.message;B===void 0&&(B=M.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),y=!0,O.a_(new j(B,T)),g.close()}else H(ge,`RPC '${t}' stream ${s} received:`,v),O.u_(v)}}),V(l,j0.STAT_EVENT,k=>{k.stat===gd.PROXY?H(ge,`RPC '${t}' stream ${s} detected buffering proxy`):k.stat===gd.NOPROXY&&H(ge,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{O.__()},0),O}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(e){return new gC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="PersistentStream";class zA{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wm(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new j(M.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return H(H_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(H(H_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fN extends zA{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=vC(this.serializer,t),i=function(r){if(!("targetChange"in r))return K.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?K.min():a.readTime?Qe(a.readTime):K.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=wd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Ed(u)?{documents:TC(r,u)}:{query:AC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=IA(r,a.resumeToken);const h=Sd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(K.min())>0){l.readTime=ic(r,a.snapshotVersion.toTimestamp());const h=Sd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=bC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=wd(this.serializer),n.removeTarget=t,this.q_(n)}}class dN extends zA{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ut(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ut(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ut(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=EC(t.writeResults,t.commitTime),i=Qe(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=wd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>OA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{}class gN extends mN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,bd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new j(M.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,bd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new j(M.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class yN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ls(this)&&(H(Os,"Restarting streams for network reachability change."),await async function(u){const h=W(u);h.Ea.add(4),await il(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Qc(h)}(this))})}),this.Ra=new pN(i,s)}}async function Qc(e){if(Ls(e))for(const t of e.da)await t(!0)}async function il(e){for(const t of e.da)await t(!1)}function jA(e,t){const n=W(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ig(n)?ng(n):la(n).O_()&&eg(n,t))}function tg(e,t){const n=W(e),i=la(n);n.Ia.delete(t),i.O_()&&BA(n,t),n.Ia.size===0&&(i.O_()?i.L_():Ls(n)&&n.Ra.set("Unknown"))}function eg(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(K.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}la(e).Y_(t)}function BA(e,t){e.Va.Ue(t),la(e).Z_(t)}function ng(e){e.Va=new hC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),la(e).start(),e.Ra.ua()}function ig(e){return Ls(e)&&!la(e).x_()&&e.Ia.size>0}function Ls(e){return W(e).Ea.size===0}function qA(e){e.Va=void 0}async function _N(e){e.Ra.set("Online")}async function vN(e){e.Ia.forEach((t,n)=>{eg(e,t)})}async function EN(e,t){qA(e),ig(e)?(e.Ra.ha(t),ng(e)):e.Ra.set("Unknown")}async function TN(e,t,n){if(e.Ra.set("Online"),t instanceof RA&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){H(Os,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ac(e,i)}else if(t instanceof mu?e.Va.Ze(t):t instanceof wA?e.Va.st(t):e.Va.tt(t),!n.isEqual(K.min()))try{const i=await LA(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(h);d&&r.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(he.EMPTY_BYTE_STRING,d.snapshotVersion)),BA(r,u);const g=new Di(d.target,u,h,d.sequenceNumber);eg(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){H(Os,"Failed to raise snapshot:",i),await ac(e,i)}}async function ac(e,t,n){if(!aa(t))throw t;e.Ea.add(1),await il(e),e.Ra.set("Offline"),n||(n=()=>LA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(Os,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Qc(e)})}function HA(e,t){return t().catch(n=>ac(e,n,t))}async function Yc(e){const t=W(e),n=ts(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:jm;for(;AN(t);)try{const s=await iN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,SN(t,s)}catch(s){await ac(t,s)}GA(t)&&FA(t)}function AN(e){return Ls(e)&&e.Ta.length<10}function SN(e,t){e.Ta.push(t);const n=ts(e);n.O_()&&n.X_&&n.ea(t.mutations)}function GA(e){return Ls(e)&&!ts(e).x_()&&e.Ta.length>0}function FA(e){ts(e).start()}async function bN(e){ts(e).ra()}async function wN(e){const t=ts(e);for(const n of e.Ta)t.ea(n.mutations)}async function RN(e,t,n){const i=e.Ta.shift(),s=Qm.from(i,t,n);await HA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Yc(e)}async function IN(e,t){t&&ts(e).X_&&await async function(i,s){if(function(a){return SA(a)&&a!==M.ABORTED}(s.code)){const r=i.Ta.shift();ts(i).B_(),await HA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Yc(i)}}(e,t),GA(e)&&FA(e)}async function G_(e,t){const n=W(e);n.asyncQueue.verifyOperationInProgress(),H(Os,"RemoteStore received new credentials");const i=Ls(n);n.Ea.add(3),await il(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Qc(n)}async function CN(e,t){const n=W(e);t?(n.Ea.delete(2),await Qc(n)):t||(n.Ea.add(2),await il(n),n.Ra.set("Unknown"))}function la(e){return e.ma||(e.ma=function(n,i,s){const r=W(n);return r.sa(),new fN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:_N.bind(null,e),t_:vN.bind(null,e),r_:EN.bind(null,e),H_:TN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ig(e)?ng(e):e.Ra.set("Unknown")):(await e.ma.stop(),qA(e))})),e.ma}function ts(e){return e.fa||(e.fa=function(n,i,s){const r=W(n);return r.sa(),new dN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:bN.bind(null,e),r_:IN.bind(null,e),ta:wN.bind(null,e),na:RN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Yc(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Os,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new sg(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(e,t){if(Wn("AsyncQueue",`${t}: ${e}`),aa(e))return new j(M.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{static emptySet(t){return new Rr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=za(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Rr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Rr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.ga=new xt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class Kr{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Kr(t,n,Rr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class DN{constructor(){this.queries=Q_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=W(n),r=s.queries;s.queries=Q_(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new j(M.ABORTED,"Firestore shutting down"))}}function Q_(){return new Us(e=>cA(e),zc)}async function QA(e,t){const n=W(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new NN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=rg(a,`Initialization of query '${er(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&ag(n)}async function YA(e,t){const n=W(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ON(e,t){const n=W(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&ag(n)}function VN(e,t,n){const i=W(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function ag(e){e.Ca.forEach(t=>{t.next()})}var Cd,Y_;(Y_=Cd||(Cd={})).Ma="default",Y_.Cache="cache";class KA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Kr(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Kr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Cd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t){this.key=t}}class XA{constructor(t){this.key=t}}class xN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=hA(t),this.tu=new Rr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new F_,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,g)=>{const m=s.get(d),y=jc(this.query,g)?g:null,O=!!m&&this.mutatedKeys.has(m.key),V=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;m&&y?m.data.isEqual(y.data)?O!==V&&(i.track({type:3,doc:y}),k=!0):this.su(m,y)||(i.track({type:2,doc:y}),k=!0,(u&&this.eu(y,u)>0||h&&this.eu(y,h)<0)&&(l=!0)):!m&&y?(i.track({type:0,doc:y}),k=!0):m&&!y&&(i.track({type:1,doc:m}),k=!0,(u||h)&&(l=!0)),k&&(y?(a=a.add(y),r=V?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(y,O){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:k})}};return V(y)-V(O)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Kr(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=at(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new XA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new $A(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=at();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Kr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class MN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class kN{constructor(t){this.key=t,this.hu=!1}}class PN{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Us(l=>cA(l),zc),this.Iu=new Map,this.Eu=new Set,this.du=new xt(G.comparator),this.Au=new Map,this.Ru=new $m,this.Vu={},this.mu=new Map,this.fu=Yr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UN(e,t,n=!0){const i=nS(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await ZA(i,t,n,!0),s}async function LN(e,t){const n=nS(e);await ZA(n,t,!0,!1)}async function ZA(e,t,n,i){const s=await sN(e.localStore,bn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await zN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&jA(e.remoteStore,s),l}async function zN(e,t,n,i,s){e.pu=(g,m,y)=>async function(V,k,w,v){let R=k.view.ru(w);R.Cs&&(R=await z_(V.localStore,k.query,!1).then(({documents:T})=>k.view.ru(T,R)));const D=v&&v.targetChanges.get(k.targetId),L=v&&v.targetMismatches.get(k.targetId)!=null,B=k.view.applyChanges(R,V.isPrimaryClient,D,L);return $_(V,k.targetId,B.au),B.snapshot}(e,g,m,y);const r=await z_(e.localStore,t,!0),a=new xN(t,r.Qs),l=a.ru(r.documents),u=nl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);$_(e,n,h.au);const d=new MN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function jN(e,t,n){const i=W(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!zc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Rd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&tg(i.remoteStore,s.targetId),Nd(i,s.targetId)}).catch(ra)):(Nd(i,s.targetId),await Rd(i.localStore,s.targetId,!0))}async function BN(e,t){const n=W(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),tg(n.remoteStore,i.targetId))}async function qN(e,t,n){const i=$N(e);try{const s=await function(a,l){const u=W(a),h=bt.now(),d=l.reduce((y,O)=>y.add(O.key),at());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let O=ti(),V=at();return u.Ns.getEntries(y,d).next(k=>{O=k,O.forEach((w,v)=>{v.isValidDocument()||(V=V.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,O)).next(k=>{g=k;const w=[];for(const v of l){const R=rC(v,g.get(v.key).overlayedDocument);R!=null&&w.push(new as(v.key,R,nA(R.value.mapValue),ue.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,w,l)}).next(k=>{m=k;const w=k.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(y,k.batchId,w)})}).then(()=>({batchId:m.batchId,changes:dA(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new xt(rt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await sl(i,s.changes),await Yc(i.remoteStore)}catch(s){const r=rg(s,"Failed to persist write");n.reject(r)}}async function JA(e,t){const n=W(e);try{const i=await eN(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ut(a.hu,14607):s.removedDocuments.size>0&&(ut(a.hu,42227),a.hu=!1))}),await sl(n,i,t)}catch(i){await ra(i)}}function K_(e,t,n){const i=W(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=W(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&ag(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function HN(e,t,n){const i=W(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new xt(G.comparator);a=a.insert(r,te.newNoDocument(r,K.min()));const l=at().add(r),u=new Gc(K.min(),new Map,new xt(rt),a,l);await JA(i,u),i.du=i.du.remove(r),i.Au.delete(t),lg(i)}else await Rd(i.localStore,t,!1).then(()=>Nd(i,t,n)).catch(ra)}async function GN(e,t){const n=W(e),i=t.batch.batchId;try{const s=await tN(n.localStore,t);tS(n,i,null),WA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await sl(n,s)}catch(s){await ra(s)}}async function FN(e,t,n){const i=W(e);try{const s=await function(a,l){const u=W(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ut(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);tS(i,t,n),WA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await sl(i,s)}catch(s){await ra(s)}}function WA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function tS(e,t,n){const i=W(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Nd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||eS(e,i)})}function eS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(tg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),lg(e))}function $_(e,t,n){for(const i of n)i instanceof $A?(e.Ru.addReference(i.key,t),QN(e,i)):i instanceof XA?(H(og,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||eS(e,i.key)):Y(19791,{wu:i})}function QN(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(H(og,"New document in limbo: "+n),e.Eu.add(i),lg(e))}function lg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(_t.fromString(t)),i=e.fu.next();e.Au.set(i,new kN(n)),e.du=e.du.insert(n,i),jA(e.remoteStore,new Di(bn(Lc(n.path)),i,"TargetPurposeLimboResolution",Pc.ce))}}async function sl(e,t,n){const i=W(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Zm.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const d=W(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>P.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!aa(g))throw g;H(Jm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const y=d.Ms.get(m),O=y.snapshotVersion,V=y.withLastLimboFreeSnapshotVersion(O);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,r))}async function YN(e,t){const n=W(e);if(!n.currentUser.isEqual(t)){H(og,"User change. New user:",t.toKey());const i=await UA(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new j(M.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await sl(n,i.Ls)}}function KN(e,t){const n=W(e),i=n.Au.get(t);if(i&&i.hu)return at().add(i.key);{let s=at();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function nS(e){const t=W(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=KN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=HN.bind(null,t),t.Pu.H_=ON.bind(null,t.eventManager),t.Pu.yu=VN.bind(null,t.eventManager),t}function $N(e){const t=W(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=GN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=FN.bind(null,t),t}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Fc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return WC(this.persistence,new XC,t.initialUser,this.serializer)}Cu(t){return new PA(Xm.mi,this.serializer)}Du(t){return new aN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class XN extends oc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ut(this.persistence.referenceDelegate instanceof rc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new kC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Oe.withCacheSize(this.cacheSizeBytes):Oe.DEFAULT;return new PA(i=>rc.mi(i,n),this.serializer)}}class Dd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YN.bind(null,this.syncEngine),await CN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new DN}()}createDatastore(t){const n=Fc(t.databaseInfo.databaseId),i=function(r){return new hN(r)}(t.databaseInfo);return function(r,a,l,u){return new gN(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new yN(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>K_(this.syncEngine,n,0),function(){return q_.v()?new q_:new oN}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,d){const g=new PN(s,r,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=W(s);H(Os,"RemoteStore shutting down."),r.Ea.add(5),await il(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Dd.provider={build:()=>new Dd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Wn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=W(s),l={documents:r.map(g=>sc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,_t.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const m=_C(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return r.forEach(g=>{const m=h.get(g.toString());ut(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Hc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=G.fromPath(i);this.mutations.push(new AA(s,this.precondition(s)))}),await async function(i,s){const r=W(i),a={writes:s.map(l=>OA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,_t.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y(50498,{Gu:t.constructor.name});n=K.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new j(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(K.min())?ue.exists(!1):ue.updateTime(n):ue.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(K.min()))throw new j(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ue.updateTime(n)}return ue.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Wm(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new ZN(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!tl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!SA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class WN{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=pe.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{H(es,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(es,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=rg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function ff(e,t){e.asyncQueue.verifyOperationInProgress(),H(es,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await UA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function X_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await tD(e);H(es,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>G_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>G_(t.remoteStore,s)),e._onlineComponents=t}async function tD(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(es,"Using user provided OfflineComponentProvider");try{await ff(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Hr("Error using user provided cache. Falling back to memory cache: "+n),await ff(e,new oc)}}else H(es,"Using default OfflineComponentProvider"),await ff(e,new XN(void 0));return e._offlineComponents}async function ug(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(es,"Using user provided OnlineComponentProvider"),await X_(e,e._uninitializedComponentsProvider._online)):(H(es,"Using default OnlineComponentProvider"),await X_(e,new Dd))),e._onlineComponents}function eD(e){return ug(e).then(t=>t.syncEngine)}function nD(e){return ug(e).then(t=>t.datastore)}async function Od(e){const t=await ug(e),n=t.eventManager;return n.onListen=UN.bind(null,t.syncEngine),n.onUnlisten=jN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=LN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=BN.bind(null,t.syncEngine),n}function iD(e,t,n={}){const i=new Yn;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new iS({next:m=>{d.Nu(),a.enqueueAndForget(()=>YA(r,g));const y=m.docs.has(l);!y&&m.fromCache?h.reject(new j(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?h.reject(new j(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new KA(Lc(l.path),d,{includeMetadataChanges:!0,qa:!0});return QA(r,g)}(await Od(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firestore.googleapis.com",J_=!0;class W_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new j(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rS,this.ssl=J_}else this.host=t.host,this.ssl=t.ssl??J_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=kA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xC)throw new j(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_I("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sS(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Kc{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new j(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new lI;switch(i.type){case"firstParty":return new fI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new j(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Z_.get(n);i&&(H("ComponentProvider","Removing Datastore"),Z_.delete(n),i.terminate())}(this),Promise.resolve()}}function sD(e,t,n,i={}){var h;e=Fe(e,Kc);const s=na(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(N0(`https://${l}`),D0("Firestore",!0)),r.host!==rS&&r.host!==l&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Cs(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=pe.MOCK_USER;else{d=xR(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new j(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new pe(m)}e._authCredentials=new uI(new G0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new zs(this.firestore,t,this._query)}}class Vt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Vt(this.firestore,t,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Wo(n,Vt._jsonSchema))return new Vt(t,i||null,new G(_t.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Gt("string",Vt._jsonSchemaVersion),referencePath:Gt("string")};class Hi extends zs{constructor(t,n,i){super(t,n,Lc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vt(this.firestore,null,new G(t))}withConverter(t){return new Hi(this.firestore,t,this._path)}}function tv(e,t,...n){if(e=ie(e),F0("collection","path",t),e instanceof Kc){const i=_t.fromString(t,...n);return f_(i),new Hi(e,null,i)}{if(!(e instanceof Vt||e instanceof Hi))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_t.fromString(t,...n));return f_(i),new Hi(e.firestore,null,i)}}function Ti(e,t,...n){if(e=ie(e),arguments.length===1&&(t=zm.newId()),F0("doc","path",t),e instanceof Kc){const i=_t.fromString(t,...n);return h_(i),new Vt(e,null,new G(i))}{if(!(e instanceof Vt||e instanceof Hi))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_t.fromString(t,...n));return h_(i),new Vt(e.firestore,e instanceof Hi?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="AsyncQueue";class nv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wm(this,"async_queue_retry"),this._c=()=>{const i=hf();i&&H(ev,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=hf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=hf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Yn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!aa(t))throw t;H(ev,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Wn("INTERNAL UNHANDLED ERROR: ",iv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=sg.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:iv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function iv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class ei extends Kc{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new nv(t),this._firestoreClient=void 0,await t}}}function rD(e,t){const n=typeof e=="object"?e:M0(),i=typeof e=="string"?e:Wu,s=Um(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=OR("firestore");r&&sD(s,...r)}return s}function $c(e){if(e._terminated)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||aD(e),e._firestoreClient}function aD(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,d){return new NI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,sS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new WN(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ze(he.fromBase64String(t))}catch(n){throw new j(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ze(he.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Wo(t,ze._jsonSchema))return ze.fromBase64String(t.bytes)}}ze._jsonSchemaVersion="firestore/bytes/1.0",ze._jsonSchema={type:Gt("string",ze._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new j(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new j(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new j(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return rt(this._lat,t._lat)||rt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(t){if(Wo(t,wn._jsonSchema))return new wn(t.latitude,t.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Gt("string",wn._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Wo(t,Rn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Rn(t.vectorValues);throw new j(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:Gt("string",Rn._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=/^__.*__$/;class lD{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new as(t,this.data,this.fieldMask,n,this.fieldTransforms):new el(t,this.data,n,this.fieldTransforms)}}class aS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new as(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function oS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class cg{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new cg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return lc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(oS(this.Ac)&&oD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class uD{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Fc(t)}Cc(t,n,i,s=!1){return new cg({Ac:t,methodName:n,Dc:i,path:le.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function al(e){const t=e._freezeSettings(),n=Fc(e._databaseId);return new uD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hg(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);dg("Data must be an object, but it was:",a,i);const l=cS(i,a);let u,h;if(r.merge)u=new je(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const m=Vd(t,g,n);if(!a.contains(m))throw new j(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);fS(d,m)||d.push(m)}u=new je(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new lD(new we(l),u,h)}class Zc extends Xc{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Zc}}class fg extends Xc{_toFieldTransform(t){return new eC(t.path,new Oo)}isEqual(t){return t instanceof fg}}function lS(e,t,n,i){const s=e.Cc(1,t,n);dg("Data must be an object, but it was:",s,i);const r=[],a=we.empty();rs(i,(u,h)=>{const d=mg(t,u,n);h=ie(h);const g=s.yc(d);if(h instanceof Zc)r.push(d);else{const m=ol(h,g);m!=null&&(r.push(d),a.set(d,m))}});const l=new je(r);return new aS(a,l,s.fieldTransforms)}function uS(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[Vd(t,i,n)],u=[s];if(r.length%2!=0)throw new j(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(Vd(t,r[m])),u.push(r[m+1]);const h=[],d=we.empty();for(let m=l.length-1;m>=0;--m)if(!fS(h,l[m])){const y=l[m];let O=u[m];O=ie(O);const V=a.yc(y);if(O instanceof Zc)h.push(y);else{const k=ol(O,V);k!=null&&(h.push(y),d.set(y,k))}}const g=new je(h);return new aS(d,g,a.fieldTransforms)}function cD(e,t,n,i=!1){return ol(n,e.Cc(i?4:3,t))}function ol(e,t){if(hS(e=ie(e)))return dg("Unsupported field value:",t,e),cS(e,t);if(e instanceof Xc)return function(i,s){if(!oS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=ol(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ie(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JI(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=bt.fromDate(i);return{timestampValue:ic(s.serializer,r)}}if(i instanceof bt){const r=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ic(s.serializer,r)}}if(i instanceof wn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ze)return{bytesValue:IA(s.serializer,i._byteString)};if(i instanceof Vt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Km(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Rn)return function(a,l){return{mapValue:{fields:{[tA]:{stringValue:eA},[tc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Fm(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${kc(i)}`)}(e,t)}function cS(e,t){const n={};return K0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rs(e,(i,s)=>{const r=ol(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function hS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof bt||e instanceof wn||e instanceof ze||e instanceof Vt||e instanceof Xc||e instanceof Rn)}function dg(e,t,n){if(!hS(n)||!Q0(n)){const i=kc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Vd(e,t,n){if((t=ie(t))instanceof rl)return t._internalPath;if(typeof t=="string")return mg(e,t);throw lc("Field path arguments must be of type string or ",e,!1,void 0,n)}const hD=new RegExp("[~\\*/\\[\\]]");function mg(e,t,n){if(t.search(hD)>=0)throw lc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rl(...t.split("."))._internalPath}catch{throw lc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function lc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new j(M.INVALID_ARGUMENT,l+e+u)}function fS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new fD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fD extends uc{data(){return super.data()}}function gg(e,t){return typeof t=="string"?mg(e,t):t instanceof rl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new j(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class dS extends pg{}function mD(e,t,...n){let i=[];t instanceof pg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof _g).length,l=r.filter(u=>u instanceof yg).length;if(a>1||a>0&&l>0)throw new j(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class yg extends dS{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new yg(t,n,i)}_apply(t){const n=this._parse(t);return mS(t._query,n),new zs(t.firestore,t.converter,Td(t._query,n))}_parse(t){const n=al(t.firestore);return function(r,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){av(g,d);const O=[];for(const V of g)O.push(rv(u,r,V));m={arrayValue:{values:O}}}else m=rv(u,r,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||av(g,d),m=cD(l,a,g,d==="in"||d==="not-in");return Ht.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class _g extends pg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _g(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)mS(a,u),a=Td(a,u)}(t._query,n),new zs(t.firestore,t.converter,Td(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vg extends dS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new vg(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new j(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new j(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Do(r,a)}(t._query,this._field,this._direction);return new zs(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new oa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function gD(e,t="asc"){const n=t,i=gg("orderBy",e);return vg._create(i,n)}function rv(e,t,n){if(typeof(n=ie(n))=="string"){if(n==="")throw new j(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uA(t)&&n.indexOf("/")!==-1)throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(_t.fromString(n));if(!G.isDocumentKey(i))throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return E_(e,new G(i))}if(n instanceof Vt)return E_(e,n._key);throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(n)}.`)}function av(e,t){if(!Array.isArray(e)||e.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mS(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new j(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new j(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class gS{convertValue(t,n="none"){switch(Wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return rs(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[tc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>jt(a.doubleValue));return new Rn(n)}convertGeoPoint(t){return new wn(jt(t.latitude),jt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Uc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Io(t));default:return null}}convertTimestamp(t){const n=Zi(t);return new bt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_t.fromString(t);ut(MA(i),9688,{name:t});const s=new Co(i.get(1),i.get(3)),r=new G(i.popFirst(5));return s.isEqual(n)||Wn(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class pD extends gS{constructor(t){super(),this.firestore=t}convertBytes(t){return new ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}class pr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Gi extends uc{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(gg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Gi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gi._jsonSchema={type:Gt("string",Gi._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class gu extends Gi{data(t={}){return super.data(t)}}class Ir{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new pr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new gu(this._firestore,this._userDataWriter,i.key,i,new pr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new gu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new pr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new gu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new pr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:yD(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ir._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function yD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(e){e=Fe(e,Vt);const t=Fe(e.firestore,ei);return iD($c(t),e._key).then(n=>yS(t,e,n))}Ir._jsonSchemaVersion="firestore/querySnapshot/1.0",Ir._jsonSchema={type:Gt("string",Ir._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Tg extends gS{constructor(t){super(),this.firestore=t}convertBytes(t){return new ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function _D(e,t,n){e=Fe(e,Vt);const i=Fe(e.firestore,ei),s=Eg(e.converter,t,n);return Jc(i,[hg(al(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,ue.none())])}function vD(e,t,n,...i){e=Fe(e,Vt);const s=Fe(e.firestore,ei),r=al(s);let a;return a=typeof(t=ie(t))=="string"||t instanceof rl?uS(r,"updateDoc",e._key,t,n,i):lS(r,"updateDoc",e._key,t),Jc(s,[a.toMutation(e._key,ue.exists(!0))])}function ED(e){return Jc(Fe(e.firestore,ei),[new Hc(e._key,ue.none())])}function TD(e,t){const n=Fe(e.firestore,ei),i=Ti(e),s=Eg(e.converter,t);return Jc(n,[hg(al(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,ue.exists(!1))]).then(()=>i)}function ov(e,...t){var u,h,d;e=ie(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||sv(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let r,a,l;if(e instanceof Vt)a=Fe(e.firestore,ei),l=Lc(e._key.path),r={next:g=>{t[i]&&t[i](yS(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=Fe(e,zs);a=Fe(g.firestore,ei),l=g._query;const m=new Tg(a);r={next:y=>{t[i]&&t[i](new Ir(a,m,g,y))},error:t[i+1],complete:t[i+2]},dD(e._query)}return function(m,y,O,V){const k=new iS(V),w=new KA(y,k,O);return m.asyncQueue.enqueueAndForget(async()=>QA(await Od(m),w)),()=>{k.Nu(),m.asyncQueue.enqueueAndForget(async()=>YA(await Od(m),w))}}($c(a),l,s,r)}function Jc(e,t){return function(i,s){const r=new Yn;return i.asyncQueue.enqueueAndForget(async()=>qN(await eD(i),s,r)),r.promise}($c(e),t)}function yS(e,t,n){const i=n.docs.get(t._key),s=new Tg(e);return new Gi(e,s,t._key,i,new pr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={maxAttempts:5};function Ba(e,t){if((e=ie(e)).firestore!==t)throw new j(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=al(t)}get(t){const n=Ba(t,this._firestore),i=new pD(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Y(24041);const r=s[0];if(r.isFoundDocument())return new uc(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new uc(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:r})})}set(t,n,i){const s=Ba(t,this._firestore),r=Eg(s.converter,n,i),a=hg(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=Ba(t,this._firestore);let a;return a=typeof(n=ie(n))=="string"||n instanceof rl?uS(this._dataReader,"Transaction.update",r._key,n,i,s):lS(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=Ba(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD extends SD{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Ba(t,this._firestore),i=new Tg(this._firestore);return super.get(t).then(s=>new Gi(this._firestore,i,n._key,s._document,new pr(!1,!1),n.converter))}}function wD(e,t,n){e=Fe(e,ei);const i={...AD,...n};return function(r){if(r.maxAttempts<1)throw new j(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new Yn;return r.asyncQueue.enqueueAndForget(async()=>{const h=await nD(r);new JN(r.asyncQueue,h,l,a,u).ju()}),u.promise}($c(e),s=>t(new bD(e,s)),i)}function lv(){return new fg("serverTimestamp")}(function(t,n=!0){(function(s){sa=s})(ia),qr(new Ns("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new ei(new cI(i.getProvider("auth-internal")),new dI(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new j(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(h.options.projectId,d)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Bi(o_,l_,t),Bi(o_,l_,"esm2020")})();function _S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RD=_S,vS=new Zo("auth","Firebase",_S());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new km("@firebase/auth");function ID(e,...t){cc.logLevel<=st.WARN&&cc.warn(`Auth (${ia}): ${e}`,...t)}function pu(e,...t){cc.logLevel<=st.ERROR&&cc.error(`Auth (${ia}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e,...t){throw Ag(e,...t)}function In(e,...t){return Ag(e,...t)}function ES(e,t,n){const i={...RD(),[t]:n};return new Zo("auth","Firebase",i).create(t,{appName:e.name})}function Fi(e){return ES(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ag(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return vS.create(e,...t)}function J(e,t,...n){if(!e)throw Ag(t,...n)}function Hn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pu(t),new Error(t)}function ii(e,t){e||Hn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function CD(){return uv()==="http:"||uv()==="https:"}function uv(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CD()||zR()||"connection"in navigator)?navigator.onLine:!0}function DD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(t,n){this.shortDelay=t,this.longDelay=n,ii(n>t,"Short delay should be less than long delay!"),this.isMobile=PR()||jR()}get(){return ND()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e,t){ii(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xD=new ll(3e4,6e4);function Wc(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ua(e,t,n,i,s={}){return AS(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=Jo({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return LR()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&na(e.emulatorConfig.host)&&(h.credentials="include"),TS.fetch()(await bS(e,e.config.apiHost,n,l),h)})}async function AS(e,t,n){e._canInitEmulator=!1;const i={...OD,...t};try{const s=new MD(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Xl(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Xl(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Xl(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ES(e,d,h);ni(e,d)}}catch(s){if(s instanceof ri)throw s;ni(e,"network-request-failed",{message:String(s)})}}async function SS(e,t,n,i,s={}){const r=await ua(e,t,n,i,s);return"mfaPendingCredential"in r&&ni(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function bS(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Sg(e.config,s):`${e.config.apiScheme}://${s}`;return VD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class MD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(In(this.auth,"network-request-failed")),xD.get())})}}function Xl(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=In(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(e,t){return ua(e,"POST","/v1/accounts:delete",t)}async function hc(e,t){return ua(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function PD(e,t=!1){const n=ie(e),i=await n.getIdToken(t),s=bg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:uo(df(s.auth_time)),issuedAtTime:uo(df(s.iat)),expirationTime:uo(df(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function df(e){return Number(e)*1e3}function bg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return pu("JWT malformed, contained fewer than 3 sections"),null;try{const s=w0(n);return s?JSON.parse(s):(pu("Failed to decode base64 JWT payload"),null)}catch(s){return pu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cv(e){const t=bg(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof ri&&UD(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function UD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Mo(e,hc(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?wS(s.providerUserInfo):[],a=jD(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function zD(e){const t=ie(e);await fc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function jD(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function wS(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(e,t){const n=await AS(e,{},async()=>{const i=Jo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await bS(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&na(e.emulatorConfig.host)&&(u.credentials="include"),TS.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qD(e,t){return ua(e,"POST","/v2/accounts:revokeToken",Wc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):cv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=cv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await BD(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Cr;return i&&(J(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class cn{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new LD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Md(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Mo(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return PD(this,t)}reload(){return zD(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new cn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Fi(this.auth));const t=await this.getIdToken();return await Mo(this,kD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:y,providerData:O,stsTokenManager:V}=n;J(g&&V,t,"internal-error");const k=Cr.fromJSON(this.name,V);J(typeof g=="string",t,"internal-error"),di(i,t.name),di(s,t.name),J(typeof m=="boolean",t,"internal-error"),J(typeof y=="boolean",t,"internal-error"),di(r,t.name),di(a,t.name),di(l,t.name),di(u,t.name),di(h,t.name),di(d,t.name);const w=new cn({uid:g,auth:t,email:s,emailVerified:m,displayName:i,isAnonymous:y,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:k,createdAt:h,lastLoginAt:d});return O&&Array.isArray(O)&&(w.providerData=O.map(v=>({...v}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(t,n,i=!1){const s=new Cr;s.updateFromServerResponse(n);const r=new cn({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await fc(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?wS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Cr;l.updateFromIdToken(i);const u=new cn({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;function Gn(e){ii(e instanceof Function,"Expected a class definition");let t=hv.get(e);return t?(ii(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}RS.type="NONE";const fv=RS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(e,t,n){return`firebase:${e}:${t}:${n}`}class Nr{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=yu(this.userKey,s.apiKey,r),this.fullPersistenceKey=yu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await hc(this.auth,{idToken:t}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,t):null}return cn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Nr(Gn(fv),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||Gn(fv);const a=yu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await hc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await cn._fromGetAccountInfoResponse(t,m,d)}else g=cn._fromJSON(t,d);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Nr(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Nr(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(IS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(VS(t))return"Blackberry";if(xS(t))return"Webos";if(CS(t))return"Safari";if((t.includes("chrome/")||NS(t))&&!t.includes("edge/"))return"Chrome";if(OS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function IS(e=ve()){return/firefox\//i.test(e)}function CS(e=ve()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function NS(e=ve()){return/crios\//i.test(e)}function DS(e=ve()){return/iemobile/i.test(e)}function OS(e=ve()){return/android/i.test(e)}function VS(e=ve()){return/blackberry/i.test(e)}function xS(e=ve()){return/webos/i.test(e)}function wg(e=ve()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function HD(e=ve()){var t;return wg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function GD(){return BR()&&document.documentMode===10}function MS(e=ve()){return wg(e)||OS(e)||xS(e)||VS(e)||/windows phone/i.test(e)||DS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(e,t=[]){let n;switch(e){case"Browser":n=dv(ve());break;case"Worker":n=`${dv(ve())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(e,t={}){return ua(e,"GET","/v2/passwordPolicy",Wc(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=6;class KD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??YD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mv(this),this.idTokenSubscription=new mv(this),this.beforeStateQueue=new FD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Nr.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await hc(this,{idToken:t}),i=await cn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(un(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await fc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=DD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(un(this.app))return Promise.reject(Fi(this));const n=t?ie(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return un(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await QD(this),n=new KD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await qD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Gn(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Nr.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&ID(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function th(e){return ie(e)}class mv{constructor(t){this.auth=t,this.observer=null,this.addObserver=$R(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XD(e){Rg=e}function ZD(e){return Rg.loadJS(e)}function JD(){return Rg.gapiScript}function WD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(e,t){const n=Um(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Cs(r,t??{}))return s;ni(s,"already-initialized")}return n.initialize({options:t})}function e4(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function n4(e,t,n){const i=th(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=PS(t),{host:a,port:l}=i4(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Cs(h,i.config.emulator)&&Cs(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,na(a)?(N0(`${r}//${a}${u}`),D0("Auth",!0)):s4()}function PS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function i4(e){const t=PS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:gv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:gv(a)}}}function gv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function s4(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(t){return Hn("not implemented")}_linkToIdToken(t,n){return Hn("not implemented")}_getReauthenticationResolver(t){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dr(e,t){return SS(e,"POST","/v1/accounts:signInWithIdp",Wc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="http://localhost";class Vs extends US{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Vs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new Vs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Dr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Dr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Dr(t,n)}buildRequest(){const t={requestUri:r4,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Jo(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends LS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends ul{constructor(){super("facebook.com")}static credential(t){return Vs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ai.credentialFromTaggedObject(t)}static credentialFromError(t){return Ai.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ai.credential(t.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Vs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Si.credentialFromTaggedObject(t)}static credentialFromError(t){return Si.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Si.credential(n,i)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends ul{constructor(){super("github.com")}static credential(t){return Vs._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bi.credentialFromTaggedObject(t)}static credentialFromError(t){return bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bi.credential(t.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends ul{constructor(){super("twitter.com")}static credential(t,n){return Vs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return wi.credentialFromTaggedObject(t)}static credentialFromError(t){return wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(e,t){return SS(e,"POST","/v1/accounts:signUp",Wc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await cn._fromIdTokenResponse(t,i,s),a=pv(i);return new ns({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=pv(i);return new ns({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function pv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(e){var s;if(un(e.app))return Promise.reject(Fi(e));const t=th(e);if(await t._initializationPromise,(s=t.currentUser)!=null&&s.isAnonymous)return new ns({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await a4(t,{returnSecureToken:!0}),i=await ns._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends ri{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new dc(t,n,i,s)}}function zS(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(e,r,t,i):r})}async function l4(e,t,n=!1){const i=await Mo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ns._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(e,t,n=!1){const{auth:i}=e;if(un(i.app))return Promise.reject(Fi(i));const s="reauthenticate";try{const r=await Mo(e,zS(i,s,t,e),n);J(r.idToken,i,"internal-error");const a=bg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(e.uid===l,i,"user-mismatch"),ns._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&ni(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(e,t,n=!1){if(un(e.app))return Promise.reject(Fi(e));const i="signIn",s=await zS(e,i,t),r=await ns._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function h4(e,t,n,i){return ie(e).onIdTokenChanged(t,n,i)}function f4(e,t,n){return ie(e).beforeAuthStateChanged(t,n)}const mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=1e3,m4=10;class BS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);GD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,m4):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}BS.type="LOCAL";const g4=BS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}qS.type="SESSION";const HS=qS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new eh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await p4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=Ig("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function _4(e){Cn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function v4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function T4(){return GS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebaseLocalStorageDb",A4=1,gc="firebaseLocalStorage",QS="fbase_key";class cl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nh(e,t){return e.transaction([gc],t?"readwrite":"readonly").objectStore(gc)}function S4(){const e=indexedDB.deleteDatabase(FS);return new cl(e).toPromise()}function kd(){const e=indexedDB.open(FS,A4);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(gc,{keyPath:QS})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(gc)?t(i):(i.close(),await S4(),t(await kd()))})})}async function yv(e,t,n){const i=nh(e,!0).put({[QS]:t,value:n});return new cl(i).toPromise()}async function b4(e,t){const n=nh(e,!1).get(t),i=await new cl(n).toPromise();return i===void 0?null:i.value}function _v(e,t){const n=nh(e,!0).delete(t);return new cl(n).toPromise()}const w4=800,R4=3;class YS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>R4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eh._getInstance(T4()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await v4(),!this.activeServiceWorker)return;this.sender=new y4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||E4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kd();return await yv(t,mc,"1"),await _v(t,mc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>yv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>b4(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_v(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=nh(s,!1).getAll();return new cl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YS.type="LOCAL";const I4=YS;new ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(e,t){return t?Gn(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends US{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Dr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Dr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Dr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function N4(e){return c4(e.auth,new Cg(e),e.bypassAuthState)}function D4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),u4(n,new Cg(e),e.bypassAuthState)}async function O4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),l4(n,new Cg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return N4;case"linkViaPopup":case"linkViaRedirect":return O4;case"reauthViaPopup":case"reauthViaRedirect":return D4;default:ni(this.auth,"internal-error")}}resolve(t){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new ll(2e3,1e4);class yr extends KS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const t=Ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,V4.get())};t()}}yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="pendingRedirect",_u=new Map;class M4 extends KS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=_u.get(this.auth._key());if(!t){try{const i=await k4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}_u.set(this.auth._key(),t)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k4(e,t){const n=L4(t),i=U4(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function P4(e,t){_u.set(e._key(),t)}function U4(e){return Gn(e._redirectPersistence)}function L4(e){return yu(x4,e.config.apiKey,e.name)}async function z4(e,t,n=!1){if(un(e.app))return Promise.reject(Fi(e));const i=th(e),s=C4(i,t),a=await new M4(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=10*60*1e3;class B4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!q4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!$S(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(In(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=j4&&this.cachedEventUids.clear(),this.cachedEventUids.has(vv(t))}saveEventToCache(t){this.cachedEventUids.add(vv(t)),this.lastProcessedEventTime=Date.now()}}function vv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function $S({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function q4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $S(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H4(e,t={}){return ua(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F4=/^https?/;async function Q4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await H4(e);for(const n of t)try{if(Y4(n))return}catch{}ni(e,"unauthorized-domain")}function Y4(e){const t=xd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!F4.test(n))return!1;if(G4.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=new ll(3e4,6e4);function Ev(){const e=Cn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function $4(e){return new Promise((t,n)=>{var s,r,a;function i(){Ev(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ev(),n(In(e,"network-request-failed"))},timeout:K4.get()})}if((r=(s=Cn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Cn().gapi)!=null&&a.load)i();else{const l=WD("iframefcb");return Cn()[l]=()=>{gapi.load?i():n(In(e,"network-request-failed"))},ZD(`${JD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw vu=null,t})}let vu=null;function X4(e){return vu=vu||$4(e),vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=new ll(5e3,15e3),J4="__/auth/iframe",W4="emulator/auth/iframe",tO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nO(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Sg(t,W4):`https://${e.config.authDomain}/${J4}`,i={apiKey:t.apiKey,appName:e.name,v:ia},s=eO.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Jo(i).slice(1)}`}async function iO(e){const t=await X4(e),n=Cn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:nO(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tO,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=In(e,"network-request-failed"),l=Cn().setTimeout(()=>{r(a)},Z4.get());function u(){Cn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rO=500,aO=600,oO="_blank",lO="http://localhost";class Tv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uO(e,t,n,i=rO,s=aO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...sO,width:i.toString(),height:s.toString(),top:r,left:a},h=ve().toLowerCase();n&&(l=NS(h)?oO:n),IS(h)&&(t=t||lO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[y,O])=>`${m}${y}=${O},`,"");if(HD(h)&&l!=="_self")return cO(t||"",l),new Tv(null);const g=window.open(t||"",l,d);J(g,e,"popup-blocked");try{g.focus()}catch{}return new Tv(g)}function cO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="__/auth/handler",fO="emulator/auth/handler",dO=encodeURIComponent("fac");async function Av(e,t,n,i,s,r){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ia,eventId:s};if(t instanceof LS){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",KR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof ul){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${dO}=${encodeURIComponent(u)}`:"";return`${mO(e)}?${Jo(l).slice(1)}${h}`}function mO({config:e}){return e.emulator?Sg(e,fO):`https://${e.authDomain}/${hO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class gO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HS,this._completeRedirectFn=z4,this._overrideRedirectResult=P4}async _openPopup(t,n,i,s){var a;ii((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Av(t,n,i,xd(),s);return uO(t,r,Ig())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Av(t,n,i,xd(),s);return _4(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(ii(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await iO(t),i=new B4(t);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(mf,{type:mf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[mf];r!==void 0&&n(!!r),ni(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return MS()||CS()||wg()}}const pO=gO;var Sv="@firebase/auth",bv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vO(e){qr(new Ns("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kS(e)},h=new $D(i,s,r,u);return e4(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),qr(new Ns("auth-internal",t=>{const n=th(t.getProvider("auth").getImmediate());return(i=>new yO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(Sv,bv,_O(e)),Bi(Sv,bv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=5*60,TO=C0("authIdTokenMaxAge")||EO;let wv=null;const AO=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>TO)return;const s=n==null?void 0:n.token;wv!==s&&(wv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function SO(e=M0()){const t=Um(e,"auth");if(t.isInitialized())return t.getImmediate();const n=t4(e,{popupRedirectResolver:pO,persistence:[I4,g4,HS]}),i=C0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=AO(r.toString());f4(n,a,()=>a(n.currentUser)),h4(n,l=>a(l))}}const s=R0("auth");return s&&n4(n,`http://${s}`),n}function bO(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}XD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=In("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",bO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vO("Browser");const wO={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},XS=x0(wO),yn=rD(XS),RO=SO(XS),ZS="417641827",IO=({className:e=""})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:N.jsx("path",{d:"m9 18 6-6-6-6"})}),JS=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("circle",{cx:"12",cy:"12",r:"4"}),N.jsx("path",{d:"M12 2v2"}),N.jsx("path",{d:"M12 20v2"}),N.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),N.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),N.jsx("path",{d:"M2 12h2"}),N.jsx("path",{d:"M20 12h2"}),N.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),N.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),WS=({className:e=""})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:N.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),CO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),N.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),NO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("path",{d:"M19 12H5"}),N.jsx("polyline",{points:"12 19 5 12 12 5"})]}),DO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 ${e}`,children:[N.jsx("circle",{cx:"11",cy:"11",r:"8"}),N.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),OO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[N.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),N.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),t1=({className:e="",filled:t=!1})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:N.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),VO=({className:e=""})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[N.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),N.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Rv=({className:e="",filled:t=!1})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:N.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),xO=({theme:e})=>{const t=Qi[e];return N.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.bg}`,children:[N.jsx(t1,{className:"animate-pulse-heart text-pink-400",filled:!0}),N.jsx("p",{className:`mt-4 text-lg ${t.text} opacity-70`,children:"Загрузка новелл..."})]})},Qi={light:{bg:"bg-stone-100",text:"text-stone-800",componentBg:"bg-white",componentText:"text-stone-700",border:"border-stone-200",searchBg:"bg-white",searchPlaceholder:"placeholder-stone-400",searchRing:"focus:ring-pink-400",tgBg:"#f8f7f5",tgHeader:"#FFFFFF",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-stone-50",commentText:"text-stone-800"},dark:{bg:"bg-gray-900",text:"text-gray-100",componentBg:"bg-gray-800",componentText:"text-gray-200",border:"border-gray-700",searchBg:"bg-gray-800",searchPlaceholder:"placeholder-gray-500",searchRing:"focus:ring-pink-500",tgBg:"#111827",tgHeader:"#1f2937",accent:"pink-500",accentHover:"pink-400",commentBg:"bg-gray-700",commentText:"text-gray-100"}},MO=({onBack:e,onHome:t,isReader:n=!1,onTextSizeChange:i,onThemeChange:s,theme:r,onFontChange:a,currentFont:l})=>{const[u,h]=Q.useState(!1),d=Qi[r],g=[{name:"Montserrat",class:"font-sans"},{name:"Arial",class:"font-body"}];return N.jsxs(N.Fragment,{children:[N.jsx("button",{onClick:()=>h(!0),className:`fixed top-4 right-4 z-20 w-12 h-12 rounded-full ${d.componentBg} ${d.border} border text-lg shadow-lg flex items-center justify-center ${d.text}`,children:"☰"}),u&&N.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-30",onClick:()=>h(!1),children:N.jsxs("div",{className:`fixed top-0 left-0 right-0 p-4 ${d.componentBg} shadow-lg rounded-b-2xl animate-fade-in-down ${d.text}`,onClick:m=>m.stopPropagation(),children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h3",{className:"font-bold text-lg",children:"Настройки"}),N.jsx("button",{onClick:()=>h(!1),className:"font-bold text-2xl",children:"×"})]}),n&&N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{children:"Размер текста"}),N.jsxs("div",{className:`w-28 h-12 rounded-full ${d.bg} flex items-center justify-around`,children:[N.jsx("button",{onClick:()=>i(-2),className:"text-2xl font-bold",children:"-"}),N.jsx("button",{onClick:()=>i(2),className:"text-2xl font-bold",children:"+"})]})]}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{children:"Тема"}),N.jsx("button",{onClick:s,className:`w-12 h-12 rounded-full ${d.bg} flex items-center justify-center`,children:r==="dark"?N.jsx(JS,{}):N.jsx(WS,{})})]}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{children:"Шрифт"}),N.jsx("select",{onChange:m=>a(m.target.value),value:l,className:`w-32 h-10 rounded-full ${d.bg} border ${d.border} ${d.text} px-2 py-1 focus:outline-none focus:ring-2 ${d.searchRing}`,children:g.map(m=>N.jsx("option",{value:m.class,children:m.name},m.name))})]})]}),N.jsxs("div",{className:"flex gap-3 mt-4",children:[e&&N.jsxs("button",{onClick:()=>{e(),h(!1)},className:`flex-1 py-3 rounded-lg ${d.bg} flex items-center justify-center gap-2`,children:[N.jsx(NO,{})," Назад"]}),t&&N.jsxs("button",{onClick:()=>{t(),h(!1)},className:`flex-1 py-3 rounded-lg ${d.bg} flex items-center justify-center gap-2`,children:[N.jsx(CO,{})," Главная"]})]})]})})]})},kO=({novels:e,onSelectNovel:t,theme:n,setTheme:i,genreFilter:s,onClearGenreFilter:r,bookmarks:a,onToggleBookmark:l,onShowBookmarks:u})=>{const h=Qi[n],[d,g]=Q.useState(""),m=Q.useMemo(()=>e.filter(y=>(!s||y.genres.includes(s))&&y.title.toLowerCase().includes(d.toLowerCase())),[e,d,s]);return!e.length&&!d?N.jsx("div",{className:`p-4 text-center ${h.text}`,children:"Загрузка библиотеки..."}):N.jsxs("div",{className:`p-4 ${h.text}`,children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h1",{className:"text-3xl font-bold",children:"Библиотека"}),N.jsxs("div",{className:"flex gap-2 items-center",children:[N.jsx("button",{onClick:u,className:`p-2 rounded-full ${h.componentBg} ${h.border} border`,children:N.jsx(Rv,{})}),N.jsx("button",{onClick:()=>i(n==="dark"?"light":"dark"),className:`p-2 rounded-full ${h.componentBg} ${h.border} border`,children:n==="dark"?N.jsx(JS,{}):N.jsx(WS,{})})]})]}),s&&N.jsxs("div",{className:`flex items-center justify-between p-3 mb-4 rounded-lg border ${h.border} ${h.componentBg}`,children:[N.jsxs("p",{className:"text-sm",children:[N.jsx("span",{className:"opacity-70",children:"Жанр:"}),N.jsx("strong",{className:"ml-2",children:s})]}),N.jsx("button",{onClick:r,className:`text-xs font-bold text-${h.accent} hover:underline`,children:"Сбросить"})]}),N.jsxs("div",{className:"relative mb-6",children:[N.jsx(DO,{className:h.searchPlaceholder}),N.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:d,onChange:y=>g(y.target.value),className:`w-full ${h.searchBg} ${h.border} border rounded-lg py-2 pl-10 pr-4 ${h.text} ${h.searchPlaceholder} focus:outline-none focus:ring-2 ${h.searchRing} transition-shadow duration-300`})]}),N.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4",children:m.map((y,O)=>N.jsx("div",{onClick:()=>t(y),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${O*50}ms`},children:N.jsxs("div",{className:"relative filter drop-shadow-md group-hover:drop-shadow-pink transition-all duration-300",children:[N.jsx("button",{onClick:V=>{V.stopPropagation(),l(y.id)},className:`absolute top-2 right-2 z-10 p-1.5 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${a.includes(y.id)?"text-pink-400":""}`,children:N.jsx(Rv,{filled:a.includes(y.id)})}),N.jsx("img",{src:y.coverUrl,alt:y.title,className:`w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 ${h.border} border`}),N.jsx("h2",{className:`mt-2 font-semibold text-xs truncate ${h.text}`,children:y.title})]})},y.id))})]})},PO=({novel:e,onSelectChapter:t,onGenreSelect:n,theme:i,subscription:s,botUsername:r,userId:a,chaptersCache:l,lastReadData:u})=>{const h=Qi[i],[d,g]=Q.useState([]),[m,y]=Q.useState(!0),[O,V]=Q.useState(!1),[k,w]=Q.useState(null),[v,R]=Q.useState("newest"),[D,L]=Q.useState(!1),B=s&&new Date(s.expires_at)>new Date,T=Q.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);Q.useEffect(()=>{l[e.id]?(g(l[e.id]),y(!1)):(y(!0),fetch(`./data/chapters/${e.id}.json`).then(S=>S.json()).then(S=>{g(S.chapters||[]),y(!1)}).catch(S=>{console.error(S),g([]),y(!1)}))},[e.id,l]);const _=Q.useMemo(()=>{const S=[...d];return v==="newest"?S.reverse():d},[d,v]),A=S=>{!B&&S.isPaid?V(!0):t(S)},E=()=>{if(T){const S=d.find(I=>I.id===T);S&&t(S)}};return N.jsxs("div",{className:h.text,children:[N.jsxs("div",{className:"relative h-64",children:[N.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),N.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${i==="dark"?"from-gray-900 via-gray-900/80":"from-stone-100 via-stone-100/80"} to-transparent`}),N.jsxs("div",{className:"absolute bottom-4 left-4",children:[N.jsx("h1",{className:"text-3xl font-bold font-sans text-pink-400 drop-shadow-pink",children:e.title}),N.jsx("p",{className:"text-sm font-sans",children:e.author})]})]}),N.jsxs("div",{className:"p-4",children:[N.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(S=>N.jsx("button",{onClick:()=>n(S),className:`text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 ${i==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:S},S))}),N.jsx("div",{className:`relative overflow-hidden transition-all duration-500 ${D?"max-h-full":"max-h-24"}`,children:N.jsx("p",{className:`text-sm mb-2 ${i==="dark"?"text-gray-300":"text-stone-600"} font-body`,children:e.description})}),N.jsx("button",{onClick:()=>L(!D),className:`text-sm font-semibold text-${h.accent} mb-4`,children:D?"Скрыть":"Читать полностью..."}),T&&N.jsxs("button",{onClick:E,className:"w-full py-3 mb-4 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold shadow-lg shadow-pink-500/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",T,")"]}),N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),N.jsx("button",{onClick:()=>R(S=>S==="newest"?"oldest":"newest"),className:`text-sm font-semibold text-${h.accent}`,children:v==="newest"?"Сначала новые":"Сначала старые"})]}),B&&N.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(s.expires_at).toLocaleDateString()]}),m?N.jsx("p",{className:h.text,children:"Загрузка глав..."}):N.jsx("div",{className:"flex flex-col gap-3",children:_.map(S=>{const I=!B&&S.isPaid,b=T===S.id;return N.jsxs("div",{onClick:()=>A(S),className:`p-4 ${h.componentBg} rounded-xl cursor-pointer transition-all duration-200 hover:border-pink-400 hover:bg-pink-500/10 border ${h.border} flex items-center justify-between shadow-sm hover:shadow-md ${I?"opacity-70":""}`,children:[N.jsxs("div",{className:"flex items-center gap-3",children:[b&&N.jsx("span",{className:"w-2 h-2 rounded-full bg-pink-400"}),N.jsx("p",{className:`font-semibold ${h.componentText}`,children:S.title})]}),I?N.jsx(OO,{className:h.text}):N.jsx(IO,{className:h.text})]},S.id)})})]})]})},UO=({chapter:e,novel:t,theme:n,fontSize:i,userId:s,userName:r,currentFontClass:a})=>{const l=Qi[n],[u,h]=Q.useState([]),[d,g]=Q.useState(""),[m,y]=Q.useState(null),[O,V]=Q.useState(""),[k,w]=Q.useState(0),[v,R]=Q.useState(!1),D=Q.useMemo(()=>Ti(yn,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);Q.useEffect(()=>{const E=ov(D,b=>{var Nt;w(((Nt=b.data())==null?void 0:Nt.likeCount)||0)}),S=mD(tv(yn,`chapters_metadata/${t.id}_${e.id}/comments`),gD("timestamp","asc")),I=ov(S,b=>{const Nt=b.docs.map(Qt=>({id:Qt.id,...Qt.data()}));h(Nt)});if(s&&s!=="guest_user"){const b=Ti(yn,`chapters_metadata/${t.id}_${e.id}/likes`,s);pS(b).then(Nt=>R(Nt.exists()))}return()=>{E(),I()}},[D,t.id,e.id,s]);const L=async E=>{if(E.preventDefault(),!d.trim()||!s||s==="guest_user")return;const S=tv(yn,`chapters_metadata/${t.id}_${e.id}/comments`);await TD(S,{userId:s,userName:r||"Аноним",text:d,timestamp:lv()}),g("")},B=E=>{y(E.id),V(E.text)},T=async E=>{if(!O.trim())return;const S=Ti(yn,`chapters_metadata/${t.id}_${e.id}/comments`,E);await vD(S,{text:O}),y(null),V("")},_=async E=>{const S=Ti(yn,`chapters_metadata/${t.id}_${e.id}/comments`,E);await ED(S)},A=async()=>{if(!s||s==="guest_user")return;const E=Ti(yn,`chapters_metadata/${t.id}_${e.id}/likes`,s);await wD(yn,async S=>{var Qt;const I=await S.get(E),Nt=((Qt=(await S.get(D)).data())==null?void 0:Qt.likeCount)||0;I.exists()?(S.delete(E),S.set(D,{likeCount:Math.max(0,Nt-1)},{merge:!0}),R(!1)):(S.set(E,{timestamp:lv()}),S.set(D,{likeCount:Nt+1},{merge:!0}),R(!0))})};return N.jsx("div",{className:`min-h-screen transition-colors duration-300 ${l.bg}`,children:N.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[N.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center font-sans text-pink-400",children:t.title}),N.jsx("h2",{className:`text-lg sm:text-xl mb-8 text-center opacity-80 font-sans ${l.text}`,children:e.title}),N.jsx("div",{className:`whitespace-pre-wrap leading-relaxed ${l.text} ${a}`,style:{fontSize:`${i}px`},children:e.content}),N.jsxs("div",{className:"mt-12 border-t pt-8",children:[N.jsx("div",{className:"flex items-center gap-4 mb-8",children:N.jsxs("button",{onClick:A,className:`flex items-center gap-2 text-${l.accentHover} transition-transform hover:scale-110`,children:[N.jsx(t1,{filled:v,className:v?`text-${l.accent}`:""}),N.jsx("span",{className:"font-bold text-lg",children:k})]})}),N.jsx("h3",{className:`text-2xl font-bold mb-4 ${l.text}`,children:"Комментарии"}),N.jsxs("div",{className:"space-y-4 mb-6",children:[u.map(E=>N.jsxs("div",{className:`p-3 rounded-lg ${l.commentBg}`,children:[N.jsx("p",{className:`font-bold text-sm ${l.commentText}`,children:E.userName}),m===E.id?N.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[N.jsx("input",{type:"text",value:O,onChange:S=>V(S.target.value),className:`w-full ${l.searchBg} ${l.border} border rounded-lg py-1 px-2 ${l.commentText}`}),N.jsx("button",{onClick:()=>T(E.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),N.jsx("button",{onClick:()=>y(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):N.jsx("p",{className:`text-md mt-1 ${l.commentText}`,children:E.text}),(s===E.userId||s===ZS)&&N.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N.jsx("button",{onClick:()=>B(E),className:"text-xs text-gray-500",children:"Редактировать"}),N.jsx("button",{onClick:()=>_(E.id),className:"text-xs text-red-500",children:"Удалить"})]})]},E.id)),u.length===0&&N.jsx("p",{className:`opacity-70 ${l.text}`,children:"Комментариев пока нет. Будьте первым!"})]}),N.jsxs("form",{onSubmit:L,className:"flex items-center gap-2",children:[N.jsx("input",{type:"text",value:d,onChange:E=>g(E.target.value),placeholder:"Написать комментарий...",className:`w-full ${l.searchBg} ${l.border} border rounded-lg py-2 px-4 ${l.commentText} ${l.searchPlaceholder} focus:outline-none focus:ring-2 ${l.searchRing}`}),N.jsx("button",{type:"submit",className:`p-2 rounded-full bg-${l.accent} text-white`,children:N.jsx(VO,{})})]})]})]})})};function LO(){const[e,t]=Q.useState("light"),[n,i]=Q.useState(18),[s,r]=Q.useState("font-body"),[a,l]=Q.useState("list"),[u,h]=Q.useState([]),[d,g]=Q.useState(null),[m,y]=Q.useState(null),[O,V]=Q.useState(null),[k,w]=Q.useState(null),[v,R]=Q.useState(null),[D,L]=Q.useState(null),[B,T]=Q.useState(!0),[_,A]=Q.useState({}),[E,S]=Q.useState(null),[I,b]=Q.useState([]),[Nt,Qt]=Q.useState(!1),q="tenebrisverbot",F=Q.useCallback(async $=>{if(v&&v!=="guest_user"){const gt=Ti(yn,"users",v);try{await _D(gt,$,{merge:!0})}catch(Te){console.error("Не удалось обновить данные пользователя:",Te)}}},[v]),Z=Q.useCallback($=>{t($),F({settings:{theme:$,fontSize:n,fontClass:s}})},[n,s,F]),vt=Q.useCallback($=>{i(gt=>{const Te=Math.max(12,Math.min(32,gt+$));return F({settings:{theme:e,fontSize:Te,fontClass:s}}),Te})},[e,s,F]),Dt=Q.useCallback($=>{r($),F({settings:{theme:e,fontSize:n,fontClass:$}})},[e,n,F]);Q.useEffect(()=>{(async()=>{var gt,Te,qs,ca,fl,dl;try{const mn=(gt=window.Telegram)==null?void 0:gt.WebApp;let oi="guest_user";if(mn&&(mn.ready(),mn.expand(),oi=((ca=(qs=(Te=mn.initDataUnsafe)==null?void 0:Te.user)==null?void 0:qs.id)==null?void 0:ca.toString())||"guest_user",L(((dl=(fl=mn.initDataUnsafe)==null?void 0:fl.user)==null?void 0:dl.first_name)||null)),R(oi),await o4(RO),oi!=="guest_user"){const fa=Ti(yn,"users",oi),Hs=await pS(fa);if(Hs.exists()){const gn=Hs.data();w(gn.subscription||null),S(gn.lastRead||null),b(gn.bookmarks||[]),gn.settings&&(t(gn.settings.theme||"light"),i(gn.settings.fontSize||18),r(gn.settings.fontClass||"font-body"))}}const ha=await fetch("./data/novels.json");if(!ha.ok)throw new Error("Failed to fetch novels");const rh=await ha.json();h(rh.novels)}catch(mn){console.error("Ошибка инициализации:",mn)}finally{T(!1)}})()},[]),Q.useEffect(()=>{u.length>0&&u.forEach($=>{fetch(`./data/chapters/${$.id}.json`).then(gt=>gt.json()).then(gt=>A(Te=>({...Te,[$.id]:gt.chapters||[]}))).catch(gt=>console.error(`Не удалось предзагрузить главы для ${$.title}:`,gt))})},[u]),Q.useEffect(()=>{document.documentElement.className=e},[e]);const rn=Q.useCallback(()=>{a==="reader"?l("details"):a==="details"&&(l("list"),V(null))},[a]),Ee=Q.useCallback(()=>{l("list"),V(null)},[]);Q.useEffect(()=>{var gt;const $=(gt=window.Telegram)==null?void 0:gt.WebApp;if($)return $.onEvent("backButtonClicked",rn),a==="list"?$.BackButton.hide():$.BackButton.show(),()=>$.offEvent("backButtonClicked",rn)},[a,rn]),Q.useEffect(()=>{var gt;const $=(gt=window.Telegram)==null?void 0:gt.WebApp;$&&($.setHeaderColor(Qi[e].tgHeader),$.setBackgroundColor(Qi[e].tgBg))},[e]);const Mt=Q.useCallback(async $=>{if(y($),l("reader"),v&&v!=="guest_user"&&d){const gt={...E||{},[d.id]:{novelId:d.id,chapterId:$.id,timestamp:new Date().toISOString()}};S(gt),await F({lastRead:gt})}},[v,d,E,F]),an=$=>{g($),l("details")},Ke=$=>{V($),l("list")},ih=()=>{V(null)},js=Q.useCallback(async $=>{const gt=I.includes($)?I.filter(Te=>Te!==$):[...I,$];b(gt),await F({bookmarks:gt})},[I,F]),hl=Q.useMemo(()=>u.filter($=>I.includes($.id)),[u,I]);if(B)return N.jsx(xO,{theme:e});const sh=()=>{switch(a){case"details":return N.jsx(PO,{novel:d,onSelectChapter:Mt,onGenreSelect:Ke,theme:e,subscription:k,botUsername:q,userId:v,chaptersCache:_,lastReadData:E});case"reader":return N.jsx(UO,{chapter:m,novel:d,theme:e,fontSize:n,userId:v,userName:D,currentFontClass:s});case"list":default:return N.jsx(kO,{novels:u,onSelectNovel:an,theme:e,setTheme:Z,genreFilter:O,onClearGenreFilter:ih,bookmarks:I,onToggleBookmark:js,onShowBookmarks:()=>Qt(!0)})}},ai=Qi[e],Bs=v===ZS;return N.jsxs("main",{className:`${ai.bg} min-h-screen font-sans ${Bs?"":"no-select"}`,children:[sh(),Nt&&N.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 p-4",onClick:()=>Qt(!1),children:N.jsxs("div",{className:`w-full max-w-md mx-auto mt-10 p-4 rounded-2xl shadow-lg ${ai.componentBg} ${ai.text}`,onClick:$=>$.stopPropagation(),children:[N.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Закладки"}),N.jsx("div",{className:"grid grid-cols-3 gap-3",children:hl.length>0?hl.map($=>N.jsx("div",{onClick:()=>{onSelectNovel($),Qt(!1)},className:"cursor-pointer",children:N.jsx("img",{src:$.coverUrl,alt:$.title,className:"w-full aspect-[2/3] object-cover rounded-lg"})},$.id)):N.jsx("p",{children:"У вас пока нет закладок."})})]})}),N.jsx(MO,{onBack:a!=="list"?rn:null,onHome:a!=="list"?Ee:null,isReader:a==="reader",onTextSizeChange:vt,onThemeChange:()=>Z(e==="dark"?"light":"dark"),onFontChange:Dt,currentFont:s,theme:e})]})}AR.createRoot(document.getElementById("root")).render(N.jsx(Q.StrictMode,{children:N.jsx(LO,{})}));
