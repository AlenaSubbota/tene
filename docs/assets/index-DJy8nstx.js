(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function jS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lv={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS=Symbol.for("react.transitional.element"),BS=Symbol.for("react.fragment");function jv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:zS,type:e,key:i,ref:t!==void 0?t:null,props:n}}Sc.Fragment=BS;Sc.jsx=jv;Sc.jsxs=jv;Lv.exports=Sc;var v=Lv.exports,zv={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd=Symbol.for("react.transitional.element"),qS=Symbol.for("react.portal"),HS=Symbol.for("react.fragment"),FS=Symbol.for("react.strict_mode"),GS=Symbol.for("react.profiler"),QS=Symbol.for("react.consumer"),YS=Symbol.for("react.context"),KS=Symbol.for("react.forward_ref"),XS=Symbol.for("react.suspense"),$S=Symbol.for("react.memo"),Bv=Symbol.for("react.lazy"),Pp=Symbol.iterator;function ZS(e){return e===null||typeof e!="object"?null:(e=Pp&&e[Pp]||e["@@iterator"],typeof e=="function"?e:null)}var qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hv=Object.assign,Fv={};function ra(e,t,n){this.props=e,this.context=t,this.refs=Fv,this.updater=n||qv}ra.prototype.isReactComponent={};ra.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ra.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gv(){}Gv.prototype=ra.prototype;function Gd(e,t,n){this.props=e,this.context=t,this.refs=Fv,this.updater=n||qv}var Qd=Gd.prototype=new Gv;Qd.constructor=Gd;Hv(Qd,ra.prototype);Qd.isPureReactComponent=!0;var Up=Array.isArray,Lt={H:null,A:null,T:null,S:null,V:null},Qv=Object.prototype.hasOwnProperty;function Yd(e,t,n,i,s,r){return n=r.ref,{$$typeof:Fd,type:e,key:t,ref:n!==void 0?n:null,props:r}}function WS(e,t){return Yd(e.type,t,void 0,void 0,void 0,e.props)}function Kd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fd}function JS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lp=/\/+/g;function Ch(e,t){return typeof e=="object"&&e!==null&&e.key!=null?JS(""+e.key):t.toString(36)}function jp(){}function t1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(jp,jp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ar(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Fd:case qS:a=!0;break;case Bv:return a=e._init,ar(a(e._payload),t,n,i,s)}}if(a)return s=s(e),a=i===""?"."+Ch(e,0):i,Up(s)?(n="",a!=null&&(n=a.replace(Lp,"$&/")+"/"),ar(s,t,n,"",function(h){return h})):s!=null&&(Kd(s)&&(s=WS(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Lp,"$&/")+"/")+a)),t.push(s)),1;a=0;var l=i===""?".":i+":";if(Up(e))for(var u=0;u<e.length;u++)i=e[u],r=l+Ch(i,u),a+=ar(i,t,n,r,s);else if(u=ZS(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,r=l+Ch(i,u++),a+=ar(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return ar(t1(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Ul(e,t,n){if(e==null)return e;var i=[],s=0;return ar(e,i,"","",function(r){return t.call(n,r,s++)}),i}function e1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function n1(){}nt.Children={map:Ul,forEach:function(e,t,n){Ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ul(e,function(){t++}),t},toArray:function(e){return Ul(e,function(t){return t})||[]},only:function(e){if(!Kd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=ra;nt.Fragment=HS;nt.Profiler=GS;nt.PureComponent=Gd;nt.StrictMode=FS;nt.Suspense=XS;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Lt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Hv({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!Qv.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Yd(e.type,s,void 0,void 0,r,i)};nt.createContext=function(e){return e={$$typeof:YS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:QS,_context:e},e};nt.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)Qv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Yd(e,r,void 0,void 0,null,s)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:KS,render:e}};nt.isValidElement=Kd;nt.lazy=function(e){return{$$typeof:Bv,_payload:{_status:-1,_result:e},_init:e1}};nt.memo=function(e,t){return{$$typeof:$S,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Lt.T,n={};Lt.T=n;try{var i=e(),s=Lt.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(n1,zp)}catch(r){zp(r)}finally{Lt.T=t}};nt.unstable_useCacheRefresh=function(){return Lt.H.useCacheRefresh()};nt.use=function(e){return Lt.H.use(e)};nt.useActionState=function(e,t,n){return Lt.H.useActionState(e,t,n)};nt.useCallback=function(e,t){return Lt.H.useCallback(e,t)};nt.useContext=function(e){return Lt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Lt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,n){var i=Lt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};nt.useId=function(){return Lt.H.useId()};nt.useImperativeHandle=function(e,t,n){return Lt.H.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Lt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Lt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Lt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Lt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,n){return Lt.H.useReducer(e,t,n)};nt.useRef=function(e){return Lt.H.useRef(e)};nt.useState=function(e){return Lt.H.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Lt.H.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Lt.H.useTransition()};nt.version="19.1.1";zv.exports=nt;var H=zv.exports;const i1=jS(H);var Yv={exports:{}},wc={},Kv={exports:{}},Xv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,X){var Y=q.length;q.push(X);t:for(;0<Y;){var gt=Y-1>>>1,xt=q[gt];if(0<s(xt,X))q[gt]=X,q[Y]=xt,Y=gt;else break t}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var X=q[0],Y=q.pop();if(Y!==X){q[0]=Y;t:for(var gt=0,xt=q.length,pn=xt>>>1;gt<pn;){var zt=2*(gt+1)-1,ct=q[zt],$t=zt+1,Ae=q[$t];if(0>s(ct,Y))$t<xt&&0>s(Ae,ct)?(q[gt]=Ae,q[$t]=Y,gt=$t):(q[gt]=ct,q[zt]=Y,gt=zt);else if($t<xt&&0>s(Ae,Y))q[gt]=Ae,q[$t]=Y,gt=$t;else break t}}return X}function s(q,X){var Y=q.sortIndex-X.sortIndex;return Y!==0?Y:q.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,_=!1,x=!1,V=!1,O=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(q){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=q)i(h),X.sortIndex=X.expirationTime,t(u,X);else break;X=n(h)}}function L(q){if(V=!1,D(q),!x)if(n(u)!==null)x=!0,B||(B=!0,I());else{var X=n(h);X!==null&&me(L,X.startTime-q)}}var B=!1,T=-1,y=5,b=-1;function w(){return O?!0:!(e.unstable_now()-b<y)}function C(){if(O=!1,B){var q=e.unstable_now();b=q;var X=!0;try{t:{x=!1,V&&(V=!1,E(T),T=-1),_=!0;var Y=m;try{e:{for(D(q),g=n(u);g!==null&&!(g.expirationTime>q&&w());){var gt=g.callback;if(typeof gt=="function"){g.callback=null,m=g.priorityLevel;var xt=gt(g.expirationTime<=q);if(q=e.unstable_now(),typeof xt=="function"){g.callback=xt,D(q),X=!0;break e}g===n(u)&&i(u),D(q)}else i(u);g=n(u)}if(g!==null)X=!0;else{var pn=n(h);pn!==null&&me(L,pn.startTime-q),X=!1}}break t}finally{g=null,m=Y,_=!1}X=void 0}}finally{X?I():B=!1}}}var I;if(typeof R=="function")I=function(){R(C)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,yt=A.port2;A.port1.onmessage=C,I=function(){yt.postMessage(null)}}else I=function(){S(C,0)};function me(q,X){T=S(function(){q(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Y=m;m=X;try{return q()}finally{m=Y}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Y=m;m=q;try{return X()}finally{m=Y}},e.unstable_scheduleCallback=function(q,X,Y){var gt=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?gt+Y:gt):Y=gt,q){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=Y+xt,q={id:d++,callback:X,priorityLevel:q,startTime:Y,expirationTime:xt,sortIndex:-1},Y>gt?(q.sortIndex=Y,t(h,q),n(u)===null&&q===n(h)&&(V?(E(T),T=-1):V=!0,me(L,Y-gt))):(q.sortIndex=xt,t(u,q),x||_||(x=!0,B||(B=!0,I()))),q},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(q){var X=m;return function(){var Y=m;m=X;try{return q.apply(this,arguments)}finally{m=Y}}}})(Xv);Kv.exports=Xv;var s1=Kv.exports,$v={exports:{}},Ue={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=H;function Zv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ti(){}var Pe={d:{f:Ti,r:function(){throw Error(Zv(522))},D:Ti,C:Ti,L:Ti,m:Ti,X:Ti,S:Ti,M:Ti},p:0,findDOMNode:null},a1=Symbol.for("react.portal");function o1(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a1,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Za=r1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ue.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;Ue.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Zv(299));return o1(e,t,null,n)};Ue.flushSync=function(e){var t=Za.T,n=Pe.p;try{if(Za.T=null,Pe.p=2,e)return e()}finally{Za.T=t,Pe.p=n,Pe.d.f()}};Ue.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Pe.d.C(e,t))};Ue.prefetchDNS=function(e){typeof e=="string"&&Pe.d.D(e)};Ue.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Rc(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Pe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Pe.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ue.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Rc(t.as,t.crossOrigin);Pe.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Pe.d.M(e)};Ue.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Rc(n,t.crossOrigin);Pe.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ue.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Rc(t.as,t.crossOrigin);Pe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Pe.d.m(e)};Ue.requestFormReset=function(e){Pe.d.r(e)};Ue.unstable_batchedUpdates=function(e,t){return e(t)};Ue.useFormState=function(e,t,n){return Za.H.useFormState(e,t,n)};Ue.useFormStatus=function(){return Za.H.useHostTransitionStatus()};Ue.version="19.1.1";function Wv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wv)}catch(e){console.error(e)}}Wv(),$v.exports=Ue;var l1=$v.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oe=s1,Jv=H,u1=l1;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function e0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bp(e){if(Fo(e)!==e)throw Error(U(188))}function c1(e){var t=e.alternate;if(!t){if(t=Fo(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Bp(s),e;if(r===i)return Bp(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function n0(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=n0(e),t!==null)return t;e=e.sibling}return null}var Pt=Object.assign,h1=Symbol.for("react.element"),Ll=Symbol.for("react.transitional.element"),Ha=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),f1=Symbol.for("react.provider"),s0=Symbol.for("react.consumer"),$n=Symbol.for("react.context"),Xd=Symbol.for("react.forward_ref"),Af=Symbol.for("react.suspense"),Sf=Symbol.for("react.suspense_list"),$d=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),wf=Symbol.for("react.activity"),d1=Symbol.for("react.memo_cache_sentinel"),qp=Symbol.iterator;function ka(e){return e===null||typeof e!="object"?null:(e=qp&&e[qp]||e["@@iterator"],typeof e=="function"?e:null)}var m1=Symbol.for("react.client.reference");function Rf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===m1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case bf:return"Profiler";case i0:return"StrictMode";case Af:return"Suspense";case Sf:return"SuspenseList";case wf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ha:return"Portal";case $n:return(e.displayName||"Context")+".Provider";case s0:return(e._context.displayName||"Context")+".Consumer";case Xd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $d:return t=e.displayName||null,t!==null?t:Rf(e.type)||"Memo";case wi:t=e._payload,e=e._init;try{return Rf(e(t))}catch{}}return null}var Fa=Array.isArray,Z=Jv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=u1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ns={pending:!1,data:null,method:null,action:null},If=[],gr=-1;function zn(e){return{current:e}}function de(e){0>gr||(e.current=If[gr],If[gr]=null,gr--)}function jt(e,t){gr++,If[gr]=e.current,e.current=t}var Dn=zn(null),Eo=zn(null),zi=zn(null),Cu=zn(null);function Nu(e,t){switch(jt(zi,t),jt(Eo,e),jt(Dn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Yy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Yy(t),e=TT(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}de(Dn),jt(Dn,e)}function Br(){de(Dn),de(Eo),de(zi)}function Cf(e){e.memoizedState!==null&&jt(Cu,e);var t=Dn.current,n=TT(t,e.type);t!==n&&(jt(Eo,e),jt(Dn,n))}function xu(e){Eo.current===e&&(de(Dn),de(Eo)),Cu.current===e&&(de(Cu),xo._currentValue=Ns)}var Nf=Object.prototype.hasOwnProperty,Zd=oe.unstable_scheduleCallback,Nh=oe.unstable_cancelCallback,g1=oe.unstable_shouldYield,p1=oe.unstable_requestPaint,On=oe.unstable_now,y1=oe.unstable_getCurrentPriorityLevel,r0=oe.unstable_ImmediatePriority,a0=oe.unstable_UserBlockingPriority,Du=oe.unstable_NormalPriority,_1=oe.unstable_LowPriority,o0=oe.unstable_IdlePriority,v1=oe.log,E1=oe.unstable_setDisableYieldValue,Go=null,We=null;function Mi(e){if(typeof v1=="function"&&E1(e),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Go,e)}catch{}}var Je=Math.clz32?Math.clz32:A1,T1=Math.log,b1=Math.LN2;function A1(e){return e>>>=0,e===0?32:31-(T1(e)/b1|0)|0}var jl=256,zl=4194304;function Ss(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ic(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=Ss(i):(a&=l,a!==0?s=Ss(a):n||(n=l&~e,n!==0&&(s=Ss(n))))):(l=i&~r,l!==0?s=Ss(l):a!==0?s=Ss(a):n||(n=i&~e,n!==0&&(s=Ss(n)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:s}function Qo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function S1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l0(){var e=jl;return jl<<=1,!(jl&4194048)&&(jl=256),e}function u0(){var e=zl;return zl<<=1,!(zl&62914560)&&(zl=4194304),e}function xh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function w1(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,u=e.expirationTimes,h=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Je(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var _=m[d];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&c0(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function c0(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Je(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function h0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Je(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Wd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Jd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function f0(){var e=vt.p;return e!==0?e:(e=window.event,e===void 0?32:DT(e.type))}function R1(e,t){var n=vt.p;try{return vt.p=e,t()}finally{vt.p=n}}var hs=Math.random().toString(36).slice(2),Ne="__reactFiber$"+hs,qe="__reactProps$"+hs,aa="__reactContainer$"+hs,xf="__reactEvents$"+hs,I1="__reactListeners$"+hs,C1="__reactHandles$"+hs,Hp="__reactResources$"+hs,Ko="__reactMarker$"+hs;function tm(e){delete e[Ne],delete e[qe],delete e[xf],delete e[I1],delete e[C1]}function pr(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[Ne]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$y(e);e!==null;){if(n=e[Ne])return n;e=$y(e)}return t}e=n,n=e.parentNode}return null}function oa(e){if(e=e[Ne]||e[aa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Ir(e){var t=e[Hp];return t||(t=e[Hp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ce(e){e[Ko]=!0}var d0=new Set,m0={};function Qs(e,t){qr(e,t),qr(e+"Capture",t)}function qr(e,t){for(m0[e]=t,e=0;e<t.length;e++)d0.add(t[e])}var N1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fp={},Gp={};function x1(e){return Nf.call(Gp,e)?!0:Nf.call(Fp,e)?!1:N1.test(e)?Gp[e]=!0:(Fp[e]=!0,!1)}function su(e,t,n){if(x1(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Bl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Gn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Dh,Qp;function or(e){if(Dh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dh=t&&t[1]||"",Qp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dh+e+Qp}var Oh=!1;function Vh(e,t){if(!e||Oh)return"";Oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var m=_}Reflect.construct(e,[],g)}else{try{g.call()}catch(_){m=_}e.call(g.prototype)}}else{try{throw Error()}catch(_){m=_}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=s);break}}}finally{Oh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?or(n):""}function D1(e){switch(e.tag){case 26:case 27:case 5:return or(e.type);case 16:return or("Lazy");case 13:return or("Suspense");case 19:return or("SuspenseList");case 0:case 15:return Vh(e.type,!1);case 11:return Vh(e.type.render,!1);case 1:return Vh(e.type,!0);case 31:return or("Activity");default:return""}}function Yp(e){try{var t="";do t+=D1(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function g0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O1(e){var t=g0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ou(e){e._valueTracker||(e._valueTracker=O1(e))}function p0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=g0(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Vu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var V1=/[\n"\\]/g;function cn(e){return e.replace(V1,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Df(e,t,n,i,s,r,a,l){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+on(t)):e.value!==""+on(t)&&(e.value=""+on(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Of(e,a,on(t)):n!=null?Of(e,a,on(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+on(l):e.removeAttribute("name")}function y0(e,t,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+on(n):"",t=t!=null?""+on(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Of(e,t,n){t==="number"&&Vu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Cr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _0(e,t,n){if(t!=null&&(t=""+on(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+on(n):""}function v0(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(U(92));if(Fa(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=on(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Hr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var M1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||M1.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function E0(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&Kp(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&Kp(e,r,t[r])}function em(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),P1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(e){return P1.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Vf=null;function nm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yr=null,Nr=null;function Xp(e){var t=oa(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;t:switch(e=t.stateNode,t.type){case"input":if(Df(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[qe]||null;if(!s)throw Error(U(90));Df(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&p0(i)}break t;case"textarea":_0(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}}}var Mh=!1;function T0(e,t,n){if(Mh)return e(t,n);Mh=!0;try{var i=e(t);return i}finally{if(Mh=!1,(yr!==null||Nr!==null)&&(Uc(),yr&&(t=yr,e=Nr,Nr=yr=null,Xp(t),e)))for(t=0;t<e.length;t++)Xp(e[t])}}function To(e,t){var n=e.stateNode;if(n===null)return null;var i=n[qe]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mf=!1;if(ai)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Mf=!1}var ki=null,im=null,au=null;function b0(){if(au)return au;var e,t=im,n=t.length,i,s="value"in ki?ki.value:ki.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return au=s.slice(e,1<i?1-i:void 0)}function ou(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ql(){return!0}function $p(){return!1}function He(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ql:$p,this.isPropagationStopped=$p,this}return Pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),t}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=He(Ys),Xo=Pt({},Ys,{view:0,detail:0}),U1=He(Xo),kh,Ph,Ua,Nc=Pt({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ua&&(Ua&&e.type==="mousemove"?(kh=e.screenX-Ua.screenX,Ph=e.screenY-Ua.screenY):Ph=kh=0,Ua=e),kh)},movementY:function(e){return"movementY"in e?e.movementY:Ph}}),Zp=He(Nc),L1=Pt({},Nc,{dataTransfer:0}),j1=He(L1),z1=Pt({},Xo,{relatedTarget:0}),Uh=He(z1),B1=Pt({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),q1=He(B1),H1=Pt({},Ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F1=He(H1),G1=Pt({},Ys,{data:0}),Wp=He(G1),Q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=K1[e])?!!t[e]:!1}function sm(){return X1}var $1=Pt({},Xo,{key:function(e){if(e.key){var t=Q1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ou(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Y1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sm,charCode:function(e){return e.type==="keypress"?ou(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ou(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Z1=He($1),W1=Pt({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jp=He(W1),J1=Pt({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sm}),tw=He(J1),ew=Pt({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=He(ew),iw=Pt({},Nc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=He(iw),rw=Pt({},Ys,{newState:0,oldState:0}),aw=He(rw),ow=[9,13,27,32],rm=ai&&"CompositionEvent"in window,Wa=null;ai&&"documentMode"in document&&(Wa=document.documentMode);var lw=ai&&"TextEvent"in window&&!Wa,A0=ai&&(!rm||Wa&&8<Wa&&11>=Wa),ty=" ",ey=!1;function S0(e,t){switch(e){case"keyup":return ow.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function uw(e,t){switch(e){case"compositionend":return w0(t);case"keypress":return t.which!==32?null:(ey=!0,ty);case"textInput":return e=t.data,e===ty&&ey?null:e;default:return null}}function cw(e,t){if(_r)return e==="compositionend"||!rm&&S0(e,t)?(e=b0(),au=im=ki=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return A0&&t.locale!=="ko"?null:t.data;default:return null}}var hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hw[e.type]:t==="textarea"}function R0(e,t,n,i){yr?Nr?Nr.push(i):Nr=[i]:yr=i,t=Zu(t,"onChange"),0<t.length&&(n=new Cc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ja=null,bo=null;function fw(e){_T(e,0)}function xc(e){var t=Ga(e);if(p0(t))return e}function iy(e,t){if(e==="change")return t}var I0=!1;if(ai){var Lh;if(ai){var jh="oninput"in document;if(!jh){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),jh=typeof sy.oninput=="function"}Lh=jh}else Lh=!1;I0=Lh&&(!document.documentMode||9<document.documentMode)}function ry(){Ja&&(Ja.detachEvent("onpropertychange",C0),bo=Ja=null)}function C0(e){if(e.propertyName==="value"&&xc(bo)){var t=[];R0(t,bo,e,nm(e)),T0(fw,t)}}function dw(e,t,n){e==="focusin"?(ry(),Ja=t,bo=n,Ja.attachEvent("onpropertychange",C0)):e==="focusout"&&ry()}function mw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xc(bo)}function gw(e,t){if(e==="click")return xc(t)}function pw(e,t){if(e==="input"||e==="change")return xc(t)}function yw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:yw;function Ao(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Nf.call(t,s)||!rn(e[s],t[s]))return!1}return!0}function ay(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oy(e,t){var n=ay(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=ay(n)}}function N0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vu(e.document)}return t}function am(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var _w=ai&&"documentMode"in document&&11>=document.documentMode,vr=null,kf=null,to=null,Pf=!1;function ly(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pf||vr==null||vr!==Vu(i)||(i=vr,"selectionStart"in i&&am(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),to&&Ao(to,i)||(to=i,i=Zu(kf,"onSelect"),0<i.length&&(t=new Cc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=vr)))}function As(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},zh={},D0={};ai&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function Ks(e){if(zh[e])return zh[e];if(!Er[e])return e;var t=Er[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in D0)return zh[e]=t[n];return e}var O0=Ks("animationend"),V0=Ks("animationiteration"),M0=Ks("animationstart"),vw=Ks("transitionrun"),Ew=Ks("transitionstart"),Tw=Ks("transitioncancel"),k0=Ks("transitionend"),P0=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function Sn(e,t){P0.set(e,t),Qs(t,[e])}var uy=new WeakMap;function hn(e,t){if(typeof e=="object"&&e!==null){var n=uy.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Yp(t)},uy.set(e,t),t)}return{value:e,source:t,stack:Yp(t)}}var an=[],Tr=0,om=0;function Dc(){for(var e=Tr,t=om=Tr=0;t<e;){var n=an[t];an[t++]=null;var i=an[t];an[t++]=null;var s=an[t];an[t++]=null;var r=an[t];if(an[t++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&U0(n,s,r)}}function Oc(e,t,n,i){an[Tr++]=e,an[Tr++]=t,an[Tr++]=n,an[Tr++]=i,om|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function lm(e,t,n,i){return Oc(e,t,n,i),Mu(e)}function la(e,t){return Oc(e,null,null,t),Mu(e)}function U0(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-Je(n),e=r.hiddenUpdates,i=e[s],i===null?e[s]=[t]:i.push(t),t.lane=n|536870912),r):null}function Mu(e){if(50<co)throw co=0,sd=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var br={};function bw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,t,n,i){return new bw(e,t,n,i)}function um(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ii(e,t){var n=e.alternate;return n===null?(n=Xe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function L0(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function lu(e,t,n,i,s,r){var a=0;if(i=e,typeof e=="function")um(e)&&(a=1);else if(typeof e=="string")a=S2(e,n,Dn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case wf:return e=Xe(31,n,t,s),e.elementType=wf,e.lanes=r,e;case mr:return xs(n.children,s,r,t);case i0:a=8,s|=24;break;case bf:return e=Xe(12,n,t,s|2),e.elementType=bf,e.lanes=r,e;case Af:return e=Xe(13,n,t,s),e.elementType=Af,e.lanes=r,e;case Sf:return e=Xe(19,n,t,s),e.elementType=Sf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case f1:case $n:a=10;break t;case s0:a=9;break t;case Xd:a=11;break t;case $d:a=14;break t;case wi:a=16,i=null;break t}a=29,n=Error(U(130,e===null?"null":typeof e,"")),i=null}return t=Xe(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function xs(e,t,n,i){return e=Xe(7,e,i,t),e.lanes=n,e}function Bh(e,t,n){return e=Xe(6,e,null,t),e.lanes=n,e}function qh(e,t,n){return t=Xe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ar=[],Sr=0,ku=null,Pu=0,ln=[],un=0,Ds=null,Zn=1,Wn="";function ws(e,t){Ar[Sr++]=Pu,Ar[Sr++]=ku,ku=e,Pu=t}function j0(e,t,n){ln[un++]=Zn,ln[un++]=Wn,ln[un++]=Ds,Ds=e;var i=Zn;e=Wn;var s=32-Je(i)-1;i&=~(1<<s),n+=1;var r=32-Je(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Zn=1<<32-Je(t)+s|n<<s|i,Wn=r+e}else Zn=1<<r|n<<s|i,Wn=e}function cm(e){e.return!==null&&(ws(e,1),j0(e,1,0))}function hm(e){for(;e===ku;)ku=Ar[--Sr],Ar[Sr]=null,Pu=Ar[--Sr],Ar[Sr]=null;for(;e===Ds;)Ds=ln[--un],ln[un]=null,Wn=ln[--un],ln[un]=null,Zn=ln[--un],ln[un]=null}var Me=null,Gt=null,_t=!1,Os=null,Nn=!1,Lf=Error(U(519));function Ps(e){var t=Error(U(418,""));throw So(hn(t,e)),Lf}function cy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[qe]=i,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<Io.length;n++)rt(Io[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),y0(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ou(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),v0(t,i.value,i.defaultValue,i.children),Ou(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||ET(t.textContent,n)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=zc),t=!0):t=!1,t||Ps(e)}function hy(e){for(Me=e.return;Me;)switch(Me.tag){case 5:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Me=Me.return}}function La(e){if(e!==Me)return!1;if(!_t)return hy(e),_t=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||cd(e.type,e.memoizedProps)),n=!n),n&&Gt&&Ps(e),hy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Gt=Tn(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Gt=null}}else t===27?(t=Gt,fs(e.type)?(e=dd,dd=null,Gt=e):Gt=t):Gt=Me?Tn(e.stateNode.nextSibling):null;return!0}function $o(){Gt=Me=null,_t=!1}function fy(){var e=Os;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),Os=null),e}function So(e){Os===null?Os=[e]:Os.push(e)}var jf=zn(null),Xs=null,Jn=null;function Ii(e,t,n){jt(jf,t._currentValue),t._currentValue=n}function si(e){e._currentValue=jf.current,de(jf)}function zf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Bf(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;t:for(;r!==null;){var l=r;r=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),zf(r.return,n,e),i||(a=null);break t}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),zf(a,n,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Zo(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;rn(s.pendingProps.value,a.value)||(e!==null?e.push(l):e=[l])}}else if(s===Cu.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(xo):e=[xo])}s=s.return}e!==null&&Bf(t,e,n,i),t.flags|=262144}function Uu(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Us(e){Xs=e,Jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xe(e){return z0(Xs,e)}function Hl(e,t){return Xs===null&&Us(e),z0(e,t)}function z0(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Jn===null){if(e===null)throw Error(U(308));Jn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Jn=Jn.next=t;return n}var Aw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Sw=oe.unstable_scheduleCallback,ww=oe.unstable_NormalPriority,se={$$typeof:$n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fm(){return{controller:new Aw,data:new Map,refCount:0}}function Wo(e){e.refCount--,e.refCount===0&&Sw(ww,function(){e.controller.abort()})}var eo=null,qf=0,Fr=0,xr=null;function Rw(e,t){if(eo===null){var n=eo=[];qf=0,Fr=km(),xr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return qf++,t.then(dy,dy),t}function dy(){if(--qf===0&&eo!==null){xr!==null&&(xr.status="fulfilled");var e=eo;eo=null,Fr=0,xr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Iw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var my=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Rw(e,t),my!==null&&my(e,t)};var Vs=zn(null);function dm(){var e=Vs.current;return e!==null?e:Vt.pooledCache}function uu(e,t){t===null?jt(Vs,Vs.current):jt(Vs,t.pool)}function B0(){var e=dm();return e===null?null:{parent:se._currentValue,pool:e}}var Jo=Error(U(460)),q0=Error(U(474)),Vc=Error(U(542)),Hf={then:function(){}};function gy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fl(){}function H0(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Fl,Fl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yy(e),e;default:if(typeof t.status=="string")t.then(Fl,Fl);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yy(e),e}throw no=t,Jo}}var no=null;function py(){if(no===null)throw Error(U(459));var e=no;return no=null,e}function yy(e){if(e===Jo||e===Vc)throw Error(U(483))}var Ri=!1;function mm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ff(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,wt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Mu(e),U0(e,null,n),t}return Oc(e,i,t,n),Mu(e)}function io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,h0(e,n)}}function Hh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Gf=!1;function so(){if(Gf){var e=xr;if(e!==null)throw e}}function ro(e,t,n,i){Gf=!1;var s=e.updateQueue;Ri=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,_=m!==l.lane;if(_?(dt&m)===m:(i&m)===m){m!==0&&m===Fr&&(Gf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var x=e,V=l;m=t;var O=n;switch(V.tag){case 1:if(x=V.payload,typeof x=="function"){g=x.call(O,g,m);break t}g=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=V.payload,m=typeof x=="function"?x.call(O,g,m):x,m==null)break t;g=Pt({},g,m);break t;case 2:Ri=!0}}m=l.callback,m!==null&&(e.flags|=64,_&&(e.flags|=8192),_=s.callbacks,_===null?s.callbacks=[m]:_.push(m))}else _={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=g):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);d===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),is|=a,e.lanes=a,e.memoizedState=g}}function F0(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function G0(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)F0(n[e],t)}var Gr=zn(null),Lu=zn(0);function _y(e,t){e=ui,jt(Lu,e),jt(Gr,t),ui=e|t.baseLanes}function Qf(){jt(Lu,ui),jt(Gr,Gr.current)}function gm(){ui=Lu.current,de(Gr),de(Lu)}var es=0,it=null,Ct=null,Wt=null,ju=!1,Dr=!1,Ls=!1,zu=0,wo=0,Or=null,Cw=0;function Yt(){throw Error(U(321))}function pm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function ym(e,t,n,i,s,r){return es=r,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?bE:AE,Ls=!1,r=n(i,s),Ls=!1,Dr&&(r=Y0(t,n,i,s)),Q0(e),r}function Q0(e){Z.H=Bu;var t=Ct!==null&&Ct.next!==null;if(es=0,Wt=Ct=it=null,ju=!1,wo=0,Or=null,t)throw Error(U(300));e===null||fe||(e=e.dependencies,e!==null&&Uu(e)&&(fe=!0))}function Y0(e,t,n,i){it=e;var s=0;do{if(Dr&&(Or=null),wo=0,Dr=!1,25<=s)throw Error(U(301));if(s+=1,Wt=Ct=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Z.H=kw,r=t(n,i)}while(Dr);return r}function Nw(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?tl(t):t,e=e.useState()[0],(Ct!==null?Ct.memoizedState:null)!==e&&(it.flags|=1024),t}function _m(){var e=zu!==0;return zu=0,e}function vm(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Em(e){if(ju){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ju=!1}es=0,Wt=Ct=it=null,Dr=!1,wo=zu=0,Or=null}function Le(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?it.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function ee(){if(Ct===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=Wt===null?it.memoizedState:Wt.next;if(t!==null)Wt=t,Ct=e;else{if(e===null)throw it.alternate===null?Error(U(467)):Error(U(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Wt===null?it.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Tm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(e){var t=wo;return wo+=1,Or===null&&(Or=[]),e=H0(Or,e,t),t=it,(Wt===null?t.memoizedState:Wt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?bE:AE),e}function Mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tl(e);if(e.$$typeof===$n)return xe(e)}throw Error(U(438,String(e)))}function bm(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Tm(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=d1;return t.index++,n}function oi(e,t){return typeof t=="function"?t(e):t}function cu(e){var t=ee();return Am(t,Ct,e)}function Am(e,t,n){var i=e.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var l=a=null,u=null,h=t,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(dt&g)===g:(es&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Fr&&(d=!0);else if((es&m)===m){h=h.next,m===Fr&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,it.lanes|=m,is|=m;g=h.action,Ls&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,it.lanes|=g,is|=g;h=h.next}while(h!==null&&h!==t);if(u===null?a=r:u.next=l,!rn(r,e.memoizedState)&&(fe=!0,d&&(n=xr,n!==null)))throw n;e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Fh(e){var t=ee(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);rn(r,t.memoizedState)||(fe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function K0(e,t,n){var i=it,s=ee(),r=_t;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=t();var a=!rn((Ct||s).memoizedState,n);a&&(s.memoizedState=n,fe=!0),s=s.queue;var l=Z0.bind(null,i,s,e);if(el(2048,8,l,[e]),s.getSnapshot!==t||a||Wt!==null&&Wt.memoizedState.tag&1){if(i.flags|=2048,Qr(9,kc(),$0.bind(null,i,s,n,t),null),Vt===null)throw Error(U(349));r||es&124||X0(i,t,n)}return n}function X0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=Tm(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $0(e,t,n,i){t.value=n,t.getSnapshot=i,W0(t)&&J0(e)}function Z0(e,t,n){return n(function(){W0(t)&&J0(e)})}function W0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function J0(e){var t=la(e,2);t!==null&&en(t,e,2)}function Yf(e){var t=Le();if(typeof e=="function"){var n=e;if(e=n(),Ls){Mi(!0);try{n()}finally{Mi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t}function tE(e,t,n,i){return e.baseState=n,Am(e,Ct,typeof i=="function"?i:oi)}function xw(e,t,n,i,s){if(Pc(e))throw Error(U(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};Z.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,eE(t,r)):(r.next=n.next,t.pending=n.next=r)}}function eE(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=Z.T,a={};Z.T=a;try{var l=n(s,i),u=Z.S;u!==null&&u(a,l),vy(e,t,l)}catch(h){Kf(e,t,h)}finally{Z.T=r}}else try{r=n(s,i),vy(e,t,r)}catch(h){Kf(e,t,h)}}function vy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ey(e,t,i)},function(i){return Kf(e,t,i)}):Ey(e,t,n)}function Ey(e,t,n){t.status="fulfilled",t.value=n,nE(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,eE(e,n)))}function Kf(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,nE(t),t=t.next;while(t!==i)}e.action=null}function nE(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function iE(e,t){return t}function Ty(e,t){if(_t){var n=Vt.formState;if(n!==null){t:{var i=it;if(_t){if(Gt){e:{for(var s=Gt,r=Nn;s.nodeType!==8;){if(!r){s=null;break e}if(s=Tn(s.nextSibling),s===null){s=null;break e}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Gt=Tn(s.nextSibling),i=s.data==="F!";break t}}Ps(i)}i=!1}i&&(t=n[0])}}return n=Le(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iE,lastRenderedState:t},n.queue=i,n=vE.bind(null,it,i),i.dispatch=n,i=Yf(!1),r=Im.bind(null,it,!1,i.queue),i=Le(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=xw.bind(null,it,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function by(e){var t=ee();return sE(t,Ct,e)}function sE(e,t,n){if(t=Am(e,t,iE)[0],e=cu(oi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=tl(t)}catch(a){throw a===Jo?Vc:a}else i=t;t=ee();var s=t.queue,r=s.dispatch;return n!==t.memoizedState&&(it.flags|=2048,Qr(9,kc(),Dw.bind(null,s,n),null)),[i,r,e]}function Dw(e,t){e.action=t}function Ay(e){var t=ee(),n=Ct;if(n!==null)return sE(t,n,e);ee(),t=t.memoizedState,n=ee();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Qr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=Tm(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function kc(){return{destroy:void 0,resource:void 0}}function rE(){return ee().memoizedState}function hu(e,t,n,i){var s=Le();i=i===void 0?null:i,it.flags|=e,s.memoizedState=Qr(1|t,kc(),n,i)}function el(e,t,n,i){var s=ee();i=i===void 0?null:i;var r=s.memoizedState.inst;Ct!==null&&i!==null&&pm(i,Ct.memoizedState.deps)?s.memoizedState=Qr(t,r,n,i):(it.flags|=e,s.memoizedState=Qr(1|t,r,n,i))}function Sy(e,t){hu(8390656,8,e,t)}function aE(e,t){el(2048,8,e,t)}function oE(e,t){return el(4,2,e,t)}function lE(e,t){return el(4,4,e,t)}function uE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cE(e,t,n){n=n!=null?n.concat([e]):null,el(4,4,uE.bind(null,t,e),n)}function Sm(){}function hE(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&pm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function fE(e,t){var n=ee();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&pm(t,i[1]))return i[0];if(i=e(),Ls){Mi(!0);try{e()}finally{Mi(!1)}}return n.memoizedState=[i,t],i}function wm(e,t,n){return n===void 0||es&1073741824?e.memoizedState=t:(e.memoizedState=n,e=nT(),it.lanes|=e,is|=e,n)}function dE(e,t,n,i){return rn(n,t)?n:Gr.current!==null?(e=wm(e,n,i),rn(e,t)||(fe=!0),e):es&42?(e=nT(),it.lanes|=e,is|=e,t):(fe=!0,e.memoizedState=n)}function mE(e,t,n,i,s){var r=vt.p;vt.p=r!==0&&8>r?r:8;var a=Z.T,l={};Z.T=l,Im(e,!1,t,n);try{var u=s(),h=Z.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=Iw(u,i);ao(e,t,d,tn(e))}else ao(e,t,i,tn(e))}catch(g){ao(e,t,{then:function(){},status:"rejected",reason:g},tn())}finally{vt.p=r,Z.T=a}}function Ow(){}function Xf(e,t,n,i){if(e.tag!==5)throw Error(U(476));var s=gE(e).queue;mE(e,s,t,Ns,n===null?Ow:function(){return pE(e),n(i)})}function gE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ns,baseState:Ns,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:Ns},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pE(e){var t=gE(e).next.queue;ao(e,t,{},tn())}function Rm(){return xe(xo)}function yE(){return ee().memoizedState}function _E(){return ee().memoizedState}function Vw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=tn();e=Bi(n);var i=qi(t,e,n);i!==null&&(en(i,t,n),io(i,t,n)),t={cache:fm()},e.payload=t;return}t=t.return}}function Mw(e,t,n){var i=tn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Pc(e)?EE(t,n):(n=lm(e,t,n,i),n!==null&&(en(n,e,i),TE(n,t,i)))}function vE(e,t,n){var i=tn();ao(e,t,n,i)}function ao(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pc(e))EE(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,rn(l,a))return Oc(e,t,s,0),Vt===null&&Dc(),!1}catch{}finally{}if(n=lm(e,t,s,i),n!==null)return en(n,e,i),TE(n,t,i),!0}return!1}function Im(e,t,n,i){if(i={lane:2,revertLane:km(),action:i,hasEagerState:!1,eagerState:null,next:null},Pc(e)){if(t)throw Error(U(479))}else t=lm(e,n,i,2),t!==null&&en(t,e,2)}function Pc(e){var t=e.alternate;return e===it||t!==null&&t===it}function EE(e,t){Dr=ju=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function TE(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,h0(e,n)}}var Bu={readContext:xe,use:Mc,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},bE={readContext:xe,use:Mc,useCallback:function(e,t){return Le().memoizedState=[e,t===void 0?null:t],e},useContext:xe,useEffect:Sy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,hu(4194308,4,uE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hu(4194308,4,e,t)},useInsertionEffect:function(e,t){hu(4,2,e,t)},useMemo:function(e,t){var n=Le();t=t===void 0?null:t;var i=e();if(Ls){Mi(!0);try{e()}finally{Mi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Le();if(n!==void 0){var s=n(t);if(Ls){Mi(!0);try{n(t)}finally{Mi(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=Mw.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Le();return e={current:e},t.memoizedState=e},useState:function(e){e=Yf(e);var t=e.queue,n=vE.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Sm,useDeferredValue:function(e,t){var n=Le();return wm(n,e,t)},useTransition:function(){var e=Yf(!1);return e=mE.bind(null,it,e.queue,!0,!1),Le().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=it,s=Le();if(_t){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Vt===null)throw Error(U(349));dt&124||X0(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,Sy(Z0.bind(null,i,r,e),[e]),i.flags|=2048,Qr(9,kc(),$0.bind(null,i,r,n,t),null),n},useId:function(){var e=Le(),t=Vt.identifierPrefix;if(_t){var n=Wn,i=Zn;n=(i&~(1<<32-Je(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=zu++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Cw++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Rm,useFormState:Ty,useActionState:Ty,useOptimistic:function(e){var t=Le();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Im.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:bm,useCacheRefresh:function(){return Le().memoizedState=Vw.bind(null,it)}},AE={readContext:xe,use:Mc,useCallback:hE,useContext:xe,useEffect:aE,useImperativeHandle:cE,useInsertionEffect:oE,useLayoutEffect:lE,useMemo:fE,useReducer:cu,useRef:rE,useState:function(){return cu(oi)},useDebugValue:Sm,useDeferredValue:function(e,t){var n=ee();return dE(n,Ct.memoizedState,e,t)},useTransition:function(){var e=cu(oi)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:K0,useId:yE,useHostTransitionStatus:Rm,useFormState:by,useActionState:by,useOptimistic:function(e,t){var n=ee();return tE(n,Ct,e,t)},useMemoCache:bm,useCacheRefresh:_E},kw={readContext:xe,use:Mc,useCallback:hE,useContext:xe,useEffect:aE,useImperativeHandle:cE,useInsertionEffect:oE,useLayoutEffect:lE,useMemo:fE,useReducer:Fh,useRef:rE,useState:function(){return Fh(oi)},useDebugValue:Sm,useDeferredValue:function(e,t){var n=ee();return Ct===null?wm(n,e,t):dE(n,Ct.memoizedState,e,t)},useTransition:function(){var e=Fh(oi)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:K0,useId:yE,useHostTransitionStatus:Rm,useFormState:Ay,useActionState:Ay,useOptimistic:function(e,t){var n=ee();return Ct!==null?tE(n,Ct,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:bm,useCacheRefresh:_E},Vr=null,Ro=0;function Gl(e){var t=Ro;return Ro+=1,Vr===null&&(Vr=[]),H0(Vr,e,t)}function ja(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ql(e,t){throw t.$$typeof===h1?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wy(e){var t=e._init;return t(e._payload)}function SE(e){function t(S,E){if(e){var R=S.deletions;R===null?(S.deletions=[E],S.flags|=16):R.push(E)}}function n(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function i(S){for(var E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function s(S,E){return S=ii(S,E),S.index=0,S.sibling=null,S}function r(S,E,R){return S.index=R,e?(R=S.alternate,R!==null?(R=R.index,R<E?(S.flags|=67108866,E):R):(S.flags|=67108866,E)):(S.flags|=1048576,E)}function a(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function l(S,E,R,D){return E===null||E.tag!==6?(E=Bh(R,S.mode,D),E.return=S,E):(E=s(E,R),E.return=S,E)}function u(S,E,R,D){var L=R.type;return L===mr?d(S,E,R.props.children,D,R.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wi&&wy(L)===E.type)?(E=s(E,R.props),ja(E,R),E.return=S,E):(E=lu(R.type,R.key,R.props,null,S.mode,D),ja(E,R),E.return=S,E)}function h(S,E,R,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=qh(R,S.mode,D),E.return=S,E):(E=s(E,R.children||[]),E.return=S,E)}function d(S,E,R,D,L){return E===null||E.tag!==7?(E=xs(R,S.mode,D,L),E.return=S,E):(E=s(E,R),E.return=S,E)}function g(S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Bh(""+E,S.mode,R),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ll:return R=lu(E.type,E.key,E.props,null,S.mode,R),ja(R,E),R.return=S,R;case Ha:return E=qh(E,S.mode,R),E.return=S,E;case wi:var D=E._init;return E=D(E._payload),g(S,E,R)}if(Fa(E)||ka(E))return E=xs(E,S.mode,R,null),E.return=S,E;if(typeof E.then=="function")return g(S,Gl(E),R);if(E.$$typeof===$n)return g(S,Hl(S,E),R);Ql(S,E)}return null}function m(S,E,R,D){var L=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return L!==null?null:l(S,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ll:return R.key===L?u(S,E,R,D):null;case Ha:return R.key===L?h(S,E,R,D):null;case wi:return L=R._init,R=L(R._payload),m(S,E,R,D)}if(Fa(R)||ka(R))return L!==null?null:d(S,E,R,D,null);if(typeof R.then=="function")return m(S,E,Gl(R),D);if(R.$$typeof===$n)return m(S,E,Hl(S,R),D);Ql(S,R)}return null}function _(S,E,R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(R)||null,l(E,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ll:return S=S.get(D.key===null?R:D.key)||null,u(E,S,D,L);case Ha:return S=S.get(D.key===null?R:D.key)||null,h(E,S,D,L);case wi:var B=D._init;return D=B(D._payload),_(S,E,R,D,L)}if(Fa(D)||ka(D))return S=S.get(R)||null,d(E,S,D,L,null);if(typeof D.then=="function")return _(S,E,R,Gl(D),L);if(D.$$typeof===$n)return _(S,E,R,Hl(E,D),L);Ql(E,D)}return null}function x(S,E,R,D){for(var L=null,B=null,T=E,y=E=0,b=null;T!==null&&y<R.length;y++){T.index>y?(b=T,T=null):b=T.sibling;var w=m(S,T,R[y],D);if(w===null){T===null&&(T=b);break}e&&T&&w.alternate===null&&t(S,T),E=r(w,E,y),B===null?L=w:B.sibling=w,B=w,T=b}if(y===R.length)return n(S,T),_t&&ws(S,y),L;if(T===null){for(;y<R.length;y++)T=g(S,R[y],D),T!==null&&(E=r(T,E,y),B===null?L=T:B.sibling=T,B=T);return _t&&ws(S,y),L}for(T=i(T);y<R.length;y++)b=_(T,S,y,R[y],D),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?y:b.key),E=r(b,E,y),B===null?L=b:B.sibling=b,B=b);return e&&T.forEach(function(C){return t(S,C)}),_t&&ws(S,y),L}function V(S,E,R,D){if(R==null)throw Error(U(151));for(var L=null,B=null,T=E,y=E=0,b=null,w=R.next();T!==null&&!w.done;y++,w=R.next()){T.index>y?(b=T,T=null):b=T.sibling;var C=m(S,T,w.value,D);if(C===null){T===null&&(T=b);break}e&&T&&C.alternate===null&&t(S,T),E=r(C,E,y),B===null?L=C:B.sibling=C,B=C,T=b}if(w.done)return n(S,T),_t&&ws(S,y),L;if(T===null){for(;!w.done;y++,w=R.next())w=g(S,w.value,D),w!==null&&(E=r(w,E,y),B===null?L=w:B.sibling=w,B=w);return _t&&ws(S,y),L}for(T=i(T);!w.done;y++,w=R.next())w=_(T,S,y,w.value,D),w!==null&&(e&&w.alternate!==null&&T.delete(w.key===null?y:w.key),E=r(w,E,y),B===null?L=w:B.sibling=w,B=w);return e&&T.forEach(function(I){return t(S,I)}),_t&&ws(S,y),L}function O(S,E,R,D){if(typeof R=="object"&&R!==null&&R.type===mr&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ll:t:{for(var L=R.key;E!==null;){if(E.key===L){if(L=R.type,L===mr){if(E.tag===7){n(S,E.sibling),D=s(E,R.props.children),D.return=S,S=D;break t}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wi&&wy(L)===E.type){n(S,E.sibling),D=s(E,R.props),ja(D,R),D.return=S,S=D;break t}n(S,E);break}else t(S,E);E=E.sibling}R.type===mr?(D=xs(R.props.children,S.mode,D,R.key),D.return=S,S=D):(D=lu(R.type,R.key,R.props,null,S.mode,D),ja(D,R),D.return=S,S=D)}return a(S);case Ha:t:{for(L=R.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(S,E.sibling),D=s(E,R.children||[]),D.return=S,S=D;break t}else{n(S,E);break}else t(S,E);E=E.sibling}D=qh(R,S.mode,D),D.return=S,S=D}return a(S);case wi:return L=R._init,R=L(R._payload),O(S,E,R,D)}if(Fa(R))return x(S,E,R,D);if(ka(R)){if(L=ka(R),typeof L!="function")throw Error(U(150));return R=L.call(R),V(S,E,R,D)}if(typeof R.then=="function")return O(S,E,Gl(R),D);if(R.$$typeof===$n)return O(S,E,Hl(S,R),D);Ql(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(S,E.sibling),D=s(E,R),D.return=S,S=D):(n(S,E),D=Bh(R,S.mode,D),D.return=S,S=D),a(S)):n(S,E)}return function(S,E,R,D){try{Ro=0;var L=O(S,E,R,D);return Vr=null,L}catch(T){if(T===Jo||T===Vc)throw T;var B=Xe(29,T,null,S.mode);return B.lanes=D,B.return=S,B}finally{}}}var Yr=SE(!0),wE=SE(!1),mn=zn(null),Vn=null;function Ci(e){var t=e.alternate;jt(re,re.current&1),jt(mn,e),Vn===null&&(t===null||Gr.current!==null||t.memoizedState!==null)&&(Vn=e)}function RE(e){if(e.tag===22){if(jt(re,re.current),jt(mn,e),Vn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vn=e)}}else Ni()}function Ni(){jt(re,re.current),jt(mn,mn.current)}function ti(e){de(mn),Vn===e&&(Vn=null),de(re)}var re=zn(0);function qu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||fd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Gh(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $f={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tn(),s=Bi(i);s.payload=t,n!=null&&(s.callback=n),t=qi(e,s,i),t!==null&&(en(t,e,i),io(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tn(),s=Bi(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=qi(e,s,i),t!==null&&(en(t,e,i),io(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tn(),i=Bi(n);i.tag=2,t!=null&&(i.callback=t),t=qi(e,i,n),t!==null&&(en(t,e,n),io(t,e,n))}};function Ry(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!Ao(n,i)||!Ao(s,r):!0}function Iy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&$f.enqueueReplaceState(t,t.state,null)}function js(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Pt({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var Hu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function IE(e){Hu(e)}function CE(e){console.error(e)}function NE(e){Hu(e)}function Fu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Cy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Zf(e,t,n){return n=Bi(n),n.tag=3,n.payload={element:null},n.callback=function(){Fu(e,t)},n}function xE(e){return e=Bi(e),e.tag=3,e}function DE(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Cy(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Cy(t,n,i),typeof s!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function Pw(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Zo(t,n,s,!0),n=mn.current,n!==null){switch(n.tag){case 13:return Vn===null?rd():n.alternate===null&&Qt===0&&(Qt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Hf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),nf(e,i,s)),!1;case 22:return n.flags|=65536,i===Hf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),nf(e,i,s)),!1}throw Error(U(435,n.tag))}return nf(e,i,s),rd(),!1}if(_t)return t=mn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Lf&&(e=Error(U(422),{cause:i}),So(hn(e,n)))):(i!==Lf&&(t=Error(U(423),{cause:i}),So(hn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=hn(i,n),s=Zf(e.stateNode,i,s),Hh(e,s),Qt!==4&&(Qt=2)),!1;var r=Error(U(520),{cause:i});if(r=hn(r,n),uo===null?uo=[r]:uo.push(r),Qt!==4&&(Qt=2),t===null)return!0;i=hn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Zf(n.stateNode,i,e),Hh(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Hi===null||!Hi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=xE(s),DE(s,e,n,i),Hh(n,s),!1}n=n.return}while(n!==null);return!1}var OE=Error(U(461)),fe=!1;function pe(e,t,n,i){t.child=e===null?wE(t,null,n,i):Yr(t,e.child,n,i)}function Ny(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Us(t),i=ym(e,t,n,a,r,s),l=_m(),e!==null&&!fe?(vm(e,t,s),li(e,t,s)):(_t&&l&&cm(t),t.flags|=1,pe(e,t,i,s),t.child)}function xy(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!um(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,VE(e,t,r,i,s)):(e=lu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Cm(e,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(a,i)&&e.ref===t.ref)return li(e,t,s)}return t.flags|=1,e=ii(r,i),e.ref=t.ref,e.return=t,t.child=e}function VE(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(Ao(r,i)&&e.ref===t.ref)if(fe=!1,t.pendingProps=i=r,Cm(e,s))e.flags&131072&&(fe=!0);else return t.lanes=e.lanes,li(e,t,s)}return Wf(e,t,n,i,s)}function ME(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Dy(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&uu(t,r!==null?r.cachePool:null),r!==null?_y(t,r):Qf(),RE(t);else return t.lanes=t.childLanes=536870912,Dy(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(uu(t,r.cachePool),_y(t,r),Ni(),t.memoizedState=null):(e!==null&&uu(t,null),Qf(),Ni());return pe(e,t,s,n),t.child}function Dy(e,t,n,i){var s=dm();return s=s===null?null:{parent:se._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&uu(t,null),Qf(),RE(t),e!==null&&Zo(e,t,i,!0),null}function fu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Wf(e,t,n,i,s){return Us(t),n=ym(e,t,n,i,void 0,s),i=_m(),e!==null&&!fe?(vm(e,t,s),li(e,t,s)):(_t&&i&&cm(t),t.flags|=1,pe(e,t,n,s),t.child)}function Oy(e,t,n,i,s,r){return Us(t),t.updateQueue=null,n=Y0(t,i,n,s),Q0(e),i=_m(),e!==null&&!fe?(vm(e,t,r),li(e,t,r)):(_t&&i&&cm(t),t.flags|=1,pe(e,t,n,r),t.child)}function Vy(e,t,n,i,s){if(Us(t),t.stateNode===null){var r=br,a=n.contextType;typeof a=="object"&&a!==null&&(r=xe(a)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=$f,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},mm(t),a=n.contextType,r.context=typeof a=="object"&&a!==null?xe(a):br,r.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Gh(t,n,a,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&$f.enqueueReplaceState(r,r.state,null),ro(t,i,r,s),so(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,u=js(n,l);r.props=u;var h=r.context,d=n.contextType;a=br,typeof d=="object"&&d!==null&&(a=xe(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&Iy(t,r,i,a),Ri=!1;var m=t.memoizedState;r.state=m,ro(t,i,r,s),so(),h=t.memoizedState,l||m!==h||Ri?(typeof g=="function"&&(Gh(t,n,g,i),h=t.memoizedState),(u=Ri||Ry(t,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Ff(e,t),a=t.memoizedProps,d=js(n,a),r.props=d,g=t.pendingProps,m=r.context,h=n.contextType,u=br,typeof h=="object"&&h!==null&&(u=xe(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||m!==u)&&Iy(t,r,i,u),Ri=!1,m=t.memoizedState,r.state=m,ro(t,i,r,s),so();var _=t.memoizedState;a!==g||m!==_||Ri||e!==null&&e.dependencies!==null&&Uu(e.dependencies)?(typeof l=="function"&&(Gh(t,n,l,i),_=t.memoizedState),(d=Ri||Ry(t,n,d,i,m,_,u)||e!==null&&e.dependencies!==null&&Uu(e.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),r.props=i,r.state=_,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,fu(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Yr(t,e.child,null,s),t.child=Yr(t,null,n,s)):pe(e,t,n,s),t.memoizedState=r.state,e=t.child):e=li(e,t,s),e}function My(e,t,n,i){return $o(),t.flags|=256,pe(e,t,n,i),t.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(e){return{baseLanes:e,cachePool:B0()}}function Kh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=dn),e}function kE(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(re.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(_t){if(s?Ci(t):Ni(),_t){var l=Gt,u;if(u=l){t:{for(u=l,l=Nn;u.nodeType!==8;){if(!l){l=null;break t}if(u=Tn(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ds!==null?{id:Zn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},u=Xe(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Me=t,Gt=null,u=!0):u=!1}u||Ps(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return fd(l)?t.lanes=32:t.lanes=536870912,null;ti(t)}return l=i.children,i=i.fallback,s?(Ni(),s=t.mode,l=Gu({mode:"hidden",children:l},s),i=xs(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,s=t.child,s.memoizedState=Yh(n),s.childLanes=Kh(e,a,n),t.memoizedState=Qh,i):(Ci(t),Jf(t,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)t.flags&256?(Ci(t),t.flags&=-257,t=Xh(e,t,n)):t.memoizedState!==null?(Ni(),t.child=e.child,t.flags|=128,t=null):(Ni(),s=i.fallback,l=t.mode,i=Gu({mode:"visible",children:i.children},l),s=xs(s,l,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Yr(t,e.child,null,n),i=t.child,i.memoizedState=Yh(n),i.childLanes=Kh(e,a,n),t.memoizedState=Qh,t=s);else if(Ci(t),fd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,So({value:i,source:null,stack:null}),t=Xh(e,t,n)}else if(fe||Zo(e,t,n,!1),a=(n&e.childLanes)!==0,fe||a){if(a=Vt,a!==null&&(i=n&-n,i=i&42?1:Wd(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,la(e,i),en(a,e,i),OE;l.data==="$?"||rd(),t=Xh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,Gt=Tn(l.nextSibling),Me=t,_t=!0,Os=null,Nn=!1,e!==null&&(ln[un++]=Zn,ln[un++]=Wn,ln[un++]=Ds,Zn=e.id,Wn=e.overflow,Ds=t),t=Jf(t,i.children),t.flags|=4096);return t}return s?(Ni(),s=i.fallback,l=t.mode,u=e.child,h=u.sibling,i=ii(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?s=ii(h,s):(s=xs(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l===null?l=Yh(n):(u=l.cachePool,u!==null?(h=se._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=B0(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Kh(e,a,n),t.memoizedState=Qh,i):(Ci(t),n=e.child,e=n.sibling,n=ii(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Jf(e,t){return t=Gu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Gu(e,t){return e=Xe(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Xh(e,t,n){return Yr(t,e.child,null,n),e=Jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ky(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),zf(e.return,t,n)}function $h(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function PE(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(pe(e,t,i.children,n),i=re.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ky(e,n,t);else if(e.tag===19)ky(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(jt(re,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&qu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),$h(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}$h(t,!0,n,null,r);break;case"together":$h(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,!(n&t.childLanes))if(e!==null){if(Zo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=ii(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ii(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Cm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Uu(e)))}function Uw(e,t,n){switch(t.tag){case 3:Nu(t,t.stateNode.containerInfo),Ii(t,se,e.memoizedState.cache),$o();break;case 27:case 5:Cf(t);break;case 4:Nu(t,t.stateNode.containerInfo);break;case 10:Ii(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ci(t),t.flags|=128,null):n&t.child.childLanes?kE(e,t,n):(Ci(t),e=li(e,t,n),e!==null?e.sibling:null);Ci(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Zo(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return PE(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jt(re,re.current),i)break;return null;case 22:case 23:return t.lanes=0,ME(e,t,n);case 24:Ii(t,se,e.memoizedState.cache)}return li(e,t,n)}function UE(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)fe=!0;else{if(!Cm(e,n)&&!(t.flags&128))return fe=!1,Uw(e,t,n);fe=!!(e.flags&131072)}else fe=!1,_t&&t.flags&1048576&&j0(t,Pu,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")um(i)?(e=js(i,e),t.tag=1,t=Vy(null,t,i,e,n)):(t.tag=0,t=Wf(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===Xd){t.tag=11,t=Ny(null,t,i,e,n);break t}else if(s===$d){t.tag=14,t=xy(null,t,i,e,n);break t}}throw t=Rf(i)||i,Error(U(306,t,""))}}return t;case 0:return Wf(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=js(i,t.pendingProps),Vy(e,t,i,s,n);case 3:t:{if(Nu(t,t.stateNode.containerInfo),e===null)throw Error(U(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,Ff(e,t),ro(t,i,null,n);var a=t.memoizedState;if(i=a.cache,Ii(t,se,i),i!==r.cache&&Bf(t,[se],n,!0),so(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=My(e,t,i,n);break t}else if(i!==s){s=hn(Error(U(424)),t),So(s),t=My(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gt=Tn(e.firstChild),Me=t,_t=!0,Os=null,Nn=!0,n=wE(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if($o(),i===s){t=li(e,t,n);break t}pe(e,t,i,n)}t=t.child}return t;case 26:return fu(e,t),e===null?(n=Wy(t.type,null,t.pendingProps,null))?t.memoizedState=n:_t||(n=t.type,e=t.pendingProps,i=Wu(zi.current).createElement(n),i[Ne]=t,i[qe]=e,Te(i,n,e),ce(i),t.stateNode=i):t.memoizedState=Wy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Cf(t),e===null&&_t&&(i=t.stateNode=AT(t.type,t.pendingProps,zi.current),Me=t,Nn=!0,s=Gt,fs(t.type)?(dd=s,Gt=Tn(i.firstChild)):Gt=s),pe(e,t,t.pendingProps.children,n),fu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_t&&((s=i=Gt)&&(i=h2(i,t.type,t.pendingProps,Nn),i!==null?(t.stateNode=i,Me=t,Gt=Tn(i.firstChild),Nn=!1,s=!0):s=!1),s||Ps(t)),Cf(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,cd(s,r)?i=null:a!==null&&cd(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=ym(e,t,Nw,null,null,n),xo._currentValue=s),fu(e,t),pe(e,t,i,n),t.child;case 6:return e===null&&_t&&((e=n=Gt)&&(n=f2(n,t.pendingProps,Nn),n!==null?(t.stateNode=n,Me=t,Gt=null,e=!0):e=!1),e||Ps(t)),null;case 13:return kE(e,t,n);case 4:return Nu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Yr(t,null,i,n):pe(e,t,i,n),t.child;case 11:return Ny(e,t,t.type,t.pendingProps,n);case 7:return pe(e,t,t.pendingProps,n),t.child;case 8:return pe(e,t,t.pendingProps.children,n),t.child;case 12:return pe(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ii(t,t.type,i.value),pe(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Us(t),s=xe(s),i=i(s),t.flags|=1,pe(e,t,i,n),t.child;case 14:return xy(e,t,t.type,t.pendingProps,n);case 15:return VE(e,t,t.type,t.pendingProps,n);case 19:return PE(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Gu(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=ii(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ME(e,t,n);case 24:return Us(t),i=xe(se),e===null?(s=dm(),s===null&&(s=Vt,r=fm(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},mm(t),Ii(t,se,s)):(e.lanes&n&&(Ff(e,t),ro(t,null,null,n),so()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ii(t,se,i)):(i=r.cache,Ii(t,se,i),i!==s.cache&&Bf(t,[se],n,!0))),pe(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function Qn(e){e.flags|=4}function Py(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!RT(t)){if(t=mn.current,t!==null&&((dt&4194048)===dt?Vn!==null:(dt&62914560)!==dt&&!(dt&536870912)||t!==Vn))throw no=Hf,q0;e.flags|=8192}}function Yl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?u0():536870912,e.lanes|=t,Kr|=t)}function za(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Lw(e,t,n){var i=t.pendingProps;switch(hm(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return Bt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),si(se),Br(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(La(t)?Qn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fy())),Bt(t),null;case 26:return n=t.memoizedState,e===null?(Qn(t),n!==null?(Bt(t),Py(t,n)):(Bt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qn(t),Bt(t),Py(t,n)):(Bt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qn(t),Bt(t),t.flags&=-16777217),null;case 27:xu(t),n=zi.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Bt(t),null}e=Dn.current,La(t)?cy(t):(e=AT(s,i,n),t.stateNode=e,Qn(t))}return Bt(t),null;case 5:if(xu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Bt(t),null}if(e=Dn.current,La(t))cy(t);else{switch(s=Wu(zi.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Ne]=t,e[qe]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;t:switch(Te(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qn(t)}}return Bt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=zi.current,La(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=Me,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Ne]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||ET(e.nodeValue,n)),e||Ps(t)}else e=Wu(e).createTextNode(i),e[Ne]=t,t.stateNode=e}return Bt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=La(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(U(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Ne]=t}else $o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),s=!1}else s=fy(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ti(t),t):(ti(t),null)}if(ti(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Yl(t,t.updateQueue),Bt(t),null;case 4:return Br(),e===null&&Pm(t.stateNode.containerInfo),Bt(t),null;case 10:return si(t.type),Bt(t),null;case 19:if(de(re),s=t.memoizedState,s===null)return Bt(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)za(s,!1);else{if(Qt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=qu(e),r!==null){for(t.flags|=128,za(s,!1),e=r.updateQueue,t.updateQueue=e,Yl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)L0(n,e),n=n.sibling;return jt(re,re.current&1|2),t.child}e=e.sibling}s.tail!==null&&On()>Yu&&(t.flags|=128,i=!0,za(s,!1),t.lanes=4194304)}else{if(!i)if(e=qu(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Yl(t,e),za(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!_t)return Bt(t),null}else 2*On()-s.renderingStartTime>Yu&&n!==536870912&&(t.flags|=128,i=!0,za(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=On(),t.sibling=null,e=re.current,jt(re,i?e&1|2:e&1),t):(Bt(t),null);case 22:case 23:return ti(t),gm(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),n=t.updateQueue,n!==null&&Yl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&de(Vs),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),si(se),Bt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function jw(e,t){switch(hm(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return si(se),Br(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xu(t),null;case 13:if(ti(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));$o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(re),null;case 4:return Br(),null;case 10:return si(t.type),null;case 22:case 23:return ti(t),gm(),e!==null&&de(Vs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return si(se),null;case 25:return null;default:return null}}function LE(e,t){switch(hm(t),t.tag){case 3:si(se),Br();break;case 26:case 27:case 5:xu(t);break;case 4:Br();break;case 13:ti(t);break;case 19:de(re);break;case 10:si(t.type);break;case 22:case 23:ti(t),gm(),e!==null&&de(Vs);break;case 24:si(se)}}function nl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Ot(t,t.return,l)}}function ns(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=t;var u=n,h=l;try{h()}catch(d){Ot(s,u,d)}}}i=i.next}while(i!==r)}}catch(d){Ot(t,t.return,d)}}function jE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{G0(t,n)}catch(i){Ot(e,e.return,i)}}}function zE(e,t,n){n.props=js(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ot(e,t,i)}}function oo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(s){Ot(e,t,s)}}function xn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Ot(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Ot(e,t,s)}else n.current=null}function BE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Ot(e,e.return,s)}}function Zh(e,t,n){try{var i=e.stateNode;a2(i,e.type,n,t),i[qe]=t}catch(s){Ot(e,e.return,s)}}function qE(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fs(e.type)||e.tag===4}function Wh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||qE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function td(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zc));else if(i!==4&&(i===27&&fs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(td(e,t,n),e=e.sibling;e!==null;)td(e,t,n),e=e.sibling}function Qu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&fs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}function HE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Te(t,i,n),t[Ne]=e,t[qe]=n}catch(r){Ot(e,e.return,r)}}var Kn=!1,Kt=!1,Jh=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,ue=null;function zw(e,t){if(e=e.containerInfo,ld=nc,e=x0(e),am(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,d=0,g=e,m=null;e:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)m=g,g=_;for(;;){if(g===e)break e;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(_=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ud={focusedElem:e,selectionRange:n},nc=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){switch(t=ue,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var x=js(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(x,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(V){Ot(n,n.return,V)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)hd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}}function FE(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:bi(e,n),i&4&&nl(5,n);break;case 1:if(bi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Ot(n,n.return,a)}else{var s=js(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ot(n,n.return,a)}}i&64&&jE(n),i&512&&oo(n,n.return);break;case 3:if(bi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{G0(e,t)}catch(a){Ot(n,n.return,a)}}break;case 27:t===null&&i&4&&HE(n);case 26:case 5:bi(e,n),t===null&&i&4&&BE(n),i&512&&oo(n,n.return);break;case 12:bi(e,n);break;case 13:bi(e,n),i&4&&YE(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Xw.bind(null,n),d2(e,n))));break;case 22:if(i=n.memoizedState!==null||Kn,!i){t=t!==null&&t.memoizedState!==null||Kt,s=Kn;var r=Kt;Kn=i,(Kt=t)&&!r?Si(e,n,(n.subtreeFlags&8772)!==0):bi(e,n),Kn=s,Kt=r}break;case 30:break;default:bi(e,n)}}function GE(e){var t=e.alternate;t!==null&&(e.alternate=null,GE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&tm(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ut=null,je=!1;function Yn(e,t,n){for(n=n.child;n!==null;)QE(e,t,n),n=n.sibling}function QE(e,t,n){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Go,n)}catch{}switch(n.tag){case 26:Kt||xn(n,t),Yn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Kt||xn(n,t);var i=Ut,s=je;fs(n.type)&&(Ut=n.stateNode,je=!1),Yn(e,t,n),ho(n.stateNode),Ut=i,je=s;break;case 5:Kt||xn(n,t);case 6:if(i=Ut,s=je,Ut=null,Yn(e,t,n),Ut=i,je=s,Ut!==null)if(je)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(n.stateNode)}catch(r){Ot(n,t,r)}else try{Ut.removeChild(n.stateNode)}catch(r){Ot(n,t,r)}break;case 18:Ut!==null&&(je?(e=Ut,Xy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Vo(e)):Xy(Ut,n.stateNode));break;case 4:i=Ut,s=je,Ut=n.stateNode.containerInfo,je=!0,Yn(e,t,n),Ut=i,je=s;break;case 0:case 11:case 14:case 15:Kt||ns(2,n,t),Kt||ns(4,n,t),Yn(e,t,n);break;case 1:Kt||(xn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&zE(n,t,i)),Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:Kt=(i=Kt)||n.memoizedState!==null,Yn(e,t,n),Kt=i;break;default:Yn(e,t,n)}}function YE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vo(e)}catch(n){Ot(t,t.return,n)}}function Bw(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Uy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Uy),t;default:throw Error(U(435,e.tag))}}function tf(e,t){var n=Bw(e);t.forEach(function(i){var s=$w.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Qe(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 27:if(fs(l.type)){Ut=l.stateNode,je=!1;break t}break;case 5:Ut=l.stateNode,je=!1;break t;case 3:case 4:Ut=l.stateNode.containerInfo,je=!0;break t}l=l.return}if(Ut===null)throw Error(U(160));QE(r,a,s),Ut=null,je=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)KE(t,e),t=t.sibling}var vn=null;function KE(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qe(t,e),Ye(e),i&4&&(ns(3,e,e.return),nl(3,e),ns(5,e,e.return));break;case 1:Qe(t,e),Ye(e),i&512&&(Kt||n===null||xn(n,n.return)),i&64&&Kn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=vn;if(Qe(t,e),Ye(e),i&512&&(Kt||n===null||xn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[Ko]||r[Ne]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Te(r,i,n),r[Ne]=e,ce(r),i=r;break t;case"link":var a=t_("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break e}}r=s.createElement(i),Te(r,i,n),s.head.appendChild(r);break;case"meta":if(a=t_("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break e}}r=s.createElement(i),Te(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[Ne]=e,ce(r),i=r}e.stateNode=i}else e_(s,e.type,e.stateNode);else e.stateNode=Jy(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?e_(s,e.type,e.stateNode):Jy(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Zh(e,e.memoizedProps,n.memoizedProps)}break;case 27:Qe(t,e),Ye(e),i&512&&(Kt||n===null||xn(n,n.return)),n!==null&&i&4&&Zh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Qe(t,e),Ye(e),i&512&&(Kt||n===null||xn(n,n.return)),e.flags&32){s=e.stateNode;try{Hr(s,"")}catch(_){Ot(e,e.return,_)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,Zh(e,s,n!==null?n.memoizedProps:s)),i&1024&&(Jh=!0);break;case 6:if(Qe(t,e),Ye(e),i&4){if(e.stateNode===null)throw Error(U(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){Ot(e,e.return,_)}}break;case 3:if(gu=null,s=vn,vn=Ju(t.containerInfo),Qe(t,e),vn=s,Ye(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(_){Ot(e,e.return,_)}Jh&&(Jh=!1,XE(e));break;case 4:i=vn,vn=Ju(e.stateNode.containerInfo),Qe(t,e),Ye(e),vn=i;break;case 12:Qe(t,e),Ye(e);break;case 13:Qe(t,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Vm=On()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,tf(e,i)));break;case 22:s=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Kn,d=Kt;if(Kn=h||s,Kt=d||u,Qe(t,e),Kt=d,Kn=h,Ye(e),i&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||u||Kn||Kt||Rs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Ot(u,u.return,_)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){Ot(u,u.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,tf(e,n))));break;case 19:Qe(t,e),Ye(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,tf(e,i)));break;case 30:break;case 21:break;default:Qe(t,e),Ye(e)}}function Ye(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(qE(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=Wh(e);Qu(e,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(Hr(a,""),n.flags&=-33);var l=Wh(e);Qu(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Wh(e);td(e,h,u);break;default:throw Error(U(161))}}catch(d){Ot(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function XE(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;XE(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)FE(e,t.alternate,t),t=t.sibling}function Rs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ns(4,t,t.return),Rs(t);break;case 1:xn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&zE(t,t.return,n),Rs(t);break;case 27:ho(t.stateNode);case 26:case 5:xn(t,t.return),Rs(t);break;case 22:t.memoizedState===null&&Rs(t);break;case 30:Rs(t);break;default:Rs(t)}e=e.sibling}}function Si(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Si(s,r,n),nl(4,r);break;case 1:if(Si(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){Ot(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)F0(u[s],l)}catch(h){Ot(i,i.return,h)}}n&&a&64&&jE(r),oo(r,r.return);break;case 27:HE(r);case 26:case 5:Si(s,r,n),n&&i===null&&a&4&&BE(r),oo(r,r.return);break;case 12:Si(s,r,n);break;case 13:Si(s,r,n),n&&a&4&&YE(s,r);break;case 22:r.memoizedState===null&&Si(s,r,n),oo(r,r.return);break;case 30:break;default:Si(s,r,n)}t=t.sibling}}function Nm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Wo(n))}function xm(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wo(e))}function In(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$E(e,t,n,i),t=t.sibling}function $E(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:In(e,t,n,i),s&2048&&nl(9,t);break;case 1:In(e,t,n,i);break;case 3:In(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wo(e)));break;case 12:if(s&2048){In(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){Ot(t,t.return,u)}}else In(e,t,n,i);break;case 13:In(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?In(e,t,n,i):lo(e,t):r._visibility&2?In(e,t,n,i):(r._visibility|=2,lr(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&Nm(a,t);break;case 24:In(e,t,n,i),s&2048&&xm(t.alternate,t);break;default:In(e,t,n,i)}}function lr(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:lr(r,a,l,u,s),nl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?lr(r,a,l,u,s):lo(r,a):(d._visibility|=2,lr(r,a,l,u,s)),s&&h&2048&&Nm(a.alternate,a);break;case 24:lr(r,a,l,u,s),s&&h&2048&&xm(a.alternate,a);break;default:lr(r,a,l,u,s)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:lo(n,i),s&2048&&Nm(i.alternate,i);break;case 24:lo(n,i),s&2048&&xm(i.alternate,i);break;default:lo(n,i)}t=t.sibling}}var Qa=8192;function sr(e){if(e.subtreeFlags&Qa)for(e=e.child;e!==null;)ZE(e),e=e.sibling}function ZE(e){switch(e.tag){case 26:sr(e),e.flags&Qa&&e.memoizedState!==null&&R2(vn,e.memoizedState,e.memoizedProps);break;case 5:sr(e);break;case 3:case 4:var t=vn;vn=Ju(e.stateNode.containerInfo),sr(e),vn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Qa,Qa=16777216,sr(e),Qa=t):sr(e));break;default:sr(e)}}function WE(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ba(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,tT(i,e)}WE(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)JE(e),e=e.sibling}function JE(e){switch(e.tag){case 0:case 11:case 15:Ba(e),e.flags&2048&&ns(9,e,e.return);break;case 3:Ba(e);break;case 12:Ba(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,du(e)):Ba(e);break;default:Ba(e)}}function du(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ue=i,tT(i,e)}WE(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ns(8,t,t.return),du(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,du(t));break;default:du(t)}e=e.sibling}}function tT(e,t){for(;ue!==null;){var n=ue;switch(n.tag){case 0:case 11:case 15:ns(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Wo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ue=i;else t:for(n=e;ue!==null;){i=ue;var s=i.sibling,r=i.return;if(GE(i),i===n){ue=null;break t}if(s!==null){s.return=r,ue=s;break t}ue=r}}}var qw={getCacheForType:function(e){var t=xe(se),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Hw=typeof WeakMap=="function"?WeakMap:Map,wt=0,Vt=null,at=null,dt=0,St=0,Ke=null,Pi=!1,ua=!1,Dm=!1,ui=0,Qt=0,is=0,Ms=0,Om=0,dn=0,Kr=0,uo=null,ze=null,ed=!1,Vm=0,Yu=1/0,Ku=null,Hi=null,_e=0,Fi=null,Xr=null,Mr=0,nd=0,id=null,eT=null,co=0,sd=null;function tn(){if(wt&2&&dt!==0)return dt&-dt;if(Z.T!==null){var e=Fr;return e!==0?e:km()}return f0()}function nT(){dn===0&&(dn=!(dt&536870912)||_t?l0():536870912);var e=mn.current;return e!==null&&(e.flags|=32),dn}function en(e,t,n){(e===Vt&&(St===2||St===9)||e.cancelPendingCommit!==null)&&($r(e,0),Ui(e,dt,dn,!1)),Yo(e,n),(!(wt&2)||e!==Vt)&&(e===Vt&&(!(wt&2)&&(Ms|=n),Qt===4&&Ui(e,dt,dn,!1)),Bn(e))}function iT(e,t,n){if(wt&6)throw Error(U(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Qo(e,t),s=i?Qw(e,t):ef(e,t,!0),r=i;do{if(s===0){ua&&!i&&Ui(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Fw(n)){s=ef(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;t:{var l=e;s=uo;var u=l.current.memoizedState.isDehydrated;if(u&&($r(l,a).flags|=256),a=ef(l,a,!1),a!==2){if(Dm&&!u){l.errorRecoveryDisabledLanes|=r,Ms|=r,s=4;break t}r=ze,ze=s,r!==null&&(ze===null?ze=r:ze.push.apply(ze,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){$r(e,0),Ui(e,t,0,!0);break}t:{switch(i=e,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Ui(i,t,dn,!Pi);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(s=Vm+300-On(),10<s)){if(Ui(i,t,dn,!Pi),Ic(i,0,!0)!==0)break t;i.timeoutHandle=bT(Ly.bind(null,i,n,ze,Ku,ed,t,dn,Ms,Kr,Pi,r,2,-0,0),s);break t}Ly(i,n,ze,Ku,ed,t,dn,Ms,Kr,Pi,r,0,-0,0)}}break}while(!0);Bn(e)}function Ly(e,t,n,i,s,r,a,l,u,h,d,g,m,_){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(No={stylesheets:null,count:0,unsuspend:w2},ZE(t),g=I2(),g!==null)){e.cancelPendingCommit=g(zy.bind(null,e,t,r,n,i,s,a,l,u,d,1,m,_)),Ui(e,r,a,!h);return}zy(e,t,r,n,i,s,a,l,u)}function Fw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!rn(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ui(e,t,n,i){t&=~Om,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-Je(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&c0(e,n,t)}function Uc(){return wt&6?!0:(il(0),!1)}function Mm(){if(at!==null){if(St===0)var e=at.return;else e=at,Jn=Xs=null,Em(e),Vr=null,Ro=0,e=at;for(;e!==null;)LE(e.alternate,e),e=e.return;at=null}}function $r(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,l2(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Mm(),Vt=e,at=n=ii(e.current,null),dt=t,St=0,Ke=null,Pi=!1,ua=Qo(e,t),Dm=!1,Kr=dn=Om=Ms=is=Qt=0,ze=uo=null,ed=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-Je(i),r=1<<s;t|=e[s],i&=~r}return ui=t,Dc(),n}function sT(e,t){it=null,Z.H=Bu,t===Jo||t===Vc?(t=py(),St=3):t===q0?(t=py(),St=4):St=t===OE?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ke=t,at===null&&(Qt=1,Fu(e,hn(t,e.current)))}function rT(){var e=Z.H;return Z.H=Bu,e===null?Bu:e}function aT(){var e=Z.A;return Z.A=qw,e}function rd(){Qt=4,Pi||(dt&4194048)!==dt&&mn.current!==null||(ua=!0),!(is&134217727)&&!(Ms&134217727)||Vt===null||Ui(Vt,dt,dn,!1)}function ef(e,t,n){var i=wt;wt|=2;var s=rT(),r=aT();(Vt!==e||dt!==t)&&(Ku=null,$r(e,t)),t=!1;var a=Qt;t:do try{if(St!==0&&at!==null){var l=at,u=Ke;switch(St){case 8:Mm(),a=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(t=!0);var h=St;if(St=0,Ke=null,wr(e,l,u,h),n&&ua){a=0;break t}break;default:h=St,St=0,Ke=null,wr(e,l,u,h)}}Gw(),a=Qt;break}catch(d){sT(e,d)}while(!0);return t&&e.shellSuspendCounter++,Jn=Xs=null,wt=i,Z.H=s,Z.A=r,at===null&&(Vt=null,dt=0,Dc()),a}function Gw(){for(;at!==null;)oT(at)}function Qw(e,t){var n=wt;wt|=2;var i=rT(),s=aT();Vt!==e||dt!==t?(Ku=null,Yu=On()+500,$r(e,t)):ua=Qo(e,t);t:do try{if(St!==0&&at!==null){t=at;var r=Ke;e:switch(St){case 1:St=0,Ke=null,wr(e,t,r,1);break;case 2:case 9:if(gy(r)){St=0,Ke=null,jy(t);break}t=function(){St!==2&&St!==9||Vt!==e||(St=7),Bn(e)},r.then(t,t);break t;case 3:St=7;break t;case 4:St=5;break t;case 7:gy(r)?(St=0,Ke=null,jy(t)):(St=0,Ke=null,wr(e,t,r,7));break;case 5:var a=null;switch(at.tag){case 26:a=at.memoizedState;case 5:case 27:var l=at;if(!a||RT(a)){St=0,Ke=null;var u=l.sibling;if(u!==null)at=u;else{var h=l.return;h!==null?(at=h,Lc(h)):at=null}break e}}St=0,Ke=null,wr(e,t,r,5);break;case 6:St=0,Ke=null,wr(e,t,r,6);break;case 8:Mm(),Qt=6;break t;default:throw Error(U(462))}}Yw();break}catch(d){sT(e,d)}while(!0);return Jn=Xs=null,Z.H=i,Z.A=s,wt=n,at!==null?0:(Vt=null,dt=0,Dc(),Qt)}function Yw(){for(;at!==null&&!g1();)oT(at)}function oT(e){var t=UE(e.alternate,e,ui);e.memoizedProps=e.pendingProps,t===null?Lc(e):at=t}function jy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Oy(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=Oy(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:Em(t);default:LE(n,t),t=at=L0(t,ui),t=UE(n,t,ui)}e.memoizedProps=e.pendingProps,t===null?Lc(e):at=t}function wr(e,t,n,i){Jn=Xs=null,Em(t),Vr=null,Ro=0;var s=t.return;try{if(Pw(e,s,t,n,dt)){Qt=1,Fu(e,hn(n,e.current)),at=null;return}}catch(r){if(s!==null)throw at=s,r;Qt=1,Fu(e,hn(n,e.current)),at=null;return}t.flags&32768?(_t||i===1?e=!0:ua||dt&536870912?e=!1:(Pi=e=!0,(i===2||i===9||i===3||i===6)&&(i=mn.current,i!==null&&i.tag===13&&(i.flags|=16384))),lT(t,e)):Lc(t)}function Lc(e){var t=e;do{if(t.flags&32768){lT(t,Pi);return}e=t.return;var n=Lw(t.alternate,t,ui);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Qt===0&&(Qt=5)}function lT(e,t){do{var n=jw(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);Qt=6,at=null}function zy(e,t,n,i,s,r,a,l,u){e.cancelPendingCommit=null;do jc();while(_e!==0);if(wt&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(r=t.lanes|t.childLanes,r|=om,w1(e,n,r,a,l,u),e===Vt&&(at=Vt=null,dt=0),Xr=t,Fi=e,Mr=n,nd=r,id=s,eT=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Zw(Du,function(){return dT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Z.T,Z.T=null,s=vt.p,vt.p=2,a=wt,wt|=4;try{zw(e,t,n)}finally{wt=a,vt.p=s,Z.T=i}}_e=1,uT(),cT(),hT()}}function uT(){if(_e===1){_e=0;var e=Fi,t=Xr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=vt.p;vt.p=2;var s=wt;wt|=4;try{KE(t,e);var r=ud,a=x0(e.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&N0(l.ownerDocument.documentElement,l)){if(u!==null&&am(l)){var h=u.start,d=u.end;if(d===void 0&&(d=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(d,l.value.length);else{var g=l.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=l.textContent.length,V=Math.min(u.start,x),O=u.end===void 0?V:Math.min(u.end,x);!_.extend&&V>O&&(a=O,O=V,V=a);var S=oy(l,V),E=oy(l,O);if(S&&E&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var R=g.createRange();R.setStart(S.node,S.offset),_.removeAllRanges(),V>O?(_.addRange(R),_.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),_.addRange(R))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}nc=!!ld,ud=ld=null}finally{wt=s,vt.p=i,Z.T=n}}e.current=t,_e=2}}function cT(){if(_e===2){_e=0;var e=Fi,t=Xr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=vt.p;vt.p=2;var s=wt;wt|=4;try{FE(e,t.alternate,t)}finally{wt=s,vt.p=i,Z.T=n}}_e=3}}function hT(){if(_e===4||_e===3){_e=0,p1();var e=Fi,t=Xr,n=Mr,i=eT;t.subtreeFlags&10256||t.flags&10256?_e=5:(_e=0,Xr=Fi=null,fT(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Hi=null),Jd(n),t=t.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Go,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Z.T,s=vt.p,vt.p=2,Z.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{Z.T=t,vt.p=s}}Mr&3&&jc(),Bn(e),s=e.pendingLanes,n&4194090&&s&42?e===sd?co++:(co=0,sd=e):co=0,il(0)}}function fT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Wo(t)))}function jc(e){return uT(),cT(),hT(),dT()}function dT(){if(_e!==5)return!1;var e=Fi,t=nd;nd=0;var n=Jd(Mr),i=Z.T,s=vt.p;try{vt.p=32>n?32:n,Z.T=null,n=id,id=null;var r=Fi,a=Mr;if(_e=0,Xr=Fi=null,Mr=0,wt&6)throw Error(U(331));var l=wt;if(wt|=4,JE(r.current),$E(r,r.current,a,n),wt=l,il(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Go,r)}catch{}return!0}finally{vt.p=s,Z.T=i,fT(e,t)}}function By(e,t,n){t=hn(n,t),t=Zf(e.stateNode,t,2),e=qi(e,t,2),e!==null&&(Yo(e,2),Bn(e))}function Ot(e,t,n){if(e.tag===3)By(e,e,n);else for(;t!==null;){if(t.tag===3){By(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hi===null||!Hi.has(i))){e=hn(n,e),n=xE(2),i=qi(t,n,2),i!==null&&(DE(n,i,t,e),Yo(i,2),Bn(i));break}}t=t.return}}function nf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Hw;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(Dm=!0,s.add(n),e=Kw.bind(null,e,t,n),t.then(e,e))}function Kw(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(dt&n)===n&&(Qt===4||Qt===3&&(dt&62914560)===dt&&300>On()-Vm?!(wt&2)&&$r(e,0):Om|=n,Kr===dt&&(Kr=0)),Bn(e)}function mT(e,t){t===0&&(t=u0()),e=la(e,t),e!==null&&(Yo(e,t),Bn(e))}function Xw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mT(e,n)}function $w(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(t),mT(e,n)}function Zw(e,t){return Zd(e,t)}var Xu=null,ur=null,ad=!1,$u=!1,sf=!1,ks=0;function Bn(e){e!==ur&&e.next===null&&(ur===null?Xu=ur=e:ur=ur.next=e),$u=!0,ad||(ad=!0,Jw())}function il(e,t){if(!sf&&$u){sf=!0;do for(var n=!1,i=Xu;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Je(42|e)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,qy(i,r))}else r=dt,r=Ic(i,i===Vt?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Qo(i,r)||(n=!0,qy(i,r));i=i.next}while(n);sf=!1}}function Ww(){gT()}function gT(){$u=ad=!1;var e=0;ks!==0&&(o2()&&(e=ks),ks=0);for(var t=On(),n=null,i=Xu;i!==null;){var s=i.next,r=pT(i,t);r===0?(i.next=null,n===null?Xu=s:n.next=s,s===null&&(ur=n)):(n=i,(e!==0||r&3)&&($u=!0)),i=s}il(e)}function pT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-Je(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=S1(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}if(t=Vt,n=dt,n=Ic(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(St===2||St===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Nh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Qo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Nh(i),Jd(n)){case 2:case 8:n=a0;break;case 32:n=Du;break;case 268435456:n=o0;break;default:n=Du}return i=yT.bind(null,e),n=Zd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Nh(i),e.callbackPriority=2,e.callbackNode=null,2}function yT(e,t){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var i=dt;return i=Ic(e,e===Vt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(iT(e,i,t),pT(e,On()),e.callbackNode!=null&&e.callbackNode===n?yT.bind(null,e):null)}function qy(e,t){if(jc())return null;iT(e,t,!0)}function Jw(){u2(function(){wt&6?Zd(r0,Ww):gT()})}function km(){return ks===0&&(ks=l0()),ks}function Hy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ru(""+e)}function Fy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function t2(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=Hy((s[qe]||null).action),a=i.submitter;a&&(t=(t=a[qe]||null)?Hy(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var l=new Cc("action","action",null,i,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ks!==0){var u=a?Fy(s,a):new FormData(s);Xf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Fy(s,a):new FormData(s),Xf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var rf=0;rf<Uf.length;rf++){var af=Uf[rf],e2=af.toLowerCase(),n2=af[0].toUpperCase()+af.slice(1);Sn(e2,"on"+n2)}Sn(O0,"onAnimationEnd");Sn(V0,"onAnimationIteration");Sn(M0,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(vw,"onTransitionRun");Sn(Ew,"onTransitionStart");Sn(Tw,"onTransitionCancel");Sn(k0,"onTransitionEnd");qr("onMouseEnter",["mouseout","mouseover"]);qr("onMouseLeave",["mouseout","mouseover"]);qr("onPointerEnter",["pointerout","pointerover"]);qr("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function _T(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){Hu(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;r=l,s.currentTarget=h;try{r(s)}catch(d){Hu(d)}s.currentTarget=null,r=u}}}}function rt(e,t){var n=t[xf];n===void 0&&(n=t[xf]=new Set);var i=e+"__bubble";n.has(i)||(vT(t,e,2,!1),n.add(i))}function of(e,t,n){var i=0;t&&(i|=4),vT(n,e,i,t)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Pm(e){if(!e[Kl]){e[Kl]=!0,d0.forEach(function(n){n!=="selectionchange"&&(i2.has(n)||of(n,!1,e),of(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kl]||(t[Kl]=!0,of("selectionchange",!1,t))}}function vT(e,t,n,i){switch(DT(t)){case 2:var s=x2;break;case 8:s=D2;break;default:s=zm}n=s.bind(null,t,n,e),s=void 0,!Mf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function lf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=pr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue t}l=l.parentNode}}i=i.return}T0(function(){var h=r,d=nm(n),g=[];t:{var m=P0.get(e);if(m!==void 0){var _=Cc,x=e;switch(e){case"keypress":if(ou(n)===0)break t;case"keydown":case"keyup":_=Z1;break;case"focusin":x="focus",_=Uh;break;case"focusout":x="blur",_=Uh;break;case"beforeblur":case"afterblur":_=Uh;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=j1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=tw;break;case O0:case V0:case M0:_=q1;break;case k0:_=nw;break;case"scroll":case"scrollend":_=U1;break;case"wheel":_=sw;break;case"copy":case"cut":case"paste":_=F1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Jp;break;case"toggle":case"beforetoggle":_=aw}var V=(t&4)!==0,O=!V&&(e==="scroll"||e==="scrollend"),S=V?m!==null?m+"Capture":null:m;V=[];for(var E=h,R;E!==null;){var D=E;if(R=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||R===null||S===null||(D=To(E,S),D!=null&&V.push(Co(E,D,R))),O)break;E=E.return}0<V.length&&(m=new _(m,x,null,n,d),g.push({event:m,listeners:V}))}}if(!(t&7)){t:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&n!==Vf&&(x=n.relatedTarget||n.fromElement)&&(pr(x)||x[aa]))break t;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=h,x=x?pr(x):null,x!==null&&(O=Fo(x),V=x.tag,x!==O||V!==5&&V!==27&&V!==6)&&(x=null)):(_=null,x=h),_!==x)){if(V=Zp,D="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(V=Jp,D="onPointerLeave",S="onPointerEnter",E="pointer"),O=_==null?m:Ga(_),R=x==null?m:Ga(x),m=new V(D,E+"leave",_,n,d),m.target=O,m.relatedTarget=R,D=null,pr(d)===h&&(V=new V(S,E+"enter",x,n,d),V.target=R,V.relatedTarget=O,D=V),O=D,_&&x)e:{for(V=_,S=x,E=0,R=V;R;R=rr(R))E++;for(R=0,D=S;D;D=rr(D))R++;for(;0<E-R;)V=rr(V),E--;for(;0<R-E;)S=rr(S),R--;for(;E--;){if(V===S||S!==null&&V===S.alternate)break e;V=rr(V),S=rr(S)}V=null}else V=null;_!==null&&Gy(g,m,_,V,!1),x!==null&&O!==null&&Gy(g,O,x,V,!0)}}t:{if(m=h?Ga(h):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=iy;else if(ny(m))if(I0)L=pw;else{L=mw;var B=dw}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&em(h.elementType)&&(L=iy):L=gw;if(L&&(L=L(e,h))){R0(g,L,n,d);break t}B&&B(e,m,h),e==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&Of(m,"number",m.value)}switch(B=h?Ga(h):window,e){case"focusin":(ny(B)||B.contentEditable==="true")&&(vr=B,kf=h,to=null);break;case"focusout":to=kf=vr=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,ly(g,n,d);break;case"selectionchange":if(_w)break;case"keydown":case"keyup":ly(g,n,d)}var T;if(rm)t:{switch(e){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else _r?S0(e,n)&&(y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(A0&&n.locale!=="ko"&&(_r||y!=="onCompositionStart"?y==="onCompositionEnd"&&_r&&(T=b0()):(ki=d,im="value"in ki?ki.value:ki.textContent,_r=!0)),B=Zu(h,y),0<B.length&&(y=new Wp(y,e,null,n,d),g.push({event:y,listeners:B}),T?y.data=T:(T=w0(n),T!==null&&(y.data=T)))),(T=lw?uw(e,n):cw(e,n))&&(y=Zu(h,"onBeforeInput"),0<y.length&&(B=new Wp("onBeforeInput","beforeinput",null,n,d),g.push({event:B,listeners:y}),B.data=T)),t2(g,e,h,n,d)}_T(g,t)})}function Co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zu(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=To(e,n),s!=null&&i.unshift(Co(e,s,r)),s=To(e,t),s!=null&&i.push(Co(e,s,r))),e.tag===3)return i;e=e.return}return[]}function rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gy(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=To(n,r),h!=null&&a.unshift(Co(n,h,u))):s||(h=To(n,r),h!=null&&a.push(Co(n,h,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var s2=/\r\n?/g,r2=/\u0000|\uFFFD/g;function Qy(e){return(typeof e=="string"?e:""+e).replace(s2,`
`).replace(r2,"")}function ET(e,t){return t=Qy(t),Qy(e)===t}function zc(){}function It(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Hr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Hr(e,""+i);break;case"className":Bl(e,"class",i);break;case"tabIndex":Bl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Bl(e,n,i);break;case"style":E0(e,i,r);break;case"data":if(t!=="object"){Bl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ru(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&It(e,t,"name",s.name,s,null),It(e,t,"formEncType",s.formEncType,s,null),It(e,t,"formMethod",s.formMethod,s,null),It(e,t,"formTarget",s.formTarget,s,null)):(It(e,t,"encType",s.encType,s,null),It(e,t,"method",s.method,s,null),It(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ru(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=zc);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=ru(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),su(e,"popover",i);break;case"xlinkActuate":Gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Gn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Gn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Gn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Gn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":su(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=k1.get(n)||n,su(e,n,i))}}function od(e,t,n,i,s,r){switch(n){case"style":E0(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Hr(e,i):(typeof i=="number"||typeof i=="bigint")&&Hr(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!m0.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[qe]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):su(e,n,i)}}}function Te(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:It(e,t,r,a,n,null)}}s&&It(e,t,"srcSet",n.srcSet,n,null),i&&It(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:It(e,t,i,d,n,null)}}y0(e,r,l,u,h,a,s,!1),Ou(e);return;case"select":rt("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:It(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,t!=null?Cr(e,!!i,t,!1):n!=null&&Cr(e,!!i,n,!0);return;case"textarea":rt("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:It(e,t,a,l,n,null)}v0(e,i,s,r),Ou(e);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:It(e,t,u,i,n,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<Io.length;i++)rt(Io[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:It(e,t,h,i,n,null)}return;default:if(em(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&od(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&It(e,t,l,i,n,null))}function a2(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||It(e,t,_,null,i,g)}}for(var m in i){var _=i[m];if(g=n[m],i.hasOwnProperty(m)&&(_!=null||g!=null))switch(m){case"type":r=_;break;case"name":s=_;break;case"checked":h=_;break;case"defaultChecked":d=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,t));break;default:_!==g&&It(e,t,m,_,i,g)}}Df(e,a,l,u,h,d,r,s);return;case"select":_=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||It(e,t,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&It(e,t,s,r,i,u)}t=l,n=a,i=_,m!=null?Cr(e,!!n,m,!1):!!i!=!!n&&(t!=null?Cr(e,!!n,t,!0):Cr(e,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:It(e,t,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&It(e,t,a,s,i,r)}_0(e,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:It(e,t,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:It(e,t,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!=null&&!i.hasOwnProperty(V)&&It(e,t,V,null,i,m);for(h in i)if(m=i[h],_=n[h],i.hasOwnProperty(h)&&m!==_&&(m!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:It(e,t,h,m,i,_)}return;default:if(em(t)){for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!==void 0&&!i.hasOwnProperty(O)&&od(e,t,O,void 0,i,m);for(d in i)m=i[d],_=n[d],!i.hasOwnProperty(d)||m===_||m===void 0&&_===void 0||od(e,t,d,m,i,_);return}}for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&It(e,t,S,null,i,m);for(g in i)m=i[g],_=n[g],!i.hasOwnProperty(g)||m===_||m==null&&_==null||It(e,t,g,m,i,_)}var ld=null,ud=null;function Wu(e){return e.nodeType===9?e:e.ownerDocument}function Yy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TT(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uf=null;function o2(){var e=window.event;return e&&e.type==="popstate"?e===uf?!1:(uf=e,!0):(uf=null,!1)}var bT=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,u2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(e){return Ky.resolve(null).then(e).catch(c2)}:bT;function c2(e){setTimeout(function(){throw e})}function fs(e){return e==="head"}function Xy(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(n&1&&ho(a.documentElement),n&2&&ho(a.body),n&4)for(n=a.head,ho(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[Ko]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){e.removeChild(r),Vo(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Vo(t)}function hd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":hd(n),tm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function h2(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ko])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Tn(e.nextSibling),e===null)break}return null}function f2(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Tn(e.nextSibling),e===null))return null;return e}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function d2(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var dd=null;function $y(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function AT(e,t,n){switch(t=Wu(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function ho(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);tm(e)}var gn=new Map,Zy=new Set;function Ju(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gi=vt.d;vt.d={f:m2,r:g2,D:p2,C:y2,L:_2,m:v2,X:T2,S:E2,M:b2};function m2(){var e=gi.f(),t=Uc();return e||t}function g2(e){var t=oa(e);t!==null&&t.tag===5&&t.type==="form"?pE(t):gi.r(e)}var ca=typeof document>"u"?null:document;function ST(e,t,n){var i=ca;if(i&&typeof t=="string"&&t){var s=cn(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Zy.has(s)||(Zy.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),Te(t,"link",e),ce(t),i.head.appendChild(t)))}}function p2(e){gi.D(e),ST("dns-prefetch",e,null)}function y2(e,t){gi.C(e,t),ST("preconnect",e,t)}function _2(e,t,n){gi.L(e,t,n);var i=ca;if(i&&e&&t){var s='link[rel="preload"][as="'+cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+cn(n.imageSizes)+'"]')):s+='[href="'+cn(e)+'"]';var r=s;switch(t){case"style":r=Zr(e);break;case"script":r=ha(e)}gn.has(r)||(e=Pt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),gn.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(sl(r))||t==="script"&&i.querySelector(rl(r))||(t=i.createElement("link"),Te(t,"link",e),ce(t),i.head.appendChild(t)))}}function v2(e,t){gi.m(e,t);var n=ca;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+cn(i)+'"][href="'+cn(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ha(e)}if(!gn.has(r)&&(e=Pt({rel:"modulepreload",href:e},t),gn.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(rl(r)))return}i=n.createElement("link"),Te(i,"link",e),ce(i),n.head.appendChild(i)}}}function E2(e,t,n){gi.S(e,t,n);var i=ca;if(i&&e){var s=Ir(i).hoistableStyles,r=Zr(e);t=t||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(sl(r)))l.loading=5;else{e=Pt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=gn.get(r))&&Um(e,n);var u=a=i.createElement("link");ce(u),Te(u,"link",e),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,mu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function T2(e,t){gi.X(e,t);var n=ca;if(n&&e){var i=Ir(n).hoistableScripts,s=ha(e),r=i.get(s);r||(r=n.querySelector(rl(s)),r||(e=Pt({src:e,async:!0},t),(t=gn.get(s))&&Lm(e,t),r=n.createElement("script"),ce(r),Te(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function b2(e,t){gi.M(e,t);var n=ca;if(n&&e){var i=Ir(n).hoistableScripts,s=ha(e),r=i.get(s);r||(r=n.querySelector(rl(s)),r||(e=Pt({src:e,async:!0,type:"module"},t),(t=gn.get(s))&&Lm(e,t),r=n.createElement("script"),ce(r),Te(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Wy(e,t,n,i){var s=(s=zi.current)?Ju(s):null;if(!s)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Zr(n.href),n=Ir(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Zr(n.href);var r=Ir(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(sl(e)))&&!r._p&&(a.instance=r,a.state.loading=5),gn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gn.set(e,n),r||A2(s,e,n,a.state))),t&&i===null)throw Error(U(528,""));return a}if(t&&i!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ha(n),n=Ir(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Zr(e){return'href="'+cn(e)+'"'}function sl(e){return'link[rel="stylesheet"]['+e+"]"}function wT(e){return Pt({},e,{"data-precedence":e.precedence,precedence:null})}function A2(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Te(t,"link",n),ce(t),e.head.appendChild(t))}function ha(e){return'[src="'+cn(e)+'"]'}function rl(e){return"script[async]"+e}function Jy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+cn(n.href)+'"]');if(i)return t.instance=i,ce(i),i;var s=Pt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ce(i),Te(i,"style",s),mu(i,n.precedence,e),t.instance=i;case"stylesheet":s=Zr(n.href);var r=e.querySelector(sl(s));if(r)return t.state.loading|=4,t.instance=r,ce(r),r;i=wT(n),(s=gn.get(s))&&Um(i,s),r=(e.ownerDocument||e).createElement("link"),ce(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(r,"link",i),t.state.loading|=4,mu(r,n.precedence,e),t.instance=r;case"script":return r=ha(n.src),(s=e.querySelector(rl(r)))?(t.instance=s,ce(s),s):(i=n,(s=gn.get(r))&&(i=Pt({},n),Lm(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),ce(s),Te(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,mu(i,n.precedence,e));return t.instance}function mu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===t)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Um(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var gu=null;function t_(e,t,n){if(gu===null){var i=new Map,s=gu=new Map;s.set(n,i)}else s=gu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[Ko]||r[Ne]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function e_(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function S2(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function RT(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var No=null;function w2(){}function R2(e,t,n){if(No===null)throw Error(U(475));var i=No;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=Zr(n.href),r=e.querySelector(sl(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=tc.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,ce(r);return}r=e.ownerDocument||e,n=wT(n),(s=gn.get(s))&&Um(n,s),r=r.createElement("link"),ce(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Te(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=tc.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function I2(){if(No===null)throw Error(U(475));var e=No;return e.stylesheets&&e.count===0&&md(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&md(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function tc(){if(this.count--,this.count===0){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ec=null;function md(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ec=new Map,t.forEach(C2,e),ec=null,tc.call(e))}function C2(e,t){if(!(t.state.loading&4)){var n=ec.get(e);if(n)var i=n.get(null);else{n=new Map,ec.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=t.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=tc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var xo={$$typeof:$n,Provider:null,Consumer:null,_currentValue:Ns,_currentValue2:Ns,_threadCount:0};function N2(e,t,n,i,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xh(0),this.hiddenUpdates=xh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function IT(e,t,n,i,s,r,a,l,u,h,d,g){return e=new N2(e,t,n,a,l,u,h,g),t=1,r===!0&&(t|=24),r=Xe(3,null,null,t),e.current=r,r.stateNode=e,t=fm(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},mm(r),e}function CT(e){return e?(e=br,e):br}function NT(e,t,n,i,s,r){s=CT(s),i.context===null?i.context=s:i.pendingContext=s,i=Bi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=qi(e,i,t),n!==null&&(en(n,e,t),io(n,e,t))}function n_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jm(e,t){n_(e,t),(e=e.alternate)&&n_(e,t)}function xT(e){if(e.tag===13){var t=la(e,67108864);t!==null&&en(t,e,67108864),jm(e,67108864)}}var nc=!0;function x2(e,t,n,i){var s=Z.T;Z.T=null;var r=vt.p;try{vt.p=2,zm(e,t,n,i)}finally{vt.p=r,Z.T=s}}function D2(e,t,n,i){var s=Z.T;Z.T=null;var r=vt.p;try{vt.p=8,zm(e,t,n,i)}finally{vt.p=r,Z.T=s}}function zm(e,t,n,i){if(nc){var s=gd(i);if(s===null)lf(e,t,i,ic,n),i_(e,i);else if(V2(s,e,t,n,i))i.stopPropagation();else if(i_(e,i),t&4&&-1<O2.indexOf(e)){for(;s!==null;){var r=oa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Ss(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Je(a);l.entanglements[1]|=u,a&=~u}Bn(r),!(wt&6)&&(Yu=On()+500,il(0))}}break;case 13:l=la(r,2),l!==null&&en(l,r,2),Uc(),jm(r,2)}if(r=gd(i),r===null&&lf(e,t,i,ic,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else lf(e,t,i,null,n)}}function gd(e){return e=nm(e),Bm(e)}var ic=null;function Bm(e){if(ic=null,e=pr(e),e!==null){var t=Fo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=e0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ic=e,null}function DT(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(y1()){case r0:return 2;case a0:return 8;case Du:case _1:return 32;case o0:return 268435456;default:return 32}default:return 32}}var pd=!1,Gi=null,Qi=null,Yi=null,Do=new Map,Oo=new Map,xi=[],O2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i_(e,t){switch(e){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Do.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(t.pointerId)}}function qa(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=oa(t),t!==null&&xT(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function V2(e,t,n,i,s){switch(t){case"focusin":return Gi=qa(Gi,e,t,n,i,s),!0;case"dragenter":return Qi=qa(Qi,e,t,n,i,s),!0;case"mouseover":return Yi=qa(Yi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Do.set(r,qa(Do.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Oo.set(r,qa(Oo.get(r)||null,e,t,n,i,s)),!0}return!1}function OT(e){var t=pr(e.target);if(t!==null){var n=Fo(t);if(n!==null){if(t=n.tag,t===13){if(t=e0(n),t!==null){e.blockedOn=t,R1(e.priority,function(){if(n.tag===13){var i=tn();i=Wd(i);var s=la(n,i);s!==null&&en(s,n,i),jm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Vf=i,n.target.dispatchEvent(i),Vf=null}else return t=oa(n),t!==null&&xT(t),e.blockedOn=n,!1;t.shift()}return!0}function s_(e,t,n){pu(e)&&n.delete(t)}function M2(){pd=!1,Gi!==null&&pu(Gi)&&(Gi=null),Qi!==null&&pu(Qi)&&(Qi=null),Yi!==null&&pu(Yi)&&(Yi=null),Do.forEach(s_),Oo.forEach(s_)}function Xl(e,t){e.blockedOn===t&&(e.blockedOn=null,pd||(pd=!0,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,M2)))}var $l=null;function r_(e){$l!==e&&($l=e,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,function(){$l===e&&($l=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(Bm(i||n)===null)continue;break}var r=oa(n);r!==null&&(e.splice(t,3),t-=3,Xf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Vo(e){function t(u){return Xl(u,e)}Gi!==null&&Xl(Gi,e),Qi!==null&&Xl(Qi,e),Yi!==null&&Xl(Yi,e),Do.forEach(t),Oo.forEach(t);for(var n=0;n<xi.length;n++){var i=xi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)OT(n),n.blockedOn===null&&xi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[qe]||null;if(typeof r=="function")a||r_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[qe]||null)l=a.formAction;else if(Bm(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),r_(n)}}}function qm(e){this._internalRoot=e}Bc.prototype.render=qm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,i=tn();NT(n,i,e,t,null,null)};Bc.prototype.unmount=qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;NT(e.current,2,null,e,null,null),Uc(),t[aa]=null}};function Bc(e){this._internalRoot=e}Bc.prototype.unstable_scheduleHydration=function(e){if(e){var t=f0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xi.length&&t!==0&&t<xi[n].priority;n++);xi.splice(n,0,e),n===0&&OT(e)}};var a_=Jv.version;if(a_!=="19.1.1")throw Error(U(527,a_,"19.1.1"));vt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=c1(t),e=e!==null?n0(e):null,e=e===null?null:e.stateNode,e};var k2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{Go=Zl.inject(k2),We=Zl}catch{}}wc.createRoot=function(e,t){if(!t0(e))throw Error(U(299));var n=!1,i="",s=IE,r=CE,a=NE,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=IT(e,1,!1,null,null,n,i,s,r,a,l,null),e[aa]=t.current,Pm(e),new qm(t)};wc.hydrateRoot=function(e,t,n){if(!t0(e))throw Error(U(299));var i=!1,s="",r=IE,a=CE,l=NE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),t=IT(e,1,!0,t,n??null,i,s,r,a,l,u,h),t.context=CT(null),n=t.current,i=tn(),i=Wd(i),s=Bi(i),s.callback=null,qi(n,s,i),n=i,t.current.lanes=n,Yo(t,n),Bn(t),e[aa]=t.current,Pm(e),new Bc(t)};wc.version="19.1.1";function VT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VT)}catch(e){console.error(e)}}VT(),Yv.exports=wc;var P2=Yv.exports;const U2=()=>{};var o_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},L2=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},kT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,d=r>>2,g=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),i.push(n[d],n[g],n[m],n[_])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(MT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):L2(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new j2;const m=r<<2|l>>4;if(i.push(m),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const x=h<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class j2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z2=function(e){const t=MT(e);return kT.encodeByteArray(t,!0)},sc=function(e){return z2(e).replace(/\./g,"")},PT=function(e){try{return kT.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=()=>B2().__FIREBASE_DEFAULTS__,H2=()=>{if(typeof process>"u"||typeof o_>"u")return;const e=o_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},F2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&PT(e[1]);return t&&JSON.parse(t)},qc=()=>{try{return U2()||q2()||H2()||F2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},UT=e=>{var t,n;return(n=(t=qc())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},G2=e=>{const t=UT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},LT=()=>{var e;return(e=qc())==null?void 0:e.config},jT=e=>{var t;return(t=qc())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[sc(JSON.stringify(n)),sc(JSON.stringify(a)),""].join(".")}const fo={};function K2(){const e={prod:[],emulator:[]};for(const t of Object.keys(fo))fo[t]?e.emulator.push(t):e.prod.push(t);return e}function X2(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let l_=!1;function BT(e,t){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||fo[e]===t||fo[e]||l_)return;fo[e]=t;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=K2().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{l_=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=X2(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),O=document.getElementById(V)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(O,V);const D=h();u(E,S),R.append(E,x,O,D),document.body.appendChild(R)}r?(x.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function Z2(){var t;const e=(t=qc())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J2(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function tR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eR(){const e=De();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nR(){return!Z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iR(){try{return typeof indexedDB=="object"}catch{return!1}}function sR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="FirebaseError";class pi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=rR,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?aR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new pi(s,l,i)}}function aR(e,t){return e.replace(oR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const oR=/\{\$([^}]+)}/g;function lR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function zs(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(u_(r)&&u_(a)){if(!zs(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function u_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function uR(e,t){const n=new cR(e,t);return n.subscribe.bind(n)}class cR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");hR(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=cf),s.error===void 0&&(s.error=cf),s.complete===void 0&&(s.complete=cf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){return e&&e._delegate?e._delegate:e}class Bs{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Q2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mR(t))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Is){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Is){return this.instances.has(t)}getOptions(t=Is){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Is){return this.component?this.component.multipleInstances?t:Is:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dR(e){return e===Is?void 0:e}function mR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new fR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const pR={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},yR=ot.INFO,_R={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},vR=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=_R[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hm{constructor(t){this.name=t,this._logLevel=yR,this._logHandler=vR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const ER=(e,t)=>t.some(n=>e instanceof n);let c_,h_;function TR(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return h_||(h_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qT=new WeakMap,yd=new WeakMap,HT=new WeakMap,hf=new WeakMap,Fm=new WeakMap;function AR(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Ki(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&qT.set(n,e)}).catch(()=>{}),Fm.set(t,e),t}function SR(e){if(yd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});yd.set(e,t)}let _d={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return yd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||HT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function wR(e){_d=e(_d)}function RR(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(ff(this),t,...n);return HT.set(i,t.sort?t.sort():[t]),Ki(i)}:bR().includes(e)?function(...t){return e.apply(ff(this),t),Ki(qT.get(this))}:function(...t){return Ki(e.apply(ff(this),t))}}function IR(e){return typeof e=="function"?RR(e):(e instanceof IDBTransaction&&SR(e),ER(e,TR())?new Proxy(e,_d):e)}function Ki(e){if(e instanceof IDBRequest)return AR(e);if(hf.has(e))return hf.get(e);const t=IR(e);return t!==e&&(hf.set(e,t),Fm.set(t,e)),t}const ff=e=>Fm.get(e);function CR(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=Ki(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ki(a.result),u.oldVersion,u.newVersion,Ki(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const NR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],df=new Map;function f_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(df.get(t))return df.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=xR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||NR.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return df.set(t,r),r}wR(e=>({...e,get:(t,n,i)=>f_(t,n)||e.get(t,n,i),has:(t,n)=>!!f_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function OR(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const vd="@firebase/app",d_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Hm("@firebase/app"),VR="@firebase/app-compat",MR="@firebase/analytics-compat",kR="@firebase/analytics",PR="@firebase/app-check-compat",UR="@firebase/app-check",LR="@firebase/auth",jR="@firebase/auth-compat",zR="@firebase/database",BR="@firebase/data-connect",qR="@firebase/database-compat",HR="@firebase/functions",FR="@firebase/functions-compat",GR="@firebase/installations",QR="@firebase/installations-compat",YR="@firebase/messaging",KR="@firebase/messaging-compat",XR="@firebase/performance",$R="@firebase/performance-compat",ZR="@firebase/remote-config",WR="@firebase/remote-config-compat",JR="@firebase/storage",tI="@firebase/storage-compat",eI="@firebase/firestore",nI="@firebase/ai",iI="@firebase/firestore-compat",sI="firebase",rI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="[DEFAULT]",aI={[vd]:"fire-core",[VR]:"fire-core-compat",[kR]:"fire-analytics",[MR]:"fire-analytics-compat",[UR]:"fire-app-check",[PR]:"fire-app-check-compat",[LR]:"fire-auth",[jR]:"fire-auth-compat",[zR]:"fire-rtdb",[BR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[HR]:"fire-fn",[FR]:"fire-fn-compat",[GR]:"fire-iid",[QR]:"fire-iid-compat",[YR]:"fire-fcm",[KR]:"fire-fcm-compat",[XR]:"fire-perf",[$R]:"fire-perf-compat",[ZR]:"fire-rc",[WR]:"fire-rc-compat",[JR]:"fire-gcs",[tI]:"fire-gcs-compat",[eI]:"fire-fst",[iI]:"fire-fst-compat",[nI]:"fire-vertex","fire-js":"fire-js",[sI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,oI=new Map,Td=new Map;function m_(e,t){try{e.container.addComponent(t)}catch(n){ci.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Wr(e){const t=e.name;if(Td.has(t))return ci.debug(`There were multiple attempts to register component ${t}.`),!1;Td.set(t,e);for(const n of rc.values())m_(n,e);for(const n of oI.values())m_(n,e);return!0}function Gm(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new al("app","Firebase",lI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=rI;function FT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Ed,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Xi.create("bad-app-name",{appName:String(s)});if(n||(n=LT()),!n)throw Xi.create("no-options");const r=rc.get(s);if(r){if(zs(n,r.options)&&zs(i,r.config))return r;throw Xi.create("duplicate-app",{appName:s})}const a=new gR(s);for(const u of Td.values())a.addComponent(u);const l=new uI(n,i,a);return rc.set(s,l),l}function GT(e=Ed){const t=rc.get(e);if(!t&&e===Ed&&LT())return FT();if(!t)throw Xi.create("no-app",{appName:e});return t}function $i(e,t,n){let i=aI[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ci.warn(a.join(" "));return}Wr(new Bs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebase-heartbeat-database",hI=1,Mo="firebase-heartbeat-store";let mf=null;function QT(){return mf||(mf=CR(cI,hI,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Xi.create("idb-open",{originalErrorMessage:e.message})})),mf}async function fI(e){try{const n=(await QT()).transaction(Mo),i=await n.objectStore(Mo).get(YT(e));return await n.done,i}catch(t){if(t instanceof pi)ci.warn(t.message);else{const n=Xi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ci.warn(n.message)}}}async function g_(e,t){try{const i=(await QT()).transaction(Mo,"readwrite");await i.objectStore(Mo).put(t,YT(e)),await i.done}catch(n){if(n instanceof pi)ci.warn(n.message);else{const i=Xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ci.warn(i.message)}}}function YT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=1024,mI=30;class gI{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=p_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>mI){const a=_I(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ci.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p_(),{heartbeatsToSend:i,unsentEntries:s}=pI(this._heartbeatsCache.heartbeats),r=sc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ci.warn(n),""}}}function p_(){return new Date().toISOString().substring(0,10)}function pI(e,t=dI){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),y_(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),y_(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class yI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iR()?sR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function y_(e){return sc(JSON.stringify({version:2,heartbeats:e})).length}function _I(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(e){Wr(new Bs("platform-logger",t=>new DR(t),"PRIVATE")),Wr(new Bs("heartbeat",t=>new gI(t),"PRIVATE")),$i(vd,d_,e),$i(vd,d_,"esm2020"),$i("fire-js","")}vI("");var EI="firebase",TI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(EI,TI,"app");var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,KT;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,y){function b(){}b.prototype=y.prototype,T.D=y.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(w,C,I){for(var A=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)A[yt-2]=arguments[yt];return y.prototype[C].apply(w,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,b){b||(b=0);var w=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)w[C]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(C=0;16>C;++C)w[C]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=T.g[0],b=T.g[1],C=T.g[2];var I=T.g[3],A=y+(I^b&(C^I))+w[0]+3614090360&4294967295;y=b+(A<<7&4294967295|A>>>25),A=I+(C^y&(b^C))+w[1]+3905402710&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(b^I&(y^b))+w[2]+606105819&4294967295,C=I+(A<<17&4294967295|A>>>15),A=b+(y^C&(I^y))+w[3]+3250441966&4294967295,b=C+(A<<22&4294967295|A>>>10),A=y+(I^b&(C^I))+w[4]+4118548399&4294967295,y=b+(A<<7&4294967295|A>>>25),A=I+(C^y&(b^C))+w[5]+1200080426&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(b^I&(y^b))+w[6]+2821735955&4294967295,C=I+(A<<17&4294967295|A>>>15),A=b+(y^C&(I^y))+w[7]+4249261313&4294967295,b=C+(A<<22&4294967295|A>>>10),A=y+(I^b&(C^I))+w[8]+1770035416&4294967295,y=b+(A<<7&4294967295|A>>>25),A=I+(C^y&(b^C))+w[9]+2336552879&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(b^I&(y^b))+w[10]+4294925233&4294967295,C=I+(A<<17&4294967295|A>>>15),A=b+(y^C&(I^y))+w[11]+2304563134&4294967295,b=C+(A<<22&4294967295|A>>>10),A=y+(I^b&(C^I))+w[12]+1804603682&4294967295,y=b+(A<<7&4294967295|A>>>25),A=I+(C^y&(b^C))+w[13]+4254626195&4294967295,I=y+(A<<12&4294967295|A>>>20),A=C+(b^I&(y^b))+w[14]+2792965006&4294967295,C=I+(A<<17&4294967295|A>>>15),A=b+(y^C&(I^y))+w[15]+1236535329&4294967295,b=C+(A<<22&4294967295|A>>>10),A=y+(C^I&(b^C))+w[1]+4129170786&4294967295,y=b+(A<<5&4294967295|A>>>27),A=I+(b^C&(y^b))+w[6]+3225465664&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^b&(I^y))+w[11]+643717713&4294967295,C=I+(A<<14&4294967295|A>>>18),A=b+(I^y&(C^I))+w[0]+3921069994&4294967295,b=C+(A<<20&4294967295|A>>>12),A=y+(C^I&(b^C))+w[5]+3593408605&4294967295,y=b+(A<<5&4294967295|A>>>27),A=I+(b^C&(y^b))+w[10]+38016083&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^b&(I^y))+w[15]+3634488961&4294967295,C=I+(A<<14&4294967295|A>>>18),A=b+(I^y&(C^I))+w[4]+3889429448&4294967295,b=C+(A<<20&4294967295|A>>>12),A=y+(C^I&(b^C))+w[9]+568446438&4294967295,y=b+(A<<5&4294967295|A>>>27),A=I+(b^C&(y^b))+w[14]+3275163606&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^b&(I^y))+w[3]+4107603335&4294967295,C=I+(A<<14&4294967295|A>>>18),A=b+(I^y&(C^I))+w[8]+1163531501&4294967295,b=C+(A<<20&4294967295|A>>>12),A=y+(C^I&(b^C))+w[13]+2850285829&4294967295,y=b+(A<<5&4294967295|A>>>27),A=I+(b^C&(y^b))+w[2]+4243563512&4294967295,I=y+(A<<9&4294967295|A>>>23),A=C+(y^b&(I^y))+w[7]+1735328473&4294967295,C=I+(A<<14&4294967295|A>>>18),A=b+(I^y&(C^I))+w[12]+2368359562&4294967295,b=C+(A<<20&4294967295|A>>>12),A=y+(b^C^I)+w[5]+4294588738&4294967295,y=b+(A<<4&4294967295|A>>>28),A=I+(y^b^C)+w[8]+2272392833&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^b)+w[11]+1839030562&4294967295,C=I+(A<<16&4294967295|A>>>16),A=b+(C^I^y)+w[14]+4259657740&4294967295,b=C+(A<<23&4294967295|A>>>9),A=y+(b^C^I)+w[1]+2763975236&4294967295,y=b+(A<<4&4294967295|A>>>28),A=I+(y^b^C)+w[4]+1272893353&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^b)+w[7]+4139469664&4294967295,C=I+(A<<16&4294967295|A>>>16),A=b+(C^I^y)+w[10]+3200236656&4294967295,b=C+(A<<23&4294967295|A>>>9),A=y+(b^C^I)+w[13]+681279174&4294967295,y=b+(A<<4&4294967295|A>>>28),A=I+(y^b^C)+w[0]+3936430074&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^b)+w[3]+3572445317&4294967295,C=I+(A<<16&4294967295|A>>>16),A=b+(C^I^y)+w[6]+76029189&4294967295,b=C+(A<<23&4294967295|A>>>9),A=y+(b^C^I)+w[9]+3654602809&4294967295,y=b+(A<<4&4294967295|A>>>28),A=I+(y^b^C)+w[12]+3873151461&4294967295,I=y+(A<<11&4294967295|A>>>21),A=C+(I^y^b)+w[15]+530742520&4294967295,C=I+(A<<16&4294967295|A>>>16),A=b+(C^I^y)+w[2]+3299628645&4294967295,b=C+(A<<23&4294967295|A>>>9),A=y+(C^(b|~I))+w[0]+4096336452&4294967295,y=b+(A<<6&4294967295|A>>>26),A=I+(b^(y|~C))+w[7]+1126891415&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~b))+w[14]+2878612391&4294967295,C=I+(A<<15&4294967295|A>>>17),A=b+(I^(C|~y))+w[5]+4237533241&4294967295,b=C+(A<<21&4294967295|A>>>11),A=y+(C^(b|~I))+w[12]+1700485571&4294967295,y=b+(A<<6&4294967295|A>>>26),A=I+(b^(y|~C))+w[3]+2399980690&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~b))+w[10]+4293915773&4294967295,C=I+(A<<15&4294967295|A>>>17),A=b+(I^(C|~y))+w[1]+2240044497&4294967295,b=C+(A<<21&4294967295|A>>>11),A=y+(C^(b|~I))+w[8]+1873313359&4294967295,y=b+(A<<6&4294967295|A>>>26),A=I+(b^(y|~C))+w[15]+4264355552&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~b))+w[6]+2734768916&4294967295,C=I+(A<<15&4294967295|A>>>17),A=b+(I^(C|~y))+w[13]+1309151649&4294967295,b=C+(A<<21&4294967295|A>>>11),A=y+(C^(b|~I))+w[4]+4149444226&4294967295,y=b+(A<<6&4294967295|A>>>26),A=I+(b^(y|~C))+w[11]+3174756917&4294967295,I=y+(A<<10&4294967295|A>>>22),A=C+(y^(I|~b))+w[2]+718787259&4294967295,C=I+(A<<15&4294967295|A>>>17),A=b+(I^(C|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var b=y-this.blockSize,w=this.B,C=this.h,I=0;I<y;){if(C==0)for(;I<=b;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<y;)if(w[C++]=T.charCodeAt(I++),C==this.blockSize){s(this,w),C=0;break}}else for(;I<y;)if(w[C++]=T[I++],C==this.blockSize){s(this,w),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var b=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=b&255,b/=256;for(this.u(T),T=Array(16),y=b=0;4>y;++y)for(var w=0;32>w;w+=8)T[b++]=this.g[y]>>>w&255;return T};function r(T,y){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=y(T)}function a(T,y){this.h=y;for(var b=[],w=!0,C=T.length-1;0<=C;C--){var I=T[C]|0;w&&I==y||(b[C]=I,w=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?r(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return O(h(-T));for(var y=[],b=1,w=0;T>=b;w++)y[w]=T/b|0,b*=4294967296;return new a(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return O(d(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=h(Math.pow(y,8)),w=g,C=0;C<T.length;C+=8){var I=Math.min(8,T.length-C),A=parseInt(T.substring(C,C+I),y);8>I?(I=h(Math.pow(y,I)),w=w.j(I).add(h(A))):(w=w.j(b),w=w.add(h(A)))}return w}var g=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(V(this))return-O(this).m();for(var T=0,y=1,b=0;b<this.g.length;b++){var w=this.i(b);T+=(0<=w?w:4294967296+w)*y,y*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(V(this))return"-"+O(this).toString(T);for(var y=h(Math.pow(T,6)),b=this,w="";;){var C=D(b,y).g;b=S(b,C.j(y));var I=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=C,x(b))return I+w;for(;6>I.length;)I="0"+I;w=I+w}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function V(T){return T.h==-1}e.l=function(T){return T=S(this,T),V(T)?-1:x(T)?0:1};function O(T){for(var y=T.g.length,b=[],w=0;w<y;w++)b[w]=~T.g[w];return new a(b,~T.h).add(m)}e.abs=function(){return V(this)?O(this):this},e.add=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0,C=0;C<=y;C++){var I=w+(this.i(C)&65535)+(T.i(C)&65535),A=(I>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);w=A>>>16,I&=65535,A&=65535,b[C]=A<<16|I}return new a(b,b[b.length-1]&-2147483648?-1:0)};function S(T,y){return T.add(O(y))}e.j=function(T){if(x(this)||x(T))return g;if(V(this))return V(T)?O(this).j(O(T)):O(O(this).j(T));if(V(T))return O(this.j(O(T)));if(0>this.l(_)&&0>T.l(_))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,b=[],w=0;w<2*y;w++)b[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<T.g.length;C++){var I=this.i(w)>>>16,A=this.i(w)&65535,yt=T.i(C)>>>16,me=T.i(C)&65535;b[2*w+2*C]+=A*me,E(b,2*w+2*C),b[2*w+2*C+1]+=I*me,E(b,2*w+2*C+1),b[2*w+2*C+1]+=A*yt,E(b,2*w+2*C+1),b[2*w+2*C+2]+=I*yt,E(b,2*w+2*C+2)}for(w=0;w<y;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=y;w<2*y;w++)b[w]=0;return new a(b,0)};function E(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function R(T,y){this.g=T,this.h=y}function D(T,y){if(x(y))throw Error("division by zero");if(x(T))return new R(g,g);if(V(T))return y=D(O(T),y),new R(O(y.g),O(y.h));if(V(y))return y=D(T,O(y)),new R(O(y.g),y.h);if(30<T.g.length){if(V(T)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var b=m,w=y;0>=w.l(T);)b=L(b),w=L(w);var C=B(b,1),I=B(w,1);for(w=B(w,2),b=B(b,2);!x(w);){var A=I.add(w);0>=A.l(T)&&(C=C.add(b),I=A),w=B(w,1),b=B(b,1)}return y=S(T,C.j(y)),new R(C,y)}for(C=g;0<=T.l(y);){for(b=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(b)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),I=h(b),A=I.j(y);V(A)||0<A.l(T);)b-=w,I=h(b),A=I.j(y);x(I)&&(I=m),C=C.add(I),T=S(T,A)}return new R(C,T)}e.A=function(T){return D(this,T).h},e.and=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0;w<y;w++)b[w]=this.i(w)&T.i(w);return new a(b,this.h&T.h)},e.or=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0;w<y;w++)b[w]=this.i(w)|T.i(w);return new a(b,this.h|T.h)},e.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),b=[],w=0;w<y;w++)b[w]=this.i(w)^T.i(w);return new a(b,this.h^T.h)};function L(T){for(var y=T.g.length+1,b=[],w=0;w<y;w++)b[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(b,T.h)}function B(T,y){var b=y>>5;y%=32;for(var w=T.g.length-b,C=[],I=0;I<w;I++)C[I]=0<y?T.i(I+b)>>>y|T.i(I+b+1)<<32-y:T.i(I+b);return new a(C,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,KT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Zi=a}).apply(typeof __<"u"?__:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XT,Ya,$T,yu,bd,ZT,WT,JT;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)t:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break t;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&t(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,M){for(var j=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)j[Dt-2]=arguments[Dt];return c.prototype[N].apply(p,j)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function O(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,M=p.length||0;o.length=N+M;for(let j=0;j<M;j++)o[N+j]=p[j]}else o.push(p)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let M=0;M<b.length;M++)f=b[M],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function C(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function I(o){l.setTimeout(()=>{throw o},0)}function A(){var o=gt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class yt{constructor(){this.h=this.g=null}add(c,f){const p=me.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var me=new S(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,Y=!1,gt=new yt,xt=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(pn)}};var pn=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(f){I(f)}var c=me;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Ae(o,c){if(ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){t:{try{D(c.nodeName);var N=!0;break t}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Oe[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ae.aa.h.call(this)}}x(Ae,ct);var Oe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var wn="closure_listenable_"+(1e6*Math.random()|0),gs=0;function Ea(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++gs,this.da=this.fa=!1}function yi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Rn(o){this.src=o,this.g={},this.h=0}Rn.prototype.add=function(o,c,f,p,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var j=ys(o,c,p,N);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new Ea(c,this.src,M,!!p,N),c.fa=f,o.push(c)),c};function ps(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(p,N,1),M&&(yi(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function ys(o,c,f,p){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==p)return N}return-1}var qn="closure_lm_"+(1e6*Math.random()|0),_s={};function Js(o,c,f,p,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)Js(o,c[M],f,p,N);return null}return f=bt(f),o&&o[wn]?o.K(c,f,h(p)?!!p.capture:!1,N):et(o,c,f,!1,p,N)}function et(o,c,f,p,N,M){if(!c)throw Error("Invalid event type");var j=h(N)?!!N.capture:!!N,Dt=Tt(o);if(Dt||(o[qn]=Dt=new Rn(o)),f=Dt.add(c,f,p,j,M),f.proxy)return f;if(p=ht(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)$t||(N=j),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ht(){function o(f){return c.call(o.src,o.listener,f)}const c=tt;return o}function Et(o,c,f,p,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)Et(o,c[M],f,p,N);else p=h(p)?!!p.capture:!!p,f=bt(f),o&&o[wn]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=ys(M,f,p,N),-1<f&&(yi(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Tt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=ys(c,f,p,N)),(f=-1<o?c[o]:null)&&yn(f))}function yn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[wn])ps(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(G(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=Tt(c))?(ps(f,o),f.h==0&&(f.src=null,c[qn]=null)):yi(o)}}}function G(o){return o in _s?_s[o]:_s[o]="on"+o}function tt(o,c){if(o.da)o=!0;else{c=new Ae(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&yn(o),o=f.call(p,c)}return o}function Tt(o){return o=o[qn],o instanceof Rn?o:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(o){return typeof o=="function"?o:(o[Rt]||(o[Rt]=function(c){return o.handleEvent(c)}),o[Rt])}function st(){zt.call(this),this.i=new Rn(this),this.M=this,this.F=null}x(st,zt),st.prototype[wn]=!0,st.prototype.removeEventListener=function(o,c,f,p){Et(this,o,c,f,p)};function At(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new ct(c,o);else if(c instanceof ct)c.target=c.target||o;else{var N=c;c=new ct(p,o),w(c,N)}if(N=!0,f)for(var M=f.length-1;0<=M;M--){var j=c.g=f[M];N=Fe(j,p,!0,c)&&N}if(j=c.g=o,N=Fe(j,p,!0,c)&&N,N=Fe(j,p,!1,c)&&N,f)for(M=0;M<f.length;M++)j=c.g=f[M],N=Fe(j,p,!1,c)&&N}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)yi(f[p]);delete o.g[c],o.h--}}this.F=null},st.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},st.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function Fe(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var j=c[M];if(j&&!j.da&&j.capture==f){var Dt=j.listener,ge=j.ha||j.src;j.fa&&ps(o.i,j),N=Dt.call(ge,p)!==!1&&N}}return N&&!p.defaultPrevented}function Ta(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Tl(o){o.g=Ta(()=>{o.g=null,o.i&&(o.i=!1,Tl(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class hh extends zt{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Tl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(o){zt.call(this),this.h=o,this.g={}}x(ba,zt);var Hg=[];function Fg(o){B(o.g,function(c,f){this.g.hasOwnProperty(f)&&yn(c)},o),o.g={}}ba.prototype.N=function(){ba.aa.N.call(this),Fg(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fh=l.JSON.stringify,mS=l.JSON.parse,gS=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function dh(){}dh.prototype.h=null;function Gg(o){return o.h||(o.h=o.i())}function Qg(){}var Aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mh(){ct.call(this,"d")}x(mh,ct);function gh(){ct.call(this,"c")}x(gh,ct);var vs={},Yg=null;function bl(){return Yg=Yg||new st}vs.La="serverreachability";function Kg(o){ct.call(this,vs.La,o)}x(Kg,ct);function Sa(o){const c=bl();At(c,new Kg(c))}vs.STAT_EVENT="statevent";function Xg(o,c){ct.call(this,vs.STAT_EVENT,o),this.stat=c}x(Xg,ct);function Ve(o){const c=bl();At(c,new Xg(c,o))}vs.Ma="timingevent";function $g(o,c){ct.call(this,vs.Ma,o),this.size=c}x($g,ct);function wa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ra(){this.g=!0}Ra.prototype.xa=function(){this.g=!1};function pS(o,c,f,p,N,M){o.info(function(){if(o.g)if(M)for(var j="",Dt=M.split("&"),ge=0;ge<Dt.length;ge++){var pt=Dt[ge].split("=");if(1<pt.length){var Se=pt[0];pt=pt[1];var we=Se.split("_");j=2<=we.length&&we[1]=="type"?j+(Se+"="+pt+"&"):j+(Se+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+j})}function yS(o,c,f,p,N,M,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+M+" "+j})}function tr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+vS(o,f)+(p?" "+p:"")})}function _S(o,c){o.info(function(){return"TIMEOUT: "+c})}Ra.prototype.info=function(){};function vS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return fh(f)}catch{return c}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ph;function Sl(){}x(Sl,dh),Sl.prototype.g=function(){return new XMLHttpRequest},Sl.prototype.i=function(){return{}},ph=new Sl;function _i(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new ba(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wg}function Wg(){this.i=null,this.g="",this.h=!1}var Jg={},yh={};function _h(o,c,f){o.L=1,o.v=Cl(Hn(c)),o.m=f,o.P=!0,tp(o,null)}function tp(o,c){o.F=Date.now(),wl(o),o.A=Hn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),mp(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Wg,o.g=Op(o.j,f?c:null,!o.m),0<o.O&&(o.M=new hh(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Hg[0]=N.toString()),N=Hg);for(var M=0;M<N.length;M++){var j=Js(f,N[M],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Sa(),pS(o.i,o.u,o.A,o.l,o.R,o.m)}_i.prototype.ca=function(o){o=o.target;const c=this.M;c&&Fn(o)==3?c.j():this.Y(o)},_i.prototype.Y=function(o){try{if(o==this.g)t:{const we=Fn(this.g);var c=this.g.Ba();const ir=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||Tp(this.g)))){this.J||we!=4||c==7||(c==8||0>=ir?Sa(3):Sa(2)),vh(this);var f=this.g.Z();this.X=f;e:if(ep(this)){var p=Tp(this.g);o="";var N=p.length,M=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),Ia(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(M&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,yS(this.i,this.u,this.A,this.l,this.R,we,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,ge=this.g;if((Dt=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Dt)){var pt=Dt;break e}}pt=null}if(f=pt)tr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eh(this,f);else{this.o=!1,this.s=3,Ve(12),Es(this),Ia(this);break t}}if(this.P){f=!0;let _n;for(;!this.J&&this.C<j.length;)if(_n=ES(this,j),_n==yh){we==4&&(this.s=4,Ve(14),f=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Jg){this.s=4,Ve(15),tr(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else tr(this.i,this.l,_n,null),Eh(this,_n);if(ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||j.length!=0||this.h.h||(this.s=1,Ve(16),f=!1),this.o=this.o&&f,!f)tr(this.i,this.l,j,"[Invalid Chunked Response]"),Es(this),Ia(this);else if(0<j.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Rh(Se),Se.M=!0,Ve(11))}}else tr(this.i,this.l,j,null),Eh(this,j);we==4&&Es(this),this.o&&!this.J&&(we==4?Cp(this.j,this):(this.o=!1,wl(this)))}else US(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),Es(this),Ia(this)}}}catch{}finally{}};function ep(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function ES(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?yh:(f=Number(c.substring(f,p)),isNaN(f)?Jg:(p+=1,p+f>c.length?yh:(c=c.slice(p,p+f),o.C=p+f,c)))}_i.prototype.cancel=function(){this.J=!0,Es(this)};function wl(o){o.S=Date.now()+o.I,np(o,o.I)}function np(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=wa(m(o.ba,o),c)}function vh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}_i.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(_S(this.i,this.A),this.L!=2&&(Sa(),Ve(17)),Es(this),this.s=2,Ia(this)):np(this,this.S-o)};function Ia(o){o.j.G==0||o.J||Cp(o.j,o)}function Es(o){vh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Fg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Eh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Th(f.h,o))){if(!o.K&&Th(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ml(f),Ol(f);else break t;wh(f),Ve(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=wa(m(f.Za,f),6e3));if(1>=rp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bs(f,11)}else if((o.K||f.g==o)&&Ml(f),!E(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let pt=N[c];if(f.T=pt[0],pt=pt[1],f.G==2)if(pt[0]=="c"){f.K=pt[1],f.ia=pt[2];const Se=pt[3];Se!=null&&(f.la=Se,f.j.info("VER="+f.la));const we=pt[4];we!=null&&(f.Aa=we,f.j.info("SVER="+f.Aa));const ir=pt[5];ir!=null&&typeof ir=="number"&&0<ir&&(p=1.5*ir,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const _n=o.g;if(_n){const Pl=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pl){var M=p.h;M.g||Pl.indexOf("spdy")==-1&&Pl.indexOf("quic")==-1&&Pl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(bh(M,M.h),M.h=null))}if(p.D){const Ih=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ih&&(p.ya=Ih,Mt(p.I,p.D,Ih))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=Dp(p,p.J?p.ia:null,p.W),j.K){ap(p.h,j);var Dt=j,ge=p.L;ge&&(Dt.I=ge),Dt.B&&(vh(Dt),wl(Dt)),p.g=j}else Rp(p);0<f.i.length&&Vl(f)}else pt[0]!="stop"&&pt[0]!="close"||bs(f,7);else f.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?bs(f,7):Sh(f):pt[0]!="noop"&&f.l&&f.l.ta(pt),f.v=0)}}Sa(4)}catch{}}var TS=class{constructor(o,c){this.g=o,this.map=c}};function ip(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function rp(o){return o.h?1:o.g?o.g.size:0}function Th(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function bh(o,c){o.g?o.g.add(c):o.h=c}function ap(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}ip.prototype.cancel=function(){if(this.i=op(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function op(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function bS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function AS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function lp(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=AS(o),p=bS(o),N=p.length,M=0;M<N;M++)c.call(void 0,p[M],f&&f[M],o)}var up=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var M=o[f].substring(0,p);N=o[f].substring(p+1)}else M=o[f];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ts(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ts){this.h=o.h,Rl(this,o.j),this.o=o.o,this.g=o.g,Il(this,o.s),this.l=o.l;var c=o.i,f=new xa;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),cp(this,f),this.m=o.m}else o&&(c=String(o).match(up))?(this.h=!1,Rl(this,c[1]||"",!0),this.o=Ca(c[2]||""),this.g=Ca(c[3]||"",!0),Il(this,c[4]),this.l=Ca(c[5]||"",!0),cp(this,c[6]||"",!0),this.m=Ca(c[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Ts.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Na(c,hp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Na(c,hp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Na(f,f.charAt(0)=="/"?IS:RS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Na(f,NS)),o.join("")};function Hn(o){return new Ts(o)}function Rl(o,c,f){o.j=f?Ca(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Il(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function cp(o,c,f){c instanceof xa?(o.i=c,xS(o.i,o.h)):(f||(c=Na(c,CS)),o.i=new xa(c,o.h))}function Mt(o,c,f){o.i.set(c,f)}function Cl(o){return Mt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ca(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Na(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,wS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function wS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var hp=/[#\/\?@]/g,RS=/[#\?:]/g,IS=/[#\?]/g,CS=/[#\?@]/g,NS=/#/g;function xa(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function vi(o){o.g||(o.g=new Map,o.h=0,o.i&&SS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}e=xa.prototype,e.add=function(o,c){vi(this),this.i=null,o=er(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function fp(o,c){vi(o),c=er(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function dp(o,c){return vi(o),c=er(o,c),o.g.has(c)}e.forEach=function(o,c){vi(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},e.na=function(){vi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let M=0;M<N.length;M++)f.push(c[p])}return f},e.V=function(o){vi(this);let c=[];if(typeof o=="string")dp(this,o)&&(c=c.concat(this.g.get(er(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},e.set=function(o,c){return vi(this),this.i=null,o=er(this,o),dp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function mp(o,c,f){fp(o,c),0<f.length&&(o.i=null,o.g.set(er(o,c),V(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const M=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var N=M;j[p]!==""&&(N+="="+encodeURIComponent(String(j[p]))),o.push(N)}}return this.i=o.join("&")};function er(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function xS(o,c){c&&!o.j&&(vi(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(fp(this,p),mp(this,N,f))},o)),o.j=c}function DS(o,c){const f=new Ra;if(l.Image){const p=new Image;p.onload=_(Ei,f,"TestLoadImage: loaded",!0,c,p),p.onerror=_(Ei,f,"TestLoadImage: error",!1,c,p),p.onabort=_(Ei,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=_(Ei,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function OS(o,c){const f=new Ra,p=new AbortController,N=setTimeout(()=>{p.abort(),Ei(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(M=>{clearTimeout(N),M.ok?Ei(f,"TestPingServer: ok",!0,c):Ei(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Ei(f,"TestPingServer: error",!1,c)})}function Ei(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function VS(){this.g=new gS}function MS(o,c,f){const p=f||"";try{lp(o,function(N,M){let j=N;h(N)&&(j=fh(N)),c.push(p+M+"="+encodeURIComponent(j))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function Nl(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Nl,dh),Nl.prototype.g=function(){return new xl(this.l,this.j)},Nl.prototype.i=function(o){return function(){return o}}({});function xl(o,c){st.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(xl,st),e=xl.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Oa(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function gp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Da(this):Oa(this),this.readyState==3&&gp(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Da(this))},e.Qa=function(o){this.g&&(this.response=o,Da(this))},e.ga=function(){this.g&&Da(this)};function Da(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Oa(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Oa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function pp(o){let c="";return B(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Ah(o,c,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=pp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Mt(o,c,f))}function Ft(o){st.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ft,st);var kS=/^https?$/i,PS=["POST","PUT"];e=Ft.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ph.g(),this.v=this.o?Gg(this.o):Gg(ph),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){yp(this,M);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const M of p.keys())f.set(M,p.get(M));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(PS,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,j]of f)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ep(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){yp(this,M)}};function yp(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,_p(o),Dl(o)}function _p(o){o.A||(o.A=!0,At(o,"complete"),At(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,At(this,"complete"),At(this,"abort"),Dl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dl(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?vp(this):this.bb())},e.bb=function(){vp(this)};function vp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Fn(o)!=4||o.Z()!=2)){if(o.u&&Fn(o)==4)Ta(o.Ea,0,o);else if(At(o,"readystatechange"),Fn(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var N=String(o.D).match(up)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!kS.test(N?N.toLowerCase():"")}f=p}if(f)At(o,"complete"),At(o,"success");else{o.m=6;try{var M=2<Fn(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",_p(o)}}finally{Dl(o)}}}}function Dl(o,c){if(o.g){Ep(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||At(o,"ready");try{f.onreadystatechange=p}catch{}}}function Ep(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Fn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),mS(c)}};function Tp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function US(o){const c={};o=(o.g&&2<=Fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var f=C(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[N]||[];c[N]=M,M.push(f)}T(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function bp(o){this.Aa=0,this.i=[],this.j=new Ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,o),this.cb=Va("retryDelaySeedMs",1e4,o),this.Wa=Va("forwardChannelMaxRetries",2,o),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ip(o&&o.concurrentRequestLimit),this.Da=new VS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=bp.prototype,e.la=8,e.G=1,e.connect=function(o,c,f,p){Ve(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Dp(this,null,this.W),Vl(this)};function Sh(o){if(Ap(o),o.G==3){var c=o.U++,f=Hn(o.I);if(Mt(f,"SID",o.K),Mt(f,"RID",c),Mt(f,"TYPE","terminate"),Ma(o,f),c=new _i(o,o.j,c),c.L=2,c.v=Cl(Hn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Op(c.j,null),c.g.ea(c.v)),c.F=Date.now(),wl(c)}xp(o)}function Ol(o){o.g&&(Rh(o),o.g.cancel(),o.g=null)}function Ap(o){Ol(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ml(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Vl(o){if(!sp(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||xt(),Y||(X(),Y=!0),gt.add(c,o),o.B=0}}function LS(o,c){return rp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=wa(m(o.Ga,o,c),Np(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new _i(this,this.j,o);let M=this.o;if(this.S&&(M?(M=y(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)t:{for(var c=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break t}if(c===4096||f===this.i.length-1){c=f+1;break t}}c=1e3}else c=1e3;c=wp(this,N,c),f=Hn(this.I),Mt(f,"RID",o),Mt(f,"CVER",22),this.D&&Mt(f,"X-HTTP-Session-Id",this.D),Ma(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(pp(M)))+"&"+c:this.m&&Ah(f,this.m,M)),bh(this.h,N),this.Ua&&Mt(f,"TYPE","init"),this.P?(Mt(f,"$req",c),Mt(f,"SID","null"),N.T=!0,_h(N,f,null)):_h(N,f,c),this.G=2}}else this.G==3&&(o?Sp(this,o):this.i.length==0||sp(this.h)||Sp(this))};function Sp(o,c){var f;c?f=c.l:f=o.U++;const p=Hn(o.I);Mt(p,"SID",o.K),Mt(p,"RID",f),Mt(p,"AID",o.T),Ma(o,p),o.m&&o.o&&Ah(p,o.m,o.o),f=new _i(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=wp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),bh(o.h,f),_h(f,p,c)}function Ma(o,c){o.H&&B(o.H,function(f,p){Mt(c,p,f)}),o.l&&lp({},function(f,p){Mt(c,p,f)})}function wp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;t:{var N=o.i;let M=-1;for(;;){const j=["count="+f];M==-1?0<f?(M=N[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let Dt=!0;for(let ge=0;ge<f;ge++){let pt=N[ge].g;const Se=N[ge].map;if(pt-=M,0>pt)M=Math.max(0,N[ge].g-100),Dt=!1;else try{MS(Se,j,"req"+pt+"_")}catch{p&&p(Se)}}if(Dt){p=j.join("&");break t}}}return o=o.i.splice(0,f),c.D=o,p}function Rp(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||xt(),Y||(X(),Y=!0),gt.add(c,o),o.v=0}}function wh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=wa(m(o.Fa,o),Np(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Ip(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=wa(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),Ol(this),Ip(this))};function Rh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Ip(o){o.g=new _i(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Hn(o.qa);Mt(c,"RID","rpc"),Mt(c,"SID",o.K),Mt(c,"AID",o.T),Mt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Mt(c,"TO",o.ja),Mt(c,"TYPE","xmlhttp"),Ma(o,c),o.m&&o.o&&Ah(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Cl(Hn(c)),f.m=null,f.P=!0,tp(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Ol(this),wh(this),Ve(19))};function Ml(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Cp(o,c){var f=null;if(o.g==c){Ml(o),Rh(o),o.g=null;var p=2}else if(Th(o.h,c))f=c.D,ap(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=bl(),At(p,new $g(p,f)),Vl(o)}else Rp(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&LS(o,c)||p==2&&wh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:bs(o,5);break;case 4:bs(o,10);break;case 3:bs(o,6);break;default:bs(o,2)}}}function Np(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function bs(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new Ts(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Rl(p,"https"),Cl(p),N?DS(p.toString(),f):OS(p.toString(),f)}else Ve(2);o.G=0,o.l&&o.l.sa(c),xp(o),Ap(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function xp(o){if(o.G=0,o.ka=[],o.l){const c=op(o.h);(c.length!=0||o.i.length!=0)&&(O(o.ka,c),O(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Dp(o,c,f){var p=f instanceof Ts?Hn(f):new Ts(f);if(p.g!="")c&&(p.g=c+"."+p.g),Il(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new Ts(null);p&&Rl(M,p),c&&(M.g=c),N&&Il(M,N),f&&(M.l=f),p=M}return f=o.D,c=o.ya,f&&c&&Mt(p,f,c),Mt(p,"VER",o.la),Ma(o,p),p}function Op(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ft(new Nl({eb:f})):new Ft(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vp(){}e=Vp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function kl(){}kl.prototype.g=function(o,c){return new Ge(o,c)};function Ge(o,c){st.call(this),this.g=new bp(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new nr(this)}x(Ge,st),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Sh(this.g)},Ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=fh(o),o=f);c.i.push(new TS(c.Ya++,o)),c.G==3&&Vl(c)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Sh(this.g),delete this.g,Ge.aa.N.call(this)};function Mp(o){mh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const f in c){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}x(Mp,mh);function kp(){gh.call(this),this.status=1}x(kp,gh);function nr(o){this.g=o}x(nr,Vp),nr.prototype.ua=function(){At(this.g,"a")},nr.prototype.ta=function(o){At(this.g,new Mp(o))},nr.prototype.sa=function(o){At(this.g,new kp)},nr.prototype.ra=function(){At(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,JT=function(){return new kl},WT=function(){return bl()},ZT=vs,bd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,yu=Al,Zg.COMPLETE="complete",$T=Zg,Qg.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",st.prototype.listen=st.prototype.K,Ya=Qg,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,XT=Ft}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const v_="@firebase/firestore",E_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Hm("@firebase/firestore");function cr(){return qs.logLevel}function F(e,...t){if(qs.logLevel<=ot.DEBUG){const n=t.map(Qm);qs.debug(`Firestore (${ma}): ${e}`,...n)}}function hi(e,...t){if(qs.logLevel<=ot.ERROR){const n=t.map(Qm);qs.error(`Firestore (${ma}): ${e}`,...n)}}function Jr(e,...t){if(qs.logLevel<=ot.WARN){const n=t.map(Qm);qs.warn(`Firestore (${ma}): ${e}`,...n)}}function Qm(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,tb(e,i,n)}function tb(e,t,n){let i=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw hi(i),new Error(i)}function mt(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||tb(t,s,i)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends pi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ce.UNAUTHENTICATED))}shutdown(){}}class AI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SI{constructor(t){this.t=t,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ri,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ri)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new eb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Ce(t)}}class wI{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RI{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new wI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class II{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new T_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new T_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=CI(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function lt(e,t){return e<t?-1:e>t?1:0}function Ad(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return gf(s)===gf(r)?lt(s,r):gf(s)?1:-1}return lt(e.length,t.length)}const NI=55296,xI=57343;function gf(e){const t=e.charCodeAt(0);return t>=NI&&t<=xI}function ta(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="__name__";class Cn{constructor(t,n,i){n===void 0?n=0:n>t.length&&K(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&K(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Cn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Cn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Cn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return lt(t.length,n.length)}static compareSegments(t,n){const i=Cn.isNumericId(t),s=Cn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Cn.extractNumericId(t).compare(Cn.extractNumericId(n)):Ad(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Zi.fromString(t.substring(4,t.length-2))}}class Nt extends Cn{construct(t,n,i){return new Nt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const DI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends Cn{construct(t,n,i){return new ve(t,n,i)}static isValidIdentifier(t){return DI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b_}static keyField(){return new ve([b_])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ve(n)}static emptyPath(){return new ve([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.path=t}static fromPath(t){return new Q(Nt.fromString(t))}static fromName(t){return new Q(Nt.fromString(t).popFirst(5))}static empty(){return new Q(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Nt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Q(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e,t,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function OI(e,t,n,i){if(t===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function A_(e){if(!Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function S_(e){if(Q.isDocumentKey(e))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ib(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Hc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K(12329,{type:typeof e})}function nn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hc(e);throw new z(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t){const n={typeString:e};return t&&(n.value=t),n}function ll(e,t){if(!ib(e))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const a=e[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=-62135596800,R_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*R_);return new kt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<w_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/R_}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ll(t,kt._jsonSchema))return new kt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-w_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:te("string",kt._jsonSchemaVersion),seconds:te("number"),nanoseconds:te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${static fromTimestamp(t){return new $(t)}static min(){return new $(new kt(0,0))}static max(){return new $(new kt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=-1;function VI(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=$.fromTimestamp(i===1e9?new kt(n+1,0):new kt(n,i));return new ss(s,Q.empty(),t)}function MI(e){return new ss(e.readTime,e.key,ko)}class ss{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ss($.min(),Q.empty(),ko)}static max(){return new ss($.max(),Q.empty(),ko)}}function kI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Q.comparator(e.documentKey,t.documentKey),n!==0?n:lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==PI)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,i)=>{n(t)})}static reject(t){return new P((n,i)=>{i(t)})}static waitFor(t){return new P((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=P.resolve(!1);for(const i of t)n=n.next(s=>s?P.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new P((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(t,n){return new P((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function LI(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=-1;function ul(e){return e==null}function ac(e){return e===0&&1/e==-1/0}function jI(e){return typeof e=="number"&&Number.isInteger(e)&&!ac(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="";function zI(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=I_(t)),t=BI(e.get(n),t);return I_(t)}function BI(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case sb:n+="";break;default:n+=r}}return n}function I_(e){return e+sb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ds(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t,n){this.comparator=t,this.root=n||ye.EMPTY}insert(t,n){return new Ht(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new Ht(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jl(this.root,t,this.comparator,!0)}}class Jl{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??ye.RED,this.left=s??ye.EMPTY,this.right=r??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new ye(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return ye.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw K(27949);return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new ye(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.comparator=t,this.data=new Ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new N_(this.data.getIterator())}getIteratorFrom(t){return new N_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ae)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ae(this.comparator);return n.data=t,n}}class N_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.fields=t,t.sort(ve.comparator)}static empty(){return new Ze([])}unionWith(t){let n=new ae(ve.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ze(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ta(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ab("Invalid base64 string: "+r):r}}(t);return new be(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new be(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}be.EMPTY_BYTE_STRING=new be("");const qI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=qI.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xt(e.seconds),nanos:Xt(e.nanos)}}function Xt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function as(e){return typeof e=="string"?be.fromBase64String(e):be.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="server_timestamp",lb="__type__",ub="__previous_value__",cb="__local_write_time__";function Xm(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[lb])==null?void 0:i.stringValue)===ob}function Gc(e){const t=e.mapValue.fields[ub];return Xm(t)?Gc(t):t}function Po(e){const t=rs(e.mapValue.fields[cb].timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n,i,s,r,a,l,u,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const oc="(default)";class Uo{constructor(t,n){this.projectId=t,this.database=n||oc}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===oc}isEqual(t){return t instanceof Uo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="__type__",FI="__max__",tu={mapValue:{}},fb="__vector__",lc="value";function os(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xm(e)?4:QI(e)?9007199254740991:GI(e)?10:11:K(28295,{value:e})}function Ln(e,t){if(e===t)return!0;const n=os(e);if(n!==os(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Po(e).isEqual(Po(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=rs(s.timestampValue),l=rs(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return as(s.bytesValue).isEqual(as(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Xt(s.geoPointValue.latitude)===Xt(r.geoPointValue.latitude)&&Xt(s.geoPointValue.longitude)===Xt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Xt(s.integerValue)===Xt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Xt(s.doubleValue),l=Xt(r.doubleValue);return a===l?ac(a)===ac(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return ta(e.arrayValue.values||[],t.arrayValue.values||[],Ln);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(C_(a)!==C_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Ln(a[u],l[u])))return!1;return!0}(e,t);default:return K(52216,{left:e})}}function Lo(e,t){return(e.values||[]).find(n=>Ln(n,t))!==void 0}function ea(e,t){if(e===t)return 0;const n=os(e),i=os(t);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=Xt(r.integerValue||r.doubleValue),u=Xt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return x_(e.timestampValue,t.timestampValue);case 4:return x_(Po(e),Po(t));case 5:return Ad(e.stringValue,t.stringValue);case 6:return function(r,a){const l=as(r),u=as(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=lt(l[h],u[h]);if(d!==0)return d}return lt(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=lt(Xt(r.latitude),Xt(a.latitude));return l!==0?l:lt(Xt(r.longitude),Xt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return D_(e.arrayValue,t.arrayValue);case 10:return function(r,a){var m,_,x,V;const l=r.fields||{},u=a.fields||{},h=(m=l[lc])==null?void 0:m.arrayValue,d=(_=u[lc])==null?void 0:_.arrayValue,g=lt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return g!==0?g:D_(h,d)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===tu.mapValue&&a===tu.mapValue)return 0;if(r===tu.mapValue)return 1;if(a===tu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=Ad(u[g],d[g]);if(m!==0)return m;const _=ea(l[u[g]],h[d[g]]);if(_!==0)return _}return lt(u.length,d.length)}(e.mapValue,t.mapValue);default:throw K(23264,{he:n})}}function x_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lt(e,t);const n=rs(e),i=rs(t),s=lt(n.seconds,i.seconds);return s!==0?s:lt(n.nanos,i.nanos)}function D_(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ea(n[s],i[s]);if(r)return r}return lt(n.length,i.length)}function na(e){return Sd(e)}function Sd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return as(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Sd(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Sd(n.fields[a])}`;return s+"}"}(e.mapValue):K(61005,{value:e})}function _u(e){switch(os(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gc(e);return t?16+_u(t):16;case 5:return 2*e.stringValue.length;case 6:return as(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+_u(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return ds(i.fields,(r,a)=>{s+=r.length+_u(a)}),s}(e.mapValue);default:throw K(13486,{value:e})}}function O_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function wd(e){return!!e&&"integerValue"in e}function $m(e){return!!e&&"arrayValue"in e}function V_(e){return!!e&&"nullValue"in e}function M_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vu(e){return!!e&&"mapValue"in e}function GI(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[hb])==null?void 0:i.stringValue)===fb}function mo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ds(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=mo(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mo(e.arrayValue.values[n]);return t}return{...e}}function QI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===FI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.value=t}static empty(){return new ke({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!vu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=mo(n)}setAll(t){let n=ve.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=mo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ln(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];vu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){ds(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new ke(mo(this.value))}}function db(e){const t=[];return ds(e.fields,(n,i)=>{const s=new ve([n]);if(vu(i)){const r=db(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new Ze(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new he(t,0,$.min(),$.min(),$.min(),ke.empty(),0)}static newFoundDocument(t,n,i,s){return new he(t,1,n,$.min(),i,s,0)}static newNoDocument(t,n){return new he(t,2,n,$.min(),$.min(),ke.empty(),0)}static newUnknownDocument(t,n){return new he(t,3,n,$.min(),$.min(),ke.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ke.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof he&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t,n){this.position=t,this.inclusive=n}}function k_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=Q.comparator(Q.fromName(a.referenceValue),n.key):i=ea(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function P_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ln(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,n="asc"){this.field=t,this.dir=n}}function YI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{}class Jt extends mb{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new XI(t,n,i):n==="array-contains"?new WI(t,i):n==="in"?new JI(t,i):n==="not-in"?new tC(t,i):n==="array-contains-any"?new eC(t,i):new Jt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new $I(t,i):new ZI(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ea(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends mb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new An(t,n)}matches(t){return gb(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gb(e){return e.op==="and"}function pb(e){return KI(e)&&gb(e)}function KI(e){for(const t of e.filters)if(t instanceof An)return!1;return!0}function Rd(e){if(e instanceof Jt)return e.field.canonicalString()+e.op.toString()+na(e.value);if(pb(e))return e.filters.map(t=>Rd(t)).join(",");{const t=e.filters.map(n=>Rd(n)).join(",");return`${e.op}(${t})`}}function yb(e,t){return e instanceof Jt?function(i,s){return s instanceof Jt&&i.op===s.op&&i.field.isEqual(s.field)&&Ln(i.value,s.value)}(e,t):e instanceof An?function(i,s){return s instanceof An&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&yb(a,s.filters[l]),!0):!1}(e,t):void K(19439)}function _b(e){return e instanceof Jt?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(e):e instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(_b).join(" ,")+"}"}(e):"Filter"}class XI extends Jt{constructor(t,n,i){super(t,n,i),this.key=Q.fromName(i.referenceValue)}matches(t){const n=Q.comparator(t.key,this.key);return this.matchesComparison(n)}}class $I extends Jt{constructor(t,n){super(t,"in",n),this.keys=vb("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class ZI extends Jt{constructor(t,n){super(t,"not-in",n),this.keys=vb("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function vb(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class WI extends Jt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return $m(n)&&Lo(n.arrayValue,this.value)}}class JI extends Jt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class tC extends Jt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lo(this.value.arrayValue,n)}}class eC extends Jt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Lo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function U_(e,t=null,n=[],i=[],s=null,r=null,a=null){return new nC(e,t,n,i,s,r,a)}function Zm(e){const t=J(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Rd(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ul(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>na(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>na(i)).join(",")),t.Te=n}return t.Te}function Wm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!YI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!yb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!P_(e.startAt,t.startAt)&&P_(e.endAt,t.endAt)}function Id(e){return Q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iC(e,t,n,i,s,r,a,l){return new ya(e,t,n,i,s,r,a,l)}function Qc(e){return new ya(e)}function L_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Eb(e){return e.collectionGroup!==null}function go(e){const t=J(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ae(ve.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new jo(r,i))}),n.has(ve.keyField().canonicalString())||t.Ie.push(new jo(ve.keyField(),i))}return t.Ie}function Mn(e){const t=J(e);return t.Ee||(t.Ee=sC(t,go(e))),t.Ee}function sC(e,t){if(e.limitType==="F")return U_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new jo(s.field,r)});const n=e.endAt?new uc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new uc(e.startAt.position,e.startAt.inclusive):null;return U_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Cd(e,t){const n=e.filters.concat([t]);return new ya(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nd(e,t,n){return new ya(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yc(e,t){return Wm(Mn(e),Mn(t))&&e.limitType===t.limitType}function Tb(e){return`${Zm(Mn(e))}|lt:${e.limitType}`}function hr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>_b(s)).join(", ")}]`),ul(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>na(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>na(s)).join(",")),`Target(${i})`}(Mn(e))}; limitType=${e.limitType})`}function Kc(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Q.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of go(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=k_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,go(i),s)||i.endAt&&!function(a,l,u){const h=k_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,go(i),s))}(e,t)}function rC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bb(e){return(t,n)=>{let i=!1;for(const s of go(e)){const r=aC(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function aC(e,t,n){const i=e.field.isKeyField()?Q.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?ea(u,h):K(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return K(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ds(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Ht(Q.comparator);function fi(){return oC}const Ab=new Ht(Q.comparator);function Ka(...e){let t=Ab;for(const n of e)t=t.insert(n.key,n);return t}function Sb(e){let t=Ab;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Cs(){return po()}function wb(){return po()}function po(){return new $s(e=>e.toString(),(e,t)=>e.isEqual(t))}const lC=new Ht(Q.comparator),uC=new ae(Q.comparator);function ut(...e){let t=uC;for(const n of e)t=t.add(n);return t}const cC=new ae(lt);function hC(){return cC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(t)?"-0":t}}function Rb(e){return{integerValue:""+e}}function fC(e,t){return jI(t)?Rb(t):Jm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function dC(e,t,n){return e instanceof zo?function(s,r){const a={fields:{[lb]:{stringValue:ob},[cb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Xm(r)&&(r=Gc(r)),r&&(a.fields[ub]=r),{mapValue:a}}(n,t):e instanceof Bo?Cb(e,t):e instanceof qo?Nb(e,t):function(s,r){const a=Ib(s,r),l=j_(a)+j_(s.Ae);return wd(a)&&wd(s.Ae)?Rb(l):Jm(s.serializer,l)}(e,t)}function mC(e,t,n){return e instanceof Bo?Cb(e,t):e instanceof qo?Nb(e,t):n}function Ib(e,t){return e instanceof cc?function(i){return wd(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class zo extends Xc{}class Bo extends Xc{constructor(t){super(),this.elements=t}}function Cb(e,t){const n=xb(t);for(const i of e.elements)n.some(s=>Ln(s,i))||n.push(i);return{arrayValue:{values:n}}}class qo extends Xc{constructor(t){super(),this.elements=t}}function Nb(e,t){let n=xb(t);for(const i of e.elements)n=n.filter(s=>!Ln(s,i));return{arrayValue:{values:n}}}class cc extends Xc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function j_(e){return Xt(e.integerValue||e.doubleValue)}function xb(e){return $m(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,n){this.field=t,this.transform=n}}function pC(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Bo&&s instanceof Bo||i instanceof qo&&s instanceof qo?ta(i.elements,s.elements,Ln):i instanceof cc&&s instanceof cc?Ln(i.Ae,s.Ae):i instanceof zo&&s instanceof zo}(e.transform,t.transform)}class yC{constructor(t,n){this.version=t,this.transformResults=n}}class Ee{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ee}static exists(t){return new Ee(void 0,t)}static updateTime(t){return new Ee(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Eu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class $c{}function Db(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Zc(e.key,Ee.none()):new cl(e.key,e.data,Ee.none());{const n=e.data,i=ke.empty();let s=new ae(ve.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new ms(e.key,i,new Ze(s.toArray()),Ee.none())}}function _C(e,t,n){e instanceof cl?function(s,r,a){const l=s.value.clone(),u=B_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof ms?function(s,r,a){if(!Eu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=B_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(Ob(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function yo(e,t,n,i){return e instanceof cl?function(r,a,l,u){if(!Eu(r.precondition,a))return l;const h=r.value.clone(),d=q_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof ms?function(r,a,l,u){if(!Eu(r.precondition,a))return l;const h=q_(r.fieldTransforms,u,a),d=a.data;return d.setAll(Ob(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(r,a,l){return Eu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function vC(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=Ib(i.transform,s||null);r!=null&&(n===null&&(n=ke.empty()),n.set(i.field,r))}return n||null}function z_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ta(i,s,(r,a)=>pC(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class cl extends $c{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ms extends $c{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Ob(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function B_(e,t,n){const i=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,mC(a,l,n[s]))}return i}function q_(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,dC(r,a,t))}return i}class Zc extends $c{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vb extends $c{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&_C(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=yo(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=wb();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=Db(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ut())}isEqual(t){return this.batchId===t.batchId&&ta(this.mutations,t.mutations,(n,i)=>z_(n,i))&&ta(this.baseMutations,t.baseMutations,(n,i)=>z_(n,i))}}class tg{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){mt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return lC}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new tg(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,ft;function Mb(e){switch(e){case k.OK:return K(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return K(15467,{code:e})}}function kb(e){if(e===void 0)return hi("GRPC error has no .code"),k.UNKNOWN;switch(e){case Zt.OK:return k.OK;case Zt.CANCELLED:return k.CANCELLED;case Zt.UNKNOWN:return k.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return k.INTERNAL;case Zt.UNAVAILABLE:return k.UNAVAILABLE;case Zt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Zt.NOT_FOUND:return k.NOT_FOUND;case Zt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Zt.ABORTED:return k.ABORTED;case Zt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Zt.DATA_LOSS:return k.DATA_LOSS;default:return K(39323,{code:e})}}(ft=Zt||(Zt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Zi([4294967295,4294967295],0);function H_(e){const t=AC().encode(e),n=new KT;return n.update(t),new Uint8Array(n.digest())}function F_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Zi([n,i],0),new Zi([s,r],0)]}class eg{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Xa(`Invalid padding: ${n}`);if(i<0)throw new Xa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Zi.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(Zi.fromNumber(i)));return s.compare(SC)===1&&(s=new Zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=H_(t),[i,s]=F_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new eg(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=H_(t),[i,s]=F_(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,hl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Wc($.min(),s,new Ht(lt),fi(),ut())}}class hl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new hl(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class Pb{constructor(t,n){this.targetId=t,this.Ce=n}}class Ub{constructor(t,n,i=be.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class G_{constructor(){this.ve=0,this.Fe=Q_(),this.Me=be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),i=ut();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:K(38017,{changeType:r})}}),new hl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=Q_()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wC{constructor(t){this.Ge=t,this.ze=new Map,this.je=fi(),this.Je=eu(),this.He=eu(),this.Ye=new Ht(lt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:K(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Id(r))if(i===0){const a=new Q(r.path);this.et(n,a,he.newNoDocument(a,$.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=as(i).toUint8Array()}catch(u){if(u instanceof ab)return Jr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new eg(a,s,r)}catch(u){return Jr(u instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Id(l.target)){const u=new Q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,he.newNoDocument(u,t))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=ut();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(t));const s=new Wc(t,n,this.Ye,this.je,i);return this.je=fi(),this.Je=eu(),this.He=eu(),this.Ye=new Ht(lt),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new G_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ae(lt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ae(lt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new G_),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function eu(){return new Ht(Q.comparator)}function Q_(){return new Ht(Q.comparator)}const RC={asc:"ASCENDING",desc:"DESCENDING"},IC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CC={and:"AND",or:"OR"};class NC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xd(e,t){return e.useProto3Json||ul(t)?t:{value:t}}function hc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xC(e,t){return hc(e,t.toTimestamp())}function sn(e){return mt(!!e,49232),$.fromTimestamp(function(n){const i=rs(n);return new kt(i.seconds,i.nanos)}(e))}function ng(e,t){return Dd(e,t).canonicalString()}function Dd(e,t){const n=function(s){return new Nt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function jb(e){const t=Nt.fromString(e);return mt(Gb(t),10190,{key:t.toString()}),t}function fc(e,t){return ng(e.databaseId,t.path)}function _o(e,t){const n=jb(t);if(n.get(1)!==e.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Q(Bb(n))}function zb(e,t){return ng(e.databaseId,t)}function DC(e){const t=jb(e);return t.length===4?Nt.emptyPath():Bb(t)}function Od(e){return new Nt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bb(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Y_(e,t,n){return{name:fc(e,t),fields:n.value.mapValue.fields}}function OC(e,t){return"found"in t?function(i,s){mt(!!s.found,43571),s.found.name,s.found.updateTime;const r=_o(i,s.found.name),a=sn(s.found.updateTime),l=s.found.createTime?sn(s.found.createTime):$.min(),u=new ke({mapValue:{fields:s.found.fields}});return he.newFoundDocument(r,a,l,u)}(e,t):"missing"in t?function(i,s){mt(!!s.missing,3894),mt(!!s.readTime,22933);const r=_o(i,s.missing),a=sn(s.readTime);return he.newNoDocument(r,a)}(e,t):K(7234,{result:t})}function VC(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(mt(d===void 0||typeof d=="string",58123),be.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),be.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?k.UNKNOWN:kb(h.code);return new z(d,h.message||"")}(a);n=new Ub(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=_o(e,i.document.name),r=sn(i.document.updateTime),a=i.document.createTime?sn(i.document.createTime):$.min(),l=new ke({mapValue:{fields:i.document.fields}}),u=he.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Tu(h,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=_o(e,i.document),r=i.readTime?sn(i.readTime):$.min(),a=he.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Tu([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=_o(e,i.document),r=i.removedTargetIds||[];n=new Tu([],r,s,null)}else{if(!("filter"in t))return K(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new bC(s,r),l=i.targetId;n=new Pb(l,a)}}return n}function qb(e,t){let n;if(t instanceof cl)n={update:Y_(e,t.key,t.value)};else if(t instanceof Zc)n={delete:fc(e,t.key)};else if(t instanceof ms)n={update:Y_(e,t.key,t.data),updateMask:qC(t.fieldMask)};else{if(!(t instanceof Vb))return K(16599,{Vt:t.type});n={verify:fc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof zo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:xC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:K(27497)}(e,t.precondition)),n}function MC(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map(n=>function(s,r){let a=s.updateTime?sn(s.updateTime):sn(r);return a.isEqual($.min())&&(a=sn(r)),new yC(a,s.transformResults||[])}(n,t))):[]}function kC(e,t){return{documents:[zb(e,t.path)]}}function PC(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zb(e,s);const r=function(h){if(h.length!==0)return Fb(An.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:fr(m.field),direction:jC(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=xd(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:n,parent:s}}function UC(e){let t=DC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){mt(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(g){const m=Hb(g);return m instanceof An&&pb(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(x){return new jo(dr(x.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,ul(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,_=g.values||[];return new uc(_,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,_=g.values||[];return new uc(_,m)}(n.endAt)),iC(t,s,a,r,l,"F",u,h)}function LC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Hb(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=dr(n.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=dr(n.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dr(n.unaryFilter.field);return Jt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=dr(n.unaryFilter.field);return Jt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(e):e.fieldFilter!==void 0?function(n){return Jt.create(dr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(i=>Hb(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(e):K(30097,{filter:e})}function jC(e){return RC[e]}function zC(e){return IC[e]}function BC(e){return CC[e]}function fr(e){return{fieldPath:e.canonicalString()}}function dr(e){return ve.fromServerFormat(e.fieldPath)}function Fb(e){return e instanceof Jt?function(n){if(n.op==="=="){if(M_(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NAN"}};if(V_(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M_(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NAN"}};if(V_(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fr(n.field),op:zC(n.op),value:n.value}}}(e):e instanceof An?function(n){const i=n.getFilters().map(s=>Fb(s));return i.length===1?i[0]:{compositeFilter:{op:BC(n.op),filters:i}}}(e):K(54877,{filter:e})}function qC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Gb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n,i,s,r=$.min(),a=$.min(),l=be.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Li(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t){this.yt=t}}function FC(e){const t=UC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Nd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.Cn=new QC}addToCollectionParentIndex(t,n){return this.Cn.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ss.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ss.min())}updateCollectionGroup(t,n,i){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class QC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new ae(Nt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new ae(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qb=41943040;class Be{static withCacheSize(t){return new Be(t,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Be.DEFAULT_COLLECTION_PERCENTILE=10,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Be.DEFAULT=new Be(Qb,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Be.DISABLED=new Be(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ia(0)}static cr(){return new ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="LruGarbageCollector",YC=1048576;function $_([e,t],[n,i]){const s=lt(e,n);return s===0?lt(t,i):s}class KC{constructor(t){this.Ir=t,this.buffer=new ae($_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();$_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XC{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){F(X_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pa(n)?F(X_,"Ignoring IndexedDB error during garbage collection: ",n):await ga(n)}await this.Vr(3e5)})}}class $C{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return P.resolve(Fc.ce);const i=new KC(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(K_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K_):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(h=Date.now(),cr()<=ot.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function ZC(e,t){return new $C(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.changes=new $s(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,he.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&yo(i.mutation,s,Ze.empty(),kt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ut()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ut()){const s=Cs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=Ka();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Cs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ut()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=fi();const a=po(),l=function(){return po()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof ms)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),yo(d.mutation,h,d.mutation.getFieldMask(),kt.now())):a.set(h.key,Ze.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new JC(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(t,n){const i=po();let s=new Ht((a,l)=>a-l),r=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Ze.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(s.get(l.batchId)||ut()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=wb();d.forEach(m=>{if(!r.has(m)){const _=Db(n.get(m),i.get(m));_!==null&&g.set(m,_),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return P.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Eb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):P.resolve(Cs());let l=ko,u=r;return a.next(h=>P.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,ut())).next(d=>({batchId:l,changes:Sb(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Q(n)).next(i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=Ka();return this.indexManager.getCollectionParents(t,r).next(l=>P.forEach(l,u=>{const h=function(g,m){return new ya(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,he.newInvalidDocument(d)))});let l=Ka();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&yo(d.mutation,h,Ze.empty(),kt.now()),Kc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:sn(s.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:FC(s.bundledQuery),readTime:sn(s.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.overlays=new Ht(Q.comparator),this.qr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Cs();return P.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),P.resolve()}getOverlaysForCollection(t,n,i){const s=Cs(),r=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return P.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Ht((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=Cs(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Cs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return P.resolve(l)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new TC(n,i));let r=this.qr.get(n);r===void 0&&(r=ut(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.sessionToken=be.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Qr=new ae(le.$r),this.Ur=new ae(le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new le(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new le(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new Q(new Nt([])),i=new le(n,t),s=new le(n,t+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Q(new Nt([])),i=new le(n,t),s=new le(n,t+1);let r=ut();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new le(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class le{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Q.comparator(t.key,n.key)||lt(t.Yr,n.Yr)}static Kr(t,n){return lt(t.Yr,n.Yr)||Q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ae(le.$r)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new EC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new le(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(t,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Km:this.tr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new le(n,0),s=new le(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ae(lt);return n.forEach(s=>{const r=new le(s,0),a=new le(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),P.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;Q.isDocumentKey(r)||(r=r.child(""));const a=new le(new Q(r),0);let l=new ae(lt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),P.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return P.forEach(n.mutations,s=>{const r=new le(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new le(n,0),s=this.Zr.firstAfterOrEqual(i);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(t){this.ri=t,this.docs=function(){return new Ht(Q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():he.newInvalidDocument(n))}getEntries(t,n){let i=fi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():he.newInvalidDocument(s))}),P.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=fi();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||kI(MI(d),i)<=0||(s.has(d.key)||Kc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,i,s){K(9500)}ii(t,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new aN(this)}getSize(t){return P.resolve(this.size)}}class aN extends WC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),P.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t){this.persistence=t,this.si=new $s(n=>Zm(n),Wm),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=ia.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),P.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ia(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Pr(n),P.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(r).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return P.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),P.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return P.resolve(i)}containsKey(t,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t,n){this.ui={},this.overlays={},this.ci=new Fc(0),this.li=!1,this.li=!0,this.hi=new iN,this.referenceDelegate=t(this),this.Pi=new oN(this),this.indexManager=new GC,this.remoteDocumentCache=function(s){return new rN(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new HC(n),this.Ii=new eN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new nN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new sN(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){F("MemoryPersistence","Starting transaction:",t);const s=new lN(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return P.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class lN extends UI{constructor(t){super(),this.currentSequenceNumber=t}}class sg{constructor(t){this.persistence=t,this.Ri=new ig,this.Vi=null}static mi(t){return new sg(t)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),P.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,i=>{const s=Q.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,$.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class dc{constructor(t,n){this.persistence=t,this.pi=new $s(i=>zI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=ZC(this,n)}static mi(t,n){return new dc(t,n)}Ei(){}di(t){return P.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return P.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?P.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(i++,r.removeEntry(a,$.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),P.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=_u(t.data.value)),n}br(t,n,i){return P.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return P.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=ut(),s=ut();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new rg(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nR()?8:LI(De())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new uN;return this.Ss(t,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(cr()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",hr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(cr()<=ot.DEBUG&&F("QueryEngine","Query:",hr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(cr()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",hr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mn(n))):P.resolve())}ys(t,n){if(L_(n))return P.resolve(null);let i=Mn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nd(n,null,"F"),i=Mn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=ut(...r);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,Nd(n,null,"F")):this.vs(t,h,n,u)}))})))}ws(t,n,i,s){return L_(n)||s.isEqual($.min())?P.resolve(null):this.ps.getDocuments(t,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?P.resolve(null):(cr()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hr(n)),this.vs(t,a,n,VI(s,ko)).next(l=>l))})}Ds(t,n){let i=new ae(bb(t));return n.forEach((s,r)=>{Kc(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return cr()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",hr(n)),this.ps.getDocumentsMatchingQuery(t,n,ss.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="LocalStore",hN=3e8;class fN{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Ht(lt),this.xs=new $s(r=>Zm(r),Wm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function dN(e,t,n,i){return new fN(e,t,n,i)}async function Kb(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=ut();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function mN(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let _=P.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(V=>{const O=h.docVersions.get(x);mt(O!==null,48541),V.version.compareTo(O)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ut();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function Xb(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function gN(e,t){const n=J(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((d,g)=>{const m=s.get(g);if(!m)return;l.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,d.addedDocuments,g)));let _=m.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(be.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(g,_),function(V,O,S){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=hN?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(r,_))});let u=fi(),h=ut();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(pN(r,a,t.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!i.isEqual($.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ms=s,r))}function pN(e,t,n){let i=ut(),s=ut();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=fi();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual($.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):F(ag,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function yN(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Km),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function _N(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,P.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new Li(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Vd(e,t,n){const i=J(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!pa(a))throw a;F(ag,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function Z_(e,t,n){const i=J(e);let s=$.min(),r=ut();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.xs.get(d);return m!==void 0?P.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(i,a,Mn(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,t,n?s:$.min(),n?r:ut())).next(l=>(vN(i,rC(t),l),{documents:l,Qs:r})))}function vN(e,t,n){let i=e.Os.get(t)||$.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class W_{constructor(){this.activeTargetIds=hC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class EN{constructor(){this.Mo=new W_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new W_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="ConnectivityMonitor";class tv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(J_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){F(J_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu=null;function Md(){return nu===null?nu=function(){return 268435456+Math.round(2147483648*Math.random())}():nu++,"0x"+nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="RestConnection",bN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===oc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const a=Md(),l=this.zo(t,n.toUriEncodedString());F(pf,`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(l),d=fa(h);return this.Jo(t,l,u,i,d).then(g=>(F(pf,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Jr(pf,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(t,n,i,s,r,a){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=bN[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="WebChannelConnection";class wN extends AN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const a=Md();return new Promise((l,u)=>{const h=new XT;h.setWithCredentials(!0),h.listenOnce($T.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case yu.NO_ERROR:const g=h.getResponseJson();F(Re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case yu.TIMEOUT:F(Re,`RPC '${t}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:const m=h.getStatus();if(F(Re,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const V=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(x.status);u(new z(V,x.message))}else u(new z(k.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{F(Re,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);F(Re,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,i,15)})}T_(t,n,i){const s=Md(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=JT(),l=WT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");F(Re,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let m=!1,_=!1;const x=new SN({Yo:O=>{_?F(Re,`Not sending because RPC '${t}' stream ${s} is closed:`,O):(m||(F(Re,`Opening RPC '${t}' stream ${s} transport.`),g.open(),m=!0),F(Re,`RPC '${t}' stream ${s} sending:`,O),g.send(O))},Zo:()=>g.close()}),V=(O,S,E)=>{O.listen(S,R=>{try{E(R)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,Ya.EventType.OPEN,()=>{_||(F(Re,`RPC '${t}' stream ${s} transport opened.`),x.o_())}),V(g,Ya.EventType.CLOSE,()=>{_||(_=!0,F(Re,`RPC '${t}' stream ${s} transport closed`),x.a_(),this.E_(g))}),V(g,Ya.EventType.ERROR,O=>{_||(_=!0,Jr(Re,`RPC '${t}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),x.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),V(g,Ya.EventType.MESSAGE,O=>{var S;if(!_){const E=O.data[0];mt(!!E,16349);const R=E,D=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(D){F(Re,`RPC '${t}' stream ${s} received error:`,D);const L=D.status;let B=function(b){const w=Zt[b];if(w!==void 0)return kb(w)}(L),T=D.message;B===void 0&&(B=k.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,x.a_(new z(B,T)),g.close()}else F(Re,`RPC '${t}' stream ${s} received:`,E),x.u_(E)}}),V(l,ZT.STAT_EVENT,O=>{O.stat===bd.PROXY?F(Re,`RPC '${t}' stream ${s} detected buffering proxy`):O.stat===bd.NOPROXY&&F(Re,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(e){return new NC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="PersistentStream";class $b{constructor(t,n,i,s,r,a,l,u){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new og(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return F(ev,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(F(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RN extends $b{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=VC(this.serializer,t),i=function(r){if(!("targetChange"in r))return $.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?sn(a.readTime):$.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Od(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Id(u)?{documents:kC(r,u)}:{query:PC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Lb(r,a.resumeToken);const h=xd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){l.readTime=hc(r,a.snapshotVersion.toTimestamp());const h=xd(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=LC(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Od(this.serializer),n.removeTarget=t,this.q_(n)}}class IN extends $b{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=MC(t.writeResults,t.commitTime),i=sn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Od(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>qb(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{}class NN extends CN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(t,Dd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(k.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,Dd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="RemoteStore";class DN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Zs(this)&&(F(Hs,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await fl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await th(h)}(this))})}),this.Ra=new xN(i,s)}}async function th(e){if(Zs(e))for(const t of e.da)await t(!0)}async function fl(e){for(const t of e.da)await t(!1)}function Zb(e,t){const n=J(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),hg(n)?cg(n):_a(n).O_()&&ug(n,t))}function lg(e,t){const n=J(e),i=_a(n);n.Ia.delete(t),i.O_()&&Wb(n,t),n.Ia.size===0&&(i.O_()?i.L_():Zs(n)&&n.Ra.set("Unknown"))}function ug(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_a(e).Y_(t)}function Wb(e,t){e.Va.Ue(t),_a(e).Z_(t)}function cg(e){e.Va=new wC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),_a(e).start(),e.Ra.ua()}function hg(e){return Zs(e)&&!_a(e).x_()&&e.Ia.size>0}function Zs(e){return J(e).Ea.size===0}function Jb(e){e.Va=void 0}async function ON(e){e.Ra.set("Online")}async function VN(e){e.Ia.forEach((t,n)=>{ug(e,t)})}async function MN(e,t){Jb(e),hg(e)?(e.Ra.ha(t),cg(e)):e.Ra.set("Unknown")}async function kN(e,t,n){if(e.Ra.set("Online"),t instanceof Ub&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(i){F(Hs,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await mc(e,i)}else if(t instanceof Tu?e.Va.Ze(t):t instanceof Pb?e.Va.st(t):e.Va.tt(t),!n.isEqual($.min()))try{const i=await Xb(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(h);d&&r.Ia.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(be.EMPTY_BYTE_STRING,d.snapshotVersion)),Wb(r,u);const g=new Li(d.target,u,h,d.sequenceNumber);ug(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){F(Hs,"Failed to raise snapshot:",i),await mc(e,i)}}async function mc(e,t,n){if(!pa(t))throw t;e.Ea.add(1),await fl(e),e.Ra.set("Offline"),n||(n=()=>Xb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F(Hs,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await th(e)})}function tA(e,t){return t().catch(n=>mc(e,n,t))}async function eh(e){const t=J(e),n=ls(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Km;for(;PN(t);)try{const s=await yN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,UN(t,s)}catch(s){await mc(t,s)}eA(t)&&nA(t)}function PN(e){return Zs(e)&&e.Ta.length<10}function UN(e,t){e.Ta.push(t);const n=ls(e);n.O_()&&n.X_&&n.ea(t.mutations)}function eA(e){return Zs(e)&&!ls(e).x_()&&e.Ta.length>0}function nA(e){ls(e).start()}async function LN(e){ls(e).ra()}async function jN(e){const t=ls(e);for(const n of e.Ta)t.ea(n.mutations)}async function zN(e,t,n){const i=e.Ta.shift(),s=tg.from(i,t,n);await tA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await eh(e)}async function BN(e,t){t&&ls(e).X_&&await async function(i,s){if(function(a){return Mb(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();ls(i).B_(),await tA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await eh(i)}}(e,t),eA(e)&&nA(e)}async function nv(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),F(Hs,"RemoteStore received new credentials");const i=Zs(n);n.Ea.add(3),await fl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await th(n)}async function qN(e,t){const n=J(e);t?(n.Ea.delete(2),await th(n)):t||(n.Ea.add(2),await fl(n),n.Ra.set("Unknown"))}function _a(e){return e.ma||(e.ma=function(n,i,s){const r=J(n);return r.sa(),new RN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:ON.bind(null,e),t_:VN.bind(null,e),r_:MN.bind(null,e),H_:kN.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),hg(e)?cg(e):e.Ra.set("Unknown")):(await e.ma.stop(),Jb(e))})),e.ma}function ls(e){return e.fa||(e.fa=function(n,i,s){const r=J(n);return r.sa(),new IN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:LN.bind(null,e),r_:BN.bind(null,e),ta:jN.bind(null,e),na:zN.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await eh(e)):(await e.fa.stop(),e.Ta.length>0&&(F(Hs,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new fg(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dg(e,t){if(hi("AsyncQueue",`${t}: ${e}`),pa(e))return new z(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{static emptySet(t){return new kr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Ht(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof kr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new kr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.ga=new Ht(Q.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):K(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class sa{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new sa(t,n,kr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class FN{constructor(){this.queries=sv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=J(n),r=s.queries;s.queries=sv(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function sv(){return new $s(e=>Tb(e),Yc)}async function iA(e,t){const n=J(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new HN,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=dg(a,`Initialization of query '${hr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&mg(n)}async function sA(e,t){const n=J(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function GN(e,t){const n=J(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&mg(n)}function QN(e,t,n){const i=J(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function mg(e){e.Ca.forEach(t=>{t.next()})}var kd,rv;(rv=kd||(kd={})).Ma="default",rv.Cache="cache";class rA{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new sa(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=sa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(t){this.key=t}}class oA{constructor(t){this.key=t}}class YN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=bb(t),this.tu=new kr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new iv,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,g)=>{const m=s.get(d),_=Kc(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let O=!1;m&&_?m.data.isEqual(_.data)?x!==V&&(i.track({type:3,doc:_}),O=!0):this.su(m,_)||(i.track({type:2,doc:_}),O=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),O=!0):m&&!_&&(i.track({type:1,doc:m}),O=!0,(u||h)&&(l=!0)),O&&(_?(a=a.add(_),r=V?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(_,x){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:O})}};return V(_)-V(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new sa(this.query,t.tu,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new oA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new aA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return sa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gg="SyncEngine";class KN{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class XN{constructor(t){this.key=t,this.hu=!1}}class $N{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new $s(l=>Tb(l),Yc),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(Q.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZN(e,t,n=!0){const i=dA(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await lA(i,t,n,!0),s}async function WN(e,t){const n=dA(e);await lA(n,t,!0,!1)}async function lA(e,t,n,i){const s=await _N(e.localStore,Mn(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await JN(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Zb(e.remoteStore,s),l}async function JN(e,t,n,i,s){e.pu=(g,m,_)=>async function(V,O,S,E){let R=O.view.ru(S);R.Cs&&(R=await Z_(V.localStore,O.query,!1).then(({documents:T})=>O.view.ru(T,R)));const D=E&&E.targetChanges.get(O.targetId),L=E&&E.targetMismatches.get(O.targetId)!=null,B=O.view.applyChanges(R,V.isPrimaryClient,D,L);return ov(V,O.targetId,B.au),B.snapshot}(e,g,m,_);const r=await Z_(e.localStore,t,!0),a=new YN(t,r.Qs),l=a.ru(r.documents),u=hl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);ov(e,n,h.au);const d=new KN(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function tx(e,t,n){const i=J(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!Yc(a,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Vd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&lg(i.remoteStore,s.targetId),Pd(i,s.targetId)}).catch(ga)):(Pd(i,s.targetId),await Vd(i.localStore,s.targetId,!0))}async function ex(e,t){const n=J(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),lg(n.remoteStore,i.targetId))}async function nx(e,t,n){const i=ux(e);try{const s=await function(a,l){const u=J(a),h=kt.now(),d=l.reduce((_,x)=>_.add(x.key),ut());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=fi(),V=ut();return u.Ns.getEntries(_,d).next(O=>{x=O,x.forEach((S,E)=>{E.isValidDocument()||(V=V.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(O=>{g=O;const S=[];for(const E of l){const R=vC(E,g.get(E.key).overlayedDocument);R!=null&&S.push(new ms(E.key,R,db(R.value.mapValue),Ee.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(O=>{m=O;const S=O.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(_,O.batchId,S)})}).then(()=>({batchId:m.batchId,changes:Sb(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ht(lt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(i,s.batchId,n),await dl(i,s.changes),await eh(i.remoteStore)}catch(s){const r=dg(s,"Failed to persist write");n.reject(r)}}async function uA(e,t){const n=J(e);try{const i=await gN(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?mt(a.hu,14607):s.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await dl(n,i,t)}catch(i){await ga(i)}}function av(e,t,n){const i=J(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(l)&&(h=!0)}),h&&mg(u)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function ix(e,t,n){const i=J(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let a=new Ht(Q.comparator);a=a.insert(r,he.newNoDocument(r,$.min()));const l=ut().add(r),u=new Wc($.min(),new Map,new Ht(lt),a,l);await uA(i,u),i.du=i.du.remove(r),i.Au.delete(t),pg(i)}else await Vd(i.localStore,t,!1).then(()=>Pd(i,t,n)).catch(ga)}async function sx(e,t){const n=J(e),i=t.batch.batchId;try{const s=await mN(n.localStore,t);hA(n,i,null),cA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await dl(n,s)}catch(s){await ga(s)}}async function rx(e,t,n){const i=J(e);try{const s=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(mt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,t);hA(i,t,n),cA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await dl(i,s)}catch(s){await ga(s)}}function cA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function hA(e,t,n){const i=J(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Pd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||fA(e,i)})}function fA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(lg(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),pg(e))}function ov(e,t,n){for(const i of n)i instanceof aA?(e.Ru.addReference(i.key,t),ax(e,i)):i instanceof oA?(F(gg,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||fA(e,i.key)):K(19791,{wu:i})}function ax(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(F(gg,"New document in limbo: "+n),e.Eu.add(i),pg(e))}function pg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Q(Nt.fromString(t)),i=e.fu.next();e.Au.set(i,new XN(n)),e.du=e.du.insert(n,i),Zb(e.remoteStore,new Li(Mn(Qc(n.path)),i,"TargetPurposeLimboResolution",Fc.ce))}}async function dl(e,t,n){const i=J(e),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,t,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=rg.As(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(h,m=>P.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>P.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!pa(g))throw g;F(ag,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,V)}}}(i.localStore,r))}async function ox(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){F(gg,"User change. New user:",t.toKey());const i=await Kb(n.localStore,t);n.currentUser=t,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await dl(n,i.Ls)}}function lx(e,t){const n=J(e),i=n.Au.get(t);if(i&&i.hu)return ut().add(i.key);{let s=ut();const r=n.Iu.get(t);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function dA(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ix.bind(null,t),t.Pu.H_=GN.bind(null,t.eventManager),t.Pu.yu=QN.bind(null,t.eventManager),t}function ux(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rx.bind(null,t),t}class gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return dN(this.persistence,new cN,t.initialUser,this.serializer)}Cu(t){return new Yb(sg.mi,this.serializer)}Du(t){return new EN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gc.provider={build:()=>new gc};class cx extends gc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof dc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new XC(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Be.withCacheSize(this.cacheSizeBytes):Be.DEFAULT;return new Yb(i=>dc.mi(i,n),this.serializer)}}class Ud{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ox.bind(null,this.syncEngine),await qN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new FN}()}createDatastore(t){const n=Jc(t.databaseInfo.databaseId),i=function(r){return new wN(r)}(t.databaseInfo);return function(r,a,l,u){return new NN(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new DN(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>av(this.syncEngine,n,0),function(){return tv.v()?new tv:new TN}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,d){const g=new $N(s,r,a,l,u,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=J(s);F(Hs,"RemoteStore shutting down."),r.Ea.add(5),await fl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Ud.provider={build:()=>new Ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):hi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=J(s),l={documents:r.map(g=>fc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Nt.emptyPath(),l,r.length),h=new Map;u.forEach(g=>{const m=OC(a.serializer,g);h.set(m.key.toString(),m)});const d=[];return r.forEach(g=>{const m=h.get(g.toString());mt(!!m,55234,{key:g}),d.push(m)}),d}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Zc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=Q.fromPath(i);this.mutations.push(new Vb(s,this.precondition(s)))}),await async function(i,s){const r=J(i),a={writes:s.map(l=>qb(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,Nt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K(50498,{Gu:t.constructor.name});n=$.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual($.min())?Ee.exists(!1):Ee.updateTime(n):Ee.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual($.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ee.updateTime(n)}return Ee.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new og(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const t=new hx(this.datastore),n=this.Hu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(t){try{const n=this.updateFunction(t);return!ul(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Mb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class dx{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ce.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{F(us,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(us,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=dg(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function _f(e,t){e.asyncQueue.verifyOperationInProgress(),F(us,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Kb(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function lv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mx(e);F(us,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>nv(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>nv(t.remoteStore,s)),e._onlineComponents=t}async function mx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F(us,"Using user provided OfflineComponentProvider");try{await _f(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Jr("Error using user provided cache. Falling back to memory cache: "+n),await _f(e,new gc)}}else F(us,"Using default OfflineComponentProvider"),await _f(e,new cx(void 0));return e._offlineComponents}async function yg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F(us,"Using user provided OnlineComponentProvider"),await lv(e,e._uninitializedComponentsProvider._online)):(F(us,"Using default OnlineComponentProvider"),await lv(e,new Ud))),e._onlineComponents}function gx(e){return yg(e).then(t=>t.syncEngine)}function px(e){return yg(e).then(t=>t.datastore)}async function Ld(e){const t=await yg(e),n=t.eventManager;return n.onListen=ZN.bind(null,t.syncEngine),n.onUnlisten=tx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=WN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ex.bind(null,t.syncEngine),n}function yx(e,t,n={}){const i=new ri;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new mA({next:m=>{d.Nu(),a.enqueueAndForget(()=>sA(r,g));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?h.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new rA(Qc(l.path),d,{includeMetadataChanges:!0,qa:!0});return iA(r,g)}(await Ld(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firestore.googleapis.com",cv=!0;class hv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pA,this.ssl=cv}else this.host=t.host,this.ssl=t.ssl??cv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Qb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<YC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}OI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nh{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new bI;switch(i.type){case"firstParty":return new RI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=uv.get(n);i&&(F("ComponentProvider","Removing Datastore"),uv.delete(n),i.terminate())}(this),Promise.resolve()}}function _x(e,t,n,i={}){var h;e=nn(e,nh);const s=fa(t),r=e._getSettings(),a={...r,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(zT(`https://${l}`),BT("Firestore",!0)),r.host!==pA&&r.host!==l&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!zs(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ce.MOCK_USER;else{d=Y2(i.mockUserToken,(h=e._app)==null?void 0:h.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ce(m)}e._authCredentials=new AI(new eb(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ws(this.firestore,t,this._query)}}class qt{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qt(this.firestore,t,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(ll(n,qt._jsonSchema))return new qt(t,i||null,new Q(Nt.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:te("string",qt._jsonSchemaVersion),referencePath:te("string")};class Wi extends Ws{constructor(t,n,i){super(t,n,Qc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qt(this.firestore,null,new Q(t))}withConverter(t){return new Wi(this.firestore,t,this._path)}}function fv(e,t,...n){if(e=ne(e),nb("collection","path",t),e instanceof nh){const i=Nt.fromString(t,...n);return S_(i),new Wi(e,null,i)}{if(!(e instanceof qt||e instanceof Wi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return S_(i),new Wi(e.firestore,null,i)}}function Ie(e,t,...n){if(e=ne(e),arguments.length===1&&(t=Ym.newId()),nb("doc","path",t),e instanceof nh){const i=Nt.fromString(t,...n);return A_(i),new qt(e,null,new Q(i))}{if(!(e instanceof qt||e instanceof Wi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Nt.fromString(t,...n));return A_(i),new qt(e.firestore,e instanceof Wi?e.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="AsyncQueue";class mv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new og(this,"async_queue_retry"),this._c=()=>{const i=yf();i&&F(dv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=yf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=yf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ri;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!pa(t))throw t;F(dv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",gv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=fg.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&K(47125,{Pc:gv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function gv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class di extends nh{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mv(t),this._firestoreClient=void 0,await t}}}function vx(e,t){const n=typeof e=="object"?e:GT(),i=typeof e=="string"?e:oc,s=Gm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=G2("firestore");r&&_x(s,...r)}return s}function ih(e){if(e._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ex(e),e._firestoreClient}function Ex(e){var i,s,r;const t=e._freezeSettings(),n=function(l,u,h,d){return new HI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new dx(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $e(be.fromBase64String(t))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $e(be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ll(t,$e._jsonSchema))return $e.fromBase64String(t.bytes)}}$e._jsonSchemaVersion="firestore/bytes/1.0",$e._jsonSchema={type:te("string",$e._jsonSchemaVersion),bytes:te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kn._jsonSchemaVersion}}static fromJSON(t){if(ll(t,kn._jsonSchema))return new kn(t.latitude,t.longitude)}}kn._jsonSchemaVersion="firestore/geoPoint/1.0",kn._jsonSchema={type:te("string",kn._jsonSchemaVersion),latitude:te("number"),longitude:te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ll(t,Pn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Pn(t.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:te("string",Pn._jsonSchemaVersion),vectorValues:te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=/^__.*__$/;class bx{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ms(t,this.data,this.fieldMask,n,this.fieldTransforms):new cl(t,this.data,n,this.fieldTransforms)}}class yA{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ms(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function _A(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:e})}}class _g{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new _g({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return pc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(_A(this.Ac)&&Tx.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ax{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Jc(t)}Cc(t,n,i,s=!1){return new _g({Ac:t,methodName:n,Dc:i,path:ve.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gl(e){const t=e._freezeSettings(),n=Jc(e._databaseId);return new Ax(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vg(e,t,n,i,s,r={}){const a=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);Tg("Data must be an object, but it was:",a,i);const l=TA(i,a);let u,h;if(r.merge)u=new Ze(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const m=jd(t,g,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);AA(d,m)||d.push(m)}u=new Ze(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new bx(new ke(l),u,h)}class rh extends sh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rh}}class Eg extends sh{_toFieldTransform(t){return new gC(t.path,new zo)}isEqual(t){return t instanceof Eg}}function vA(e,t,n,i){const s=e.Cc(1,t,n);Tg("Data must be an object, but it was:",s,i);const r=[],a=ke.empty();ds(i,(u,h)=>{const d=bg(t,u,n);h=ne(h);const g=s.yc(d);if(h instanceof rh)r.push(d);else{const m=pl(h,g);m!=null&&(r.push(d),a.set(d,m))}});const l=new Ze(r);return new yA(a,l,s.fieldTransforms)}function EA(e,t,n,i,s,r){const a=e.Cc(1,t,n),l=[jd(t,i,n)],u=[s];if(r.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(jd(t,r[m])),u.push(r[m+1]);const h=[],d=ke.empty();for(let m=l.length-1;m>=0;--m)if(!AA(h,l[m])){const _=l[m];let x=u[m];x=ne(x);const V=a.yc(_);if(x instanceof rh)h.push(_);else{const O=pl(x,V);O!=null&&(h.push(_),d.set(_,O))}}const g=new Ze(h);return new yA(d,g,a.fieldTransforms)}function Sx(e,t,n,i=!1){return pl(n,e.Cc(i?4:3,t))}function pl(e,t){if(bA(e=ne(e)))return Tg("Unsupported field value:",t,e),TA(e,t);if(e instanceof sh)return function(i,s){if(!_A(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=pl(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ne(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=kt.fromDate(i);return{timestampValue:hc(s.serializer,r)}}if(i instanceof kt){const r=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hc(s.serializer,r)}}if(i instanceof kn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $e)return{bytesValue:Lb(s.serializer,i._byteString)};if(i instanceof qt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ng(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Pn)return function(a,l){return{mapValue:{fields:{[hb]:{stringValue:fb},[lc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Jm(l.serializer,h)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Hc(i)}`)}(e,t)}function TA(e,t){const n={};return rb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ds(e,(i,s)=>{const r=pl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function bA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof kn||e instanceof $e||e instanceof qt||e instanceof sh||e instanceof Pn)}function Tg(e,t,n){if(!bA(n)||!ib(n)){const i=Hc(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function jd(e,t,n){if((t=ne(t))instanceof ml)return t._internalPath;if(typeof t=="string")return bg(e,t);throw pc("Field path arguments must be of type string or ",e,!1,void 0,n)}const wx=new RegExp("[~\\*/\\[\\]]");function bg(e,t,n){if(t.search(wx)>=0)throw pc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ml(...t.split("."))._internalPath}catch{throw pc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function pc(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new z(k.INVALID_ARGUMENT,l+e+u)}function AA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Rx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ag("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rx extends yc{data(){return super.data()}}function Ag(e,t){return typeof t=="string"?bg(e,t):t instanceof ml?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class SA extends Sg{}function Cx(e,t,...n){let i=[];t instanceof Sg&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Rg).length,l=r.filter(u=>u instanceof wg).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class wg extends SA{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new wg(t,n,i)}_apply(t){const n=this._parse(t);return wA(t._query,n),new Ws(t.firestore,t.converter,Cd(t._query,n))}_parse(t){const n=gl(t.firestore);return function(r,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){_v(g,d);const x=[];for(const V of g)x.push(yv(u,r,V));m={arrayValue:{values:x}}}else m=yv(u,r,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||_v(g,d),m=Sx(l,a,g,d==="in"||d==="not-in");return Jt.create(h,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Rg extends Sg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Rg(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)wA(a,u),a=Cd(a,u)}(t._query,n),new Ws(t.firestore,t.converter,Cd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ig extends SA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ig(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jo(r,a)}(t._query,this._field,this._direction);return new Ws(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new ya(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function Nx(e,t="asc"){const n=t,i=Ag("orderBy",e);return Ig._create(i,n)}function yv(e,t,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eb(t)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Nt.fromString(n));if(!Q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return O_(e,new Q(i))}if(n instanceof qt)return O_(e,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hc(n)}.`)}function _v(e,t){if(!Array.isArray(e)||e.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function wA(e,t){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class RA{convertValue(t,n="none"){switch(os(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(as(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw K(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ds(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[lc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>Xt(a.doubleValue));return new Pn(n)}convertGeoPoint(t){return new kn(Xt(t.latitude),Xt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Gc(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Po(t));default:return null}}convertTimestamp(t){const n=rs(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Nt.fromString(t);mt(Gb(i),9688,{name:t});const s=new Uo(i.get(1),i.get(3)),r=new Q(i.popFirst(5));return s.isEqual(n)||hi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class xx extends RA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}class Rr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ji extends yc{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Ag("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ji._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:te("string",Ji._jsonSchemaVersion),bundleSource:te("string","DocumentSnapshot"),bundleName:te("string"),bundle:te("string")};class bu extends Ji{data(t={}){return super.data(t)}}class Pr{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Rr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new bu(this._firestore,this._userDataWriter,i.key,i,new Rr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new bu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Rr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new bu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Rr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:Dx(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Dx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(e){e=nn(e,qt);const t=nn(e.firestore,di);return yx(ih(t),e._key).then(n=>IA(t,e,n))}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:te("string",Pr._jsonSchemaVersion),bundleSource:te("string","QuerySnapshot"),bundleName:te("string"),bundle:te("string")};class Ng extends RA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Ur(e,t,n){e=nn(e,qt);const i=nn(e.firestore,di),s=Cg(e.converter,t,n);return ah(i,[vg(gl(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Ee.none())])}function Ox(e,t,n,...i){e=nn(e,qt);const s=nn(e.firestore,di),r=gl(s);let a;return a=typeof(t=ne(t))=="string"||t instanceof ml?EA(r,"updateDoc",e._key,t,n,i):vA(r,"updateDoc",e._key,t),ah(s,[a.toMutation(e._key,Ee.exists(!0))])}function Vx(e){return ah(nn(e.firestore,di),[new Zc(e._key,Ee.none())])}function Mx(e,t){const n=nn(e.firestore,di),i=Ie(e),s=Cg(e.converter,t);return ah(n,[vg(gl(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,Ee.exists(!1))]).then(()=>i)}function Au(e,...t){var u,h,d;e=ne(e);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||pv(t[i])||(n=t[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(pv(t[i])){const g=t[i];t[i]=(u=g.next)==null?void 0:u.bind(g),t[i+1]=(h=g.error)==null?void 0:h.bind(g),t[i+2]=(d=g.complete)==null?void 0:d.bind(g)}let r,a,l;if(e instanceof qt)a=nn(e.firestore,di),l=Qc(e._key.path),r={next:g=>{t[i]&&t[i](IA(a,e,g))},error:t[i+1],complete:t[i+2]};else{const g=nn(e,Ws);a=nn(g.firestore,di),l=g._query;const m=new Ng(a);r={next:_=>{t[i]&&t[i](new Pr(a,m,g,_))},error:t[i+1],complete:t[i+2]},Ix(e._query)}return function(m,_,x,V){const O=new mA(V),S=new rA(_,O,x);return m.asyncQueue.enqueueAndForget(async()=>iA(await Ld(m),S)),()=>{O.Nu(),m.asyncQueue.enqueueAndForget(async()=>sA(await Ld(m),S))}}(ih(a),l,s,r)}function ah(e,t){return function(i,s){const r=new ri;return i.asyncQueue.enqueueAndForget(async()=>nx(await gx(i),s,r)),r.promise}(ih(e),t)}function IA(e,t,n){const i=n.docs.get(t._key),s=new Ng(e);return new Ji(e,s,t._key,i,new Rr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={maxAttempts:5};function $a(e,t){if((e=ne(e)).firestore!==t)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=gl(t)}get(t){const n=$a(t,this._firestore),i=new xx(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return K(24041);const r=s[0];if(r.isFoundDocument())return new yc(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new yc(this._firestore,i,n._key,null,n.converter);throw K(18433,{doc:r})})}set(t,n,i){const s=$a(t,this._firestore),r=Cg(s.converter,n,i),a=vg(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,n,i,...s){const r=$a(t,this._firestore);let a;return a=typeof(n=ne(n))=="string"||n instanceof ml?EA(this._dataReader,"Transaction.update",r._key,n,i,s):vA(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(t){const n=$a(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends Px{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=$a(t,this._firestore),i=new Ng(this._firestore);return super.get(t).then(s=>new Ji(this._firestore,i,n._key,s._document,new Rr(!1,!1),n.converter))}}function vv(e,t,n){e=nn(e,di);const i={...kx,...n};return function(r){if(r.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new ri;return r.asyncQueue.enqueueAndForget(async()=>{const h=await px(r);new fx(r.asyncQueue,h,l,a,u).ju()}),u.promise}(ih(e),s=>t(new Ux(e,s)),i)}function vf(){return new Eg("serverTimestamp")}(function(t,n=!0){(function(s){ma=s})(da),Wr(new Bs("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new di(new SI(i.getProvider("auth-internal")),new II(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(h.options.projectId,d)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),$i(v_,E_,t),$i(v_,E_,"esm2020")})();function CA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lx=CA,NA=new al("auth","Firebase",CA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Hm("@firebase/auth");function jx(e,...t){_c.logLevel<=ot.WARN&&_c.warn(`Auth (${da}): ${e}`,...t)}function Su(e,...t){_c.logLevel<=ot.ERROR&&_c.error(`Auth (${da}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(e,...t){throw Dg(e,...t)}function bn(e,...t){return Dg(e,...t)}function xg(e,t,n){const i={...Lx(),[t]:n};return new al("auth","Firebase",i).create(t,{appName:e.name})}function ts(e){return xg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xA(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&jn(e,"argument-error"),xg(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dg(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return NA.create(e,...t)}function W(e,t,...n){if(!e)throw Dg(t,...n)}function ei(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Su(t),new Error(t)}function mi(e,t){e||ei(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function zx(){return Ev()==="http:"||Ev()==="https:"}function Ev(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zx()||J2()||"connection"in navigator)?navigator.onLine:!0}function qx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,n){this.shortDelay=t,this.longDelay=n,mi(n>t,"Short delay should be less than long delay!"),this.isMobile=$2()||tR()}get(){return Bx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e,t){mi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gx=new yl(3e4,6e4);function oh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function va(e,t,n,i,s={}){return OA(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=ol({key:e.config.apiKey,...a}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h={method:t,headers:u,...r};return W2()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&fa(e.emulatorConfig.host)&&(h.credentials="include"),DA.fetch()(await MA(e,e.config.apiHost,n,l),h)})}async function OA(e,t,n){e._canInitEmulator=!1;const i={...Hx,...t};try{const s=new Qx(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw iu(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw iu(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw iu(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw iu(e,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw xg(e,d,h);jn(e,d)}}catch(s){if(s instanceof pi)throw s;jn(e,"network-request-failed",{message:String(s)})}}async function VA(e,t,n,i,s={}){const r=await va(e,t,n,i,s);return"mfaPendingCredential"in r&&jn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function MA(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?Og(e.config,s):`${e.config.apiScheme}://${s}`;return Fx.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class Qx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bn(this.auth,"network-request-failed")),Gx.get())})}}function iu(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=bn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(e,t){return va(e,"POST","/v1/accounts:delete",t)}async function vc(e,t){return va(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Kx(e,t=!1){const n=ne(e),i=await n.getIdToken(t),s=Vg(i);W(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:vo(Ef(s.auth_time)),issuedAtTime:vo(Ef(s.iat)),expirationTime:vo(Ef(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Ef(e){return Number(e)*1e3}function Vg(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{const s=PT(n);return s?JSON.parse(s):(Su("Failed to decode base64 JWT payload"),null)}catch(s){return Su("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Tv(e){const t=Vg(e);return W(t,"internal-error"),W(typeof t.exp<"u","internal-error"),W(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof pi&&Xx(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function Xx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(e){var g;const t=e.auth,n=await e.getIdToken(),i=await Ho(e,vc(t,{idToken:n}));W(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?kA(s.providerUserInfo):[],a=Wx(e.providerData,r),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qd(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function Zx(e){const t=ne(e);await Ec(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Wx(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function kA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(e,t){const n=await OA(e,{},async()=>{const i=ol({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await MA(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return e.emulatorConfig&&fa(e.emulatorConfig.host)&&(u.credentials="include"),DA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tD(e,t){return va(e,"POST","/v2/accounts:revokeToken",oh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){W(t.idToken,"internal-error"),W(typeof t.idToken<"u","internal-error"),W(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Tv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){W(t.length!==0,"internal-error");const n=Tv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await Jx(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Lr;return i&&(W(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(W(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(W(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Lr,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(e,t){W(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class En{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new $x(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,t));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Kx(this,t)}reload(){return Zx(this)}_assign(t){this!==t&&(W(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new En({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(ts(this.auth));const t=await this.getIdToken();return await Ho(this,Yx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:V}=n;W(g&&V,t,"internal-error");const O=Lr.fromJSON(this.name,V);W(typeof g=="string",t,"internal-error"),Ai(i,t.name),Ai(s,t.name),W(typeof m=="boolean",t,"internal-error"),W(typeof _=="boolean",t,"internal-error"),Ai(r,t.name),Ai(a,t.name),Ai(l,t.name),Ai(u,t.name),Ai(h,t.name),Ai(d,t.name);const S=new En({uid:g,auth:t,email:s,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:O,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(S.providerData=x.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(t,n,i=!1){const s=new Lr;s.updateFromServerResponse(n);const r=new En({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Ec(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];W(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?kA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Lr;l.updateFromIdToken(i);const u=new En({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new qd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;function ni(e){mi(e instanceof Function,"Expected a class definition");let t=bv.get(e);return t?(mi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bv.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}PA.type="NONE";const Av=PA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e,t,n){return`firebase:${e}:${t}:${n}`}class jr{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=wu(this.userKey,s.apiKey,r),this.fullPersistenceKey=wu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await vc(this.auth,{idToken:t}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,t):null}return En._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new jr(ni(Av),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||ni(Av);const a=wu(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await vc(t,{idToken:d}).catch(()=>{});if(!m)break;g=await En._fromGetAccountInfoResponse(t,m,d)}else g=En._fromJSON(t,d);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new jr(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new jr(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(UA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qA(t))return"Blackberry";if(HA(t))return"Webos";if(LA(t))return"Safari";if((t.includes("chrome/")||jA(t))&&!t.includes("edge/"))return"Chrome";if(BA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function UA(e=De()){return/firefox\//i.test(e)}function LA(e=De()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jA(e=De()){return/crios\//i.test(e)}function zA(e=De()){return/iemobile/i.test(e)}function BA(e=De()){return/android/i.test(e)}function qA(e=De()){return/blackberry/i.test(e)}function HA(e=De()){return/webos/i.test(e)}function Mg(e=De()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function eD(e=De()){var t;return Mg(e)&&!!((t=window.navigator)!=null&&t.standalone)}function nD(){return eR()&&document.documentMode===10}function FA(e=De()){return Mg(e)||BA(e)||HA(e)||qA(e)||/windows phone/i.test(e)||zA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(e,t=[]){let n;switch(e){case"Browser":n=Sv(De());break;case"Worker":n=`${Sv(De())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(e,t={}){return va(e,"GET","/v2/passwordPolicy",oh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=6;class aD{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new iD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await jr.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await vc(this,{idToken:t}),i=await En._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(fn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ec(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=qx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(fn(this.app))return Promise.reject(ts(this));const n=t?ne(t):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&W(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return fn(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await sD(this),n=new aD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new al("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await tD(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ni(t)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await jr.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=GA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&jx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _l(e){return ne(e)}class wv{constructor(t){this.auth=t,this.observer=null,this.addObserver=uR(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lD(e){kg=e}function uD(e){return kg.loadJS(e)}function cD(){return kg.gapiScript}function hD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(e,t){const n=Gm(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(zs(r,t??{}))return s;jn(s,"already-initialized")}return n.initialize({options:t})}function fD(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function dD(e,t,n){const i=_l(e);W(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=YA(t),{host:a,port:l}=mD(t),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(zs(h,i.config.emulator)&&zs(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,fa(a)?(zT(`${r}//${a}${u}`),BT("Auth",!0)):gD()}function YA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mD(e){const t=YA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Rv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Rv(a)}}}function Rv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function gD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(t){return ei("not implemented")}_linkToIdToken(t,n){return ei("not implemented")}_getReauthenticationResolver(t){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(e,t){return VA(e,"POST","/v1/accounts:signInWithIdp",oh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="http://localhost";class Fs extends KA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Fs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new Fs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return zr(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,zr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,zr(t,n)}buildRequest(){const t={requestUri:pD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ol(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends lh{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends vl{constructor(){super("facebook.com")}static credential(t){return Fs._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Di.credentialFromTaggedObject(t)}static credentialFromError(t){return Di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Di.credential(t.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Fs._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Xn.credentialFromTaggedObject(t)}static credentialFromError(t){return Xn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Xn.credential(n,i)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends vl{constructor(){super("github.com")}static credential(t){return Fs._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Oi.credentialFromTaggedObject(t)}static credentialFromError(t){return Oi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Oi.credential(t.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends vl{constructor(){super("twitter.com")}static credential(t,n){return Fs._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Vi.credential(n,i)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(e,t){return VA(e,"POST","/v1/accounts:signUp",oh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await En._fromIdTokenResponse(t,i,s),a=Iv(i);return new cs({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=Iv(i);return new cs({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function Iv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(e){var s;if(fn(e.app))return Promise.reject(ts(e));const t=_l(e);if(await t._initializationPromise,(s=t.currentUser)!=null&&s.isAnonymous)return new cs({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await yD(t,{returnSecureToken:!0}),i=await cs._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends pi{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Tc(t,n,i,s)}}function XA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Tc._fromErrorAndOperation(e,r,t,i):r})}async function vD(e,t,n=!1){const i=await Ho(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cs._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(e,t,n=!1){const{auth:i}=e;if(fn(i.app))return Promise.reject(ts(i));const s="reauthenticate";try{const r=await Ho(e,XA(i,s,t,e),n);W(r.idToken,i,"internal-error");const a=Vg(r.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(e.uid===l,i,"user-mismatch"),cs._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&jn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(e,t,n=!1){if(fn(e.app))return Promise.reject(ts(e));const i="signIn",s=await XA(e,i,t),r=await cs._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function bD(e,t,n,i){return ne(e).onIdTokenChanged(t,n,i)}function AD(e,t,n){return ne(e).beforeAuthStateChanged(t,n)}function SD(e,t,n,i){return ne(e).onAuthStateChanged(t,n,i)}const bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1e3,RD=10;class ZA extends $A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);nD()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,RD):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ZA.type="LOCAL";const WA=ZA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends $A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}JA.type="SESSION";const tS=JA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new uh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await ID(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=Pg("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return window}function ND(e){Un().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function xD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DD(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function OD(){return eS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebaseLocalStorageDb",VD=1,Ac="firebaseLocalStorage",iS="fbase_key";class El{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ch(e,t){return e.transaction([Ac],t?"readwrite":"readonly").objectStore(Ac)}function MD(){const e=indexedDB.deleteDatabase(nS);return new El(e).toPromise()}function Hd(){const e=indexedDB.open(nS,VD);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Ac,{keyPath:iS})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Ac)?t(i):(i.close(),await MD(),t(await Hd()))})})}async function Cv(e,t,n){const i=ch(e,!0).put({[iS]:t,value:n});return new El(i).toPromise()}async function kD(e,t){const n=ch(e,!1).get(t),i=await new El(n).toPromise();return i===void 0?null:i.value}function Nv(e,t){const n=ch(e,!0).delete(t);return new El(n).toPromise()}const PD=800,UD=3;class sS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>UD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(OD()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await xD(),!this.activeServiceWorker)return;this.sender=new CD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||DD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Hd();return await Cv(t,bc,"1"),await Nv(t,bc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Cv(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>kD(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=ch(s,!1).getAll();return new El(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sS.type="LOCAL";const LD=sS;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(e,t){return t?ni(t):(W(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends KA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return zr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return zr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return zr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function jD(e){return TD(e.auth,new Lg(e),e.bypassAuthState)}function zD(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),ED(n,new Lg(e),e.bypassAuthState)}async function BD(e){const{auth:t,user:n}=e;return W(n,t,"internal-error"),vD(n,new Lg(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jD;case"linkViaPopup":case"linkViaRedirect":return BD;case"reauthViaPopup":case"reauthViaRedirect":return zD;default:jn(this.auth,"internal-error")}}resolve(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new yl(2e3,1e4);async function HD(e,t,n){if(fn(e.app))return Promise.reject(bn(e,"operation-not-supported-in-this-environment"));const i=_l(e);xA(e,t,lh);const s=Ug(i,n);return new ji(i,"signInViaPopup",t,s).executeNotNull()}async function FD(e,t,n){const i=ne(e);xA(i.auth,t,lh);const s=Ug(i.auth,n);return new ji(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class ji extends rS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return W(t,this.auth,"internal-error"),t}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const t=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qD.get())};t()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="pendingRedirect",Ru=new Map;class QD extends rS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Ru.get(this.auth._key());if(!t){try{const i=await YD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Ru.set(this.auth._key(),t)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(e,t){const n=$D(t),i=XD(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function KD(e,t){Ru.set(e._key(),t)}function XD(e){return ni(e._redirectPersistence)}function $D(e){return wu(GD,e.config.apiKey,e.name)}async function ZD(e,t,n=!1){if(fn(e.app))return Promise.reject(ts(e));const i=_l(e),s=Ug(i,t),a=await new QD(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=10*60*1e3;class JD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!t4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!aS(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=WD&&this.cachedEventUids.clear(),this.cachedEventUids.has(xv(t))}saveEventToCache(t){this.cachedEventUids.add(xv(t)),this.lastProcessedEventTime=Date.now()}}function xv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function aS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function t4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(e,t={}){return va(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i4=/^https?/;async function s4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await e4(e);for(const n of t)try{if(r4(n))return}catch{}jn(e,"unauthorized-domain")}function r4(e){const t=Bd(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!i4.test(n))return!1;if(n4.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=new yl(3e4,6e4);function Dv(){const e=Un().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function o4(e){return new Promise((t,n)=>{var s,r,a;function i(){Dv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(bn(e,"network-request-failed"))},timeout:a4.get()})}if((r=(s=Un().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((a=Un().gapi)!=null&&a.load)i();else{const l=hD("iframefcb");return Un()[l]=()=>{gapi.load?i():n(bn(e,"network-request-failed"))},uD(`${cD()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Iu=null,t})}let Iu=null;function l4(e){return Iu=Iu||o4(e),Iu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=new yl(5e3,15e3),c4="__/auth/iframe",h4="emulator/auth/iframe",f4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m4(e){const t=e.config;W(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Og(t,h4):`https://${e.config.authDomain}/${c4}`,i={apiKey:t.apiKey,appName:e.name,v:da},s=d4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ol(i).slice(1)}`}async function g4(e){const t=await l4(e),n=Un().gapi;return W(n,e,"internal-error"),t.open({where:document.body,url:m4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=bn(e,"network-request-failed"),l=Un().setTimeout(()=>{r(a)},u4.get());function u(){Un().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y4=500,_4=600,v4="_blank",E4="http://localhost";class Ov{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T4(e,t,n,i=y4,s=_4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...p4,width:i.toString(),height:s.toString(),top:r,left:a},h=De().toLowerCase();n&&(l=jA(h)?v4:n),UA(h)&&(t=t||E4,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,x])=>`${m}${_}=${x},`,"");if(eD(h)&&l!=="_self")return b4(t||"",l),new Ov(null);const g=window.open(t||"",l,d);W(g,e,"popup-blocked");try{g.focus()}catch{}return new Ov(g)}function b4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="__/auth/handler",S4="emulator/auth/handler",w4=encodeURIComponent("fac");async function Vv(e,t,n,i,s,r){W(e.config.authDomain,e,"auth-domain-config-required"),W(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:da,eventId:s};if(t instanceof lh){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",lR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof vl){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await e._getAppCheckToken(),h=u?`#${w4}=${encodeURIComponent(u)}`:"";return`${R4(e)}?${ol(l).slice(1)}${h}`}function R4({config:e}){return e.emulator?Og(e,S4):`https://${e.authDomain}/${A4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="webStorageSupport";class I4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tS,this._completeRedirectFn=ZD,this._overrideRedirectResult=KD}async _openPopup(t,n,i,s){var a;mi((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Vv(t,n,i,Bd(),s);return T4(t,r,Pg())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Vv(t,n,i,Bd(),s);return ND(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(mi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await g4(t),i=new JD(t);return n.register("authEvent",s=>(W(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Tf,{type:Tf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[Tf];r!==void 0&&n(!!r),jn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FA()||LA()||Mg()}}const C4=I4;var Mv="@firebase/auth",kv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D4(e){Wr(new Bs("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GA(e)},h=new oD(i,s,r,u);return fD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Wr(new Bs("auth-internal",t=>{const n=_l(t.getProvider("auth").getImmediate());return(i=>new N4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(Mv,kv,x4(e)),$i(Mv,kv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=5*60,V4=jT("authIdTokenMaxAge")||O4;let Pv=null;const M4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>V4)return;const s=n==null?void 0:n.token;Pv!==s&&(Pv=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function k4(e=GT()){const t=Gm(e,"auth");if(t.isInitialized())return t.getImmediate();const n=QA(e,{popupRedirectResolver:C4,persistence:[LD,WA,tS]}),i=jT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=M4(r.toString());AD(n,a,()=>a(n.currentUser)),bD(n,l=>a(l))}}const s=UT("auth");return s&&dD(n,`http://${s}`),n}function P4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}lD({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=bn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",P4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D4("Browser");const U4=()=>v.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[v.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),v.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),v.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),v.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.82l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),v.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),L4=({user:e,subscription:t,onGetSubscriptionClick:n})=>{const i=k4(),s=new Xn,r=async()=>{try{i.currentUser&&i.currentUser.isAnonymous?await FD(i.currentUser,s):await HD(i,s)}catch(l){console.error("Ошибка входа или привязки:",l)}},a=t&&new Date(t.expires_at)>new Date;return v.jsxs("div",{className:"p-4 space-y-4",children:[e&&!e.isAnonymous?v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[v.jsx("img",{src:e.photoURL||void 0,alt:"Avatar",className:"w-16 h-16 rounded-full"}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold",children:e.displayName}),v.jsx("p",{className:"text-sm opacity-70",children:e.email})]})]}),v.jsx("button",{onClick:handleSignOut,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold",children:"Выйти"})]}):v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Войдите в аккаунт"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Чтобы синхронизировать ваши закладки, подписку и прогресс чтения между устройствами."}),v.jsxs("button",{onClick:r,className:"w-full py-2 rounded-lg bg-white text-gray-800 font-bold flex items-center justify-center border border-gray-300 shadow-sm hover:bg-gray-50",children:[v.jsx(U4,{}),"Войти через Google"]})]}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),a?v.jsxs("div",{children:[v.jsx("p",{className:"text-green-500",children:"Активна"}),v.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",new Date(t.expires_at).toLocaleDateString()]})]}):v.jsxs("div",{children:[v.jsx("p",{className:"text-red-500",children:"Неактивна"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),v.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]})]})},j4={apiKey:"AIzaSyDfDGFXGFGkzmgYFAHI1q6AZiLy7esuPrw",authDomain:"tenebris-verbum.firebaseapp.com",projectId:"tenebris-verbum",storageBucket:"tenebris-verbum.firebasestorage.app",messagingSenderId:"637080257821",appId:"1:637080257821:web:7f7440e0bcef2ce7178df4"},oS=FT(j4),ie=vx(oS),Uv=QA(oS,{persistence:WA}),lS=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),uS=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 12H5"}),v.jsx("polyline",{points:"12 19 5 12 12 5"})]}),cS=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),z4=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${e}`,children:[v.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),B4=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),jg=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),hS=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),fS=({className:e="",filled:t=!1})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),q4=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),H4=({className:e="",filled:t=!1})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M4 22h16"}),v.jsx("path",{d:"M7 22V2h10v20"}),v.jsx("path",{d:"M7 12h4"})]}),F4=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m15 18-6-6 6-6"})}),G4=({className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),Q4=({className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Y4=()=>v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main",children:[v.jsx(jg,{className:"animate-pulse-heart text-accent",filled:!0}),v.jsx("p",{className:"mt-4 text-lg opacity-70",children:"Загрузка..."})]}),zg=({onClose:e,onSelectPlan:t})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx(B4,{className:"mx-auto mb-4 text-accent"}),v.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),v.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),v.jsx("div",{className:"space-y-3",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:i.name}),v.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},Bg=({onClose:e,onSelectMethod:t,plan:n})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[v.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),v.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:()=>t("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),v.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),v.jsxs("button",{onClick:()=>t("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[v.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),v.jsx("p",{className:"text-sm opacity-70",children:"Более быстрый способ"})]})]}),v.jsx("button",{onClick:e,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Назад"})]})}),Gs=({title:e,onBack:t})=>v.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[t&&v.jsx("button",{onClick:t,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:v.jsx(uS,{})}),v.jsx("h1",{className:"text-xl font-bold",children:e})]}),qg=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:e.length>0?e.map((s,r)=>v.jsx("div",{onClick:()=>t(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:v.jsxs("div",{className:"relative transition-all duration-300",children:[v.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:v.jsx(fS,{filled:n.includes(s.id),width:"20",height:"20"})}),v.jsx("img",{src:`/tene/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),v.jsx("h2",{className:"mt-2 font-semibold text-xs truncate",children:s.title})]})},s.id)):v.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),K4=({novel:e,onSelectChapter:t,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:h})=>{const[d,g]=H.useState(!1),[m,_]=H.useState(null),[x,V]=H.useState("newest"),[O,S]=H.useState(!1),E=H.useRef(null),[R,D]=H.useState(!1),L=i&&new Date(i.expires_at)>new Date,B=H.useMemo(()=>u&&u[e.id]?u[e.id].chapterId:null,[u,e.id]);H.useEffect(()=>{E.current&&setTimeout(()=>{E.current&&D(E.current.scrollHeight>E.current.clientHeight)},100)},[e.description]);const T=H.useMemo(()=>{const I=[...a];return x==="newest"?I.reverse():a},[a,x]),y=I=>{!L&&I.isPaid?g(!0):t(I)},b=()=>{if(B){const I=a.find(A=>A.id===B);I&&t(I)}},w=I=>_(I),C=async I=>{var yt;const A=(yt=window.Telegram)==null?void 0:yt.WebApp;if(!A||!r||!m){console.error("Telegram Web App, userId, or selectedPlan is not available."),A&&A.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}A.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async me=>{if(!me)return;const q=Ie(ie,"users",r);try{await Ur(q,{pendingSubscription:{...m,method:I,date:new Date().toISOString()}},{merge:!0}),A.openTelegramLink(`https://t.me/${s}?start=${r}`),A.close()}catch(X){console.error("Ошибка записи в Firebase:",X),A.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return v.jsxs("div",{className:"text-text-main",children:[v.jsx(Gs,{title:e.title,onBack:h}),v.jsxs("div",{className:"relative h-64",children:[v.jsx("img",{src:`/tene/${e.coverUrl}`,alt:e.title,className:"w-full h-full object-cover object-top absolute"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),v.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[v.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:e.title}),v.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:e.author})]})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map(I=>v.jsx("button",{onClick:()=>n(I),className:"text-xs font-semibold px-3 py-1 rounded-full transition-colors duration-200 bg-component-bg text-text-main border border-border-color hover:bg-border-color",children:I},I))}),v.jsx("div",{ref:E,className:`relative overflow-hidden transition-all duration-500 ${O?"max-h-full":"max-h-24"}`,children:v.jsx("p",{className:"text-sm mb-2 opacity-80 font-body",children:e.description})}),R&&v.jsx("div",{className:"text-right",children:v.jsx("button",{onClick:()=>S(!O),className:"text-sm font-semibold text-accent mb-4",children:O?"Скрыть":"Читать полностью..."})}),B&&v.jsxs("button",{onClick:b,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",B,")"]}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),v.jsx("button",{onClick:()=>V(I=>I==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:x==="newest"?"Сначала новые":"Сначала старые"})]}),L&&v.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",new Date(i.expires_at).toLocaleDateString()]}),l?v.jsx("p",{children:"Загрузка глав..."}):v.jsx("div",{className:"flex flex-col gap-3",children:T.map(I=>{const A=!L&&I.isPaid,yt=B===I.id;return v.jsxs("div",{onClick:()=>y(I),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${A?"opacity-70":""}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[yt&&v.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),v.jsx("p",{className:"font-semibold",children:I.title})]}),A?v.jsx(z4,{}):v.jsx(lS,{})]},I.id)})}),d&&v.jsx(zg,{onClose:()=>g(!1),onSelectPlan:w}),m&&v.jsx(Bg,{onClose:()=>_(null),onSelectMethod:C,plan:m})]})]})},X4=e=>{const t={},n=[];return e.forEach(i=>{t[i.id]={...i,replies:[]}}),e.forEach(i=>{i.replyTo&&t[i.replyTo]?t[i.replyTo].replies.push(t[i.id]):n.push(t[i.id])}),n},dS=i1.memo(({comment:e,onReply:t,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:_,onCommentSubmit:x})=>{const V=O=>O!=null&&O.toDate?O.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[v.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[v.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:e.userName}),v.jsx("span",{children:V(e.timestamp)})]}),u===e.id?v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsx("input",{type:"text",value:h,autoFocus:!0,onChange:O=>d(O.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),v.jsx("button",{onClick:()=>r(e.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),v.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):v.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.text}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[v.jsx(jg,{filled:e.userHasLiked,className:`w-4 h-4 ${e.userHasLiked?"text-accent":""}`}),v.jsx("span",{children:e.likeCount||0})]}),v.jsx("button",{onClick:()=>t(e.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===e.userId||a)&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>i(e),className:"text-xs text-gray-500",children:"Редактировать"}),v.jsx("button",{onClick:()=>s(e.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===e.id&&v.jsxs("form",{onSubmit:O=>x(O,e.id),className:"flex items-center gap-2 mt-2",children:[v.jsx("input",{type:"text",value:m,autoFocus:!0,onChange:O=>_(O.target.value),placeholder:`Ответ для ${e.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),v.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:v.jsx(hS,{className:"w-4 h-4"})})]}),e.replies&&e.replies.length>0&&v.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:e.replies.map(O=>v.jsx(dS,{comment:O,onReply:t,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:h,setEditingText:d,replyingTo:g,replyText:m,setReplyText:_,onCommentSubmit:x},O.id))})]})}),$4=({chapter:e,novel:t,fontSize:n,onFontSizeChange:i,userId:s,userName:r,currentFontClass:a,onSelectChapter:l,allChapters:u,subscription:h,botUsername:d,onBack:g,isUserAdmin:m})=>{const[_,x]=H.useState([]),[V,O]=H.useState(""),[S,E]=H.useState(null),[R,D]=H.useState(""),[L,B]=H.useState(null),[T,y]=H.useState(""),[b,w]=H.useState(0),[C,I]=H.useState(!1),[A,yt]=H.useState(!1),[me,q]=H.useState(!1),[X,Y]=H.useState(!1),[gt,xt]=H.useState(null),[pn,zt]=H.useState(""),[ct,$t]=H.useState(!0),Ae=h&&new Date(h.expires_at)>new Date,Oe=H.useMemo(()=>Ie(ie,"chapters_metadata",`${t.id}_${e.id}`),[t.id,e.id]);H.useEffect(()=>{const G=Au(Oe,bt=>{var st;w(((st=bt.data())==null?void 0:st.likeCount)||0)}),tt=Cx(fv(ie,`chapters_metadata/${t.id}_${e.id}/comments`),Nx("timestamp","asc")),Tt=Au(tt,async bt=>{const st=bt.docs.map(At=>({id:At.id,...At.data()}));if(s){const At=st.map(async Ta=>{const Tl=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments/${Ta.id}/likes`,s),hh=await zd(Tl);return{...Ta,userHasLiked:hh.exists()}}),Fe=await Promise.all(At);x(Fe)}else x(st)});let Rt=()=>{};if(s){const bt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/likes`,s);Rt=Au(bt,st=>{I(st.exists())})}return()=>{G(),Tt(),Rt()}},[Oe,t.id,e.id,s]),H.useEffect(()=>{(async()=>{if($t(!0),zt(""),e.isPaid&&!Ae){$t(!1),zt(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const tt=Ie(ie,"chapter_content",`${t.id}-${e.id}`),Tt=await zd(tt);Tt.exists()?zt(Tt.data().content):zt(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(tt){console.error("Ошибка загрузки главы:",tt),zt(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{$t(!1)}})()},[t.id,e.id,Ae]);const wn=H.useCallback(async(G,tt=null)=>{G.preventDefault();const Tt=tt?T:V;if(!(!Tt.trim()||!s))try{await Ur(Oe,{},{merge:!0});const Rt=fv(ie,`chapters_metadata/${t.id}_${e.id}/comments`),bt={userId:s,userName:r||"Аноним",text:Tt,timestamp:vf(),likeCount:0};tt&&(bt.replyTo=tt),await Mx(Rt,bt),tt?(B(null),y("")):O("")}catch(Rt){console.error("Ошибка добавления комментария:",Rt)}},[s,r,V,T,Oe,t.id,e.id]),gs=H.useCallback(async G=>{if(!s)return;const tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments`,G),Tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments/${G}/likes`,s);x(Rt=>Rt.map(bt=>{if(bt.id===G){const st=bt.userHasLiked?(bt.likeCount||1)-1:(bt.likeCount||0)+1;return{...bt,userHasLiked:!bt.userHasLiked,likeCount:st}}return bt}));try{await vv(ie,async Rt=>{const bt=await Rt.get(Tt),st=await Rt.get(tt);if(!st.exists())return;const At=st.data().likeCount||0;bt.exists()?(Rt.delete(Tt),Rt.update(tt,{likeCount:Math.max(0,At-1)})):(Rt.set(Tt,{timestamp:vf()}),Rt.update(tt,{likeCount:At+1}))})}catch(Rt){console.error("Ошибка при обновлении лайка комментария:",Rt)}},[s,t.id,e.id]),Ea=H.useCallback(G=>{G?(E(G.id),D(G.text)):(E(null),D(""))},[]),yi=H.useCallback(async G=>{if(!R.trim())return;const tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments`,G);await Ox(tt,{text:R}),E(null),D("")},[R,t.id,e.id]),Rn=H.useCallback(async G=>{const tt=Ie(ie,`chapters_metadata/${t.id}_${e.id}/comments`,G);await Vx(tt)},[t.id,e.id]),ps=H.useCallback(G=>{B(tt=>tt===G?null:G),y("")},[]),ys=async()=>{if(!s)return;const G=Ie(ie,`chapters_metadata/${t.id}_${e.id}/likes`,s);try{await vv(ie,async tt=>{var st;const Tt=await tt.get(G),bt=((st=(await tt.get(Oe)).data())==null?void 0:st.likeCount)||0;Tt.exists()?(tt.delete(G),tt.set(Oe,{likeCount:Math.max(0,bt-1)},{merge:!0})):(tt.set(G,{timestamp:vf()}),tt.set(Oe,{likeCount:bt+1},{merge:!0}))})}catch(tt){console.error("Ошибка при обновлении лайка:",tt)}},qn=G=>{G&&(!Ae&&G.isPaid?(yt(!1),Y(!0)):(l(G),yt(!1)))},_s=G=>{xt(G),Y(!1)},Js=async G=>{var Tt;const tt=(Tt=window.Telegram)==null?void 0:Tt.WebApp;tt&&s&&gt&&tt.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async Rt=>{if(Rt){const bt=Ie(ie,"users",s);try{await Ur(bt,{pendingSubscription:{...gt,method:G,date:new Date().toISOString()}},{merge:!0}),tt.openTelegramLink(`https://t.me/${d}?start=${s}`),tt.close()}catch(st){console.error("Ошибка записи в Firebase:",st),tt.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},et=u.findIndex(G=>G.id===e.id),ht=u[et-1],Et=u[et+1],yn=G=>window.marked?`<div class="prose">${window.marked.parse(G)}</div>`:G;return v.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[v.jsx(Gs,{title:t.title,onBack:g}),v.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[v.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:e.title}),v.jsx("div",{className:`whitespace-normal leading-relaxed ${a}`,style:{fontSize:`${n}px`},dangerouslySetInnerHTML:{__html:ct?"<p>Загрузка...</p>":yn(pn)}}),v.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),v.jsxs("div",{className:"border-t border-border-color pt-8",children:[v.jsx("div",{className:"flex items-center gap-4 mb-8",children:v.jsxs("button",{onClick:ys,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[v.jsx(jg,{filled:C,className:C?"text-accent":""}),v.jsx("span",{className:"font-bold text-lg",children:b})]})}),v.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),v.jsx("div",{className:"space-y-4 mb-6",children:_.length>0?X4(_).map(G=>v.jsx(dS,{comment:G,onReply:ps,onLike:gs,onEdit:Ea,onDelete:Rn,onUpdate:yi,isUserAdmin:m,currentUserId:s,editingCommentId:S,editingText:R,setEditingText:D,replyingTo:L,replyText:T,setReplyText:y,onCommentSubmit:wn},G.id)):v.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"})}),v.jsxs("form",{onSubmit:G=>wn(G,null),className:"flex items-center gap-2",children:[v.jsx("input",{type:"text",value:V,onChange:G=>O(G.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),v.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:v.jsx(hS,{className:"w-5 h-5"})})]})]})]}),v.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[v.jsx("button",{onClick:()=>qn(ht),disabled:!ht,className:"p-2 disabled:opacity-50",children:v.jsx(uS,{})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>yt(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),v.jsx("button",{onClick:()=>q(!0),className:"p-2 rounded-lg bg-background",children:v.jsx(Q4,{})})]}),v.jsx("button",{onClick:()=>qn(Et),disabled:!Et,className:"p-2 disabled:opacity-50",children:v.jsx(lS,{className:"opacity-100"})})]}),A&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>yt(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),v.jsx("div",{className:"overflow-y-auto",children:v.jsx("div",{className:"flex flex-col gap-2",children:u.map(G=>v.jsx("button",{onClick:()=>qn(G),className:`p-2 text-left rounded-md ${G.id===e.id?"bg-accent text-white":"bg-background"}`,children:G.title},G.id))})})]})}),me&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>q(!1),children:v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:G=>G.stopPropagation(),children:[v.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{children:"Размер текста"}),v.jsxs("div",{className:"w-28 h-12 rounded-full bg-background flex items-center justify-around border border-border-color",children:[v.jsx("button",{onClick:()=>i(-1),className:"text-2xl font-bold",children:"-"}),v.jsx("button",{onClick:()=>i(1),className:"text-2xl font-bold",children:"+"})]})]})]})}),X&&v.jsx(zg,{onClose:()=>Y(!1),onSelectPlan:_s}),gt&&v.jsx(Bg,{onClose:()=>xt(null),onSelectMethod:Js,plan:gt})]})},Z4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=H.useState(""),a=H.useMemo(()=>s?e.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())):[],[e,s]);return v.jsxs("div",{children:[v.jsx(Gs,{title:"Поиск"}),v.jsxs("div",{className:"p-4",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:"absolute left-3 top-1-2 -translate-y-1/2",children:v.jsx(cS,{className:"text-text-main opacity-50"})}),v.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent transition-shadow duration-300"})]}),v.jsx(qg,{novels:a,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]})]})},W4=({novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})=>v.jsxs("div",{children:[v.jsx(Gs,{title:"Закладки"}),v.jsx(qg,{novels:e,onSelectNovel:t,bookmarks:n,onToggleBookmark:i})]}),J4=({user:e,subscription:t,onGetSubscriptionClick:n,userId:i})=>{const s=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(r=>console.error("Не удалось скопировать UID: ",r))};return v.jsxs("div",{children:[v.jsx(Gs,{title:"Профиль"}),v.jsx(L4,{user:e,subscription:t,onGetSubscriptionClick:n}),v.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для администрирования"}),v.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для назначения прав администратора через Telegram-бота."}),v.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:v.jsx("code",{children:i||"Загрузка..."})}),v.jsx("button",{onClick:s,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]})]})},tO=({activeTab:e,setActiveTab:t})=>{const n=[{id:"library",label:"Библиотека",icon:H4},{id:"search",label:"Поиск",icon:cS},{id:"bookmarks",label:"Закладки",icon:fS},{id:"profile",label:"Профиль",icon:q4}];return v.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:v.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>v.jsxs("button",{onClick:()=>t(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${e===i.id?"text-accent":"text-text-main opacity-60"}`,children:[v.jsx(i.icon,{filled:e===i.id}),v.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},eO=({onReadMore:e})=>{const[t,n]=H.useState([]),[i,s]=H.useState(0);H.useEffect(()=>{fetch("/tene/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%t.length),a=()=>s(u=>(u-1+t.length)%t.length);if(t.length===0)return null;const l=t[i];return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[v.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-bold text-text-main",children:l.title}),v.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),v.jsx("button",{onClick:()=>e(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:v.jsx(F4,{className:"w-5 h-5"})}),v.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:v.jsx(G4,{className:"w-5 h-5"})})]})]})})},nO=({newsItem:e,onClose:t})=>v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:v.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main",onClick:n=>n.stopPropagation(),children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title}),v.jsx("p",{className:"whitespace-pre-wrap opacity-80",children:e.fullText}),v.jsx("button",{onClick:t,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})});function iO(){const[e,t]=H.useState(16),[n,i]=H.useState("font-sans"),[s,r]=H.useState("list"),[a,l]=H.useState("library"),[u,h]=H.useState([]),[d,g]=H.useState(null),[m,_]=H.useState(null),[x,V]=H.useState(null),[O,S]=H.useState(null),[E,R]=H.useState(null),[D,L]=H.useState(!0),[B,T]=H.useState(!1),[y,b]=H.useState([]),[w,C]=H.useState(!0),[I,A]=H.useState(null),[yt,me]=H.useState([]),[q,X]=H.useState(!1),[Y,gt]=H.useState(null),[xt,pn]=H.useState(null),zt="tenebrisverbot",ct=E==null?void 0:E.uid,$t=H.useCallback(async et=>{if(ct){const ht=Ie(ie,"users",ct);try{await Ur(ht,et,{merge:!0})}catch(Et){console.error("Не удалось обновить данные пользователя:",Et)}}},[ct]),Ae=H.useCallback(et=>{t(ht=>{const Et=Math.max(12,Math.min(32,ht+et));return $t({settings:{fontSize:Et,fontClass:n}}),Et})},[n,$t]);H.useEffect(()=>{L(!0),fetch("/tene/data/novels.json").then(Et=>Et.json()).then(Et=>h(Et.novels)).catch(Et=>console.error("Ошибка загрузки новелл:",Et));let et=()=>{};const ht=SD(Uv,async Et=>{var yn,G,tt,Tt;if(et(),Et){R(Et);const Rt=await Et.getIdTokenResult();T(!!Rt.claims.admin);const bt=Ie(ie,"users",Et.uid);et=Au(bt,At=>{if(At.exists()){const Fe=At.data();S(Fe.subscription||null),A(Fe.lastRead||null),me(Fe.bookmarks||[]),Fe.settings&&(t(Fe.settings.fontSize||16),i(Fe.settings.fontClass||"font-sans"))}else S(null),A(null),me([])});const st=(yn=window.Telegram)==null?void 0:yn.WebApp;if(st&&!Et.isAnonymous){const At=(Tt=(tt=(G=st.initDataUnsafe)==null?void 0:G.user)==null?void 0:tt.id)==null?void 0:Tt.toString();At&&await Ur(bt,{telegramId:At},{merge:!0})}}else R(null),await _D(Uv);L(!1)});return()=>{ht(),et()}},[]),H.useEffect(()=>{if(!d){b([]);return}(async()=>{C(!0);try{const ht=Ie(ie,"chapter_info",d.id.toString()),Et=await zd(ht);if(Et.exists()){const G=Et.data().chapters||{},tt=Object.keys(G).map(Tt=>({id:parseInt(Tt),title:`Глава ${Tt}`,isPaid:G[Tt].isPaid||!1})).sort((Tt,Rt)=>Tt.id-Rt.id);b(tt)}else console.log("Документ с главами не найден в chapter_info!"),b([])}catch(ht){console.error("Ошибка загрузки глав из Firebase:",ht),b([])}finally{C(!1)}})()},[d]);const Oe=H.useCallback(()=>{s==="reader"?r("details"):s==="details"&&(r("list"),V(null))},[s]);H.useEffect(()=>{var ht;const et=(ht=window.Telegram)==null?void 0:ht.WebApp;if(et)return et.ready(),et.expand(),et.onEvent("backButtonClicked",Oe),s==="list"?et.BackButton.hide():et.BackButton.show(),()=>et.offEvent("backButtonClicked",Oe)},[s,Oe]),H.useEffect(()=>{var ht;const et=(ht=window.Telegram)==null?void 0:ht.WebApp;et&&(et.setHeaderColor("#FFFFFF"),et.setBackgroundColor("#F5F1ED"))},[]);const wn=H.useCallback(async et=>{if(_(et),r("reader"),ct&&d){const ht={...I||{},[d.id]:{novelId:d.id,chapterId:et.id,timestamp:new Date().toISOString()}};A(ht),await $t({lastRead:ht})}},[ct,d,I,$t]),gs=et=>{g(et),r("details")},Ea=et=>{V(et),r("list"),l("library")},yi=()=>{V(null)},Rn=H.useCallback(async et=>{const ht=yt.includes(et)?yt.filter(Et=>Et!==et):[...yt,et];me(ht),await $t({bookmarks:ht})},[yt,$t]),ps=H.useMemo(()=>u.filter(et=>yt.includes(et.id)),[u,yt]),ys=()=>{X(!0)},qn=et=>{gt(et),X(!1)},_s=async et=>{var Et;const ht=(Et=window.Telegram)==null?void 0:Et.WebApp;if(!ht||!ct||!Y){console.error("Telegram Web App, userId, or selectedPlan is not available."),ht&&ht.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}ht.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async yn=>{if(!yn)return;const G=Ie(ie,"users",ct);try{await Ur(G,{pendingSubscription:{...Y,method:et,date:new Date().toISOString()}},{merge:!0}),ht.openTelegramLink(`https://t.me/${zt}?start=${ct}`),ht.close()}catch(tt){console.error("Ошибка записи в Firebase:",tt),ht.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};if(D)return v.jsx(Y4,{});const Js=()=>{if(s==="details")return v.jsx(K4,{novel:d,onSelectChapter:wn,onGenreSelect:Ea,subscription:O,botUsername:zt,userId:ct,chapters:y,isLoadingChapters:w,lastReadData:I,onBack:Oe});if(s==="reader")return v.jsx($4,{chapter:m,novel:d,fontSize:e,onFontSizeChange:Ae,userId:ct,userName:(E==null?void 0:E.displayName)||"Аноним",currentFontClass:n,onSelectChapter:wn,allChapters:y,subscription:O,botUsername:zt,onBack:Oe,isUserAdmin:B});switch(a){case"library":return v.jsxs(v.Fragment,{children:[v.jsx(Gs,{title:"Библиотека"}),v.jsx(eO,{onReadMore:pn}),x&&v.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("span",{className:"opacity-70",children:"Жанр:"}),v.jsx("strong",{className:"ml-2",children:x})]}),v.jsx("button",{onClick:yi,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),v.jsx(qg,{novels:u.filter(et=>!x||et.genres.includes(x)),onSelectNovel:gs,bookmarks:yt,onToggleBookmark:Rn})]});case"search":return v.jsx(Z4,{novels:u,onSelectNovel:gs,bookmarks:yt,onToggleBookmark:Rn});case"bookmarks":return v.jsx(W4,{novels:ps,onSelectNovel:gs,bookmarks:yt,onToggleBookmark:Rn});case"profile":return v.jsx(J4,{user:E,subscription:O,onGetSubscriptionClick:ys,userId:ct});default:return v.jsx(Gs,{title:"Библиотека"})}};return v.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${B?"":"no-select"}`,children:[v.jsx("div",{className:"pb-20",children:Js()}),s==="list"&&v.jsx(tO,{activeTab:a,setActiveTab:l}),q&&v.jsx(zg,{onClose:()=>X(!1),onSelectPlan:qn}),Y&&v.jsx(Bg,{onClose:()=>gt(null),onSelectMethod:_s,plan:Y}),xt&&v.jsx(nO,{newsItem:xt,onClose:()=>pn(null)})]})}P2.createRoot(document.getElementById("root")).render(v.jsx(H.StrictMode,{children:v.jsx(iO,{})}));
