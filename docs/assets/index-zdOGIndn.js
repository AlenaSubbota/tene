(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function rE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aE={exports:{}},Yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw=Symbol.for("react.transitional.element"),uw=Symbol.for("react.fragment");function oE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:lw,type:t,key:i,ref:e!==void 0?e:null,props:n}}Yc.Fragment=uw;Yc.jsx=oE;Yc.jsxs=oE;aE.exports=Yc;var h=aE.exports,lE={exports:{}},ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=Symbol.for("react.transitional.element"),cw=Symbol.for("react.portal"),hw=Symbol.for("react.fragment"),fw=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),mw=Symbol.for("react.consumer"),pw=Symbol.for("react.context"),gw=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),_w=Symbol.for("react.memo"),uE=Symbol.for("react.lazy"),ey=Symbol.iterator;function vw(t){return t===null||typeof t!="object"?null:(t=ey&&t[ey]||t["@@iterator"],typeof t=="function"?t:null)}var cE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hE=Object.assign,fE={};function ba(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||cE}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dE(){}dE.prototype=ba.prototype;function hm(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||cE}var fm=hm.prototype=new dE;fm.constructor=hm;hE(fm,ba.prototype);fm.isPureReactComponent=!0;var ty=Array.isArray,ze={H:null,A:null,T:null,S:null,V:null},mE=Object.prototype.hasOwnProperty;function dm(t,e,n,i,s,r){return n=r.ref,{$$typeof:cm,type:t,key:e,ref:n!==void 0?n:null,props:r}}function Ew(t,e){return dm(t.type,e,void 0,void 0,void 0,t.props)}function mm(t){return typeof t=="object"&&t!==null&&t.$$typeof===cm}function Tw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ny=/\/+/g;function Yh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tw(""+t.key):e.toString(36)}function iy(){}function bw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(iy,iy):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Er(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case cm:case cw:a=!0;break;case uE:return a=t._init,Er(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+Yh(t,0):i,ty(s)?(n="",a!=null&&(n=a.replace(ny,"$&/")+"/"),Er(s,e,n,"",function(f){return f})):s!=null&&(mm(s)&&(s=Ew(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(ny,"$&/")+"/")+a)),e.push(s)),1;a=0;var l=i===""?".":i+":";if(ty(t))for(var u=0;u<t.length;u++)i=t[u],r=l+Yh(i,u),a+=Er(i,e,n,r,s);else if(u=vw(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,r=l+Yh(i,u++),a+=Er(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return Er(bw(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function lu(t,e,n){if(t==null)return t;var i=[],s=0;return Er(t,i,"","",function(r){return e.call(n,r,s++)}),i}function Aw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Sw(){}ae.Children={map:lu,forEach:function(t,e,n){lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lu(t,function(){e++}),e},toArray:function(t){return lu(t,function(e){return e})||[]},only:function(t){if(!mm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=ba;ae.Fragment=hw;ae.Profiler=dw;ae.PureComponent=hm;ae.StrictMode=fw;ae.Suspense=yw;ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ze;ae.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ze.H.useMemoCache(t)}};ae.cache=function(t){return function(){return t.apply(null,arguments)}};ae.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=hE({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!mE.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return dm(t.type,s,void 0,void 0,r,i)};ae.createContext=function(t){return t={$$typeof:pw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:mw,_context:t},t};ae.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)mE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return dm(t,r,void 0,void 0,null,s)};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:gw,render:t}};ae.isValidElement=mm;ae.lazy=function(t){return{$$typeof:uE,_payload:{_status:-1,_result:t},_init:Aw}};ae.memo=function(t,e){return{$$typeof:_w,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=ze.T,n={};ze.T=n;try{var i=t(),s=ze.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Sw,sy)}catch(r){sy(r)}finally{ze.T=e}};ae.unstable_useCacheRefresh=function(){return ze.H.useCacheRefresh()};ae.use=function(t){return ze.H.use(t)};ae.useActionState=function(t,e,n){return ze.H.useActionState(t,e,n)};ae.useCallback=function(t,e){return ze.H.useCallback(t,e)};ae.useContext=function(t){return ze.H.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t,e){return ze.H.useDeferredValue(t,e)};ae.useEffect=function(t,e,n){var i=ze.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};ae.useId=function(){return ze.H.useId()};ae.useImperativeHandle=function(t,e,n){return ze.H.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return ze.H.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return ze.H.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return ze.H.useMemo(t,e)};ae.useOptimistic=function(t,e){return ze.H.useOptimistic(t,e)};ae.useReducer=function(t,e,n){return ze.H.useReducer(t,e,n)};ae.useRef=function(t){return ze.H.useRef(t)};ae.useState=function(t){return ze.H.useState(t)};ae.useSyncExternalStore=function(t,e,n){return ze.H.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return ze.H.useTransition()};ae.version="19.1.1";lE.exports=ae;var U=lE.exports;const pE=rE(U);var gE={exports:{}},$c={},yE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,$){var Y=B.length;B.push($);e:for(;0<Y;){var me=Y-1>>>1,Me=B[me];if(0<s(Me,$))B[me]=$,B[Y]=Me,Y=me;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var $=B[0],Y=B.pop();if(Y!==$){B[0]=Y;e:for(var me=0,Me=B.length,fn=Me>>>1;me<fn;){var Ke=2*(me+1)-1,be=B[Ke],tt=Ke+1,_t=B[tt];if(0>s(be,Y))tt<Me&&0>s(_t,be)?(B[me]=_t,B[tt]=Y,me=tt):(B[me]=be,B[Ke]=Y,me=Ke);else if(tt<Me&&0>s(_t,Y))B[me]=_t,B[tt]=Y,me=tt;else break e}}return $}function s(B,$){var Y=B.sortIndex-$.sortIndex;return Y!==0?Y:B.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,p=3,_=!1,C=!1,O=!1,V=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var $=n(f);$!==null;){if($.callback===null)i(f);else if($.startTime<=B)i(f),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(f)}}function L(B){if(O=!1,D(B),!C)if(n(u)!==null)C=!0,H||(H=!0,I());else{var $=n(f);$!==null&&_e(L,$.startTime-B)}}var H=!1,T=-1,v=5,b=-1;function A(){return V?!0:!(t.unstable_now()-b<v)}function R(){if(V=!1,H){var B=t.unstable_now();b=B;var $=!0;try{e:{C=!1,O&&(O=!1,E(T),T=-1),_=!0;var Y=p;try{t:{for(D(B),g=n(u);g!==null&&!(g.expirationTime>B&&A());){var me=g.callback;if(typeof me=="function"){g.callback=null,p=g.priorityLevel;var Me=me(g.expirationTime<=B);if(B=t.unstable_now(),typeof Me=="function"){g.callback=Me,D(B),$=!0;break t}g===n(u)&&i(u),D(B)}else i(u);g=n(u)}if(g!==null)$=!0;else{var fn=n(f);fn!==null&&_e(L,fn.startTime-B),$=!1}}break e}finally{g=null,p=Y,_=!1}$=void 0}}finally{$?I():H=!1}}}var I;if(typeof x=="function")I=function(){x(R)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,te=w.port2;w.port1.onmessage=R,I=function(){te.postMessage(null)}}else I=function(){S(R,0)};function _e(B,$){T=S(function(){B(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var Y=p;p=$;try{return B()}finally{p=Y}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=p;p=B;try{return $()}finally{p=Y}},t.unstable_scheduleCallback=function(B,$,Y){var me=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?me+Y:me):Y=me,B){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=Y+Me,B={id:m++,callback:$,priorityLevel:B,startTime:Y,expirationTime:Me,sortIndex:-1},Y>me?(B.sortIndex=Y,e(f,B),n(u)===null&&B===n(f)&&(O?(E(T),T=-1):O=!0,_e(L,Y-me))):(B.sortIndex=Me,e(u,B),C||_||(C=!0,H||(H=!0,I()))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var $=p;return function(){var Y=p;p=$;try{return B.apply(this,arguments)}finally{p=Y}}}})(_E);yE.exports=_E;var ww=yE.exports,vE={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=U;function EE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Pi(){}var zt={d:{f:Pi,r:function(){throw Error(EE(522))},D:Pi,C:Pi,L:Pi,m:Pi,X:Pi,S:Pi,M:Pi},p:0,findDOMNode:null},Rw=Symbol.for("react.portal");function Iw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var yo=xw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Xc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=zt;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(EE(299));return Iw(t,e,null,n)};qt.flushSync=function(t){var e=yo.T,n=zt.p;try{if(yo.T=null,zt.p=2,t)return t()}finally{yo.T=e,zt.p=n,zt.d.f()}};qt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,zt.d.C(t,e))};qt.prefetchDNS=function(t){typeof t=="string"&&zt.d.D(t)};qt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Xc(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?zt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&zt.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};qt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Xc(e.as,e.crossOrigin);zt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&zt.d.M(t)};qt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Xc(n,e.crossOrigin);zt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};qt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Xc(e.as,e.crossOrigin);zt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else zt.d.m(t)};qt.requestFormReset=function(t){zt.d.r(t)};qt.unstable_batchedUpdates=function(t,e){return t(e)};qt.useFormState=function(t,e,n){return yo.H.useFormState(t,e,n)};qt.useFormStatus=function(){return yo.H.useHostTransitionStatus()};qt.version="19.1.1";function TE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TE)}catch(t){console.error(t)}}TE(),vE.exports=qt;var Cw=vE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht=ww,bE=U,Nw=Cw;function P(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function AE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function SE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ry(t){if(fl(t)!==t)throw Error(P(188))}function Dw(t){var e=t.alternate;if(!e){if(e=fl(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return ry(s),t;if(r===i)return ry(s),e;r=r.sibling}throw Error(P(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function wE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=wE(t),e!==null)return e;t=t.sibling}return null}var Le=Object.assign,Ow=Symbol.for("react.element"),uu=Symbol.for("react.transitional.element"),ao=Symbol.for("react.portal"),Cr=Symbol.for("react.fragment"),xE=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),RE=Symbol.for("react.consumer"),li=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),Ff=Symbol.for("react.suspense_list"),gm=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),Gf=Symbol.for("react.activity"),Mw=Symbol.for("react.memo_cache_sentinel"),ay=Symbol.iterator;function Wa(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var kw=Symbol.for("react.client.reference");function Qf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===kw?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cr:return"Fragment";case qf:return"Profiler";case xE:return"StrictMode";case Hf:return"Suspense";case Ff:return"SuspenseList";case Gf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ao:return"Portal";case li:return(t.displayName||"Context")+".Provider";case RE:return(t._context.displayName||"Context")+".Consumer";case pm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gm:return e=t.displayName||null,e!==null?e:Qf(t.type)||"Memo";case Bi:e=t._payload,t=t._init;try{return Qf(t(e))}catch{}}return null}var oo=Array.isArray,ee=bE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=Nw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zs={pending:!1,data:null,method:null,action:null},Kf=[],Nr=-1;function $n(t){return{current:t}}function yt(t){0>Nr||(t.current=Kf[Nr],Kf[Nr]=null,Nr--)}function Be(t,e){Nr++,Kf[Nr]=t.current,t.current=e}var Pn=$n(null),Lo=$n(null),ns=$n(null),Wu=$n(null);function Ju(t,e){switch(Be(ns,e),Be(Lo,t),Be(Pn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?h_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=h_(e),t=F0(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}yt(Pn),Be(Pn,t)}function na(){yt(Pn),yt(Lo),yt(ns)}function Yf(t){t.memoizedState!==null&&Be(Wu,t);var e=Pn.current,n=F0(e,t.type);e!==n&&(Be(Lo,t),Be(Pn,n))}function ec(t){Lo.current===t&&(yt(Pn),yt(Lo)),Wu.current===t&&(yt(Wu),Yo._currentValue=zs)}var $f=Object.prototype.hasOwnProperty,ym=ht.unstable_scheduleCallback,$h=ht.unstable_cancelCallback,jw=ht.unstable_shouldYield,Pw=ht.unstable_requestPaint,Ln=ht.unstable_now,Lw=ht.unstable_getCurrentPriorityLevel,IE=ht.unstable_ImmediatePriority,CE=ht.unstable_UserBlockingPriority,tc=ht.unstable_NormalPriority,Uw=ht.unstable_LowPriority,NE=ht.unstable_IdlePriority,zw=ht.log,Bw=ht.unstable_setDisableYieldValue,dl=null,an=null;function Zi(t){if(typeof zw=="function"&&Bw(t),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(dl,t)}catch{}}var on=Math.clz32?Math.clz32:Fw,qw=Math.log,Hw=Math.LN2;function Fw(t){return t>>>=0,t===0?32:31-(qw(t)/Hw|0)|0}var cu=256,hu=4194304;function ks(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zc(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~r,i!==0?s=ks(i):(a&=l,a!==0?s=ks(a):n||(n=l&~t,n!==0&&(s=ks(n))))):(l=i&~r,l!==0?s=ks(l):a!==0?s=ks(a):n||(n=i&~t,n!==0&&(s=ks(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function ml(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Gw(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DE(){var t=cu;return cu<<=1,!(cu&4194048)&&(cu=256),t}function OE(){var t=hu;return hu<<=1,!(hu&62914560)&&(hu=4194304),t}function Xh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Qw(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,f=t.hiddenUpdates;for(n=a&~n;0<n;){var m=31-on(n),g=1<<m;l[m]=0,u[m]=-1;var p=f[m];if(p!==null)for(f[m]=null,m=0;m<p.length;m++){var _=p[m];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&VE(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function VE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-on(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function ME(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-on(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function _m(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function kE(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:eb(t.type))}function Kw(t,e){var n=Te.p;try{return Te.p=t,e()}finally{Te.p=n}}var ws=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ws,$t="__reactProps$"+ws,Aa="__reactContainer$"+ws,Xf="__reactEvents$"+ws,Yw="__reactListeners$"+ws,$w="__reactHandles$"+ws,oy="__reactResources$"+ws,gl="__reactMarker$"+ws;function Em(t){delete t[Vt],delete t[$t],delete t[Xf],delete t[Yw],delete t[$w]}function Dr(t){var e=t[Vt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Aa]||n[Vt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=m_(t);t!==null;){if(n=t[Vt])return n;t=m_(t)}return e}t=n,n=t.parentNode}return null}function Sa(t){if(t=t[Vt]||t[Aa]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function lo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(P(33))}function Hr(t){var e=t[oy];return e||(e=t[oy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function mt(t){t[gl]=!0}var jE=new Set,PE={};function sr(t,e){ia(t,e),ia(t+"Capture",e)}function ia(t,e){for(PE[t]=e,t=0;t<e.length;t++)jE.add(e[t])}var Xw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ly={},uy={};function Zw(t){return $f.call(uy,t)?!0:$f.call(ly,t)?!1:Xw.test(t)?uy[t]=!0:(ly[t]=!0,!1)}function Cu(t,e,n){if(Zw(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function fu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function si(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var Zh,cy;function Tr(t){if(Zh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zh=e&&e[1]||"",cy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zh+t+cy}var Wh=!1;function Jh(t,e){if(!t||Wh)return"";Wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var p=_}Reflect.construct(t,[],g)}else{try{g.call()}catch(_){p=_}t.call(g.prototype)}}else{try{throw Error()}catch(_){p=_}(g=t())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&p&&typeof _.stack=="string")return[_.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),f=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<f.length&&!f[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===f.length)for(i=u.length-1,s=f.length-1;1<=i&&0<=s&&u[i]!==f[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==f[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==f[s]){var m=`
`+u[i].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=i&&0<=s);break}}}finally{Wh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Tr(n):""}function Ww(t){switch(t.tag){case 26:case 27:case 5:return Tr(t.type);case 16:return Tr("Lazy");case 13:return Tr("Suspense");case 19:return Tr("SuspenseList");case 0:case 15:return Jh(t.type,!1);case 11:return Jh(t.type.render,!1);case 1:return Jh(t.type,!0);case 31:return Tr("Activity");default:return""}}function hy(t){try{var e="";do e+=Ww(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jw(t){var e=LE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nc(t){t._valueTracker||(t._valueTracker=Jw(t))}function UE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=LE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ic(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var e1=/[\n"\\]/g;function yn(t){return t.replace(e1,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Zf(t,e,n,i,s,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+mn(e)):t.value!==""+mn(e)&&(t.value=""+mn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Wf(t,a,mn(e)):n!=null?Wf(t,a,mn(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+mn(l):t.removeAttribute("name")}function zE(t,e,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+mn(n):"",e=e!=null?""+mn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function Wf(t,e,n){e==="number"&&ic(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Fr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+mn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function BE(t,e,n){if(e!=null&&(e=""+mn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+mn(n):""}function qE(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(P(92));if(oo(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=mn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var t1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||t1.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function HE(t,e,n){if(e!=null&&typeof e!="object")throw Error(P(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&fy(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&fy(t,r,e[r])}function Tm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nu(t){return i1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Jf=null;function bm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Or=null,Gr=null;function dy(t){var e=Sa(t);if(e&&(t=e.stateNode)){var n=t[$t]||null;e:switch(t=e.stateNode,e.type){case"input":if(Zf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[$t]||null;if(!s)throw Error(P(90));Zf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&UE(i)}break e;case"textarea":BE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Fr(t,!!n.multiple,e,!1)}}}var ef=!1;function FE(t,e,n){if(ef)return t(e,n);ef=!0;try{var i=t(e);return i}finally{if(ef=!1,(Or!==null||Gr!==null)&&(oh(),Or&&(e=Or,t=Gr,Gr=Or=null,dy(e),t)))for(e=0;e<t.length;e++)dy(t[e])}}function Uo(t,e){var n=t.stateNode;if(n===null)return null;var i=n[$t]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=!1;if(_i)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){ed=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{ed=!1}var Wi=null,Am=null,Du=null;function GE(){if(Du)return Du;var t,e=Am,n=e.length,i,s="value"in Wi?Wi.value:Wi.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return Du=s.slice(t,1<i?1-i:void 0)}function Ou(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function du(){return!0}function my(){return!1}function Xt(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?du:my,this.isPropagationStopped=my,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),e}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wc=Xt(rr),yl=Le({},rr,{view:0,detail:0}),s1=Xt(yl),tf,nf,eo,Jc=Le({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eo&&(eo&&t.type==="mousemove"?(tf=t.screenX-eo.screenX,nf=t.screenY-eo.screenY):nf=tf=0,eo=t),tf)},movementY:function(t){return"movementY"in t?t.movementY:nf}}),py=Xt(Jc),r1=Le({},Jc,{dataTransfer:0}),a1=Xt(r1),o1=Le({},yl,{relatedTarget:0}),sf=Xt(o1),l1=Le({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=Xt(l1),c1=Le({},rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h1=Xt(c1),f1=Le({},rr,{data:0}),gy=Xt(f1),d1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p1[t])?!!e[t]:!1}function Sm(){return g1}var y1=Le({},yl,{key:function(t){if(t.key){var e=d1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ou(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(t){return t.type==="keypress"?Ou(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ou(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_1=Xt(y1),v1=Le({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yy=Xt(v1),E1=Le({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),T1=Xt(E1),b1=Le({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A1=Xt(b1),S1=Le({},Jc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=Xt(S1),x1=Le({},rr,{newState:0,oldState:0}),R1=Xt(x1),I1=[9,13,27,32],wm=_i&&"CompositionEvent"in window,_o=null;_i&&"documentMode"in document&&(_o=document.documentMode);var C1=_i&&"TextEvent"in window&&!_o,QE=_i&&(!wm||_o&&8<_o&&11>=_o),_y=" ",vy=!1;function KE(t,e){switch(t){case"keyup":return I1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function N1(t,e){switch(t){case"compositionend":return YE(e);case"keypress":return e.which!==32?null:(vy=!0,_y);case"textInput":return t=e.data,t===_y&&vy?null:t;default:return null}}function D1(t,e){if(Vr)return t==="compositionend"||!wm&&KE(t,e)?(t=GE(),Du=Am=Wi=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QE&&e.locale!=="ko"?null:e.data;default:return null}}var O1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!O1[t.type]:e==="textarea"}function $E(t,e,n,i){Or?Gr?Gr.push(i):Gr=[i]:Or=i,e=Tc(e,"onChange"),0<e.length&&(n=new Wc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var vo=null,zo=null;function V1(t){B0(t,0)}function eh(t){var e=lo(t);if(UE(e))return t}function Ty(t,e){if(t==="change")return e}var XE=!1;if(_i){var rf;if(_i){var af="oninput"in document;if(!af){var by=document.createElement("div");by.setAttribute("oninput","return;"),af=typeof by.oninput=="function"}rf=af}else rf=!1;XE=rf&&(!document.documentMode||9<document.documentMode)}function Ay(){vo&&(vo.detachEvent("onpropertychange",ZE),zo=vo=null)}function ZE(t){if(t.propertyName==="value"&&eh(zo)){var e=[];$E(e,zo,t,bm(t)),FE(V1,e)}}function M1(t,e,n){t==="focusin"?(Ay(),vo=e,zo=n,vo.attachEvent("onpropertychange",ZE)):t==="focusout"&&Ay()}function k1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(zo)}function j1(t,e){if(t==="click")return eh(e)}function P1(t,e){if(t==="input"||t==="change")return eh(e)}function L1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:L1;function Bo(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!$f.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function Sy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wy(t,e){var n=Sy(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sy(n)}}function WE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JE(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ic(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ic(t.document)}return e}function xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var U1=_i&&"documentMode"in document&&11>=document.documentMode,Mr=null,td=null,Eo=null,nd=!1;function xy(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nd||Mr==null||Mr!==ic(i)||(i=Mr,"selectionStart"in i&&xm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Eo&&Bo(Eo,i)||(Eo=i,i=Tc(td,"onSelect"),0<i.length&&(e=new Wc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Mr)))}function Ms(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kr={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},of={},eT={};_i&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function ar(t){if(of[t])return of[t];if(!kr[t])return t;var e=kr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eT)return of[t]=e[n];return t}var tT=ar("animationend"),nT=ar("animationiteration"),iT=ar("animationstart"),z1=ar("transitionrun"),B1=ar("transitionstart"),q1=ar("transitioncancel"),sT=ar("transitionend"),rT=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function Dn(t,e){rT.set(t,e),sr(e,[t])}var Ry=new WeakMap;function _n(t,e){if(typeof t=="object"&&t!==null){var n=Ry.get(t);return n!==void 0?n:(e={value:t,source:e,stack:hy(e)},Ry.set(t,e),e)}return{value:t,source:e,stack:hy(e)}}var dn=[],jr=0,Rm=0;function th(){for(var t=jr,e=Rm=jr=0;e<t;){var n=dn[e];dn[e++]=null;var i=dn[e];dn[e++]=null;var s=dn[e];dn[e++]=null;var r=dn[e];if(dn[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&aT(n,s,r)}}function nh(t,e,n,i){dn[jr++]=t,dn[jr++]=e,dn[jr++]=n,dn[jr++]=i,Rm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Im(t,e,n,i){return nh(t,e,n,i),sc(t)}function wa(t,e){return nh(t,null,null,e),sc(t)}function aT(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-on(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function sc(t){if(50<No)throw No=0,Sd=null,Error(P(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Pr={};function H1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,i){return new H1(t,e,n,i)}function Cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pi(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function oT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Vu(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")Cm(t)&&(a=1);else if(typeof t=="string")a=Gx(t,n,Pn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Gf:return t=nn(31,n,e,s),t.elementType=Gf,t.lanes=r,t;case Cr:return Bs(n.children,s,r,e);case xE:a=8,s|=24;break;case qf:return t=nn(12,n,e,s|2),t.elementType=qf,t.lanes=r,t;case Hf:return t=nn(13,n,e,s),t.elementType=Hf,t.lanes=r,t;case Ff:return t=nn(19,n,e,s),t.elementType=Ff,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vw:case li:a=10;break e;case RE:a=9;break e;case pm:a=11;break e;case gm:a=14;break e;case Bi:a=16,i=null;break e}a=29,n=Error(P(130,t===null?"null":typeof t,"")),i=null}return e=nn(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Bs(t,e,n,i){return t=nn(7,t,i,e),t.lanes=n,t}function lf(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function uf(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Lr=[],Ur=0,rc=null,ac=0,pn=[],gn=0,qs=null,ui=1,ci="";function js(t,e){Lr[Ur++]=ac,Lr[Ur++]=rc,rc=t,ac=e}function lT(t,e,n){pn[gn++]=ui,pn[gn++]=ci,pn[gn++]=qs,qs=t;var i=ui;t=ci;var s=32-on(i)-1;i&=~(1<<s),n+=1;var r=32-on(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ui=1<<32-on(e)+s|n<<s|i,ci=r+t}else ui=1<<r|n<<s|i,ci=t}function Nm(t){t.return!==null&&(js(t,1),lT(t,1,0))}function Dm(t){for(;t===rc;)rc=Lr[--Ur],Lr[Ur]=null,ac=Lr[--Ur],Lr[Ur]=null;for(;t===qs;)qs=pn[--gn],pn[gn]=null,ci=pn[--gn],pn[gn]=null,ui=pn[--gn],pn[gn]=null}var Lt=null,$e=null,Ee=!1,Hs=null,kn=!1,sd=Error(P(519));function Ys(t){var e=Error(P(418,""));throw qo(_n(e,t)),sd}function Iy(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Vt]=t,e[$t]=i,n){case"dialog":le("cancel",e),le("close",e);break;case"iframe":case"object":case"embed":le("load",e);break;case"video":case"audio":for(n=0;n<Go.length;n++)le(Go[n],e);break;case"source":le("error",e);break;case"img":case"image":case"link":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"input":le("invalid",e),zE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),nc(e);break;case"select":le("invalid",e);break;case"textarea":le("invalid",e),qE(e,i.value,i.defaultValue,i.children),nc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||H0(e.textContent,n)?(i.popover!=null&&(le("beforetoggle",e),le("toggle",e)),i.onScroll!=null&&le("scroll",e),i.onScrollEnd!=null&&le("scrollend",e),i.onClick!=null&&(e.onclick=ch),e=!0):e=!1,e||Ys(t)}function Cy(t){for(Lt=t.return;Lt;)switch(Lt.tag){case 5:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Lt=Lt.return}}function to(t){if(t!==Lt)return!1;if(!Ee)return Cy(t),Ee=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Nd(t.type,t.memoizedProps)),n=!n),n&&$e&&Ys(t),Cy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){$e=In(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}$e=null}}else e===27?(e=$e,xs(t.type)?(t=Vd,Vd=null,$e=t):$e=e):$e=Lt?In(t.stateNode.nextSibling):null;return!0}function _l(){$e=Lt=null,Ee=!1}function Ny(){var t=Hs;return t!==null&&(Kt===null?Kt=t:Kt.push.apply(Kt,t),Hs=null),t}function qo(t){Hs===null?Hs=[t]:Hs.push(t)}var rd=$n(null),or=null,hi=null;function Hi(t,e,n){Be(rd,e._currentValue),e._currentValue=n}function gi(t){t._currentValue=rd.current,yt(rd)}function ad(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function od(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),ad(r.return,n,t),i||(a=null);break e}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(P(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),ad(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function vl(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=s.type;hn(s.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(s===Wu.current){if(a=s.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Yo):t=[Yo])}s=s.return}t!==null&&od(e,t,n,i),e.flags|=262144}function oc(t){for(t=t.firstContext;t!==null;){if(!hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function $s(t){or=t,hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Mt(t){return uT(or,t)}function mu(t,e){return or===null&&$s(t),uT(t,e)}function uT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},hi===null){if(t===null)throw Error(P(308));hi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else hi=hi.next=e;return n}var F1=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},G1=ht.unstable_scheduleCallback,Q1=ht.unstable_NormalPriority,lt={$$typeof:li,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Om(){return{controller:new F1,data:new Map,refCount:0}}function El(t){t.refCount--,t.refCount===0&&G1(Q1,function(){t.controller.abort()})}var To=null,ld=0,ra=0,Qr=null;function K1(t,e){if(To===null){var n=To=[];ld=0,ra=tp(),Qr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return ld++,e.then(Dy,Dy),e}function Dy(){if(--ld===0&&To!==null){Qr!==null&&(Qr.status="fulfilled");var t=To;To=null,ra=0,Qr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Y1(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Oy=ee.S;ee.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&K1(t,e),Oy!==null&&Oy(t,e)};var Fs=$n(null);function Vm(){var t=Fs.current;return t!==null?t:Ve.pooledCache}function Mu(t,e){e===null?Be(Fs,Fs.current):Be(Fs,e.pool)}function cT(){var t=Vm();return t===null?null:{parent:lt._currentValue,pool:t}}var Tl=Error(P(460)),hT=Error(P(474)),ih=Error(P(542)),ud={then:function(){}};function Vy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pu(){}function fT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(pu,pu),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ky(t),t;default:if(typeof e.status=="string")e.then(pu,pu);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(P(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ky(t),t}throw bo=e,Tl}}var bo=null;function My(){if(bo===null)throw Error(P(459));var t=bo;return bo=null,t}function ky(t){if(t===Tl||t===ih)throw Error(P(483))}var qi=!1;function Mm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function is(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=sc(t),aT(t,null,n),e}return nh(t,i,e,n),sc(t)}function Ao(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ME(t,n)}}function cf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var hd=!1;function So(){if(hd){var t=Qr;if(t!==null)throw t}}function wo(t,e,n,i){hd=!1;var s=t.updateQueue;qi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?r=f:a.next=f,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,m=f=u=null,l=r;do{var p=l.lane&-536870913,_=p!==l.lane;if(_?(ge&p)===p:(i&p)===p){p!==0&&p===ra&&(hd=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;p=e;var V=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){g=C.call(V,g,p);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,p=typeof C=="function"?C.call(V,g,p):C,p==null)break e;g=Le({},g,p);break e;case 2:qi=!0}}p=l.callback,p!==null&&(t.flags|=64,_&&(t.flags|=8192),_=s.callbacks,_===null?s.callbacks=[p]:_.push(p))}else _={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=_,u=g):m=m.next=_,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=m,r===null&&(s.shared.lanes=0),_s|=a,t.lanes=a,t.memoizedState=g}}function dT(t,e){if(typeof t!="function")throw Error(P(191,t));t.call(e)}function mT(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)dT(n[t],e)}var aa=$n(null),lc=$n(0);function jy(t,e){t=Ti,Be(lc,t),Be(aa,e),Ti=t|e.baseLanes}function fd(){Be(lc,Ti),Be(aa,aa.current)}function km(){Ti=lc.current,yt(aa),yt(lc)}var gs=0,oe=null,Ne=null,st=null,uc=!1,Kr=!1,Xs=!1,cc=0,Ho=0,Yr=null,$1=0;function We(){throw Error(P(321))}function jm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Pm(t,e,n,i,s,r){return gs=r,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?GT:QT,Xs=!1,r=n(i,s),Xs=!1,Kr&&(r=gT(e,n,i,s)),pT(t),r}function pT(t){ee.H=hc;var e=Ne!==null&&Ne.next!==null;if(gs=0,st=Ne=oe=null,uc=!1,Ho=0,Yr=null,e)throw Error(P(300));t===null||gt||(t=t.dependencies,t!==null&&oc(t)&&(gt=!0))}function gT(t,e,n,i){oe=t;var s=0;do{if(Kr&&(Yr=null),Ho=0,Kr=!1,25<=s)throw Error(P(301));if(s+=1,st=Ne=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ee.H=nx,r=e(n,i)}while(Kr);return r}function X1(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?bl(e):e,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(oe.flags|=1024),e}function Lm(){var t=cc!==0;return cc=0,t}function Um(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function zm(t){if(uc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}uc=!1}gs=0,st=Ne=oe=null,Kr=!1,Ho=cc=0,Yr=null}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?oe.memoizedState=st=t:st=st.next=t,st}function ot(){if(Ne===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=st===null?oe.memoizedState:st.next;if(e!==null)st=e,Ne=t;else{if(t===null)throw oe.alternate===null?Error(P(467)):Error(P(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},st===null?oe.memoizedState=st=t:st=st.next=t}return st}function Bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(t){var e=Ho;return Ho+=1,Yr===null&&(Yr=[]),t=fT(Yr,t,e),e=oe,(st===null?e.memoizedState:st.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?GT:QT),t}function sh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bl(t);if(t.$$typeof===li)return Mt(t)}throw Error(P(438,String(t)))}function qm(t){var e=null,n=oe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=oe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Bm(),oe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=Mw;return e.index++,n}function vi(t,e){return typeof e=="function"?e(t):e}function ku(t){var e=ot();return Hm(e,Ne,t)}function Hm(t,e,n){var i=t.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var l=a=null,u=null,f=e,m=!1;do{var g=f.lane&-536870913;if(g!==f.lane?(ge&g)===g:(gs&g)===g){var p=f.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),g===ra&&(m=!0);else if((gs&p)===p){f=f.next,p===ra&&(m=!0);continue}else g={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,oe.lanes|=p,_s|=p;g=f.action,Xs&&n(r,g),r=f.hasEagerState?f.eagerState:n(r,g)}else p={lane:g,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,oe.lanes|=g,_s|=g;f=f.next}while(f!==null&&f!==e);if(u===null?a=r:u.next=l,!hn(r,t.memoizedState)&&(gt=!0,m&&(n=Qr,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function hf(t){var e=ot(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);hn(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function yT(t,e,n){var i=oe,s=ot(),r=Ee;if(r){if(n===void 0)throw Error(P(407));n=n()}else n=e();var a=!hn((Ne||s).memoizedState,n);a&&(s.memoizedState=n,gt=!0),s=s.queue;var l=ET.bind(null,i,s,t);if(Al(2048,8,l,[t]),s.getSnapshot!==e||a||st!==null&&st.memoizedState.tag&1){if(i.flags|=2048,oa(9,rh(),vT.bind(null,i,s,n,e),null),Ve===null)throw Error(P(349));r||gs&124||_T(i,e,n)}return n}function _T(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e=Bm(),oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vT(t,e,n,i){e.value=n,e.getSnapshot=i,TT(e)&&bT(t)}function ET(t,e,n){return n(function(){TT(e)&&bT(t)})}function TT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function bT(t){var e=wa(t,2);e!==null&&un(e,t,2)}function dd(t){var e=Gt();if(typeof t=="function"){var n=t;if(t=n(),Xs){Zi(!0);try{n()}finally{Zi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},e}function AT(t,e,n,i){return t.baseState=n,Hm(t,Ne,typeof i=="function"?i:vi)}function Z1(t,e,n,i,s){if(ah(t))throw Error(P(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ee.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,ST(e,r)):(r.next=n.next,e.pending=n.next=r)}}function ST(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=ee.T,a={};ee.T=a;try{var l=n(s,i),u=ee.S;u!==null&&u(a,l),Py(t,e,l)}catch(f){md(t,e,f)}finally{ee.T=r}}else try{r=n(s,i),Py(t,e,r)}catch(f){md(t,e,f)}}function Py(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ly(t,e,i)},function(i){return md(t,e,i)}):Ly(t,e,n)}function Ly(t,e,n){e.status="fulfilled",e.value=n,wT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ST(t,n)))}function md(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,wT(e),e=e.next;while(e!==i)}t.action=null}function wT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function xT(t,e){return e}function Uy(t,e){if(Ee){var n=Ve.formState;if(n!==null){e:{var i=oe;if(Ee){if($e){t:{for(var s=$e,r=kn;s.nodeType!==8;){if(!r){s=null;break t}if(s=In(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){$e=In(s.nextSibling),i=s.data==="F!";break e}}Ys(i)}i=!1}i&&(e=n[0])}}return n=Gt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xT,lastRenderedState:e},n.queue=i,n=qT.bind(null,oe,i),i.dispatch=n,i=dd(!1),r=Km.bind(null,oe,!1,i.queue),i=Gt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=Z1.bind(null,oe,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function zy(t){var e=ot();return RT(e,Ne,t)}function RT(t,e,n){if(e=Hm(t,e,xT)[0],t=ku(vi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=bl(e)}catch(a){throw a===Tl?ih:a}else i=e;e=ot();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(oe.flags|=2048,oa(9,rh(),W1.bind(null,s,n),null)),[i,r,t]}function W1(t,e){t.action=e}function By(t){var e=ot(),n=Ne;if(n!==null)return RT(e,n,t);ot(),e=e.memoizedState,n=ot();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function oa(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=oe.updateQueue,e===null&&(e=Bm(),oe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function rh(){return{destroy:void 0,resource:void 0}}function IT(){return ot().memoizedState}function ju(t,e,n,i){var s=Gt();i=i===void 0?null:i,oe.flags|=t,s.memoizedState=oa(1|e,rh(),n,i)}function Al(t,e,n,i){var s=ot();i=i===void 0?null:i;var r=s.memoizedState.inst;Ne!==null&&i!==null&&jm(i,Ne.memoizedState.deps)?s.memoizedState=oa(e,r,n,i):(oe.flags|=t,s.memoizedState=oa(1|e,r,n,i))}function qy(t,e){ju(8390656,8,t,e)}function CT(t,e){Al(2048,8,t,e)}function NT(t,e){return Al(4,2,t,e)}function DT(t,e){return Al(4,4,t,e)}function OT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VT(t,e,n){n=n!=null?n.concat([t]):null,Al(4,4,OT.bind(null,e,t),n)}function Fm(){}function MT(t,e){var n=ot();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&jm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function kT(t,e){var n=ot();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&jm(e,i[1]))return i[0];if(i=t(),Xs){Zi(!0);try{t()}finally{Zi(!1)}}return n.memoizedState=[i,e],i}function Gm(t,e,n){return n===void 0||gs&1073741824?t.memoizedState=e:(t.memoizedState=n,t=w0(),oe.lanes|=t,_s|=t,n)}function jT(t,e,n,i){return hn(n,e)?n:aa.current!==null?(t=Gm(t,n,i),hn(t,e)||(gt=!0),t):gs&42?(t=w0(),oe.lanes|=t,_s|=t,e):(gt=!0,t.memoizedState=n)}function PT(t,e,n,i,s){var r=Te.p;Te.p=r!==0&&8>r?r:8;var a=ee.T,l={};ee.T=l,Km(t,!1,e,n);try{var u=s(),f=ee.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=Y1(u,i);xo(t,e,m,ln(t))}else xo(t,e,i,ln(t))}catch(g){xo(t,e,{then:function(){},status:"rejected",reason:g},ln())}finally{Te.p=r,ee.T=a}}function J1(){}function pd(t,e,n,i){if(t.tag!==5)throw Error(P(476));var s=LT(t).queue;PT(t,s,e,zs,n===null?J1:function(){return UT(t),n(i)})}function LT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:zs,baseState:zs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:zs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function UT(t){var e=LT(t).next.queue;xo(t,e,{},ln())}function Qm(){return Mt(Yo)}function zT(){return ot().memoizedState}function BT(){return ot().memoizedState}function ex(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ln();t=is(n);var i=ss(e,t,n);i!==null&&(un(i,e,n),Ao(i,e,n)),e={cache:Om()},t.payload=e;return}e=e.return}}function tx(t,e,n){var i=ln();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ah(t)?HT(e,n):(n=Im(t,e,n,i),n!==null&&(un(n,t,i),FT(n,e,i)))}function qT(t,e,n){var i=ln();xo(t,e,n,i)}function xo(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ah(t))HT(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,a))return nh(t,e,s,0),Ve===null&&th(),!1}catch{}finally{}if(n=Im(t,e,s,i),n!==null)return un(n,t,i),FT(n,e,i),!0}return!1}function Km(t,e,n,i){if(i={lane:2,revertLane:tp(),action:i,hasEagerState:!1,eagerState:null,next:null},ah(t)){if(e)throw Error(P(479))}else e=Im(t,n,i,2),e!==null&&un(e,t,2)}function ah(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function HT(t,e){Kr=uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FT(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ME(t,n)}}var hc={readContext:Mt,use:sh,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We},GT={readContext:Mt,use:sh,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:qy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ju(4194308,4,OT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ju(4194308,4,t,e)},useInsertionEffect:function(t,e){ju(4,2,t,e)},useMemo:function(t,e){var n=Gt();e=e===void 0?null:e;var i=t();if(Xs){Zi(!0);try{t()}finally{Zi(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Gt();if(n!==void 0){var s=n(e);if(Xs){Zi(!0);try{n(e)}finally{Zi(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=tx.bind(null,oe,t),[i.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:function(t){t=dd(t);var e=t.queue,n=qT.bind(null,oe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Fm,useDeferredValue:function(t,e){var n=Gt();return Gm(n,t,e)},useTransition:function(){var t=dd(!1);return t=PT.bind(null,oe,t.queue,!0,!1),Gt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=oe,s=Gt();if(Ee){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),Ve===null)throw Error(P(349));ge&124||_T(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,qy(ET.bind(null,i,r,t),[t]),i.flags|=2048,oa(9,rh(),vT.bind(null,i,r,n,e),null),n},useId:function(){var t=Gt(),e=Ve.identifierPrefix;if(Ee){var n=ci,i=ui;n=(i&~(1<<32-on(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=cc++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=$1++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:Qm,useFormState:Uy,useActionState:Uy,useOptimistic:function(t){var e=Gt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Km.bind(null,oe,!0,n),n.dispatch=e,[t,e]},useMemoCache:qm,useCacheRefresh:function(){return Gt().memoizedState=ex.bind(null,oe)}},QT={readContext:Mt,use:sh,useCallback:MT,useContext:Mt,useEffect:CT,useImperativeHandle:VT,useInsertionEffect:NT,useLayoutEffect:DT,useMemo:kT,useReducer:ku,useRef:IT,useState:function(){return ku(vi)},useDebugValue:Fm,useDeferredValue:function(t,e){var n=ot();return jT(n,Ne.memoizedState,t,e)},useTransition:function(){var t=ku(vi)[0],e=ot().memoizedState;return[typeof t=="boolean"?t:bl(t),e]},useSyncExternalStore:yT,useId:zT,useHostTransitionStatus:Qm,useFormState:zy,useActionState:zy,useOptimistic:function(t,e){var n=ot();return AT(n,Ne,t,e)},useMemoCache:qm,useCacheRefresh:BT},nx={readContext:Mt,use:sh,useCallback:MT,useContext:Mt,useEffect:CT,useImperativeHandle:VT,useInsertionEffect:NT,useLayoutEffect:DT,useMemo:kT,useReducer:hf,useRef:IT,useState:function(){return hf(vi)},useDebugValue:Fm,useDeferredValue:function(t,e){var n=ot();return Ne===null?Gm(n,t,e):jT(n,Ne.memoizedState,t,e)},useTransition:function(){var t=hf(vi)[0],e=ot().memoizedState;return[typeof t=="boolean"?t:bl(t),e]},useSyncExternalStore:yT,useId:zT,useHostTransitionStatus:Qm,useFormState:By,useActionState:By,useOptimistic:function(t,e){var n=ot();return Ne!==null?AT(n,Ne,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:qm,useCacheRefresh:BT},$r=null,Fo=0;function gu(t){var e=Fo;return Fo+=1,$r===null&&($r=[]),fT($r,t,e)}function no(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function yu(t,e){throw e.$$typeof===Ow?Error(P(525)):(t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Hy(t){var e=t._init;return e(t._payload)}function KT(t){function e(S,E){if(t){var x=S.deletions;x===null?(S.deletions=[E],S.flags|=16):x.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function i(S){for(var E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function s(S,E){return S=pi(S,E),S.index=0,S.sibling=null,S}function r(S,E,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<E?(S.flags|=67108866,E):x):(S.flags|=67108866,E)):(S.flags|=1048576,E)}function a(S){return t&&S.alternate===null&&(S.flags|=67108866),S}function l(S,E,x,D){return E===null||E.tag!==6?(E=lf(x,S.mode,D),E.return=S,E):(E=s(E,x),E.return=S,E)}function u(S,E,x,D){var L=x.type;return L===Cr?m(S,E,x.props.children,D,x.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Bi&&Hy(L)===E.type)?(E=s(E,x.props),no(E,x),E.return=S,E):(E=Vu(x.type,x.key,x.props,null,S.mode,D),no(E,x),E.return=S,E)}function f(S,E,x,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=uf(x,S.mode,D),E.return=S,E):(E=s(E,x.children||[]),E.return=S,E)}function m(S,E,x,D,L){return E===null||E.tag!==7?(E=Bs(x,S.mode,D,L),E.return=S,E):(E=s(E,x),E.return=S,E)}function g(S,E,x){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=lf(""+E,S.mode,x),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uu:return x=Vu(E.type,E.key,E.props,null,S.mode,x),no(x,E),x.return=S,x;case ao:return E=uf(E,S.mode,x),E.return=S,E;case Bi:var D=E._init;return E=D(E._payload),g(S,E,x)}if(oo(E)||Wa(E))return E=Bs(E,S.mode,x,null),E.return=S,E;if(typeof E.then=="function")return g(S,gu(E),x);if(E.$$typeof===li)return g(S,mu(S,E),x);yu(S,E)}return null}function p(S,E,x,D){var L=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return L!==null?null:l(S,E,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uu:return x.key===L?u(S,E,x,D):null;case ao:return x.key===L?f(S,E,x,D):null;case Bi:return L=x._init,x=L(x._payload),p(S,E,x,D)}if(oo(x)||Wa(x))return L!==null?null:m(S,E,x,D,null);if(typeof x.then=="function")return p(S,E,gu(x),D);if(x.$$typeof===li)return p(S,E,mu(S,x),D);yu(S,x)}return null}function _(S,E,x,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return S=S.get(x)||null,l(E,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case uu:return S=S.get(D.key===null?x:D.key)||null,u(E,S,D,L);case ao:return S=S.get(D.key===null?x:D.key)||null,f(E,S,D,L);case Bi:var H=D._init;return D=H(D._payload),_(S,E,x,D,L)}if(oo(D)||Wa(D))return S=S.get(x)||null,m(E,S,D,L,null);if(typeof D.then=="function")return _(S,E,x,gu(D),L);if(D.$$typeof===li)return _(S,E,x,mu(E,D),L);yu(E,D)}return null}function C(S,E,x,D){for(var L=null,H=null,T=E,v=E=0,b=null;T!==null&&v<x.length;v++){T.index>v?(b=T,T=null):b=T.sibling;var A=p(S,T,x[v],D);if(A===null){T===null&&(T=b);break}t&&T&&A.alternate===null&&e(S,T),E=r(A,E,v),H===null?L=A:H.sibling=A,H=A,T=b}if(v===x.length)return n(S,T),Ee&&js(S,v),L;if(T===null){for(;v<x.length;v++)T=g(S,x[v],D),T!==null&&(E=r(T,E,v),H===null?L=T:H.sibling=T,H=T);return Ee&&js(S,v),L}for(T=i(T);v<x.length;v++)b=_(T,S,v,x[v],D),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?v:b.key),E=r(b,E,v),H===null?L=b:H.sibling=b,H=b);return t&&T.forEach(function(R){return e(S,R)}),Ee&&js(S,v),L}function O(S,E,x,D){if(x==null)throw Error(P(151));for(var L=null,H=null,T=E,v=E=0,b=null,A=x.next();T!==null&&!A.done;v++,A=x.next()){T.index>v?(b=T,T=null):b=T.sibling;var R=p(S,T,A.value,D);if(R===null){T===null&&(T=b);break}t&&T&&R.alternate===null&&e(S,T),E=r(R,E,v),H===null?L=R:H.sibling=R,H=R,T=b}if(A.done)return n(S,T),Ee&&js(S,v),L;if(T===null){for(;!A.done;v++,A=x.next())A=g(S,A.value,D),A!==null&&(E=r(A,E,v),H===null?L=A:H.sibling=A,H=A);return Ee&&js(S,v),L}for(T=i(T);!A.done;v++,A=x.next())A=_(T,S,v,A.value,D),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?v:A.key),E=r(A,E,v),H===null?L=A:H.sibling=A,H=A);return t&&T.forEach(function(I){return e(S,I)}),Ee&&js(S,v),L}function V(S,E,x,D){if(typeof x=="object"&&x!==null&&x.type===Cr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case uu:e:{for(var L=x.key;E!==null;){if(E.key===L){if(L=x.type,L===Cr){if(E.tag===7){n(S,E.sibling),D=s(E,x.props.children),D.return=S,S=D;break e}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Bi&&Hy(L)===E.type){n(S,E.sibling),D=s(E,x.props),no(D,x),D.return=S,S=D;break e}n(S,E);break}else e(S,E);E=E.sibling}x.type===Cr?(D=Bs(x.props.children,S.mode,D,x.key),D.return=S,S=D):(D=Vu(x.type,x.key,x.props,null,S.mode,D),no(D,x),D.return=S,S=D)}return a(S);case ao:e:{for(L=x.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(S,E.sibling),D=s(E,x.children||[]),D.return=S,S=D;break e}else{n(S,E);break}else e(S,E);E=E.sibling}D=uf(x,S.mode,D),D.return=S,S=D}return a(S);case Bi:return L=x._init,x=L(x._payload),V(S,E,x,D)}if(oo(x))return C(S,E,x,D);if(Wa(x)){if(L=Wa(x),typeof L!="function")throw Error(P(150));return x=L.call(x),O(S,E,x,D)}if(typeof x.then=="function")return V(S,E,gu(x),D);if(x.$$typeof===li)return V(S,E,mu(S,x),D);yu(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,E!==null&&E.tag===6?(n(S,E.sibling),D=s(E,x),D.return=S,S=D):(n(S,E),D=lf(x,S.mode,D),D.return=S,S=D),a(S)):n(S,E)}return function(S,E,x,D){try{Fo=0;var L=V(S,E,x,D);return $r=null,L}catch(T){if(T===Tl||T===ih)throw T;var H=nn(29,T,null,S.mode);return H.lanes=D,H.return=S,H}finally{}}}var la=KT(!0),YT=KT(!1),Tn=$n(null),Un=null;function Fi(t){var e=t.alternate;Be(ut,ut.current&1),Be(Tn,t),Un===null&&(e===null||aa.current!==null||e.memoizedState!==null)&&(Un=t)}function $T(t){if(t.tag===22){if(Be(ut,ut.current),Be(Tn,t),Un===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Un=t)}}else Gi()}function Gi(){Be(ut,ut.current),Be(Tn,Tn.current)}function fi(t){yt(Tn),Un===t&&(Un=null),yt(ut)}var ut=$n(0);function fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Od(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function ff(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gd={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ln(),s=is(i);s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(un(e,t,i),Ao(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ln(),s=is(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(un(e,t,i),Ao(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),i=is(n);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,n),e!==null&&(un(e,t,n),Ao(e,t,n))}};function Fy(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Bo(n,i)||!Bo(s,r):!0}function Gy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&gd.enqueueReplaceState(e,e.state,null)}function Zs(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Le({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var dc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function XT(t){dc(t)}function ZT(t){console.error(t)}function WT(t){dc(t)}function mc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Qy(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function yd(t,e,n){return n=is(n),n.tag=3,n.payload={element:null},n.callback=function(){mc(t,e)},n}function JT(t){return t=is(t),t.tag=3,t}function e0(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){Qy(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Qy(e,n,i),typeof s!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function ix(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&vl(e,n,s,!0),n=Tn.current,n!==null){switch(n.tag){case 13:return Un===null?wd():n.alternate===null&&Xe===0&&(Xe=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===ud?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Af(t,i,s)),!1;case 22:return n.flags|=65536,i===ud?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Af(t,i,s)),!1}throw Error(P(435,n.tag))}return Af(t,i,s),wd(),!1}if(Ee)return e=Tn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==sd&&(t=Error(P(422),{cause:i}),qo(_n(t,n)))):(i!==sd&&(e=Error(P(423),{cause:i}),qo(_n(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=_n(i,n),s=yd(t.stateNode,i,s),cf(t,s),Xe!==4&&(Xe=2)),!1;var r=Error(P(520),{cause:i});if(r=_n(r,n),Co===null?Co=[r]:Co.push(r),Xe!==4&&(Xe=2),e===null)return!0;i=_n(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=yd(n.stateNode,i,t),cf(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(rs===null||!rs.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=JT(s),e0(s,t,n,i),cf(n,s),!1}n=n.return}while(n!==null);return!1}var t0=Error(P(461)),gt=!1;function bt(t,e,n,i){e.child=t===null?YT(e,null,n,i):la(e,t.child,n,i)}function Ky(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return $s(e),i=Pm(t,e,n,a,r,s),l=Lm(),t!==null&&!gt?(Um(t,e,s),Ei(t,e,s)):(Ee&&l&&Nm(e),e.flags|=1,bt(t,e,i,s),e.child)}function Yy(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Cm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,n0(t,e,r,i,s)):(t=Vu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!Ym(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Bo,n(a,i)&&t.ref===e.ref)return Ei(t,e,s)}return e.flags|=1,t=pi(r,i),t.ref=e.ref,t.return=e,e.child=t}function n0(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Bo(r,i)&&t.ref===e.ref)if(gt=!1,e.pendingProps=i=r,Ym(t,s))t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,Ei(t,e,s)}return _d(t,e,n,i,s)}function i0(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return $y(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mu(e,r!==null?r.cachePool:null),r!==null?jy(e,r):fd(),$T(e);else return e.lanes=e.childLanes=536870912,$y(t,e,r!==null?r.baseLanes|n:n,n)}else r!==null?(Mu(e,r.cachePool),jy(e,r),Gi(),e.memoizedState=null):(t!==null&&Mu(e,null),fd(),Gi());return bt(t,e,s,n),e.child}function $y(t,e,n,i){var s=Vm();return s=s===null?null:{parent:lt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Mu(e,null),fd(),$T(e),t!==null&&vl(t,e,i,!0),null}function Pu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function _d(t,e,n,i,s){return $s(e),n=Pm(t,e,n,i,void 0,s),i=Lm(),t!==null&&!gt?(Um(t,e,s),Ei(t,e,s)):(Ee&&i&&Nm(e),e.flags|=1,bt(t,e,n,s),e.child)}function Xy(t,e,n,i,s,r){return $s(e),e.updateQueue=null,n=gT(e,i,n,s),pT(t),i=Lm(),t!==null&&!gt?(Um(t,e,r),Ei(t,e,r)):(Ee&&i&&Nm(e),e.flags|=1,bt(t,e,n,r),e.child)}function Zy(t,e,n,i,s){if($s(e),e.stateNode===null){var r=Pr,a=n.contextType;typeof a=="object"&&a!==null&&(r=Mt(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=gd,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Mm(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?Mt(a):Pr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(ff(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&gd.enqueueReplaceState(r,r.state,null),wo(e,i,r,s),So(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=Zs(n,l);r.props=u;var f=r.context,m=n.contextType;a=Pr,typeof m=="object"&&m!==null&&(a=Mt(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||f!==a)&&Gy(e,r,i,a),qi=!1;var p=e.memoizedState;r.state=p,wo(e,i,r,s),So(),f=e.memoizedState,l||p!==f||qi?(typeof g=="function"&&(ff(e,n,g,i),f=e.memoizedState),(u=qi||Fy(e,n,u,i,p,f,a))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),r.props=i,r.state=f,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,cd(t,e),a=e.memoizedProps,m=Zs(n,a),r.props=m,g=e.pendingProps,p=r.context,f=n.contextType,u=Pr,typeof f=="object"&&f!==null&&(u=Mt(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||p!==u)&&Gy(e,r,i,u),qi=!1,p=e.memoizedState,r.state=p,wo(e,i,r,s),So();var _=e.memoizedState;a!==g||p!==_||qi||t!==null&&t.dependencies!==null&&oc(t.dependencies)?(typeof l=="function"&&(ff(e,n,l,i),_=e.memoizedState),(m=qi||Fy(e,n,m,i,p,_,u)||t!==null&&t.dependencies!==null&&oc(t.dependencies))?(f||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),r.props=i,r.state=_,r.context=u,i=m):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Pu(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=la(e,t.child,null,s),e.child=la(e,null,n,s)):bt(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Ei(t,e,s),t}function Wy(t,e,n,i){return _l(),e.flags|=256,bt(t,e,n,i),e.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(t){return{baseLanes:t,cachePool:cT()}}function pf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=En),t}function s0(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(ut.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ee){if(s?Fi(e):Gi(),Ee){var l=$e,u;if(u=l){e:{for(u=l,l=kn;u.nodeType!==8;){if(!l){l=null;break e}if(u=In(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:qs!==null?{id:ui,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},u=nn(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,Lt=e,$e=null,u=!0):u=!1}u||Ys(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Od(l)?e.lanes=32:e.lanes=536870912,null;fi(e)}return l=i.children,i=i.fallback,s?(Gi(),s=e.mode,l=pc({mode:"hidden",children:l},s),i=Bs(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,s=e.child,s.memoizedState=mf(n),s.childLanes=pf(t,a,n),e.memoizedState=df,i):(Fi(e),vd(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(Fi(e),e.flags&=-257,e=gf(t,e,n)):e.memoizedState!==null?(Gi(),e.child=t.child,e.flags|=128,e=null):(Gi(),s=i.fallback,l=e.mode,i=pc({mode:"visible",children:i.children},l),s=Bs(s,l,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,la(e,t.child,null,n),i=e.child,i.memoizedState=mf(n),i.childLanes=pf(t,a,n),e.memoizedState=df,e=s);else if(Fi(e),Od(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var f=a.dgst;a=f,i=Error(P(419)),i.stack="",i.digest=a,qo({value:i,source:null,stack:null}),e=gf(t,e,n)}else if(gt||vl(t,e,n,!1),a=(n&t.childLanes)!==0,gt||a){if(a=Ve,a!==null&&(i=n&-n,i=i&42?1:_m(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,wa(t,i),un(a,t,i),t0;l.data==="$?"||wd(),e=gf(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,$e=In(l.nextSibling),Lt=e,Ee=!0,Hs=null,kn=!1,t!==null&&(pn[gn++]=ui,pn[gn++]=ci,pn[gn++]=qs,ui=t.id,ci=t.overflow,qs=e),e=vd(e,i.children),e.flags|=4096);return e}return s?(Gi(),s=i.fallback,l=e.mode,u=t.child,f=u.sibling,i=pi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?s=pi(f,s):(s=Bs(s,l,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=t.child.memoizedState,l===null?l=mf(n):(u=l.cachePool,u!==null?(f=lt._currentValue,u=u.parent!==f?{parent:f,pool:f}:u):u=cT(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=pf(t,a,n),e.memoizedState=df,i):(Fi(e),n=t.child,t=n.sibling,n=pi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function vd(t,e){return e=pc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function pc(t,e){return t=nn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function gf(t,e,n){return la(e,t.child,null,n),t=vd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Jy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ad(t.return,e,n)}function yf(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function r0(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(bt(t,e,i.children,n),i=ut.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jy(t,n,e);else if(t.tag===19)Jy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Be(ut,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yf(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yf(e,!0,n,null,r);break;case"together":yf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ei(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(n&e.childLanes))if(t!==null){if(vl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ym(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&oc(t)))}function sx(t,e,n){switch(e.tag){case 3:Ju(e,e.stateNode.containerInfo),Hi(e,lt,t.memoizedState.cache),_l();break;case 27:case 5:Yf(e);break;case 4:Ju(e,e.stateNode.containerInfo);break;case 10:Hi(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Fi(e),e.flags|=128,null):n&e.child.childLanes?s0(t,e,n):(Fi(e),t=Ei(t,e,n),t!==null?t.sibling:null);Fi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(vl(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return r0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(ut,ut.current),i)break;return null;case 22:case 23:return e.lanes=0,i0(t,e,n);case 24:Hi(e,lt,t.memoizedState.cache)}return Ei(t,e,n)}function a0(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)gt=!0;else{if(!Ym(t,n)&&!(e.flags&128))return gt=!1,sx(t,e,n);gt=!!(t.flags&131072)}else gt=!1,Ee&&e.flags&1048576&&lT(e,ac,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")Cm(i)?(t=Zs(i,t),e.tag=1,e=Zy(null,e,i,t,n)):(e.tag=0,e=_d(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===pm){e.tag=11,e=Ky(null,e,i,t,n);break e}else if(s===gm){e.tag=14,e=Yy(null,e,i,t,n);break e}}throw e=Qf(i)||i,Error(P(306,e,""))}}return e;case 0:return _d(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=Zs(i,e.pendingProps),Zy(t,e,i,s,n);case 3:e:{if(Ju(e,e.stateNode.containerInfo),t===null)throw Error(P(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,cd(t,e),wo(e,i,null,n);var a=e.memoizedState;if(i=a.cache,Hi(e,lt,i),i!==r.cache&&od(e,[lt],n,!0),So(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Wy(t,e,i,n);break e}else if(i!==s){s=_n(Error(P(424)),e),qo(s),e=Wy(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for($e=In(t.firstChild),Lt=e,Ee=!0,Hs=null,kn=!0,n=YT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(_l(),i===s){e=Ei(t,e,n);break e}bt(t,e,i,n)}e=e.child}return e;case 26:return Pu(t,e),t===null?(n=g_(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ee||(n=e.type,t=e.pendingProps,i=bc(ns.current).createElement(n),i[Vt]=e,i[$t]=t,Rt(i,n,t),mt(i),e.stateNode=i):e.memoizedState=g_(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Yf(e),t===null&&Ee&&(i=e.stateNode=Q0(e.type,e.pendingProps,ns.current),Lt=e,kn=!0,s=$e,xs(e.type)?(Vd=s,$e=In(i.firstChild)):$e=s),bt(t,e,e.pendingProps.children,n),Pu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ee&&((s=i=$e)&&(i=Ox(i,e.type,e.pendingProps,kn),i!==null?(e.stateNode=i,Lt=e,$e=In(i.firstChild),kn=!1,s=!0):s=!1),s||Ys(e)),Yf(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,Nd(s,r)?i=null:a!==null&&Nd(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=Pm(t,e,X1,null,null,n),Yo._currentValue=s),Pu(t,e),bt(t,e,i,n),e.child;case 6:return t===null&&Ee&&((t=n=$e)&&(n=Vx(n,e.pendingProps,kn),n!==null?(e.stateNode=n,Lt=e,$e=null,t=!0):t=!1),t||Ys(e)),null;case 13:return s0(t,e,n);case 4:return Ju(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=la(e,null,i,n):bt(t,e,i,n),e.child;case 11:return Ky(t,e,e.type,e.pendingProps,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Hi(e,e.type,i.value),bt(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,$s(e),s=Mt(s),i=i(s),e.flags|=1,bt(t,e,i,n),e.child;case 14:return Yy(t,e,e.type,e.pendingProps,n);case 15:return n0(t,e,e.type,e.pendingProps,n);case 19:return r0(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=pc(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=pi(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return i0(t,e,n);case 24:return $s(e),i=Mt(lt),t===null?(s=Vm(),s===null&&(s=Ve,r=Om(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},Mm(e),Hi(e,lt,s)):(t.lanes&n&&(cd(t,e),wo(e,null,null,n),So()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Hi(e,lt,i)):(i=r.cache,Hi(e,lt,i),i!==s.cache&&od(e,[lt],n,!0))),bt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(P(156,e.tag))}function ri(t){t.flags|=4}function e_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!$0(e)){if(e=Tn.current,e!==null&&((ge&4194048)===ge?Un!==null:(ge&62914560)!==ge&&!(ge&536870912)||e!==Un))throw bo=ud,hT;t.flags|=8192}}function _u(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?OE():536870912,t.lanes|=e,ua|=e)}function io(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Fe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function rx(t,e,n){var i=e.pendingProps;switch(Dm(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(e),null;case 1:return Fe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),gi(lt),na(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(to(e)?ri(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ny())),Fe(e),null;case 26:return n=e.memoizedState,t===null?(ri(e),n!==null?(Fe(e),e_(e,n)):(Fe(e),e.flags&=-16777217)):n?n!==t.memoizedState?(ri(e),Fe(e),e_(e,n)):(Fe(e),e.flags&=-16777217):(t.memoizedProps!==i&&ri(e),Fe(e),e.flags&=-16777217),null;case 27:ec(e),n=ns.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ri(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Fe(e),null}t=Pn.current,to(e)?Iy(e):(t=Q0(s,i,n),e.stateNode=t,ri(e))}return Fe(e),null;case 5:if(ec(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ri(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Fe(e),null}if(t=Pn.current,to(e))Iy(e);else{switch(s=bc(ns.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[Vt]=e,t[$t]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(Rt(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ri(e)}}return Fe(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&ri(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(P(166));if(t=ns.current,to(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=Lt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[Vt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||H0(t.nodeValue,n)),t||Ys(e)}else t=bc(t).createTextNode(i),t[Vt]=e,e.stateNode=t}return Fe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=to(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(P(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[Vt]=e}else _l(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),s=!1}else s=Ny(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(fi(e),e):(fi(e),null)}if(fi(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),_u(e,e.updateQueue),Fe(e),null;case 4:return na(),t===null&&np(e.stateNode.containerInfo),Fe(e),null;case 10:return gi(e.type),Fe(e),null;case 19:if(yt(ut),s=e.memoizedState,s===null)return Fe(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)io(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=fc(t),r!==null){for(e.flags|=128,io(s,!1),t=r.updateQueue,e.updateQueue=t,_u(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)oT(n,t),n=n.sibling;return Be(ut,ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ln()>yc&&(e.flags|=128,i=!0,io(s,!1),e.lanes=4194304)}else{if(!i)if(t=fc(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,_u(e,t),io(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Ee)return Fe(e),null}else 2*Ln()-s.renderingStartTime>yc&&n!==536870912&&(e.flags|=128,i=!0,io(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ln(),e.sibling=null,t=ut.current,Be(ut,i?t&1|2:t&1),e):(Fe(e),null);case 22:case 23:return fi(e),km(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Fe(e),e.subtreeFlags&6&&(e.flags|=8192)):Fe(e),n=e.updateQueue,n!==null&&_u(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&yt(Fs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),gi(lt),Fe(e),null;case 25:return null;case 30:return null}throw Error(P(156,e.tag))}function ax(t,e){switch(Dm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(lt),na(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ec(e),null;case 13:if(fi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));_l()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(ut),null;case 4:return na(),null;case 10:return gi(e.type),null;case 22:case 23:return fi(e),km(),t!==null&&yt(Fs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return gi(lt),null;case 25:return null;default:return null}}function o0(t,e){switch(Dm(e),e.tag){case 3:gi(lt),na();break;case 26:case 27:case 5:ec(e);break;case 4:na();break;case 13:fi(e);break;case 19:yt(ut);break;case 10:gi(e.type);break;case 22:case 23:fi(e),km(),t!==null&&yt(Fs);break;case 24:gi(lt)}}function Sl(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Oe(e,e.return,l)}}function ys(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=e;var u=n,f=l;try{f()}catch(m){Oe(s,u,m)}}}i=i.next}while(i!==r)}}catch(m){Oe(e,e.return,m)}}function l0(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{mT(e,n)}catch(i){Oe(t,t.return,i)}}}function u0(t,e,n){n.props=Zs(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Oe(t,e,i)}}function Ro(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){Oe(t,e,s)}}function jn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Oe(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Oe(t,e,s)}else n.current=null}function c0(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Oe(t,t.return,s)}}function _f(t,e,n){try{var i=t.stateNode;Rx(i,t.type,n,e),i[$t]=e}catch(s){Oe(t,t.return,s)}}function h0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&xs(t.type)||t.tag===4}function vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&xs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ed(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ch));else if(i!==4&&(i===27&&xs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ed(t,e,n),t=t.sibling;t!==null;)Ed(t,e,n),t=t.sibling}function gc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&xs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(gc(t,e,n),t=t.sibling;t!==null;)gc(t,e,n),t=t.sibling}function f0(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Rt(e,i,n),e[Vt]=t,e[$t]=n}catch(r){Oe(t,t.return,r)}}var oi=!1,Je=!1,Ef=!1,t_=typeof WeakSet=="function"?WeakSet:Set,dt=null;function ox(t,e){if(t=t.containerInfo,Id=xc,t=JE(t),xm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,m=0,g=t,p=null;t:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)p=g,g=_;for(;;){if(g===t)break t;if(p===n&&++f===s&&(l=a),p===r&&++m===i&&(u=a),(_=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:t,selectionRange:n},xc=!1,dt=e;dt!==null;)if(e=dt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,dt=t;else for(;dt!==null;){switch(e=dt,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var C=Zs(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Oe(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Dd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(P(163))}if(t=e.sibling,t!==null){t.return=e.return,dt=t;break}dt=e.return}}function d0(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Li(t,n),i&4&&Sl(5,n);break;case 1:if(Li(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Oe(n,n.return,a)}else{var s=Zs(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Oe(n,n.return,a)}}i&64&&l0(n),i&512&&Ro(n,n.return);break;case 3:if(Li(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{mT(t,e)}catch(a){Oe(n,n.return,a)}}break;case 27:e===null&&i&4&&f0(n);case 26:case 5:Li(t,n),e===null&&i&4&&c0(n),i&512&&Ro(n,n.return);break;case 12:Li(t,n);break;case 13:Li(t,n),i&4&&g0(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=gx.bind(null,n),Mx(t,n))));break;case 22:if(i=n.memoizedState!==null||oi,!i){e=e!==null&&e.memoizedState!==null||Je,s=oi;var r=Je;oi=i,(Je=e)&&!r?zi(t,n,(n.subtreeFlags&8772)!==0):Li(t,n),oi=s,Je=r}break;case 30:break;default:Li(t,n)}}function m0(t){var e=t.alternate;e!==null&&(t.alternate=null,m0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Em(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ue=null,Qt=!1;function ai(t,e,n){for(n=n.child;n!==null;)p0(t,e,n),n=n.sibling}function p0(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(dl,n)}catch{}switch(n.tag){case 26:Je||jn(n,e),ai(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Je||jn(n,e);var i=Ue,s=Qt;xs(n.type)&&(Ue=n.stateNode,Qt=!1),ai(t,e,n),Do(n.stateNode),Ue=i,Qt=s;break;case 5:Je||jn(n,e);case 6:if(i=Ue,s=Qt,Ue=null,ai(t,e,n),Ue=i,Qt=s,Ue!==null)if(Qt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(n.stateNode)}catch(r){Oe(n,e,r)}else try{Ue.removeChild(n.stateNode)}catch(r){Oe(n,e,r)}break;case 18:Ue!==null&&(Qt?(t=Ue,d_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Zo(t)):d_(Ue,n.stateNode));break;case 4:i=Ue,s=Qt,Ue=n.stateNode.containerInfo,Qt=!0,ai(t,e,n),Ue=i,Qt=s;break;case 0:case 11:case 14:case 15:Je||ys(2,n,e),Je||ys(4,n,e),ai(t,e,n);break;case 1:Je||(jn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&u0(n,e,i)),ai(t,e,n);break;case 21:ai(t,e,n);break;case 22:Je=(i=Je)||n.memoizedState!==null,ai(t,e,n),Je=i;break;default:ai(t,e,n)}}function g0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zo(t)}catch(n){Oe(e,e.return,n)}}function lx(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new t_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new t_),e;default:throw Error(P(435,t.tag))}}function Tf(t,e){var n=lx(t);e.forEach(function(i){var s=yx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function Jt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(xs(l.type)){Ue=l.stateNode,Qt=!1;break e}break;case 5:Ue=l.stateNode,Qt=!1;break e;case 3:case 4:Ue=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(Ue===null)throw Error(P(160));p0(r,a,s),Ue=null,Qt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)y0(e,t),e=e.sibling}var xn=null;function y0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Jt(e,t),en(t),i&4&&(ys(3,t,t.return),Sl(3,t),ys(5,t,t.return));break;case 1:Jt(e,t),en(t),i&512&&(Je||n===null||jn(n,n.return)),i&64&&oi&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=xn;if(Jt(e,t),en(t),i&512&&(Je||n===null||jn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[gl]||r[Vt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Rt(r,i,n),r[Vt]=t,mt(r),i=r;break e;case"link":var a=__("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=s.createElement(i),Rt(r,i,n),s.head.appendChild(r);break;case"meta":if(a=__("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=s.createElement(i),Rt(r,i,n),s.head.appendChild(r);break;default:throw Error(P(468,i))}r[Vt]=t,mt(r),i=r}t.stateNode=i}else v_(s,t.type,t.stateNode);else t.stateNode=y_(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?v_(s,t.type,t.stateNode):y_(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&_f(t,t.memoizedProps,n.memoizedProps)}break;case 27:Jt(e,t),en(t),i&512&&(Je||n===null||jn(n,n.return)),n!==null&&i&4&&_f(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Jt(e,t),en(t),i&512&&(Je||n===null||jn(n,n.return)),t.flags&32){s=t.stateNode;try{sa(s,"")}catch(_){Oe(t,t.return,_)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,_f(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Ef=!0);break;case 6:if(Jt(e,t),en(t),i&4){if(t.stateNode===null)throw Error(P(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(_){Oe(t,t.return,_)}}break;case 3:if(zu=null,s=xn,xn=Ac(e.containerInfo),Jt(e,t),xn=s,en(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Zo(e.containerInfo)}catch(_){Oe(t,t.return,_)}Ef&&(Ef=!1,_0(t));break;case 4:i=xn,xn=Ac(t.stateNode.containerInfo),Jt(e,t),en(t),xn=i;break;case 12:Jt(e,t),en(t);break;case 13:Jt(e,t),en(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Jm=Ln()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Tf(t,i)));break;case 22:s=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=oi,m=Je;if(oi=f||s,Je=m||u,Jt(e,t),Je=m,oi=f,en(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||u||oi||Je||Ps(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var g=u.memoizedProps.style,p=g!=null&&g.hasOwnProperty("display")?g.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(_){Oe(u,u.return,_)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(_){Oe(u,u.return,_)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Tf(t,n))));break;case 19:Jt(e,t),en(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Tf(t,i)));break;case 30:break;case 21:break;default:Jt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(h0(i)){n=i;break}i=i.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var s=n.stateNode,r=vf(t);gc(t,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(sa(a,""),n.flags&=-33);var l=vf(t);gc(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,f=vf(t);Ed(t,f,u);break;default:throw Error(P(161))}}catch(m){Oe(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;_0(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Li(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)d0(t,e.alternate,e),e=e.sibling}function Ps(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ys(4,e,e.return),Ps(e);break;case 1:jn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&u0(e,e.return,n),Ps(e);break;case 27:Do(e.stateNode);case 26:case 5:jn(e,e.return),Ps(e);break;case 22:e.memoizedState===null&&Ps(e);break;case 30:Ps(e);break;default:Ps(e)}t=t.sibling}}function zi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:zi(s,r,n),Sl(4,r);break;case 1:if(zi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(f){Oe(i,i.return,f)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)dT(u[s],l)}catch(f){Oe(i,i.return,f)}}n&&a&64&&l0(r),Ro(r,r.return);break;case 27:f0(r);case 26:case 5:zi(s,r,n),n&&i===null&&a&4&&c0(r),Ro(r,r.return);break;case 12:zi(s,r,n);break;case 13:zi(s,r,n),n&&a&4&&g0(s,r);break;case 22:r.memoizedState===null&&zi(s,r,n),Ro(r,r.return);break;case 30:break;default:zi(s,r,n)}e=e.sibling}}function $m(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&El(n))}function Xm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&El(t))}function Vn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)v0(t,e,n,i),e=e.sibling}function v0(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:Vn(t,e,n,i),s&2048&&Sl(9,e);break;case 1:Vn(t,e,n,i);break;case 3:Vn(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&El(t)));break;case 12:if(s&2048){Vn(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Oe(e,e.return,u)}}else Vn(t,e,n,i);break;case 13:Vn(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?Vn(t,e,n,i):Io(t,e):r._visibility&2?Vn(t,e,n,i):(r._visibility|=2,br(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&$m(a,e);break;case 24:Vn(t,e,n,i),s&2048&&Xm(e.alternate,e);break;default:Vn(t,e,n,i)}}function br(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,l=n,u=i,f=a.flags;switch(a.tag){case 0:case 11:case 15:br(r,a,l,u,s),Sl(8,a);break;case 23:break;case 22:var m=a.stateNode;a.memoizedState!==null?m._visibility&2?br(r,a,l,u,s):Io(r,a):(m._visibility|=2,br(r,a,l,u,s)),s&&f&2048&&$m(a.alternate,a);break;case 24:br(r,a,l,u,s),s&&f&2048&&Xm(a.alternate,a);break;default:br(r,a,l,u,s)}e=e.sibling}}function Io(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:Io(n,i),s&2048&&$m(i.alternate,i);break;case 24:Io(n,i),s&2048&&Xm(i.alternate,i);break;default:Io(n,i)}e=e.sibling}}var uo=8192;function _r(t){if(t.subtreeFlags&uo)for(t=t.child;t!==null;)E0(t),t=t.sibling}function E0(t){switch(t.tag){case 26:_r(t),t.flags&uo&&t.memoizedState!==null&&Kx(xn,t.memoizedState,t.memoizedProps);break;case 5:_r(t);break;case 3:case 4:var e=xn;xn=Ac(t.stateNode.containerInfo),_r(t),xn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=uo,uo=16777216,_r(t),uo=e):_r(t));break;default:_r(t)}}function T0(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function so(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];dt=i,A0(i,t)}T0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)b0(t),t=t.sibling}function b0(t){switch(t.tag){case 0:case 11:case 15:so(t),t.flags&2048&&ys(9,t,t.return);break;case 3:so(t);break;case 12:so(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Lu(t)):so(t);break;default:so(t)}}function Lu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];dt=i,A0(i,t)}T0(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ys(8,e,e.return),Lu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Lu(e));break;default:Lu(e)}t=t.sibling}}function A0(t,e){for(;dt!==null;){var n=dt;switch(n.tag){case 0:case 11:case 15:ys(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:El(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,dt=i;else e:for(n=t;dt!==null;){i=dt;var s=i.sibling,r=i.return;if(m0(i),i===n){dt=null;break e}if(s!==null){s.return=r,dt=s;break e}dt=r}}}var ux={getCacheForType:function(t){var e=Mt(lt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},cx=typeof WeakMap=="function"?WeakMap:Map,Re=0,Ve=null,ue=null,ge=0,we=0,tn=null,Ji=!1,xa=!1,Zm=!1,Ti=0,Xe=0,_s=0,Gs=0,Wm=0,En=0,ua=0,Co=null,Kt=null,Td=!1,Jm=0,yc=1/0,_c=null,rs=null,St=0,as=null,ca=null,Xr=0,bd=0,Ad=null,S0=null,No=0,Sd=null;function ln(){if(Re&2&&ge!==0)return ge&-ge;if(ee.T!==null){var t=ra;return t!==0?t:tp()}return kE()}function w0(){En===0&&(En=!(ge&536870912)||Ee?DE():536870912);var t=Tn.current;return t!==null&&(t.flags|=32),En}function un(t,e,n){(t===Ve&&(we===2||we===9)||t.cancelPendingCommit!==null)&&(ha(t,0),es(t,ge,En,!1)),pl(t,n),(!(Re&2)||t!==Ve)&&(t===Ve&&(!(Re&2)&&(Gs|=n),Xe===4&&es(t,ge,En,!1)),Xn(t))}function x0(t,e,n){if(Re&6)throw Error(P(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||ml(t,e),s=i?dx(t,e):bf(t,e,!0),r=i;do{if(s===0){xa&&!i&&es(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!hx(n)){s=bf(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;s=Co;var u=l.current.memoizedState.isDehydrated;if(u&&(ha(l,a).flags|=256),a=bf(l,a,!1),a!==2){if(Zm&&!u){l.errorRecoveryDisabledLanes|=r,Gs|=r,s=4;break e}r=Kt,Kt=s,r!==null&&(Kt===null?Kt=r:Kt.push.apply(Kt,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){ha(t,0),es(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(P(345));case 4:if((e&4194048)!==e)break;case 6:es(i,e,En,!Ji);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(P(329))}if((e&62914560)===e&&(s=Jm+300-Ln(),10<s)){if(es(i,e,En,!Ji),Zc(i,0,!0)!==0)break e;i.timeoutHandle=G0(n_.bind(null,i,n,Kt,_c,Td,e,En,Gs,ua,Ji,r,2,-0,0),s);break e}n_(i,n,Kt,_c,Td,e,En,Gs,ua,Ji,r,0,-0,0)}}break}while(!0);Xn(t)}function n_(t,e,n,i,s,r,a,l,u,f,m,g,p,_){if(t.timeoutHandle=-1,g=e.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Ko={stylesheets:null,count:0,unsuspend:Qx},E0(e),g=Yx(),g!==null)){t.cancelPendingCommit=g(s_.bind(null,t,e,r,n,i,s,a,l,u,m,1,p,_)),es(t,r,a,!f);return}s_(t,e,r,n,i,s,a,l,u)}function hx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!hn(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e,n,i){e&=~Wm,e&=~Gs,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-on(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&VE(t,n,e)}function oh(){return Re&6?!0:(wl(0),!1)}function ep(){if(ue!==null){if(we===0)var t=ue.return;else t=ue,hi=or=null,zm(t),$r=null,Fo=0,t=ue;for(;t!==null;)o0(t.alternate,t),t=t.return;ue=null}}function ha(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Cx(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ep(),Ve=t,ue=n=pi(t.current,null),ge=e,we=0,tn=null,Ji=!1,xa=ml(t,e),Zm=!1,ua=En=Wm=Gs=_s=Xe=0,Kt=Co=null,Td=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-on(i),r=1<<s;e|=t[s],i&=~r}return Ti=e,th(),n}function R0(t,e){oe=null,ee.H=hc,e===Tl||e===ih?(e=My(),we=3):e===hT?(e=My(),we=4):we=e===t0?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,tn=e,ue===null&&(Xe=1,mc(t,_n(e,t.current)))}function I0(){var t=ee.H;return ee.H=hc,t===null?hc:t}function C0(){var t=ee.A;return ee.A=ux,t}function wd(){Xe=4,Ji||(ge&4194048)!==ge&&Tn.current!==null||(xa=!0),!(_s&134217727)&&!(Gs&134217727)||Ve===null||es(Ve,ge,En,!1)}function bf(t,e,n){var i=Re;Re|=2;var s=I0(),r=C0();(Ve!==t||ge!==e)&&(_c=null,ha(t,e)),e=!1;var a=Xe;e:do try{if(we!==0&&ue!==null){var l=ue,u=tn;switch(we){case 8:ep(),a=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(e=!0);var f=we;if(we=0,tn=null,zr(t,l,u,f),n&&xa){a=0;break e}break;default:f=we,we=0,tn=null,zr(t,l,u,f)}}fx(),a=Xe;break}catch(m){R0(t,m)}while(!0);return e&&t.shellSuspendCounter++,hi=or=null,Re=i,ee.H=s,ee.A=r,ue===null&&(Ve=null,ge=0,th()),a}function fx(){for(;ue!==null;)N0(ue)}function dx(t,e){var n=Re;Re|=2;var i=I0(),s=C0();Ve!==t||ge!==e?(_c=null,yc=Ln()+500,ha(t,e)):xa=ml(t,e);e:do try{if(we!==0&&ue!==null){e=ue;var r=tn;t:switch(we){case 1:we=0,tn=null,zr(t,e,r,1);break;case 2:case 9:if(Vy(r)){we=0,tn=null,i_(e);break}e=function(){we!==2&&we!==9||Ve!==t||(we=7),Xn(t)},r.then(e,e);break e;case 3:we=7;break e;case 4:we=5;break e;case 7:Vy(r)?(we=0,tn=null,i_(e)):(we=0,tn=null,zr(t,e,r,7));break;case 5:var a=null;switch(ue.tag){case 26:a=ue.memoizedState;case 5:case 27:var l=ue;if(!a||$0(a)){we=0,tn=null;var u=l.sibling;if(u!==null)ue=u;else{var f=l.return;f!==null?(ue=f,lh(f)):ue=null}break t}}we=0,tn=null,zr(t,e,r,5);break;case 6:we=0,tn=null,zr(t,e,r,6);break;case 8:ep(),Xe=6;break e;default:throw Error(P(462))}}mx();break}catch(m){R0(t,m)}while(!0);return hi=or=null,ee.H=i,ee.A=s,Re=n,ue!==null?0:(Ve=null,ge=0,th(),Xe)}function mx(){for(;ue!==null&&!jw();)N0(ue)}function N0(t){var e=a0(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?lh(t):ue=e}function i_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Xy(n,e,e.pendingProps,e.type,void 0,ge);break;case 11:e=Xy(n,e,e.pendingProps,e.type.render,e.ref,ge);break;case 5:zm(e);default:o0(n,e),e=ue=oT(e,Ti),e=a0(n,e,Ti)}t.memoizedProps=t.pendingProps,e===null?lh(t):ue=e}function zr(t,e,n,i){hi=or=null,zm(e),$r=null,Fo=0;var s=e.return;try{if(ix(t,s,e,n,ge)){Xe=1,mc(t,_n(n,t.current)),ue=null;return}}catch(r){if(s!==null)throw ue=s,r;Xe=1,mc(t,_n(n,t.current)),ue=null;return}e.flags&32768?(Ee||i===1?t=!0:xa||ge&536870912?t=!1:(Ji=t=!0,(i===2||i===9||i===3||i===6)&&(i=Tn.current,i!==null&&i.tag===13&&(i.flags|=16384))),D0(e,t)):lh(e)}function lh(t){var e=t;do{if(e.flags&32768){D0(e,Ji);return}t=e.return;var n=rx(e.alternate,e,Ti);if(n!==null){ue=n;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);Xe===0&&(Xe=5)}function D0(t,e){do{var n=ax(t.alternate,t);if(n!==null){n.flags&=32767,ue=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ue=t;return}ue=t=n}while(t!==null);Xe=6,ue=null}function s_(t,e,n,i,s,r,a,l,u){t.cancelPendingCommit=null;do uh();while(St!==0);if(Re&6)throw Error(P(327));if(e!==null){if(e===t.current)throw Error(P(177));if(r=e.lanes|e.childLanes,r|=Rm,Qw(t,n,r,a,l,u),t===Ve&&(ue=Ve=null,ge=0),ca=e,as=t,Xr=n,bd=r,Ad=s,S0=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,_x(tc,function(){return j0(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=ee.T,ee.T=null,s=Te.p,Te.p=2,a=Re,Re|=4;try{ox(t,e,n)}finally{Re=a,Te.p=s,ee.T=i}}St=1,O0(),V0(),M0()}}function O0(){if(St===1){St=0;var t=as,e=ca,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ee.T,ee.T=null;var i=Te.p;Te.p=2;var s=Re;Re|=4;try{y0(e,t);var r=Cd,a=JE(t.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&WE(l.ownerDocument.documentElement,l)){if(u!==null&&xm(l)){var f=u.start,m=u.end;if(m===void 0&&(m=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(m,l.value.length);else{var g=l.ownerDocument||document,p=g&&g.defaultView||window;if(p.getSelection){var _=p.getSelection(),C=l.textContent.length,O=Math.min(u.start,C),V=u.end===void 0?O:Math.min(u.end,C);!_.extend&&O>V&&(a=V,V=O,O=a);var S=wy(l,O),E=wy(l,V);if(S&&E&&(_.rangeCount!==1||_.anchorNode!==S.node||_.anchorOffset!==S.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var x=g.createRange();x.setStart(S.node,S.offset),_.removeAllRanges(),O>V?(_.addRange(x),_.extend(E.node,E.offset)):(x.setEnd(E.node,E.offset),_.addRange(x))}}}}for(g=[],_=l;_=_.parentNode;)_.nodeType===1&&g.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<g.length;l++){var D=g[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}xc=!!Id,Cd=Id=null}finally{Re=s,Te.p=i,ee.T=n}}t.current=e,St=2}}function V0(){if(St===2){St=0;var t=as,e=ca,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ee.T,ee.T=null;var i=Te.p;Te.p=2;var s=Re;Re|=4;try{d0(t,e.alternate,e)}finally{Re=s,Te.p=i,ee.T=n}}St=3}}function M0(){if(St===4||St===3){St=0,Pw();var t=as,e=ca,n=Xr,i=S0;e.subtreeFlags&10256||e.flags&10256?St=5:(St=0,ca=as=null,k0(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(rs=null),vm(n),e=e.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(dl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=ee.T,s=Te.p,Te.p=2,ee.T=null;try{for(var r=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];r(l.value,{componentStack:l.stack})}}finally{ee.T=e,Te.p=s}}Xr&3&&uh(),Xn(t),s=t.pendingLanes,n&4194090&&s&42?t===Sd?No++:(No=0,Sd=t):No=0,wl(0)}}function k0(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,El(e)))}function uh(t){return O0(),V0(),M0(),j0()}function j0(){if(St!==5)return!1;var t=as,e=bd;bd=0;var n=vm(Xr),i=ee.T,s=Te.p;try{Te.p=32>n?32:n,ee.T=null,n=Ad,Ad=null;var r=as,a=Xr;if(St=0,ca=as=null,Xr=0,Re&6)throw Error(P(331));var l=Re;if(Re|=4,b0(r.current),v0(r,r.current,a,n),Re=l,wl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(dl,r)}catch{}return!0}finally{Te.p=s,ee.T=i,k0(t,e)}}function r_(t,e,n){e=_n(n,e),e=yd(t.stateNode,e,2),t=ss(t,e,2),t!==null&&(pl(t,2),Xn(t))}function Oe(t,e,n){if(t.tag===3)r_(t,t,n);else for(;e!==null;){if(e.tag===3){r_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rs===null||!rs.has(i))){t=_n(n,t),n=JT(2),i=ss(e,n,2),i!==null&&(e0(n,i,e,t),pl(i,2),Xn(i));break}}e=e.return}}function Af(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new cx;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(Zm=!0,s.add(n),t=px.bind(null,t,e,n),e.then(t,t))}function px(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ve===t&&(ge&n)===n&&(Xe===4||Xe===3&&(ge&62914560)===ge&&300>Ln()-Jm?!(Re&2)&&ha(t,0):Wm|=n,ua===ge&&(ua=0)),Xn(t)}function P0(t,e){e===0&&(e=OE()),t=wa(t,e),t!==null&&(pl(t,e),Xn(t))}function gx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P0(t,n)}function yx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(e),P0(t,n)}function _x(t,e){return ym(t,e)}var vc=null,Ar=null,xd=!1,Ec=!1,Sf=!1,Qs=0;function Xn(t){t!==Ar&&t.next===null&&(Ar===null?vc=Ar=t:Ar=Ar.next=t),Ec=!0,xd||(xd=!0,Ex())}function wl(t,e){if(!Sf&&Ec){Sf=!0;do for(var n=!1,i=vc;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-on(42|t)+1)-1,r&=s&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,a_(i,r))}else r=ge,r=Zc(i,i===Ve?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||ml(i,r)||(n=!0,a_(i,r));i=i.next}while(n);Sf=!1}}function vx(){L0()}function L0(){Ec=xd=!1;var t=0;Qs!==0&&(Ix()&&(t=Qs),Qs=0);for(var e=Ln(),n=null,i=vc;i!==null;){var s=i.next,r=U0(i,e);r===0?(i.next=null,n===null?vc=s:n.next=s,s===null&&(Ar=n)):(n=i,(t!==0||r&3)&&(Ec=!0)),i=s}wl(t)}function U0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-on(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=Gw(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=Ve,n=ge,n=Zc(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(we===2||we===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&$h(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||ml(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&$h(i),vm(n)){case 2:case 8:n=CE;break;case 32:n=tc;break;case 268435456:n=NE;break;default:n=tc}return i=z0.bind(null,t),n=ym(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&$h(i),t.callbackPriority=2,t.callbackNode=null,2}function z0(t,e){if(St!==0&&St!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(uh()&&t.callbackNode!==n)return null;var i=ge;return i=Zc(t,t===Ve?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(x0(t,i,e),U0(t,Ln()),t.callbackNode!=null&&t.callbackNode===n?z0.bind(null,t):null)}function a_(t,e){if(uh())return null;x0(t,e,!0)}function Ex(){Nx(function(){Re&6?ym(IE,vx):L0()})}function tp(){return Qs===0&&(Qs=DE()),Qs}function o_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Nu(""+t)}function l_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Tx(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=o_((s[$t]||null).action),a=i.submitter;a&&(e=(e=a[$t]||null)?o_(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new Wc("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Qs!==0){var u=a?l_(s,a):new FormData(s);pd(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?l_(s,a):new FormData(s),pd(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var wf=0;wf<id.length;wf++){var xf=id[wf],bx=xf.toLowerCase(),Ax=xf[0].toUpperCase()+xf.slice(1);Dn(bx,"on"+Ax)}Dn(tT,"onAnimationEnd");Dn(nT,"onAnimationIteration");Dn(iT,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(z1,"onTransitionRun");Dn(B1,"onTransitionStart");Dn(q1,"onTransitionCancel");Dn(sT,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Go));function B0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=f;try{r(s)}catch(m){dc(m)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=f;try{r(s)}catch(m){dc(m)}s.currentTarget=null,r=u}}}}function le(t,e){var n=e[Xf];n===void 0&&(n=e[Xf]=new Set);var i=t+"__bubble";n.has(i)||(q0(e,t,2,!1),n.add(i))}function Rf(t,e,n){var i=0;e&&(i|=4),q0(n,t,i,e)}var vu="_reactListening"+Math.random().toString(36).slice(2);function np(t){if(!t[vu]){t[vu]=!0,jE.forEach(function(n){n!=="selectionchange"&&(Sx.has(n)||Rf(n,!1,t),Rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vu]||(e[vu]=!0,Rf("selectionchange",!1,e))}}function q0(t,e,n,i){switch(eb(e)){case 2:var s=Zx;break;case 8:s=Wx;break;default:s=ap}n=s.bind(null,e,n,t),s=void 0,!ed||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function If(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;l!==null;){if(a=Dr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue e}l=l.parentNode}}i=i.return}FE(function(){var f=r,m=bm(n),g=[];e:{var p=rT.get(t);if(p!==void 0){var _=Wc,C=t;switch(t){case"keypress":if(Ou(n)===0)break e;case"keydown":case"keyup":_=_1;break;case"focusin":C="focus",_=sf;break;case"focusout":C="blur",_=sf;break;case"beforeblur":case"afterblur":_=sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=T1;break;case tT:case nT:case iT:_=u1;break;case sT:_=A1;break;case"scroll":case"scrollend":_=s1;break;case"wheel":_=w1;break;case"copy":case"cut":case"paste":_=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=yy;break;case"toggle":case"beforetoggle":_=R1}var O=(e&4)!==0,V=!O&&(t==="scroll"||t==="scrollend"),S=O?p!==null?p+"Capture":null:p;O=[];for(var E=f,x;E!==null;){var D=E;if(x=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||x===null||S===null||(D=Uo(E,S),D!=null&&O.push(Qo(E,D,x))),V)break;E=E.return}0<O.length&&(p=new _(p,C,null,n,m),g.push({event:p,listeners:O}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Jf&&(C=n.relatedTarget||n.fromElement)&&(Dr(C)||C[Aa]))break e;if((_||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=f,C=C?Dr(C):null,C!==null&&(V=fl(C),O=C.tag,C!==V||O!==5&&O!==27&&O!==6)&&(C=null)):(_=null,C=f),_!==C)){if(O=py,D="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(O=yy,D="onPointerLeave",S="onPointerEnter",E="pointer"),V=_==null?p:lo(_),x=C==null?p:lo(C),p=new O(D,E+"leave",_,n,m),p.target=V,p.relatedTarget=x,D=null,Dr(m)===f&&(O=new O(S,E+"enter",C,n,m),O.target=x,O.relatedTarget=V,D=O),V=D,_&&C)t:{for(O=_,S=C,E=0,x=O;x;x=vr(x))E++;for(x=0,D=S;D;D=vr(D))x++;for(;0<E-x;)O=vr(O),E--;for(;0<x-E;)S=vr(S),x--;for(;E--;){if(O===S||S!==null&&O===S.alternate)break t;O=vr(O),S=vr(S)}O=null}else O=null;_!==null&&u_(g,p,_,O,!1),C!==null&&V!==null&&u_(g,V,C,O,!0)}}e:{if(p=f?lo(f):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var L=Ty;else if(Ey(p))if(XE)L=P1;else{L=k1;var H=M1}else _=p.nodeName,!_||_.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&Tm(f.elementType)&&(L=Ty):L=j1;if(L&&(L=L(t,f))){$E(g,L,n,m);break e}H&&H(t,p,f),t==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&Wf(p,"number",p.value)}switch(H=f?lo(f):window,t){case"focusin":(Ey(H)||H.contentEditable==="true")&&(Mr=H,td=f,Eo=null);break;case"focusout":Eo=td=Mr=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,xy(g,n,m);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":xy(g,n,m)}var T;if(wm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Vr?KE(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(QE&&n.locale!=="ko"&&(Vr||v!=="onCompositionStart"?v==="onCompositionEnd"&&Vr&&(T=GE()):(Wi=m,Am="value"in Wi?Wi.value:Wi.textContent,Vr=!0)),H=Tc(f,v),0<H.length&&(v=new gy(v,t,null,n,m),g.push({event:v,listeners:H}),T?v.data=T:(T=YE(n),T!==null&&(v.data=T)))),(T=C1?N1(t,n):D1(t,n))&&(v=Tc(f,"onBeforeInput"),0<v.length&&(H=new gy("onBeforeInput","beforeinput",null,n,m),g.push({event:H,listeners:v}),H.data=T)),Tx(g,t,f,n,m)}B0(g,e)})}function Qo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Uo(t,n),s!=null&&i.unshift(Qo(t,s,r)),s=Uo(t,e),s!=null&&i.push(Qo(t,s,r))),t.tag===3)return i;t=t.return}return[]}function vr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function u_(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,s?(f=Uo(n,r),f!=null&&a.unshift(Qo(n,f,u))):s||(f=Uo(n,r),f!=null&&a.push(Qo(n,f,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var wx=/\r\n?/g,xx=/\u0000|\uFFFD/g;function c_(t){return(typeof t=="string"?t:""+t).replace(wx,`
`).replace(xx,"")}function H0(t,e){return e=c_(e),c_(t)===e}function ch(){}function Ce(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||sa(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&sa(t,""+i);break;case"className":fu(t,"class",i);break;case"tabIndex":fu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":fu(t,n,i);break;case"style":HE(t,i,r);break;case"data":if(e!=="object"){fu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Nu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",s.name,s,null),Ce(t,e,"formEncType",s.formEncType,s,null),Ce(t,e,"formMethod",s.formMethod,s,null),Ce(t,e,"formTarget",s.formTarget,s,null)):(Ce(t,e,"encType",s.encType,s,null),Ce(t,e,"method",s.method,s,null),Ce(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Nu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=ch);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Nu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":le("beforetoggle",t),le("toggle",t),Cu(t,"popover",i);break;case"xlinkActuate":si(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":si(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":si(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":si(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":si(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":si(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":si(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":si(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":si(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Cu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=n1.get(n)||n,Cu(t,n,i))}}function Rd(t,e,n,i,s,r){switch(n){case"style":HE(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"children":typeof i=="string"?sa(t,i):(typeof i=="number"||typeof i=="bigint")&&sa(t,""+i);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"onClick":i!=null&&(t.onclick=ch);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[$t]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Cu(t,n,i)}}}function Rt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",t),le("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:Ce(t,e,r,a,n,null)}}s&&Ce(t,e,"srcSet",n.srcSet,n,null),i&&Ce(t,e,"src",n.src,n,null);return;case"input":le("invalid",t);var l=r=a=s=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":s=m;break;case"type":a=m;break;case"checked":u=m;break;case"defaultChecked":f=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,e));break;default:Ce(t,e,i,m,n,null)}}zE(t,r,l,u,f,a,s,!1),nc(t);return;case"select":le("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ce(t,e,s,l,n,null)}e=r,n=a,t.multiple=!!i,e!=null?Fr(t,!!i,e,!1):n!=null&&Fr(t,!!i,n,!0);return;case"textarea":le("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:Ce(t,e,a,l,n,null)}qE(t,i,s,r),nc(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ce(t,e,u,i,n,null)}return;case"dialog":le("beforetoggle",t),le("toggle",t),le("cancel",t),le("close",t);break;case"iframe":case"object":le("load",t);break;case"video":case"audio":for(i=0;i<Go.length;i++)le(Go[i],t);break;case"image":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"embed":case"source":case"link":le("error",t),le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:Ce(t,e,f,i,n,null)}return;default:if(Tm(e)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Rd(t,e,m,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ce(t,e,l,i,n,null))}function Rx(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,f=null,m=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||Ce(t,e,_,null,i,g)}}for(var p in i){var _=i[p];if(g=n[p],i.hasOwnProperty(p)&&(_!=null||g!=null))switch(p){case"type":r=_;break;case"name":s=_;break;case"checked":f=_;break;case"defaultChecked":m=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(P(137,e));break;default:_!==g&&Ce(t,e,p,_,i,g)}}Zf(t,a,l,u,f,m,r,s);return;case"select":_=a=l=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||Ce(t,e,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Ce(t,e,s,r,i,u)}e=l,n=a,i=_,p!=null?Fr(t,!!n,p,!1):!!i!=!!n&&(e!=null?Fr(t,!!n,e,!0):Fr(t,!!n,n?[]:"",!1));return;case"textarea":_=p=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ce(t,e,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":p=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(P(91));break;default:s!==r&&Ce(t,e,a,s,i,r)}BE(t,p,_);return;case"option":for(var C in n)if(p=n[C],n.hasOwnProperty(C)&&p!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:Ce(t,e,C,null,i,p)}for(u in i)if(p=i[u],_=n[u],i.hasOwnProperty(u)&&p!==_&&(p!=null||_!=null))switch(u){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ce(t,e,u,p,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)p=n[O],n.hasOwnProperty(O)&&p!=null&&!i.hasOwnProperty(O)&&Ce(t,e,O,null,i,p);for(f in i)if(p=i[f],_=n[f],i.hasOwnProperty(f)&&p!==_&&(p!=null||_!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(P(137,e));break;default:Ce(t,e,f,p,i,_)}return;default:if(Tm(e)){for(var V in n)p=n[V],n.hasOwnProperty(V)&&p!==void 0&&!i.hasOwnProperty(V)&&Rd(t,e,V,void 0,i,p);for(m in i)p=i[m],_=n[m],!i.hasOwnProperty(m)||p===_||p===void 0&&_===void 0||Rd(t,e,m,p,i,_);return}}for(var S in n)p=n[S],n.hasOwnProperty(S)&&p!=null&&!i.hasOwnProperty(S)&&Ce(t,e,S,null,i,p);for(g in i)p=i[g],_=n[g],!i.hasOwnProperty(g)||p===_||p==null&&_==null||Ce(t,e,g,p,i,_)}var Id=null,Cd=null;function bc(t){return t.nodeType===9?t:t.ownerDocument}function h_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F0(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Nd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cf=null;function Ix(){var t=window.event;return t&&t.type==="popstate"?t===Cf?!1:(Cf=t,!0):(Cf=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(t){return f_.resolve(null).then(t).catch(Dx)}:G0;function Dx(t){setTimeout(function(){throw t})}function xs(t){return t==="head"}function d_(t,e){var n=e,i=0,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&Do(a.documentElement),n&2&&Do(a.body),n&4)for(n=a.head,Do(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[gl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(s===0){t.removeChild(r),Zo(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Zo(e)}function Dd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Dd(n),Em(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Ox(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[gl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=In(t.nextSibling),t===null)break}return null}function Vx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=In(t.nextSibling),t===null))return null;return t}function Od(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Mx(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function In(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Vd=null;function m_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function Q0(t,e,n){switch(e=bc(n),t){case"html":if(t=e.documentElement,!t)throw Error(P(452));return t;case"head":if(t=e.head,!t)throw Error(P(453));return t;case"body":if(t=e.body,!t)throw Error(P(454));return t;default:throw Error(P(451))}}function Do(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Em(t)}var bn=new Map,p_=new Set;function Ac(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xi=Te.d;Te.d={f:kx,r:jx,D:Px,C:Lx,L:Ux,m:zx,X:qx,S:Bx,M:Hx};function kx(){var t=xi.f(),e=oh();return t||e}function jx(t){var e=Sa(t);e!==null&&e.tag===5&&e.type==="form"?UT(e):xi.r(t)}var Ra=typeof document>"u"?null:document;function K0(t,e,n){var i=Ra;if(i&&typeof e=="string"&&e){var s=yn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),p_.has(s)||(p_.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),Rt(e,"link",t),mt(e),i.head.appendChild(e)))}}function Px(t){xi.D(t),K0("dns-prefetch",t,null)}function Lx(t,e){xi.C(t,e),K0("preconnect",t,e)}function Ux(t,e,n){xi.L(t,e,n);var i=Ra;if(i&&t&&e){var s='link[rel="preload"][as="'+yn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+yn(n.imageSizes)+'"]')):s+='[href="'+yn(t)+'"]';var r=s;switch(e){case"style":r=fa(t);break;case"script":r=Ia(t)}bn.has(r)||(t=Le({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),bn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(xl(r))||e==="script"&&i.querySelector(Rl(r))||(e=i.createElement("link"),Rt(e,"link",t),mt(e),i.head.appendChild(e)))}}function zx(t,e){xi.m(t,e);var n=Ra;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+yn(i)+'"][href="'+yn(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ia(t)}if(!bn.has(r)&&(t=Le({rel:"modulepreload",href:t},e),bn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rl(r)))return}i=n.createElement("link"),Rt(i,"link",t),mt(i),n.head.appendChild(i)}}}function Bx(t,e,n){xi.S(t,e,n);var i=Ra;if(i&&t){var s=Hr(i).hoistableStyles,r=fa(t);e=e||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(xl(r)))l.loading=5;else{t=Le({rel:"stylesheet",href:t,"data-precedence":e},n),(n=bn.get(r))&&ip(t,n);var u=a=i.createElement("link");mt(u),Rt(u,"link",t),u._p=new Promise(function(f,m){u.onload=f,u.onerror=m}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Uu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function qx(t,e){xi.X(t,e);var n=Ra;if(n&&t){var i=Hr(n).hoistableScripts,s=Ia(t),r=i.get(s);r||(r=n.querySelector(Rl(s)),r||(t=Le({src:t,async:!0},e),(e=bn.get(s))&&sp(t,e),r=n.createElement("script"),mt(r),Rt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Hx(t,e){xi.M(t,e);var n=Ra;if(n&&t){var i=Hr(n).hoistableScripts,s=Ia(t),r=i.get(s);r||(r=n.querySelector(Rl(s)),r||(t=Le({src:t,async:!0,type:"module"},e),(e=bn.get(s))&&sp(t,e),r=n.createElement("script"),mt(r),Rt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function g_(t,e,n,i){var s=(s=ns.current)?Ac(s):null;if(!s)throw Error(P(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=fa(n.href),n=Hr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=fa(n.href);var r=Hr(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(xl(t)))&&!r._p&&(a.instance=r,a.state.loading=5),bn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},bn.set(t,n),r||Fx(s,t,n,a.state))),e&&i===null)throw Error(P(528,""));return a}if(e&&i!==null)throw Error(P(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ia(n),n=Hr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,t))}}function fa(t){return'href="'+yn(t)+'"'}function xl(t){return'link[rel="stylesheet"]['+t+"]"}function Y0(t){return Le({},t,{"data-precedence":t.precedence,precedence:null})}function Fx(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Rt(e,"link",n),mt(e),t.head.appendChild(e))}function Ia(t){return'[src="'+yn(t)+'"]'}function Rl(t){return"script[async]"+t}function y_(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+yn(n.href)+'"]');if(i)return e.instance=i,mt(i),i;var s=Le({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),mt(i),Rt(i,"style",s),Uu(i,n.precedence,t),e.instance=i;case"stylesheet":s=fa(n.href);var r=t.querySelector(xl(s));if(r)return e.state.loading|=4,e.instance=r,mt(r),r;i=Y0(n),(s=bn.get(s))&&ip(i,s),r=(t.ownerDocument||t).createElement("link"),mt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Rt(r,"link",i),e.state.loading|=4,Uu(r,n.precedence,t),e.instance=r;case"script":return r=Ia(n.src),(s=t.querySelector(Rl(r)))?(e.instance=s,mt(s),s):(i=n,(s=bn.get(r))&&(i=Le({},n),sp(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),mt(s),Rt(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(P(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Uu(i,n.precedence,t));return e.instance}function Uu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function ip(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function sp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var zu=null;function __(t,e,n){if(zu===null){var i=new Map,s=zu=new Map;s.set(n,i)}else s=zu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[gl]||r[Vt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function v_(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Gx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function $0(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Ko=null;function Qx(){}function Kx(t,e,n){if(Ko===null)throw Error(P(475));var i=Ko;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=fa(n.href),r=t.querySelector(xl(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Sc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,mt(r);return}r=t.ownerDocument||t,n=Y0(n),(s=bn.get(s))&&ip(n,s),r=r.createElement("link"),mt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Rt(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Sc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function Yx(){if(Ko===null)throw Error(P(475));var t=Ko;return t.stylesheets&&t.count===0&&Md(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Sc(){if(this.count--,this.count===0){if(this.stylesheets)Md(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wc=null;function Md(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wc=new Map,e.forEach($x,t),wc=null,Sc.call(t))}function $x(t,e){if(!(e.state.loading&4)){var n=wc.get(t);if(n)var i=n.get(null);else{n=new Map,wc.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Sc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Yo={$$typeof:li,Provider:null,Consumer:null,_currentValue:zs,_currentValue2:zs,_threadCount:0};function Xx(t,e,n,i,s,r,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xh(0),this.hiddenUpdates=Xh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function X0(t,e,n,i,s,r,a,l,u,f,m,g){return t=new Xx(t,e,n,a,l,u,f,g),e=1,r===!0&&(e|=24),r=nn(3,null,null,e),t.current=r,r.stateNode=t,e=Om(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Mm(r),t}function Z0(t){return t?(t=Pr,t):Pr}function W0(t,e,n,i,s,r){s=Z0(s),i.context===null?i.context=s:i.pendingContext=s,i=is(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=ss(t,i,e),n!==null&&(un(n,t,e),Ao(n,t,e))}function E_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rp(t,e){E_(t,e),(t=t.alternate)&&E_(t,e)}function J0(t){if(t.tag===13){var e=wa(t,67108864);e!==null&&un(e,t,67108864),rp(t,67108864)}}var xc=!0;function Zx(t,e,n,i){var s=ee.T;ee.T=null;var r=Te.p;try{Te.p=2,ap(t,e,n,i)}finally{Te.p=r,ee.T=s}}function Wx(t,e,n,i){var s=ee.T;ee.T=null;var r=Te.p;try{Te.p=8,ap(t,e,n,i)}finally{Te.p=r,ee.T=s}}function ap(t,e,n,i){if(xc){var s=kd(i);if(s===null)If(t,e,i,Rc,n),T_(t,i);else if(eR(s,t,e,n,i))i.stopPropagation();else if(T_(t,i),e&4&&-1<Jx.indexOf(t)){for(;s!==null;){var r=Sa(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=ks(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-on(a);l.entanglements[1]|=u,a&=~u}Xn(r),!(Re&6)&&(yc=Ln()+500,wl(0))}}break;case 13:l=wa(r,2),l!==null&&un(l,r,2),oh(),rp(r,2)}if(r=kd(i),r===null&&If(t,e,i,Rc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else If(t,e,i,null,n)}}function kd(t){return t=bm(t),op(t)}var Rc=null;function op(t){if(Rc=null,t=Dr(t),t!==null){var e=fl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=SE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Rc=t,null}function eb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lw()){case IE:return 2;case CE:return 8;case tc:case Uw:return 32;case NE:return 268435456;default:return 32}default:return 32}}var jd=!1,os=null,ls=null,us=null,$o=new Map,Xo=new Map,Qi=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":$o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(e.pointerId)}}function ro(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Sa(e),e!==null&&J0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function eR(t,e,n,i,s){switch(e){case"focusin":return os=ro(os,t,e,n,i,s),!0;case"dragenter":return ls=ro(ls,t,e,n,i,s),!0;case"mouseover":return us=ro(us,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return $o.set(r,ro($o.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Xo.set(r,ro(Xo.get(r)||null,t,e,n,i,s)),!0}return!1}function tb(t){var e=Dr(t.target);if(e!==null){var n=fl(e);if(n!==null){if(e=n.tag,e===13){if(e=SE(n),e!==null){t.blockedOn=e,Kw(t.priority,function(){if(n.tag===13){var i=ln();i=_m(i);var s=wa(n,i);s!==null&&un(s,n,i),rp(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kd(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Jf=i,n.target.dispatchEvent(i),Jf=null}else return e=Sa(n),e!==null&&J0(e),t.blockedOn=n,!1;e.shift()}return!0}function b_(t,e,n){Bu(t)&&n.delete(e)}function tR(){jd=!1,os!==null&&Bu(os)&&(os=null),ls!==null&&Bu(ls)&&(ls=null),us!==null&&Bu(us)&&(us=null),$o.forEach(b_),Xo.forEach(b_)}function Eu(t,e){t.blockedOn===e&&(t.blockedOn=null,jd||(jd=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,tR)))}var Tu=null;function A_(t){Tu!==t&&(Tu=t,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,function(){Tu===t&&(Tu=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(op(i||n)===null)continue;break}var r=Sa(n);r!==null&&(t.splice(e,3),e-=3,pd(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Zo(t){function e(u){return Eu(u,t)}os!==null&&Eu(os,t),ls!==null&&Eu(ls,t),us!==null&&Eu(us,t),$o.forEach(e),Xo.forEach(e);for(var n=0;n<Qi.length;n++){var i=Qi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)tb(n),n.blockedOn===null&&Qi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[$t]||null;if(typeof r=="function")a||A_(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[$t]||null)l=a.formAction;else if(op(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),A_(n)}}}function lp(t){this._internalRoot=t}hh.prototype.render=lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));var n=e.current,i=ln();W0(n,i,t,e,null,null)};hh.prototype.unmount=lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;W0(t.current,2,null,t,null,null),oh(),e[Aa]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=kE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qi.length&&e!==0&&e<Qi[n].priority;n++);Qi.splice(n,0,t),n===0&&tb(t)}};var S_=bE.version;if(S_!=="19.1.1")throw Error(P(527,S_,"19.1.1"));Te.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Dw(e),t=t!==null?wE(t):null,t=t===null?null:t.stateNode,t};var nR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{dl=bu.inject(nR),an=bu}catch{}}$c.createRoot=function(t,e){if(!AE(t))throw Error(P(299));var n=!1,i="",s=XT,r=ZT,a=WT,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=X0(t,1,!1,null,null,n,i,s,r,a,l,null),t[Aa]=e.current,np(t),new lp(e)};$c.hydrateRoot=function(t,e,n){if(!AE(t))throw Error(P(299));var i=!1,s="",r=XT,a=ZT,l=WT,u=null,f=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(f=n.formState)),e=X0(t,1,!0,e,n??null,i,s,r,a,l,u,f),e.context=Z0(null),n=e.current,i=ln(),i=_m(i),s=is(i),s.callback=null,ss(n,s,i),n=i,e.current.lanes=n,pl(e,n),Xn(e),t[Aa]=e.current,np(t),new hh(e)};$c.version="19.1.1";function nb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nb)}catch(t){console.error(t)}}nb(),gE.exports=$c;var iR=gE.exports;const sR=rE(iR),rR=()=>{};var w_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,f=u?t[s+2]:0,m=r>>2,g=(r&3)<<4|l>>4;let p=(l&15)<<2|f>>6,_=f&63;u||(_=64,a||(p=64)),i.push(n[m],n[g],n[p],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ib(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||f==null||g==null)throw new oR;const p=r<<2|l>>4;if(i.push(p),f!==64){const _=l<<4&240|f>>2;if(i.push(_),g!==64){const C=f<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lR=function(t){const e=ib(t);return sb.encodeByteArray(e,!0)},Ic=function(t){return lR(t).replace(/\./g,"")},rb=function(t){try{return sb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=()=>uR().__FIREBASE_DEFAULTS__,hR=()=>{if(typeof process>"u"||typeof w_>"u")return;const t=w_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rb(t[1]);return e&&JSON.parse(e)},fh=()=>{try{return rR()||cR()||hR()||fR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ab=t=>{var e,n;return(n=(e=fh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},dR=t=>{const e=ab(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ob=()=>{var t;return(t=fh())==null?void 0:t.config},lb=t=>{var e;return(e=fh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ub(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ic(JSON.stringify(n)),Ic(JSON.stringify(a)),""].join(".")}const Oo={};function gR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Oo))Oo[e]?t.emulator.push(e):t.prod.push(e);return t}function yR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let x_=!1;function cb(t,e){if(typeof window>"u"||typeof document>"u"||!Ca(window.location.host)||Oo[t]===e||Oo[t]||x_)return;Oo[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=gR().prod.length>0;function a(){const p=document.getElementById(i);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function f(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{x_=!0,a()},p}function m(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function g(){const p=yR(i),_=n("text"),C=document.getElementById(_)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),m(V,O);const D=f();u(E,S),x.append(E,C,V,D),document.body.appendChild(x)}r?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function vR(){var e;const t=(e=fh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ER(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AR(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SR(){return!vR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function xR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="FirebaseError";class Ri extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=RR,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?IR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ri(s,l,i)}}function IR(t,e){return t.replace(CR,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const CR=/\{\$([^}]+)}/g;function NR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ws(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(R_(r)&&R_(a)){if(!Ws(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function R_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function co(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function ho(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DR(t,e){const n=new OR(t,e);return n.subscribe.bind(n)}class OR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");VR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Nf),s.error===void 0&&(s.error=Nf),s.complete===void 0&&(s.complete=Nf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class Js{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new mR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jR(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kR(t){return t===Ls?void 0:t}function jR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const LR={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},UR=he.INFO,zR={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},BR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=zR[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class up{constructor(e){this.name=e,this._logLevel=UR,this._logHandler=BR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const qR=(t,e)=>e.some(n=>t instanceof n);let I_,C_;function HR(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FR(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hb=new WeakMap,Pd=new WeakMap,fb=new WeakMap,Df=new WeakMap,cp=new WeakMap;function GR(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(cs(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&hb.set(n,t)}).catch(()=>{}),cp.set(e,t),e}function QR(t){if(Pd.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Pd.set(t,e)}let Ld={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KR(t){Ld=t(Ld)}function YR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Of(this),e,...n);return fb.set(i,e.sort?e.sort():[e]),cs(i)}:FR().includes(t)?function(...e){return t.apply(Of(this),e),cs(hb.get(this))}:function(...e){return cs(t.apply(Of(this),e))}}function $R(t){return typeof t=="function"?YR(t):(t instanceof IDBTransaction&&QR(t),qR(t,HR())?new Proxy(t,Ld):t)}function cs(t){if(t instanceof IDBRequest)return GR(t);if(Df.has(t))return Df.get(t);const e=$R(t);return e!==t&&(Df.set(t,e),cp.set(e,t)),e}const Of=t=>cp.get(t);function XR(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),l=cs(a);return i&&a.addEventListener("upgradeneeded",u=>{i(cs(a.result),u.oldVersion,u.newVersion,cs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const ZR=["get","getKey","getAll","getAllKeys","count"],WR=["put","add","delete","clear"],Vf=new Map;function N_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vf.get(e))return Vf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=WR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||ZR.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Vf.set(e,r),r}KR(t=>({...t,get:(e,n,i)=>N_(e,n)||t.get(e,n,i),has:(e,n)=>!!N_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function e2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",D_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new up("@firebase/app"),t2="@firebase/app-compat",n2="@firebase/analytics-compat",i2="@firebase/analytics",s2="@firebase/app-check-compat",r2="@firebase/app-check",a2="@firebase/auth",o2="@firebase/auth-compat",l2="@firebase/database",u2="@firebase/data-connect",c2="@firebase/database-compat",h2="@firebase/functions",f2="@firebase/functions-compat",d2="@firebase/installations",m2="@firebase/installations-compat",p2="@firebase/messaging",g2="@firebase/messaging-compat",y2="@firebase/performance",_2="@firebase/performance-compat",v2="@firebase/remote-config",E2="@firebase/remote-config-compat",T2="@firebase/storage",b2="@firebase/storage-compat",A2="@firebase/firestore",S2="@firebase/ai",w2="@firebase/firestore-compat",x2="firebase",R2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",I2={[Ud]:"fire-core",[t2]:"fire-core-compat",[i2]:"fire-analytics",[n2]:"fire-analytics-compat",[r2]:"fire-app-check",[s2]:"fire-app-check-compat",[a2]:"fire-auth",[o2]:"fire-auth-compat",[l2]:"fire-rtdb",[u2]:"fire-data-connect",[c2]:"fire-rtdb-compat",[h2]:"fire-fn",[f2]:"fire-fn-compat",[d2]:"fire-iid",[m2]:"fire-iid-compat",[p2]:"fire-fcm",[g2]:"fire-fcm-compat",[y2]:"fire-perf",[_2]:"fire-perf-compat",[v2]:"fire-rc",[E2]:"fire-rc-compat",[T2]:"fire-gcs",[b2]:"fire-gcs-compat",[A2]:"fire-fst",[w2]:"fire-fst-compat",[S2]:"fire-vertex","fire-js":"fire-js",[x2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,C2=new Map,Bd=new Map;function O_(t,e){try{t.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function da(t){const e=t.name;if(Bd.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Bd.set(e,t);for(const n of Cc.values())O_(n,t);for(const n of C2.values())O_(n,t);return!0}function hp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Il("app","Firebase",N2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=R2;function db(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:zd,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw hs.create("bad-app-name",{appName:String(s)});if(n||(n=ob()),!n)throw hs.create("no-options");const r=Cc.get(s);if(r){if(Ws(n,r.options)&&Ws(i,r.config))return r;throw hs.create("duplicate-app",{appName:s})}const a=new PR(s);for(const u of Bd.values())a.addComponent(u);const l=new D2(n,i,a);return Cc.set(s,l),l}function mb(t=zd){const e=Cc.get(t);if(!e&&t===zd&&ob())return db();if(!e)throw hs.create("no-app",{appName:t});return e}function fs(t,e,n){let i=I2[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(a.join(" "));return}da(new Js(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="firebase-heartbeat-database",V2=1,Wo="firebase-heartbeat-store";let Mf=null;function pb(){return Mf||(Mf=XR(O2,V2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wo)}catch(n){console.warn(n)}}}}).catch(t=>{throw hs.create("idb-open",{originalErrorMessage:t.message})})),Mf}async function M2(t){try{const n=(await pb()).transaction(Wo),i=await n.objectStore(Wo).get(gb(t));return await n.done,i}catch(e){if(e instanceof Ri)bi.warn(e.message);else{const n=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(n.message)}}}async function V_(t,e){try{const i=(await pb()).transaction(Wo,"readwrite");await i.objectStore(Wo).put(e,gb(t)),await i.done}catch(n){if(n instanceof Ri)bi.warn(n.message);else{const i=hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(i.message)}}}function gb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=1024,j2=30;class P2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=M_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>j2){const a=z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M_(),{heartbeatsToSend:i,unsentEntries:s}=L2(this._heartbeatsCache.heartbeats),r=Ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return bi.warn(n),""}}}function M_(){return new Date().toISOString().substring(0,10)}function L2(t,e=k2){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),k_(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?xR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function k_(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}function z2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){da(new Js("platform-logger",e=>new JR(e),"PRIVATE")),da(new Js("heartbeat",e=>new P2(e),"PRIVATE")),fs(Ud,D_,t),fs(Ud,D_,"esm2020"),fs("fire-js","")}B2("");var j_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,yb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function b(){}b.prototype=v.prototype,T.D=v.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(A,R,I){for(var w=Array(arguments.length-2),te=2;te<arguments.length;te++)w[te-2]=arguments[te];return v.prototype[R].apply(A,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,b){b||(b=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(R=0;16>R;++R)A[R]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=T.g[0],b=T.g[1],R=T.g[2];var I=T.g[3],w=v+(I^b&(R^I))+A[0]+3614090360&4294967295;v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[1]+3905402710&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[2]+606105819&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[3]+3250441966&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+A[4]+4118548399&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[5]+1200080426&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[6]+2821735955&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[7]+4249261313&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+A[8]+1770035416&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[9]+2336552879&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[10]+4294925233&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[11]+2304563134&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(I^b&(R^I))+A[12]+1804603682&4294967295,v=b+(w<<7&4294967295|w>>>25),w=I+(R^v&(b^R))+A[13]+4254626195&4294967295,I=v+(w<<12&4294967295|w>>>20),w=R+(b^I&(v^b))+A[14]+2792965006&4294967295,R=I+(w<<17&4294967295|w>>>15),w=b+(v^R&(I^v))+A[15]+1236535329&4294967295,b=R+(w<<22&4294967295|w>>>10),w=v+(R^I&(b^R))+A[1]+4129170786&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[6]+3225465664&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[11]+643717713&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[0]+3921069994&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+A[5]+3593408605&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[10]+38016083&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[15]+3634488961&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[4]+3889429448&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+A[9]+568446438&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[14]+3275163606&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[3]+4107603335&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[8]+1163531501&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(R^I&(b^R))+A[13]+2850285829&4294967295,v=b+(w<<5&4294967295|w>>>27),w=I+(b^R&(v^b))+A[2]+4243563512&4294967295,I=v+(w<<9&4294967295|w>>>23),w=R+(v^b&(I^v))+A[7]+1735328473&4294967295,R=I+(w<<14&4294967295|w>>>18),w=b+(I^v&(R^I))+A[12]+2368359562&4294967295,b=R+(w<<20&4294967295|w>>>12),w=v+(b^R^I)+A[5]+4294588738&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[8]+2272392833&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[11]+1839030562&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[14]+4259657740&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+A[1]+2763975236&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[4]+1272893353&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[7]+4139469664&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[10]+3200236656&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+A[13]+681279174&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[0]+3936430074&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[3]+3572445317&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[6]+76029189&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(b^R^I)+A[9]+3654602809&4294967295,v=b+(w<<4&4294967295|w>>>28),w=I+(v^b^R)+A[12]+3873151461&4294967295,I=v+(w<<11&4294967295|w>>>21),w=R+(I^v^b)+A[15]+530742520&4294967295,R=I+(w<<16&4294967295|w>>>16),w=b+(R^I^v)+A[2]+3299628645&4294967295,b=R+(w<<23&4294967295|w>>>9),w=v+(R^(b|~I))+A[0]+4096336452&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[7]+1126891415&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[14]+2878612391&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[5]+4237533241&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+A[12]+1700485571&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[3]+2399980690&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[10]+4293915773&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[1]+2240044497&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+A[8]+1873313359&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[15]+4264355552&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[6]+2734768916&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[13]+1309151649&4294967295,b=R+(w<<21&4294967295|w>>>11),w=v+(R^(b|~I))+A[4]+4149444226&4294967295,v=b+(w<<6&4294967295|w>>>26),w=I+(b^(v|~R))+A[11]+3174756917&4294967295,I=v+(w<<10&4294967295|w>>>22),w=R+(v^(I|~b))+A[2]+718787259&4294967295,R=I+(w<<15&4294967295|w>>>17),w=b+(I^(R|~v))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+I&4294967295}i.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var b=v-this.blockSize,A=this.B,R=this.h,I=0;I<v;){if(R==0)for(;I<=b;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<v;)if(A[R++]=T.charCodeAt(I++),R==this.blockSize){s(this,A),R=0;break}}else for(;I<v;)if(A[R++]=T[I++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=v},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var b=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=b&255,b/=256;for(this.u(T),T=Array(16),v=b=0;4>v;++v)for(var A=0;32>A;A+=8)T[b++]=this.g[v]>>>A&255;return T};function r(T,v){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=v(T)}function a(T,v){this.h=v;for(var b=[],A=!0,R=T.length-1;0<=R;R--){var I=T[R]|0;A&&I==v||(b[R]=I,A=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?r(T,function(v){return new a([v|0],0>v?-1:0)}):new a([T|0],0>T?-1:0)}function f(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return V(f(-T));for(var v=[],b=1,A=0;T>=b;A++)v[A]=T/b|0,b*=4294967296;return new a(v,0)}function m(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return V(m(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=f(Math.pow(v,8)),A=g,R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R),w=parseInt(T.substring(R,R+I),v);8>I?(I=f(Math.pow(v,I)),A=A.j(I).add(f(w))):(A=A.j(b),A=A.add(f(w)))}return A}var g=u(0),p=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-V(this).m();for(var T=0,v=1,b=0;b<this.g.length;b++){var A=this.i(b);T+=(0<=A?A:4294967296+A)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(O(this))return"-"+V(this).toString(T);for(var v=f(Math.pow(T,6)),b=this,A="";;){var R=D(b,v).g;b=S(b,R.j(v));var I=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=R,C(b))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=S(this,T),O(T)?-1:C(T)?0:1};function V(T){for(var v=T.g.length,b=[],A=0;A<v;A++)b[A]=~T.g[A];return new a(b,~T.h).add(p)}t.abs=function(){return O(this)?V(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0,R=0;R<=v;R++){var I=A+(this.i(R)&65535)+(T.i(R)&65535),w=(I>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);A=w>>>16,I&=65535,w&=65535,b[R]=w<<16|I}return new a(b,b[b.length-1]&-2147483648?-1:0)};function S(T,v){return T.add(V(v))}t.j=function(T){if(C(this)||C(T))return g;if(O(this))return O(T)?V(this).j(V(T)):V(V(this).j(T));if(O(T))return V(this.j(V(T)));if(0>this.l(_)&&0>T.l(_))return f(this.m()*T.m());for(var v=this.g.length+T.g.length,b=[],A=0;A<2*v;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<T.g.length;R++){var I=this.i(A)>>>16,w=this.i(A)&65535,te=T.i(R)>>>16,_e=T.i(R)&65535;b[2*A+2*R]+=w*_e,E(b,2*A+2*R),b[2*A+2*R+1]+=I*_e,E(b,2*A+2*R+1),b[2*A+2*R+1]+=w*te,E(b,2*A+2*R+1),b[2*A+2*R+2]+=I*te,E(b,2*A+2*R+2)}for(A=0;A<v;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=v;A<2*v;A++)b[A]=0;return new a(b,0)};function E(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function x(T,v){this.g=T,this.h=v}function D(T,v){if(C(v))throw Error("division by zero");if(C(T))return new x(g,g);if(O(T))return v=D(V(T),v),new x(V(v.g),V(v.h));if(O(v))return v=D(T,V(v)),new x(V(v.g),v.h);if(30<T.g.length){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=v;0>=A.l(T);)b=L(b),A=L(A);var R=H(b,1),I=H(A,1);for(A=H(A,2),b=H(b,2);!C(A);){var w=I.add(A);0>=w.l(T)&&(R=R.add(b),I=w),A=H(A,1),b=H(b,1)}return v=S(T,R.j(v)),new x(R,v)}for(R=g;0<=T.l(v);){for(b=Math.max(1,Math.floor(T.m()/v.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=f(b),w=I.j(v);O(w)||0<w.l(T);)b-=A,I=f(b),w=I.j(v);C(I)&&(I=p),R=R.add(I),T=S(T,w)}return new x(R,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0;A<v;A++)b[A]=this.i(A)&T.i(A);return new a(b,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0;A<v;A++)b[A]=this.i(A)|T.i(A);return new a(b,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),b=[],A=0;A<v;A++)b[A]=this.i(A)^T.i(A);return new a(b,this.h^T.h)};function L(T){for(var v=T.g.length+1,b=[],A=0;A<v;A++)b[A]=T.i(A)<<1|T.i(A-1)>>>31;return new a(b,T.h)}function H(T,v){var b=v>>5;v%=32;for(var A=T.g.length-b,R=[],I=0;I<A;I++)R[I]=0<v?T.i(I+b)>>>v|T.i(I+b+1)<<32-v:T.i(I+b);return new a(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yb=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ds=a}).apply(typeof j_<"u"?j_:typeof self<"u"?self:typeof window<"u"?window:{});var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _b,fo,vb,qu,qd,Eb,Tb,bb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)e:{var d=i;o=o.split(".");for(var y=0;y<o.length-1;y++){var N=o[y];if(!(N in d))break e;d=d[N]}o=o[o.length-1],y=d[o],c=c(y),c!=y&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var d=0,y=!1,N={next:function(){if(!y&&d<o.length){var M=d++;return{value:c(M,o[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function m(o,c,d){return o.call.apply(o.bind,arguments)}function g(o,c,d){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function p(o,c,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,p.apply(null,arguments)}function _(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function C(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(y,N,M){for(var q=Array(arguments.length-2),De=2;De<arguments.length;De++)q[De-2]=arguments[De];return c.prototype[N].apply(y,q)}}function O(o){const c=o.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=o[y];return d}return[]}function V(o,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const N=o.length||0,M=y.length||0;o.length=N+M;for(let q=0;q<M;q++)o[N+q]=y[q]}else o.push(y)}}class S{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function x(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var L=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(o,c,d){for(const y in o)c.call(d,o[y],y,o)}function T(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function v(o){const c={};for(const d in o)c[d]=o[d];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,c){let d,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(d in y)o[d]=y[d];for(let M=0;M<b.length;M++)d=b[M],Object.prototype.hasOwnProperty.call(y,d)&&(o[d]=y[d])}}function R(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function I(o){l.setTimeout(()=>{throw o},0)}function w(){var o=me;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class te{constructor(){this.h=this.g=null}add(c,d){const y=_e.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var _e=new S(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let $,Y=!1,me=new te,Me=()=>{const o=l.Promise.resolve(void 0);$=()=>{o.then(fn)}};var fn=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){I(d)}var c=_e;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Y=!1};function Ke(){this.s=this.s,this.C=this.C}Ke.prototype.s=!1,Ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var tt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function _t(o,c){if(be.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){e:{try{D(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Wn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&_t.aa.h.call(this)}}C(_t,be);var Wn={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Jn=0;function jt(o,c,d,y,N){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=N,this.key=++Jn,this.da=this.fa=!1}function Ci(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ht(o){this.src=o,this.g={},this.h=0}Ht.prototype.add=function(o,c,d,y,N){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var q=An(o,c,y,N);return-1<q?(c=o[q],d||(c.fa=!1)):(c=new jt(c,this.src,M,!!y,N),c.fa=d,o.push(c)),c};function Ni(o,c){var d=c.type;if(d in o.g){var y=o.g[d],N=Array.prototype.indexOf.call(y,c,void 0),M;(M=0<=N)&&Array.prototype.splice.call(y,N,1),M&&(Ci(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function An(o,c,d,y){for(var N=0;N<o.length;++N){var M=o[N];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==y)return N}return-1}var On="closure_lm_"+(1e6*Math.random()|0),Di={};function Oi(o,c,d,y,N){if(Array.isArray(c)){for(var M=0;M<c.length;M++)Oi(o,c[M],d,y,N);return null}return d=ke(d),o&&o[Ze]?o.K(c,d,f(y)?!!y.capture:!1,N):ei(o,c,d,!1,y,N)}function ei(o,c,d,y,N,M){if(!c)throw Error("Invalid event type");var q=f(N)?!!N.capture:!!N,De=He(o);if(De||(o[On]=De=new Ht(o)),d=De.add(c,d,y,q,M),d.proxy)return d;if(y=Pa(),d.proxy=y,y.src=o,y.listener=d,o.addEventListener)tt||(N=q),N===void 0&&(N=!1),o.addEventListener(c.toString(),y,N);else if(o.attachEvent)o.attachEvent(G(c.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Pa(){function o(d){return c.call(o.src,o.listener,d)}const c=ie;return o}function Vi(o,c,d,y,N){if(Array.isArray(c))for(var M=0;M<c.length;M++)Vi(o,c[M],d,y,N);else y=f(y)?!!y.capture:!!y,d=ke(d),o&&o[Ze]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],d=An(M,d,y,N),-1<d&&(Ci(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=He(o))&&(c=o.g[c.toString()],o=-1,c&&(o=An(c,d,y,N)),(d=-1<o?c[o]:null)&&ti(d))}function ti(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ze])Ni(c.i,o);else{var d=o.type,y=o.proxy;c.removeEventListener?c.removeEventListener(d,y,o.capture):c.detachEvent?c.detachEvent(G(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=He(c))?(Ni(d,o),d.h==0&&(d.src=null,c[On]=null)):Ci(o)}}}function G(o){return o in Di?Di[o]:Di[o]="on"+o}function ie(o,c){if(o.da)o=!0;else{c=new _t(c,this);var d=o.listener,y=o.ha||o.src;o.fa&&ti(o),o=d.call(y,c)}return o}function He(o){return o=o[On],o instanceof Ht?o:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(o){return typeof o=="function"?o:(o[vt]||(o[vt]=function(c){return o.handleEvent(c)}),o[vt])}function Ae(){Ke.call(this),this.i=new Ht(this),this.M=this,this.F=null}C(Ae,Ke),Ae.prototype[Ze]=!0,Ae.prototype.removeEventListener=function(o,c,d,y){Vi(this,o,c,d,y)};function Ie(o,c){var d,y=o.F;if(y)for(d=[];y;y=y.F)d.push(y);if(o=o.M,y=c.type||c,typeof c=="string")c=new be(c,o);else if(c instanceof be)c.target=c.target||o;else{var N=c;c=new be(y,o),A(c,N)}if(N=!0,d)for(var M=d.length-1;0<=M;M--){var q=c.g=d[M];N=Sn(q,y,!0,c)&&N}if(q=c.g=o,N=Sn(q,y,!0,c)&&N,N=Sn(q,y,!1,c)&&N,d)for(M=0;M<d.length;M++)q=c.g=d[M],N=Sn(q,y,!1,c)&&N}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],y=0;y<d.length;y++)Ci(d[y]);delete o.g[c],o.h--}}this.F=null},Ae.prototype.K=function(o,c,d,y){return this.i.add(String(o),c,!1,d,y)},Ae.prototype.L=function(o,c,d,y){return this.i.add(String(o),c,!0,d,y)};function Sn(o,c,d,y){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,M=0;M<c.length;++M){var q=c[M];if(q&&!q.da&&q.capture==d){var De=q.listener,Et=q.ha||q.src;q.fa&&Ni(o.i,q),N=De.call(Et,y)!==!1&&N}}return N&&!y.defaultPrevented}function fr(o,c,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Zt(o){o.g=fr(()=>{o.g=null,o.i&&(o.i=!1,Zt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class La extends Ke{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Zt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(o){Ke.call(this),this.h=o,this.g={}}C(Ns,Ke);var Fl=[];function Ua(o){H(o.g,function(c,d){this.g.hasOwnProperty(d)&&ti(c)},o),o.g={}}Ns.prototype.N=function(){Ns.aa.N.call(this),Ua(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=l.JSON.stringify,Gl=l.JSON.parse,kh=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function za(){}za.prototype.h=null;function Ql(o){return o.h||(o.h=o.i())}function Q(){}var Z={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function re(){be.call(this,"d")}C(re,be);function se(){be.call(this,"c")}C(se,be);var Se={},ce=null;function Ft(){return ce=ce||new Ae}Se.La="serverreachability";function Kl(o){be.call(this,Se.La,o)}C(Kl,be);function Ba(o){const c=Ft();Ie(c,new Kl(c))}Se.STAT_EVENT="statevent";function dg(o,c){be.call(this,Se.STAT_EVENT,o),this.stat=c}C(dg,be);function Pt(o){const c=Ft();Ie(c,new dg(c,o))}Se.Ma="timingevent";function mg(o,c){be.call(this,Se.Ma,o),this.size=c}C(mg,be);function qa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ha(){this.g=!0}Ha.prototype.xa=function(){this.g=!1};function US(o,c,d,y,N,M){o.info(function(){if(o.g)if(M)for(var q="",De=M.split("&"),Et=0;Et<De.length;Et++){var ve=De[Et].split("=");if(1<ve.length){var Ct=ve[0];ve=ve[1];var Nt=Ct.split("_");q=2<=Nt.length&&Nt[1]=="type"?q+(Ct+"="+ve+"&"):q+(Ct+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+c+`
`+d+`
`+q})}function zS(o,c,d,y,N,M,q){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+c+`
`+d+`
`+M+" "+q})}function mr(o,c,d,y){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+qS(o,d)+(y?" "+y:"")})}function BS(o,c){o.info(function(){return"TIMEOUT: "+c})}Ha.prototype.info=function(){};function qS(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var y=d[o];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return dr(d)}catch{return c}}var Yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jh;function $l(){}C($l,za),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},jh=new $l;function Mi(o,c,d,y){this.j=o,this.i=c,this.l=d,this.R=y||1,this.U=new Ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}var yg={},Ph={};function Lh(o,c,d){o.L=1,o.v=Jl(ni(c)),o.m=d,o.P=!0,_g(o,null)}function _g(o,c){o.F=Date.now(),Xl(o),o.A=ni(o.v);var d=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),Og(d.i,"t",y),o.C=0,d=o.j.J,o.h=new gg,o.g=Xg(o.j,d?c:null,!o.m),0<o.O&&(o.M=new La(p(o.Y,o,o.g),o.O)),c=o.U,d=o.g,y=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Fl[0]=N.toString()),N=Fl);for(var M=0;M<N.length;M++){var q=Oi(d,N[M],y||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ba(),US(o.i,o.u,o.A,o.l,o.R,o.m)}Mi.prototype.ca=function(o){o=o.target;const c=this.M;c&&ii(o)==3?c.j():this.Y(o)},Mi.prototype.Y=function(o){try{if(o==this.g)e:{const Nt=ii(this.g);var c=this.g.Ba();const yr=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||Nt!=4||c==7||(c==8||0>=yr?Ba(3):Ba(2)),Uh(this);var d=this.g.Z();this.X=d;t:if(vg(this)){var y=Ug(this.g);o="";var N=y.length,M=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),Fa(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(y[c],{stream:!(M&&c==N-1)});y.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=d==200,zS(this.i,this.u,this.A,this.l,this.R,Nt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Et=this.g;if((De=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(De)){var ve=De;break t}}ve=null}if(d=ve)mr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zh(this,d);else{this.o=!1,this.s=3,Pt(12),Ds(this),Fa(this);break e}}if(this.P){d=!0;let wn;for(;!this.J&&this.C<q.length;)if(wn=HS(this,q),wn==Ph){Nt==4&&(this.s=4,Pt(14),d=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==yg){this.s=4,Pt(15),mr(this.i,this.l,q,"[Invalid Chunk]"),d=!1;break}else mr(this.i,this.l,wn,null),zh(this,wn);if(vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||q.length!=0||this.h.h||(this.s=1,Pt(16),d=!1),this.o=this.o&&d,!d)mr(this.i,this.l,q,"[Invalid Chunked Response]"),Ds(this),Fa(this);else if(0<q.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Qh(Ct),Ct.M=!0,Pt(11))}}else mr(this.i,this.l,q,null),zh(this,q);Nt==4&&Ds(this),this.o&&!this.J&&(Nt==4?Qg(this.j,this):(this.o=!1,Xl(this)))}else aw(this.g),d==400&&0<q.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),Ds(this),Fa(this)}}}catch{}finally{}};function vg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function HS(o,c){var d=o.C,y=c.indexOf(`
`,d);return y==-1?Ph:(d=Number(c.substring(d,y)),isNaN(d)?yg:(y+=1,y+d>c.length?Ph:(c=c.slice(y,y+d),o.C=y+d,c)))}Mi.prototype.cancel=function(){this.J=!0,Ds(this)};function Xl(o){o.S=Date.now()+o.I,Eg(o,o.I)}function Eg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=qa(p(o.ba,o),c)}function Uh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Mi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(BS(this.i,this.A),this.L!=2&&(Ba(),Pt(17)),Ds(this),this.s=2,Fa(this)):Eg(this,this.S-o)};function Fa(o){o.j.G==0||o.J||Qg(o.j,o)}function Ds(o){Uh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ua(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function zh(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Bh(d.h,o))){if(!o.K&&Bh(d.h,o)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)ru(d),iu(d);else break e;Gh(d),Pt(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=qa(p(d.Za,d),6e3));if(1>=Ag(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Vs(d,11)}else if((o.K||d.g==o)&&ru(d),!E(c))for(N=d.Da.g.parse(c),c=0;c<N.length;c++){let ve=N[c];if(d.T=ve[0],ve=ve[1],d.G==2)if(ve[0]=="c"){d.K=ve[1],d.ia=ve[2];const Ct=ve[3];Ct!=null&&(d.la=Ct,d.j.info("VER="+d.la));const Nt=ve[4];Nt!=null&&(d.Aa=Nt,d.j.info("SVER="+d.Aa));const yr=ve[5];yr!=null&&typeof yr=="number"&&0<yr&&(y=1.5*yr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const wn=o.g;if(wn){const ou=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ou){var M=y.h;M.g||ou.indexOf("spdy")==-1&&ou.indexOf("quic")==-1&&ou.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(qh(M,M.h),M.h=null))}if(y.D){const Kh=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Kh&&(y.ya=Kh,je(y.I,y.D,Kh))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var q=o;if(y.qa=$g(y,y.J?y.ia:null,y.W),q.K){Sg(y.h,q);var De=q,Et=y.L;Et&&(De.I=Et),De.B&&(Uh(De),Xl(De)),y.g=q}else Fg(y);0<d.i.length&&su(d)}else ve[0]!="stop"&&ve[0]!="close"||Vs(d,7);else d.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Vs(d,7):Fh(d):ve[0]!="noop"&&d.l&&d.l.ta(ve),d.v=0)}}Ba(4)}catch{}}var FS=class{constructor(o,c){this.g=o,this.map=c}};function Tg(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ag(o){return o.h?1:o.g?o.g.size:0}function Bh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function qh(o,c){o.g?o.g.add(c):o.h=c}function Sg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Tg.prototype.cancel=function(){if(this.i=wg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function wg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return O(o.i)}function GS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,y=0;y<d;y++)c.push(o[y]);return c}c=[],d=0;for(y in o)c[d++]=o[y];return c}function QS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const y in o)c[d++]=y;return c}}}function xg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=QS(o),y=GS(o),N=y.length,M=0;M<N;M++)c.call(void 0,y[M],d&&d[M],o)}var Rg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KS(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var y=o[d].indexOf("="),N=null;if(0<=y){var M=o[d].substring(0,y);N=o[d].substring(y+1)}else M=o[d];c(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Os(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Os){this.h=o.h,Zl(this,o.j),this.o=o.o,this.g=o.g,Wl(this,o.s),this.l=o.l;var c=o.i,d=new Ka;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Ig(this,d),this.m=o.m}else o&&(c=String(o).match(Rg))?(this.h=!1,Zl(this,c[1]||"",!0),this.o=Ga(c[2]||""),this.g=Ga(c[3]||"",!0),Wl(this,c[4]),this.l=Ga(c[5]||"",!0),Ig(this,c[6]||"",!0),this.m=Ga(c[7]||"")):(this.h=!1,this.i=new Ka(null,this.h))}Os.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Qa(c,Cg,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Qa(c,Cg,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Qa(d,d.charAt(0)=="/"?XS:$S,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Qa(d,WS)),o.join("")};function ni(o){return new Os(o)}function Zl(o,c,d){o.j=d?Ga(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Wl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Ig(o,c,d){c instanceof Ka?(o.i=c,JS(o.i,o.h)):(d||(c=Qa(c,ZS)),o.i=new Ka(c,o.h))}function je(o,c,d){o.i.set(c,d)}function Jl(o){return je(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ga(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Qa(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,YS),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function YS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Cg=/[#\/\?@]/g,$S=/[#\?:]/g,XS=/[#\?]/g,ZS=/[#\?@]/g,WS=/#/g;function Ka(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ki(o){o.g||(o.g=new Map,o.h=0,o.i&&KS(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Ka.prototype,t.add=function(o,c){ki(this),this.i=null,o=pr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Ng(o,c){ki(o),c=pr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Dg(o,c){return ki(o),c=pr(o,c),o.g.has(c)}t.forEach=function(o,c){ki(this),this.g.forEach(function(d,y){d.forEach(function(N){o.call(c,N,y,this)},this)},this)},t.na=function(){ki(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const N=o[y];for(let M=0;M<N.length;M++)d.push(c[y])}return d},t.V=function(o){ki(this);let c=[];if(typeof o=="string")Dg(this,o)&&(c=c.concat(this.g.get(pr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return ki(this),this.i=null,o=pr(this,o),Dg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Og(o,c,d){Ng(o,c),0<d.length&&(o.i=null,o.g.set(pr(o,c),O(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const M=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var N=M;q[y]!==""&&(N+="="+encodeURIComponent(String(q[y]))),o.push(N)}}return this.i=o.join("&")};function pr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function JS(o,c){c&&!o.j&&(ki(o),o.i=null,o.g.forEach(function(d,y){var N=y.toLowerCase();y!=N&&(Ng(this,y),Og(this,N,d))},o)),o.j=c}function ew(o,c){const d=new Ha;if(l.Image){const y=new Image;y.onload=_(ji,d,"TestLoadImage: loaded",!0,c,y),y.onerror=_(ji,d,"TestLoadImage: error",!1,c,y),y.onabort=_(ji,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=_(ji,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else c(!1)}function tw(o,c){const d=new Ha,y=new AbortController,N=setTimeout(()=>{y.abort(),ji(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:y.signal}).then(M=>{clearTimeout(N),M.ok?ji(d,"TestPingServer: ok",!0,c):ji(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),ji(d,"TestPingServer: error",!1,c)})}function ji(o,c,d,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(d)}catch{}}function nw(){this.g=new kh}function iw(o,c,d){const y=d||"";try{xg(o,function(N,M){let q=N;f(N)&&(q=dr(N)),c.push(y+M+"="+encodeURIComponent(q))})}catch(N){throw c.push(y+"type="+encodeURIComponent("_badmap")),N}}function eu(o){this.l=o.Ub||null,this.j=o.eb||!1}C(eu,za),eu.prototype.g=function(){return new tu(this.l,this.j)},eu.prototype.i=function(o){return function(){return o}}({});function tu(o,c){Ae.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(tu,Ae),t=tu.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,$a(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ya(this):$a(this),this.readyState==3&&Vg(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ya(this))},t.Qa=function(o){this.g&&(this.response=o,Ya(this))},t.ga=function(){this.g&&Ya(this)};function Ya(o){o.readyState=4,o.l=null,o.j=null,o.v=null,$a(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function $a(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Mg(o){let c="";return H(o,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function Hh(o,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=Mg(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):je(o,c,d))}function Ye(o){Ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ye,Ae);var sw=/^https?$/i,rw=["POST","PUT"];t=Ye.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jh.g(),this.v=this.o?Ql(this.o):Ql(jh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){kg(this,M);return}if(o=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)d.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())d.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(rw,c,void 0))||y||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of d)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lg(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){kg(this,M)}};function kg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,jg(o),nu(o)}function jg(o){o.A||(o.A=!0,Ie(o,"complete"),Ie(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ie(this,"complete"),Ie(this,"abort"),nu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nu(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pg(this):this.bb())},t.bb=function(){Pg(this)};function Pg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ii(o)!=4||o.Z()!=2)){if(o.u&&ii(o)==4)fr(o.Ea,0,o);else if(Ie(o,"readystatechange"),ii(o)==4){o.h=!1;try{const q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=q===0){var N=String(o.D).match(Rg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!sw.test(N?N.toLowerCase():"")}d=y}if(d)Ie(o,"complete"),Ie(o,"success");else{o.m=6;try{var M=2<ii(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",jg(o)}}finally{nu(o)}}}}function nu(o,c){if(o.g){Lg(o);const d=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ie(o,"ready");try{d.onreadystatechange=y}catch{}}}function Lg(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function ii(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Gl(c)}};function Ug(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function aw(o){const c={};o=(o.g&&2<=ii(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(E(o[y]))continue;var d=R(o[y]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[N]||[];c[N]=M,M.push(d)}T(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function zg(o){this.Aa=0,this.i=[],this.j=new Ha,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,o),this.cb=Xa("retryDelaySeedMs",1e4,o),this.Wa=Xa("forwardChannelMaxRetries",2,o),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(o&&o.concurrentRequestLimit),this.Da=new nw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zg.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,y){Pt(0),this.W=o,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=$g(this,null,this.W),su(this)};function Fh(o){if(Bg(o),o.G==3){var c=o.U++,d=ni(o.I);if(je(d,"SID",o.K),je(d,"RID",c),je(d,"TYPE","terminate"),Za(o,d),c=new Mi(o,o.j,c),c.L=2,c.v=Jl(ni(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Xg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Xl(c)}Yg(o)}function iu(o){o.g&&(Qh(o),o.g.cancel(),o.g=null)}function Bg(o){iu(o),o.u&&(l.clearTimeout(o.u),o.u=null),ru(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function su(o){if(!bg(o.h)&&!o.s){o.s=!0;var c=o.Ga;$||Me(),Y||($(),Y=!0),me.add(c,o),o.B=0}}function ow(o,c){return Ag(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=qa(p(o.Ga,o,c),Kg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Mi(this,this.j,o);let M=this.o;if(this.S&&(M?(M=v(M),A(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Hg(this,N,c),d=ni(this.I),je(d,"RID",o),je(d,"CVER",22),this.D&&je(d,"X-HTTP-Session-Id",this.D),Za(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(Mg(M)))+"&"+c:this.m&&Hh(d,this.m,M)),qh(this.h,N),this.Ua&&je(d,"TYPE","init"),this.P?(je(d,"$req",c),je(d,"SID","null"),N.T=!0,Lh(N,d,null)):Lh(N,d,c),this.G=2}}else this.G==3&&(o?qg(this,o):this.i.length==0||bg(this.h)||qg(this))};function qg(o,c){var d;c?d=c.l:d=o.U++;const y=ni(o.I);je(y,"SID",o.K),je(y,"RID",d),je(y,"AID",o.T),Za(o,y),o.m&&o.o&&Hh(y,o.m,o.o),d=new Mi(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Hg(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),qh(o.h,d),Lh(d,y,c)}function Za(o,c){o.H&&H(o.H,function(d,y){je(c,y,d)}),o.l&&xg({},function(d,y){je(c,y,d)})}function Hg(o,c,d){d=Math.min(o.i.length,d);var y=o.l?p(o.l.Na,o.l,o):null;e:{var N=o.i;let M=-1;for(;;){const q=["count="+d];M==-1?0<d?(M=N[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let De=!0;for(let Et=0;Et<d;Et++){let ve=N[Et].g;const Ct=N[Et].map;if(ve-=M,0>ve)M=Math.max(0,N[Et].g-100),De=!1;else try{iw(Ct,q,"req"+ve+"_")}catch{y&&y(Ct)}}if(De){y=q.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,y}function Fg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;$||Me(),Y||($(),Y=!0),me.add(c,o),o.v=0}}function Gh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=qa(p(o.Fa,o),Kg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=qa(p(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),iu(this),Gg(this))};function Qh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Gg(o){o.g=new Mi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ni(o.qa);je(c,"RID","rpc"),je(c,"SID",o.K),je(c,"AID",o.T),je(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&je(c,"TO",o.ja),je(c,"TYPE","xmlhttp"),Za(o,c),o.m&&o.o&&Hh(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Jl(ni(c)),d.m=null,d.P=!0,_g(d,o)}t.Za=function(){this.C!=null&&(this.C=null,iu(this),Gh(this),Pt(19))};function ru(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Qg(o,c){var d=null;if(o.g==c){ru(o),Qh(o),o.g=null;var y=2}else if(Bh(o.h,c))d=c.D,Sg(o.h,c),y=1;else return;if(o.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;y=Ft(),Ie(y,new mg(y,d)),su(o)}else Fg(o);else if(N=c.s,N==3||N==0&&0<c.X||!(y==1&&ow(o,c)||y==2&&Gh(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),N){case 1:Vs(o,5);break;case 4:Vs(o,10);break;case 3:Vs(o,6);break;default:Vs(o,2)}}}function Kg(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function Vs(o,c){if(o.j.info("Error code "+c),c==2){var d=p(o.fb,o),y=o.Xa;const N=!y;y=new Os(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Zl(y,"https"),Jl(y),N?ew(y.toString(),d):tw(y.toString(),d)}else Pt(2);o.G=0,o.l&&o.l.sa(c),Yg(o),Bg(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Yg(o){if(o.G=0,o.ka=[],o.l){const c=wg(o.h);(c.length!=0||o.i.length!=0)&&(V(o.ka,c),V(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function $g(o,c,d){var y=d instanceof Os?ni(d):new Os(d);if(y.g!="")c&&(y.g=c+"."+y.g),Wl(y,y.s);else{var N=l.location;y=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var M=new Os(null);y&&Zl(M,y),c&&(M.g=c),N&&Wl(M,N),d&&(M.l=d),y=M}return d=o.D,c=o.ya,d&&c&&je(y,d,c),je(y,"VER",o.la),Za(o,y),y}function Xg(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ye(new eu({eb:d})):new Ye(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}t=Zg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function au(){}au.prototype.g=function(o,c){return new Wt(o,c)};function Wt(o,c){Ae.call(this),this.g=new zg(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new gr(this)}C(Wt,Ae),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Fh(this.g)},Wt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=dr(o),o=d);c.i.push(new FS(c.Ya++,o)),c.G==3&&su(c)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Fh(this.g),delete this.g,Wt.aa.N.call(this)};function Wg(o){re.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(Wg,re);function Jg(){se.call(this),this.status=1}C(Jg,se);function gr(o){this.g=o}C(gr,Zg),gr.prototype.ua=function(){Ie(this.g,"a")},gr.prototype.ta=function(o){Ie(this.g,new Wg(o))},gr.prototype.sa=function(o){Ie(this.g,new Jg)},gr.prototype.ra=function(){Ie(this.g,"b")},au.prototype.createWebChannel=au.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,bb=function(){return new au},Tb=function(){return Ft()},Eb=Se,qd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,qu=Yl,pg.COMPLETE="complete",vb=pg,Q.EventType=Z,Z.OPEN="a",Z.CLOSE="b",Z.ERROR="c",Z.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,fo=Q,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,_b=Ye}).apply(typeof Au<"u"?Au:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore",L_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new up("@firebase/firestore");function Sr(){return er.logLevel}function F(t,...e){if(er.logLevel<=he.DEBUG){const n=e.map(fp);er.debug(`Firestore (${Da}): ${t}`,...n)}}function Ai(t,...e){if(er.logLevel<=he.ERROR){const n=e.map(fp);er.error(`Firestore (${Da}): ${t}`,...n)}}function ma(t,...e){if(er.logLevel<=he.WARN){const n=e.map(fp);er.warn(`Firestore (${Da}): ${t}`,...n)}}function fp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Ab(t,i,n)}function Ab(t,e,n){let i=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ai(i),new Error(i)}function ye(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||Ab(e,s,i)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class H2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class F2{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new zn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ye(typeof i.accessToken=="string",31837,{l:i}),new Sb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class G2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q2{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new G2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Y2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function fe(t,e){return t<e?-1:t>e?1:0}function Hd(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return kf(s)===kf(r)?fe(s,r):kf(s)?1:-1}return fe(t.length,e.length)}const $2=55296,X2=57343;function kf(t){const e=t.charCodeAt(0);return e>=$2&&e<=X2}function pa(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class Mn{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&X(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Mn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Mn.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return fe(e.length,n.length)}static compareSegments(e,n){const i=Mn.isNumericId(e),s=Mn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Mn.extractNumericId(e).compare(Mn.extractNumericId(n)):Hd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class xe extends Mn{construct(e,n,i){return new xe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const Z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends Mn{construct(e,n,i){return new wt(e,n,i)}static isValidIdentifier(e){return Z2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new wt([z_])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(xe.fromString(e))}static fromName(e){return new K(xe.fromString(e).popFirst(5))}static empty(){return new K(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W2(t,e,n,i){if(e===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function B_(t){if(!K.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q_(t){if(K.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(t);throw new z(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function Nl(t,e){if(!xb(t))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-62135596800,F_=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*F_);return new Pe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<H_)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F_}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nl(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:at("string",Pe._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{static fromTimestamp(e){return new W(e)}static min(){return new W(new Pe(0,0))}static max(){return new W(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=-1;function J2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=W.fromTimestamp(i===1e9?new Pe(n+1,0):new Pe(n,i));return new vs(s,K.empty(),e)}function eI(t){return new vs(t.readTime,t.key,Jo)}class vs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vs(W.min(),K.empty(),Jo)}static max(){return new vs(W.max(),K.empty(),Jo)}}function tI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==nI)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(s=>s?j.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new j((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const f=u;n(e[f]).next(m=>{a[f]=m,++l,l===r&&i(a)},m=>s(m))}})}static doWhile(e,n){return new j((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function sI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Va(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-1;function Dl(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function rI(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="";function aI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=G_(e)),e=oI(t.get(n),e);return G_(e)}function oI(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case Rb:n+="";break;default:n+=r}}return n}function G_(t){return t+Rb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ib(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Su(this.root,e,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Su(this.root,e,this.comparator,!0)}}class Su{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??At.RED,this.left=s??At.EMPTY,this.right=r??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new At(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(e){return new K_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class K_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new ct(wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Cb("Invalid base64 string: "+r):r}}(e);return new It(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const lI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=lI.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="server_timestamp",Db="__type__",Ob="__previous_value__",Vb="__local_write_time__";function ph(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Db])==null?void 0:i.stringValue)===Nb}function gh(t){const e=t.mapValue.fields[Ob];return ph(e)?gh(e):e}function el(t){const e=Es(t.mapValue.fields[Vb].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,i,s,r,a,l,u,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}}const Dc="(default)";class tl{constructor(e,n){this.projectId=e,this.database=n||Dc}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="__type__",cI="__max__",wu={mapValue:{}},kb="__vector__",Oc="value";function bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ph(t)?4:fI(t)?9007199254740991:hI(t)?10:11:X(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=bs(t);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return el(t).isEqual(el(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Es(s.timestampValue),l=Es(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Ts(s.bytesValue).isEqual(Ts(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return et(s.geoPointValue.latitude)===et(r.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return et(s.integerValue)===et(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=et(s.doubleValue),l=et(r.doubleValue);return a===l?Nc(a)===Nc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return pa(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(Q_(a)!==Q_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qn(a[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function nl(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function ga(t,e){if(t===e)return 0;const n=bs(t),i=bs(e);if(n!==i)return fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=et(r.integerValue||r.doubleValue),u=et(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Y_(t.timestampValue,e.timestampValue);case 4:return Y_(el(t),el(e));case 5:return Hd(t.stringValue,e.stringValue);case 6:return function(r,a){const l=Ts(r),u=Ts(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const m=fe(l[f],u[f]);if(m!==0)return m}return fe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=fe(et(r.latitude),et(a.latitude));return l!==0?l:fe(et(r.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $_(t.arrayValue,e.arrayValue);case 10:return function(r,a){var p,_,C,O;const l=r.fields||{},u=a.fields||{},f=(p=l[Oc])==null?void 0:p.arrayValue,m=(_=u[Oc])==null?void 0:_.arrayValue,g=fe(((C=f==null?void 0:f.values)==null?void 0:C.length)||0,((O=m==null?void 0:m.values)==null?void 0:O.length)||0);return g!==0?g:$_(f,m)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===wu.mapValue&&a===wu.mapValue)return 0;if(r===wu.mapValue)return 1;if(a===wu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const p=Hd(u[g],m[g]);if(p!==0)return p;const _=ga(l[u[g]],f[m[g]]);if(_!==0)return _}return fe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function Y_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Es(t),i=Es(e),s=fe(n.seconds,i.seconds);return s!==0?s:fe(n.nanos,i.nanos)}function $_(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=ga(n[s],i[s]);if(r)return r}return fe(n.length,i.length)}function ya(t){return Fd(t)}function Fd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Es(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Fd(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Fd(n.fields[a])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Hu(t){switch(bs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(t);return e?16+Hu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Hu(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Rs(i.fields,(r,a)=>{s+=r.length+Hu(a)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function Vc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gd(t){return!!t&&"integerValue"in t}function pp(t){return!!t&&"arrayValue"in t}function X_(t){return!!t&&"nullValue"in t}function Z_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function hI(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Mb])==null?void 0:i.stringValue)===kb}function Vo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Vo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vo(t.arrayValue.values[n]);return e}return{...t}}function fI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(n)}setAll(e){let n=wt.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=Vo(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Fu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Rs(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ut(Vo(this.value))}}function jb(t){const e=[];return Rs(t.fields,(n,i)=>{const s=new wt([n]);if(Fu(i)){const r=jb(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,i,s,r,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new pt(e,0,W.min(),W.min(),W.min(),Ut.empty(),0)}static newFoundDocument(e,n,i,s){return new pt(e,1,n,W.min(),i,s,0)}static newNoDocument(e,n){return new pt(e,2,n,W.min(),W.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,W.min(),W.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.position=e,this.inclusive=n}}function W_(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=ga(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function J_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n="asc"){this.field=e,this.dir=n}}function dI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{}class rt extends Pb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new pI(e,n,i):n==="array-contains"?new _I(e,i):n==="in"?new vI(e,i):n==="not-in"?new EI(e,i):n==="array-contains-any"?new TI(e,i):new rt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new gI(e,i):new yI(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ga(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends Pb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cn(e,n)}matches(e){return Lb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lb(t){return t.op==="and"}function Ub(t){return mI(t)&&Lb(t)}function mI(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Qd(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(Ub(t))return t.filters.map(e=>Qd(e)).join(",");{const e=t.filters.map(n=>Qd(n)).join(",");return`${t.op}(${e})`}}function zb(t,e){return t instanceof rt?function(i,s){return s instanceof rt&&i.op===s.op&&i.field.isEqual(s.field)&&Qn(i.value,s.value)}(t,e):t instanceof Cn?function(i,s){return s instanceof Cn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&zb(a,s.filters[l]),!0):!1}(t,e):void X(19439)}function Bb(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${ya(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(Bb).join(" ,")+"}"}(t):"Filter"}class pI extends rt{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class gI extends rt{constructor(e,n){super(e,"in",n),this.keys=qb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yI extends rt{constructor(e,n){super(e,"not-in",n),this.keys=qb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qb(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class _I extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pp(n)&&nl(n.arrayValue,this.value)}}class vI extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nl(this.value.arrayValue,n)}}class EI extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nl(this.value.arrayValue,n)}}class TI extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>nl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function ev(t,e=null,n=[],i=[],s=null,r=null,a=null){return new bI(t,e,n,i,s,r,a)}function gp(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Qd(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Dl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ya(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ya(i)).join(",")),e.Te=n}return e.Te}function yp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J_(t.startAt,e.startAt)&&J_(t.endAt,e.endAt)}function Kd(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AI(t,e,n,i,s,r,a,l){return new lr(t,e,n,i,s,r,a,l)}function yh(t){return new lr(t)}function tv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _p(t){return t.collectionGroup!==null}function Zr(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ct(wt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new il(r,i))}),n.has(wt.keyField().canonicalString())||e.Ie.push(new il(wt.keyField(),i))}return e.Ie}function Bn(t){const e=ne(t);return e.Ee||(e.Ee=SI(e,Zr(t))),e.Ee}function SI(t,e){if(t.limitType==="F")return ev(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new il(s.field,r)});const n=t.endAt?new _a(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new _a(t.startAt.position,t.startAt.inclusive):null;return ev(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Yd(t,e){const n=t.filters.concat([e]);return new lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mc(t,e,n){return new lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _h(t,e){return yp(Bn(t),Bn(e))&&t.limitType===e.limitType}function Hb(t){return`${gp(Bn(t))}|lt:${t.limitType}`}function wr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Bb(s)).join(", ")}]`),Dl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ya(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ya(s)).join(",")),`Target(${i})`}(Bn(t))}; limitType=${t.limitType})`}function vh(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):K.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of Zr(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const f=W_(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,Zr(i),s)||i.endAt&&!function(a,l,u){const f=W_(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,Zr(i),s))}(t,e)}function wI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fb(t){return(e,n)=>{let i=!1;for(const s of Zr(t)){const r=xI(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function xI(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),f=l.data.field(r);return u!==null&&f!==null?ga(u,f):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return Ib(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Qe(K.comparator);function Si(){return RI}const Gb=new Qe(K.comparator);function mo(...t){let e=Gb;for(const n of t)e=e.insert(n.key,n);return e}function Qb(t){let e=Gb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Us(){return Mo()}function Kb(){return Mo()}function Mo(){return new ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const II=new Qe(K.comparator),CI=new ct(K.comparator);function de(...t){let e=CI;for(const n of t)e=e.add(n);return e}const NI=new ct(fe);function DI(){return NI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function Yb(t){return{integerValue:""+t}}function $b(t,e){return rI(e)?Yb(e):vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function OI(t,e,n){return t instanceof sl?function(s,r){const a={fields:{[Db]:{stringValue:Nb},[Vb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&ph(r)&&(r=gh(r)),r&&(a.fields[Ob]=r),{mapValue:a}}(n,e):t instanceof rl?Zb(t,e):t instanceof al?Wb(t,e):function(s,r){const a=Xb(s,r),l=nv(a)+nv(s.Ae);return Gd(a)&&Gd(s.Ae)?Yb(l):vp(s.serializer,l)}(t,e)}function VI(t,e,n){return t instanceof rl?Zb(t,e):t instanceof al?Wb(t,e):n}function Xb(t,e){return t instanceof ol?function(i){return Gd(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class sl extends Eh{}class rl extends Eh{constructor(e){super(),this.elements=e}}function Zb(t,e){const n=Jb(e);for(const i of t.elements)n.some(s=>Qn(s,i))||n.push(i);return{arrayValue:{values:n}}}class al extends Eh{constructor(e){super(),this.elements=e}}function Wb(t,e){let n=Jb(e);for(const i of t.elements)n=n.filter(s=>!Qn(s,i));return{arrayValue:{values:n}}}class ol extends Eh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nv(t){return et(t.integerValue||t.doubleValue)}function Jb(t){return pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n){this.field=e,this.transform=n}}function MI(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof rl&&s instanceof rl||i instanceof al&&s instanceof al?pa(i.elements,s.elements,Qn):i instanceof ol&&s instanceof ol?Qn(i.Ae,s.Ae):i instanceof sl&&s instanceof sl}(t.transform,e.transform)}class kI{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Th{}function tA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bh(t.key,xt.none()):new Ol(t.key,t.data,xt.none());{const n=t.data,i=Ut.empty();let s=new ct(wt.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Is(t.key,i,new rn(s.toArray()),xt.none())}}function jI(t,e,n){t instanceof Ol?function(s,r,a){const l=s.value.clone(),u=sv(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Is?function(s,r,a){if(!Gu(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=sv(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(nA(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n,i){return t instanceof Ol?function(r,a,l,u){if(!Gu(r.precondition,a))return l;const f=r.value.clone(),m=rv(r.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Is?function(r,a,l,u){if(!Gu(r.precondition,a))return l;const f=rv(r.fieldTransforms,u,a),m=a.data;return m.setAll(nA(r)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(r,a,l){return Gu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function PI(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=Xb(i.transform,s||null);r!=null&&(n===null&&(n=Ut.empty()),n.set(i.field,r))}return n||null}function iv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&pa(i,s,(r,a)=>MI(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ol extends Th{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends Th{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function nA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function sv(t,e,n){const i=new Map;ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,VI(a,l,n[s]))}return i}function rv(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,OI(r,a,e))}return i}class bh extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iA extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&jI(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ko(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ko(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Kb();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=tA(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(n,i)=>iv(n,i))&&pa(this.baseMutations,e.baseMutations,(n,i)=>iv(n,i))}}class Ep{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return II}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Ep(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,pe;function sA(t){switch(t){case k.OK:return X(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function rA(t){if(t===void 0)return Ai("GRPC error has no .code"),k.UNKNOWN;switch(t){case nt.OK:return k.OK;case nt.CANCELLED:return k.CANCELLED;case nt.UNKNOWN:return k.UNKNOWN;case nt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case nt.INTERNAL:return k.INTERNAL;case nt.UNAVAILABLE:return k.UNAVAILABLE;case nt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case nt.NOT_FOUND:return k.NOT_FOUND;case nt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case nt.ABORTED:return k.ABORTED;case nt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case nt.DATA_LOSS:return k.DATA_LOSS;default:return X(39323,{code:t})}}(pe=nt||(nt={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new ds([4294967295,4294967295],0);function av(t){const e=BI().encode(t),n=new yb;return n.update(e),new Uint8Array(n.digest())}function ov(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new ds([n,i],0),new ds([s,r],0)]}class Tp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new po(`Invalid padding: ${n}`);if(i<0)throw new po(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new po(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new po(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ds.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(ds.fromNumber(i)));return s.compare(qI)===1&&(s=new ds([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=av(e),[i,s]=ov(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Tp(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=av(e),[i,s]=ov(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Vl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ah(W.min(),s,new Qe(fe),Si(),de())}}class Vl{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Vl(i,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class aA{constructor(e,n){this.targetId=e,this.Ce=n}}class oA{constructor(e,n,i=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class lv{constructor(){this.ve=0,this.Fe=uv(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),i=de();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:X(38017,{changeType:r})}}),new Vl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=uv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=xu(),this.He=xu(),this.Ye=new Qe(fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Kd(r))if(i===0){const a=new K(r.path);this.et(n,a,pt.newNoDocument(a,W.min()))}else ye(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=Ts(i).toUint8Array()}catch(u){if(u instanceof Cb)return ma("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tp(a,s,r)}catch(u){return ma(u instanceof po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Kd(l.target)){const u=new K(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,pt.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.qe())}});let i=de();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.je.forEach((r,a)=>a.setReadTime(e));const s=new Ah(e,n,this.Ye,this.je,i);return this.je=Si(),this.Je=xu(),this.He=xu(),this.Ye=new Qe(fe),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ct(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ct(fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xu(){return new Qe(K.comparator)}function uv(){return new Qe(K.comparator)}const FI={asc:"ASCENDING",desc:"DESCENDING"},GI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QI={and:"AND",or:"OR"};class KI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $d(t,e){return t.useProto3Json||Dl(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YI(t,e){return kc(t,e.toTimestamp())}function cn(t){return ye(!!t,49232),W.fromTimestamp(function(n){const i=Es(n);return new Pe(i.seconds,i.nanos)}(t))}function bp(t,e){return Xd(t,e).canonicalString()}function Xd(t,e){const n=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uA(t){const e=xe.fromString(t);return ye(pA(e),10190,{key:e.toString()}),e}function jc(t,e){return bp(t.databaseId,e.path)}function jo(t,e){const n=uA(e);if(n.get(1)!==t.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(hA(n))}function cA(t,e){return bp(t.databaseId,e)}function $I(t){const e=uA(t);return e.length===4?xe.emptyPath():hA(e)}function Zd(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hA(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cv(t,e,n){return{name:jc(t,e),fields:n.value.mapValue.fields}}function XI(t,e){return"found"in e?function(i,s){ye(!!s.found,43571),s.found.name,s.found.updateTime;const r=jo(i,s.found.name),a=cn(s.found.updateTime),l=s.found.createTime?cn(s.found.createTime):W.min(),u=new Ut({mapValue:{fields:s.found.fields}});return pt.newFoundDocument(r,a,l,u)}(t,e):"missing"in e?function(i,s){ye(!!s.missing,3894),ye(!!s.readTime,22933);const r=jo(i,s.missing),a=cn(s.readTime);return pt.newNoDocument(r,a)}(t,e):X(7234,{result:e})}function ZI(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(f,m){return f.useProto3Json?(ye(m===void 0||typeof m=="string",58123),It.fromBase64String(m||"")):(ye(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),It.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){const m=f.code===void 0?k.UNKNOWN:rA(f.code);return new z(m,f.message||"")}(a);n=new oA(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=jo(t,i.document.name),r=cn(i.document.updateTime),a=i.document.createTime?cn(i.document.createTime):W.min(),l=new Ut({mapValue:{fields:i.document.fields}}),u=pt.newFoundDocument(s,r,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Qu(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=jo(t,i.document),r=i.readTime?cn(i.readTime):W.min(),a=pt.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Qu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=jo(t,i.document),r=i.removedTargetIds||[];n=new Qu([],r,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new zI(s,r),l=i.targetId;n=new aA(l,a)}}return n}function fA(t,e){let n;if(e instanceof Ol)n={update:cv(t,e.key,e.value)};else if(e instanceof bh)n={delete:jc(t,e.key)};else if(e instanceof Is)n={update:cv(t,e.key,e.data),updateMask:aC(e.fieldMask)};else{if(!(e instanceof iA))return X(16599,{Vt:e.type});n={verify:jc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof sl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof al)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ol)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:YI(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:X(27497)}(t,e.precondition)),n}function WI(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,r){let a=s.updateTime?cn(s.updateTime):cn(r);return a.isEqual(W.min())&&(a=cn(r)),new kI(a,s.transformResults||[])}(n,e))):[]}function JI(t,e){return{documents:[cA(t,e.path)]}}function eC(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=cA(t,s);const r=function(f){if(f.length!==0)return mA(Cn.create(f,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(f){if(f.length!==0)return f.map(m=>function(p){return{field:xr(p.field),direction:iC(p.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=$d(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:s}}function tC(t){let e=$I(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ye(i===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let r=[];n.where&&(r=function(g){const p=dA(g);return p instanceof Cn&&Ub(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(C){return new il(Rr(C.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,Dl(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,_=g.values||[];return new _a(_,p)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const p=!g.before,_=g.values||[];return new _a(_,p)}(n.endAt)),AI(e,s,a,r,l,"F",u,f)}function nC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Rr(n.unaryFilter.field);return rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Rr(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rr(n.unaryFilter.field);return rt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Rr(n.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Rr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(i=>dA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function iC(t){return FI[t]}function sC(t){return GI[t]}function rC(t){return QI[t]}function xr(t){return{fieldPath:t.canonicalString()}}function Rr(t){return wt.fromServerFormat(t.fieldPath)}function mA(t){return t instanceof rt?function(n){if(n.op==="=="){if(Z_(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z_(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xr(n.field),op:sC(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const i=n.getFilters().map(s=>mA(s));return i.length===1?i[0]:{compositeFilter:{op:rC(n.op),filters:i}}}(t):X(54877,{filter:t})}function aC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,i,s,r=W.min(),a=W.min(),l=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.yt=e}}function lC(t){const e=tC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.Cn=new cC}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(vs.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class cC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ct(xe.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ct(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gA=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(gA,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new va(0)}static cr(){return new va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="LruGarbageCollector",hC=1048576;function dv([t,e],[n,i]){const s=fe(t,n);return s===0?fe(e,i):s}class fC{constructor(e){this.Ir=e,this.buffer=new ct(dv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();dv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F(fv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Va(n)?F(fv,"Ignoring IndexedDB error during garbage collection: ",n):await Oa(n)}await this.Vr(3e5)})}}class mC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return j.resolve(mh.ce);const i=new fC(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(hv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,a,l,u,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),Sr()<=he.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function pC(t,e){return new mC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.changes=new ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&ko(i.mutation,s,rn.empty(),Pe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){const s=Us();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=mo();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,s){let r=Si();const a=Mo(),l=function(){return Mo()}();return n.forEach((u,f)=>{const m=i.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Is)?r=r.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),ko(m.mutation,f,m.mutation.getFieldMask(),Pe.now())):a.set(f.key,rn.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>l.set(f,new yC(m,a.get(f)??null))),l))}recalculateAndSaveOverlays(e,n){const i=Mo();let s=new Qe((a,l)=>a-l),r=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let m=i.get(u)||rn.empty();m=l.applyToLocalView(f,m),i.set(u,m);const g=(s.get(l.batchId)||de()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,m=u.value,g=Kb();m.forEach(p=>{if(!r.has(p)){const _=tA(n.get(p),i.get(p));_!==null&&g.set(p,_),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return j.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_p(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):j.resolve(Us());let l=Jo,u=r;return a.next(f=>j.forEach(f,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(m)?j.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(e,f,r)).next(()=>this.computeViews(e,u,f,de())).next(m=>({batchId:l,changes:Qb(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let s=mo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=mo();return this.indexManager.getCollectionParents(e,r).next(l=>j.forEach(l,u=>{const f=function(g,p){return new lr(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next(m=>{m.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((u,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,pt.newInvalidDocument(m)))});let l=mo();return a.forEach((u,f)=>{const m=r.get(u);m!==void 0&&ko(m.mutation,f,rn.empty(),Pe.now()),vh(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:cn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:lC(s.bundledQuery),readTime:cn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.overlays=new Qe(K.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Us();return j.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.St(e,n,r)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const s=Us(),r=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Qe((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=r.get(f.largestBatchId);m===null&&(m=Us(),r=r.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const l=Us(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=s)););return j.resolve(l)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new UI(n,i));let r=this.qr.get(n);r===void 0&&(r=de(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this.Qr=new ct(ft.$r),this.Ur=new ct(ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new ft(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new ft(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new K(new xe([])),i=new ft(n,e),s=new ft(n,e+1),r=[];return this.Ur.forEachInRange([i,s],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new xe([])),i=new ft(n,e),s=new ft(n,e+1);let r=de();return this.Ur.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new ft(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ct(ft.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new LI(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new ft(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return j.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?mp:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],a=>{const l=this.Xr(a.Yr);r.push(l)}),j.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ct(fe);return n.forEach(s=>{const r=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{i=i.add(l.Yr)})}),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;K.isDocumentKey(r)||(r=r.child(""));const a=new ft(new K(r),0);let l=new ct(fe);return this.Zr.forEachWhile(u=>{const f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)},a),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(n.mutations,s=>{const r=new ft(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new ft(n,0),s=this.Zr.firstAfterOrEqual(i);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.ri=e,this.docs=function(){return new Qe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let i=Si();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():pt.newInvalidDocument(s))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Si();const a=n.path,l=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||tI(eI(m),i)<=0||(s.has(m.key)||vh(n,m))&&(r=r.insert(m.key,m.mutableCopy()))}return j.resolve(r)}getAllFromCollectionGroup(e,n,i,s){X(9500)}ii(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new SC(this)}getSize(e){return j.resolve(this.size)}}class SC extends gC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.persistence=e,this.si=new ur(n=>gp(n),yp),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new Ap,this.targetCount=0,this.ai=va.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new va(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),j.waitFor(r).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),j.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.ui={},this.overlays={},this.ci=new mh(0),this.li=!1,this.li=!0,this.hi=new TC,this.referenceDelegate=e(this),this.Pi=new wC(this),this.indexManager=new uC,this.remoteDocumentCache=function(s){return new AC(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new oC(n),this.Ii=new vC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new bC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const s=new xC(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(e,n){return j.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class xC extends iI{constructor(e){super(),this.currentSequenceNumber=e}}class Sp{constructor(e){this.persistence=e,this.Ri=new Ap,this.Vi=null}static mi(e){return new Sp(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,i=>{const s=K.fromPath(i);return this.gi(e,s).next(r=>{r||n.removeEntry(s,W.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pc{constructor(e,n){this.persistence=e,this.pi=new ur(i=>aI(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=pC(this,n)}static mi(e,n){return new Pc(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(i,s)=>this.br(e,i,s).next(r=>r?j.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(i++,r.removeEntry(a,W.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hu(e.data.value)),n}br(e,n,i){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=de(),s=de();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new wp(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return SR()?8:sI(kt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new RC;return this.Ss(e,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>r.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(Sr()<=he.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",wr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Sr()<=he.DEBUG&&F("QueryEngine","Query:",wr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Sr()<=he.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",wr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):j.resolve())}ys(e,n){if(tv(n))return j.resolve(null);let i=Bn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mc(n,null,"F"),i=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=de(...r);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(e,Mc(n,null,"F")):this.vs(e,f,n,u)}))})))}ws(e,n,i,s){return tv(n)||s.isEqual(W.min())?j.resolve(null):this.ps.getDocuments(e,i).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?j.resolve(null):(Sr()<=he.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wr(n)),this.vs(e,a,n,J2(s,Jo)).next(l=>l))})}Ds(e,n){let i=new ct(Fb(e));return n.forEach((s,r)=>{vh(e,r)&&(i=i.add(r))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return Sr()<=he.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",wr(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="LocalStore",CC=3e8;class NC{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Qe(fe),this.xs=new ur(r=>gp(r),yp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _C(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function DC(t,e,n,i){return new NC(t,e,n,i)}async function _A(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=de();for(const f of s){a.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}for(const f of r){l.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:l}))})})}function OC(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){const g=f.batch,p=g.keys();let _=j.resolve();return p.forEach(C=>{_=_.next(()=>m.getEntry(u,C)).next(O=>{const V=f.docVersions.get(C);ye(V!==null,48541),O.version.compareTo(V)<0&&(g.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),m.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=de();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function vA(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function VC(t,e){const n=ne(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,g)=>{const p=s.get(g);if(!p)return;l.push(n.Pi.removeMatchingKeys(r,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(r,m.addedDocuments,g)));let _=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(It.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,i)),s=s.insert(g,_),function(O,V,S){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=CC?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,_,m)&&l.push(n.Pi.updateTargetData(r,_))});let u=Si(),f=de();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,m))}),l.push(MC(r,a,e.documentUpdates).next(m=>{u=m.ks,f=m.qs})),!i.isEqual(W.min())){const m=n.Pi.getLastRemoteSnapshotVersion(r).next(g=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(m)}return j.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,f)).next(()=>u)}).then(r=>(n.Ms=s,r))}function MC(t,e,n){let i=de(),s=de();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=Si();return n.forEach((l,u)=>{const f=r.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):F(xp,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{ks:a,qs:s}})}function kC(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=mp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function jC(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(r=>r?(s=r,j.resolve(s)):n.Pi.allocateTargetId(i).next(a=>(s=new ts(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Wd(t,e,n){const i=ne(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Va(a))throw a;F(xp,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function mv(t,e,n){const i=ne(t);let s=W.min(),r=de();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){const g=ne(u),p=g.xs.get(m);return p!==void 0?j.resolve(g.Ms.get(p)):g.Pi.getTargetData(f,m)}(i,a,Bn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?s:W.min(),n?r:de())).next(l=>(PC(i,wI(e),l),{documents:l,Qs:r})))}function PC(t,e,n){let i=t.Os.get(e)||W.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Os.set(e,i)}class pv{constructor(){this.activeTargetIds=DI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LC{constructor(){this.Mo=new pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="ConnectivityMonitor";class yv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(gv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){F(gv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function Jd(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="RestConnection",zC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Dc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const a=Jd(),l=this.zo(e,n.toUriEncodedString());F(jf,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:f}=new URL(l),m=Ca(f);return this.Jo(e,l,u,i,m).then(g=>(F(jf,`Received RPC '${e}' ${a}: `,g),g),g=>{throw ma(jf,`RPC '${e}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Ho(e,n,i,s,r,a){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}zo(e,n){const i=zC[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class HC extends BC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const a=Jd();return new Promise((l,u)=>{const f=new _b;f.setWithCredentials(!0),f.listenOnce(vb.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case qu.NO_ERROR:const g=f.getResponseJson();F(Dt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case qu.TIMEOUT:F(Dt,`RPC '${e}' ${a} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const p=f.getStatus();if(F(Dt,`RPC '${e}' ${a} failed with status:`,p,"response text:",f.getResponseText()),p>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const O=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(C.status);u(new z(O,C.message))}else u(new z(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{F(Dt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);F(Dt,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",m,i,15)})}T_(e,n,i){const s=Jd(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bb(),l=Tb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=r.join("");F(Dt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const g=a.createWebChannel(m,u);this.I_(g);let p=!1,_=!1;const C=new qC({Yo:V=>{_?F(Dt,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(p||(F(Dt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),F(Dt,`RPC '${e}' stream ${s} sending:`,V),g.send(V))},Zo:()=>g.close()}),O=(V,S,E)=>{V.listen(S,x=>{try{E(x)}catch(D){setTimeout(()=>{throw D},0)}})};return O(g,fo.EventType.OPEN,()=>{_||(F(Dt,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),O(g,fo.EventType.CLOSE,()=>{_||(_=!0,F(Dt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(g))}),O(g,fo.EventType.ERROR,V=>{_||(_=!0,ma(Dt,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),C.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),O(g,fo.EventType.MESSAGE,V=>{var S;if(!_){const E=V.data[0];ye(!!E,16349);const x=E,D=(x==null?void 0:x.error)||((S=x[0])==null?void 0:S.error);if(D){F(Dt,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let H=function(b){const A=nt[b];if(A!==void 0)return rA(A)}(L),T=D.message;H===void 0&&(H=k.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,C.a_(new z(H,T)),g.close()}else F(Dt,`RPC '${e}' stream ${s} received:`,E),C.u_(E)}}),O(l,Eb.STAT_EVENT,V=>{V.stat===qd.PROXY?F(Dt,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===qd.NOPROXY&&F(Dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new KI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="PersistentStream";class EA{constructor(e,n,i,s,r,a,l,u){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(_v,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(F(_v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FC extends EA{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZI(this.serializer,e),i=function(r){if(!("targetChange"in r))return W.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?W.min():a.readTime?cn(a.readTime):W.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Zd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Kd(u)?{documents:JI(r,u)}:{query:eC(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=lA(r,a.resumeToken);const f=$d(r,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(W.min())>0){l.readTime=kc(r,a.snapshotVersion.toTimestamp());const f=$d(r,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const i=nC(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Zd(this.serializer),n.removeTarget=e,this.q_(n)}}class GC extends EA{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WI(e.writeResults,e.commitTime),i=cn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Zd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>fA(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{}class KC extends QC{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(e,Xd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(k.UNKNOWN,r.toString())})}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Xd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class YC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="RemoteStore";class $C{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{cr(this)&&(F(tr,"Restarting streams for network reachability change."),await async function(u){const f=ne(u);f.Ea.add(4),await Ml(f),f.Ra.set("Unknown"),f.Ea.delete(4),await wh(f)}(this))})}),this.Ra=new YC(i,s)}}async function wh(t){if(cr(t))for(const e of t.da)await e(!0)}async function Ml(t){for(const e of t.da)await e(!1)}function TA(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dp(n)?Np(n):Ma(n).O_()&&Cp(n,e))}function Ip(t,e){const n=ne(t),i=Ma(n);n.Ia.delete(e),i.O_()&&bA(n,e),n.Ia.size===0&&(i.O_()?i.L_():cr(n)&&n.Ra.set("Unknown"))}function Cp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).Y_(e)}function bA(t,e){t.Va.Ue(e),Ma(t).Z_(e)}function Np(t){t.Va=new HI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.Ra.ua()}function Dp(t){return cr(t)&&!Ma(t).x_()&&t.Ia.size>0}function cr(t){return ne(t).Ea.size===0}function AA(t){t.Va=void 0}async function XC(t){t.Ra.set("Online")}async function ZC(t){t.Ia.forEach((e,n)=>{Cp(t,e)})}async function WC(t,e){AA(t),Dp(t)?(t.Ra.ha(e),Np(t)):t.Ra.set("Unknown")}async function JC(t,e,n){if(t.Ra.set("Online"),e instanceof oA&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(i){F(tr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Lc(t,i)}else if(e instanceof Qu?t.Va.Ze(e):e instanceof aA?t.Va.st(e):t.Va.tt(e),!n.isEqual(W.min()))try{const i=await vA(t.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const m=r.Ia.get(f);m&&r.Ia.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{const m=r.Ia.get(u);if(!m)return;r.Ia.set(u,m.withResumeToken(It.EMPTY_BYTE_STRING,m.snapshotVersion)),bA(r,u);const g=new ts(m.target,u,f,m.sequenceNumber);Cp(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){F(tr,"Failed to raise snapshot:",i),await Lc(t,i)}}async function Lc(t,e,n){if(!Va(e))throw e;t.Ea.add(1),await Ml(t),t.Ra.set("Offline"),n||(n=()=>vA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(tr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wh(t)})}function SA(t,e){return e().catch(n=>Lc(t,n,e))}async function xh(t){const e=ne(t),n=As(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mp;for(;eN(e);)try{const s=await kC(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,tN(e,s)}catch(s){await Lc(e,s)}wA(e)&&xA(e)}function eN(t){return cr(t)&&t.Ta.length<10}function tN(t,e){t.Ta.push(e);const n=As(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wA(t){return cr(t)&&!As(t).x_()&&t.Ta.length>0}function xA(t){As(t).start()}async function nN(t){As(t).ra()}async function iN(t){const e=As(t);for(const n of t.Ta)e.ea(n.mutations)}async function sN(t,e,n){const i=t.Ta.shift(),s=Ep.from(i,e,n);await SA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xh(t)}async function rN(t,e){e&&As(t).X_&&await async function(i,s){if(function(a){return sA(a)&&a!==k.ABORTED}(s.code)){const r=i.Ta.shift();As(i).B_(),await SA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await xh(i)}}(t,e),wA(t)&&xA(t)}async function vv(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),F(tr,"RemoteStore received new credentials");const i=cr(n);n.Ea.add(3),await Ml(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wh(n)}async function aN(t,e){const n=ne(t);e?(n.Ea.delete(2),await wh(n)):e||(n.Ea.add(2),await Ml(n),n.Ra.set("Unknown"))}function Ma(t){return t.ma||(t.ma=function(n,i,s){const r=ne(n);return r.sa(),new FC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:XC.bind(null,t),t_:ZC.bind(null,t),r_:WC.bind(null,t),H_:JC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Dp(t)?Np(t):t.Ra.set("Unknown")):(await t.ma.stop(),AA(t))})),t.ma}function As(t){return t.fa||(t.fa=function(n,i,s){const r=ne(n);return r.sa(),new GC(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:nN.bind(null,t),r_:rN.bind(null,t),ta:iN.bind(null,t),na:sN.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xh(t)):(await t.fa.stop(),t.Ta.length>0&&(F(tr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,l=new Op(e,n,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Va(t))return new z(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static emptySet(e){return new Wr(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=mo(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wr;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ga=new Qe(K.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ea{constructor(e,n,i,s,r,a,l,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ea(e,n,Wr.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lN{constructor(){this.queries=Tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=ne(n),r=s.queries;s.queries=Tv(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function Tv(){return new ur(t=>Hb(t),_h)}async function Mp(t,e){const n=ne(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new oN,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Vp(a,`Initialization of query '${wr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&jp(n)}async function kp(t,e){const n=ne(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(e);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function uN(t,e){const n=ne(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&jp(n)}function cN(t,e,n){const i=ne(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function jp(t){t.Ca.forEach(e=>{e.next()})}var em,bv;(bv=em||(em={})).Ma="default",bv.Cache="cache";class Pp{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ea(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.key=e}}class IA{constructor(e){this.key=e}}class hN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=Fb(e),this.tu=new Wr(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Ev,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const p=s.get(m),_=vh(this.query,g)?g:null,C=!!p&&this.mutatedKeys.has(p.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;p&&_?p.data.isEqual(_.data)?C!==O&&(i.track({type:3,doc:_}),V=!0):this.su(p,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||f&&this.eu(_,f)<0)&&(l=!0)):!p&&_?(i.track({type:0,doc:_}),V=!0):p&&!_&&(i.track({type:1,doc:p}),V=!0,(u||f)&&(l=!0)),V&&(_?(a=a.add(_),r=O?r.add(m):r.delete(m)):(a=a.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(_,C){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:V})}};return O(_)-O(C)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Ea(this.query,e.tu,r,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new IA(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new RA(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lp="SyncEngine";class fN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class dN{constructor(e){this.key=e,this.hu=!1}}class mN{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ur(l=>Hb(l),_h),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(K.comparator),this.Au=new Map,this.Ru=new Ap,this.Vu={},this.mu=new Map,this.fu=va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pN(t,e,n=!0){const i=MA(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await CA(i,e,n,!0),s}async function gN(t,e){const n=MA(t);await CA(n,e,!0,!1)}async function CA(t,e,n,i){const s=await jC(t.localStore,Bn(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await yN(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&TA(t.remoteStore,s),l}async function yN(t,e,n,i,s){t.pu=(g,p,_)=>async function(O,V,S,E){let x=V.view.ru(S);x.Cs&&(x=await mv(O.localStore,V.query,!1).then(({documents:T})=>V.view.ru(T,x)));const D=E&&E.targetChanges.get(V.targetId),L=E&&E.targetMismatches.get(V.targetId)!=null,H=V.view.applyChanges(x,O.isPrimaryClient,D,L);return Sv(O,V.targetId,H.au),H.snapshot}(t,g,p,_);const r=await mv(t.localStore,e,!0),a=new hN(e,r.Qs),l=a.ru(r.documents),u=Vl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=a.applyChanges(l,t.isPrimaryClient,u);Sv(t,n,f.au);const m=new fN(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function _N(t,e,n){const i=ne(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(a=>!_h(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Wd(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ip(i.remoteStore,s.targetId),tm(i,s.targetId)}).catch(Oa)):(tm(i,s.targetId),await Wd(i.localStore,s.targetId,!0))}async function vN(t,e){const n=ne(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(n.remoteStore,i.targetId))}async function EN(t,e,n){const i=RN(t);try{const s=await function(a,l){const u=ne(a),f=Pe.now(),m=l.reduce((_,C)=>_.add(C.key),de());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=Si(),O=de();return u.Ns.getEntries(_,m).next(V=>{C=V,C.forEach((S,E)=>{E.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,C)).next(V=>{g=V;const S=[];for(const E of l){const x=PI(E,g.get(E.key).overlayedDocument);x!=null&&S.push(new Is(E.key,x,jb(x.value.mapValue),xt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,f,S,l)}).next(V=>{p=V;const S=V.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,V.batchId,S)})}).then(()=>({batchId:p.batchId,changes:Qb(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Qe(fe)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f}(i,s.batchId,n),await kl(i,s.changes),await xh(i.remoteStore)}catch(s){const r=Vp(s,"Failed to persist write");n.reject(r)}}async function NA(t,e){const n=ne(t);try{const i=await VC(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Au.get(r);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ye(a.hu,14607):s.removedDocuments.size>0&&(ye(a.hu,42227),a.hu=!1))}),await kl(n,i,e)}catch(i){await Oa(i)}}function Av(t,e,n){const i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let f=!1;u.queries.forEach((m,g)=>{for(const p of g.Sa)p.va(l)&&(f=!0)}),f&&jp(u)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TN(t,e,n){const i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let a=new Qe(K.comparator);a=a.insert(r,pt.newNoDocument(r,W.min()));const l=de().add(r),u=new Ah(W.min(),new Map,new Qe(fe),a,l);await NA(i,u),i.du=i.du.remove(r),i.Au.delete(e),Up(i)}else await Wd(i.localStore,e,!1).then(()=>tm(i,e,n)).catch(Oa)}async function bN(t,e){const n=ne(t),i=e.batch.batchId;try{const s=await OC(n.localStore,e);OA(n,i,null),DA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await kl(n,s)}catch(s){await Oa(s)}}async function AN(t,e,n){const i=ne(t);try{const s=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(g=>(ye(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(f,g))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);OA(i,e,n),DA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await kl(i,s)}catch(s){await Oa(s)}}function DA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function OA(t,e,n){const i=ne(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function tm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||VA(t,i)})}function VA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ip(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Up(t))}function Sv(t,e,n){for(const i of n)i instanceof RA?(t.Ru.addReference(i.key,e),SN(t,i)):i instanceof IA?(F(Lp,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||VA(t,i.key)):X(19791,{wu:i})}function SN(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(F(Lp,"New document in limbo: "+n),t.Eu.add(i),Up(t))}function Up(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(xe.fromString(e)),i=t.fu.next();t.Au.set(i,new dN(n)),t.du=t.du.insert(n,i),TA(t.remoteStore,new ts(Bn(yh(n.path)),i,"TargetPurposeLimboResolution",mh.ce))}}async function kl(t,e,n){const i=ne(t),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(f){s.push(f);const g=wp.As(u.targetId,f);r.push(g)}}))}),await Promise.all(a),i.Pu.H_(s),await async function(u,f){const m=ne(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(f,p=>j.forEach(p.Es,_=>m.persistence.referenceDelegate.addReference(g,p.targetId,_)).next(()=>j.forEach(p.ds,_=>m.persistence.referenceDelegate.removeReference(g,p.targetId,_)))))}catch(g){if(!Va(g))throw g;F(xp,"Failed to update sequence numbers: "+g)}for(const g of f){const p=g.targetId;if(!g.fromCache){const _=m.Ms.get(p),C=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(p,O)}}}(i.localStore,r))}async function wN(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){F(Lp,"User change. New user:",e.toKey());const i=await _A(n.localStore,e);n.currentUser=e,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(k.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kl(n,i.Ls)}}function xN(t,e){const n=ne(t),i=n.Au.get(e);if(i&&i.hu)return de().add(i.key);{let s=de();const r=n.Iu.get(e);if(!r)return s;for(const a of r){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function MA(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TN.bind(null,e),e.Pu.H_=uN.bind(null,e.eventManager),e.Pu.yu=cN.bind(null,e.eventManager),e}function RN(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AN.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return DC(this.persistence,new IC,e.initialUser,this.serializer)}Cu(e){return new yA(Sp.mi,this.serializer)}Du(e){return new LC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class IN extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ye(this.persistence.referenceDelegate instanceof Pc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new yA(i=>Pc.mi(i,n),this.serializer)}}class nm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=wN.bind(null,this.syncEngine),await aN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lN}()}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),i=function(r){return new HC(r)}(e.databaseInfo);return function(r,a,l,u){return new KC(r,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,l){return new $C(i,s,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return yv.v()?new yv:new UC}())}createSyncEngine(e,n){return function(s,r,a,l,u,f,m){const g=new mN(s,r,a,l,u,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ne(s);F(tr,"RemoteStore shutting down."),r.Ea.add(5),await Ml(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}nm.provider={build:()=>new nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const a=ne(s),l={documents:r.map(g=>jc(a.serializer,g))},u=await a.Ho("BatchGetDocuments",a.serializer.databaseId,xe.emptyPath(),l,r.length),f=new Map;u.forEach(g=>{const p=XI(a.serializer,g);f.set(p.key.toString(),p)});const m=[];return r.forEach(g=>{const p=f.get(g.toString());ye(!!p,55234,{key:g}),m.push(p)}),m}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new bh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=K.fromPath(i);this.mutations.push(new iA(s,this.precondition(s)))}),await async function(i,s){const r=ne(i),a={writes:s.map(l=>fA(r.serializer,l))};await r.Go("Commit",r.serializer.databaseId,xe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=W.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(W.min())?xt.exists(!1):xt.updateTime(n):xt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(W.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xt.updateTime(n)}return xt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,i,s,r){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Rp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new CN(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Dl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="FirestoreClient";class DN{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{F(Ss,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(Ss,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Vp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lf(t,e){t.asyncQueue.verifyOperationInProgress(),F(Ss,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await _A(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ON(t);F(Ss,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>vv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>vv(e.remoteStore,s)),t._onlineComponents=e}async function ON(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(Ss,"Using user provided OfflineComponentProvider");try{await Lf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await Lf(t,new Uc)}}else F(Ss,"Using default OfflineComponentProvider"),await Lf(t,new IN(void 0));return t._offlineComponents}async function Bp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(Ss,"Using user provided OnlineComponentProvider"),await wv(t,t._uninitializedComponentsProvider._online)):(F(Ss,"Using default OnlineComponentProvider"),await wv(t,new nm))),t._onlineComponents}function VN(t){return Bp(t).then(e=>e.syncEngine)}function MN(t){return Bp(t).then(e=>e.datastore)}async function zc(t){const e=await Bp(t),n=e.eventManager;return n.onListen=pN.bind(null,e.syncEngine),n.onUnlisten=_N.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vN.bind(null,e.syncEngine),n}function kN(t,e,n={}){const i=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new zp({next:p=>{m.Nu(),a.enqueueAndForget(()=>kp(r,g));const _=p.docs.has(l);!_&&p.fromCache?f.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?f.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Pp(yh(l.path),m,{includeMetadataChanges:!0,qa:!0});return Mp(r,g)}(await zc(t),t.asyncQueue,e,n,i)),i.promise}function jN(t,e,n={}){const i=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,f){const m=new zp({next:p=>{m.Nu(),a.enqueueAndForget(()=>kp(r,g)),p.fromCache&&u.source==="server"?f.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(p)},error:p=>f.reject(p)}),g=new Pp(l,m,{includeMetadataChanges:!0,qa:!0});return Mp(r,g)}(await zc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firestore.googleapis.com",Rv=!0;class Iv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jA,this.ssl=Rv}else this.host=e.host,this.ssl=e.ssl??Rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kA(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new q2;switch(i.type){case"firstParty":return new Q2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=xv.get(n);i&&(F("ComponentProvider","Removing Datastore"),xv.delete(n),i.terminate())}(this),Promise.resolve()}}function PN(t,e,n,i={}){var f;t=Bt(t,Rh);const s=Ca(e),r=t._getSettings(),a={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(ub(`https://${l}`),cb("Firestore",!0)),r.host!==jA&&r.host!==l&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:s,emulatorOptions:i};if(!Ws(u,a)&&(t._setSettings(u),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ot.MOCK_USER;else{m=pR(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ot(p)}t._authCredentials=new H2(new Sb(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Zn(this.firestore,e,this._query)}}class Ge{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Nl(n,Ge._jsonSchema))return new Ge(e,i||null,new K(xe.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:at("string",Ge._jsonSchemaVersion),referencePath:at("string")};class ms extends Zn{constructor(e,n,i){super(e,n,yh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new K(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function im(t,e,...n){if(t=qe(t),wb("collection","path",e),t instanceof Rh){const i=xe.fromString(e,...n);return q_(i),new ms(t,null,i)}{if(!(t instanceof Ge||t instanceof ms))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xe.fromString(e,...n));return q_(i),new ms(t.firestore,null,i)}}function Tt(t,e,...n){if(t=qe(t),arguments.length===1&&(e=dp.newId()),wb("doc","path",e),t instanceof Rh){const i=xe.fromString(e,...n);return B_(i),new Ge(t,null,new K(i))}{if(!(t instanceof Ge||t instanceof ms))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xe.fromString(e,...n));return B_(i),new Ge(t.firestore,t instanceof ms?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class Nv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rp(this,"async_queue_retry"),this._c=()=>{const i=Pf();i&&F(Cv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Va(e))throw e;F(Cv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",Dv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Op.createAndSchedule(this,e,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Kn extends Rh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nv(e),this._firestoreClient=void 0,await e}}}function LN(t,e){const n=typeof t=="object"?t:mb(),i=typeof t=="string"?t:Dc,s=hp(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=dR("firestore");r&&PN(s,...r)}return s}function jl(t){if(t._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UN(t),t._firestoreClient}function UN(t){var i,s,r;const e=t._freezeSettings(),n=function(l,u,f,m){return new uI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,kA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new DN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(It.fromBase64String(e))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nl(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:at("string",sn._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(e){if(Nl(e,qn._jsonSchema))return new qn(e.latitude,e.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:at("string",qn._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nl(e,Hn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hn(e.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hn._jsonSchemaVersion="firestore/vectorValue/1.0",Hn._jsonSchema={type:at("string",Hn._jsonSchemaVersion),vectorValues:at("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=/^__.*__$/;class BN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ol(e,this.data,n,this.fieldTransforms)}}class PA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class qp{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LA(this.Ac)&&zN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Sh(e)}Cc(e,n,i,s=!1){return new qp({Ac:e,methodName:n,Dc:i,path:wt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ka(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new qN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hp(t,e,n,i,s,r={}){const a=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);Qp("Data must be an object, but it was:",a,i);const l=qA(i,a);let u,f;if(r.merge)u=new rn(a.fieldMask),f=a.fieldTransforms;else if(r.mergeFields){const m=[];for(const g of r.mergeFields){const p=sm(e,g,n);if(!a.contains(p))throw new z(k.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FA(m,p)||m.push(p)}u=new rn(m),f=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,f=a.fieldTransforms;return new BN(new Ut(l),u,f)}class Ih extends Ll{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ih}}class Fp extends Ll{_toFieldTransform(e){return new eA(e.path,new sl)}isEqual(e){return e instanceof Fp}}class Gp extends Ll{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ol(e.serializer,$b(e.serializer,this.Fc));return new eA(e.path,n)}isEqual(e){return e instanceof Gp&&this.Fc===e.Fc}}function UA(t,e,n,i){const s=t.Cc(1,e,n);Qp("Data must be an object, but it was:",s,i);const r=[],a=Ut.empty();Rs(i,(u,f)=>{const m=Kp(e,u,n);f=qe(f);const g=s.yc(m);if(f instanceof Ih)r.push(m);else{const p=Ul(f,g);p!=null&&(r.push(m),a.set(m,p))}});const l=new rn(r);return new PA(a,l,s.fieldTransforms)}function zA(t,e,n,i,s,r){const a=t.Cc(1,e,n),l=[sm(e,i,n)],u=[s];if(r.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(sm(e,r[p])),u.push(r[p+1]);const f=[],m=Ut.empty();for(let p=l.length-1;p>=0;--p)if(!FA(f,l[p])){const _=l[p];let C=u[p];C=qe(C);const O=a.yc(_);if(C instanceof Ih)f.push(_);else{const V=Ul(C,O);V!=null&&(f.push(_),m.set(_,V))}}const g=new rn(f);return new PA(m,g,a.fieldTransforms)}function BA(t,e,n,i=!1){return Ul(n,t.Cc(i?4:3,e))}function Ul(t,e){if(HA(t=qe(t)))return Qp("Unsupported field value:",e,t),qA(t,e);if(t instanceof Ll)return function(i,s){if(!LA(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=Ul(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $b(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Pe.fromDate(i);return{timestampValue:kc(s.serializer,r)}}if(i instanceof Pe){const r=new Pe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kc(s.serializer,r)}}if(i instanceof qn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sn)return{bytesValue:lA(s.serializer,i._byteString)};if(i instanceof Ge){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:bp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Hn)return function(a,l){return{mapValue:{fields:{[Mb]:{stringValue:kb},[Oc]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return vp(l.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${dh(i)}`)}(t,e)}function qA(t,e){const n={};return Ib(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(i,s)=>{const r=Ul(s,e.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function HA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof qn||t instanceof sn||t instanceof Ge||t instanceof Ll||t instanceof Hn)}function Qp(t,e,n){if(!HA(n)||!xb(n)){const i=dh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function sm(t,e,n){if((e=qe(e))instanceof Pl)return e._internalPath;if(typeof e=="string")return Kp(t,e);throw Bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const HN=new RegExp("[~\\*/\\[\\]]");function Kp(t,e,n){if(e.search(HN)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pl(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bc(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new z(k.INVALID_ARGUMENT,l+t+u)}function FA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FN extends ll{data(){return super.data()}}function Yp(t,e){return typeof e=="string"?Kp(t,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $p{}class Ch extends $p{}function Vv(t,e,...n){let i=[];e instanceof $p&&i.push(e),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof Zp).length,l=r.filter(u=>u instanceof Xp).length;if(a>1||a>0&&l>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Xp extends Ch{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Xp(e,n,i)}_apply(e){const n=this._parse(e);return QA(e._query,n),new Zn(e.firestore,e.converter,Yd(e._query,n))}_parse(e){const n=ka(e.firestore);return function(r,a,l,u,f,m,g){let p;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Pv(g,m);const C=[];for(const O of g)C.push(jv(u,r,O));p={arrayValue:{values:C}}}else p=jv(u,r,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Pv(g,m),p=BA(l,a,g,m==="in"||m==="not-in");return rt.create(f,m,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zp extends $p{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zp(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)QA(a,u),a=Yd(a,u)}(e._query,n),new Zn(e.firestore,e.converter,Yd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wp extends Ch{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wp(e,n)}_apply(e){const n=function(s,r,a){if(s.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new il(r,a)}(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new lr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Mv(t,e="asc"){const n=e,i=Yp("orderBy",t);return Wp._create(i,n)}class Jp extends Ch{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Jp(e,n,i)}_apply(e){return new Zn(e.firestore,e.converter,Mc(e._query,this._limit,this._limitType))}}function kv(t){return Jp._create("limit",t,"F")}class eg extends Ch{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new eg(e,n,i)}_apply(e){const n=QN(e,this.type,this._docOrFields,this._inclusive);return new Zn(e.firestore,e.converter,function(s,r){return new lr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)}(e._query,n))}}function GN(...t){return eg._create("startAfter",t,!1)}function QN(t,e,n,i){if(n[0]=qe(n[0]),n[0]instanceof ll)return function(r,a,l,u,f){if(!u)throw new z(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of Zr(r))if(g.field.isKeyField())m.push(Vc(a,u.key));else{const p=u.data.field(g.field);if(ph(p))throw new z(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=g.field.canonicalString();throw new z(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}m.push(p)}return new _a(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=ka(t.firestore);return function(a,l,u,f,m,g){const p=a.explicitOrderBy;if(m.length>p.length)throw new z(k.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let C=0;C<m.length;C++){const O=m[C];if(p[C].field.isKeyField()){if(typeof O!="string")throw new z(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof O}`);if(!_p(a)&&O.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${O}' contains a slash.`);const V=a.path.child(xe.fromString(O));if(!K.isDocumentKey(V))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const S=new K(V);_.push(Vc(l,S))}else{const V=BA(u,f,O);_.push(V)}}return new _a(_,g)}(t._query,t.firestore._databaseId,s,e,n,i)}}function jv(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_p(e)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(xe.fromString(n));if(!K.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vc(t,new K(i))}if(n instanceof Ge)return Vc(t,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function Pv(t,e){if(!Array.isArray(t)||t.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QA(t,e){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KA{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Rs(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[Oc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(a=>et(a.doubleValue));return new Hn(n)}convertGeoPoint(e){return new qn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const n=Es(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=xe.fromString(e);ye(pA(i),9688,{name:e});const s=new tl(i.get(1),i.get(3)),r=new K(i.popFirst(5));return s.isEqual(n)||Ai(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class KN extends KA{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}class Br{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ps extends ll{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Yp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:at("string",ps._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class Ku extends ps{data(e={}){return super.data(e)}}class Ks{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Br(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ku(this._firestore,this._userDataWriter,i.key,i,new Br(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ku(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Br(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Ku(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Br(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:YN(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t){t=Bt(t,Ge);const e=Bt(t.firestore,Kn);return kN(jl(e),t._key).then(n=>YA(e,t,n))}Ks._jsonSchemaVersion="firestore/querySnapshot/1.0",Ks._jsonSchema={type:at("string",Ks._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class Nh extends KA{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function rm(t){t=Bt(t,Zn);const e=Bt(t.firestore,Kn),n=jl(e),i=new Nh(e);return GA(t._query),jN(n,t._query).then(s=>new Ks(e,i,t,s))}function ul(t,e,n){t=Bt(t,Ge);const i=Bt(t.firestore,Kn),s=tg(t.converter,e,n);return Dh(i,[Hp(ka(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xt.none())])}function $N(t,e,n,...i){t=Bt(t,Ge);const s=Bt(t.firestore,Kn),r=ka(s);let a;return a=typeof(e=qe(e))=="string"||e instanceof Pl?zA(r,"updateDoc",t._key,e,n,i):UA(r,"updateDoc",t._key,e),Dh(s,[a.toMutation(t._key,xt.exists(!0))])}function XN(t){return Dh(Bt(t.firestore,Kn),[new bh(t._key,xt.none())])}function ZN(t,e){const n=Bt(t.firestore,Kn),i=Tt(t),s=tg(t.converter,e);return Dh(n,[Hp(ka(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,xt.exists(!1))]).then(()=>i)}function WN(t,...e){var u,f,m;t=qe(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ov(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ov(e[i])){const g=e[i];e[i]=(u=g.next)==null?void 0:u.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let r,a,l;if(t instanceof Ge)a=Bt(t.firestore,Kn),l=yh(t._key.path),r={next:g=>{e[i]&&e[i](YA(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=Bt(t,Zn);a=Bt(g.firestore,Kn),l=g._query;const p=new Nh(a);r={next:_=>{e[i]&&e[i](new Ks(a,p,g,_))},error:e[i+1],complete:e[i+2]},GA(t._query)}return function(p,_,C,O){const V=new zp(O),S=new Pp(_,V,C);return p.asyncQueue.enqueueAndForget(async()=>Mp(await zc(p),S)),()=>{V.Nu(),p.asyncQueue.enqueueAndForget(async()=>kp(await zc(p),S))}}(jl(a),l,s,r)}function Dh(t,e){return function(i,s){const r=new zn;return i.asyncQueue.enqueueAndForget(async()=>EN(await VN(i),s,r)),r.promise}(jl(t),e)}function YA(t,e,n){const i=n.docs.get(e._key),s=new Nh(t);return new ps(t,s,e._key,i,new Br(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={maxAttempts:5};function go(t,e){if((t=qe(t)).firestore!==e)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ka(e)}get(e){const n=go(e,this._firestore),i=new KN(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return X(24041);const r=s[0];if(r.isFoundDocument())return new ll(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new ll(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:r})})}set(e,n,i){const s=go(e,this._firestore),r=tg(s.converter,n,i),a=Hp(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(e,n,i,...s){const r=go(e,this._firestore);let a;return a=typeof(n=qe(n))=="string"||n instanceof Pl?zA(this._dataReader,"Transaction.update",r._key,n,i,s):UA(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(e){const n=go(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD extends eD{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=go(e,this._firestore),i=new Nh(this._firestore);return super.get(e).then(s=>new ps(this._firestore,i,n._key,s._document,new Br(!1,!1),n.converter))}}function Lv(t,e,n){t=Bt(t,Kn);const i={...JN,...n};return function(r){if(r.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,a,l){const u=new zn;return r.asyncQueue.enqueueAndForget(async()=>{const f=await MN(r);new NN(r.asyncQueue,f,l,a,u).ju()}),u.promise}(jl(t),s=>e(new tD(t,s)),i)}function Uf(){return new Fp("serverTimestamp")}function nD(t){return new Gp("increment",t)}(function(e,n=!0){(function(s){Da=s})(Na),da(new Js("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Kn(new F2(i.getProvider("auth-internal")),new K2(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(f.options.projectId,m)}(a,s),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),fs(P_,L_,e),fs(P_,L_,"esm2020")})();var iD="firebase",sD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(iD,sD,"app");function $A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rD=$A,XA=new Il("auth","Firebase",$A());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new up("@firebase/auth");function aD(t,...e){qc.logLevel<=he.WARN&&qc.warn(`Auth (${Na}): ${t}`,...e)}function Yu(t,...e){qc.logLevel<=he.ERROR&&qc.error(`Auth (${Na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,...e){throw ng(t,...e)}function Fn(t,...e){return ng(t,...e)}function ZA(t,e,n){const i={...rD(),[e]:n};return new Il("auth","Firebase",i).create(e,{appName:t.name})}function yi(t){return ZA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return XA.create(t,...e)}function J(t,e,...n){if(!t)throw ng(e,...n)}function di(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yu(e),new Error(e)}function wi(t,e){t||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oD(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oD()||TR()||"connection"in navigator)?navigator.onLine:!0}function uD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,wi(n>e,"Short delay should be less than long delay!"),this.isMobile=_R()||bR()}get(){return lD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fD=new zl(3e4,6e4);function Cs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ii(t,e,n,i,s={}){return JA(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=Cl({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:u,...r};return ER()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ca(t.emulatorConfig.host)&&(f.credentials="include"),WA.fetch()(await eS(t,t.config.apiHost,n,l),f)})}async function JA(t,e,n){t._canInitEmulator=!1;const i={...cD,...e};try{const s=new mD(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Iu(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Iu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Iu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Iu(t,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ZA(t,m,f);Nn(t,m)}}catch(s){if(s instanceof Ri)throw s;Nn(t,"network-request-failed",{message:String(s)})}}async function Bl(t,e,n,i,s={}){const r=await Ii(t,e,n,i,s);return"mfaPendingCredential"in r&&Nn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function eS(t,e,n,i){const s=`${e}${n}?${i}`,r=t,a=r.config.emulator?ig(t.config,s):`${t.config.apiScheme}://${s}`;return hD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function dD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),fD.get())})}}function Iu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Fn(t,e,i);return s.customData._tokenResponse=n,s}function zv(t){return t!==void 0&&t.enterprise!==void 0}class pD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gD(t,e){return Ii(t,"GET","/v2/recaptchaConfig",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function Hc(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _D(t,e=!1){const n=qe(t),i=await n.getIdToken(e),s=sg(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Po(zf(s.auth_time)),issuedAtTime:Po(zf(s.iat)),expirationTime:Po(zf(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function zf(t){return Number(t)*1e3}function sg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=rb(n);return s?JSON.parse(s):(Yu("Failed to decode base64 JWT payload"),null)}catch(s){return Yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bv(t){const e=sg(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ri&&vD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function vD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Po(this.lastLoginAt),this.creationTime=Po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Ta(t,Hc(e,{idToken:n}));J(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(g=s.providerUserInfo)!=null&&g.length?tS(s.providerUserInfo):[],a=bD(t.providerData,r),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new om(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function TD(t){const e=qe(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bD(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function tS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e){const n=await JA(t,{},async()=>{const i=Cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=await eS(t,s,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return t.emulatorConfig&&Ca(t.emulatorConfig.host)&&(u.credentials="include"),WA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SD(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await AD(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Jr;return i&&(J(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jr,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new ED(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new om(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ta(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _D(this,e)}reload(){return TD(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Ta(this,yD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:p,isAnonymous:_,providerData:C,stsTokenManager:O}=n;J(g&&O,e,"internal-error");const V=Jr.fromJSON(this.name,O);J(typeof g=="string",e,"internal-error"),Ui(i,e.name),Ui(s,e.name),J(typeof p=="boolean",e,"internal-error"),J(typeof _=="boolean",e,"internal-error"),Ui(r,e.name),Ui(a,e.name),Ui(l,e.name),Ui(u,e.name),Ui(f,e.name),Ui(m,e.name);const S=new Rn({uid:g,auth:e,email:s,emailVerified:p,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:V,createdAt:f,lastLoginAt:m});return C&&Array.isArray(C)&&(S.providerData=C.map(E=>({...E}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,i=!1){const s=new Jr;s.updateFromServerResponse(n);const r=new Rn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Fc(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?tS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Jr;l.updateFromIdToken(i);const u=new Rn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new om(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function mi(t){wi(t instanceof Function,"Expected a class definition");let e=qv.get(t);return e?(wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nS.type="NONE";const Hv=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e,n){return`firebase:${t}:${e}:${n}`}class ea{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=$u(this.userKey,s.apiKey,r),this.fullPersistenceKey=$u("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hc(this.auth,{idToken:e}).catch(()=>{});return n?Rn._fromGetAccountInfoResponse(this.auth,n,e):null}return Rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ea(mi(Hv),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let r=s[0]||mi(Hv);const a=$u(i,e.config.apiKey,e.name);let l=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const p=await Hc(e,{idToken:m}).catch(()=>{});if(!p)break;g=await Rn._fromGetAccountInfoResponse(e,p,m)}else g=Rn._fromJSON(e,m);f!==r&&(l=g),r=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ea(r,e,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==r)try{await f._remove(a)}catch{}})),new ea(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lS(e))return"Blackberry";if(uS(e))return"Webos";if(sS(e))return"Safari";if((e.includes("chrome/")||rS(e))&&!e.includes("edge/"))return"Chrome";if(oS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function iS(t=kt()){return/firefox\//i.test(t)}function sS(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rS(t=kt()){return/crios\//i.test(t)}function aS(t=kt()){return/iemobile/i.test(t)}function oS(t=kt()){return/android/i.test(t)}function lS(t=kt()){return/blackberry/i.test(t)}function uS(t=kt()){return/webos/i.test(t)}function rg(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wD(t=kt()){var e;return rg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xD(){return AR()&&document.documentMode===10}function cS(t=kt()){return rg(t)||oS(t)||uS(t)||lS(t)||/windows phone/i.test(t)||aS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e=[]){let n;switch(t){case"Browser":n=Fv(kt());break;case"Worker":n=`${Fv(kt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",Cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=6;class ND{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??CD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new RD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await ea.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hc(this,{idToken:e}),i=await Rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(yi(this));const n=e?qe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ID(this),n=new ND(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await SD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mi(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&aD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hr(t){return qe(t)}class Gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DR(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OD(t){Oh=t}function fS(t){return Oh.loadJS(t)}function VD(){return Oh.recaptchaEnterpriseScript}function MD(){return Oh.gapiScript}function kD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jD{constructor(){this.enterprise=new PD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LD="recaptcha-enterprise",dS="NO_RECAPTCHA";class UD{constructor(e){this.type=LD,this.auth=hr(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{gD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new pD(u);return r.tenantId==null?r._agentRecaptchaConfig=f:r._tenantRecaptchaConfigs[r.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;zv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(f=>{a(f)}).catch(()=>{a(dS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jD().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&zv(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=VD();u.length!==0&&(u+=l),fS(u).then(()=>{s(l,r,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})}}async function Qv(t,e,n,i=!1,s=!1){const r=new UD(t);let a;if(s)a=dS;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lm(t,e,n,i,s){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qv(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t,e){const n=hp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Ws(r,e??{}))return s;Nn(s,"already-initialized")}return n.initialize({options:e})}function BD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function qD(t,e,n){const i=hr(t);J(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=mS(e),{host:a,port:l}=HD(e),u=l===null?"":`:${l}`,f={url:`${r}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(Ws(f,i.config.emulator)&&Ws(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Ca(a)?(ub(`${r}//${a}${u}`),cb("Auth",!0)):FD()}function mS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HD(t){const e=mS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Kv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Kv(a)}}}function Kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,n){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function GD(t,e){return Ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e){return Bl(t,"POST","/v1/accounts:signInWithPassword",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e){return Bl(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}async function YD(t,e){return Bl(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends ag{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new cl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,n,"signInWithPassword",QD);case"emailLink":return KD(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,i,"signUpPassword",GD);case"emailLink":return YD(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e){return Bl(t,"POST","/v1/accounts:signInWithIdp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="http://localhost";class nr extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const a=new nr(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ta(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ta(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ta(e,n)}buildRequest(){const e={requestUri:$D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZD(t){const e=co(ho(t)).link,n=e?co(ho(e)).deep_link_id:null,i=co(ho(t)).deep_link_id;return(i?co(ho(i)).link:null)||i||n||e||t}class og{constructor(e){const n=co(ho(e)),i=n.apiKey??null,s=n.oobCode??null,r=XD(n.mode??null);J(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ZD(e);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(e,n){return cl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=og.parseLink(n);return J(i,"argument-error"),cl._fromEmailAndCode(e,i.code,i.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends pS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends ql{constructor(){super("facebook.com")}static credential(e){return nr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nr._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Yi.credential(n,i)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends ql{constructor(){super("github.com")}static credential(e){return nr._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends ql{constructor(){super("twitter.com")}static credential(e,n){return nr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return Bl(t,"POST","/v1/accounts:signUp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Rn._fromIdTokenResponse(e,i,s),a=Yv(i);return new ir({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Yv(i);return new ir({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Ri{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Gc(e,n,i,s)}}function gS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(t,r,e,i):r})}async function JD(t,e,n=!1){const i=await Ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ir._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(t,e,n=!1){const{auth:i}=t;if(vn(i.app))return Promise.reject(yi(i));const s="reauthenticate";try{const r=await Ta(t,gS(i,s,e,t),n);J(r.idToken,i,"internal-error");const a=sg(r.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(t.uid===l,i,"user-mismatch"),ir._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Nn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e,n=!1){if(vn(t.app))return Promise.reject(yi(t));const i="signIn",s=await gS(t,i,e),r=await ir._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function t4(t,e){return yS(hr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t){const e=hr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function n4(t,e,n){if(vn(t.app))return Promise.reject(yi(t));const i=hr(t),a=await lm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_S(t),u}),l=await ir._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function i4(t,e,n){return vn(t.app)?Promise.reject(yi(t)):t4(qe(t),ja.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_S(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return Ii(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=qe(t),r={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Ta(i,s4(i.auth,r));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t,e){return qe(t).setPersistence(e)}function o4(t,e,n,i){return qe(t).onIdTokenChanged(e,n,i)}function l4(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function u4(t,e,n,i){return qe(t).onAuthStateChanged(e,n,i)}function c4(t){return qe(t).signOut()}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=1e3,f4=10;class ES extends vS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);xD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,f4):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ES.type="LOCAL";const TS=ES;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends vS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bS.type="SESSION";const AS=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Vh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async f=>f(n.origin,r)),u=await d4(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const f=lg("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(p.data.response);break;default:clearTimeout(m),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function p4(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function g4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _4(){return SS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",v4=1,Kc="firebaseLocalStorage",xS="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(t,e){return t.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function E4(){const t=indexedDB.deleteDatabase(wS);return new Hl(t).toPromise()}function um(){const t=indexedDB.open(wS,v4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Kc,{keyPath:xS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Kc)?e(i):(i.close(),await E4(),e(await um()))})})}async function $v(t,e,n){const i=Mh(t,!0).put({[xS]:e,value:n});return new Hl(i).toPromise()}async function T4(t,e){const n=Mh(t,!1).get(e),i=await new Hl(n).toPromise();return i===void 0?null:i.value}function Xv(t,e){const n=Mh(t,!0).delete(e);return new Hl(n).toPromise()}const b4=800,A4=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>A4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vh._getInstance(_4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await g4(),!this.activeServiceWorker)return;this.sender=new m4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await $v(e,Qc,"1"),await Xv(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>$v(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>T4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Mh(s,!1).getAll();return new Hl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const S4=RS;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e){return e?mi(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function x4(t){return yS(t.auth,new ug(t),t.bypassAuthState)}function R4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),e4(n,new ug(t),t.bypassAuthState)}async function I4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),JD(n,new ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x4;case"linkViaPopup":case"linkViaRedirect":return I4;case"reauthViaPopup":case"reauthViaRedirect":return R4;default:Nn(this.auth,"internal-error")}}resolve(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new zl(2e3,1e4);class qr extends IS{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,qr.currentPopupAction&&qr.currentPopupAction.cancel(),qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const e=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C4.get())};e()}}qr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="pendingRedirect",Xu=new Map;class D4 extends IS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const i=await O4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O4(t,e){const n=k4(e),i=M4(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function V4(t,e){Xu.set(t._key(),e)}function M4(t){return mi(t._redirectPersistence)}function k4(t){return $u(N4,t.config.apiKey,t.name)}async function j4(t,e,n=!1){if(vn(t.app))return Promise.reject(yi(t));const i=hr(t),s=w4(i,e),a=await new D4(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=10*60*1e3;class L4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!CS(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zv(e))}saveEventToCache(e){this.cachedEventUids.add(Zv(e)),this.lastProcessedEventTime=Date.now()}}function Zv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function U4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q4=/^https?/;async function H4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await z4(t);for(const n of e)try{if(F4(n))return}catch{}Nn(t,"unauthorized-domain")}function F4(t){const e=am(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!q4.test(n))return!1;if(B4.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new zl(3e4,6e4);function Wv(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q4(t){return new Promise((e,n)=>{var s,r,a;function i(){Wv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wv(),n(Fn(t,"network-request-failed"))},timeout:G4.get()})}if((r=(s=Gn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=Gn().gapi)!=null&&a.load)i();else{const l=kD("iframefcb");return Gn()[l]=()=>{gapi.load?i():n(Fn(t,"network-request-failed"))},fS(`${MD()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function K4(t){return Zu=Zu||Q4(t),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new zl(5e3,15e3),$4="__/auth/iframe",X4="emulator/auth/iframe",Z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J4(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ig(e,X4):`https://${t.config.authDomain}/${$4}`,i={apiKey:e.apiKey,appName:t.name,v:Na},s=W4.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Cl(i).slice(1)}`}async function eO(t){const e=await K4(t),n=Gn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:J4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Fn(t,"network-request-failed"),l=Gn().setTimeout(()=>{r(a)},Y4.get());function u(){Gn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nO=500,iO=600,sO="_blank",rO="http://localhost";class Jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aO(t,e,n,i=nO,s=iO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...tO,width:i.toString(),height:s.toString(),top:r,left:a},f=kt().toLowerCase();n&&(l=rS(f)?sO:n),iS(f)&&(e=e||rO,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[_,C])=>`${p}${_}=${C},`,"");if(wD(f)&&l!=="_self")return oO(e||"",l),new Jv(null);const g=window.open(e||"",l,m);J(g,t,"popup-blocked");try{g.focus()}catch{}return new Jv(g)}function oO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="__/auth/handler",uO="emulator/auth/handler",cO=encodeURIComponent("fac");async function eE(t,e,n,i,s,r){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Na,eventId:s};if(e instanceof pS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",NR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof ql){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),f=u?`#${cO}=${encodeURIComponent(u)}`:"";return`${hO(t)}?${Cl(l).slice(1)}${f}`}function hO({config:t}){return t.emulator?ig(t,uO):`https://${t.authDomain}/${lO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="webStorageSupport";class fO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=j4,this._overrideRedirectResult=V4}async _openPopup(e,n,i,s){var a;wi((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await eE(e,n,i,am(),s);return aO(e,r,lg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await eE(e,n,i,am(),s);return p4(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(wi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await eO(e),i=new L4(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bf,{type:Bf},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[Bf];r!==void 0&&n(!!r),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=H4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cS()||sS()||rg()}}const dO=fO;var tE="@firebase/auth",nE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gO(t){da(new Js("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(t)},f=new DD(i,s,r,u);return BD(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),da(new Js("auth-internal",e=>{const n=hr(e.getProvider("auth").getImmediate());return(i=>new mO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(tE,nE,pO(t)),fs(tE,nE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=5*60,_O=lb("authIdTokenMaxAge")||yO;let iE=null;const vO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>_O)return;const s=n==null?void 0:n.token;iE!==s&&(iE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function EO(t=mb()){const e=hp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zD(t,{popupRedirectResolver:dO,persistence:[S4,TS,AS]}),i=lb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=vO(r.toString());l4(n,a,()=>a(n.currentUser)),o4(n,l=>a(l))}}const s=ab("auth");return s&&qD(n,`http://${s}`),n}function TO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}OD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Fn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",TO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gO("Browser");const bO={apiKey:"AIzaSyAhMZTS-LgXURFr19kmDvVG3mc_j68PkNI",authDomain:"tene-9f8c9.firebaseapp.com",projectId:"tene-9f8c9",storageBucket:"tene-9f8c9.firebasestorage.app",messagingSenderId:"1096524923335",appId:"1:1096524923335:web:a2662d6197b49fe3bbd9e2"},NS=db(bO),it=LN(NS),hl=EO(NS);a4(hl,TS).catch(t=>{console.error("Firebase Persistence Error:",t)});const DS=U.createContext(),AO=({children:t})=>{const[e,n]=U.useState(null),[i,s]=U.useState(!0);U.useEffect(()=>{const a=u4(hl,l=>{n(l),s(!1)});return()=>a()},[]);const r={user:e,loading:i};return h.jsx(DS.Provider,{value:r,children:!i&&t})},OS=()=>U.useContext(DS),SO=({onRegisterClick:t})=>{const[e,n]=U.useState(!1),[i,s]=U.useState(""),[r,a]=U.useState(""),[l,u]=U.useState(""),[f,m]=U.useState(""),g=async _=>{if(_.preventDefault(),m(""),e){if(!l.trim()){m("Пожалуйста, введите имя.");return}try{const C=await n4(hl,i,r);await r4(C.user,{displayName:l})}catch(C){m(p(C.code))}}else try{await i4(hl,i,r)}catch(C){m(p(C.code))}},p=_=>{switch(_){case"auth/invalid-email":return"Неверный формат электронной почты.";case"auth/user-not-found":case"auth/wrong-password":return"Неверный email или пароль.";case"auth/email-already-in-use":return"Этот email уже зарегистрирован.";case"auth/weak-password":return"Пароль слишком слабый. Используйте не менее 6 символов.";default:return"Произошла ошибка. Пожалуйста, попробуйте еще раз."}};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e&&h.jsx("input",{type:"text",value:l,onChange:_=>u(_.target.value),placeholder:"Ваше имя",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"email",value:i,onChange:_=>s(_.target.value),placeholder:"Email",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"password",value:r,onChange:_=>a(_.target.value),placeholder:"Пароль",className:"w-full bg-background border-border-color border rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),f&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:f}),h.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-transform hover:scale-105",children:e?"Зарегистрироваться":"Войти"})]}),h.jsx("div",{className:"flex items-center justify-center",children:h.jsx("button",{onClick:()=>{!e&&t&&t(),n(!e),m("")},className:"text-sm text-accent hover:underline",children:e?"У меня уже есть аккаунт":"Создать новый аккаунт"})})]})},wO=({auth:t,onRegisterClick:e})=>h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text-main p-4",children:h.jsxs("div",{className:"w-full max-w-sm text-center",children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Добро пожаловать"}),h.jsx("p",{className:"text-text-main/70 mb-8",children:"Войдите или создайте аккаунт, чтобы продолжить."}),h.jsx("div",{className:"bg-component-bg p-6 rounded-2xl border border-border-color shadow-lg",children:h.jsx(SO,{onRegisterClick:e})})]})}),xO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`opacity-50 ${t}`,children:h.jsx("path",{d:"m9 18 6-6-6-6"})}),VS=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M19 12H5"}),h.jsx("polyline",{points:"12 19 5 12 12 5"})]}),MS=({className:t="",filled:e=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),RO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"})}),kS=({className:t="",filled:e=!1})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"M19.5 12.572a4.5 4.5 0 0 0-6.43-6.234l-.07.064-.07-.064a4.5 4.5 0 0 0-6.43 6.234l6.5 6.235 6.5-6.235z"})}),jS=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),h.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),PS=({className:t="",filled:e=!1})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),IO=({className:t="",filled:e=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CO=({className:t="",filled:e=!1})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M4 22h16"}),h.jsx("path",{d:"M7 22V2h10v20"}),h.jsx("path",{d:"M7 12h4"})]}),NO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m15 18-6-6 6-6"})}),DO=({className:t=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m9 18 6-6-6-6"})}),OO=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),VO=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),MO=({className:t=""})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),cg=({novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})=>h.jsx("div",{className:"grid grid-cols-3 gap-x-3 gap-y-5 sm:grid-cols-4 p-4 text-text-main",children:t.length>0?t.map((s,r)=>h.jsx("div",{onClick:()=>e(s),className:"cursor-pointer group animate-fade-in-down",style:{animationDelay:`${r*50}ms`},children:h.jsxs("div",{className:"relative transition-all duration-300",children:[h.jsx("button",{onClick:a=>{a.stopPropagation(),i(s.id)},className:`absolute top-2 right-2 z-10 p-1 rounded-full bg-black/30 backdrop-blur-sm text-white transition-colors ${n.includes(s.id)?"text-accent":""}`,children:h.jsx(PS,{filled:n.includes(s.id),width:"20",height:"20"})}),h.jsx("img",{src:`/${s.coverUrl}`,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105 border border-border-color"}),h.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("h2",{className:"font-semibold text-xs truncate text-text-main",children:s.title})}),s.views>0&&h.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60 flex-shrink-0",children:[h.jsx(MO,{className:"w-4 h-4"}),h.jsx("span",{children:s.views})]})]})]})},s.id)):h.jsx("p",{className:"col-span-3 text-center opacity-70",children:"Ничего не найдено."})}),kO=t=>{const e={},n=[];return t.forEach(i=>{e[i.id]={...i,replies:[]}}),t.forEach(i=>{i.replyTo&&e[i.replyTo]?e[i.replyTo].replies.push(e[i.id]):n.push(e[i.id])}),n},LS=pE.memo(({comment:t,onReply:e,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C})=>{const O=V=>V!=null&&V.toDate?V.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"p-3 rounded-lg bg-component-bg border border-border-color",children:[h.jsxs("div",{className:"flex justify-between items-center text-xs opacity-70 mb-1",children:[h.jsx("p",{className:"font-bold text-sm text-text-main opacity-100",children:t.userName}),h.jsx("span",{children:O(t.timestamp)})]}),u===t.id?h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("input",{type:"text",value:f,autoFocus:!0,onChange:V=>m(V.target.value),className:"w-full bg-background border border-border-color rounded-lg py-1 px-2 text-text-main text-sm"}),h.jsx("button",{onClick:()=>r(t.id),className:"p-1 rounded-full bg-green-500 text-white",children:"✓"}),h.jsx("button",{onClick:()=>i(null),className:"p-1 rounded-full bg-gray-500 text-white",children:"✕"})]}):h.jsx("p",{className:"text-sm mt-1 opacity-90",children:t.text}),h.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[h.jsxs("button",{onClick:()=>n(t.id),className:"flex items-center gap-1 text-xs text-gray-500",children:[h.jsx(kS,{filled:t.userHasLiked,className:`w-4 h-4 ${t.userHasLiked?"text-accent":""}`}),h.jsx("span",{children:t.likeCount||0})]}),h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-gray-500",children:"Ответить"}),(l===t.userId||a)&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>i(t),className:"text-xs text-gray-500",children:"Редактировать"}),h.jsx("button",{onClick:()=>s(t.id),className:"text-xs text-red-500",children:"Удалить"})]})]})]}),g===t.id&&h.jsxs("form",{onSubmit:V=>C(V,t.id),className:"flex items-center gap-2 mt-2",children:[h.jsx("input",{type:"text",value:p,autoFocus:!0,onChange:V=>_(V.target.value),placeholder:`Ответ для ${t.userName}...`,className:"w-full bg-background border border-border-color rounded-lg py-1 px-3 text-sm"}),h.jsx("button",{type:"submit",className:"p-1.5 rounded-full bg-accent text-white",children:h.jsx(jS,{className:"w-4 h-4"})})]}),t.replies&&t.replies.length>0&&h.jsx("div",{className:"mt-2 space-y-2 border-l-2 border-border-color pl-2",children:t.replies.map(V=>h.jsx(LS,{comment:V,onReply:e,onLike:n,onEdit:i,onDelete:s,onUpdate:r,isUserAdmin:a,currentUserId:l,editingCommentId:u,editingText:f,setEditingText:m,replyingTo:g,replyText:p,setReplyText:_,onCommentSubmit:C},V.id))})]})}),jO=`
  @keyframes page-turn {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(-180deg); }
  }

  .book-page {
    transform-origin: left center;
    animation: page-turn 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes dot-fade {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 1; }
  }

  .dot-1 { animation: dot-fade 1.5s infinite; animation-delay: 0s; }
  .dot-2 { animation: dot-fade 1.5s infinite; animation-delay: 0.2s; }
  .dot-3 { animation: dot-fade 1.5s infinite; animation-delay: 0.4s; }
`,PO=()=>h.jsxs(h.Fragment,{children:[h.jsx("style",{children:jO}),h.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-background text-text-main",children:[h.jsxs("div",{className:"relative w-20 h-16 mb-6",children:[h.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-r-md left-1/2"}),h.jsx("div",{className:"absolute w-10 h-16 bg-component-bg border-2 border-border-color rounded-l-md right-1/2"}),h.jsx("div",{className:"book-page absolute w-10 h-16 bg-accent rounded-r-md left-1/2"})]}),h.jsxs("p",{className:"text-lg font-semibold text-text-main flex items-center",children:["Загрузка новелл",h.jsx("span",{className:"dot-1",children:"."}),h.jsx("span",{className:"dot-2",children:"."}),h.jsx("span",{className:"dot-3",children:"."})]})]})]}),hg=({onClose:t,onSelectPlan:e})=>{const n=[{duration:1,name:"1 месяц",price:199},{duration:3,name:"3 месяца",price:539,popular:!0},{duration:12,name:"1 год",price:1899}];return h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[h.jsx(RO,{className:"mx-auto mb-4 text-accent"}),h.jsx("h3",{className:"text-xl text-center font-bold",children:"Получите доступ ко всем главам"}),h.jsx("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:"Выберите подходящий тариф подписки:"}),h.jsx("div",{className:"space-y-3",children:n.map(i=>h.jsxs("button",{onClick:()=>e(i),className:"relative w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:i.name}),h.jsxs("p",{className:"text-sm",children:[i.price," ₽"]})]},i.duration))}),h.jsx("button",{onClick:t,className:"w-full py-3 mt-4 rounded-lg border border-border-color",children:"Не сейчас"})]})})},fg=({onClose:t,onSelectMethod:e,plan:n})=>h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm rounded-2xl p-6 shadow-lg bg-component-bg text-text-main",children:[h.jsx("h3",{className:"text-xl text-center font-bold",children:"Выберите способ оплаты"}),h.jsxs("p",{className:"mt-2 mb-6 text-sm text-center opacity-70",children:["Тариф: ",n.name," (",n.price," ₽)"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("button",{onClick:()=>e("card"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"💳 Банковской картой"}),h.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),h.jsxs("button",{onClick:()=>e("tribut"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"❤️ Донат через tribut"}),h.jsx("p",{className:"text-sm opacity-70",children:"Ручная проверка (до 24 часов)"})]}),h.jsxs("button",{onClick:()=>e("boosty"),className:"w-full text-left p-4 rounded-xl border-2 transition-colors duration-200 border-border-color bg-background hover:border-accent-hover",children:[h.jsx("p",{className:"font-bold",children:"🧡 Оплатить через Boosty"}),h.jsx("p",{className:"text-sm opacity-70",children:"Автоматическая активация через Telegram"})]}),h.jsx("div",{className:"text-center pt-2",children:h.jsx("button",{onClick:()=>e("boosty"),className:"text-sm text-accent hover:underline",children:"Уже есть подписка Boosty? Синхронизировать аккаунт"})})]}),h.jsx("button",{onClick:t,className:"w-full py-3 mt-6 rounded-lg border border-border-color hover:bg-white/5 transition-colors",children:"Назад"})]})}),LO=({activeTab:t,setActiveTab:e})=>{const n=[{id:"library",label:"Библиотека",icon:CO},{id:"search",label:"Поиск",icon:MS},{id:"bookmarks",label:"Закладки",icon:PS},{id:"profile",label:"Профиль",icon:IO}];return h.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border-color bg-component-bg z-30 shadow-[0_-2px_5px_rgba(0,0,0,0.05)]",children:h.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(i=>h.jsxs("button",{onClick:()=>e(i.id),className:`flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ${t===i.id?"text-accent":"text-text-main opacity-60"}`,children:[h.jsx(i.icon,{filled:t===i.id}),h.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id))})})},UO=({onReadMore:t})=>{const[e,n]=U.useState([]),[i,s]=U.useState(0);U.useEffect(()=>{fetch("/data/news.json").then(u=>u.json()).then(n).catch(u=>console.error("Failed to fetch news",u))},[]);const r=()=>s(u=>(u+1)%e.length),a=()=>s(u=>(u-1+e.length)%e.length);if(e.length===0)return null;const l=e[i];return h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"bg-component-bg p-4 rounded-2xl shadow-md border border-border-color flex items-center gap-4",children:[h.jsx("img",{src:l.imageUrl,alt:"News",className:"w-16 h-16 rounded-full object-cover border-2 border-border-color"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-bold text-text-main",children:l.title}),h.jsx("p",{className:"text-sm text-text-main opacity-70",children:l.shortDescription}),h.jsx("button",{onClick:()=>t(l),className:"text-sm font-bold text-accent mt-1",children:"Читать далее"})]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-background",children:h.jsx(NO,{className:"w-5 h-5"})}),h.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-background",children:h.jsx(DO,{className:"w-5 h-5"})})]})]})})},zO=({newsItem:t,onClose:e})=>h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:h.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-lg bg-component-bg text-text-main flex flex-col",onClick:n=>n.stopPropagation(),children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 break-words",children:t.title}),h.jsx("div",{className:"prose prose-sm max-w-none text-text-main opacity-80 overflow-y-auto max-h-[60vh] ",dangerouslySetInnerHTML:{__html:t.fullText}}),h.jsx("button",{onClick:e,className:"w-full py-2 mt-6 rounded-lg bg-accent text-white font-bold",children:"Закрыть"})]})}),Yn=({title:t,onBack:e})=>h.jsxs("div",{className:"sticky top-0 bg-component-bg z-20 py-3 px-4 flex items-center border-b border-border-color shadow-sm text-text-main",children:[e&&h.jsx("button",{onClick:e,className:"mr-4 p-2 -ml-2 rounded-full hover:bg-background",children:h.jsx(VS,{})}),h.jsx("h1",{className:"text-xl font-bold",children:t})]}),BO=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Что такое Tenebris Verbum?"}),h.jsx("p",{className:"opacity-80",children:"Tenebris Verbum — это веб-приложение, созданное для комфортного чтения новелл. Оно представляет собой цифровую библиотеку, доступную через Telegram, и оптимизировано для мобильных устройств."}),h.jsxs("div",{className:"mt-4 space-y-2 opacity-80",children:[h.jsx("p",{className:"font-semibold",children:"Ключевые возможности приложения:"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Библиотека новелл:"})," Главный экран, где вы можете просматривать доступные новеллы, их обложки и названия."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Подробная информация о новелле:"})," Нажав на новеллу, вы увидите детальную страницу с её описанием, автором, жанрами и списком глав."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Удобная читалка:"})," Приложение предлагает продуманный интерфейс для чтения глав с возможностью настройки размера шрифта."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Система закладок:"})," Вы можете добавлять понравившиеся новеллы в закладки для быстрого доступа."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Поиск и фильтрация:"})," Есть функция поиска по названию новеллы и возможность фильтрации по жанрам прямо из карточки новеллы."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Интерактивность:"})," Пользователи могут оставлять комментарии к главам, отвечать на комментарии других, ставить лайки главам и комментариям."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Персонализация:"})," В профиле можно переключаться между светлой и тёмной темами оформления."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Система подписок:"})," Для доступа к эксклюзивным (платным) главам в приложении реализована система подписок."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Руководство пользователя и правила"}),h.jsxs("div",{className:"space-y-4 opacity-80",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"1. Вход и Регистрация:"}),h.jsx("p",{children:"При первом входе в приложение вас встретит экран авторизации. Вы можете создать новый аккаунт, указав ваше имя, email и пароль, либо войти в уже существующий. Это необходимо для сохранения вашего прогресса, закладок и статуса подписки."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"2. Навигация:"}),h.jsx("p",{children:"В нижней части экрана расположена панель навигации с четырьмя основными разделами:"}),h.jsxs("ul",{className:"list-disc list-inside ml-4",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Библиотека:"})," Ваш основной экран с каталогом всех новелл."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Поиск:"})," Раздел для поиска новелл по названию."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Закладки:"})," Здесь хранятся все новеллы, которые вы отметили."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Профиль:"})," Управление вашим аккаунтом и подпиской."]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"3. Чтение:"}),h.jsx("p",{children:"На странице новеллы выберите нужную главу из списка. Некоторые главы могут быть отмечены иконкой замка (🔒) — это платный контент, доступный по подписке. В режиме чтения вы можете:"}),h.jsxs("ul",{className:"list-disc list-inside ml-4",children:[h.jsx("li",{children:"Переключаться между главами с помощью стрелок внизу экрана."}),h.jsx("li",{children:"Открыть оглавление, чтобы быстро перейти к другой главе."}),h.jsx("li",{children:'Зайти в настройки (иконка шестерёнки) и изменить размер текста кнопками "+" и "-".'})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"4. Профиль:"}),h.jsxs("p",{children:["В этом разделе вы можете видеть ваш email и имя. Здесь находится кнопка для выхода из аккаунта. Тут же можно включить или выключить тёмную тему. ",h.jsx("b",{children:"Ваш ID для привязки:"})," Это уникальный идентификатор вашего аккаунта. Он понадобится для активации подписки через Telegram-бота. Его можно скопировать одним нажатием."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Активация подписок"}),h.jsx("p",{className:"opacity-80 mb-3",children:"Подписка открывает доступ ко всем платным главам во всех новеллах. Процесс оформления разделён на несколько шагов."}),h.jsxs("div",{className:"space-y-4 opacity-80",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"Шаг 1: Выбор тарифа"}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["Зайдите в раздел ",h.jsx("b",{children:'"Профиль"'}),"."]}),h.jsxs("li",{children:["Нажмите кнопку ",h.jsx("b",{children:'"Оформить подписку"'}),"."]}),h.jsxs("li",{children:["Во всплывающем окне выберите один из доступных тарифов:",h.jsxs("ul",{className:"list-disc list-inside ml-6",children:[h.jsxs("li",{children:[h.jsx("b",{children:"1 месяц"})," за 199 ₽"]}),h.jsxs("li",{children:[h.jsx("b",{children:"3 месяца"})," за 539 ₽"]}),h.jsxs("li",{children:[h.jsx("b",{children:"1 год"})," за 1899 ₽"]})]})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:"Шаг 2: Выбор способа оплаты"}),h.jsxs("p",{className:"mb-2",children:["После выбора тарифа вам будет предложено три способа оплаты. Каждый из них требует взаимодействия с Telegram-ботом ",h.jsx("b",{children:"tenebrisverbot"}),"."]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h5",{className:"font-semibold",children:"Способ 1: Boosty (Автоматическая активация)"}),h.jsx("p",{children:"Это самый быстрый и рекомендуемый способ."}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["В приложении, после выбора тарифа, нажмите ",h.jsx("b",{children:'"Оплатить через Boosty"'}),"."]}),h.jsx("li",{children:"Вас автоматически перенаправит в Telegram-бот, который привяжет ваш Telegram-аккаунт к вашему профилю в приложении."}),h.jsx("li",{children:"Бот пришлет вам ссылку на Boosty и дальнейшие инструкции."}),h.jsx("li",{children:"Перейдите по ссылке, оформите подписку на Boosty и вступите в приватную Telegram-группу (ссылку предоставит Boosty после оплаты)."}),h.jsx("li",{children:"Как только вы вступите в группу, вернитесь в бот и отправьте ему команду /check ВАШ_ID (скопируйте ID из профиля в приложении)."}),h.jsxs("li",{children:["Бот проверит ваше членство в группе и ",h.jsx("b",{children:"автоматически активирует подписку на 1 месяц"}),"."]})]}),h.jsx("h5",{className:"font-semibold pt-2",children:"Способы 2 и 3: Банковская карта или Донат через Tribut (Ручная проверка)"}),h.jsx("p",{children:"Эти способы требуют ручного подтверждения администратором."}),h.jsxs("ol",{className:"list-decimal list-inside ml-4",children:[h.jsxs("li",{children:["В приложении выберите тариф, а затем — ",h.jsx("b",{children:'"Банковской картой"'})," или ",h.jsx("b",{children:'"Донат через tribut"'}),"."]}),h.jsx("li",{children:"Вас перенаправит в Telegram-бот."}),h.jsxs("li",{children:["Бот сгенерирует для вас ",h.jsx("b",{children:"уникальный код платежа"})," (например, SUB12345-6789) и пришлет реквизиты."]}),h.jsxs("li",{children:[h.jsx("b",{children:"ЭТО ВАЖНО:"})," Совершите перевод/донат, и в поле ",h.jsx("b",{children:'"комментарий"'})," или ",h.jsx("b",{children:'"сообщение к донату" ОБЯЗАТЕЛЬНО'})," укажите тот самый уникальный код, который прислал бот. Без этого кода администратор не сможет найти ваш платеж."]}),h.jsx("li",{children:"После получения оплаты администратор воспользуется специальной командой, чтобы активировать вашу подписку."}),h.jsx("li",{children:"Бот пришлет вам уведомление об успешной активации."})]})]})]})]})]})]}),qO=()=>h.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),h.jsx("p",{children:"Настоящее Пользовательское соглашение (далее – «Соглашение») регулирует отношения между Администрацией приложения Tenebris Verbum (далее – «Администрация», «Сервис») и пользователем сети Интернет (далее – «Пользователь»), возникающие при использовании Сервиса."}),h.jsx("p",{children:"Перед началом использования Сервиса, пожалуйста, внимательно ознакомьтесь с его условиями. Начало использования Сервиса означает ваше полное и безоговорочное принятие (Акцепт) настоящего Соглашения. Если вы не согласны с какими-либо из его положений, вы должны немедленно прекратить использование Сервиса."}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Основные термины"}),h.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"Сервис:"})," Веб-приложение Tenebris Verbum, предоставляющее доступ к художественным текстам (контенту) в режиме онлайн-чтения."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Пользователь:"})," Любое физическое лицо, достигшее 18 лет (или обладающее полной дееспособностью), которое осуществляет доступ к Сервису и принимает условия данного Соглашения."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Акцепт:"})," Полное и безоговорочное принятие Пользователем условий настоящего Соглашения, которое совершается путем продолжения использования Сервиса."]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Предмет Соглашения"}),h.jsx("p",{children:"2.1. Администрация предоставляет Пользователю неисключительное, безвозмездное право на доступ к контенту, размещенному в Сервисе, исключительно для личного некоммерческого ознакомления путем чтения."}),h.jsx("p",{children:"2.2. Сервис не предоставляет технической возможности для скачивания, сохранения или любого другого способа копирования контента."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Интеллектуальная собственность и правила использования контента"}),h.jsxs("p",{children:["3.1. ",h.jsx("b",{children:"Авторские права:"})," Все тексты, изображения и другие материалы, размещенные в Сервисе, являются объектами авторского права и защищены законодательством."]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["3.2. ",h.jsx("b",{children:"Запрещенные действия:"})," Пользователю категорически запрещается:"]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Копировать, распространять, публично воспроизводить или иным образом использовать контент Сервиса в коммерческих или неличных целях."}),h.jsx("li",{children:"Использовать скрипты, боты или любые другие автоматизированные средства для сбора данных, массового скачивания или взаимодействия с Сервисом."}),h.jsx("li",{children:"Предпринимать попытки обойти технические ограничения, установленные Администрацией."})]})]}),h.jsxs("p",{className:"mt-2",children:["3.3. ",h.jsx("b",{children:"Процедура для правообладателей:"})," Если вы являетесь правообладателем и считаете, что ваши права нарушены, просим вас связаться с Администрацией через доступные каналы связи. Администрация обязуется рассмотреть ваше обращение и, в случае подтверждения нарушения, незамедлительно удалить соответствующий контент."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Правовой статус Сервиса и ограничение ответственности"}),h.jsxs("p",{children:["4.1. ",h.jsx("b",{children:"Информационный посредник:"})," В соответствии со ст. 1253.1 ГК РФ, Сервис является информационным посредником. Администрация предоставляет платформу для размещения материалов и не является инициатором их создания, не изменяет их содержание и не несет ответственности за него до момента получения обоснованного уведомления о нарушении."]}),h.jsxs("p",{children:["4.2. ",h.jsx("b",{children:"Ответственность за контент:"})," Ответственность за правомерность использования контента несут независимые подрядчики, предоставляющие материалы для размещения и гарантирующие наличие у них всех необходимых прав. Администрация не несет ответственности за недобросовестные действия таких подрядчиков."]}),h.jsxs("p",{children:["4.3. ",h.jsx("b",{children:"Соблюдение законодательства:"})," Администрация принимает меры для соблюдения законодательства РФ, включая добавление обязательной маркировки, установку возрастной маркировки («18+») и незамедлительное удаление запрещенных материалов."]}),h.jsxs("p",{children:["4.4. ",h.jsx("b",{children:"Ограничение ответственности:"})," Администрация не несет ответственности за технические сбои, содержание произведений и любой косвенный ущерб, который может быть причинен Пользователю."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Права и обязанности сторон"}),h.jsxs("div",{children:[h.jsxs("p",{children:["5.1. ",h.jsx("b",{children:"Администрация вправе:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"В любое время изменять или удалять любой контент, изменять дизайн и функционал Сервиса."}),h.jsx("li",{children:"Применять технические средства защиты от вредоносных действий (например, блокировать IP-адреса, с которых исходит чрезмерное количество запросов или иная подозрительная активность)."}),h.jsx("li",{children:"Вносить изменения в настоящее Соглашение в одностороннем порядке. Новая редакция вступает в силу с момента ее публикации."})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["5.2. ",h.jsx("b",{children:"Пользователь обязан:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Соблюдать условия настоящего Соглашения."}),h.jsx("li",{children:"Не использовать Сервис для распространения любой запрещенной информации."}),h.jsx("li",{children:"Соблюдать установленные возрастные ограничения."})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"6. Разрешение споров"}),h.jsx("p",{children:"6.1. Все споры и разногласия подлежат разрешению в соответствии с действующим законодательством Российской Федерации."}),h.jsx("p",{children:"6.2. Местом разрешения споров в судебном порядке является суд по месту нахождения Администрации."})]})]}),HO=()=>h.jsxs("div",{className:"space-y-4 text-sm opacity-90",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Последнее обновление:"})," 17 сентября 2025 г."]}),h.jsx("p",{children:"Настоящая Политика конфиденциальности (далее – «Политика») является неотъемлемой частью Пользовательского соглашения и объясняет, какие данные мы собираем и для каких целей. Используя Сервис, вы выражаете безоговорочное согласие с настоящей Политикой."}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"1. Собираемая информация"}),h.jsxs("div",{children:[h.jsxs("p",{children:["1.1. ",h.jsx("b",{children:"Данные, предоставляемые Пользователем:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"При регистрации:"})," Ваше имя, адрес электронной почты (email) и пароль (хранится в зашифрованном виде)."]}),h.jsxs("li",{children:[h.jsx("b",{children:"При взаимодействии:"})," Комментарии, лайки, закладки."]}),h.jsxs("li",{children:[h.jsx("b",{children:"При оплате:"})," Ваш Telegram ID для привязки к аккаунту и проверки статуса подписки."]})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("p",{children:["1.2. ",h.jsx("b",{children:"Технические данные, собираемые автоматически:"})]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsxs("li",{children:[h.jsx("b",{children:"IP-адрес:"})," Для обеспечения безопасности и предотвращения злоупотреблений."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Информация о браузере, ОС и типе устройства:"})," Для корректной и адаптивной работы Сервиса."]}),h.jsxs("li",{children:[h.jsx("b",{children:"Данные о взаимодействии с Сервисом:"})," Время доступа и информация о посещенных страницах внутри Сервиса для ведения внутренней аналитики."]})]})]}),h.jsxs("p",{className:"mt-2",children:["1.3. ",h.jsx("b",{children:"Что мы НЕ собираем:"})," Сервис целенаправленно ",h.jsx("b",{children:"не собирает"})," и не обрабатывает ваши точные данные геолокации, историю просмотров вне нашего Сервиса и другие персональные данные, не указанные выше."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"2. Цели обработки данных"}),h.jsxs("p",{children:["2.1. ",h.jsx("b",{children:"Обеспечение работы Сервиса:"})," Собранные данные необходимы для управления вашей учетной записью, предоставления доступа к функциям, обработки подписок и защиты от мошеннических действий."]}),h.jsxs("p",{children:["2.2. ",h.jsx("b",{children:"Аналитика и улучшение:"})," Обезличенные технические данные используются для анализа работы Сервиса, выявления проблем и его дальнейшего совершенствования."]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"3. Передача и хранение данных"}),h.jsxs("p",{children:["3.1. ",h.jsx("b",{children:"Хранение:"})," Данные хранятся на защищенных серверах в течение срока, необходимого для выполнения целей их обработки."]}),h.jsxs("div",{children:[h.jsxs("p",{children:["3.2. ",h.jsx("b",{children:"Передача третьим лицам:"})," Мы не продаем ваши данные. Передача возможна только:"]}),h.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[h.jsx("li",{children:"Техническим подрядчикам (например, хостинг-провайдерам), которые обеспечивают работу Сервиса."}),h.jsx("li",{children:"Государственным органам по законному и обоснованному запросу."})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"4. Защита информации"}),h.jsx("p",{children:"Администрация принимает все необходимые и достаточные технические и организационные меры для защиты вашей информации от несанкционированного доступа, изменения или раскрытия."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-base mb-2",children:"5. Изменение Политики"}),h.jsx("p",{children:"Администрация оставляет за собой право вносить изменения в настоящую Политику. Новая редакция вступает в силу с момента ее размещения в Сервисе. Продолжение использования Сервиса после внесения изменений означает ваше согласие с новой редакцией."})]})]}),sE=({onBack:t,onAccept:e})=>{const[n,i]=U.useState("guide"),s=[{id:"guide",title:"Руководство"},{id:"terms",title:"Соглашение"},{id:"privacy",title:"Политика"}];return h.jsxs("div",{className:"bg-background min-h-screen text-text-main pb-24",children:[" ",h.jsx(Yn,{title:"Справка и информация",onBack:e?void 0:t}),h.jsx("div",{className:"px-4 pt-4",children:h.jsx("div",{className:"flex space-x-1 rounded-lg bg-component-bg p-1 border border-border-color",children:s.map(r=>h.jsx("button",{onClick:()=>i(r.id),className:`w-full rounded-md py-2.5 text-sm font-medium transition-colors
                                ${n===r.id?"bg-accent text-white shadow":"text-text-main/70 hover:bg-background"}`,children:r.title},r.id))})}),h.jsxs("div",{className:"p-4",children:[n==="guide"&&h.jsx(BO,{}),n==="terms"&&h.jsx(qO,{}),n==="privacy"&&h.jsx(HO,{})]}),e&&h.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-sm border-t border-border-color shadow-lg",children:h.jsx("button",{onClick:e,className:"w-full bg-accent text-white font-bold py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors",children:"Принять и продолжить"})})]})},FO=t=>t?typeof t.toDate=="function"?t.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit"}):(console.warn("Получен неожиданный формат даты:",t),""):"",GO=({novel:t,onSelectChapter:e,onGenreSelect:n,subscription:i,botUsername:s,userId:r,chapters:a,isLoadingChapters:l,lastReadData:u,onBack:f})=>{const{user:m}=OS();if(!t)return h.jsxs("div",{children:[h.jsx(Yn,{title:"Загрузка...",onBack:f}),h.jsx("div",{className:"p-4 text-center",children:"Загрузка данных о новелле..."})]});U.useEffect(()=>{if(m&&t&&t.id){const te=`viewed-${t.id}`;if(!sessionStorage.getItem(te)){sessionStorage.setItem(te,"true");const _e=Tt(it,"novel_stats",t.id.toString());ul(_e,{views:nD(1)},{merge:!0}).catch(B=>console.error("Ошибка обновления счетчика просмотров:",B))}}},[t,m]);const[g,p]=U.useState(!1),[_,C]=U.useState(null),[O,V]=U.useState("newest"),[S,E]=U.useState(!1),x=U.useRef(null),[D,L]=U.useState(!1),H=Array.isArray(t.genres)?t.genres:[],T=i&&i.expires_at&&typeof i.expires_at.toDate=="function"&&i.expires_at.toDate()>new Date,v=U.useMemo(()=>u&&t&&u[t.id]?u[t.id].chapterId:null,[u,t]);U.useEffect(()=>{x.current&&setTimeout(()=>{x.current&&L(x.current.scrollHeight>x.current.clientHeight)},100)},[t.description]);const b=U.useMemo(()=>{if(!Array.isArray(a))return[];const te=[...a];return O==="newest"?te.reverse():a},[a,O]),A=te=>{!T&&te.isPaid?p(!0):e(te)},R=()=>{if(v){const te=a.find(_e=>_e.id===v);te&&e(te)}},I=te=>C(te),w=async te=>{var B;const _e=(B=window.Telegram)==null?void 0:B.WebApp;if(!_e||!r||!_){console.error("Telegram Web App, userId, or selectedPlan is not available."),_e&&_e.showAlert("Произошла ошибка. Пожалуйста, попробуйте еще раз.");return}_e.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не реагирует после того, как вы выбрали тариф, не волнуйтесь! Попробуйте отправить команду /start еще раз.",async $=>{if(!$)return;const Y=Tt(it,"users",r);try{await ul(Y,{pendingSubscription:{..._,method:te,date:new Date().toISOString()}},{merge:!0}),_e.openTelegramLink(`https://t.me/${s}?start=${r}`),_e.close()}catch(me){console.error("Ошибка записи в Firebase:",me),_e.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}})};return console.log("Содержимое глав:",b),h.jsxs("div",{className:"text-text-main",children:[h.jsx(Yn,{title:t.title,onBack:f}),h.jsxs("div",{className:"relative h-64",children:[h.jsx("img",{src:`/${t.coverUrl}`,alt:t.title,className:"w-full h-full object-cover object-top absolute"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),h.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[h.jsx("h1",{className:"text-3xl font-bold font-sans text-text-main drop-shadow-[0_2px_2px_rgba(255,255,255,0.7)]",children:t.title}),h.jsx("p",{className:"text-sm font-sans text-text-main opacity-90 drop-shadow-[0_1px_1px_rgba(255,255,255,0.7)]",children:t.author})]})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:H.map(te=>{const B=`
            text-xs font-semibold px-3 py-1 rounded-full transition-colors 
            duration-200 bg-component-bg border hover:bg-border-color
            ${te==="16+"||te==="18+"?"border-genre-highlight-border text-genre-highlight-text":"border-border-color text-text-main"}
        `;return h.jsx("button",{onClick:()=>n(te),className:B,children:te},te)})}),h.jsx("div",{ref:x,className:`relative overflow-hidden transition-all duration-500 ${S?"max-h-full":"max-h-24"}`,children:h.jsx("div",{className:"text-sm mb-2 opacity-80 font-body prose",dangerouslySetInnerHTML:{__html:t.description}})}),D&&h.jsx("div",{className:"text-right mt-2",children:h.jsx("button",{onClick:()=>E(!S),className:"text-sm font-semibold text-accent mb-4",children:S?"Скрыть":"Читать полностью..."})}),v&&h.jsxs("button",{onClick:R,className:"w-full py-3 mb-4 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105 hover:shadow-xl",children:["Продолжить чтение (Глава ",v,")"]}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Главы"}),h.jsx("button",{onClick:()=>V(te=>te==="newest"?"oldest":"newest"),className:"text-sm font-semibold text-accent",children:O==="newest"?"Сначала новые":"Сначала старые"})]}),T&&h.jsxs("p",{className:"text-sm text-green-500 mb-4",children:["Подписка до ",i.expires_at.toDate().toLocaleDateString()]}),l?h.jsx("p",{children:"Загрузка глав..."}):h.jsx("div",{className:"flex flex-col gap-3",children:b.map((te,_e)=>{const B=!T&&te.isPaid,$=v===te.id,Y=O==="newest"?b.length-_e:_e+1;return h.jsxs("div",{onClick:()=>A(te),className:`p-4 bg-component-bg rounded-xl cursor-pointer transition-all duration-200 hover:border-accent-hover hover:bg-accent/10 border border-border-color flex items-center justify-between shadow-sm hover:shadow-md ${B?"opacity-70":""}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[$&&h.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),h.jsx("p",{className:"font-semibold",children:te.title})]}),h.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[h.jsx("div",{className:"bg-accent rounded-full w-8 h-8 flex items-center justify-center ml-auto",children:h.jsx("span",{className:"text-white font-bold text-sm",children:Y})}),h.jsx("p",{className:"text-text-main opacity-70 text-xs mt-1",children:FO(te.published_at)})]})]},te.id)})}),g&&h.jsx(hg,{onClose:()=>p(!1),onSelectPlan:I}),_&&h.jsx(fg,{onClose:()=>C(null),onSelectMethod:w,plan:_})]})]})},QO=({chapter:t,novel:e,userId:n,userName:i,subscription:s,botUsername:r,onBack:a,isUserAdmin:l,allChapters:u,onSelectChapter:f,fontSize:m,onFontSizeChange:g,fontFamily:p,onFontFamilyChange:_,lineHeight:C,onLineHeightChange:O,textAlign:V,onTextAlignChange:S,textIndent:E,onTextIndentChange:x,paragraphSpacing:D,onParagraphSpacingChange:L})=>{if(!e||!t)return h.jsxs("div",{children:[h.jsx(Yn,{title:"Загрузка...",onBack:a}),h.jsx("div",{className:"p-4 text-center",children:"Подготовка главы..."})]});const[H,T]=U.useState([]),[v,b]=U.useState(null),[A,R]=U.useState(!0),[I,w]=U.useState(!1),[te,_e]=U.useState(""),[B,$]=U.useState(null),[Y,me]=U.useState(""),[Me,fn]=U.useState(null),[Ke,be]=U.useState(""),[tt,_t]=U.useState(0),[Wn,Ze]=U.useState(!1),[Jn,jt]=U.useState(!1),[Ci,Ht]=U.useState(!1),[Ni,An]=U.useState(!1),[On,Di]=U.useState(null),[Oi,ei]=U.useState(""),[Pa,Vi]=U.useState(!0),ti=s&&s.expires_at&&typeof s.expires_at.toDate=="function"&&s.expires_at.toDate()>new Date,G=U.useMemo(()=>Tt(it,"chapters_metadata",`${e.id}_${t.id}`),[e.id,t.id]),ie=U.useMemo(()=>im(it,`chapters_metadata/${e.id}_${t.id}/comments`),[e.id,t.id]),He=U.useCallback(async()=>{if(!(I||!A)){w(!0);try{let Q;v?Q=Vv(ie,Mv("timestamp","desc"),GN(v),kv(20)):Q=Vv(ie,Mv("timestamp","desc"),kv(20));const Z=await rm(Q),re=Z.docs.map(ce=>({id:ce.id,...ce.data()}));let se=re;n&&re.length>0&&(se=await Promise.all(re.map(async ce=>{const Ft=Tt(it,`chapters_metadata/${e.id}_${t.id}/comments/${ce.id}/likes`,n),Kl=await Ir(Ft);return{...ce,userHasLiked:Kl.exists()}}))),T(ce=>[...ce,...se]);const Se=Z.docs[Z.docs.length-1];b(Se),Z.docs.length<20&&R(!1)}catch(Q){console.error("Ошибка загрузки комментариев: ",Q)}finally{w(!1)}}},[I,A,v,ie,n,e.id,t.id]);U.useEffect(()=>{T([]),b(null),R(!0),w(!1),(async()=>{try{const Z=await Ir(G);if(_t(Z.exists()&&Z.data().likeCount||0),n){const re=Tt(it,`chapters_metadata/${e.id}_${t.id}/likes`,n),se=await Ir(re);Ze(se.exists())}else Ze(!1);await He()}catch(Z){console.error("Ошибка загрузки данных главы:",Z)}})()},[G,n,e.id,t.id,He]),U.useEffect(()=>{(async()=>{if(Vi(!0),ei(""),t.isPaid&&!ti){Vi(!1),ei(`### 🔒 Для доступа к этой главе необходима подписка.

Пожалуйста, оформите подписку в разделе "Профиль", чтобы продолжить чтение.`);return}try{const Z=Tt(it,"chapter_content",`${e.id}-${t.id}`),re=await Ir(Z);re.exists()?ei(re.data().content):ei(`## Ошибка

Не удалось загрузить текст главы. Пожалуйста, попробуйте позже.`)}catch(Z){console.error("Ошибка загрузки главы:",Z),ei(`## Ошибка

Произошла ошибка при загрузке. Проверьте ваше интернет-соединение.`)}finally{Vi(!1)}})()},[e.id,t.id,t.isPaid,ti]);const vt=U.useCallback(async(Q,Z=null)=>{Q.preventDefault();const re=Z?Ke:te;if(!(!re.trim()||!n))try{await ul(G,{},{merge:!0});const se={userId:n,userName:i||"Аноним",text:re,timestamp:Uf(),likeCount:0,novelTitle:e.title,chapterTitle:t.title,isNotified:!1};if(Z){se.replyTo=Z;const ce=await Ir(Tt(ie,Z));ce.exists()&&(se.parentUserId=ce.data().userId)}const Se=await ZN(ie,se);T(ce=>[{...se,id:Se.id,userHasLiked:!1,timestamp:new Date},...ce]),Z?(fn(null),be("")):_e("")}catch(se){console.error("Ошибка добавления комментария:",se)}},[n,i,te,Ke,G,e.id,t.id,e.title,t.title,ie]),ke=U.useCallback(async Q=>{if(!n)return;const Z=Tt(it,`chapters_metadata/${e.id}_${t.id}/comments`,Q),re=Tt(it,`chapters_metadata/${e.id}_${t.id}/comments/${Q}/likes`,n);T(se=>se.map(Se=>{if(Se.id===Q){const ce=Se.userHasLiked?(Se.likeCount||1)-1:(Se.likeCount||0)+1;return{...Se,userHasLiked:!Se.userHasLiked,likeCount:ce}}return Se}));try{await Lv(it,async se=>{const Se=await se.get(re),ce=await se.get(Z);if(!ce.exists())return;const Ft=ce.data().likeCount||0;Se.exists()?(se.delete(re),se.update(Z,{likeCount:Math.max(0,Ft-1)})):(se.set(re,{timestamp:Uf()}),se.update(Z,{likeCount:Ft+1}))})}catch(se){console.error("Ошибка при обновлении лайка комментария:",se),T(Se=>Se.map(ce=>{if(ce.id===Q){const Ft=ce.userHasLiked?(ce.likeCount||0)+1:(ce.likeCount||1)-1;return{...ce,userHasLiked:!ce.userHasLiked,likeCount:Ft}}return ce}))}},[n,e.id,t.id]),Ae=U.useCallback(Q=>{Q?($(Q.id),me(Q.text)):($(null),me(""))},[]),Ie=U.useCallback(async Q=>{if(!Y.trim())return;const Z=Tt(it,`chapters_metadata/${e.id}_${t.id}/comments`,Q);await $N(Z,{text:Y}),T(re=>re.map(se=>se.id===Q?{...se,text:Y}:se)),$(null),me("")},[Y,e.id,t.id]),Sn=U.useCallback(async Q=>{const Z=Tt(it,`chapters_metadata/${e.id}_${t.id}/comments`,Q);await XN(Z),T(re=>re.filter(se=>se.id!==Q))},[e.id,t.id]),fr=U.useCallback(Q=>{fn(Z=>Z===Q?null:Q),be("")},[]),Zt=async()=>{if(!n)return;const Q=Wn;Ze(!Q),_t(re=>Q?re-1:re+1);const Z=Tt(it,`chapters_metadata/${e.id}_${t.id}/likes`,n);try{await Lv(it,async re=>{var Ft;const se=await re.get(Z),ce=((Ft=(await re.get(G)).data())==null?void 0:Ft.likeCount)||0;se.exists()?(re.delete(Z),re.set(G,{likeCount:Math.max(0,ce-1)},{merge:!0})):(re.set(Z,{timestamp:Uf()}),re.set(G,{likeCount:ce+1},{merge:!0}))})}catch(re){console.error("Ошибка при обновлении лайка:",re),Ze(Q),_t(se=>Q?se+1:se-1)}},La=Q=>{Q&&(!ti&&Q.isPaid?(jt(!1),An(!0)):(f(Q),jt(!1)))},Ns=Q=>{Di(Q),An(!1)},Fl=async Q=>{var re;const Z=(re=window.Telegram)==null?void 0:re.WebApp;Z&&n&&On&&Z.showConfirm("Вы будете перенаправлены в бот для завершения оплаты. Если бот не ответит, отправьте команду /start.",async se=>{if(se){const Se=Tt(it,"users",n);try{await ul(Se,{pendingSubscription:{...On,method:Q,date:new Date().toISOString()}},{merge:!0}),Z.openTelegramLink(`https://t.me/${r}?start=${n}`),Z.close()}catch(ce){console.error("Ошибка записи в Firebase:",ce),Z.showAlert("Не удалось сохранить ваш выбор. Попробуйте снова.")}}})},Ua=u.findIndex(Q=>Q.id===t.id),dr=u[Ua-1],Gl=u[Ua+1],kh=Q=>window.marked?`<div class="prose max-w-none">${window.marked.parse(Q)}</div>`:Q,za=U.useMemo(()=>[...H].sort((Q,Z)=>{var Se,ce;const re=(Se=Q.timestamp)!=null&&Se.toDate?Q.timestamp.toDate().getTime():0,se=(ce=Z.timestamp)!=null&&ce.toDate?Z.timestamp.toDate().getTime():0;return re-se}),[H]),Ql={fontSize:`${m}px`,fontFamily:p,lineHeight:C,textAlign:V};return h.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background text-text-main",children:[h.jsx("style",{children:`
            .chapter-content p {
              text-indent: ${E}em;
              margin-bottom: ${D}em;
            }
          `}),h.jsx(Yn,{title:e.title,onBack:a}),h.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-3xl mx-auto pb-24",children:[h.jsx("h2",{className:"text-lg sm:text-xl mb-8 text-center opacity-80 font-sans",children:t.title}),h.jsx("div",{className:"whitespace-normal chapter-content",style:Ql,dangerouslySetInnerHTML:{__html:Pa?'<p class="text-center">Загрузка текста главы...</p>':kh(Oi)}}),h.jsx("div",{className:"text-center my-8 text-accent font-bold text-2xl tracking-widest",children:"╚══ ≪ °❈° ≫ ══╝"}),h.jsxs("div",{className:"border-t border-border-color pt-8",children:[h.jsx("div",{className:"flex items-center gap-4 mb-8",children:h.jsxs("button",{onClick:Zt,className:"flex items-center gap-2 text-accent-hover transition-transform hover:scale-110",children:[h.jsx(kS,{filled:Wn,className:Wn?"text-accent":""}),h.jsx("span",{className:"font-bold text-lg",children:tt})]})}),h.jsx("h3",{className:"text-xl font-bold mb-4",children:"Комментарии"}),h.jsxs("div",{className:"space-y-4 mb-6",children:[H.length>0?kO(za).map(Q=>h.jsx(LS,{comment:Q,onReply:fr,onLike:ke,onEdit:Ae,onDelete:Sn,onUpdate:Ie,isUserAdmin:l,currentUserId:n,editingCommentId:B,editingText:Y,setEditingText:me,replyingTo:Me,replyText:Ke,setReplyText:be,onCommentSubmit:vt},Q.id)):!I&&h.jsx("p",{className:"opacity-70 text-sm",children:"Комментариев пока нет. Будьте первым!"}),I&&h.jsx("p",{className:"text-center opacity-70",children:"Загрузка комментариев..."}),A&&!I&&H.length>0&&h.jsx("div",{className:"text-center pt-4",children:h.jsx("button",{onClick:He,disabled:I,className:"text-accent hover:underline font-semibold px-4 py-2 rounded-lg disabled:opacity-50",children:I?"Загрузка...":"Загрузить ещё"})})]}),h.jsxs("form",{onSubmit:Q=>vt(Q,null),className:"flex items-center gap-2",children:[h.jsx("input",{type:"text",value:te,onChange:Q=>_e(Q.target.value),placeholder:"Написать комментарий...",className:"w-full bg-component-bg border border-border-color rounded-lg py-2 px-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent text-sm"}),h.jsx("button",{type:"submit",className:"p-2 rounded-full bg-accent text-white flex items-center justify-center",children:h.jsx(jS,{className:"w-5 h-5"})})]})]})]}),h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-2 border-t border-border-color bg-component-bg flex justify-between items-center z-10 text-text-main",children:[h.jsx("button",{onClick:()=>La(dr),disabled:!dr,className:"p-2 disabled:opacity-50",children:h.jsx(VS,{})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>jt(!0),className:"px-4 py-2 rounded-lg bg-background",children:"Оглавление"}),h.jsx("button",{onClick:()=>Ht(!0),className:"p-2 rounded-lg bg-background",children:h.jsx(OO,{})})]}),h.jsx("button",{onClick:()=>La(Gl),disabled:!Gl,className:"p-2 disabled:opacity-50",children:h.jsx(xO,{className:"opacity-100"})})]}),Jn&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>jt(!1),children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 max-h-[45vh] p-4 rounded-t-2xl bg-component-bg flex flex-col",onClick:Q=>Q.stopPropagation(),children:[h.jsx("h3",{className:"font-bold text-lg mb-4 flex-shrink-0",children:"Главы"}),h.jsx("div",{className:"overflow-y-auto",children:h.jsx("div",{className:"flex flex-col gap-2",children:u.map(Q=>h.jsx("button",{onClick:()=>La(Q),className:`p-2 text-left rounded-md ${Q.id===t.id?"bg-accent text-white":"bg-background"}`,children:Q.title},Q.id))})})]})}),Ci&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-20",onClick:()=>Ht(!1),children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 rounded-t-2xl bg-component-bg text-text-main",onClick:Q=>Q.stopPropagation(),children:[h.jsx("h3",{className:"font-bold text-lg mb-4",children:"Настройки чтения"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Размер текста"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>g(-1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:m}),h.jsx("button",{onClick:()=>g(1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Шрифт"}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsx("button",{onClick:()=>_("'JetBrains Mono', monospace"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("JetBrains Mono")?"bg-accent text-white":"bg-background"}`,children:"Стандарт"}),h.jsx("button",{onClick:()=>_("'Montserrat', sans-serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Montserrat")?"bg-accent text-white":"bg-background"}`,children:"Montserrat"}),h.jsx("button",{onClick:()=>_("'Lora', serif"),className:`px-3 py-1 rounded-md text-sm ${p&&p.includes("Lora")?"bg-accent text-white":"bg-background"}`,children:"Lora"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Интервал"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>O(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:C.toFixed(1)}),h.jsx("button",{onClick:()=>O(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Выравнивание"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>S("left"),className:`px-3 py-1 rounded-md ${V==="left"?"bg-accent text-white":"bg-background"}`,children:"По левому"}),h.jsx("button",{onClick:()=>S("justify"),className:`px-3 py-1 rounded-md ${V==="justify"?"bg-accent text-white":"bg-background"}`,children:"По ширине"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Красная строка"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>x(0),className:`px-3 py-1 rounded-md ${E===0?"bg-accent text-white":"bg-background"}`,children:"Нет"}),h.jsx("button",{onClick:()=>x(1.5),className:`px-3 py-1 rounded-md ${E===1.5?"bg-accent text-white":"bg-background"}`,children:"Да"}),h.jsx("button",{onClick:()=>x(3),className:`px-3 py-1 rounded-md ${E===3?"bg-accent text-white":"bg-background"}`,children:"Большая"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Отступ абзаца"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>L(-.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"-"}),h.jsx("span",{children:D.toFixed(1)}),h.jsx("button",{onClick:()=>L(.1),className:"w-10 h-10 rounded-full bg-background flex items-center justify-center text-xl font-bold",children:"+"})]})]})]})]})}),Ni&&h.jsx(hg,{onClose:()=>An(!1),onSelectPlan:Ns}),On&&h.jsx(fg,{onClose:()=>Di(null),onSelectMethod:Fl,plan:On})]})},KO=({novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})=>h.jsxs("div",{children:[h.jsx(Yn,{title:"Закладки"}),h.jsx(cg,{novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})]}),YO=({user:t,subscription:e,onGetSubscriptionClick:n,userId:i,auth:s,onThemeToggle:r,currentTheme:a,onShowHelp:l})=>{const u=()=>{c4(s).catch(_=>{console.error("Ошибка выхода:",_)})},f=()=>{i&&navigator.clipboard.writeText(i).then(()=>console.log("Firebase UID скопирован в буфер обмена")).catch(_=>console.error("Не удалось скопировать UID: ",_))},g=e&&e.expires_at&&typeof e.expires_at.toDate=="function"?e.expires_at.toDate():null,p=g&&g>new Date;return h.jsxs("div",{children:[h.jsx(Yn,{title:"Профиль"}),h.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-lg",children:(t==null?void 0:t.displayName)||"Аноним"}),h.jsx("p",{className:"text-sm text-text-main/70",children:t==null?void 0:t.email})]}),h.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-background transition-colors",children:h.jsx(VO,{})})]})}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Настройки"}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Тёмная тема"}),h.jsx("button",{onClick:r,className:"w-14 h-7 rounded-full bg-background flex items-center transition-colors p-1",children:h.jsx("div",{className:`w-5 h-5 rounded-full bg-accent shadow-md transform transition-transform ${a==="dark"?"translate-x-7":""}`})})]})]}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Подписка"}),p?h.jsxs("div",{children:[h.jsx("p",{className:"text-green-500",children:"Активна"}),h.jsxs("p",{className:"text-sm opacity-70",children:["Заканчивается: ",g.toLocaleDateString()]})]}):h.jsxs("div",{children:[h.jsx("p",{className:"text-red-500",children:"Неактивна"}),h.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Оформите подписку, чтобы получить доступ ко всем платным главам."}),h.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-accent text-white font-bold shadow-lg shadow-accent/30 transition-all hover:scale-105",children:"Оформить подписку"})]})]}),h.jsxs("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4 mb-4",children:[h.jsx("h3",{className:"font-bold mb-2",children:"Ваш ID для привязки"}),h.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Этот ID нужен для связи вашего аккаунта с Telegram-ботом. Например, после подписки на Boosty."}),h.jsx("div",{className:"bg-background p-2 rounded-md text-xs break-all mb-3",children:h.jsx("code",{children:i||"Загрузка..."})}),h.jsx("button",{onClick:f,disabled:!i,className:"w-full py-2 rounded-lg bg-gray-200 text-gray-800 font-bold transition-all hover:scale-105 disabled:opacity-50",children:"Копировать ID"})]}),h.jsx("div",{className:"p-4 rounded-lg bg-component-bg border border-border-color mx-4",children:h.jsx("button",{onClick:l,className:"w-full text-left text-sm text-accent hover:underline",children:"Справка и правовая информация"})})]})},$O=({novels:t,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})=>{const[s,r]=U.useState(""),a=U.useMemo(()=>t.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())),[t,s]);return h.jsxs("div",{children:[h.jsx(Yn,{title:"Поиск"}),h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:h.jsx(MS,{className:"text-text-main opacity-50"})}),h.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:s,onChange:l=>r(l.target.value),className:"w-full bg-component-bg border-border-color border rounded-lg py-2 pl-10 pr-4 text-text-main placeholder-text-main/50 focus:outline-none focus:ring-2 focus:ring-accent"})]})}),s&&a.length===0?h.jsx("p",{className:"text-center text-text-main opacity-70 mt-8",children:"Ничего не найдено"}):h.jsx(cg,{novels:a,onSelectNovel:e,bookmarks:n,onToggleBookmark:i})]})};function XO(){const{user:t,loading:e}=OS(),[n,i]=U.useState(localStorage.getItem("theme")||"light"),[s,r]=U.useState("list"),[a,l]=U.useState("library"),[u,f]=U.useState([]),[m,g]=U.useState(null),[p,_]=U.useState(null),[C,O]=U.useState(null),[V,S]=U.useState(null),[E,x]=U.useState(!1),[D,L]=U.useState([]),[H,T]=U.useState(!0),[v,b]=U.useState({}),[A,R]=U.useState([]),[I,w]=U.useState(!0),[te,_e]=U.useState(!1),[B,$]=U.useState(null),[Y,me]=U.useState(null),[Me,fn]=U.useState(!1),[Ke,be]=U.useState(!1),[tt,_t]=U.useState(()=>{const G=localStorage.getItem("readingSettings"),ie={fontSize:16,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.6,textAlign:"left",textIndent:1.5,paragraphSpacing:1};return G?{...ie,...JSON.parse(G)}:ie}),Wn="tenebrisverbot",Ze=t==null?void 0:t.uid;U.useEffect(()=>{window.document.documentElement.classList.toggle("dark",n==="dark"),localStorage.setItem("theme",n)},[n]),U.useEffect(()=>{localStorage.setItem("readingSettings",JSON.stringify(tt))},[tt]),U.useEffect(()=>{if(e)return;if(!t){w(!1),f([]),S(null),R([]),b({}),be(!1);return}w(!0);const G=async()=>{try{const Ae=(await rm(im(it,"novels"))).docs.map(Zt=>({...Zt.data(),id:Zt.id})),Ie=await rm(im(it,"novel_stats")),Sn=new Map;Ie.forEach(Zt=>Sn.set(Zt.id,Zt.data().views));const fr=Ae.map(Zt=>({...Zt,views:Sn.get(Zt.id)||0}));f(fr)}catch(ke){console.error("Ошибка загрузки новелл или статистики:",ke),f([])}},ie=async()=>{try{const ke=await t.getIdTokenResult();x(!!ke.claims.admin)}catch(ke){console.error("Ошибка проверки статуса администратора:",ke),x(!1)}};Promise.all([G(),ie()]).finally(()=>{w(!1)});const He=Tt(it,"users",t.uid),vt=WN(He,ke=>{if(ke.exists()){const Ae=ke.data();S(Ae.subscription||null),b(Ae.lastRead||{}),R(Ae.bookmarks||[]),Ae.settings&&_t(Ie=>({...Ie,...Ae.settings})),Ae.policyAccepted?be(!1):be(!0)}else be(!0)},ke=>{console.error("Ошибка подписки на данные пользователя:",ke)});return()=>vt()},[t,e]),U.useEffect(()=>{if(!m){L([]);return}T(!0),(async()=>{try{const ie=Tt(it,"chapter_info",m.id),He=await Ir(ie);if(He.exists()&&He.data()){const ke=He.data().chapters||{},Ae=Object.keys(ke).map(Ie=>({id:parseInt(Ie),title:`Глава ${Ie}`,isPaid:ke[Ie].isPaid||!1,published_at:ke[Ie].published_at||null})).sort((Ie,Sn)=>Ie.id-Sn.id);L(Ae)}else L([])}catch(ie){console.error("Ошибка загрузки глав:",ie),L([])}finally{T(!1)}})()},[m]);const Jn=U.useCallback(()=>{s==="reader"?(_(null),r("details")):s==="details"&&(g(null),O(null),r("list"))},[s]);U.useEffect(()=>{var ie;const G=(ie=window.Telegram)==null?void 0:ie.WebApp;if(G)return G.ready(),G.expand(),G.onEvent("backButtonClicked",Jn),s==="list"||Ke?G.BackButton.hide():G.BackButton.show(),()=>G.offEvent("backButtonClicked",Jn)},[s,Jn,Ke]);const jt=U.useCallback(async G=>{Ze&&await ul(Tt(it,"users",Ze),G,{merge:!0})},[Ze]),Ci=()=>i(G=>G==="light"?"dark":"light"),Ht=U.useCallback((G,ie)=>{_t(He=>{const vt=typeof ie=="function"?ie(He[G]):ie;if(G==="fontSize"&&(vt<12||vt>28)||(G==="lineHeight"||G==="paragraphSpacing")&&(vt<1||vt>2.5))return He;const ke={...He,[G]:vt};return jt({settings:ke}),ke})},[jt]),Ni=U.useCallback(async G=>{if(_(G),r("reader"),Ze&&m){const ie={...v,[m.id]:{novelId:m.id,chapterId:G.id,timestamp:new Date().toISOString()}};b(ie),await jt({lastRead:ie})}},[Ze,m,v,jt]),An=G=>{g(G),r("details")},On=G=>{O(G),r("list"),l("library")},Di=()=>O(null),Oi=U.useCallback(async G=>{const ie=A.includes(G)?A.filter(He=>He!==G):[...A,G];R(ie),await jt({bookmarks:ie})},[A,jt]),ei=G=>{$(G),_e(!1)},Pa=async G=>{var He;const ie=(He=window.Telegram)==null?void 0:He.WebApp;if(!ie||!Ze||!B){ie&&ie.showAlert("Произошла ошибка.");return}ie.showConfirm("Вы будете перенаправлены в бот для завершения оплаты...",async vt=>{if(vt)try{await jt({pendingSubscription:{...B,method:G,date:new Date().toISOString()}}),ie.openTelegramLink(`https://t.me/${Wn}?start=${Ze}`),ie.close()}catch(ke){console.error("Ошибка записи в Firebase:",ke),ie.showAlert("Не удалось сохранить ваш выбор.")}})},Vi=async()=>{Ze&&(await jt({policyAccepted:!0}),be(!1))};if(e||I&&!Ke)return h.jsx(PO,{});if(t&&Ke)return h.jsx(sE,{onAccept:Vi});if(Me)return h.jsx(sE,{onBack:()=>fn(!1)});if(!t)return h.jsx(wO,{});const ti=()=>{if(s==="details")return h.jsx(GO,{novel:m,onSelectChapter:Ni,onGenreSelect:On,subscription:V,botUsername:Wn,userId:Ze,chapters:D,isLoadingChapters:H,lastReadData:v,onBack:Jn});if(s==="reader")return h.jsx(QO,{chapter:p,novel:m,userId:Ze,userName:(t==null?void 0:t.displayName)||"Аноним",allChapters:D,subscription:V,botUsername:Wn,onBack:Jn,isUserAdmin:E,onSelectChapter:Ni,fontSize:tt.fontSize,onFontSizeChange:G=>Ht("fontSize",ie=>ie+G),fontFamily:tt.fontFamily,onFontFamilyChange:G=>Ht("fontFamily",G),lineHeight:tt.lineHeight,onLineHeightChange:G=>Ht("lineHeight",ie=>ie+G),textAlign:tt.textAlign,onTextAlignChange:G=>Ht("textAlign",G),textIndent:tt.textIndent,onTextIndentChange:G=>Ht("textIndent",G),paragraphSpacing:tt.paragraphSpacing,onParagraphSpacingChange:G=>Ht("paragraphSpacing",ie=>ie+G)});switch(a){case"library":return h.jsxs(h.Fragment,{children:[h.jsx(Yn,{title:"Библиотека"}),h.jsx(UO,{onReadMore:me}),C&&h.jsxs("div",{className:"flex items-center justify-between p-3 mx-4 mb-0 rounded-lg border border-border-color bg-component-bg text-text-main",children:[h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"opacity-70",children:"Жанр:"}),h.jsx("strong",{className:"ml-2",children:C})]}),h.jsx("button",{onClick:Di,className:"text-xs font-bold text-accent hover:underline",children:"Сбросить"})]}),h.jsx(cg,{novels:u.filter(G=>!C||G.genres&&G.genres.includes(C)),onSelectNovel:An,bookmarks:A,onToggleBookmark:Oi})]});case"search":return h.jsx($O,{novels:u,onSelectNovel:An,bookmarks:A,onToggleBookmark:Oi});case"bookmarks":return h.jsx(KO,{novels:u.filter(G=>A.includes(G.id)),onSelectNovel:An,bookmarks:A,onToggleBookmark:Oi});case"profile":return h.jsx(YO,{user:t,subscription:V,onGetSubscriptionClick:()=>_e(!0),userId:Ze,auth:hl,onThemeToggle:Ci,currentTheme:n,onShowHelp:()=>fn(!0)});default:return h.jsx(Yn,{title:"Библиотека"})}};return h.jsxs("main",{className:`bg-background min-h-screen font-sans text-text-main ${E?"":"no-select"}`,children:[h.jsx("div",{className:"pb-20",children:ti()}),s==="list"&&h.jsx(LO,{activeTab:a,setActiveTab:l}),te&&h.jsx(hg,{onClose:()=>_e(!1),onSelectPlan:ei}),B&&h.jsx(fg,{onClose:()=>$(null),onSelectMethod:Pa,plan:B}),Y&&h.jsx(zO,{newsItem:Y,onClose:()=>me(null)})]})}sR.createRoot(document.getElementById("root")).render(h.jsx(pE.StrictMode,{children:h.jsx(AO,{children:h.jsx(XO,{})})}));
